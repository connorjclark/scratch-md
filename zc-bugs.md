## Universal locked doors (#797)
@ Jigglysaint opened this issue on 08/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/876906616904101929



=== @ Jigglysaint 08/17/2021 22:45

Create a new thread to request a feature!

=== @ Jigglysaint 08/17/2021 22:48

Or at the very least, have it so that combos such as lock blocks can work like regular locked doors in that they set the unlocked door status for the screen in the approprate dicretion.  It could be done through scripts, but it would be easier to add as a combo.

=== @ Mitsukara 08/20/2021 22:35

I am a little unclear what universal locked doors means

=== @ Mitsukara 08/20/2021 22:36

Are we talking about a lockblock combo you can place anywhere that just unlocks that one combo, permanently? That sounds useful but also maybe a bit tough to implement
## ‚úÖüîíBug Report String 65 Being Played In Mystical Harps (#798)
@ bigjoe opened this issue on 08/17/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/877180070580604928



=== @ bigjoe 08/17/2021 13:25

Bug Report: In Mystical Harps, the following three screens have a LOT in common, and they all throw a very big error. Picking up any item on them will cause string 65 to be played. They all have the same shop, same string, (possibly) same guy, and two of the same flags set Item Falls From Ceiling, and Hold Up Item.

![image](https://cdn.discordapp.com/attachments/877180070580604928/877181361620934686/unknown.png)

![image](https://cdn.discordapp.com/attachments/877180070580604928/877181397645811722/unknown.png)

![image](https://cdn.discordapp.com/attachments/877180070580604928/877181424720039966/unknown.png)

=== @ P-Tux7 08/17/2021 16:01

non-scripted items, right?

=== @ bigjoe 08/17/2021 16:10

yes, one of the items to which this situation responded did not have any scripts on it, even the janky ass old pickup timer scripts. I had both scripts cleared and this still happened. It happens on these screens. Something about all these screens triggers it, and I TraceS()ed every instance of Screen->Message in the global script

=== @EmilyV99 (discord: Emily) 08/17/2021 16:11

@arceusplayer11 (discord: Deedee) ? Any ideas?

=== @ bigjoe 08/17/2021 16:14

i have a zillion that arent readily apparent, including checking and unchecking every rule that says string in it,  digging into the secondary files, and so on, and ill get to that, but i was thinking since these screens had so much in common something had to be the case

=== @ bigjoe 08/17/2021 16:16

it could be any number of things referencing any number of things ü•µ

=== @ P-Tux7 08/17/2021 18:27

check your global script

=== @ SkyLizardGirl 08/18/2021 01:33


![image](https://cdn.discordapp.com/attachments/877180070580604928/877364524020297748/unknown.png)
This is also a map a bug string is on

![image](https://cdn.discordapp.com/attachments/877180070580604928/877364840245633035/unknown.png)

=== @ SkyLizardGirl 08/18/2021 01:44

and a string bug here

![image](https://cdn.discordapp.com/attachments/877180070580604928/877367229686095962/unknown.png)

=== @ SkyLizardGirl 09/04/2021 06:20

Don‚Äôt forget other strings were showing also, not just 65

=== @EmilyV99 (discord: Emily) 09/04/2021 06:48

this is fixed
(meta) thread name was changed: üíäüîìBug Report String 65 Being Played In Mystical Harps

=== @EmilyV99 (discord: Emily) 09/04/2021 08:56

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) @ SkyLizardGirl

=== @EmilyV99 (discord: Emily) 09/05/2021 10:12

(meta) thread name was changed: ‚úÖüîíBug Report String 65 Being Played In Mystical Harps
## ‚è±üîíSoundfont Support! (#799)
@ RetroNutcase opened this issue on 08/17/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/877316502909509662



=== @ RetroNutcase 08/17/2021 22:22

What it says on the tin. Support soundfonts so we can not be subjected to the awful Windows midi soundfont.

=== @ HammerGuy 08/17/2021 22:42

You can do this through means of a third party program like VirtualMIDISynth.

=== @ RetroNutcase 08/18/2021 01:29

You can, but it's not nearly as convenient. Also, from what I recall, that option isn't without issues, like alt-tab causing all instruments to suddenly become pianos.
Which in turn results in very, VERY unpleasant amounts of ear rape.

=== @EmilyV99 (discord: Emily) 08/20/2021 21:58

Probably not worthwhile to touch this before the rewrite

=== @EmilyV99 (discord: Emily) 08/20/2021 21:59

(meta) thread name was changed: ‚è±üîíSoundfont Support!
## Blackout Fade options for specific warps (#800)
@ Mitsukara opened this issue on 08/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/877400009706967150



=== @ Mitsukara 08/18/2021 03:54

Currently ZC supports multiple types of black opening wipe (also used by Entrance/Exit combos). These include rectangles from the sides (Z1), Circle, Oval (LTTP), spinning Triangle, and Super Mario All-Stars (tiles).

However, they're set up to work quest-wide with quest rules. It would be neat to be able to set each specific warp to use a specific type of fade. (also to be able to do it without relying on entrance/exit combo warps specifically would be nice, since those mess with continue points). Perhaps a fade in / fade out option on each warp combo somehow? Whatever works.

=== @EmilyV99 (discord: Emily) 08/18/2021 03:58

^sfx too

=== @ Mitsukara 08/18/2021 04:04

ooooh yes, a sfx that doesn't get interrupted by the warp would be awesome

=== @ Mitsukara 11/19/2021 09:03

Reviving this one to add some additional ideas.

- The "static"-y effect from the darkness dithering which clears the screen
- A black rectangle that covers the screen from left to right.

also I didn't clarify this before, but it would be really neat to be able to manually set a fade-in for arriving at a warp, so that you can have it fade out when you leave, then reliably fade in when you arrive (currently this only works on certain kinds of warps, I think maybe Entrance/Exit warps or caves?).
## Clock - Split time stopping and invincibility into separate attributes. (#801)
@ Alucard648 opened this issue on 08/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/877423215234928731



=== @ Alucard648 08/18/2021 05:26

As for current ZC version, Clock item cannot stop time without rendering Link invincible at the same time, unlike Castlevania. Here is the link to ancient PureZC forum thread about my futile attempts to do proper time stopping item script.
https://www.purezc.net/forums/index.php?showtopic=62768

=== @ P-Tux7 08/18/2021 06:13

while we're at it
can we make the clock attributes script-writable
link's invincibility and the time stopping (both with args for how much, 0 being "infinite until further notice")
so that if you want a "inventory clock" item you don't have to spawn a literal clock on top of link

=== @ Alucard648 08/18/2021 07:17

(replying to @ P-Tux7 "while we're at it"): 1. Already possible in 2.55 a92
2. I like idea of separate durations.
3. As for Stopwatch, it could keep as is (spawning clocks on top of Link). And add function to check if time id stopped or running.
## ‚ùåüîíCrystal Switch Sparkles (#802)
@ bigjoe opened this issue on 08/18/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/877612587574001726



=== @ bigjoe 08/18/2021 17:59

Crystal Switch - Place LW_SPARKLE Randomly flag. When checked, Crystal Switches will place a random sparkle every 24 frames similarly to how they do in LTTP

=== @ bigjoe 08/18/2021 18:05

eh i guess this can be done with a script

=== @ P-Tux7 08/18/2021 19:17

i was just gonna make a layer overlay

=== @ Mitsukara 08/20/2021 02:52

It would be kind of a neat option. Link's sword also generates sparkles with charging / spinning in LTTP, but I'm not sure I should make a feature request for that, just thought I'd mention it here.

=== @ Dr00g 08/20/2021 20:31

i think the idea of Crystal Switches that affect a combo in a whole Dmap is kinda cool without the use of a bunch of Secret flags,  So like a combo is Crstal A and B and then Crystal block A, B C and D for diffrent colors raised and lowered

=== @EmilyV99 (discord: Emily) 08/20/2021 21:52

You could just have an animated combo for the sparkles
either have the switch combo itself have them, or have a switch block combo on a layer above the switch (switch block so it changes color of sparkle based on the switch state)

=== @EmilyV99 (discord: Emily) 08/20/2021 21:54

the problem being, we don't know exactly what your switch combo will look like, so it wouldn't look the best without a number of ways to configure it... which then clutters up the combo options for one visual feature

=== @ bigjoe 08/20/2021 21:55

ive already solved it with a script, so you can mark this as "better off with a script" I guess. I was just thinking with future LTTP designers in mind

=== @EmilyV99 (discord: Emily) 08/20/2021 21:55

@ Mitsukara for the sword, that probably would be doable, just similarly to arrow sparkles, on a flag, using a weapon sprite from the sprite list. Make a separate thread for that?
(replying to @ bigjoe "ive already solved it with a‚Ä¶"): My point being you don't even need a script, just an animated combo

=== @ Mitsukara 08/20/2021 21:56

That depends on how far off to the sides of the switch the sparkles go, but yeah. Seems low priority in any case

=== @EmilyV99 (discord: Emily) 08/20/2021 21:56

(meta) thread name was changed: ‚ùåüîíCrystal Switch Sparkles

=== @ Mitsukara 08/20/2021 21:56

I wasn't planning to make a request but I will since you asked

=== @EmilyV99 (discord: Emily) 08/20/2021 21:57

worthwhile to have, especially given an 8-bit sword can't flash to show charging
so that would solve that problem
## ‚úÖüîí2-5-0-0 spike compatibility (#803)
@ P-Tux7 opened this issue on 08/18/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/877675906880143460



=== @ P-Tux7 08/18/2021 22:10

https://www.purezc.net/index.php?page=quests&id=536
so what's he on about with the spikes act differently in 2.50.0
(i presume these are normal damage combos in sideview)

=== @ P-Tux7 10/18/2021 17:58

ah, fixed already it would seem, there's a QR for it

=== @arceusplayer11 (discord: Deedee) 10/26/2021 16:07

(meta) thread name was changed: ‚úÖüîí2-5-0-0 spike compatibility
## üíäüîì[2 55] 2.53 emulation menu to automatic rules (#804)
@ P-Tux7 opened this issue on 08/19/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/877733602668970015



chat log not migrated
## (QR Request) Disable Sword and Item Jynx on Respawn (#805)
@ Haylee opened this issue on 08/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878102838750892052



=== @ Haylee 08/20/2021 02:27

Discussed in VC already, but I think the name of the thread speaks for itself: The work around for this for years has just been putting Blue Bubbles at the beginning of a dungeon, but this seems like a good idea for a QoL Quest Rule option.
## Slot Machine Enemies from LA Tail Cave (#806)
@ SkyLizardGirl opened this issue on 08/20/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878372545940844565



=== @ SkyLizardGirl 08/20/2021 20:18

Match three enemies up and a secret trigger activates. These are based on the enemies seen in Tail Cave Links Awakening.

=== @EmilyV99 (discord: Emily) 08/20/2021 20:24

This should be a script. Not happening in-engine.

=== @arceusplayer11 (discord: Deedee) 08/23/2021 06:26

hmm... I could see this happening maybe. No promises though.

=== @EmilyV99 (discord: Emily) 08/23/2021 18:46

No new enemy types in engine.
@arceusplayer11 (discord: Deedee)
not happening until rewrite
just fuck no
I fucked with enemies enough
to learn that it just is NOT fucking happening

=== @arceusplayer11 (discord: Deedee) 08/24/2021 06:45

I took a look at it, in hindsight this is a terrible idea for us to do right now
Though, I could write up an npc script that does this at some point.

=== @EmilyV99 (discord: Emily) 08/24/2021 06:50

A script for this would be not that bad
I'd probably make it so you place a single npc, and it spawns 2 "children", doing code to link them

=== @ SkyLizardGirl 08/24/2021 10:32


![image](https://cdn.discordapp.com/attachments/878372545940844565/879674496997527592/image0.png)

=== @ Alucard648 08/27/2021 07:38

Imagine those enemies, but symblos change very fast, like in real slot machine. And getting mismatched combination lesults in Link getting struck by lightning for full heart in damage.
## Kill enemies in order as seen in LA Level-2 (#807)
@ SkyLizardGirl opened this issue on 08/20/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878373410047164426



=== @ SkyLizardGirl 08/20/2021 20:22

Kill enemies in certain order. As seen in Bottle Grotto in Link's Awakening Level-2 as you have to kill a bat, then a Pol, then a skeleton to get the Boss Master Key.

=== @ SkyLizardGirl 08/20/2021 20:23

You should be able to make various 3 monsters be fought in a chosen order. So i am thinking this could be a new kind of Maze room program thing.

=== @EmilyV99 (discord: Emily) 08/20/2021 20:25

This should be a script. Not happening in-engine.

=== @arceusplayer11 (discord: Deedee) 08/23/2021 06:13

(replying to @EmilyV99 (discord: Emily) "This should be a script. Not‚Ä¶"): Hold on there, this seems easy enough to add and I can see cool stuff being made with this.

=== @EmilyV99 (discord: Emily) 08/23/2021 18:46

`easy enough`? ü§¢ ü§Æ
## ‚è±üîíScreen Scrolling and setting Scroll via Dmap (#808)
@ Dr00g opened this issue on 08/20/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878373813304320051



=== @ Dr00g 08/20/2021 20:23

So asking for ALTTP style Screen Scrolling  is nothing new. but I had this concept of setting in the Dmap simialr to drawing the Dungeon map where you can connect screens and those screens has the LTTP Screen Scrolling while other Screens have the Zelda 1 style

=== @EmilyV99 (discord: Emily) 08/20/2021 20:25

Not happening until the full rewrite, at which point it's already planned.

=== @EmilyV99 (discord: Emily) 09/21/2021 01:39

(meta) thread name was changed: ‚è±üîíScreen Scrolling and setting Scroll via Dmap
## ‚ùåüîíHorse Knight Head Puzzles built in From LA Level-6 (#809)
@ SkyLizardGirl opened this issue on 08/20/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878374373554270268



=== @ SkyLizardGirl 08/20/2021 20:26

The Knight horse heads are tiles that need to be struck to match up with the other tiles, much like the slot machine enemies do 2 or 3 or 4 will do at max. These Can be found in Level-6 Link's awakening. Idea is for a built in system like this.

=== @EmilyV99 (discord: Emily) 08/20/2021 20:26

This should be a script. Not happening in-engine.

=== @arceusplayer11 (discord: Deedee) 08/23/2021 06:26

Yeah probably not happening, way too complex

=== @EmilyV99 (discord: Emily) 08/23/2021 18:46

(meta) thread name was changed: ‚ùåüîíHorse Knight Head Puzzles built in From LA Level-6
## Sword sparkles option (#810)
@ Mitsukara opened this issue on 08/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878397763476406404



=== @ Mitsukara 08/20/2021 21:59

In LTTP, Link's sword creatse sparkles (basically LW_SPARKLE) which move up the tip of Link's sword while charging / sit in front of the tip when charged, and then his spin attack also creates sparkles around the sword. 

Some approximation of this, creation LW_SPARKLES on the LW_SWORD during LA_CHARGING and LA_SPINNING, would be a neat option in-engine (though it's not that hard to do with scripts, so low priority).

=== @EmilyV99 (discord: Emily) 08/20/2021 22:00

^ More priority to this, because it resolves a major issue of 8-bit sword sprites not being able to display charge progress

=== @ Mitsukara 08/20/2021 22:01

In LTTP, Link's sword creates sparkles which move up the tip as he charges, then appear near the front of the tip when charged, and then continues to make sparkles around the sword during the spin attack.

Something similar could be achieved by creating LW_SPARKLEs on the LA_SWORD during LA_CHARGING and then during LA_SPINNING, which would be neat. (Although this can be mostly handled by scripts, scripts have no way of telling how far along the charge progress is so you can't really do the move-forward-on-the-blade effect). Alternatively you could wait for the sparkles to appear at all until charging is done.

=== @EmilyV99 (discord: Emily) 08/20/2021 22:01

would use an item flag to enable, and a `Sprites[]` sprite for the sparkle

=== @ Mitsukara 08/20/2021 22:02

Ah, whatever works
it is worth noting the position of the sparkles shifts a bit. The ones on the tip seem to move from side to side a bit.

=== @EmilyV99 (discord: Emily) 08/20/2021 22:02

^ Review LTTP before implementation
## Fade All CSets on Side Warp (#811)
@ mitchfork opened this issue on 08/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878696152533467206



=== @ mitchfork 08/21/2021 17:44

When you change DMap palettes via side-warp, the level CSets fade to black and fade back in on the next screen.  Requesting a QR to apply this to all CSets (except 6)
this prevents the following from happening with combos in sprite CSets:

![image](https://cdn.discordapp.com/attachments/878696152533467206/878696277225922560/daughters_05.mp4)
Where the NPC/campfire appear before everything else

=== @ Shane 08/21/2021 18:14

Yes. please.

=== @ P-Tux7 08/21/2021 20:44

this should only apply for interpolated fading since of course manual dark room palettes don't have enough room to store all 11 csets' worth of fade palettes
## Option to have Items that Change NPC Sprite or Player Csets (#812)
@ Dr00g opened this issue on 08/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878737159480287282



=== @ Dr00g 08/21/2021 20:27

Example: an "Ice Wand" Item where the Beam of the wand Stuns an enemy and changes them to a light blue  or a Enemy covers the player in Ink turning them black color

=== @EmilyV99 (discord: Emily) 08/21/2021 20:29

Ice weapon type and freeze status effect are already planned

=== @ P-Tux7 08/21/2021 20:42

is link's ESP cset writable?

=== @EmilyV99 (discord: Emily) 08/21/2021 20:51

the freeze effect will have some mechanic for changing palette

=== @EmilyV99 (discord: Emily) 08/23/2021 18:54

(Keep in mind, that this needs to wait until FFC/NPC *solidity* is done)
## Ability to set how many enemies an Arrow can pierce (#813)
@ Jennette ‚ù£ opened this issue on 08/22/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878975836563316776



=== @ Jennette ‚ù£ 08/22/2021 12:16

What it says on the tin. Being able to set this would be nice for weapon balancing reasons.

=== @EmilyV99 (discord: Emily) 08/23/2021 18:53

The main thing that I see being problematic here is how to store how many it's already pierced
will need to find an open variable for that, or add a new var to all weapons
....but that's not that bad. And the item editor setup would just be an attribute.
## arrows through torch combo effect (#814)
@ Jennette ‚ù£ opened this issue on 08/22/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/878979827967856710



=== @ Jennette ‚ù£ 08/22/2021 12:32

This could have several behaviors that are seen in official Zelda games.

For starters:

Shooting through it with an arrow could give it fire properties

As well, if a torch combo is on screen it could make a screen count as "lighted" in the context of dark rooms. This could be helpful for a variety of reasons, such as if people don't want the candle itself to provide light, if they want temporary light from lit torches or if they want a screen where you have to light torches to permanently light it up.

=== @EmilyV99 (discord: Emily) 08/22/2021 13:56

Nooope, not touching this until rewrite.

=== @ P-Tux7 08/22/2021 18:50

didn't you make them for mm2d
also lit torches are extremely screwy in zc as-is

=== @EmilyV99 (discord: Emily) 08/22/2021 18:50

that's a script
this is feature requests channel, so, for engine

=== @ P-Tux7 08/22/2021 18:51

oh well

=== @EmilyV99 (discord: Emily) 08/22/2021 18:51

also, it's a bad script

=== @ P-Tux7 08/22/2021 18:51

so the issue with lightable torches would be that every combo animation timer runs on the same cycle
so let's say you light up one torch
the next torch you light up would either extend the animation of the first torch, should the combo be set to restart animation upon being cycled to
or it would extinguish when the first torch extinguishes, if the combo is NOT set to do that
you'd have to make each unlit and lit torch a separate combo

=== @EmilyV99 (discord: Emily) 08/22/2021 18:53

^not necessarily
you could make a bunch of combos, each of which lasts for 1 frame before cycling to the next
then they'd effectively run on their own timers

=== @ P-Tux7 08/22/2021 18:54

neat also that's viscerally disgusting

=== @EmilyV99 (discord: Emily) 08/22/2021 18:54

yep
but yeah, this should wait for full rewrite
I think in the rewrite we'll probably have real fucking darkness
like, with circles of light, ala lttp
because having that in engine would be nice

=== @EmilyV99 (discord: Emily) 08/22/2021 22:04

(meta) thread name was changed: ‚è±üîíTorch combo

=== @EmilyV99 (discord: Emily) 02/02/2022 04:47

@arceusplayer11 (discord: Deedee) did you do something with arrows through torches, or was that just an idea?

=== @arceusplayer11 (discord: Deedee) 02/02/2022 04:56

It's the next major feature I was planning to touch
I've just been focusing on bugfixes

=== @EmilyV99 (discord: Emily) 02/02/2022 05:00

(meta) thread name was changed: arrows through torch combo effect
this thread is horrendously outdated lol
was just digging through archived reqs

=== @ P-Tux7 02/02/2022 14:55

so animated arrows are part of the 4 way weapon fix right
## ‚úÖüîíDamage Ring (#815)
@EmilyV99 (discord: Emily) opened this issue on 08/22/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879069779443474502



=== @EmilyV99 (discord: Emily) 08/22/2021 18:29

So, whimsical ring gives you a chance to crit on attacks. Why not add a damage ring, to give a bonus and/or multiplier to damage *always*, similarly to the basic ring's defense for Link?

=== @EmilyV99 (discord: Emily) 08/22/2021 20:57


![image](https://cdn.discordapp.com/attachments/879069779443474502/879107045914185798/unknown.png)

![image](https://cdn.discordapp.com/attachments/879069779443474502/879107081549013002/unknown.png)
(based on:
![image](https://cdn.discordapp.com/attachments/879069779443474502/879107179859296336/unknown.png)
....this was way too fucking easy to add.

=== @EmilyV99 (discord: Emily) 08/22/2021 22:04

(meta) thread name was changed: ‚úÖüîíDamage Ring
## Auto-Label InitD[] (#816)
@EmilyV99 (discord: Emily) opened this issue on 08/22/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879080001889267794



=== @EmilyV99 (discord: Emily) 08/22/2021 19:10

Add a QR to autofill InitD[] labels from ZASM metadata for the selected script

=== @EmilyV99 (discord: Emily) 08/22/2021 19:11

(If enabled, InitD labels will stop being editable, and will auto-populate from whatever script is assigned)
(Item scripts, and Active/Passive Subscreen Scripts, will pull from the `Action`/`Active` script metadata)

=== @ Alucard648 08/22/2021 20:57

Fantastic! This will save some headache for quest designers so you don`t have to check script setup instructions to remember which D input which setting defines, especially for complex scripts.
## ‚úÖüîíInitData Stuff (#817)
@EmilyV99 (discord: Emily) opened this issue on 08/22/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879126246724870224



=== @EmilyV99 (discord: Emily) 08/22/2021 22:13

Fuck me
https://cdn.discordapp.com/attachments/704505093428478013/879125057228668938/unknown.png
working on this
because, needs doing

=== @EmilyV99 (discord: Emily) 08/23/2021 04:22

done
(meta) thread name was changed: ‚úÖüîíInitData Stuff
## ‚ùåüîíBaked in FFC Scrpits? (#818)
@ Dr00g opened this issue on 08/23/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879155184289349663



=== @ Dr00g 08/23/2021 00:08

I've been mostly thinking about how useful the Newbie Boss and Item Scripts are while not hard to just add in though perhaps adding more diversity to the Enemy and Item editor would be better then having to make new enemy's and items from scratch.

=== @EmilyV99 (discord: Emily) 08/23/2021 18:53

err, so what's the feature request?

=== @ Dr00g 08/23/2021 19:47

Sorry I got off track the Orignal idea was to update the Enemy and Item editors to be more like those Scripts allowing more complex ememies and bosses and Items

=== @EmilyV99 (discord: Emily) 08/23/2021 19:48

so, uh, no
not before the full rewrite
(meta) thread name was changed: ‚ùåüîíBaked in FFC Scrpits?
## EW_BOMBSTATIONARY (#819)
@ Mitsukara opened this issue on 08/23/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879156022781046835



=== @ Mitsukara 08/23/2021 00:12

It would be neat to have an eweapon bomb that behaved like Link's bomb, sitting in place and then exploding after a few moments. This is basically the Sluggula bombs from A Link to the Past (in Misery Mire). 

But I know there's a lot of dev stuff to do and not sure how hard adding new eweapon types/behaviors is, so no worries.

=== @ Dr00g 08/23/2021 00:14

It would be interesting to see more enemies use player like weapons.

=== @EmilyV99 (discord: Emily) 08/23/2021 18:52

Weapon types aren't that bad afaik
could be worthwhile
## ‚úÖüîíScript counter InitD (#820)
@EmilyV99 (discord: Emily) opened this issue on 08/24/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879580318036820028



=== @EmilyV99 (discord: Emily) 08/24/2021 04:18

Allow setting starting/max counters for script counters in InitD. Long fucking overdue.....

=== @ Moosh 08/24/2021 04:38

If this ends up being a thing can they also be added to the cheat menu?

=== @EmilyV99 (discord: Emily) 08/24/2021 04:41

I want to say those are actually the same dialog
so, that should be automatic

=== @EmilyV99 (discord: Emily) 09/28/2021 15:17

(meta) thread name was changed: ‚úÖüîíScript counter InitD
## ‚úÖüîíclocks permanent with cheats on (#821)
@EmilyV99 (discord: Emily) opened this issue on 08/25/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/879908764696862771



=== @EmilyV99 (discord: Emily) 08/25/2021 02:03

https://www.purezc.net/forums/index.php?showtopic=77154#entry1065195

=== @EmilyV99 (discord: Emily) 09/21/2021 01:38

I think I fixed this months ago and forgot to mark it... whoops
(meta) thread name was changed: ‚úÖüîíclocks permanent with cheats on
## Allow customizing SFX for ZScript compilation outcome. (#822)
@ Alucard648 opened this issue on 08/25/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879918730371551294



=== @ Alucard648 08/25/2021 02:42

Not everyone likes to hear poor Link die every time ZScript fails to compile. An option to replace that horrible sound with different one, like explosion SFX, would be great.

=== @ mitchfork 08/25/2021 02:52

this is actually already possible

=== @EmilyV99 (discord: Emily) 08/25/2021 02:52

check zquest.cfg

=== @ mitchfork 08/25/2021 02:52

it's at the top of zquest.cfg
ye
the numbers for all the samples are just SFX ID's for the quest file
and you can set the volume too

=== @ Alucard648 08/25/2021 02:58

Tried to change SFX, but it resets to default every time ZQuest is restarted.

=== @EmilyV99 (discord: Emily) 08/25/2021 02:58

Oh?
let me check on that

=== @EmilyV99 (discord: Emily) 08/25/2021 03:12

I don't see any reason why changing `compile_error_sample` wouldn't be changing the error sound

=== @ Alucard648 08/25/2021 03:14

Tried again. Now it worked, all of the sudden. Perharps, sound options should be available in compiler settings of ZQuest editor, especially as compiler options dialog is almost empty in 2.53.x .
## ‚è±üîíSideview slopes and stairs (#823)
@ Alucard648 opened this issue on 08/25/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/879934130299744276



=== @ Alucard648 08/25/2021 03:44

Something like in Link stuck in Castlevania.
Hoping it does not require complete rewriting.

![image](https://cdn.discordapp.com/attachments/879934130299744276/879934189632360468/zc_screen00010.png)

=== @EmilyV99 (discord: Emily) 08/25/2021 03:44

Not happening until the rewrite, in-engine
just, by god, painful code
BUT

=== @ bigjoe 08/25/2021 03:45

much love for this idea though

=== @EmilyV99 (discord: Emily) 08/25/2021 03:45

@TheBlueTophat (discord: Coolgamer012345) made a ramps script recently that works fucking beautifully

=== @ bigjoe 08/25/2021 03:46

you know ive often wondered... what if trick scripts could be implemented into the engine and at a user level, it would seem like functional engine stuff

=== @EmilyV99 (discord: Emily) 08/25/2021 03:49

not without rewriting everything
what you are describing is called a sane system
which zc is not

=== @TheBlueTophat (discord: Coolgamer012345) 08/25/2021 04:20

Yeah I still uhhh
need to finish it technically
however
most of it works
could be rigged up to work in a quest with most functionality.

=== @TheBlueTophat (discord: Coolgamer012345) 08/25/2021 04:23

I should post the latest code when I get the chance to.

=== @ Alucard648 08/25/2021 04:50

(replying to @TheBlueTophat (discord: Coolgamer012345) "I should post the latest code‚Ä¶"): Feel free to post this in purezc.net forum under Sripting discussion section.

=== @arceusplayer11 (discord: Deedee) 08/28/2021 23:54

Actually... I think a QR that lets Link step up small steps in sideview would be dead simple
I'll give this a look once I'm done with Sideview Swimming (which is still pain btw!)

=== @EmilyV99 (discord: Emily) 08/28/2021 23:57

(replying to @EmilyV99 (discord: Emily) "Not happening until the rewri‚Ä¶"): ^
(meta) thread name was changed: ‚è±üîíSideview slopes and stairs
## ‚ùåüîíPlayOgg bugs (#824)
@arceusplayer11 (discord: Deedee) opened this issue on 08/25/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/880199477015744512



=== @arceusplayer11 (discord: Deedee) 08/25/2021 21:18

PlayOGG and GetPos/SetPos are bugged currently. I think GetPos was the issue, but one of the two just outright crashes
@EmilyV99 (discord: EmilyV) could you possibly give this a glance to see if there's anything obviously wrong? If not, I might have to give this a more in depth look, cause it worked at some point

=== @EmilyV99 (discord: Emily) 08/25/2021 21:20

I just traced GetPos and found no issues down to the call to `alogg_get_pos_msecs_ogg`

=== @arceusplayer11 (discord: Deedee) 08/25/2021 21:21

Does GetPos crash when used with PlayOgg?

=== @EmilyV99 (discord: Emily) 08/25/2021 21:21

that function is being called, and passed a non-null `ALOGG_OGG` object
unsure
you said you thought it was the issue so I traced it
don't have a test quest or test files

=== @EmilyV99 (discord: Emily) 08/25/2021 21:25

SetPos seems identically set up

=== @ Ether 08/25/2021 21:26

Is it possible that the OGG glitch I was experiencing in 253.1 is related to this? It's Yuurand, soooooooo I don't know how helpful it would be compared to something more isolated for this, but.

=== @EmilyV99 (discord: Emily) 08/25/2021 21:26

no
this is a new 2.55 feature

=== @ Ether 08/25/2021 21:26

Got it.

=== @EmilyV99 (discord: Emily) 08/25/2021 21:26

for zscript managing oggs

=== @arceusplayer11 (discord: Deedee) 08/25/2021 21:32

(replying to @EmilyV99 (discord: Emily) "don't have a test quest or te‚Ä¶"): I went to dig up a test quest but my organization is bad and I think onedrive ate it\
*sigh*

=== @EmilyV99 (discord: Emily) 08/25/2021 21:32

fun
I don't see anything immediately wrong
so, probably gonna take digging

=== @arceusplayer11 (discord: Deedee) 08/25/2021 21:32

lovely.
Gonna be pissed if it ends up being a zoriaism

=== @arceusplayer11 (discord: Deedee) 10/12/2021 00:50

SetPos is the issue
but I don't know what the hell it even is
that's why using obscure libraries is bad v.v

=== @arceusplayer11 (discord: Deedee) 10/12/2021 20:39

(meta) thread name was changed: ‚ùåüîíPlayOgg bugs
## Separate int Weapon Properties (#825)
@ Guinevere opened this issue on 08/26/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/880512585793929267



=== @ Guinevere 08/26/2021 18:02

To add a speck of more customization to the Weapon Tab on the Item Editor.
Maybe have it to where triggering properties and enemy defenses are separate.
For example, being able to get the properties of the sword without applying its enemy defense.
Maybe as an item/rule flag that says "Lweapons On Items Don't Affect Defenses".
## ‚úÖüîíbook damage bug (#826)
@EmilyV99 (discord: Emily) opened this issue on 08/26/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/880554702096437308



=== @EmilyV99 (discord: Emily) 08/26/2021 20:50

https://www.purezc.net/forums/index.php?showtopic=77135#entry1065255

=== @arceusplayer11 (discord: Deedee) 10/09/2021 20:47

Fixed!
(meta) thread name was changed: ‚úÖüîíbook damage bug
## üîìMessagestring shadows (#827)
@EmilyV99 (discord: Emily) opened this issue on 08/27/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/880750852841807902



=== @EmilyV99 (discord: Emily) 08/27/2021 09:49

Shadows ala subscreen editor / DrawString, but, in the string editor per-string
@ Mitsukara

=== @ Mitsukara 08/27/2021 09:49

Nice! Thank you

=== @EmilyV99 (discord: Emily) 09/05/2021 00:01

(meta) thread name was changed: üîìMessagestring shadows

=== @EmilyV99 (discord: Emily) 09/05/2021 05:03

@ Mitsukara
![image](https://cdn.discordapp.com/attachments/880750852841807902/883940448559845416/unknown.png)

=== @EmilyV99 (discord: Emily) 09/05/2021 05:08

still needs script access!

=== @ Mitsukara 09/05/2021 05:38

Like for Screen->DrawString?

=== @EmilyV99 (discord: Emily) 09/05/2021 05:39

that already has shadow options
has for like, 1.5 years IIRC?
more, `messagedata->ShadowType`, `messagedata->ShadowColor`
for editing the string editor strings

=== @ Mitsukara 09/05/2021 05:40

oh, nice
I didn't realize
## non-sideview sideview ladders (#828)
@EmilyV99 (discord: Emily) opened this issue on 08/27/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/880918639031771198



=== @EmilyV99 (discord: Emily) 08/27/2021 20:56

https://www.purezc.net/forums/index.php?showtopic=77164#entry1065295
## ‚úÖüîíSolid Damage Combo Active Effect Bug (#829)
@ Guinevere opened this issue on 08/27/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/880923904066060358



=== @ Guinevere 08/27/2021 21:17

When i make a solid damage combo that is where the effect is only on 3 or less areas, the hitbox seems to only register in specific spots instead of the whole section where the effect is active.

![image](https://cdn.discordapp.com/attachments/880923904066060358/880923960315904020/Screenshot_2021-08-27_141525.png)

![image](https://cdn.discordapp.com/attachments/880923904066060358/880924062673686608/2021-08-27-14-16-20.mp4)

=== @EmilyV99 (discord: Emily) 08/27/2021 21:17

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 08/27/2021 21:21

that... seems very consistent with what I know of solid damage combos
solid damage combos are not well designed

=== @ Guinevere 08/27/2021 21:23

i see

=== @arceusplayer11 (discord: Deedee) 08/27/2021 21:25

ill give it a look

=== @ Guinevere 08/27/2021 21:26

thank ya kindly
<:catpat:732463715579985953>

=== @arceusplayer11 (discord: Deedee) 10/11/2021 20:00

Fixed, I think!

=== @arceusplayer11 (discord: Deedee) 10/11/2021 20:11

(meta) thread name was changed: ‚úÖüîíSolid Damage Combo Active Effect Bug

=== @arceusplayer11 (discord: Deedee) 10/11/2021 20:20

@ Guinevere expect next alpha to have a fix for this (hopefully)
## SCC for Game-Generic (#830)
@EmilyV99 (discord: Emily) opened this issue on 08/27/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/880924358212747355



=== @EmilyV99 (discord: Emily) 08/27/2021 21:18

Add "Goto if generic" SCC, similar to "Goto if screen register". Useful for Heart Piece strings.
## more level palette csets (#831)
@EmilyV99 (discord: Emily) opened this issue on 08/27/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/880931900330508360



=== @EmilyV99 (discord: Emily) 08/27/2021 21:48

https://www.purezc.net/forums/index.php?showtopic=77093
```
P-Marx7 ‚Äî 08/08/2021
okay so amend that to csets 0-13 since zoria said he enabled using them for combos in the newest alphas
one or both of them get overwritten by the boss palette for enemies that use an extra sprite palette, but that shouldn't be a problem if one just never uses that option
Emily ‚Äî 08/08/2021
This'll be a tremendous amount of work
So, I'll get around to attempting it when I have the requisite energy
P-Marx7 ‚Äî 08/08/2021
Dimi's done great work so far. Is she up to it?
Emily ‚Äî 08/08/2021
Maybe, but IDK how much experience with palette stuff she has
Meanwhile the literal second thing I did in ZC was tint
P-Marx7 ‚Äî 08/09/2021
@Timelord i should mention we also could use this for outlands module, the NES equivalent of csets 7 and 8 are different in dungeons on the NES version
P-Marx7 ‚Äî 08/09/2021
@tiny little shark ?
tiny little shark ‚Äî 08/09/2021
Im at work now but ill look into later
P-Marx7 ‚Äî 08/15/2021
Okay so as for the Z3 tileset, let's compare how the palette changes outside Link's house and inside his house in the original game
Outside

Inside

That appears to be six tile CSets that change per-area, and about one CSet's worth of sprite CSets that change (though given that they seem to be for "things that look like tiles that are actually sprites", such as lifted pots, rocks, and bushes, they might be able to be conflated into 6 per-level CSets. Still, at least 6 per area)
P-Marx7 ‚Äî 08/15/2021
@Timelord you want a z3 tileset here's something for you to do
the secrets->nextcombo flag that emily added without your permission and the triggers secrets combo trigger attribute dimi added without your permission is also doing wonders for that tileset too by the way
now i can just make a 2x2 rock alias, set it to be bomb-triggerable, and have the ->next combos be the staircase, so the zquest user can place all that in one click without needing to place flags or set the screen's secret combos
that's why i made #lttp-rips and have been updating it the past few days
even set up a goriya enemy's big enemy tiles and screenshotted the correct enemy size parameters if you want a preview of what the tileset will be like once the more csets thing is sorted out```
https://cdn.discordapp.com/attachments/871580485304877067/876600358829453322/unknown.png
https://cdn.discordapp.com/attachments/871580485304877067/876600418413719562/unknown.png
@ P-Tux7

=== @ P-Tux7 08/27/2021 21:50

```okay so amend that to csets 0-13 since zoria said he enabled using them for combos in the newest alphas```
Yeah this is out of date since apparently it's just back to csets 0-11 now

=== @EmilyV99 (discord: Emily) 08/27/2021 21:51

aye, that was an error on zoria's part
csets above 11 are used for hardcoded shit
and should never be available for combos

=== @ P-Tux7 08/28/2021 02:38

i should also mention that don't feel compelled to do this any time soon
given that once i get over covid my attention will be drawn to a custom tileset which doesn't need this

=== @ P-Tux7 10/04/2021 16:14

i should mention that due to this taking up 12 csets in each DPal
this will necessarily disable manual dark rooms, interpolated fading only
## No Link Jump flag (#832)
@ Mitsukara opened this issue on 08/28/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/880992709710585878



=== @ Mitsukara 08/28/2021 01:50

A combo flag which prevents Roc Items from initiating a jump if Link is standing on the flag.
(meta) thread name was changed: No Link Jump flag

=== @EmilyV99 (discord: Emily) 08/28/2021 02:09

....that sounds STUPIDLY simple. Question: How sensitive do you think it should be?

=== @ Mitsukara 08/28/2021 02:19

Hmm. I think a good range is about 4 pixels onto the flag, but some people might want more, or less, hard to say without fiddling with it

=== @EmilyV99 (discord: Emily) 08/28/2021 02:21

4 pixels is the standard for standing on a platform in sideview, so makes sense
and I think it's also the amount for the little side-push thing
## ‚úÖüîíSword charging stops during scrolling (#833)
@ Mitsukara opened this issue on 08/28/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/881003756475523172



=== @ Mitsukara 08/28/2021 02:34

In official Zelda games, Link's sword charge is maintained when he scrolls to another screen. In ZC, the sword charge stops and he has to attack and start over on the next screen.
If fixed, it might be good to have some kind of backwards compatability/QR/item flag/etc for the old behavior, in case someone wanted that for some reason. (Although it kinda sucks and makes the charge way less useful)
Not sure if having slash enabled would be relevant when fixing this either, because I know you have a slightly different spin attack when you don't know slash (it moves 4 ways instead of 8, which is really cool)

=== @ P-Tux7 08/28/2021 02:36

yeah this is slightly bs when the spin attack or hurricane spin cost magic to use

=== @EmilyV99 (discord: Emily) 08/28/2021 02:38

there has to be a qr, of course
otherwise old quests would be broken

=== @EmilyV99 (discord: Emily) 02/07/2022 09:48

The problem here is probably that the sword sprite dies during the scrolling
....that might require some interesting workarounds.

=== @ P-Tux7 02/07/2022 10:11

i presume it would check the charge timer like how nayru's love regenerates itself and checks the time left after scrolling
if the sword charge timer and state aren't global like the nayru's love time left timer is... eep
i guess that would need to be changed

=== @EmilyV99 (discord: Emily) 02/07/2022 10:13

My thing is, I don't immediately see why it would be being cleared in the first place, aside from the sword weapon being killed during scrolling

=== @EmilyV99 (discord: Emily) 02/07/2022 10:16

ah no, a couple clocks are cleared in `resetflags()`
the weapon would still be a problem though I think

=== @EmilyV99 (discord: Emily) 02/07/2022 10:29


![image](https://cdn.discordapp.com/attachments/881003756475523172/940192644397662218/unknown.png)
....surprisingly, the weapon exists on the new screen just fine
but uhh
it gets a bit stuck
wherever you scrolled
and doesn't move with you
hmmmm

=== @arceusplayer11 (discord: Deedee) 02/07/2022 10:36

(replying to @EmilyV99 (discord: Emily) "and doesn't move with you"): there was a similar issues involving setting Link's direction
I forget exactly what the cause was though

=== @EmilyV99 (discord: Emily) 02/07/2022 10:47

pffft
`action` is being cleared
he's walking around with `LA_NONE`

=== @EmilyV99 (discord: Emily) 02/07/2022 10:51

@ Mitsukara
https://cdn.discordapp.com/attachments/881003756475523172/940198077053173780/buildpack.zip
(meta) thread name was changed: ‚úÖüîíSword charging stops during scrolling

=== @EmilyV99 (discord: Emily) 02/09/2022 15:19

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíScrolling Crash Bug? (#834)
@ Guinevere opened this issue on 08/28/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/881030279479820299



=== @ Guinevere 08/28/2021 04:19

Okay. so...I have no idea what's causing this, the areas where it happens are inconsistent between quests, but are consistent in where they happen. At first I thought it was a gollab bug since the screen scrolling was tied to a scripted warp pad so i just thought that it was just not applicable to 2.55.
But apparently some quests if the screen scrolls in specific areas, ZC crashes. They don't even need to be scripted quests.
And I know that it's not just a backwards compatibility bug because it also happens in my project as well.

=== @ Guinevere 08/28/2021 04:21

<:nekosweat:694455509423751239>

=== @EmilyV99 (discord: Emily) 08/28/2021 04:31

2.53? 2.55? Both?
@arceusplayer11 (discord: Deedee) ?
Is smart scrolling enabled in the quest? Is Smarter Smart Scrolling enabled, if in 2.55?

=== @ Guinevere 08/28/2021 04:32

2.55

=== @ P-Tux7 08/28/2021 04:34

what's smarter screen scrolling

=== @ Guinevere 08/28/2021 04:35

umm idk about the other quests
but "fixed smart scrolling" is disabled in my quest

=== @EmilyV99 (discord: Emily) 08/28/2021 04:35

k, so isn't that
given @arceusplayer11 (discord: Deedee)'s work with scrolling shit, feel like she is probably more qualified to look at this

=== @ Guinevere 08/28/2021 04:36

i'm removing my zc.sav to see if it's just a save corruption

=== @ Guinevere 08/28/2021 04:39

nope it's not just a save corruption

=== @ Mitsukara 08/28/2021 05:42

I totally forgot to report it, but I know that in 2.50.2 or 2.53 I was trying some random quest off the database that had no scripts, but used the Smart Scrolling feature, and trying to scroll onto a solid combo while swimming crashed ZC I think
so that may be relaetd

=== @ Guinevere 08/28/2021 05:47

i see.

=== @EmilyV99 (discord: Emily) 08/28/2021 06:04

oh????

=== @ Guinevere 08/28/2021 06:04

(meta) thread name was changed: Smart Screen Scrolling hardcoded to be enabled

=== @EmilyV99 (discord: Emily) 08/28/2021 06:04

@arceusplayer11 (discord: Deedee) wtf

=== @arceusplayer11 (discord: Deedee) 08/28/2021 13:18

??????

=== @EmilyV99 (discord: Emily) 08/28/2021 13:37

(replying to deleted comment): what is this screenshot intended to show?

=== @ Guinevere 08/28/2021 16:34

................
wait
no?
*HUH*?

=== @ Guinevere 08/28/2021 16:46

(meta) thread name was changed: Scrolling Crash Bug?

=== @ Guinevere 08/28/2021 16:47

Forget everything i just said, for it's foobar, i have no idea what's causing zc to crash when the player scrolls
<:nekobleh:749523485373497375>
*wait*
AHAH!

=== @ Guinevere 08/28/2021 16:59

when fixed screen scrolling is enabled;
if there are solid combos at one edge of the screen,  and nothing on the opposite edge, it blocks link from scrolling that way where the solid combos would be like if they were on the next screen in the same position.
![image](https://cdn.discordapp.com/attachments/881030279479820299/881221514903580712/2021-08-28-09-56-44.mp4)

=== @ Guinevere 08/28/2021 17:01

@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 08/28/2021 17:07

Wtf

=== @ Guinevere 08/28/2021 17:07

ye idk either

=== @arceusplayer11 (discord: Deedee) 08/28/2021 17:08

(replying to @ Mitsukara "I totally forgot to report it‚Ä¶"): Oh goddamnit i know what that is
I saw a weird check where swimming seemed to ignire dmart scrolling
Dmart scrolling. Where you scroll to a d mart

=== @ Guinevere 08/28/2021 17:09

<:teehee:620404816769843200>

=== @ Guinevere 08/28/2021 19:00

Idk if this is the thing causing zc to crash in some quests when you scroll in specific areas, but the possibility is there.

=== @ Guinevere 08/31/2021 03:19

Here's also an example of a quest crashing when trying to scroll the screen. To my knowledge First Quest Layered (the quest being played) isn't scripted at all.
![image](https://cdn.discordapp.com/attachments/881030279479820299/882102390738813028/2021-08-30-20-17-28.mp4)

=== @ Guinevere 08/31/2021 04:06

idk why but sometimes it takes a couple times to scroll, but other times it only takes one attempt to crash

=== @EmilyV99 (discord: Emily) 08/31/2021 04:09

does it consistently do it on a specific transition?
if so, could you send a copy of the quest where you spawn in the room in question?
(Crashes are easier to debug than less serious bugs, because if I run it in the debugger, it will literally tell me what line of code crashed)
(but, need to do that in a debug build, attached to the dev chain, so gotta do it myself

=== @ Guinevere 08/31/2021 04:13

uhh, how do i set a spawn in someone else's quest?

=== @EmilyV99 (discord: Emily) 08/31/2021 04:13

oh is it passworded?

=== @ Guinevere 08/31/2021 04:13

ye

=== @EmilyV99 (discord: Emily) 08/31/2021 04:13

just send it then
I can bypass passwords

=== @ Guinevere 08/31/2021 04:14

oh okie

https://cdn.discordapp.com/attachments/881030279479820299/882116153718214707/First_Quest_Layered.qst
here ya go

=== @EmilyV99 (discord: Emily) 08/31/2021 04:56


![image](https://cdn.discordapp.com/attachments/881030279479820299/882126605168807946/unknown.png)
love when the actual crash line it gives me is inside a C++ class, so it doesn't tell me where the call is that crashed....
but, at least I recreated it
so I can debug from there

=== @ Guinevere 08/31/2021 04:56

i see

=== @EmilyV99 (discord: Emily) 08/31/2021 05:12

It's not the scrolling code
the scrolling code isn't even fucking running
it's crashing before it gets there

=== @ Guinevere 08/31/2021 05:12

i see
that makes sense
since you don't even see the screen scroll once it crashes
but surprised that the code has nothing to do with it

=== @EmilyV99 (discord: Emily) 08/31/2021 05:19

....it's fucking related to SWITCH BLOCKS
WHAT THE FUCK

=== @ Guinevere 08/31/2021 05:19

>.>
wut?

=== @ Guinevere 08/31/2021 05:21

I don't even wanna ask *how* that works

=== @EmilyV99 (discord: Emily) 08/31/2021 05:22

Some of the switchblock code
is referencing something out of bounds
because of the X/Y position of Link being offscreen

=== @ Guinevere 08/31/2021 05:22

uh huh

=== @EmilyV99 (discord: Emily) 08/31/2021 05:26

fixed

=== @ Guinevere 08/31/2021 05:26

<:nekopog:835231816620965948>
You are a life saver
way to go

=== @arceusplayer11 (discord: Deedee) 08/31/2021 20:01

(replying to @EmilyV99 (discord: Emily) "....it's fucking related to S‚Ä¶"): Is it the exact same crash that you fixed for me the other day?

=== @EmilyV99 (discord: Emily) 08/31/2021 21:01

?

=== @arceusplayer11 (discord: Deedee) 08/31/2021 23:07

you know, the bomb wall switch block crash
I don't think that fix ever got pushed

=== @EmilyV99 (discord: Emily) 08/31/2021 23:12

I don't recall that
but that sounds like this
and it wasn't that a fix didn't get pushed
it wasn't fixed
until now

=== @arceusplayer11 (discord: Deedee) 08/31/2021 23:14

No, I mean you sent me code that fixed it
But I haven't pushed anything since I started sideview swimming

=== @EmilyV99 (discord: Emily) 08/31/2021 23:16

oh, I did?
well, merge conflict on your end probably then

=== @ Guinevere 09/01/2021 02:32

(replying to @ Guinevere "when fixed screen scrolling i‚Ä¶"): There's still this bug with the fixed smart scrolling, should I make a seperate thread for this or just keep it here?

=== @EmilyV99 (discord: Emily) 09/01/2021 02:37

separate thread

=== @ Guinevere 09/01/2021 02:38

Okie

=== @EmilyV99 (discord: Emily) 09/01/2021 03:22

(meta) thread name was changed: ‚úÖüîíScrolling Crash Bug?
## Generic disassembled item piece (#835)
@ Alucard648 opened this issue on 08/28/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/881136987275407360



=== @ Alucard648 08/28/2021 11:23

This should comply requests for various disassembled items, like Magic Container peces, Boss Key pieces (hello Twilight Princess) etc.

=== @EmilyV99 (discord: Emily) 08/28/2021 11:38

this.... would take quite a lot of work
boss key is an *entirely* different premise to a container
and uh
this would probably best be scripted

=== @ Alucard648 08/28/2021 15:45

Written in 1 hour:
```
//Generic Disassembled item piece. Link must collect enough items to assemble whole item. 2.53.x
//1. Set aside 1 screen in a DMap, like unused space in a dungeon.
//2. Set up as many consecutive strings to track item assembly progress, like 1/4, 2/4, 3/4 etc.
//3. Create item in Item editor, assign script into Pickup script slot.
// D0 - Item to assemble.
// D1 - Number of pieces to form whole item.
// D2 - First string of the sequence from step 2.
// D3 - Dmap from step 1, needed to track item assembly progress.
// D4 - Dmap Screen from step 1, needed to track item assembly progress.
// D5 - Dmap Screen D register from step 1, needed to track item assembly progress.

item script ItemPiece{
    void run (int Item, int Numpieces, int string, int DMapD, int ScreenD, int ScreenDReg){
        int D = Game->GetDMapScreenD(DMapD, ScreenD, ScreenDReg);
        if (string>0) Screen->Message(string+D);
        D++;
        if (D >= Numpieces){
            item coll = Screen->CreateItem(Item);
            coll->X = Link->X;
            coll->Y = Link->Y;
            D = 0;
        }
        Game->SetDMapScreenD(DMapD, ScreenD, ScreenDReg, D);
    }
}```
https://cdn.discordapp.com/attachments/881136987275407360/881202797155090492/bug3.qst

=== @ P-Tux7 08/28/2021 21:54

does this handle the subscreen?

=== @ Alucard648 08/29/2021 02:14

(replying to @ P-Tux7 "does this handle the subscree‚Ä¶"): Unfortunately, unless you script subscreen entirely, this not handle. And as for current version docs, subscreen scripts are not implemented.

=== @ P-Tux7 08/29/2021 02:20

yeah that's been an issue with like
2.50 magic container pieces
## scrolling combo or door (forced direction) (#836)
@arceusplayer11 (discord: Deedee) opened this issue on 08/28/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/881325057337610261



=== @arceusplayer11 (discord: Deedee) 08/28/2021 23:51

A warp combo that acts as a scrolling warp when you step on it, but with a defined direction. Specific use case would be doors that are away from the screen edges
Having worked with a script that does this (very jankily), I can say that this transforms how you handle dungeon design in more GB-oriented sets for the better

=== @arceusplayer11 (discord: Deedee) 08/28/2021 23:53

Of course, for it to be fully feature complete, it'd need to put you on a return combo on the other side

=== @EmilyV99 (discord: Emily) 08/28/2021 23:56

so, a fancy version of a scrolling warp

=== @arceusplayer11 (discord: Deedee) 08/28/2021 23:57

yup
Scrolling warp has a problem in that it doesn't force your direction
so you could walk into a left door facing up, and you'll scroll the screen in the up direction

=== @ P-Tux7 08/29/2021 00:29

(replying to @arceusplayer11 (discord: Deedee) "Of course, for it to be fully‚Ä¶"): yeah i was gonna ask where do you *appear* on the second screen
also can't you use this to make mario esque pipes

=== @arceusplayer11 (discord: Deedee) 08/29/2021 00:30

Absolutely yeah, though they couldn't turn like some pipes in SMW (at least, not without some clever hacking of features like conveyors and switchblocks)

=== @ P-Tux7 08/29/2021 00:38

that's mario 3, mario world is infamous for not having any sort of scrolling pipes at all
it's just either inert pipes or "fade out, go to another room" pipes
(replying to @arceusplayer11 (discord: Deedee) "Absolutely yeah, though they‚Ä¶"): ~~or the raft~~

=== @ Tsunami Tommy Reload the Shotty 08/29/2021 00:50

Maybe it could be two combos:

1)  Side Warp Trigger - With selectors for North/East/South/West, and Screen and Dmap coordinates, as well as a numerical identifier that would be paired with the combo below.

2)  Side Warp Arrival - Mostly just acts are a receiver for the above.  Its one property is the numerical identifier.

The numerical identifier acts as a warp coordinate receiver.  So a side warp trigger combo with ID 3 would send it to a Side Warp Arrival ID 3 on that screen.

Not sure how it would handle going between two such combos though in the case of a door that goes between two combos, like most traditional north/south doors.

=== @ Tsunami Tommy Reload the Shotty 08/29/2021 01:17

---
Or would it just make more sense to keep the X or Y positioning (and Z, probably.) and just go to the next available side-warp arrival combo in that direction you're already traveling in from the first screen.

=== @arceusplayer11 (discord: Deedee) 08/29/2021 01:54

(replying to @ Tsunami Tommy Reload the Shotty "---
Or would it just make mor‚Ä¶"): this would make far more sense

=== @ P-Tux7 08/29/2021 02:06

ehh
i can see the use cases for manual arrival combos

=== @ Alucard648 08/29/2021 02:16

Simething like this?|https://www.youtube.com/watch?v=ZSAEYBmX58Y

=== @ Tsunami Tommy Reload the Shotty 08/29/2021 02:19

Show-off. üòõ   But nah, it might be a combo that triggers the screen-scroll effect earlier, closer to the middle of the screen than being right on the very edge, and can probably even dump you somewhere not on the edge of the next screen too.

=== @arceusplayer11 (discord: Deedee) 08/29/2021 02:20

(replying to @ Tsunami Tommy Reload the Shotty "Show-off. üòõ   But nah, it mig‚Ä¶"): basically this

=== @ P-Tux7 08/29/2021 02:21

yeah like again
mario/turtle rock pipes

=== @arceusplayer11 (discord: Deedee) 08/29/2021 02:21

Yeah
Though rafting would make more sense for same-screen pipes

=== @ Alucard648 08/29/2021 02:45

(replying to @ Tsunami Tommy Reload the Shotty "Show-off. üòõ   But nah, it mig‚Ä¶"): I found this script when digging through source code of Link Stuck in Castlevania. Setup instructions are inside script file.
https://cdn.discordapp.com/attachments/881325057337610261/881368978759504002/CVDoorTransition.z
## liquid features (#837)
@ P-Tux7 opened this issue on 08/29/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/881366996103606313



=== @ P-Tux7 08/29/2021 02:37

1. ignore health modifier if flipper level is (x) or above
this is basically where if you give the player level 1 flippers, they can still swim but the counter drain is in play. getting the right level of flippers removes it. also, maybe a setting of 0 (or -1?) means that no flippers will stop the effect
2. (rule) disable liquid drain while holding up an item
3. i'm unsure about how to implement this elegantly, but perhaps a drain rate for the liquid that can be divided, instead of it being a binary on or off?
what can liquids even drain right now? is it only health or is it all the counters?

=== @EmilyV99 (discord: Emily) 08/29/2021 02:38

1. you can do that already
but you can use any itemclass, not just flippers

=== @ P-Tux7 08/29/2021 02:39

oh goddamnit
sorry this hasn't been a good week

=== @EmilyV99 (discord: Emily) 08/29/2021 02:40

2. probably should fix that
3. that'd be rough
it's only health

=== @ P-Tux7 08/29/2021 02:41

oh yeah hmm
i was thinking that using magic (stamina) or a script counter could be used to have an oxygen meter
though, considering it only needs to detect link, a combo script might still be usable for that

=== @arceusplayer11 (discord: Deedee) 08/29/2021 03:47

The big barrier to adding more stuff to this was a lack of combo arguments, and that has since been fixed
This might happen after the dev break
(division and etc)
## ‚úÖüîíTiny Quest Gold  Upgrading - Crash in Heart Container Room (#838)
@ NightmareJames opened this issue on 08/29/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/881623496113913857



=== @ NightmareJames 08/29/2021 19:37

@EmilyV99 (discord: EmilyV) Was testing out Tiny Quest:  Gold on stream in some spare time, and I upgraded Tiny Quest Gold from A 39 to A 85 to A 92, then ran it in the latest nightly.  What I ended up with is a crash in the Heart Container Room.  Video and quest file incoming when I package them
https://youtu.be/RERTrX1MzNc  Video

=== @ NightmareJames 08/29/2021 19:38

Shadowblazer Tiny Quest Gold file I was updating from A39
https://cdn.discordapp.com/attachments/881623496113913857/881623960029122640/Shadowblazer-Tiny-Gold.zip
If you need any more information @ me

=== @EmilyV99 (discord: Emily) 08/29/2021 23:44

#834 feel like this is just the same issue

=== @ NightmareJames 08/30/2021 00:18

@arceusplayer11 (discord: Deedee) ?  You'd know better

=== @ NightmareJames 08/30/2021 00:19

But if this is the case, the original Tiny Quest probably has to be tested in 2.53 as well

=== @ NightmareJames 08/31/2021 09:55

Fixed
@<role: Developer>

=== @EmilyV99 (discord: Emily) 09/01/2021 03:22

(meta) thread name was changed: ‚úÖüîíTiny Quest Gold  Upgrading - Crash in Heart Container Room
## More then 1 Item or Chest per Screen (#839)
@ Dr00g opened this issue on 08/29/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/881647317348921366



=== @ Dr00g 08/29/2021 21:11

What is says on the tin Id love to be able to make Alttp stlyed Chest rooms

=== @EmilyV99 (discord: Emily) 08/29/2021 23:43

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 08/29/2021 23:47

Planned, it's on my todo list
## üíäüîìBomb Weapon Tab Shenanigans (#840)
@ Guinevere opened this issue on 08/30/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/881803390584246272



=== @ Guinevere 08/30/2021 07:31

Changing the bomb's weapon type affects both the bomb and it's blast

=== @ P-Tux7 08/30/2021 07:44

i don't see this as an issue

=== @ Guinevere 08/30/2021 07:44

<:nekoshrug:694456306060492800>
Emily told me to

=== @ P-Tux7 08/30/2021 07:45

the problem that i see is the lit bomb being able to trigger defenses but that's not what you wrote

=== @ Guinevere 08/30/2021 07:46

i mean i'm sure it gets the point across, i don't think the bomb itself should have a hitbox once a weapon type is added on to the item
seems a lil silly
<:teehee:620404816769843200>

=== @EmilyV99 (discord: Emily) 08/30/2021 07:47

the weapon type effect should not apply to the bomb
it should still behave as a bomb

=== @ Guinevere 08/30/2021 07:48

and if the lit bomb comes into contact with an enemy, it kills the item and hurts the enemy like a normal lweapon

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:24

(meta) thread name was changed: üíäüîìBomb Weapon Tab Shenanigans
Fixed

=== @EmilyV99 (discord: Emily) 02/13/2022 17:25

Ooh, nice

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:26

also did a similar thing with defenses too
(the "use defense" thing)

=== @ P-Tux7 02/13/2022 17:33

super bombs too?

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:36

yup
though I initially was confused because I thought wBomb was LW_BOMB, but no, it's LW_BOMBBLAST

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:05

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚ùåüîí[2.53] Parser will truncate ints and floats early (#841)
@ mitchfork opened this issue on 08/30/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/881906459691077682



=== @ mitchfork 08/30/2021 14:21

`int` has a legal range of "-214748.3648, 214748.3647".  However, the parser will enforce a range of "-214747.9999, 214747.9999" and truncate legal values
this is... an incredibly small bug

=== @EmilyV99 (discord: Emily) 08/30/2021 20:42

not a bug
intended behavior
and changed in *2.55*, with compiler options
https://cdn.discordapp.com/attachments/878114935396257852/882002144692166677/unknown.png
2.53's legal range is `-214747.9999` to `214747.9999`
(meta) thread name was changed: ‚ùåüîí[2.53] Parser will truncate ints and floats early
## ZQuest 2.55 tanking in FPS even more than 2.53 did. (#842)
@ Haylee opened this issue on 08/31/2021

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/882190179262144542



=== @ Haylee 08/31/2021 09:08

So when I used 2.53, there would be this issue where the program would run at 30 FPS consistently, but when I would run a background process (A Discord VC, OBS, Steam, etc.) it would actually go _up_ to 60 for some reason. It's even worse here though, where the FPS is now locked at roughly 20 FPS when I'm not in other calls, but will not only move up to 45-50 FPS with a background process. While I have no clue what's causing the program to run better, it doesn't change that for some reason, there's a massive dip in FPS for 2.55 over 2.53.

![image](https://cdn.discordapp.com/attachments/882190179262144542/882190196999876618/unknown.png)

=== @EmilyV99 (discord: Emily) 08/31/2021 09:09

are you using the built-in fps counter?

=== @ Haylee 08/31/2021 09:09


![image](https://cdn.discordapp.com/attachments/882190179262144542/882190339165790239/unknown.png)
ye

=== @EmilyV99 (discord: Emily) 08/31/2021 09:09

does it flicker like the one in ZC does?
or is it a solid draw?

=== @ Haylee 08/31/2021 09:09

solid draw

=== @EmilyV99 (discord: Emily) 08/31/2021 09:09

that being on may well be tanking your fps

=== @ Haylee 08/31/2021 09:09

wut
Any way to change that?

=== @EmilyV99 (discord: Emily) 08/31/2021 09:10

that's why the zc one flickers, to fix that problem
I'd recommend turning off the fps counter and seeing if it feels any better?

=== @ Haylee 08/31/2021 09:10

Nah, that's defo still 21 rn
yeesh

=== @ Haylee 08/31/2021 09:12

It's an issue I had for a while that I figured was just an issue with me using Windows 10 (I recall some dev discussion about it a long time ago), but since it's tanking even more it has me confused.

=== @EmilyV99 (discord: Emily) 08/31/2021 09:12

does `frame_rest_suggest` do anything in zquest.cfg?
trying 0/1/2?

=== @ Haylee 08/31/2021 09:13

lemme check

=== @ Haylee 08/31/2021 09:15

nothin

=== @ Guinevere 08/31/2021 09:21

oh yeah
i also noticed this

=== @EmilyV99 (discord: Emily) 08/31/2021 09:23

and frankly, I'd expect 2.55 to be worse than 2.53, as more is going on

=== @ Haylee 08/31/2021 09:23

wait hold on

=== @EmilyV99 (discord: Emily) 08/31/2021 09:23

once you're dipping below 60, it's not a stretch for it to dip further

=== @ Haylee 08/31/2021 09:23

something weird

=== @ Guinevere 08/31/2021 09:24

it's been a thing for a *while*
tbh i didn't report it bcuz a couple years ago i had a crappy laptop where everything ran slow on it. guess i was still used to the slow framerate. lol

=== @ Haylee 08/31/2021 09:25

Weeeird, so I moved up in versions (since hehe hard to keep up), but uh
![image](https://cdn.discordapp.com/attachments/882190179262144542/882194260001185812/unknown.png)
We're not at 21 anymore
so
intriguing

=== @EmilyV99 (discord: Emily) 08/31/2021 09:25

????

=== @ Haylee 08/31/2021 09:25

it's still not _60_
but
weird

=== @EmilyV99 (discord: Emily) 08/31/2021 09:25

you updated 2.55 build?

=== @ Haylee 08/31/2021 09:25

I was like
a few days outdated

=== @EmilyV99 (discord: Emily) 08/31/2021 09:25

that should not have changed a damn thing

=== @ Haylee 08/31/2021 09:25

No clue

=== @EmilyV99 (discord: Emily) 08/31/2021 09:26

nothing changed in at least a month should have much effect on fps

=== @ Haylee 08/31/2021 09:26

a few days meaning a couple weeks

=== @ Guinevere 08/31/2021 09:26

mine always sits around 30fps

=== @ Haylee 08/31/2021 09:26

in this case
yeah idk what's happening

=== @EmilyV99 (discord: Emily) 08/31/2021 09:26

could be random video driver garbage

=== @ Haylee 08/31/2021 09:26

maybe

=== @EmilyV99 (discord: Emily) 08/31/2021 09:26

which, would put it out of our possible control

=== @ Haylee 08/31/2021 09:27

also does the frameskip function work or what

=== @ Guinevere 08/31/2021 09:27

a lil weird that zc player can run buttery smoof but zquest can't keep up the pace, lol

=== @EmilyV99 (discord: Emily) 08/31/2021 09:28

I mean
check the .exe sizes
ZQ is like twice as big an exe

=== @ Guinevere 08/31/2021 09:28

true

=== @ Haylee 08/31/2021 09:28

fair

=== @ Haylee 08/31/2021 09:30

~~unfortunately it's now consistently around 51 instead of increasing when I have background processes but hey, 51 means I can _somewhat_ do my funky frame data stuff I wanna do in ZC better~~
I'll let ya know if more weirdness happens

=== @EmilyV99 (discord: Emily) 08/31/2021 09:30

Apparently mine sits around 30

=== @ Guinevere 08/31/2021 09:31

ayy
30 buddies

=== @ Haylee 08/31/2021 12:13

welp the FPS thing was a fluke
good to know
we're back to bad fps

=== @ 4matsy 09/01/2021 04:55

Ayy, more 30 buddies. :p
Yeah I'm still on alpha 92 since Mom and I's internet was out for a few weeks - let me go and download the latest nightly alpha and I'll see how that one compares. :o
## Secret--Undercombo flag (#843)
@ Mani Kanina opened this issue on 08/31/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/882312888025485363



=== @ Mani Kanina 08/31/2021 17:16

I don't know if this is a feature already since I haven't kept up with development, but I got the idea so I figured I should post it:

A secret flag similar to flag 16-31, but instead of changing the combo to a defined secret combo, it instead takes the screens undercombo.

=== @EmilyV99 (discord: Emily) 09/04/2021 04:27

`Secret->Undercombo`, interesting idea. I added `Secret->Next` recently, so it could be implemented just as that is.

=== @EmilyV99 (discord: Emily) 09/04/2021 08:57

(meta) thread name was changed: Secret--Undercombo flag
## ‚úÖüîíSmart Screen Scrolling Bug (#844)
@ Guinevere opened this issue on 09/01/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/882455341898543164



=== @ Guinevere 09/01/2021 02:42

when smart screen scrolling and fixed smart scrolling are enabled;
if there are solid combos at one edge of the screen, it blocks link from scrolling that way where the solid combos would be like if they were on the next screen in the same position.

![image](https://cdn.discordapp.com/attachments/882455341898543164/882455493526827028/2021-08-28-09-56-44.mp4)

=== @ P-Tux7 09/01/2021 02:44

are we getting fixed fixed smart scrolling now

=== @ Guinevere 09/01/2021 02:44

lol
could be
<:teehee:620404816769843200>

=== @EmilyV99 (discord: Emily) 09/01/2021 03:22

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 10/09/2021 16:34

(meta) thread name was changed: ‚úÖüîíSmart Screen Scrolling Bug
Fixed I think
I think this is the same issue as FireSeraphim's bug and I just fixed that one
(and I didn't notice this behavior once I fixed that)
## ‚ùåüîíAbility to change map numbers or Ability to Sort Dmaps (#845)
@ SkyLizardGirl opened this issue on 09/02/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/882804630063566960



=== @ SkyLizardGirl 09/02/2021 01:50

My first idea is some kind of ability to rearrange Dmap numbers, if you create your Overworld on map 4 for example, this ability would let you toggle Map 4 back to being map 1 again, without deleting and re-pasting maps in order to achieve this. All exits and stairs created won't becomes mixed up or erased while doing this.  Notice:  >   If this is not possible, i would like the ability to rearrange Dmaps without Exits and Stairs getting mixed up or messed up by trying to sort around my Dmaps by copying and re-pasting them. The idea would be a toggle option so transport destinations don't get ruined.

=== @ SkyLizardGirl 09/02/2021 01:52

This is one thing that has always bugged me.

=== @EmilyV99 (discord: Emily) 09/02/2021 01:59

this is really painful
and could be avoided by careful planning

=== @ SkyLizardGirl 09/04/2021 06:22

Ok then, just a sort button for Dmaps then maybe?
But the data is unchanged, it just appears different in the editor

=== @EmilyV99 (discord: Emily) 09/04/2021 06:49

gonna go with no
(meta) thread name was changed: ‚ùåüîíAbility to change map numbers or Ability to Sort Dmaps
## ‚úÖüîíAbility to sort Message strings by number using a toggle (#846)
@ SkyLizardGirl opened this issue on 09/02/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/882805826035785768



=== @ SkyLizardGirl 09/02/2021 01:55

The ability to sort string messages by order of number from 1 to etc. Using a toggle option, you can sort your strings better without messages getting messed up in your game from trying to arrange them.

=== @EmilyV99 (discord: Emily) 09/04/2021 04:27

A simple "sort" button should be simple enough to add

=== @ SkyLizardGirl 09/04/2021 06:21

\0~^ Awesome

=== @EmilyV99 (discord: Emily) 02/02/2022 05:34

(meta) thread name was changed: ‚úÖüîíAbility to sort Message strings by number using a toggle
https://cdn.discordapp.com/attachments/494693243750187008/938305649413062656/unknown.png
https://cdn.discordapp.com/attachments/494693243750187008/938305686452965386/unknown.png
## üíäüîìPanoply of Calatia in 2.55 (#847)
@ Guinevere opened this issue on 09/02/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/882862231509954580



=== @ Guinevere 09/02/2021 05:39

I've only been playing it for a couple minutes and ran into a couple things, then i added items with cheats to see what else was up...
-shield doesn't push urchin enemies
‚úÖ -on certain screens, certian strings play when you pick up items, and since some strings are tied to items(specifically trading sequence items), the player also gets the item (Fixed)
-some sprite errors (sword beam break effect, ball and chain's chain)
-the candelabra only shoots two flames instead of three

=== @ Guinevere 09/02/2021 05:41


https://cdn.discordapp.com/attachments/882862231509954580/882862759082098748/Link_and_Zelda_-_Panoply_of_Calatia.qst

=== @ Guinevere 09/02/2021 05:42

these are all the ones i found so far.

=== @ P-Tux7 09/02/2021 06:36

```-on certain screens, certian strings play when you pick up items, and since some strings are tied to items(specifically trading sequence items), the player also gets the item```
wait slg had that issue in mystical harps (which was also a 2.50.2 quest converted to 2.55)

=== @ Guinevere 09/02/2021 06:38

i see
good to know

=== @ Guinevere 09/03/2021 00:09

-bubbles after they finish their spawn animation stop moving/bouncing

=== @ P-Tux7 09/03/2021 00:13

are these diagonal bubbles?

=== @ Guinevere 09/03/2021 00:27

ye

=== @ Guinevere 09/03/2021 00:28

-guma's sometimes shoot straight projectiles with no set sprite instead of their "bolas"

=== @ Guinevere 09/07/2021 05:00

-coppies copy the direction the player is facing but not the movements

=== @EmilyV99 (discord: Emily) 10/11/2021 20:17

(replying to @ Guinevere "I've only been playing it for‚Ä¶"): hover boots in this quest?
Looking through the quest file and script file, I don't see any hover boots item given to the player at any point ever

=== @ Guinevere 10/11/2021 20:18

yeah i forgot to remove them

=== @EmilyV99 (discord: Emily) 10/11/2021 20:19

> -if you hold the jump button on the second jump with the roc's cape, and have the hover boots, you fly up higher than you're supposed to

=== @ Guinevere 10/11/2021 20:20

yeah that's my bad

=== @ Guinevere 10/11/2021 20:21

i cheated in all the items (i thought) were in but i forgot the boots weren't an item in the quest.

=== @EmilyV99 (discord: Emily) 10/11/2021 20:24

`-the candelabra only shoots two flames instead of three`
Are you sure it's not spawning 3, but 2 of them are overlapping?
(If you have `Log Game Events to allegro.log` enabled, the console will show every time a script creates a weapon)
`-on certain screens, certian strings play when you pick up items, and since some strings are tied to items(specifically trading sequence items), the player also gets the item` This should have been fixed a while ago, was reported in other quests

=== @EmilyV99 (discord: Emily) 10/11/2021 20:30

What's wrong with sword beams? I don't see any issue

=== @EmilyV99 (discord: Emily) 10/11/2021 20:35

the urchins.... definitely are broken, and I don't see why at all
ffs

=== @ Guinevere 10/11/2021 20:42

I know that the item pickup bug was fixed
the sword beams screw up only when link is auto firing
and it could be that the candelabra is shooting three shots but two shots stop right away and the third trails off normally

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:37

(replying to @ Guinevere "-coppies copy the direction t‚Ä¶"): new player movement or zfix related perhaps?

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:38

(replying to @ P-Tux7 "are these diagonal bubbles?"): this could be similar
worth testing in builds prior ro adding these feats

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:40

http://timelord.insomnia247.nl/zc-dev/2.55/
i tried to mae change backtracking easy by archiving every build

=== @EmilyV99 (discord: Emily) 11/03/2021 15:41

(replying to @ZoriaRPG (discord: Timelord) "new player movement or zfix r‚Ä¶"): definitely not new movement, as that would require the quest be edited to enable a previously nonexisting qr

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:44

use cheats, try it in old builds th work forward
coud be soe wrie zfix thing
coud be anything
itested it in a build 2 years ago
never noticed those specific issues
also
please list open isues and not ied issues
would help
if you get a st saved to where it is eas to test thes bugs sain a20 then yo can repeately test each build thereater an chec changes

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:49

i advise jups o 5 builds to expedite narrowing the build range where te bug occurs
My apologises in advance i I did something awful

=== @ Mitsukara 11/05/2021 21:16

(replying to @EmilyV99 (discord: Emily) "Looking through the quest fil‚Ä¶"): They're not hover boots, although they are called such in-game.  They're a custom scripted item (I _think_ in one of the Custom Item Classes?) that prevents the player from falling into hole combos (and gives them protection from stepping on spikes with a regular "boots" item).

=== @ Mitsukara 11/05/2021 21:18

my apologies for not actually participating in 2.55 testing myself, rendering LaZPoC halfway into the realm of abandonware (neglectware?)
but if anyone has further questions on this subject I'd be happy to at least attempt to help answer
at some future time when I have more of a windows 10 setup (or if a new 2.55-or-above Linux version comes out) I'll try to actually test the quest myself

=== @EmilyV99 (discord: Emily) 11/05/2021 21:23

@ Saffith can probably compile a linux build for you to test with, though it won't have any sound (that's currently the main linux issue)

=== @ Mitsukara 11/05/2021 21:27

oh? Well, no pressure if it'd be difficult, but that could be neat if it's easy to do

=== @EmilyV99 (discord: Emily) 11/05/2021 21:33

as far as I know compiling it (without sound) should be as easy as compiling a build for windows... just, saff is the only one with the linux build setup, considering you need a linux machine
well, or a VM, but we don't have that set up

=== @ Mitsukara 11/05/2021 21:35

hmm, I wonder if you can compile from within a flash drive boot of Linux, without needing to make a permanent installation

=== @ Mitsukara 11/05/2021 21:37

(the way Mint and most other versions of Linux work, you just format a USB flash drive to act as a boot device, and you can run Linux from that even without a permanent installation to a hard drive. I opted to install on my hard drive as well, but you don't have to do that to run Linux)
(it was pretty fast and simple)

=== @EmilyV99 (discord: Emily) 11/05/2021 21:41

I mean, I don't see why not
the main issue just being "bleh, needing to set things up? Lazy..."

=== @arceusplayer11 (discord: Deedee) 11/05/2021 21:52

The issue for me and getting linux is that i only have 5gb of space left on my main drive and im too lazy to vlean some of it out

=== @ Saffith 11/06/2021 03:33

Yeah, I can get something together. There are a couple of crashes I've been putting off dealing with; I should really do that first.
Sorry, been pretty lazy lately.

=== @EmilyV99 (discord: Emily) 11/06/2021 04:03

No problem <a:hugheart:884673091878391828>

=== @ Mitsukara 11/06/2021 04:10

(replying to @arceusplayer11 (discord: Deedee) "The issue for me and getting‚Ä¶"): that's part of the beauty of having a boot stick. No hard drive space needed, just a USB flash drive
also that's totally fine, I appreciate that you're working on stuff at all

=== @arceusplayer11 (discord: Deedee) 11/06/2021 11:32

(replying to @ Saffith "Sorry, been pretty lazy latel‚Ä¶"): Youve been a godsend recently, theres no pressure!

=== @arceusplayer11 (discord: Deedee) 01/29/2022 21:41

```-shield doesn't push urchin enemies``` Fixed

=== @ P-Tux7 01/29/2022 22:04

i dunno if you wanna detail it in the thread but i'd be interested to hear what the problem was in DM

=== @ P-Tux7 01/29/2022 22:07

Also, another quest worth looking into would be her 6th quest, since it uses much of the same ZScript functions. If it has bugs, fixing one there might fix it in Panoply. It can definitely clear your mind and make you realize a solution if you have two projects you can go back and forth between instead of focusing only on Panoply.

=== @arceusplayer11 (discord: Deedee) 01/29/2022 23:33

```-some sprite errors (sword beam break effect, ball and chain's chain)``` Fixed, Zoria was a dumbass and hardcoded default weapon sprites when the weapon creation code handled them based on item ownership and etc

=== @arceusplayer11 (discord: Deedee) 01/30/2022 15:08

``//step = (type<2)?.5:0;`` Okay so see this
```-the candelabra only shoots two flames instead of three```
The thing that sets the default step for fire weapons is commented out
So script created fire weapons got changed to default to 0 step instead of 0.5 step, without regard for what this would break
thanks Zoria

=== @arceusplayer11 (discord: Deedee) 01/30/2022 15:35

I'm unsure if this is  abug or intended; autofire damage seems *really* low
lemme boot it up in 2,53

=== @arceusplayer11 (discord: Deedee) 01/30/2022 15:42

Okay, no, it seems intentional
I mean, they are level 1 stats

=== @arceusplayer11 (discord: Deedee) 01/30/2022 22:11

It's really annoying trying to debug issues introduced in early 2.53

=== @arceusplayer11 (discord: Deedee) 02/01/2022 19:26

```-guma's sometimes shoot straight projectiles with no set sprite instead of their "bolas"```
Fixed this; o_tile was for some reason changed to not be correctly initialized with script weapons, which would cause o_tile to either be the value of a previous weapon or random values, which tricked scripts into thinking that the weapon had been dealt with and made into a bola when in fact it hadn't

=== @arceusplayer11 (discord: Deedee) 02/01/2022 19:28

```-shield doesn't push urchin enemies```
```-bubbles after they finish their spawn animation stop moving/bouncing```
```-coppies copy the direction the player is facing but not the movements```
all of these are fixed, as they were the same underlying issue
and both```-the candelabra only shoots two flames instead of three```and ```-some sprite errors (sword beam break effect, ball and chain's chain)``` were fixed, as detailed above
granted, I have not yet checked the ball and chain

=== @arceusplayer11 (discord: Deedee) 02/01/2022 19:31

I'm going through the entire game and fixing stuff as I go

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:05

god, it's a pain to search through quest strings
I wish there were a way to force sort them by their number

=== @EmilyV99 (discord: Emily) 02/01/2022 20:11

...give me like 5 minutes.
and I can give you that in 2.55

=== @EmilyV99 (discord: Emily) 02/01/2022 20:42

@arceusplayer11 (discord: Deedee) pushed
that took a little more than 5 minutes, but, it's pretty cleanly implemented

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:42

ooooh
thank you

=== @EmilyV99 (discord: Emily) 02/01/2022 20:42


![image](https://cdn.discordapp.com/attachments/882862231509954580/938172497373851708/unknown.png)
`Sort` will sort everything numerically
and when you sort, it takes a copy of the order it was in previously; and makes `unsort` pressable. `Unsort` will restore the previous order.

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:43

It's purely visual, right? It won't fuck with the actual order?

=== @EmilyV99 (discord: Emily) 02/01/2022 20:43

It does fuck with the actual order
there isn't a way to do it visuallyu
without completely rewriting how it works
but, `unsort` will put it back in the order it was in before you `sort`ed

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:43

will it still save the order even if you go into a message string and then go out?

=== @EmilyV99 (discord: Emily) 02/01/2022 20:43

yes, but not if you close the dialog

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:44

alright

=== @EmilyV99 (discord: Emily) 02/01/2022 20:44

...actually could probably make it stay even through that easily enough
hmm
one moment
oh wait
no
because that would persist even if you changed quests
bleh
yeah, so just be careful not to close the dialog if you intend to unsort

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:46

So, uh
I'm running into a very weird pickup issue
```int32_t shop_pstr = 0;
            switch(tmpscr[tmp].room)
            {
                case rSHOP:
                    shop_pstr = QMisc.shop[tmpscr[tmp].catchall].str[PriceIndex];
                    break;
                case rBOTTLESHOP:
                    shop_pstr = QMisc.bottle_shop_types[tmpscr[tmp].catchall].str[PriceIndex];
                    break;
            }
            if ( (pstr > 0 && pstr < msg_count) || (shop_pstr > 0 && shop_pstr < msg_count) )
            {
                if ( (pstr > 0 && pstr < msg_count) && ( ( ( pstr_flags&itemdataPSTRING_ALWAYS || pstr_flags&itemdataPSTRING_NOMARK || pstr_flags&itemdataPSTRING_IP_HOLDUP || (!(FFCore.GetItemMessagePlayed(id2)))  ) ) ) )
                {
                    if ( (!(pstr_flags&itemdataPSTRING_NOMARK)) ) FFCore.SetItemMessagePlayed(id2);
                }
                else pstr = 0;
                if(shop_pstr)
                {
                    donewmsg(shop_pstr);
                    enqueued_str = pstr;
                }
                else if(pstr)
                {
                    donewmsg(pstr);
                }
            }``` I'm picking up an item on a screen with a screen 80 shop (but not in the shop itself)
And it's displaying string 200
this is the shopdata of the shop in question
![image](https://cdn.discordapp.com/attachments/882862231509954580/938173859931254794/unknown.png)

=== @EmilyV99 (discord: Emily) 02/01/2022 20:48

oh uhh
I see what's wrong
`PriceIndex` is `-1`
so it's reading `[-1]`, out of bounds
probably grabbing the price of the 3rd item

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:48

ahhhh

=== @EmilyV99 (discord: Emily) 02/01/2022 20:48

the entire `switch(tmpscr[tmp].room)` needs to be inside an `if(PriceIndex > -1)`

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:49

```if (PriceIndex >= 0 && PriceIndex < 3) ```?

=== @EmilyV99 (discord: Emily) 02/01/2022 20:49

`>-1` should be sufficient
it will only ever be -1, 0, 1, 2
#1163
that'll be fixed by this

=== @ P-Tux7 02/01/2022 20:53

oh is that what slg was reporting

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:57

Well, she did respond with "random items" instead of "shop items"
but I need a clarification

=== @ Mitsukara 02/04/2022 00:50

so hey, sorry I haven't been keeping an eye on all this. Feel free to ping me if there's questions in here that I miss

=== @ Mitsukara 02/04/2022 01:00

(replying to @arceusplayer11 (discord: Deedee) "```-some sprite errors (sword‚Ä¶"): ...this reminds me of a more general weirdness I noticed a time or two, in 2.50.2, which I never checked if it's still in newer versions or how best to prevent it, but, sometimes when you created a LW_SCRIPT(number) weapon, it would, for one frame, have weapon sprite 1 (wooden sword) pointing north, before the graphic was set? Not sure if that's still a thing, or something I was doing wrong, it's been a long time since I poked at any of this
to the point where I'm not confident trying to post a bug report, but it might be an issue that existed, or exists

=== @ Mitsukara 02/04/2022 01:02

(replying to @arceusplayer11 (discord: Deedee) "I'm unsure if this is  abug o‚Ä¶"): ...I might've been incompetent somewhere, I don't think it was supposed to be level 1 damage at all times? I mean... _maybe_ that made sense but it sounds kinda weird. I would think if I was nerfing it I would've gone for half-damage, or like, one level behind or something, like literally like, a flat level 1 damage no matter how much you levelled up.
Then again I defaulted to liking things tanky so I might not've even noticed and thought about it

=== @arceusplayer11 (discord: Deedee) 02/04/2022 01:03

(replying to @ Mitsukara "...I might've been incompeten‚Ä¶"): I was at level 1 at the time; it just seemed like Link was doing half the damage Zelda was doing as a partner

=== @ Mitsukara 02/04/2022 01:03

OH
okay, I think Link might have weaker swordbeams that match Zelda's arrows when he's a partner, yeah
I think that might've been part of the attempt to make Link suck less since there was a general consensus it was always better to play as Zelda
so that the actual sword does more damage when you're using it directly

=== @arceusplayer11 (discord: Deedee) 02/04/2022 01:04

(replying to @ Mitsukara "I think that might've been pa‚Ä¶"): wow, you should have gone the opposite approach
should have given them a gust jar so they could suck *more*

=== @ Mitsukara 02/04/2022 01:05

Make Link completely useless?
![image](https://cdn.discordapp.com/attachments/882862231509954580/938963448686071868/iu.png)

=== @arceusplayer11 (discord: Deedee) 02/04/2022 01:05

üòé

=== @ Mitsukara 02/04/2022 01:05

I do wish I'd had a gust jar item kinda thing actually
Maybe in a future project XD

=== @ Mitsukara 02/04/2022 01:07

(replying to @arceusplayer11 (discord: Deedee) "god, it's a pain to search th‚Ä¶"): Sorry about this. I share your pain, and regretted a thousand times that I had changed the order at all
Another really, REALLY good sounding quality of life feature to be able to resort them now, thanks for that!

=== @ Mitsukara 02/04/2022 01:09

also, thank you both more generally for working on all this stuff

=== @arceusplayer11 (discord: Deedee) 02/04/2022 01:58

no problemo
I've gotten a lot of dungeons down with very little issue; only just now ran into an issue with wand fire because I flubbed up another fix

=== @arceusplayer11 (discord: Deedee) 02/11/2022 09:13

So as far as I could tell, Panoply now plays fine in 2.55
(meta) thread name was changed: üíäüîìPanoply of Calatia in 2.55

=== @ P-Tux7 02/11/2022 21:57

Can you test her 6th quest?

=== @EmilyV99 (discord: Emily) 02/13/2022 05:13

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Allow moving item spawn position without selecting an item (#848)
@ Moosh opened this issue on 09/02/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/882932541429014538



=== @ Moosh 09/02/2021 10:18

This is the nittiest of nitpicks out there so keep in mind that I realize this. When you click the item square button in ZQuest it auto opens a prompt to select an item. Currently if you select (None) it treats this the same as having hit cancel. And in most cases this makes sense, if you're placing an item you probably want to place an actual item. But there is one exception to this: item cellar screen 80. In that one case, the item spawn position is used for an item set on another screen and no item will normally appear there. Whenever I set up a new screen 80, I'll just place a random item and then go back and set the screen item to (None), but since the cancel button is already a thing it'd be nice to cut out that extra step. Thoughts?

=== @ Moosh 09/02/2021 10:20

I also realize that there's no harm in leaving an item on screen 80. It'll get properly replaced. But it looks better in the editor without. Also the contents of screen 80 can still show up in quest reports, which may or may not be a bug itself

=== @ P-Tux7 09/02/2021 15:37

i'd call items an issue for quest reports, but the screen (or staircase and cave screens) can't be excluded entirely due to it having valid user-placed combos and enemies

=== @EmilyV99 (discord: Emily) 09/04/2021 04:27

this makes sense, though I could see it being annoying for some; can probably make it a ZQ config

=== @ Moosh 09/04/2021 07:07

Sounds good. Either that or a screen 80 specific exception
## Whimsical-Attack Ring Customization (#849)
@ Guinevere opened this issue on 09/03/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/883194006450884669



=== @ Guinevere 09/03/2021 03:37

I'd like them to have seperate flags for letting them only/either affect the sword, hammer, or wand.

=== @ Guinevere 09/03/2021 04:49

(Tbh I want a flag where it only affects the sword but i felt that having one for all 3 would be courteous to others who'd like to choose exactly what it affects.)

=== @EmilyV99 (discord: Emily) 09/04/2021 04:26

this makes sense, will just take a bit of fiddling to make sure the flags are checked by default in qst.cpp

=== @ Guinevere 09/04/2021 04:30

having rings that affect the power of any lweapon and you could mix and match different rings and their flags for easier power upgrades/ring systems in quests instead of wasting tons of item space on a million upgrades to the items would also be neat, but i think that'll be a lil too much
so keeping it simple to just these are a good start.
## ‚úÖüîíMessage Strings Displaying Improperly - Alpha 95 Nightly 3 (#850)
@ NightmareJames opened this issue on 09/03/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/883279397518450728



=== @ NightmareJames 09/03/2021 09:17

Message Strings Displaying Improperly - Alpha 95 Nightly 3
https://youtu.be/NdO4NuTDJ-s
Quest that triggered it
https://cdn.discordapp.com/attachments/883279397518450728/883279532088524820/zeldanesremastered_V2_0._PublicGamma3.qst

=== @EmilyV99 (discord: Emily) 09/03/2021 14:02

This seems like #798 and #847

=== @ P-Tux7 09/04/2021 02:54

does this quest have any scripts?

=== @ bigjoe 09/04/2021 02:56

whatever is going on, the fact that its occuring across multiple quests elevates the need to get it looked at

=== @EmilyV99 (discord: Emily) 09/04/2021 02:57

aye

=== @ Saffith 09/04/2021 04:14

I think I see the problem. link.cpp, line 23975:
int shop_pstr = ( tmpscr[tmp].room == rSHOP && QMisc.shop[tmpscr[tmp].catchall].str[PriceIndex] > 0 ) ? QMisc.shop[tmpscr[tmp].catchall].str[PriceIndex] : 0;
PriceIndex is -1.

=== @ Saffith 09/04/2021 04:16

And str[-1] is 10, the string it's showing.

=== @EmilyV99 (discord: Emily) 09/04/2021 04:16

but the room isn't a shop
so that should short-circuit with a false boolean condition
...oh
........oh
......................oh
but
it needs
oh fuck
I would have taken so long to find that
needs to check `&& PriceIndex > -1`, I suppose

=== @EmilyV99 (discord: Emily) 09/04/2021 04:24

(you fixing and PR'ing, or shall I fix?)
@ Saffith

=== @ Saffith 09/04/2021 04:24

Sure, I'll take it.

=== @ Saffith 09/04/2021 04:37

Oh, uh... I accidentally merged it with another pull request? Sorry, haven't actually done this part much.
That one was pretty small, though. Not a problem, hopefully.

=== @EmilyV99 (discord: Emily) 09/04/2021 06:48

merged, fixed
(meta) thread name was changed: üíäüîìMessage Strings Displaying Improperly - Alpha 95 Nightly 3

=== @EmilyV99 (discord: Emily) 09/04/2021 08:56

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) @ NightmareJames

=== @EmilyV99 (discord: Emily) 09/05/2021 10:12

(meta) thread name was changed: ‚úÖüîíMessage Strings Displaying Improperly - Alpha 95 Nightly 3
## ‚úÖüîíEnemy Editor Stats Bugged (#851)
@ Architect Abdiel opened this issue on 09/03/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/883402281150713948



=== @ Architect Abdiel 09/03/2021 17:25

I'm having a bug with the enemy editor. I went in to edit stats for enemies, saved the stats. Then when I went back into the enemy editor it had set its turn freq., halt rate, step speed and homing factor to 32767.

I tried this with enemies that had no scripts on them on a screen that also had no scripts on it.

I've edited ghost's shadows a little bit, but haven't touched anything else.

=== @EmilyV99 (discord: Emily) 09/03/2021 18:19

@arceusplayer11 (discord: Deedee) ?

=== @ Architect Abdiel 09/03/2021 18:31

Btw, this could be important. The only script I've added since then is the updated version of Newbie Boss. I don't think it would cause the problem though.
I had the old version and updated to the newest one.

=== @EmilyV99 (discord: Emily) 09/03/2021 18:32

a script literally could not cause a ZQ issue

=== @ Architect Abdiel 09/03/2021 18:33

That said, I've only edited a couple constants in ghost and Newbie Boss, which I can't imagine should have any effect, especially on normal enemies with no scripts on them.

=== @EmilyV99 (discord: Emily) 09/03/2021 18:33

scripts don't run in ZQ
and the code to run scripts isn't even in `zquest.exe`

=== @ Architect Abdiel 09/03/2021 18:34

I didn't think it would. But I figured I'd at least mention the only change I've made since starting.

=== @EmilyV99 (discord: Emily) 09/03/2021 22:06

...so, I edited an enemy, and instantly hit `OK`
Step speed became 1000
so I edited again, and hit `OK`
step speed became 32767, which is `MAX_SHORT`

=== @arceusplayer11 (discord: Deedee) 09/03/2021 23:07

Wtf

=== @ Architect Abdiel 09/03/2021 23:18

Yeah. That's how I felt too.
It wasn't like this 2 or 3 nightlys ago.

=== @EmilyV99 (discord: Emily) 09/03/2021 23:20

Nothing about the code directly surrounding it has been changed
So either random build corruption or some weird bug
But, I have to do a lot of work to build now, because some PRs were merged and broke compile

=== @arceusplayer11 (discord: Deedee) 09/03/2021 23:25

Oof

=== @ Architect Abdiel 09/04/2021 00:03

Hopefully figuring out what's happening isn't too difficult.

=== @EmilyV99 (discord: Emily) 09/04/2021 00:14

aye, should have it fixed tonight or tomorrow, hopefully
this can't be that outlandish, building it in debugger mode should lead me quickly to the issue

=== @ Architect Abdiel 09/04/2021 00:23

Okay. Thankfully there's an easy path like that.

=== @EmilyV99 (discord: Emily) 09/04/2021 01:21

So, I changed how `vbound` was set up internally
and it uh
was acting REALLY fucking weird
and not doing what it should have been at all
so, I re-worked it *again*
and now it is working again

=== @EmilyV99 (discord: Emily) 09/04/2021 02:08

so it was working again until I tried to build it in release instead of debug
and I fucking hate C++ once again

=== @EmilyV99 (discord: Emily) 09/04/2021 02:26

ok, got it fixed for real
fucking pain
will put out another build once I do a couple other things
(want to try to get the external parser working)

=== @ Architect Abdiel 09/04/2021 02:29

Sounds like a pain. Weird how it would work in debug but not release. Would think it would work in both.

=== @EmilyV99 (discord: Emily) 09/04/2021 02:29

some sort of linker error with template functions

=== @arceusplayer11 (discord: Deedee) 09/04/2021 03:36

@EmilyV99 (discord: EmilyV) was this a you error?

=== @EmilyV99 (discord: Emily) 09/04/2021 03:43

aye, certainly was
(meta) thread name was changed: ‚úÖüîíEnemy Editor Stats Bugged
## Forward Bombs pierce enemy shields QR to item settings. (#852)
@ Alucard648 opened this issue on 09/04/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/883616813169127424



=== @ Alucard648 09/04/2021 07:37

Title says almost all. As well as adding Unblockable bool to LWeapons.
## ‚úÖüîíQuest icons dont update when quest is changed (#853)
@ Mitsukara opened this issue on 09/04/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/883629323620343839



=== @ Mitsukara 09/04/2021 08:27

As requested, this is the old system where ZC loads all four quest icons for a quest when the save file's custom quest is first selected, and does not load them again even if the quest is changed in ZQuest.

=== @EmilyV99 (discord: Emily) 09/04/2021 08:28

^ Make togglable with a zc config, default auto-reload enabled (in case it's too laggy a load time for some people)
basically, just, on zc init, when it first loads all the saves, refresh the game icons from the quest file.

=== @EmilyV99 (discord: Emily) 09/04/2021 22:10

....ZCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC

=== @EmilyV99 (discord: Emily) 09/04/2021 22:34

I uh
am so confused

=== @EmilyV99 (discord: Emily) 09/04/2021 22:40

so fucking confused
I literally am watching it load the new icon
but then it displays the old icon
what the fuck

=== @EmilyV99 (discord: Emily) 09/04/2021 22:46

oh wait

=== @EmilyV99 (discord: Emily) 09/04/2021 22:51

GAH I HATE THE TITLE SCREEN
BUT I THINK IT WORKS

=== @EmilyV99 (discord: Emily) 09/04/2021 23:12

@ Mitsukara

https://cdn.discordapp.com/attachments/883629323620343839/883852038428045312/zelda.exe

https://cdn.discordapp.com/attachments/883629323620343839/883852065300955176/zquest.exe
(meta) thread name was changed: üíäüîìQuest icons dont update when quest is changed

=== @EmilyV99 (discord: Emily) 09/05/2021 10:12

(meta) thread name was changed: ‚úÖüîíQuest icons dont update when quest is changed

=== @ NightmareJames 09/08/2021 15:50

I had the same issue too, glad it's fixed
Thank you @ Mitsukara
## ‚ùåüîíScripted|Blank Hero Actions (#854)
@ Alucard648 opened this issue on 09/04/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/883686043629522974



=== @ Alucard648 09/04/2021 12:12

For scripting purposes.

=== @EmilyV99 (discord: Emily) 09/04/2021 21:26

ü§¢
no
`->Action` is a hack on a hack on a hack on a hack
and is the jankiest jank of all jank
I would say `not until rewrite`
....but `Acton` won't exist in the rewrite, because it's jank as fuck
(meta) thread name was changed: ‚ùåüîíScripted|Blank Hero Actions
## ‚ùåüîíCommand to Spawn Engine Grass and Bush (etc)Clippings (#855)
@ bigjoe opened this issue on 09/04/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/883833609532878878



=== @ bigjoe 09/04/2021 21:59

Self explanatory. Would help a lot with lifting scripts and such

=== @EmilyV99 (discord: Emily) 09/04/2021 21:59

#deleted-channel
duplicate
(meta) thread name was changed: ‚ùåüîíCommand to Spawn Engine Grass and Bush (etc)Clippings
## Disable F6 on certain screens (#856)
@ Mitsukara opened this issue on 09/05/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/884184499041234964



=== @ Mitsukara 09/05/2021 21:13

Not sure how feasible this is, but it would be neat as a thing in either screen data settings, or with zscript.

=== @ P-Tux7 09/05/2021 22:06

i'd appreciate a method where you can disable f6 but also keep death continuing

=== @ P-Tux7 09/05/2021 22:07

so that in cases like these if you try to continue you don't press start on the "go back to the file selection" prompt because you think you're gonna be able to continue

=== @EmilyV99 (discord: Emily) 09/05/2021 22:28

ZScript can
make an F6 script
and stuff
don't remember exactly how you'd have to set it up at the moment

=== @EmilyV99 (discord: Emily) 09/10/2021 12:26

oh, also, uh
forgot the simpler way
which is `Input->DisableKeys[]`
so for instance
```cpp
bool b = ScreenFlag(some script screen flag or something);
Input->DisableKeys[KEY_F6] = b;```

=== @ P-Tux7 09/10/2021 15:32

zc still has the menu option with the mouse, right?

=== @EmilyV99 (discord: Emily) 09/10/2021 16:02

Oh, true
An F6 script method of handling it would handle that too
## increase compile zscript font (#857)
@arceusplayer11 (discord: Deedee) opened this issue on 09/06/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/884578139295080468



=== @arceusplayer11 (discord: Deedee) 09/06/2021 23:17

I've gotten complaints that the text for compiling zscript is too small and hard to read (the window that gives you the errors). Could we bump that up?

=== @EmilyV99 (discord: Emily) 09/06/2021 23:18

You can't just bump font size, so you need to actually change the font to one that is larger
but uh
the external parser is gonna entirely change how compile errors work
...namely, they will be printed to external file, because the parser won't be part of the zquest process.

=== @EmilyV99 (discord: Emily) 09/07/2021 00:30

. . . so now my question is
how does loading external text files for display work
like, how the `Help` button in strings displays `zstrings.txt`
and how the buffer editing works
.....and would there be a way to call that with variable font, to allow different sizes.

=== @ Saffith 09/09/2021 14:19

https://docs.microsoft.com/en-us/windows/win32/procthread/creating-a-child-process-with-redirected-input-and-output?redirectedfrom=MSDN
https://tldp.org/LDP/lpg/node15.html#SECTION00730000000000000000
## ‚ùåüîíAbility to switch subscreen types using an Ex button 4 (#858)
@ SkyLizardGirl opened this issue on 09/07/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/884595344674004992



=== @ SkyLizardGirl 09/07/2021 00:26

Ability to switch subscreen types using an Ex button 4 in game.  You could make at least 3 different subscreens that can be used for different things optional for your game, kinda like how Ocarina of time has 3 or 4 different subcreens to switch through, only you could do this in ZC. This would Allow room to put more optional stuff in the game, such as Maps and more items etc.

=== @EmilyV99 (discord: Emily) 09/07/2021 00:26

no
no
no
no
no

=== @ SkyLizardGirl 09/07/2021 00:26

?

=== @EmilyV99 (discord: Emily) 09/07/2021 00:26

the subscreen is not being touched
at all
ever
ever
ever
no
use a scripted subscreen

=== @ SkyLizardGirl 09/07/2021 00:27

Ok

=== @EmilyV99 (discord: Emily) 09/07/2021 00:27

(meta) thread name was changed: ‚ùåüîíAbility to switch subscreen types using an Ex button 4
## ‚úÖüîídark room color select (#859)
@ aslion opened this issue on 09/07/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/884889866096226345



=== @ aslion 09/07/2021 19:56

Hey, I'd love to be able to change the system black & white colors, would be very nice for my quest with a limited color palette and I'm sure there'd be some other good applications for it as well.

=== @EmilyV99 (discord: Emily) 09/07/2021 20:09

I don't really see a good way to do this, system colors are meant to be constant in all quests
they are used for everything from walkflag cheats to showing flags in ZQ to lens marker etc

=== @ P-Tux7 09/07/2021 20:47

can't one just change the colour right before they save the quest and release it

=== @EmilyV99 (discord: Emily) 09/07/2021 20:49

that's not the point whatsoever
requiring the user to be smart in order to not break things is not acceptable
needs to be dumb-proof

=== @ aslion 09/08/2021 00:41

Would it be possible to at least make the screen transitions not always use system black then?
Though that's a pretty different request than this lol

=== @EmilyV99 (discord: Emily) 09/08/2021 00:47

You mean dark rooms, and perhaps

=== @EmilyV99 (discord: Emily) 09/21/2021 01:45

(meta) thread name was changed: dark room color select

=== @ aslion 09/21/2021 01:57

oh that isn't what I meant
but might fulfill the same purpose idk

=== @EmilyV99 (discord: Emily) 09/21/2021 05:24

woo

https://cdn.discordapp.com/attachments/884889866096226345/889743822811197540/zelda.exe

https://cdn.discordapp.com/attachments/884889866096226345/889743921276674068/zquest.exe

=== @EmilyV99 (discord: Emily) 09/21/2021 05:58

(meta) thread name was changed: üíäüîìdark room color select
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
full nightly posted

=== @ aslion 09/21/2021 14:07

Would it possible to have something like this for the screen transition wipes too? ‚ù§Ô∏è

=== @ P-Tux7 09/21/2021 16:10

ooh and the lens' black and white

=== @ P-Tux7 09/21/2021 16:11

(no hurry because i'm using black and white so i don't need to change those)

=== @EmilyV99 (discord: Emily) 09/21/2021 16:25

@ aslion @ P-Tux7 make separate requests
(meta) thread name was changed: ‚úÖüîídark room color select
## Rock-Boulder Enemies (#860)
@ Guinevere opened this issue on 09/08/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/884982521169862726



=== @ Guinevere 09/08/2021 02:04

these enemy types are pretty infuriating for the player to deal with, so if it's possible i'd like the data of the enemy affect it in some way
examples being where the random rate can maybe affect it's fall path of going left and right, and 0 would maybe make it only fall one direction and have step speed affect how fast it falls down

=== @ P-Tux7 09/08/2021 02:09

a more elegant solution for your quest might be to add an npc script to be like oot
where if link has a L2 shield or better, and he's facing the rock, it kills itself and produces an effect (probably a LW_SPARKLE made to look like a shattering rock, i don't know if rocks have a normal death effect)

=== @ P-Tux7 09/08/2021 02:12

i like your idea but there IS one issue with it that would prevent it from being executed well
i don't know if rocks respect enemy placement flags 0-9
so a right-down moving rock might spawn on the right-top of the screen. not very effective

=== @ Guinevere 09/08/2021 02:13

well that could also be added maybe
i got no idea how to do npc scripts
and besides i think it would be beneficial for everyone to have a simpler way to make them less frustrating to deal with that everyone has access to
and i feel that what i've suggested doesn't take away the spirit of how the enemy acts
<:nekoshrug:869489800271503400>

=== @ P-Tux7 09/08/2021 02:15

i'm pretty sure you just add a script and you can assign it to the enemy (which also means the script can reference its parent enemy or tell it what to do)

=== @ Guinevere 09/08/2021 02:17

i mean i don't know how to script npcs as in how they work, move, attack, etc;
## ‚è±üîímore non Enemy enemy ideas (#861)
@ Dr00g opened this issue on 09/08/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/884989500810465280



=== @ Dr00g 09/08/2021 02:32

So we things like Traps, Rocks and Fireball shooters
Id like to see more stuff like fake doors from Mimish Cap and firebars from Alttp are these enemys just as hard to add as other enemies?

=== @ P-Tux7 09/08/2021 02:33

firebars have been done so far with ffc scripts and can surely be done with npc scripts
and fake doors are just temporary  step -> next + copycats that cycle from non-damaging to damaging then back again
though if you want more than one per screen you might need a script yeah

=== @EmilyV99 (discord: Emily) 09/08/2021 02:36

no new enemies until rewrite

=== @ P-Tux7 09/08/2021 02:52

that sounds like 2 years at minimum. not encouraging

=== @EmilyV99 (discord: Emily) 09/08/2021 02:54

trying to modify enemies just is not happening
because spaghetti mess firy burning destroying the entire engine if we try

=== @ P-Tux7 09/08/2021 03:09

oh i'm dumb
this is engine enemies only
not "engine OR scripted"
that's why i made so much ado of the potential script solutions

=== @EmilyV99 (discord: Emily) 09/08/2021 03:12

(meta) thread name was changed: ‚è±üîímore non Enemy enemy ideas
## Priority music playing (#862)
@ Mani Kanina opened this issue on 09/08/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/885162435101728869



=== @ Mani Kanina 09/08/2021 13:59

A way to when you call a music track by script for playback, it will take priority. Meaning that it won't go back to the regular DMap track as soon as you switch screen.

Differenty priority levels on the calls would be nice:
Retain while on the same DMap or canceled by script.
Retain Globally no matter the DMap till canceled by script.
-
where did the message go?
ugh
anyway, guess I'll re type it

=== @ Mani Kanina 09/08/2021 14:01

Priority playback as an option when calling music playback via scripts. So that a track can be maintained and don't switch back to the DMap track as soon as you screen transition.

More than one priorty level would be nice too if you could set it when doing the call:
Retaining while on the same DMap till either you switch DMap or a scripts calls for the priority to be canceled (or new track to be played)

Retaining globally till a script calls for cancel or a script calls a new track.

=== @ mitchfork 09/08/2021 14:11

This would be nice. The current only way to do this is to update the dmapdata music track as well, which you then have to manually "clean up" later - often in a different script scope than you started with
## ‚ùåüîíDisplaying Item Strings  New Item Rule (#863)
@ NightmareJames opened this issue on 09/08/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/885223375507689482



=== @ NightmareJames 09/08/2021 18:01

Don't know if this would be simple or not, but this might need to be corrected/streamlined to Always/Once Per Level/One Time Only.  If an example needed @ Moosh and I can give one

=== @EmilyV99 (discord: Emily) 09/08/2021 20:39

I mean

![image](https://cdn.discordapp.com/attachments/885223375507689482/885262980625870928/unknown.png)
there are checkboxes right there
`once per level` isn't a thing, and that would be harder to add

=== @EmilyV99 (discord: Emily) 09/08/2021 20:43

@ NightmareJames

=== @ NightmareJames 09/08/2021 20:46

Hrmmmmmmmmm

=== @EmilyV99 (discord: Emily) 09/08/2021 20:46

`Only Held`, if not obvious, would only play it if you hold up the item
while `Always` determines if it is once-only or not

=== @ NightmareJames 09/08/2021 20:48

I'll review this and get back to you

=== @ NightmareJames 09/08/2021 20:51

I guess with keys and bombs I'd prefer you only get the message either first time or during the level, not after every time, you shut down the game, or run out of bombs

=== @ NightmareJames 09/08/2021 20:52

And bombs are tricky in classic quests because they disappear when you have zero and reappear when you collect another one

=== @EmilyV99 (discord: Emily) 09/08/2021 20:55

well that still wouldn't make it repeat
once-per-level isn't a thing
but once-only would be once-only
literally once it plays the string, it marks it as `read`, and it won't play it again ever

=== @ NightmareJames 09/08/2021 21:00

Yes, some items repeat and you'd definitely want that

=== @EmilyV99 (discord: Emily) 09/08/2021 21:00

it should either repeat every time or never
or only when held up
based on those flags
any other behavior is a bug to report

=== @ NightmareJames 09/08/2021 21:01

OK, I'll check my settings.  If Moosh and I see it again we will report it

=== @ NightmareJames 09/08/2021 21:12

Thank you

=== @EmilyV99 (discord: Emily) 09/21/2021 01:44

(meta) thread name was changed: ‚ùåüîíDisplaying Item Strings  New Item Rule
## Secret - Shutters (#864)
@ Alucard648 opened this issue on 09/08/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/885252676529557576



=== @ Alucard648 09/08/2021 19:58

Anyone, who still use NES dungeon Dmap type would want to allow opening NES dungeon shutters on secret trigger, either engine one, or scripted.

=== @EmilyV99 (discord: Emily) 09/08/2021 20:39

@arceusplayer11 (discord: Deedee) didn't you add this? Or were you planning to? seem to recall something

=== @arceusplayer11 (discord: Deedee) 09/08/2021 21:25

I was planning on adding it ye

=== @ FireSeraphim 09/09/2021 02:20

I would love to freaking have this. especially since getting block puzzle doors to actually stay open is a real pain in the ass

=== @ P-Tux7 09/09/2021 15:36

aren't permanent block puzzle secrets a thing now? or does that only apply to secrets and not doors

=== @EmilyV99 (discord: Emily) 09/09/2021 15:37

secrets
shutters are an *ENTIRELY* separate system
## ‚úÖüîíBomb and Key Messages Displaying More than once even when not checked Always or Held (#865)
@ NightmareJames opened this issue on 09/08/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/885305117329469500



=== @ NightmareJames 09/08/2021 23:26

Was told to report this.  I have indeed checked my settings.  Every time I die or run out, this will indeed reset again and play.  This definitely needs to be fixed.  Providing screen proof to show I do not have held or always checked off on bombs.  Will provide videos later if needed
My proof that nothing's checked off but the string being displayed.
![image](https://cdn.discordapp.com/attachments/885305117329469500/885305348884418590/unknown.png)
@ Moosh @ Mitsukara @EmilyV99 (discord: EmilyV)

=== @ Moosh 09/08/2021 23:28

Does Pick-Up Flags have something to do with it maybe? Also why's that check box hueg big?

=== @EmilyV99 (discord: Emily) 09/08/2021 23:29

... that's not a checkbox

=== @ Moosh 09/08/2021 23:29

Also you already made a report for this didn't you?

=== @EmilyV99 (discord: Emily) 09/08/2021 23:29

No he made a feature req

=== @ Moosh 09/08/2021 23:29


![image](https://cdn.discordapp.com/attachments/885305117329469500/885305920949731418/unknown.png)

![image](https://cdn.discordapp.com/attachments/885305117329469500/885305955552739328/unknown.png)
That sure looks like a check box?

=== @EmilyV99 (discord: Emily) 09/08/2021 23:29

@arceusplayer11 (discord: Deedee) you didn't remove the old pickupflags box
WTF
That used to be a textfield
And it's outdated by the new tab of checkboxes

=== @ Moosh 09/08/2021 23:30

strange

=== @EmilyV99 (discord: Emily) 09/08/2021 23:30

Dimi forgot to remove it... and apparently converted it to a checkbox?
Shouldn't be related

=== @ Moosh 09/08/2021 23:31

Dare I ask what happens if you check that and save?

=== @EmilyV99 (discord: Emily) 09/08/2021 23:31

Probably nothing?
Hopefully nothing?

=== @ Moosh 09/08/2021 23:32

Anyways, the behavior Nightmare's been having difficulty with is that every time the player dies, the bit flagging the string as having played gets reset

=== @EmilyV99 (discord: Emily) 09/08/2021 23:32

Yeah, that's certainly a bug

=== @ Moosh 09/08/2021 23:33

I could see it being an intended behavior depending on the quest
Like if pickup strings only go on non enemy drops, you might want them to refresh on a new play session
but a script can just as easily do that

=== @arceusplayer11 (discord: Deedee) 09/08/2021 23:35

(replying to @EmilyV99 (discord: Emily) "@arceusplayer11 (discord: Deedee) you did‚Ä¶"): ...fuck

=== @arceusplayer11 (discord: Deedee) 09/08/2021 23:37

I don't know how the hell it got turned into a check_proc. Did I sleepwalk to get both high and drunk and then wrote that while sleeping, drunk, and high?

=== @EmilyV99 (discord: Emily) 09/28/2021 15:10

the gui part of this was fixed

=== @arceusplayer11 (discord: Deedee) 10/09/2021 16:18

(meta) thread name was changed: ‚úÖüîíBomb and Key Messages Displaying More than once even when not checked Always or Held
Fixed

=== @ NightmareJames 10/14/2021 17:13

Confirmed fixed
## üíäüîìZScript RNG is not predictable after SRand() (#866)
@ Saffith opened this issue on 09/09/2021

Status: closed

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/885611534187917383



=== @ Saffith 09/09/2021 19:44

ZScript needs a dedicated, well-defined RNG, maybe something from boost::random. Because its Rand() and SRand() just call the corresponding C functions, the behavior varies by platform and is affected by ZC's own use of rand().

I ran this on two different systems:
```SRand(0);
for(int i=0; i<10; i++)
    Trace(Rand(1000));```

On Windows:
```Global script 2 (RandTest): 38.0000
Global script 2 (RandTest): 719.0000
Global script 2 (RandTest): 238.0000
Global script 2 (RandTest): 437.0000
Global script 2 (RandTest): 855.0000
Global script 2 (RandTest): 797.0000
Global script 2 (RandTest): 365.0000
Global script 2 (RandTest): 285.0000
Global script 2 (RandTest): 450.0000
Global script 2 (RandTest): 612.0000```

On Linux:
```Global script 2 (RandTest): 383.0000
Global script 2 (RandTest): 886.0000
Global script 2 (RandTest): 777.0000
Global script 2 (RandTest): 915.0000
Global script 2 (RandTest): 793.0000
Global script 2 (RandTest): 335.0000
Global script 2 (RandTest): 386.0000
Global script 2 (RandTest): 492.0000
Global script 2 (RandTest): 649.0000
Global script 2 (RandTest): 421.0000```

=== @EmilyV99 (discord: Emily) 09/09/2021 19:45

I knew something seemed off

=== @EmilyV99 (discord: Emily) 09/19/2021 00:50

What should be done here is, add an `rng` class; maybe `randgenerator`
(to zscript)
and allow creation of multiple generators
each with their own state
and `randgenerator->Rand()`, `randgenerator->SRand()`
using some more deterministic rng on the backend as suggested

=== @EmilyV99 (discord: Emily) 09/21/2021 01:18

@ Saffith Mind testing for cross-platform consistency in the branch `2.55-newrand`?
if it's all good there, I can work on further zscript options, but that should cover the main engine rng being consistent.
(no need for `boost::`, since there's `<random>` in C++11+)

=== @ Saffith 09/22/2021 01:34

Ah, right, forgot about that. Yeah, might take me a day or two, but I'll try it out.

=== @EmilyV99 (discord: Emily) 09/23/2021 07:23

Nevermind, I went to test it and have run into an odd error

![image](https://cdn.discordapp.com/attachments/885611534187917383/890498667423891496/unknown.png)
I fail to decrypt quest files. If I spam a key to make it keep retrying sometimes it suddenly decides to succeed once...
I'm very curious what could be causing this
while the quest reader does use rng for some parts of encoding, it uses its' own function, not anything that I would have touched...

=== @EmilyV99 (discord: Emily) 09/23/2021 19:03

....ah
it's getting invalid temp file names

=== @EmilyV99 (discord: Emily) 09/23/2021 19:10

ah, duh. It doesn't expect negative output, so the call I used as the default can't be the default anymore.

=== @EmilyV99 (discord: Emily) 09/23/2021 21:31

@ Saffith fixed issues

https://cdn.discordapp.com/attachments/885611534187917383/890711992980111370/rng.qst
Build `2.55-randgen`, and run that quest in the built `zelda.exe`. It should print to console whether the RNG is consistent or not.

=== @EmilyV99 (discord: Emily) 09/23/2021 21:38

(also fixed the `unlink` issue for linux compile)

=== @ Saffith 09/25/2021 03:28

Didn't work, I'm afraid...
Damned if I can explain it, but apparently the only consistent function is `LRand` with no arguments.

=== @EmilyV99 (discord: Emily) 09/25/2021 03:28

Hmm

=== @ Saffith 09/25/2021 03:28

(Also, ZScript_Additions.txt says LoadRNG is in FileSystem)

=== @EmilyV99 (discord: Emily) 09/25/2021 03:29

Ah crap
`LRand()` is a straight call of the RNG with no filter
I think
While the rest use ` uniform_int_distribution`

=== @EmilyV99 (discord: Emily) 09/25/2021 03:33

Yeah, that seems right
So something is off with that

=== @ Saffith 09/25/2021 03:46

I'm not sure that's meant to be deterministic. It sounds like the `mt19937` is just used to seed it. I think you just need to call `(*rng)()` and adjust the result.

=== @EmilyV99 (discord: Emily) 09/25/2021 03:48

I need a way to make it uniform, hopefully, though
...time to get writing.

=== @EmilyV99 (discord: Emily) 09/25/2021 04:00

....yeah nope. Low-leaning it is.

=== @EmilyV99 (discord: Emily) 09/25/2021 04:06

@ Saffith Use this
```cpp
int zc_rand(int upper, int lower, zc_randgen* rng)
{
    if(!rng) rng = &default_rng;
    if(lower > upper)
    {
        int t = lower;
        lower = upper;
        upper = t;
    }
    // std::uniform_int_distribution<int> dist(lower,upper);
    // return dist(*rng);
    return signed(unsigned(zc_rand(rng))%unsigned((upper-lower)+1))+lower;
}```
`random.cpp` function update
see if that works

=== @ Saffith 09/25/2021 04:07

Sure. It'll have to wait until tomorrow; Windows has another hour of updates to apply before I can get back in.

=== @EmilyV99 (discord: Emily) 09/25/2021 04:08

ah fun

=== @ Saffith 09/25/2021 19:15

That seems to have done it.
Incidentally, the numbers from your test quest didn't change on Windows, so apparently that's what MSVC's implementation of `uniform_int_distribution` was doing anyway.

=== @EmilyV99 (discord: Emily) 09/25/2021 19:45

...what
that's not fucking uniform though
windooooows

=== @EmilyV99 (discord: Emily) 09/25/2021 23:51

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @EmilyV99 (discord: Emily) 09/25/2021 23:52

(meta) thread name was changed: üíäüîìZScript RNG is not predictable after SRand()

=== @arceusplayer11 (discord: Deedee) 10/26/2021 16:05

Is this fixed?

=== @EmilyV99 (discord: Emily) 10/26/2021 16:20

Should be

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:17

Need someone to test if this is fixed, which... I actually don't think I can test this given how this depends on the OS

=== @EmilyV99 (discord: Emily) 10/29/2021 05:22

(replying to @ Saffith "That seems to have done it."): ^

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:24

```Emily ‚Äî 09/25/2021
...what
that's not fucking uniform though
windooooows``` this confused me
But I'm guessing that's more "why didn't a previous fix work" and not "why doesn't the current fix work"?

=== @EmilyV99 (discord: Emily) 10/29/2021 05:26

"Why did the new implementation match the old implementation on windows"
i.e. the new method (which works cross platform, at the cost of not being a uniform distribution)
matched the old method on windows
meaning the windows implementation of `uniform_int_distribution`
....is NOT UNIFORM
but aye, should be fixed

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:33

Okay, good
## Rule to change NES boss HP distribution? (#867)
@ Moosh opened this issue on 09/10/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886000900525674527



=== @ Moosh 09/10/2021 21:31

Some NES bosses that have multiple NPC components (Patra, Gleeok, Moldorm, Lanmola) appear to have some weird additional HP distribution mechanics that both make setting their HP in the enemy editor unintuitive and can make reading it with scripts awkward. You can see examples of enemies juggling HP values around when used in combination with my Link & Enemy Damage And Healing Numbers script

https://www.purezc.net/index.php?page=scripts&id=364

So basically what I'd propose here is a rule that makes it so the values entering in the enemy editor are consistently treated as the HP values _per hitbox_. A Patra with an HP of 1 would have each eye die in one hit, a Gleeok would have the same HP per head and take damage linearly (instead of having heads break in weird patterns of hits like 5-3-3-3). And the segmented enemies wouldn't do whatever awkward jank they are doing.

Of course I know anything involving enemies is godawful. If this HP distribution stuff isn't something that can be reasonably modified feel free to reject in full or in part.

=== @EmilyV99 (discord: Emily) 09/10/2021 21:31

No chance I'm touching this
I've been burned by enemy code enough already

=== @ Moosh 09/10/2021 21:32

Kinda figured üò¶

=== @EmilyV99 (discord: Emily) 09/10/2021 21:32

....if Dimi feels like adding it, I have no problem with that

=== @ Moosh 09/10/2021 21:32

@arceusplayer11 (discord: Deedee) ?

=== @ Moosh 09/10/2021 21:34

Also @ NightmareJames since this damage numbers bug has been a pain in both our sides with Downfall. IDK if there's any way to fix it in the script but I do imagine having these enemy types behave consistently with the rest of the engine would be a good start

=== @arceusplayer11 (discord: Deedee) 09/10/2021 21:36

Yeah I could try that
I have no qualms with touching this, but I need to get off my ass and finish Sideview Swimming

=== @ Moosh 09/10/2021 21:37

Sounds good. I'm in no particular rush on this, just figured it was a point worth raising
The patra and gleeok calcs in particular gave me grief in LQftH2. I had to fix them with a script üò©

=== @arceusplayer11 (discord: Deedee) 09/10/2021 21:39

unsure if I could actually remove the names of attributes based on QR, so might still have redundant "Head HP" setting

=== @ P-Tux7 09/10/2021 21:44

patras can't have just one number
they have different hp for kids and the core

=== @ Moosh 09/10/2021 21:49

It might be possible I made a stupid on that one. Would have to test. The way I remember it, setting HP on both resulted in the enemy not reflecting the values I set

=== @ P-Tux7 09/10/2021 21:49

oh well setting i have no idea
it works this way in z1 and by default in unscripted quest

=== @ Moosh 09/10/2021 21:52

Oh!
What the fuck
I set both HP to 1, removed the outer eyes from a Patra 2, same effect
So the outer eyes will die in one hit, inner eyes do not

=== @ Moosh 09/10/2021 21:57

WHAT THE FUCK
![image](https://cdn.discordapp.com/attachments/886000900525674527/886007531795775530/zc_screen00005.png)
IS THIS A HARDCODE?
WHY IS THIS A HARDCODE?
HOW LONG HAS THIS BEEN A HARDCODE!?
IT IS
![image](https://cdn.discordapp.com/attachments/886000900525674527/886007777917554759/zc_screen00006.png)
PATRA GIVES NO SHITS
/capslock

=== @EmilyV99 (discord: Emily) 09/10/2021 21:59

I've said I hate enemy code before
I should specify
NES bosses
Are about 5000000x worse than normal enemies

=== @ Moosh 09/10/2021 21:59

yup
At least this one shouldn't be hard to fix right? Ctrl+f for 24 in patra code blocks, find the one setting HP, and make it use the same attribute as the outer eyes?

=== @ P-Tux7 09/10/2021 22:10

twenty bucks that's how patra 2/3 were handled way back when
also i could have sworn one of the 2.55 alphas said something about a bugfix for inner patra eyes...?
should be in the notes because it was before 92

=== @ Moosh 09/10/2021 22:18

Well pre-2.5 I'm pretty sure everything was hardcoded
This particular enemy type I suppose just got overlooked in that transitional period

=== @ Saffith 09/11/2021 01:03

(replying to @ Moosh "At least this one shouldn't b‚Ä¶"): Ha, like we'd just write out the number!
`((enemy*)guys.spr(i))->hp=12*DAMAGE_MULTIPLIER;`
I've got patras up next to rewrite, so I'll take a look at them when I get back to that.

=== @ Moosh 09/11/2021 01:05

...damage multiplier is just 2 isn't it? I guess at least someone somewhere was thinking ahead, just not in the right ways

=== @EmilyV99 (discord: Emily) 09/11/2021 11:05

oh
DAMAGE_MULTIPLIER is in init data now
so
## Rocs Feather checkbox to work while swimming (overhead) (#868)
@ Mitsukara opened this issue on 09/10/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886002515622125589



=== @ Mitsukara 09/10/2021 21:37

I remember a long time ago testing if you could set Link->Jump while LA_SWIMMING was happening, and it worked pretty well as far as I could tell. So it'd be neat to have an option on Roc's Feathers where you could jump while you're in water. 

(Ideally this would be a distinct option from sideview swimming; in LA I think you could jump out of the sideview water, but not the overhead.)

=== @ P-Tux7 09/10/2021 21:46

i think there's a bigger issue in that i don't think any items can work while swimming, i know the whistle doesn't
do potions, even?

=== @EmilyV99 (discord: Emily) 09/10/2021 21:46

don't think any items do, aye
because diving

=== @ P-Tux7 09/10/2021 21:47

this would have been more feasible pre-a/ex1/ex2 item usage because a was just for the sword/diving

=== @ Mitsukara 09/10/2021 23:01

I guess the controls are a tricky issue. Maybe the feather could just override the dive command if it's on the same button?
once you _have_ jumped out of the water, you can use other items in midair until you fall in, and I think that worked okay when I tried it
## ‚ùåüîíNo-Diving Flippers checkbox (#869)
@ Mitsukara opened this issue on 09/10/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886002943730536488



=== @ Mitsukara 09/10/2021 21:39

For some reason, No Diving is a screen flag (I think? might be a quest rule), but it would be neat to have an option for level 1 flippers that can't dive, and level 2 flippers that can. Similar to the Zora's Scale in OOT.

This might already be in 2.55 (if so I apologize).

=== @EmilyV99 (discord: Emily) 09/10/2021 21:43

this was added to 2.55 approximately 3 years ago
IIRC
(meta) thread name was changed: ‚ùåüîíNo-Diving Flippers checkbox
## ‚ùåüîíModifiable Conveyor Combo Speed? (#870)
@ Anthus opened this issue on 09/11/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886066828923764756



=== @ Anthus 09/11/2021 01:53

Would it be possible to have a setting for conveyor combos to change their speed? Speed as in, how fast they move Link/ Hero? They could even be able to go so fast that they function as one way conveyors, or alternately "one way" could also be a toggle. Thanks for reading!

=== @ P-Tux7 09/11/2021 03:26

it already is possible from dimi
she also added the ability to set both their x and y speeds, meaning that you can have diagonal conveyors of any angle

=== @ Anthus 09/11/2021 03:46

oh shit, nice!
thanku dimi!

=== @ Anthus 09/11/2021 03:47

(this thread can prolly be archived then lol)

=== @EmilyV99 (discord: Emily) 09/11/2021 11:05

(meta) thread name was changed: ‚ùåüîíModifiable Conveyor Combo Speed?
## ‚ùåüîíAllow playing multiple sounds or music at once. (#871)
@ OmegaX opened this issue on 09/11/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886124915441426442



=== @ OmegaX 09/11/2021 05:44

This would be for useful for example: a cutscene where music, voice acting and occasional sound being played simultaneously. Currently we can only have one music file and one sfx playing at a time.

=== @EmilyV99 (discord: Emily) 09/11/2021 11:06

Err, only 1 sfx?
afaik you can have all 255 sfx playing at once

=== @EmilyV99 (discord: Emily) 09/21/2021 01:43

(meta) thread name was changed: ‚ùåüîíAllow playing multiple sounds or music at once.
## ‚úÖüîíScreen MIDI doesnt work on screen 128-129 (guy caves) (#872)
@ Mitsukara opened this issue on 09/11/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/886307258865164378



=== @ Mitsukara 09/11/2021 17:48

Not sure if this is a "bug" per se or some sort of intended behavior, but when you set the screen midi on guy caves, it still doesn't play. I can't think of any advantage to this behavior; it'd be neat to be able to set music in a guy cave.

...I'm not sure whether it works or not in Item Cellars and Passageways? I forgot to test that before I posted this

=== @EmilyV99 (discord: Emily) 09/11/2021 17:56

Gonna guess it reads from the main screen, not screen 80
Screen 80+ shit is jank as fuck

=== @ Mitsukara 09/11/2021 17:57

ah
For what it's worth, scripts _can_ use Game->PlayMIDI() and Game->PlayEnhancedMusic() on those screens without issue

=== @EmilyV99 (discord: Emily) 09/20/2021 22:41

@ Mitsukara
![image](https://cdn.discordapp.com/attachments/886307258865164378/889642515291054080/unknown.png)

https://cdn.discordapp.com/attachments/886307258865164378/889642566176366642/zelda.exe

https://cdn.discordapp.com/attachments/886307258865164378/889642573503815720/zquest.exe

=== @ Mitsukara 09/20/2021 22:42

Nice!

=== @EmilyV99 (discord: Emily) 09/20/2021 22:42

given, you can't test it, but it seems to work

=== @EmilyV99 (discord: Emily) 09/20/2021 22:44

won't be enabled by default
(meta) thread name was changed: ‚úÖüîíScreen MIDI doesnt work on screen 128-129 (guy caves)
## Zquest -play music from within quest- option (#873)
@ FireSeraphim opened this issue on 09/11/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886308876645957703



=== @ FireSeraphim 09/11/2021 17:55

I would like to suggest an option in the zquest editor under media named "play music from within quest", which as labeled would play the midis already inside the quest file, with the internal loop data that's added. This is so those who want to can listen to their quest's midi soundtrack while editing said quest.
@EmilyV99 (discord: EmilyV) Now I have a proper thread for this.

=== @ FireSeraphim 09/11/2021 17:57

perhaps it should be named "Play Midi from within quest" or something that less of a mouthful. Perhaps "Play Quest MIDI" or something like that

=== @ Alucard648 09/11/2021 18:55

Also supporting this request. Helps choosing music for quests.

=== @ NightmareJames 09/11/2021 23:16

Thirding this
Even if it has to wait a bit for other bugs to be fixed

=== @ FireSeraphim 09/14/2021 23:24

@EmilyV99 (discord: EmilyV) any thoughts on this?

=== @EmilyV99 (discord: Emily) 09/14/2021 23:24

üëç

=== @ FireSeraphim 12/01/2021 19:54

any progress on this one?

=== @ FireSeraphim 12/22/2021 21:53

any progress on this one?

=== @EmilyV99 (discord: Emily) 12/23/2021 00:42

Not yet

=== @ FireSeraphim 07/22/2022 09:12

bump

=== @EmilyV99 (discord: Emily) 07/22/2022 09:17

@connorjclark (discord: connorclark)
## ‚ùåüîíCentered Hookshot (#874)
@ Mitsukara opened this issue on 09/11/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/886336178490597447



=== @ Mitsukara 09/11/2021 19:43

A quest or item rule that makes the hookshot centered on Link's position, like in an official Zelda game, instead of "left handed", like the weird janky ZC way.

=== @EmilyV99 (discord: Emily) 09/21/2021 01:58

Err, looking at the hitboxes of the hookshot using the show hitbox cheat, it looks pretty well centered
the tiles in classic are drawn off to one side, though

=== @EmilyV99 (discord: Emily) 09/29/2021 11:15

so there's not much to add here
(meta) thread name was changed: ‚ùåüîíCentered Hookshot
## ‚úÖüîíJanky hookshot chain rendering, when hero`s position is altered by script (#875)
@ Alucard648 opened this issue on 09/12/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/886661984811118662



=== @ Alucard648 09/12/2021 17:18

1. Test quest: https://drive.google.com/file/d/1qVcAgOzrdR5wjVBoazz4dOXhXgC0E1ed/view?usp=sharing
2. Stand on moving platform.
3. Try to hookshot grab combos behind solid block, while riding platforn.

If hookshot head hits solid wall while returning after missed shot, weird things happened with chain rendering.

=== @ Alucard648 09/12/2021 17:32

```ffc script moving{
    void run(){
        while (true){
            if (RectCollision(Link->X+6, Link->Y+6 ,Link->X+11, Link->Y+11, this->X, this->Y, this->X + this->EffectWidth, this->Y + this->EffectHeight)){
                if (Link->Z == 0){
                    Link->X += this->Vx;
                    Link->Y += this->Vy;
                }
            }
            Waitframe();
        }
    }
}```

=== @ Mitsukara 09/13/2021 03:19

I had problems with this back when I was making LaZPoC too. It was so bad I actually made my chain blank and drew a new one, but that's not a great solution
I think just moving the hookshot's position at all screwed up the chain drawing quite a bit
(since I did that to make the screen-wraparound hookshot)

=== @arceusplayer11 (discord: Deedee) 10/10/2021 15:31

Oh god this is a weird one
It... looks like its morphing into a diagonal hookshot?
what the hell...

=== @arceusplayer11 (discord: Deedee) 10/10/2021 16:21

okay, nevermind, figured out why it might bug out
really easy fix

=== @arceusplayer11 (discord: Deedee) 10/10/2021 16:27

(meta) thread name was changed: ‚úÖüîíJanky hookshot chain rendering, when hero`s position is altered by script

=== @arceusplayer11 (discord: Deedee) 10/10/2021 16:30

For those curious: there's a hookshot startx and a hookshot starty variable, and whenever stuff like conveyors move link, it updates those... but it wasn't being updated for the script move functions.

=== @ Alucard648 10/10/2021 16:41

Is it possible to do this fix in 2.53.x branch, or 2.53.1 beta 55 is already final?

=== @arceusplayer11 (discord: Deedee) 10/10/2021 17:07

Possibly, yeah
## ‚úÖüîíCSet 9 from item cellar is retained when exiting cellar (#876)
@ 4matsy opened this issue on 09/14/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/887137611301392444



=== @ 4matsy 09/14/2021 00:48

So NightmareJames just ran into this one in Level 6 of ZNR, in the boss key room, during a stream. Went downstairs to collect a boss key, without killing all of the CSet 9 Keese in the room.
This was a brown dungeon with many dark rooms in an NES-tileset quest, so these Keese were colored black to blend in with the darkness in the room. Upon exiting the item cellar, the Keese in the (upstairs) dungeon room had picked up the CSet 9 from the item cellar's level palette, which was cyan like the Level 1 palette in the classic tileset, making the Keese no longer blend in with the darkness.

=== @ NightmareJames 09/14/2021 03:40

Stream link:  https://youtu.be/KkNMYKjOSDM
Quest in question, Lv. 4 cheat code "test" for this
https://cdn.discordapp.com/attachments/887137611301392444/887181099221016656/zeldanesremastered_V2_1_publicbeta1.zip
This one's been happening for a while, waiting for a second on it though, which @ 4matsy just did

=== @ P-Tux7 09/14/2021 06:00

i think this just needs a qr "cellars copy current dmap palette"
it may apply to staircases as well

=== @arceusplayer11 (discord: Deedee) 10/10/2021 18:52

Okay, looking at it, it seems to happen only if the original screen is a dark screen

=== @arceusplayer11 (discord: Deedee) 10/10/2021 19:09

Fixed

=== @arceusplayer11 (discord: Deedee) 10/10/2021 19:14

(meta) thread name was changed: ‚úÖüîíCSet 9 from item cellar is retained when exiting cellar
## ‚è±üîíFFC Freeform Combos Need More Drawover Layers (#877)
@ SkyLizardGirl opened this issue on 09/14/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/887274595663630377



=== @ SkyLizardGirl 09/14/2021 09:52

FFC Freeform Combos Need More Drawover Layers

![image](https://cdn.discordapp.com/attachments/887274595663630377/887274630920962088/unknown.png)
There is only 1 Drawover layer, but i need it some levels higher.

=== @ mitchfork 09/14/2021 12:51

actually would be nice to be able to set FFC layer

=== @EmilyV99 (discord: Emily) 09/14/2021 13:35

not happening until rewrite
adding more flags to ffcs costs too much memory

=== @ mitchfork 09/14/2021 14:03

rip

=== @ P-Tux7 09/14/2021 18:21

...could we make one of the arbitrary FFC arguments used to determine what layer it is?

=== @ P-Tux7 09/14/2021 18:41

It'd be hacky but better than nothing
Maybe a QR that enables an Init Data field which lets you set which of the argument #s determines the layer of the FFC
Or just a QR hardcoding it to the last argument

=== @EmilyV99 (discord: Emily) 09/14/2021 18:59

beyond the ffc stuff, it would take a lot of fucking with draw shit
I'd really rather not until rewrite

=== @ SkyLizardGirl 09/17/2021 04:35

Aww

=== @EmilyV99 (discord: Emily) 09/21/2021 01:41

(meta) thread name was changed: ‚è±üîíFFC Freeform Combos Need More Drawover Layers
## ‚úÖüîíSecrets-Next (#878)
@ vlamart opened this issue on 09/14/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/887478689154072598



=== @ vlamart 09/14/2021 23:23

Secrets->Next doesn't seem to react with Enemies->Secrets until you leave the room

=== @EmilyV99 (discord: Emily) 09/20/2021 20:56

.....well
Nothing but `16-31` trigger to `Enemies->Secrets` until you leave the room
.....that seems fun.

=== @EmilyV99 (discord: Emily) 09/20/2021 21:33

Fixed with compat rule
(meta) thread name was changed: ‚úÖüîíSecrets-Next
## More NPC Touch Effect Counters (#879)
@ Mitsukara opened this issue on 09/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/887520921324240976



=== @ Mitsukara 09/15/2021 02:11

In the enemy editor, there's a field for "Touch Effects" on the Walking Enemy type. Options include "Drain Rupees" (although a negative number will actually increase the rupees), as well as "Drain Life" and "Drain Magic". Can this be easily expanded to do things like Drain/Increase CR_SCRIPT1, etc?

=== @ Mitsukara 09/15/2021 02:13

Might warrant a separate request, but, it would also be neat if there was a "stun Link" option which just prevented Link movement (like NoAction()) for a certain amount of time, but ideally in a way where Link won't get stunned before he can move again. However, something like that could also be left to scripting.

=== @ Mitsukara 09/15/2021 02:15

Neither of these are high priority, but if it's easy to add it'd be neat.

=== @EmilyV99 (discord: Emily) 09/15/2021 02:20

`Link->Defense[]` has a stun option
although I think that's only partially implemented (i.e. script only) at the moment? ( @arceusplayer11 (discord: Deedee) any info on that? )
more touch drain options would make total sense

=== @arceusplayer11 (discord: Deedee) 09/15/2021 02:30

Link->Defense is implemented in the UI
jman did that
It's under Quest->Player

=== @EmilyV99 (discord: Emily) 09/15/2021 02:33

Ah nice
That's the answer for the stun part, @ Mitsukara

=== @ Mitsukara 09/15/2021 02:35

Cool
Pushing my luck on this general subject... does it sound complicated to make these touch effects be applicable to weapons?

=== @EmilyV99 (discord: Emily) 09/15/2021 02:37

Weapons should frankly be easy... but enemy/item attributes to set the weapons is a chunk more work.
(Neither out of the question; though I'd make a separate thread for that)

=== @ P-Tux7 09/15/2021 03:26

Couldn't one just have two checkboxes for the drain effect to apply to enemy touch, enemy weapon, both, or none?

=== @EmilyV99 (discord: Emily) 09/15/2021 03:29

Firstly, that still needs adding vars. Checkboxes or dropdowns, still adding stuff. 
Secondly, then the next feature request that comes in is "hey I want to be able to have the touch drain X and the weapon drain Y"

=== @ P-Tux7 09/15/2021 03:35

I don't particularly care if it can just be scripted anyways (similar to curse effects on non-walking enemies and eweapons)

=== @ Alucard648 09/15/2021 17:59

What about  also add siilar expansion to eating enemies - Eat(Ccounter XX)?

=== @ P-Tux7 09/15/2021 18:27

hmm can script reads of link's eaten status read WHICH enemy id he is being eaten by?

=== @ Alucard648 09/15/2021 22:12

(replying to @ P-Tux7 "hmm can script reads of link'‚Ä¶"): ```//Returns pointer to NPC that has eaten hero. Otherwise returns invalid pointer.
npc EatenBy(){
    if (Hero->Eaten) return;
    for (int i=1; i< Screen->NumNPCs();i++){
        npc n = Screen->LoadNPC(i);
        if ((n->X == Hero->X)&&(n->Y == Hero->Y)) return n;
    }
    return;
}```

As of 2.55 latest alpha.

=== @EmilyV99 (discord: Emily) 09/15/2021 22:15

is there not a `HasLink` or somesuch readable on enemies?
(There *is* internally, so, would not be difficult to add if it's missing)

=== @ Alucard648 09/15/2021 22:23

(replying to @EmilyV99 (discord: Emily) "is there not a `HasLink` or s‚Ä¶"): No such thing, as of latest alpha.

=== @EmilyV99 (discord: Emily) 09/15/2021 22:23

1. Add more counters to touch effect drain
2. Add `bool npc->HasLink;`, read-only, to zscript
(meta, MessageType.pins_add) 
(your method might fail if multiple enemies are at the exact same x/y, this new addition would prevent that)
## ‚úÖüîíFairy spawn limitations (#880)
@ Mitsukara opened this issue on 09/15/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/887599395028213791



=== @ Mitsukara 09/15/2021 07:23

ZC has some sort of limitation that makes it so a second fairly will not spawn* if there is a second fairy onscreen, even with a 100% item drop rate for just a fairy (moving; haven't tried stationary). 

 (* - _Usually, inconsistently_. Sometimes I could only get one to spawn, sometimes a second one would appear, but definitely not more than 2).

This may be a deliberate bit of code to try to simulate some sort of NES limitation (though it's not even accurate at that because you can have at least two fairies in Zelda 1), but it doesn't make sense / might warrant some kind of QR change or something. 

~~(Why do I have a feeling this is one of those "a previous dev had a hard-on for difficulty" bits of code, like the thing about not letting people use that one cheats program....)~~

However, spawning at least 3 fairies with FFC scripts works normally as expected, thankfully. So this is just something about how they work as item drops.

Was discussed here (found by P-Tux): https://discord.com/channels/876899628556091432/887461043117391872/887550177739694102

Note: This isn't a new bug, and I haven't confirmed it still works this way in 2.55 (though I would think P-Tux would know if it didn't?). Only tested it in 2.50.2 linux myself.

=== @ P-Tux7 09/15/2021 07:53

i think zelda 1 has a 1 fairy limit - if a fairy is on-screen, no enemies will drop fairies until that one is gone
and the other fairies spawning are when two fairy-spawning enemies are killed on the same frame, meaning that both checks for a fairy on-screen fail
it takes some careful practice or luck to perform, which is probably why phantom menace thought that 1 fairy was the limit

=== @ Mitsukara 09/15/2021 19:00

I suppose it makes some sense but it'd be nice to have the option to disable it for modern quests, at least.

=== @EmilyV99 (discord: Emily) 09/15/2021 19:07

probably something to do with the fact that fairies are both an enemy and an item

=== @arceusplayer11 (discord: Deedee) 10/09/2021 17:04

this is pain
fairies are hardcoded
this is a feature request to surpass ~~metal gear~~ sideview swimming

=== @arceusplayer11 (discord: Deedee) 10/09/2021 19:13

Fixed; also have a new QR as well to let fairies spawn with different directions cause that annoyed me
(meta) thread name was changed: ‚úÖüîíFairy spawn limitations
@ Mitsukara the real reason this was implemented the way it was was because the item just grabbed the first fairy enemy on screen to attach itself to it
so I had to rewrite how fairies worked to let multiple exist

=== @ P-Tux7 10/09/2021 19:58

Why are fairies enemies?

=== @EmilyV99 (discord: Emily) 10/09/2021 19:59

because moving

=== @ P-Tux7 10/09/2021 19:59

I understand they're Guys but enemy Goriyas and Guy Goriyas are different
(replying to @EmilyV99 (discord: Emily) "because moving"): I'd have thought they would be an LWeapon in that case

=== @EmilyV99 (discord: Emily) 10/09/2021 19:59

guy fairies and item fairies are differnet too
lweapons don't have movement behaviors other than straight line

=== @ P-Tux7 10/09/2021 20:00

boomerangs?

=== @EmilyV99 (discord: Emily) 10/09/2021 20:00

that's straight line, and when it dies, straight line
to add proper movement behaviors and the variables to store that it'd need to be a subclass of weapon
which would be annoying
as all `lweapon`/`eweapon` are a single class, no subclasses

=== @ P-Tux7 10/09/2021 20:01

okay so what did dimi turn the fairies into now?

=== @EmilyV99 (discord: Emily) 10/09/2021 20:01

nothing changed
it's just that it no longer just grabs the first fairy enemy on screen for every fairy
it actually makes separate ones for each

=== @ P-Tux7 10/09/2021 20:09

well that's going in the lttp tileset
always-spawn-fairy combos like in the eastern palace pots

=== @arceusplayer11 (discord: Deedee) 10/09/2021 20:45

(replying to @ P-Tux7 "always-spawn-fairy combos lik‚Ä¶"): they also no longer default to facing up with a new QR
that annoyed me when I made lttp-styled fairy fountains in HF

=== @ P-Tux7 10/09/2021 20:47

wait how'd you do it if more than one fairy couldn't exist

=== @arceusplayer11 (discord: Deedee) 10/09/2021 20:48

literally had to rewrite the system to give each fairy item a value that stores it's enemy counterpart

=== @ P-Tux7 10/09/2021 20:48

no i meant in HF

=== @arceusplayer11 (discord: Deedee) 10/09/2021 20:48

See here's the weird thing
the limitation for some reason doesn't exist for scripts
and I don't know why

=== @ P-Tux7 10/09/2021 20:48

that *works*?

=== @arceusplayer11 (discord: Deedee) 10/09/2021 20:48

yeah
but the code seemed to suggest that it wouldn't

=== @ P-Tux7 10/09/2021 20:49

i'd have thought zc would just start crying if ordered to make multiple fairies

=== @arceusplayer11 (discord: Deedee) 10/09/2021 20:49

it's possible the limitation is just poor understanding on my part
but uh, the math used for tying fairies to enemies was fuckin weird
glad it's deprecated
## ‚è±üîíBridge Combo or Bridge Flag for Liquid Combos (#881)
@ bigjoe opened this issue on 09/16/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/887961556380450826



=== @ bigjoe 09/16/2021 07:22

A bridge combo that allows over walking and under-swimming depending upon what combo you are approaching it from. This seems like a long shot given the dislike for liquid related stuff, but it would be a cool and useful feature.

=== @EmilyV99 (discord: Emily) 09/16/2021 13:58

over/under is not happening until rewrite

=== @EmilyV99 (discord: Emily) 09/21/2021 01:42

(meta) thread name was changed: ‚è±üîíBridge Combo or Bridge Flag for Liquid Combos
## Editable Guys (#882)
@ P-Tux7 opened this issue on 09/16/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/888085826460852256



=== @ P-Tux7 09/16/2021 15:36

Guys are already editable in the 2.55 alphas. This allows for you to, for example, change Ama to CSet 7 like in BS Zelda with no scripting or 8-bit mode. I would like to request this to be retained, and for them to be renamed to "Goriya (Guy)" etc. to reduce confusion.
Something else that might also be cool is to allow rooms to have the room's Guy selector read all "Guy" enemies from the enemy list, and allow you to select one, allowing for custom Guys.  I know a lot of people just use invisible Guys and make the graphics as tiles so the Guys don't disappear, but I know users like NightmareJames like to use real Guys and even use scripts to change the room's Guy graphic.

=== @ P-Tux7 09/16/2021 15:47

Or in worst-case scenario, just entering the ID # of the enemy to be the Guy. Though it's not idiot-proof

=== @EmilyV99 (discord: Emily) 09/16/2021 15:55

I have no fucking clue
guys are janky jank mcjank

=== @ P-Tux7 09/16/2021 17:42

well i mean what does the pick the room guy dialog set
just look there

=== @ 4matsy 09/16/2021 17:43

_suddenly remembers that many eldritch horrors are rumored about the infamous "guys.cpp" file in the source code, which was also among the largest in the code... <\_<'_

=== @EmilyV99 (discord: Emily) 09/16/2021 17:45

I mean, pretty sure that's hardcoded @ P-Tux7

=== @EmilyV99 (discord: Emily) 09/16/2021 17:46

also `guys.cpp` is everything enemy related, not just room guys

=== @ P-Tux7 09/16/2021 17:47

i mean if what setting a guy in the list does is puts a numerical ID in the room as to what enemy to use, then a dialog box that allows setting that would allow for non-default guys

=== @ 4matsy 09/16/2021 17:47

Ah, so that's why the guys were made editable along with the enemies. I was wondering about that.

=== @EmilyV99 (discord: Emily) 09/16/2021 17:47

guys are jankily made part of enemies
even though they shouldn't realistically be remotely related
because, you know, jank jank mcjank jank

=== @ P-Tux7 09/16/2021 17:54

i mean they do have enemy-like features
they poof in, they can be "hurt", they count as enemies for purposes of door opening (feed the goriya, life or money etc.)

=== @EmilyV99 (discord: Emily) 09/16/2021 17:57

and hookshot chainlinks share a lot with weapons
but they aren't stored in the same spritelist as weapons
## midi copy-pasting + moving entries (#883)
@ FireSeraphim opened this issue on 09/16/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/888100481900101652



=== @ FireSeraphim 09/16/2021 16:34

I don't see why this isn't a thing already in Zquest's midi menu. I would like to request the ability to move midi entries up and down the list via ctrl+up and ctrl+down and the ability to copy and paste midi entries in zquest's midi list via ctrl+c and ctrl+v
@EmilyV99 (discord: EmilyV) Sorry to pester you again but I figure you would probably be interested in seeing this.

=== @EmilyV99 (discord: Emily) 09/16/2021 16:35

love that you ping me as I'm already reading it XD

=== @ FireSeraphim 09/16/2021 16:35

sorry.

=== @EmilyV99 (discord: Emily) 09/16/2021 16:35

nothing to apologize for, just funny timing

=== @ FireSeraphim 09/16/2021 16:35

Also I hope this QOL suggestion isn't too much

=== @ FireSeraphim 09/16/2021 16:36

I kinda like to keep my quest midi list tidy and the lack of these features kinda make that impossible.

=== @ FireSeraphim 12/01/2021 19:54

Any progress on this?

=== @ FireSeraphim 12/22/2021 21:53

any progress on this one?

=== @EmilyV99 (discord: Emily) 12/23/2021 00:41

Nope, not yet

=== @EmilyV99 (discord: Emily) 12/23/2021 07:35

(replying to @ FireSeraphim "I don't see why this isn't a‚Ä¶"): Do any menus in ZC already have `ctrl+up`/`ctrl+down` for anything like this?

=== @EmilyV99 (discord: Emily) 12/23/2021 08:52

...I tried adding copy/paste here, and it just crashed. Don't have the energy to get this crap working, MIDIs are terrible to work with
@arceusplayer11 (discord: Deedee) can feel free
if she feels like

=== @arceusplayer11 (discord: Deedee) 12/23/2021 08:56

see the best part is because I read all these pings, the ping disappears and I forget where I was pinged
so in the end, I save myself from suffering via my lack of memory

=== @EmilyV99 (discord: Emily) 12/23/2021 08:57

lol
but yeah, so, the problem I immediately see
is midis are pointers
that have within them pointers to tracks
and I thought I understood it well enough copying the code that existed already
but then it just crashed
and I went `nope`

=== @EmilyV99 (discord: Emily) 12/23/2021 09:00

(meta) thread name was changed: midi copy-pasting + moving entries

=== @ FireSeraphim 07/22/2022 09:12

bump

=== @EmilyV99 (discord: Emily) 07/22/2022 09:18

@connorjclark (discord: connorclark)
## ‚úÖüîíInit Data Broken (#884)
@ Jared opened this issue on 09/17/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/888230580855136327



=== @ Jared 09/17/2021 01:11

Initial Data boxes are broken. First page you can't hit cancel

![image](https://cdn.discordapp.com/attachments/888230580855136327/888230614900297788/unknown.png)

![image](https://cdn.discordapp.com/attachments/888230580855136327/888230700044681326/unknown.png)

=== @EmilyV99 (discord: Emily) 09/17/2021 01:12

wah
wtf
presuming this is in the build just posted?
Does it occur in the previous build?

=== @ Jared 09/17/2021 01:15

Yes this is the build you just put up
I don't think it happened on the one before, but I don't remember

=== @EmilyV99 (discord: Emily) 09/17/2021 01:26

so it seems that the frames are all messed up
and the cancel button is just not working because a frame is in front of it, no other reason

=== @EmilyV99 (discord: Emily) 09/17/2021 01:29

@ Saffith any idea why `jwin_frame_proc` is messed up?

=== @ Saffith 09/17/2021 01:30

Nope, I didn't touch that one.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:31

...also
```cpp
do                                             \
{                                              \
    if(dlg->flags&D_NEW_GUI)                   \
    {                                          \
        int ret = new_gui_event(dlg-1, event); \
        if(ret >= 0)                           \
            return ret;                        \
    }                                          \
} while(false)```
why `do {} while(false)`?

=== @ Guinevere 09/17/2021 01:31

the button works, you just can't just use the mouse to click on it.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:31

yeah, because the frame is in the way

=== @ Guinevere 09/17/2021 01:32

ah

=== @EmilyV99 (discord: Emily) 09/17/2021 01:32

when you click, only the top widget at that position gets the click message

=== @ Guinevere 09/17/2021 01:32

gotcha

=== @ Saffith 09/17/2021 01:34

(replying to @EmilyV99 (discord: Emily) "why `do {} while(false)`?"): It's basically a trick to make it work like a regular statement.
https://www.generacodice.com/en/articolo/41901/why-use-apparently-meaningless-do-while-and-if-else-statements-in-macros-

=== @EmilyV99 (discord: Emily) 09/17/2021 01:35

...why not just do `{}`
```cpp
{                                              \
    if(dlg->flags&D_NEW_GUI)                   \
    {                                          \
        int ret = new_gui_event(dlg-1, event); \
        if(ret >= 0)                           \
            return ret;                        \
    }                                          \
}```
would that not work identically?
oh
I see
....that's...... kinda jank as fuck
but ok
> Of course, it could (and probably should) be argued at this point that it would be better to declare BAR as an actual function, not a macro.

=== @ Saffith 09/17/2021 01:37

Yeah, but I wanted it to be able to return from the proc.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:37

you'd just do

=== @EmilyV99 (discord: Emily) 09/17/2021 01:39

```cpp
int GUI_EVENT(DIALOG* d, int event)
{
    if(d->flags&D_NEW_GUI)
        return new_gui_event(d-1, event);
    return -1;
}```
then
```cpp
int ret = GUI_EVENT(d, whatever);
if(ret >= 0) return ret;
```
....meh, either way
not a big deal

=== @ Saffith 09/17/2021 01:40

I prioritized minimizing the code changes in the existing procs, basically.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:40

fair

=== @ Saffith 09/17/2021 01:40

Anyway, I'm not seeing a problem with the frames myself...
And it doesn't look like anything weird happened to the code.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:41

oh, is it a windows only issue, just like the sprite invisibility?
that sounds fucking fun

=== @ Saffith 09/17/2021 01:41

Yep, seems to be.
And it's pretty simple, so I have no clue what the problem could be.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:41

oh ffs
question
you changed some function pointer stuff to no longer use `(*func)(params)` but instead `func(params)`
I'm guessing that's a c++ change?
I'm guessing something to do with `==` on func pointers is different
which would break `large_dialog()`

=== @ Saffith 09/17/2021 01:42

No, that was to do with the new ListData.

=== @EmilyV99 (discord: Emily) 09/17/2021 01:42

and likely cause something approximately like this
oh
hmmm

=== @EmilyV99 (discord: Emily) 09/17/2021 01:49


![image](https://cdn.discordapp.com/attachments/888230580855136327/888240145453694996/unknown.png)
well it appears not to be broken in small mode
so my suspicion of `large_dialog` seems correct

=== @EmilyV99 (discord: Emily) 09/17/2021 02:07

hmm,no
they are *only* broken in the init data dlg
wtf
only in init data, and only in large mode....

=== @EmilyV99 (discord: Emily) 09/17/2021 02:11

. . .
and ONLY in ZQ
the same fucking dialog launched via the cheats menu in ZC
fucking works fine
WHAT THE SHIT

=== @EmilyV99 (discord: Emily) 09/17/2021 02:13

. . .I just have no clue
This does not make sense
whatsoever
the code is shared between ZC and ZQ
and the large_dialog code is shared by multiple dialogs
only this dialog, only in ZQ, is affected
this should *not be possible*
.....I have a fucking jank way to fix it, which I'm gonna do
(just remove the frames)

=== @ Saffith 09/17/2021 02:15

Have you tried rebuilding from scratch to rule out some sort of build error?

=== @EmilyV99 (discord: Emily) 09/17/2021 02:15

aye, multiple times
that's always the *first* thing I try

=== @ Saffith 09/17/2021 02:16

Welp, that's the only logical explanation I had.

=== @EmilyV99 (discord: Emily) 09/17/2021 02:16

I would say cosmic rays
but uh
that would need to be occurring every single time
which uh, not likely
there is no logical explaination for this, it is the new boogie-man
...time to jank around it.
(Replacing the init data dialog with a new gui system thing at some point would be wonderful)
(though, needs a lot of stuff)

=== @ Saffith 09/17/2021 02:18

Well, good excuse to do it.

=== @EmilyV99 (discord: Emily) 09/17/2021 02:22


![image](https://cdn.discordapp.com/attachments/888230580855136327/888248468152414208/unknown.png)
looks a bit odd with the frames missing
but, for now, it will do
that gui will be a mountain of a project to rewrite, considering it's >3k indexes
but, a lot of that is generated in a loop
for the LItem stuff
....could probably do that in some saner way

=== @EmilyV99 (discord: Emily) 09/17/2021 02:27

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) fix posted

=== @EmilyV99 (discord: Emily) 09/17/2021 02:28

(meta) thread name was changed: ‚úÖüîíInit Data Broken
## More Itemclasses (#885)
@ Guinevere opened this issue on 09/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/888296011766845460



=== @ Guinevere 09/17/2021 05:31

To pick up from the default module discussion
there are some items that were scripted into the previous default module that i think would be pretty nice to have being built-in itemclasses;
Compass (Magic)
Key (Boss, Magic)
Map (Magic)
Scroll: Half Magic
Scroll: Learn Slash
## ‚ùåüîíNew Default Module Messes with Quests Sfx (#886)
@ Guinevere opened this issue on 09/17/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/888307587215405106



=== @ Guinevere 09/17/2021 06:17

the quests that were using the sounds default of the previous default module have been changed with the sounds of the new module

=== @ NightmareJames 09/17/2021 12:38

Don't know if this is a bug,but deserves a mention.  Second

=== @EmilyV99 (discord: Emily) 09/17/2021 14:29

???????

=== @ Guinevere 09/17/2021 19:09

Since the new module changes the default sound effects, quests that used the previous default sound effects are now using the new ones.

=== @ Guinevere 09/17/2021 19:11

So in laments terms
Zelda 1 sounds got turned into Koten sounds

=== @EmilyV99 (discord: Emily) 09/17/2021 19:12

sfx should be stored in the quest file
this points to a serious underlying problem

=== @ NightmareJames 09/17/2021 20:15

Good thing we reported it then

=== @ Guinevere 09/17/2021 20:15

indeed
people can sorta fix it by going back to the previous module but it's still pretty weird that the sfx aren't tied to the quests

=== @EmilyV99 (discord: Emily) 09/17/2021 20:22

The problem I see here is this may not be fully fixable, depending on the exact nature of the problem
because to fix it may *require* a quest be re-saved
unless it stores the appropriate sfx, and is just *ignoring* them for the module, which is possible; I haven't looked into it yet

=== @ NightmareJames 09/17/2021 20:24

Hey @EmilyV99 (discord: EmilyV) , can we get together in the server's voice chat for a minute?  General1?

=== @EmilyV99 (discord: Emily) 09/17/2021 20:25

give me a few, just got done with a super difficult run of a game that I've been doing for *hours*

=== @ NightmareJames 09/17/2021 20:25

OK

=== @EmilyV99 (discord: Emily) 09/17/2021 20:43

. . .
so no one is gonna like this
but it's literally not fixable
the SFX for the ones from sfx.dat are literally not being saved in the qst file
so old quests literally don't have anything in them in those slots
meaning either we need to include the copyrighted sfx in the default package *forever*
or break sfx in old quests
both of which are "unacceptable" outcomes
catch-22 situation, nothing we can do
....I can fix this for quests that are *re-saved in a new build*
but can't do anything more

=== @ Guinevere 09/17/2021 20:46

mmm
that is pretty problematic

=== @EmilyV99 (discord: Emily) 09/17/2021 20:47

gonna have to discuss with devs on course of action here
because either we break old quests
or we postpone being copyright-free until the rewrite

=== @ Guinevere 09/17/2021 20:53

i mean
i know my two-sense isn't the strongest in terms of development discussions like this
but i think it would be much less of a headache if you postpone until the rewrite, since one of the main focuses of 2.55 is backwards compatibility with all the quests that were made in the previous versions
it keeps priorities of what you want to do with both 2.55 and the rewrite intact

=== @ NightmareJames 09/17/2021 21:13

https://youtu.be/WGWweXnW__w This is the bug in action (including a custom SFX in action)

=== @ vlamart 09/17/2021 22:27

If I work on a sfx library, should I follow the "tracklisting" in the constants doc?

=== @EmilyV99 (discord: Emily) 09/17/2021 22:28

what listing?
The `SFX_` constants?

=== @ vlamart 09/17/2021 22:29

Yup

=== @EmilyV99 (discord: Emily) 09/17/2021 22:29

probably
scripts may potentially expect them to be as-is
and most questmakers keep their sfx in the same order as default for ease of use

=== @EmilyV99 (discord: Emily) 09/17/2021 22:48

Marking this `cannot be fixed`, see [#announcements](https://discord.com/channels/876899628556091432/876904615403196467)
(meta) thread name was changed: ‚ùåüîíNew Default Module Messes with Quests Sfx
## ‚ùåüîíNew Quest Template Does Not Make Water Solid (#887)
@ Moosh opened this issue on 09/17/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/888554597122207775



=== @ Moosh 09/17/2021 22:38

May just be a bug with the Koten file included, when I hit Authentic NES when making a new quest, the water is not solid as it should be.

=== @ Moosh 09/17/2021 22:41

Trying the same in 2.53 implies it may be an issue with the template dialog though. Also solidity preview in 2.53 shows a teal color for walkable water with the rule off, yet the latest nigtly has it unmarked

=== @EmilyV99 (discord: Emily) 09/17/2021 22:43

Water has never been *made solid* by rulesets
it is made *non-solid* by the more modern rulesets
but nothing has *ever* made it solid

=== @ Moosh 09/17/2021 22:43

Sorry the correct wording is it is not _left_ solid by the template dialog ü§¶

=== @EmilyV99 (discord: Emily) 09/17/2021 22:43

oh
tis quite different

=== @ Moosh 09/17/2021 22:44

So either it was never solid to begin or the template code that makes it walkable runs every time

=== @EmilyV99 (discord: Emily) 09/17/2021 22:44

would guess never solid to begin with
because that code only exists in the blocks for the newer rulesets
and all instances of that code would pop up asking you for confirmation of converting the water
so if you get no pop-up asking `"Convert all water to non-solid?"` then it isn't doing anything

=== @ Moosh 09/17/2021 22:45

No pop-up

=== @EmilyV99 (discord: Emily) 09/17/2021 22:45

then aye, it just isn't solid in that tileset

=== @ Moosh 09/17/2021 22:45

But hitting no on the popup still leaves it walkable
Odd that it's that way in both the 2.55 and 2.53 defaults

=== @EmilyV99 (discord: Emily) 09/17/2021 22:46

Fun thing is it never used to have a popup even though it always has done that conversion, as far back as 2.50.2

=== @ Moosh 09/17/2021 22:46

Anyways, I'm meaning to comb over all ZQuest dialogues I can and report any oddities I find

=== @EmilyV99 (discord: Emily) 09/17/2021 22:48

Regardless, any issues with that tileset won't matter long
given [#announcements](https://discord.com/channels/876899628556091432/876904615403196467)
anyway, marking this `not a bug`
(meta) thread name was changed: ‚ùåüîíNew Quest Template Does Not Make Water Solid
## ‚úÖüîíSmall GUI Bugs (#888)
@ Moosh opened this issue on 09/18/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/888594488493232148



=== @ Moosh 09/18/2021 01:17

Finished looking over ZQuest, only a couple things in the GUIs stood out as out of place:
```-Pickup flags in the item editor still has that big honkin' checkbox next to it
-SFX menu flickers when pressing the play button sometimes
-Background bezel on the side warp menu is mis-sized```
Here's what side warp triggers look like now
![image](https://cdn.discordapp.com/attachments/888594488493232148/888594608840376340/unknown.png)
vs how it used to be
![image](https://cdn.discordapp.com/attachments/888594488493232148/888594679678001152/unknown.png)
I imagine this is the same thing that happened with the rectangles in init data

=== @ Moosh 09/18/2021 01:19

here's a snap of the play button flicker in action. Harmless but a little off. I'm really reaching to find anything in the editor that's immediately obviously broken, which is good
![image](https://cdn.discordapp.com/attachments/888594488493232148/888595058893389824/unknown.png)

=== @ vlamart 09/18/2021 02:00

(replying to @ Moosh "Here's what side warp trigger‚Ä¶"): Similar bug in CSets

=== @EmilyV99 (discord: Emily) 09/18/2021 02:01

(replying to @ Moosh "Here's what side warp trigger‚Ä¶"): ok, so this happens in exactly 2 places
and has no explaination
fun
@ Saffith should probably be in this thread

=== @ Saffith 09/18/2021 02:02

... That is very random and weird.

=== @ Moosh 09/18/2021 02:03

Oh! It is in the CSets menu as well. Thanks for catching vlamart

![image](https://cdn.discordapp.com/attachments/888594488493232148/888606115821146183/unknown.png)

=== @EmilyV99 (discord: Emily) 09/18/2021 02:04

ok, 3 places
but it wasn't occurring in every place
and it also wasn't occurring in ZC's menus

=== @EmilyV99 (discord: Emily) 09/18/2021 02:06

like, check the control binding menus

=== @ Saffith 09/18/2021 02:09

Also View -> View Palette

=== @EmilyV99 (discord: Emily) 09/18/2021 02:11


![image](https://cdn.discordapp.com/attachments/888594488493232148/888608131662360576/unknown.png)
see how this menu isn't fucked up
makes me so confused

=== @ Saffith 09/18/2021 03:27

I think it's affecting every `jwin_frame_proc` in ZQuest, and some are just more obvious than others.
Windows
![image](https://cdn.discordapp.com/attachments/888594488493232148/888627280883109928/Windows.png)
Linux
![image](https://cdn.discordapp.com/attachments/888594488493232148/888627302731218964/Linux.png)

=== @EmilyV99 (discord: Emily) 09/18/2021 03:27

oh, it's also affecting the textbox there
huh

=== @ Saffith 09/18/2021 03:28

That's not a textbox. It's just a frame with text inside.

=== @EmilyV99 (discord: Emily) 09/18/2021 03:28

the `Music.nsf` box?

=== @ Saffith 09/18/2021 03:28

Yep.

=== @EmilyV99 (discord: Emily) 09/18/2021 03:28

huh
that makes sense then
but I know I opened some places that use frame and didn't see it

=== @ Saffith 09/18/2021 03:30

Are you sure it was in ZQuest? ZC seems to be unaffected.

=== @EmilyV99 (discord: Emily) 09/18/2021 03:33

I could swear at least 2 spots in zq had no issue
but could have just been non-noticable
so, it's only in ZQ, and only in large mode
that points to `zq_custom.cpp` `large_dialog()`

=== @ Saffith 09/18/2021 03:36

Hm... The secret combos dialog looks weirdly okay.
Nothing's off by even a pixel.
`large_dialog(secret_dlg,1.75);`
... Is 1.75 okay, but 1.5 isn't?

=== @EmilyV99 (discord: Emily) 09/18/2021 03:38

hmm, that's odd

=== @ Saffith 09/18/2021 23:54

Okay, seriously, WTF.
I found the problem.
```
if (jwin_frame_proc == d_comboframe_proc)
        std::cout << "Yep, they're the same" << std::endl;
```

=== @EmilyV99 (discord: Emily) 09/18/2021 23:55

wh-what

=== @ Saffith 09/18/2021 23:55

The functions are identical, so I guess it just combined them...
Not sure why that's allowed.

=== @EmilyV99 (discord: Emily) 09/18/2021 23:55

C++ what the shit is this
```cpp
// Identical to jwin_frame_proc, but is treated differently by large_dialog()
int d_comboframe_proc(int msg, DIALOG *d, int c)```
fucking
wtf

=== @ Saffith 09/18/2021 23:57

https://docs.microsoft.com/en-us/archive/msdn-magazine/2015/february/compilers-what-every-programmer-should-know-about-compiler-optimizations
Also, by specifying the /OPT:ICF switch, the linker will fold identical functions and global constant variables.
So I guess that's enabled somehow.

=== @ Saffith 09/19/2021 00:01

Project > Properties, Configuration Properties > Linker > Optimization, set "Enable COMDAT Folding" to false, and it's fixed.

=== @EmilyV99 (discord: Emily) 09/19/2021 00:01

now time to figure out how to do that in cmake

=== @EmilyV99 (discord: Emily) 09/19/2021 00:03

need to set `/OPT:NOICF` switch

=== @EmilyV99 (discord: Emily) 09/19/2021 00:08


![image](https://cdn.discordapp.com/attachments/888594488493232148/888939464922107914/unknown.png)
success

=== @ Saffith 09/19/2021 00:09

Excellent.
So there are breaking optimizations enabled automatically, huh...
Not any more of those, hopefully.

=== @EmilyV99 (discord: Emily) 09/19/2021 00:11


![image](https://cdn.discordapp.com/attachments/888594488493232148/888940234220400690/unknown.png)
woo

=== @EmilyV99 (discord: Emily) 09/19/2021 00:16

(replying to @ Moosh "here's a snap of the play but‚Ä¶"): this only seems to occur if you click the button really fast?
Methinks allegro issue
processing the mouse click before the first `draw` command of the dialog

=== @EmilyV99 (discord: Emily) 09/19/2021 00:19

(keep in mind most buttons that do special code are actually closing the entire dialog, and then re-opening it almost instantly)

=== @EmilyV99 (discord: Emily) 09/19/2021 00:21

. . . and I had one idea for something that might fix it, which promptly failed

=== @EmilyV99 (discord: Emily) 09/19/2021 00:24

gonna call that one `acceptable graphical issue`, considering it seems you really need to spam click to make it happen

=== @EmilyV99 (discord: Emily) 09/19/2021 00:33

and finally

![image](https://cdn.discordapp.com/attachments/888594488493232148/888945778771496961/unknown.png)
no more honkin' checkbox
or any of the other crap there that should have been removed when @arceusplayer11 (discord: Deedee) added the `Pickup Flags` tab
....should probably shift the `String:` stuff left....

=== @EmilyV99 (discord: Emily) 09/19/2021 00:36

god fucking dammit
I keep pressing `F7` expecting it to build
but in MSVC2019 the shortcut is `Ctrl+Shift+B` instead..... ü§¢

=== @EmilyV99 (discord: Emily) 09/19/2021 00:38

ah, thank god that's rebindable

=== @EmilyV99 (discord: Emily) 09/19/2021 00:40


![image](https://cdn.discordapp.com/attachments/888594488493232148/888947566841045012/unknown.png)
becomes

![image](https://cdn.discordapp.com/attachments/888594488493232148/888947587959369738/unknown.png)
...plenty of space in the lower-right if we need to add more stuff.
@ Moosh this all seem good?

=== @ Moosh 09/19/2021 00:41

beautiful

=== @EmilyV99 (discord: Emily) 09/19/2021 00:47

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
marking `fixed`
(meta) thread name was changed: ‚úÖüîíSmall GUI Bugs
## ‚úÖüîíDins Fire Lags ZC 2.55 (#889)
@ Guinevere opened this issue on 09/18/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/888637215637385226



=== @ Guinevere 09/18/2021 04:07

when the flames are released from Din's Fire, ZC lags. even at the default 32 flames

=== @ Guinevere 09/18/2021 04:08

this doesn't occur in the previous builds that doesn't use C++17

=== @EmilyV99 (discord: Emily) 09/18/2021 04:10

@ Saffith

=== @ Saffith 09/18/2021 04:13

This one's happening on Linux, too. I'll see if I can find anything.

=== @EmilyV99 (discord: Emily) 09/18/2021 04:16

It could be something to do with the massive memory allocation/deallocation being slower for some reason
keep in mind that it generates and destroys 32 lweapons per frame
which all have a *full script stack* attached
.....should probably make it so the script stack only allocates the memory if it is going to be used.
.........for all sprite types......
which sounds like a fun adventure
might not be the only issue, though; could be something else at play

=== @ Guinevere 09/18/2021 04:19

(replying to @EmilyV99 (discord: Emily) "keep in mind that it generate‚Ä¶"): that's a funny way to do it

=== @ Guinevere 09/18/2021 04:20

i thought it just moves the the lweapons just moved away from link until they hit the radius
<:derp:675738486397206578>

=== @ Guinevere 09/18/2021 04:22

until i saw how slow it ran and you could see them replace themselves in slow motion

=== @EmilyV99 (discord: Emily) 09/18/2021 04:22

Nope, it generates new ones each frame; that's why they appear to not die on hitting enemies

=== @ Guinevere 09/18/2021 04:22

i see
that's one way to do it
if that's the case how do things like piercing arrows and beams work?
do they work the same way?
or candle flames for that matter

=== @EmilyV99 (discord: Emily) 09/18/2021 04:27

Those won't pierce an enemy with "Block" defense
Din's, pretty sure would
Given moving the flames and having a hardcoded pierce anything value would be far more sane
But ZC jankify

=== @ Guinevere 09/18/2021 04:28

uh huh
learning so much today
<a:ablobpopcorn:722876973449478363>

=== @ Saffith 09/18/2021 04:29

Geez.
Callgrind drops from ~13.5 FPS to <0.5.

=== @EmilyV99 (discord: Emily) 09/18/2021 04:29

Fun

=== @ Saffith 09/18/2021 04:30

The full animation is like five minutes.

=== @ Guinevere 09/18/2021 04:30

ouch

=== @EmilyV99 (discord: Emily) 09/18/2021 04:32

2 things to definitely help this:
- compat QR for old behavior, make new behavior where it moves the flames instead of creating new ones; needs new pierce behavior
- Make memory for script info only be allocated when it is first needed, not on sprite creation. This way unscripted sprites don't need to alloc/dealloc those. A simple `sprite::allocscript()` function to allocate the memory if and only if the pointers are null, and deallocating appropriately in the destructor, would fix this. This should lower lag of all sprite types significantly, including fixing particle effects.
Those are both just general optimizations though
not sure if there's a specific issue with C++17 that should also be corrected here

=== @EmilyV99 (discord: Emily) 09/18/2021 04:34

Adding a general weapon piercing property, which could be script-readwrite, would be useful for the former; `*weapon->Pierce`. Would be `int`, with `0 = no pierce`, `1 = standard pierce`, `2 = pierce even block defense enemies`; 2 being what dins effectively does now

=== @ Saffith 09/18/2021 04:36

Looks like it's spending the bulk of its time in `sprite::draw()`.

=== @EmilyV99 (discord: Emily) 09/18/2021 04:36

Oh?
That seems fun
And not what either of my optimizations would target
Does it occur with the compat QR `Old (Faster) sprite draws` enabled?

=== @ Saffith 09/18/2021 04:39

Haven't checked that, but I'm betting it does...
Looks like it's mainly `dithercircfill`, called from `doDarkroomCircle`.
`ditherblit`, in particular.
And that's mainly `getpixel`.

=== @EmilyV99 (discord: Emily) 09/18/2021 04:41

Oh fun
Darkroom functions don't have a check to only run in darkrooms
That'd do it
And fire weapons have light radius by default
That's my bad

=== @ Guinevere 09/18/2021 04:42

oopsie doodle

=== @EmilyV99 (discord: Emily) 09/18/2021 04:43

And was not in the last build before the C++17 stuff
So that explains the issue
3 fixes, I'll handle them all
... when I wake. G'nite all!

=== @ Guinevere 09/18/2021 04:44

gnite
<:patcat:677072862036885504>

=== @ Saffith 09/18/2021 04:44

Yeah, it's a bit late for all that.

=== @ Saffith 09/18/2021 04:48

In a quick test of just picking up Din's Fire and using it twice, `getpixel` accounted for ~35% of the program's total run time.

=== @EmilyV99 (discord: Emily) 09/18/2021 04:49

That's used in the dithering functions

=== @ Saffith 09/18/2021 04:49

Yeah. If there's any way you can cut down on it..

=== @EmilyV99 (discord: Emily) 09/18/2021 04:50

Not really... unless you want to look at optimizing the `drawing.cpp` stuff while having the same visual effect
But, making it only run when it actually is in a dark room will help a lot

=== @ Saffith 09/18/2021 05:17

I see almost no framerate hit by doing this:
```cpp
#include <allegro/internal/aintern.h>
void ditherblit(BITMAP* dest, BITMAP* src, int color, byte dType, byte dArg, int xoffs, int yoffs)
{
    int wid = zc_min(dest->w, src->w);
    int hei = zc_min(dest->h, src->h);
    for(int ty = 0; ty < hei; ++ty)
    {
        uintptr_t addr = bmp_read_line(src, ty);
        for(int tx = 0; tx < wid; ++tx)
        {
            if(bmp_read8(addr+tx) && dithercheck(dType,dArg,tx+xoffs,ty+yoffs,wid,hei))
            {
                putpixel(dest, tx, ty, color);
            }
        }
        bmp_unwrite_line(src);
    }
}
```

=== @EmilyV99 (discord: Emily) 09/18/2021 05:18

I don't recognize any of those functions
But if it works smoother, then yes please
Does it respect the clipping rect of the dest?
Wait that's all on the src
So duh the dest code didn't change

=== @EmilyV99 (discord: Emily) 09/18/2021 14:33

K
\#3 - saff's fix- is implemented, and works beautifully
also simultaneously made it so none of that shit runs if the screen isn't dark
or new darkrooms aren't enabled

=== @EmilyV99 (discord: Emily) 09/18/2021 14:47

Using `->Explode(2)`, running it a bunch of times per frame, I can cause this:
![image](https://cdn.discordapp.com/attachments/888637215637385226/888798434772025424/unknown.png)
which, is a solid FREEZE on trying to scroll screens, due to massive memory dealloc
optimization 2 should target this type of lag directly, so time to test that

=== @EmilyV99 (discord: Emily) 09/18/2021 16:07

...well, it doesn't do as much as expected for this particular usecase
and took far more work than expected
but it should in theory be working now
....particles really still need to become a separate class, and not `: public sprite`

=== @EmilyV99 (discord: Emily) 09/18/2021 16:13

. . . wait wtf
So, on optimization `1.` .... I appear to be wrong?
It appears to only generated the flames once, not each frame
. . . I could have sworn I ran into an issue with it generating each frame before . . .

=== @EmilyV99 (discord: Emily) 09/18/2021 16:19

@here

https://cdn.discordapp.com/attachments/888637215637385226/888821557705736273/zelda.exe

https://cdn.discordapp.com/attachments/888637215637385226/888821582384996382/zquest.exe
should fix your issues

=== @ P-Tux7 09/18/2021 16:21

ooh better din's fire now?
better as in can be blocked and doesn't spawn every frame

=== @EmilyV99 (discord: Emily) 09/18/2021 16:22

1. Dark rooms no longer run their drawing code when you aren't in a dark room
2. Dithered drawing is now just faster fps-wise, thanks to Saff's code
3. Sprites no longer generate script data if they aren't using it
Apparently it didn't spawn every frame? And I'm very confused by this?
Or if it is, I don't see any possible way the code that spawns it could be doing that, so

=== @ P-Tux7 09/18/2021 16:22

something i'd appreciate is a way to spawn the ring of fire routine without the actual item

=== @EmilyV99 (discord: Emily) 09/18/2021 16:23

?

=== @ P-Tux7 09/18/2021 16:23

i.e. for a book fire effect, or an enemy making a ring of fire
some way to spawn it with a radius argument

=== @EmilyV99 (discord: Emily) 09/18/2021 16:23

blehg
far too much work

=== @ P-Tux7 09/18/2021 16:23

no sorry i meant
SCRIPT ONLY

=== @EmilyV99 (discord: Emily) 09/18/2021 16:24

so a script being able to just spawn a ring of fire?
That's a ridiculously easy thing to do in zscript
```cpp
for(int flamecounter=((-1)*(flamemax/2))+1; flamecounter<=((flamemax/2)+1); flamecounter++)
{
    Lwpns.add(new weapon((zfix)LinkX(),(zfix)LinkY(),(zfix)LinkZ(),wFire,itemsbuf[magicitem].fam_type,itemsbuf[magicitem].power*game->get_hero_dmgmult(),
                         isSideViewGravity() ? (flamecounter<flamemax ? left : right) : 0, magicitem, Link.getUID(), false, 0, 0, 0, itemsbuf[magicitem].family));
    weapon *w = (weapon*)(Lwpns.spr(Lwpns.Count()-1));
    w->step=(itemsbuf[magicitem].misc2/100.0);
    w->angular=true;
    w->angle=(flamecounter*PI/(flamemax/2.0));
}
```
that's the internal code
converting it to ZScript should be relatively easy
the `Lwpns.add` is just a `CreateLWeapon` that sets a bunch of the variables
and the actual ring is done by the `->angular`/`->angle` calcs
so like

=== @EmilyV99 (discord: Emily) 09/18/2021 16:28

```cpp
void spawnFireRing(int x, int y, int dmg, int stp, int numflames)
{
    for(int flamecounter=((-1)*(numflames/2))+1; flamecounter<=((numflames/2)+1); flamecounter++)
    {
        lweapon weap = Screen->CreateLWeapon(LW_FIRE);
        weap->X = x;
        weap->Y = y;
        weap->Damage = dmg;
        weap->Step = stp;
        weap->Angular = true;
        weap->Angle = ((flamecounter*PI)/(numflames/2));
    }
}```
there you go

=== @ P-Tux7 09/18/2021 16:28

thank you!

=== @EmilyV99 (discord: Emily) 09/18/2021 16:28

that doesn't set some of the vars the internal one does, like the parent item
but you wouldn't want those
oh wait, let me make an ew version

=== @EmilyV99 (discord: Emily) 09/18/2021 16:29

```cpp
void spawnLWRing(int x, int y, int dmg, int stp, int numweaps, int type)
{
    for(int count=((-1)*(numweaps/2))+1; count<=((numweaps/2)+1); count++)
    {
        lweapon weap = Screen->CreateLWeapon(type);
        weap->X = x;
        weap->Y = y;
        weap->Damage = dmg;
        weap->Step = stp;
        weap->Angular = true;
        weap->Angle = ((count*PI)/(numweaps/2));
    }
}
void spawnEWRing(int x, int y, int dmg, int stp, int numweaps, int type)
{
    for(int count=((-1)*(numweaps/2))+1; count<=((numweaps/2)+1); count++)
    {
        eweapon weap = Screen->CreateEWeapon(type);
        weap->X = x;
        weap->Y = y;
        weap->Damage = dmg;
        weap->Step = stp;
        weap->Angular = true;
        weap->Angle = ((count*PI)/(numweaps/2));
    }
}```
woo there you go, LW and EW version, and I made it take any weapon type

=== @ P-Tux7 09/18/2021 16:30

how does the fire know when to stop moving

=== @EmilyV99 (discord: Emily) 09/18/2021 16:30

err, it doesn't
stop moving
or if it does, that's hardcoded to fire weapons

=== @ P-Tux7 09/18/2021 16:31

oh well that's fine
i'll test it out with fire and see if it does

=== @ P-Tux7 09/18/2021 16:32

~~time for me to mod it as an npc death effect~~

=== @EmilyV99 (discord: Emily) 09/18/2021 16:34

you could also add a `script`/`InitD` param
to assign a script and init values to each weapon
which could be used for stopping them moving after a certain time
or doing any number of other effects
as it's a ZScript function, the number of ways you could simply modify it is endless

=== @EmilyV99 (discord: Emily) 09/19/2021 00:48

(meta) thread name was changed: ‚úÖüîíDins Fire Lags ZC 2.55
## ‚ùåMore fonts for Zquests string editor (#890)
@ FireSeraphim opened this issue on 09/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/888833859049906187



=== @ FireSeraphim 09/18/2021 17:08

I would formally like to ask about adding more fonts to the string editor and I personally happen to have a huge collection of fonts from various games, including Castlevania 3 - Dracula's Curse, Chrono Trigger and a few others. Here's the DL File for my personal font collection: https://drive.google.com/file/d/1VQ0wm05uV8EQVqXrzeklGwviaUHQUZSF/view?usp=sharing
@<role: Developer> Heads up!

=== @ P-Tux7 09/18/2021 17:09

reminder that all fonts must be reduced to one colour

=== @EmilyV99 (discord: Emily) 09/18/2021 17:09

don't need to ping all the devs

=== @ P-Tux7 09/18/2021 17:09

(for lttp, zc outlines the text using code in a string setting)

=== @ FireSeraphim 09/18/2021 17:10

aye, my apologies.

=== @ FireSeraphim 10/04/2021 22:48

@ZoriaRPG (discord: Timelord) I vaguely recall you showing off screenshots of a build that had more fonts and I'm pinging you because I still kinda want the actual Castlevania 3 font in ZC
Please reply to this thread when you can.

=== @ P-Tux7 10/05/2021 00:20

oh yeah where's the allegro font tool
nvm i'm dumb

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:05

@ FireSeraphimIwasgoingto add a `userfonts.dat`with twenty slots into which anyone could make a file and use those fonts via a module

=== @ FireSeraphim 10/05/2021 07:06

mind if I paged @EmilyV99 (discord: EmilyV)?

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:06

I suppose that once 
I install vc2019 I coud add that. It is not that difficult
(replying to @ FireSeraphim "mind if I paged <@!2424224362‚Ä¶"): I do not  mind,but even if I did it isn't my server so as  long as it is permitted do as you wish.

=== @ FireSeraphim 10/05/2021 07:07

aye

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:07

It's about one total day of work to add this feature.

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:09

I may just bake it into fonts.dat as ten user fonts and be done

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:10

I do however think that a custom userfonts is best with a command to load it n ZScript so that you can hot swap fonts adhoc.
this would allow a lot of freedom but it needs a lot  of GUI shyte in ZQE to support it

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:14

as it is not up to me now I do not have say on if this is going to be included if I make it and I want assurance that it will, ere I waste time creating it
I short I will not even begin on such a task unless the concept is preapproved.

=== @EmilyV99 (discord: Emily) 10/05/2021 07:14

The question I have is, how much would it add to embed a few custom fonts in the .qst?
like how SFX are loaded?

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:15

how much what?

=== @EmilyV99 (discord: Emily) 10/05/2021 07:15

would that add too much bloat to the quest file?
if not, I feel like that would be a far better system

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:15

Fonts are bitmap images
you'd store tem externally
but if you do tat tewn ZQ cannot preview te messages

=== @EmilyV99 (discord: Emily) 10/05/2021 07:16

Why couldn't they be stored internally though?

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:16

hence why I thought that a ten font userfonts.dat was the best solution

=== @EmilyV99 (discord: Emily) 10/05/2021 07:16

just write the contents of the bitmap to the quest file, `pfwrite()`

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:16

I suppose they could
but that has the same problem
https://www.allegro.cc/manual/4/api/fonts/load_font
if you have a better idea there is the documentaton

=== @EmilyV99 (discord: Emily) 10/05/2021 07:17

I mean, it can `write_bitmap()` to a tempfile and then load the tempfile
if the load_font requires it be a file

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:17

that only supports GRX
IDK if the fonted output would wor

=== @EmilyV99 (discord: Emily) 10/05/2021 07:18

`or any bitmap format that can be loaded by load_bitmap()`
if you read the full sentence

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:18

and again, there is the string editor and te subscreen to cnsider

=== @EmilyV99 (discord: Emily) 10/05/2021 07:18

`a GRX format .fnt file, a 8x8 or 8x16 BIOS format .fnt file, a datafile or any bitmap format that can be loaded by load_bitmap().`
For string editor/subscreen, the user fonts would just be appended to the dropdown lists

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:18

Sure
I do not ind this
but it reuires team effort
not e alone sitting and doing it

=== @EmilyV99 (discord: Emily) 10/05/2021 07:19

aye, certainly

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:19

and the complications of working with an eternal repo pus the new vs version mean it won't happen fast
coding this is not that hard
for the basic font loading
I'd do it in ZScript first
then you can add the other crud
incuding the file sel dialogue to add a font
it will need a somewhat complex dialogue including storing a font name and a pulldown for the slot (1 to 10)
and will further deprecate Tango to a point

=== @EmilyV99 (discord: Emily) 10/05/2021 07:22

well, it'd be kinda like the `SFX` dialog

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:22

so that is a bonus

=== @EmilyV99 (discord: Emily) 10/05/2021 07:22

you select a slot to edit, then name it and load a file

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:22

sure
I just want a team effort to add that jank

=== @EmilyV99 (discord: Emily) 10/05/2021 07:22

should be fairly simple, though I'll want to build it in the new system, so won't just be pure copy+paste on the sfx one

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:23

Adding a major feature like this is not something I a wiling to do solo
I am more than happy to do the skeleton implementation at some point and let you do all of the GUI crud

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:25

I still need to do the basic ffscript stuff fr rgbdata and palette
so I need to reserve registers and ASM opcodes for my use
first
twenty to thirty
I don't want to resolve erge conflicts on an external repo and futz about

=== @ZoriaRPG (discord: Timelord) 10/05/2021 07:27

in general when anything artificially pads a task to increase the amount of required time I just say no.
so reserving these allows me to avoid merge conficts
and thus not waste time

=== @ P-Tux7 10/05/2021 15:24

(replying to @EmilyV99 (discord: Emily) "would that add too much bloat‚Ä¶"): i can't imagine so
allegro fonts are 1-bit images
i'm sure one page of 8-bit tiles would take the same amount of room as 10 or even 20 allegro fonts

=== @ P-Tux7 10/05/2021 15:26

and it should add almost zero bloat if the user does not ADD any, just like sfx and 8-bit tiles

=== @EmilyV99 (discord: Emily) 10/05/2021 15:27

aye, fair

=== @ FireSeraphim 07/22/2022 09:45

Bump

=== @EmilyV99 (discord: Emily) 07/22/2022 09:47

(meta) thread name was changed: ‚ùåMore fonts for Zquests string editor
## ‚úÖüîívariable `Animation` doesnt exist in itemsprite script (#891)
@ Lincolnpepper opened this issue on 09/18/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/888897583047671838



=== @ Lincolnpepper 09/18/2021 21:21

Zscript Additions.txt includes a variable `Animation` that is a member of sprite objects, including itemsprite. but i get an error for `Animation` not existing under pointer when i use `this->Animation` in a itemsprite script.

=== @EmilyV99 (discord: Emily) 09/19/2021 22:38

(meta) thread name was changed: üîìvariable `Animation` doesnt exist in itemsprite script

=== @EmilyV99 (discord: Emily) 09/20/2021 20:29

@ Lincolnpepper this work?

https://cdn.discordapp.com/attachments/888897583047671838/889609320688402493/zelda.exe

https://cdn.discordapp.com/attachments/888897583047671838/889609328447848458/zquest.exe

=== @ Lincolnpepper 09/20/2021 20:41

(replying to @EmilyV99 (discord: Emily) "@ Lincolnpepper this w‚Ä¶"): it compiles, but it doesn't seem to work. 
```
itemsprite script Test
{
    void run()
    {
        this->Animation = false;
    }
}
```
i put this itemsprite script on a rupee and it didn't stop the rupee's animation

=== @EmilyV99 (discord: Emily) 09/20/2021 20:41

ahk, damn. Was hoping only the script side was missing.....

=== @EmilyV99 (discord: Emily) 09/20/2021 20:44

try this

https://cdn.discordapp.com/attachments/888897583047671838/889613017237565510/zelda.exe

=== @EmilyV99 (discord: Emily) 09/20/2021 20:47

? @ Lincolnpepper

=== @ Lincolnpepper 09/20/2021 20:49

yep, it works

=== @EmilyV99 (discord: Emily) 09/20/2021 20:49

wonderful
(meta) thread name was changed: ‚úÖüîívariable `Animation` doesnt exist in itemsprite script
## ‚úÖüîí`Grab-able` flag for items (#892)
@ Lincolnpepper opened this issue on 09/18/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/888899827734306907



=== @ Lincolnpepper 09/18/2021 21:30

The way that boomerang and hookshot grabbing items works in zc is not intuitive and is very limiting. It would make a lot of sense to just have a `Grab-able` flag for each item that determines if they can be grabbed by the boomerang and hookshot or something similar.

=== @EmilyV99 (discord: Emily) 09/19/2021 19:22

@ Lincolnpepper
Test if this works (new `IP_` constant, `IP_ALWAYSGRAB`, or pickup flags tab of item editor)

=== @EmilyV99 (discord: Emily) 09/19/2021 19:24


https://cdn.discordapp.com/attachments/888899827734306907/889230472067039263/2.55_NightlyBuild_Package.zip

=== @EmilyV99 (discord: Emily) 09/19/2021 20:33

(meta) thread name was changed: üíäüîì`Grab-able` flag for items

=== @ Lincolnpepper 09/19/2021 22:36

both setting the script constant and flags in the item editor seem to work
thank you!

=== @EmilyV99 (discord: Emily) 09/19/2021 22:37

(meta) thread name was changed: ‚úÖüîí`Grab-able` flag for items
## Negative values on Lock Block Combo Counter Field as ScreenD (#893)
@ bigjoe opened this issue on 09/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/889365955032014878



=== @ bigjoe 09/20/2021 04:22

This would make lock blocks capable of changing and being dependant on ScreenD values. I can see a variety of possible uses here.

=== @ bigjoe 09/20/2021 04:27

If I could give examples. You might use strings to initiate the thought of getting a key from a bucket which could later be used on a lock block on the screen. Or you could have gathering mini games of sorts.

=== @ bigjoe 09/20/2021 08:07

Is this a viable idea? other combos have made use of Screen->D so I can see some use for it. Its by no means absolutely necessary, but would arm the user with "tricks up their sleeve"

=== @EmilyV99 (discord: Emily) 09/21/2021 00:08

The `Counter` value is an attribyte
meaning, it has a range of `0-255`, and literally can't hold a negative
## ‚úÖüîíWriting to DMapData-ActiveSubscreen = Instant Update (#894)
@ Bagu opened this issue on 09/20/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/889554575089078323



=== @ Bagu 09/20/2021 16:52

I wrote a very simple function for RPG  quests, that can check the selected character and exchange the active subscreen, depending on it.

So I just thought it would be nice, if there was a Quest Script Option, that allows to instantly update the active subscreen Application (on every frame) if writing to "DMapData->ActiveSubscreen".
...without warping or scrolling to reinitiate the actual screen

=== @ Bagu 09/20/2021 16:54

Thank you.
I didn't know where I should post this

=== @ Bagu 09/20/2021 17:25

(meta) thread name was changed: Writing to DMapData-ActiveSubscreen = Instant Update

=== @EmilyV99 (discord: Emily) 09/20/2021 22:50

(meta) thread name was changed: üíäüîìWriting to DMapData-ActiveSubscreen = Instant Update

=== @EmilyV99 (discord: Emily) 09/20/2021 22:51

@ Bagu check if this works

=== @EmilyV99 (discord: Emily) 09/21/2021 00:07


https://cdn.discordapp.com/attachments/889554575089078323/889664171195662366/zelda.exe

https://cdn.discordapp.com/attachments/889554575089078323/889664185569538119/zquest.exe
works
(meta) thread name was changed: ‚úÖüîíWriting to DMapData-ActiveSubscreen = Instant Update
## üíäüîì__AutoGhostParseName() Bugs (#895)
@ mitchfork opened this issue on 09/21/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/889915807159685202



=== @ mitchfork 09/21/2021 16:47

This is from a discussion in the Z-Zone scripting discussion channel with @ Lejes
In `__AutoGhostParseName()` there is a for loop to go through the NPC name string - there is a `return 1;` line that will always execute before the for loop finishes
this messes up AutoGhost in 2.55

=== @EmilyV99 (discord: Emily) 09/21/2021 17:02

....and it doesn't mess it up in 2.53?

=== @ mitchfork 09/21/2021 17:04

Haven't checked the file in 2.53
It looks like it would have the same bug
seems like to me that the `return 1;` should be inside an `else` but I'm not certain
line 351 btw

=== @EmilyV99 (discord: Emily) 09/21/2021 17:09

....wtf

=== @ mitchfork 09/21/2021 17:09

yeah, I use ghost heavily but don't use autoghost so I never encountered this

=== @EmilyV99 (discord: Emily) 09/21/2021 17:12

No, this occurred in an update of zoria's
where he royally fucked up without testing

=== @EmilyV99 (discord: Emily) 09/21/2021 17:16


https://cdn.discordapp.com/attachments/889915807159685202/889923012940427274/ghost2_global.zh
should be fixed with that update

=== @EmilyV99 (discord: Emily) 09/21/2021 21:53

(meta) thread name was changed: üíäüîì__AutoGhostParseName() Bugs

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:17

Could someone test this? More bugs I can close, the better
## Change color of screen transition animations (#896)
@ aslion opened this issue on 09/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/889943522881454130



=== @ aslion 09/21/2021 18:37

Could we have a way to change the color of the screen wipe animations on tile warps and the start of a quest?

=== @ Guinevere 09/28/2021 01:27

porc must live in 4 colors
anymore is blasphemy
<:nekopog:835231816620965948>
## ‚úÖüîístd_functions.zh - Off by 1 error in collision detecting functions (#897)
@ Alucard648 opened this issue on 09/21/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/889997141248991272



=== @ Alucard648 09/21/2021 22:10

In all Collision functions all hitboxes are extended 1 pixel rightwards and 1 pixel downwards. Here is the example from std_functions.zh.
```

// Returns true if there is a collision between Link's hitbox and the FFC's.
// This only checks hitboxes.
bool LinkCollision(ffc f) 
{
    int ax = Link->X + Link->HitXOffset;
    int ay = Link->Y + Link->HitYOffset;
    return RectCollision(f->X, f->Y, f->X+(f->TileWidth*16), f->Y+(f->TileHeight*16), ax, ay, ax+Link->HitWidth, ay+Link->HitHeight);
}```
Here Hero`s default hit box counts as 17 pixels long, not 16 and 9 pixels high, not 8. In case of 1x1 FFC, its hitbox treated by function as 17x17 pixels, not 16x16 as intended. And that imprecision is across all collision detection functions in std.zh

=== @EmilyV99 (discord: Emily) 09/26/2021 04:40

@ Alucard648 this good? Did I miss anything?
https://cdn.discordapp.com/attachments/889997141248991272/891544775608651776/std_functions.zh
(meta) thread name was changed: üíäüîìstd_functions.zh - Off by 1 error in collision detecting functions

=== @EmilyV99 (discord: Emily) 09/26/2021 04:58


https://cdn.discordapp.com/attachments/889997141248991272/891549369948594176/std_constants.zh

https://cdn.discordapp.com/attachments/889997141248991272/891549370858766336/std_functions.zh
here, actually did a bit more updating for dir stuff

=== @ Alucard648 09/26/2021 07:47

üëç

=== @EmilyV99 (discord: Emily) 09/26/2021 07:47

(meta) thread name was changed: ‚úÖüîístd_functions.zh - Off by 1 error in collision detecting functions
## ‚úÖüîíZC Init Data Bug (#898)
@ Guinevere opened this issue on 09/22/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/890072230724239410



=== @ Guinevere 09/22/2021 03:09

If there is more than 2 items in an item class, the init data bugs out, off-centering the item checkbox and doesn't allow you to click it on.

![image](https://cdn.discordapp.com/attachments/890072230724239410/890072327243595878/Screenshot_2021-09-21_200446.png)

=== @ Guinevere 09/22/2021 03:11

(meta) thread name was changed: ZC Init Data Bug

=== @EmilyV99 (discord: Emily) 09/22/2021 03:11

@ Saffith whaaaaaaaaaaaa

=== @ Saffith 09/22/2021 03:13

... Huh. Yep, that's a weird one.

=== @ Saffith 09/22/2021 03:18

You can still reach them with keyboard navigation, at least, so they're not totally unusable.

=== @ Saffith 09/22/2021 03:19

And they're similarly broken in small mode this time...

=== @ P-Tux7 09/22/2021 21:30

@ Bagu

=== @ Bagu 09/22/2021 21:31

Sorry
...didn't notice that it's already been reported...
...so my thread can be  deleted/archieved

=== @EmilyV99 (discord: Emily) 09/22/2021 22:06

Found the issue, technically my fault
...but, more a fault of poor original design.

=== @EmilyV99 (discord: Emily) 09/22/2021 22:23


https://cdn.discordapp.com/attachments/890072230724239410/890362657289424916/zelda.exe

https://cdn.discordapp.com/attachments/890072230724239410/890362687102521374/zquest.exe
fixed
(meta) thread name was changed: ‚úÖüîíZC Init Data Bug
## ‚úÖüîíWhistle tornado sound effect wont stop playing (#899)
@ SkyLizardGirl opened this issue on 09/22/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/890294018678861844



=== @ SkyLizardGirl 09/22/2021 17:50

Whistle tornado sound effect won't stop playing after one use in latest Alpha 2.55

=== @ SkyLizardGirl 09/22/2021 17:52

When tornado is off screen and finished and gone it's sound still plays, over and over again.

=== @EmilyV99 (discord: Emily) 09/28/2021 15:01

Try un-checking `Weapons Can Go Out of Bounds (Offscreen)` under `options->backwards compatability->2`

=== @EmilyV99 (discord: Emily) 09/29/2021 12:55

? @ SkyLizardGirl

=== @ SkyLizardGirl 09/29/2021 22:20

It is unchecked

=== @ SkyLizardGirl 09/29/2021 22:23

Try giving the Whistles tornado a sound effect and see what happens.

=== @arceusplayer11 (discord: Deedee) 10/09/2021 14:03

Should be fixed now
(meta) thread name was changed: üíäüîìWhistle tornado sound effect wont stop playing

=== @arceusplayer11 (discord: Deedee) 10/09/2021 14:15

gonna post a nightly in a bit

=== @arceusplayer11 (discord: Deedee) 10/11/2021 13:47

@ SkyLizardGirl please check if the latest stuff fixes it
if not, please send a test quest and a description of when it happens

=== @ SkyLizardGirl 10/11/2021 21:39

Ok I will check

=== @arceusplayer11 (discord: Deedee) 10/26/2021 16:04

@ SkyLizardGirl did you check?

=== @ SkyLizardGirl 10/27/2021 03:10

No I haven‚Äôt yet I took a long break from ZC I will check now
I gotta load up my laptop

=== @arceusplayer11 (discord: Deedee) 10/28/2021 00:52

SLG PM'd me, it's fixed
(meta) thread name was changed: ‚úÖüîíWhistle tornado sound effect wont stop playing
## ‚úÖüîídmapdata int Type not returning the right value? (#900)
@ OmegaX opened this issue on 09/24/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/890770390606020638



=== @ OmegaX 09/24/2021 01:23

when I tried used dm->Type it returns 128 for a Dungeon Type dmap instead of 0. (found this out via the trace function.)

=== @EmilyV99 (discord: Emily) 09/24/2021 01:24

It returns the internal type data
you need to `&11b` it, IIRC
ex
```cpp
switch(dm->Type&11b)
{
    case DMAP_OVERWORLD:
        //blah blah
        break;
}```
....still have no clue WHY it's like that, should probably investigate further. Zoria's doing, I believe.

=== @EmilyV99 (discord: Emily) 09/26/2021 04:23

fixing this

=== @EmilyV99 (discord: Emily) 09/26/2021 04:27


https://cdn.discordapp.com/attachments/890770390606020638/891541419485954058/zelda.exe

https://cdn.discordapp.com/attachments/890770390606020638/891541438238715924/zquest.exe
@ OmegaX Does it work right in this?
(meta) thread name was changed: üíäüîìdmapdata int Type not returning the right value?

=== @ OmegaX 09/27/2021 13:54

windows is complaining about these files being viruses.

=== @EmilyV99 (discord: Emily) 09/27/2021 14:29

fun
windows hates zc

=== @ OmegaX 09/27/2021 16:11

Yeah, it also deletes the files when i try to open them. also, on an unrelated note: Trace is writing twice to allegro.log (ZScript Debug) instead of once. don't know why i need to do more testing...

=== @ OmegaX 09/27/2021 16:15

I have Trace run in a dmapdata script and it preform its function twice even though I have it written down once, one at the start before the warp opening starts and then another one after the warp animation is finish.

=== @arceusplayer11 (discord: Deedee) 01/15/2022 09:27

@EmilyV99 (discord: EmilyV) is this fixed?

=== @arceusplayer11 (discord: Deedee) 01/15/2022 09:28

@ OmegaX wait, I should be asking you
Sorry for the late ping, assuming you still use ZC

=== @ OmegaX 01/15/2022 09:29

Yep

=== @arceusplayer11 (discord: Deedee) 01/15/2022 09:30

This fixed it?

=== @ OmegaX 01/15/2022 09:33

I believe it was fixed in a official build after this, yes.

=== @arceusplayer11 (discord: Deedee) 01/15/2022 09:36

Aight, thank you!
(meta) thread name was changed: ‚úÖüîídmapdata int Type not returning the right value?
## ALTTP Sword (#901)
@ FireSeraphim opened this issue on 09/24/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/891105305306464326



=== @ FireSeraphim 09/24/2021 23:34

This just occurred to me and I think it would be great if this was an engine side feature but the default slash in Zeldaclassic is the GB Zelda 45 degree slash and it would be great as either a QR or sword exclusive item attribute to have 90 degree slashes ala ALTTP.

=== @EmilyV99 (discord: Emily) 09/24/2021 23:39

ü§¢ I don't want to think about the code required for this

=== @ FireSeraphim 09/24/2021 23:42

I see. My sincere apologies

=== @ P-Tux7 09/26/2021 01:41

iirc zoria planned to add this but we couldn't find the hitbox size for each frame even after asking on zeldix
i suppose i can ask on one of the randomizer discords nowadays
still it'd probably be hard since lttp had two different sword lengths that people would want
although as for scripting, isn't it much easier to do items now?

=== @EmilyV99 (discord: Emily) 09/29/2021 12:03

(meta) thread name was changed: ALTTP Sword

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:06

I did intend to add this and there is an lwpn for it ,  but as stated, I never found a complete definition for how it works in Z3

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:07

Thus, I left it on simmer.

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:09

If someone wants to fully document the code for how Z3 handles slashes and the sprites and timing, then K could do it with a 1:1 conversion. I  do not want to implement a shoddy or inaccurate emulation of it in ZC.

=== @ P-Tux7 10/24/2021 18:10

not to mention i don't quite like the sword or hammer in lttp
small hitboxes

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:11

What you like or dislike is not in debate. I happen to prefer both over zc, but I was more used to both ere either *existed* in zc.

=== @ P-Tux7 10/24/2021 18:13

btw something you *can* do is port the variable length property of Z3 swords to the current sword
since iirc hitboxes for them are extremely hardcoded rn and don't respect the input value in the item editor

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:17

I could, but I won't.
If I am going to do tqt I want to do it all at one time, or not at all.

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:20

Adding hotbox sizing to base swords is far from trivial
If I had all the metrics for z3 I would have done all of it for the z360 lwpn
Or z3slash
Or whatever I called it

=== @ZoriaRPG (discord: Timelord) 10/24/2021 18:22

Without the metrics and frame details, if fell to the bottom of my list. scripts allow implementation of it by anyone who wants to try and if they provide the script then  we could add I to future engine versions.
## ‚ùåüîíAllowing variables, or constants to be used in defining size for an array? (#902)
@ OmegaX opened this issue on 09/25/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/891176320187379714



=== @ OmegaX 09/25/2021 04:16

(Using ZC 2.55 Alpha 96)

For some reason this isn't a thing even though the documentation says it supports it (ZScript_Additions: line 808-834, I don't know if I'm misreading it or if I'm going crazy).

This is what I have been trying to do but the compiler spits out an error at me: 
int ArraySize = ArrayWidth * ArrayHeight;
int TempRoomArray[ArraySize];

=== @ OmegaX 09/25/2021 04:18

(meta) thread name was changed: Allowing variables, or constants to be used in defining size for an array?

=== @EmilyV99 (discord: Emily) 09/25/2021 04:29

Is this being done inside a function, or globally?
@ OmegaX

=== @ OmegaX 09/25/2021 04:32

Inside a function

=== @EmilyV99 (discord: Emily) 09/25/2021 04:32

should work for constants or variables

=== @ OmegaX 09/25/2021 04:35

Pass 1: Parsing
Pass 2: Preprocessing
Pass 3: Registration
Pass 4: Analyzing Code

Final Adventure Quest\Final Adventure Scripts\DMap Scripts\Z3ScrollingEngine.zs Line 90 @ Columns 31-40 - Error T046: An expression is not constant that needs to be.

Compile took 0.104000 seconds (104 cycles)
This is what im getting from allegro.log

=== @EmilyV99 (discord: Emily) 09/25/2021 04:38

oh, yeah, variables wouldn't work
oof
constants will work, though, if you make it `const int`
oh
the documentation specifically says `constant expression`
> Arrays now support being declared with any constant expression.
variables are not constant
so

=== @ OmegaX 09/25/2021 04:41

But the code examples shown below seem to suggest otherwise??? (I think I may be misinterpreting it...)

=== @EmilyV99 (discord: Emily) 09/25/2021 04:42

>     [example--
> 
>         int arr[10*4]; 
>         //This is now the same as int arr[40];
>         
>     --end example]
`10*4` are both number literals
`10*4` is constant, it is always `40`
>     [example--
> 
>         const int sARR_MAX = 20;
>         int arr[sARR_MAX];
>         
>     --end example]
That's a `const int`
a constant, not a variable

=== @ OmegaX 09/25/2021 04:43

so this would never work: const int ArraySize = ArrayWidth * ArrayHeight;

=== @EmilyV99 (discord: Emily) 09/25/2021 04:44

if `ArrayWidth` and `ArrayHeight` are constants, it would
```cpp
const int WIDTH = 5;
const int HEIGHT = 10;
const int SIZE = WIDTH*HEIGHT;
int arr[SIZE];```
that works fine

=== @ OmegaX 09/25/2021 04:45

(replying to @EmilyV99 (discord: Emily) "if `ArrayWidth` and `ArrayHei‚Ä¶"): those two variables are not constant in my script...
RoomWidth = TempRoomX2 - TempRoomX1;
RoomHeight = TempRoomY2 - TempRoomY1;
const int ArrayWidth = RoomWidth / SCREEN_W;
const int ArrayHeight = RoomHeight / SCREEN_H;
const int ArraySize = ArrayWidth * ArrayHeight;
int TempRoomArray[ArraySize];

=== @EmilyV99 (discord: Emily) 09/25/2021 04:46

then yep, that won't work there
the value needs to be constant at compile time
for the compiler to size the array

=== @ OmegaX 09/25/2021 04:48

damn...

=== @EmilyV99 (discord: Emily) 09/25/2021 04:49

I will tell you, making an array really big doesn't hurt that much at all
so you can just make them really big

=== @ OmegaX 09/25/2021 04:56

Can I create an array, fill it up to a certain point (for ex: array size being 30 and the point we fill it up too is up to entry 10, with the other 20 being empty or 0) and then copy that array onto empty variable with only those filled in values (essentially another array with a size of 10)?

=== @EmilyV99 (discord: Emily) 09/25/2021 05:02

. . . how would you size that other array any differently?
Anyway, when you create an array, everything in it is 0 by default

=== @ OmegaX 09/25/2021 05:03

Well I‚Äôm out of ideas...

=== @EmilyV99 (discord: Emily) 09/25/2021 05:04

....just make it bigger than you need it to be?
What is the biggest it could ever need to be?
Or if you need all the space, just make it sized `MAX_INT`

=== @ OmegaX 09/25/2021 05:15

May I ask why ZC can't use variables to define array size? (being able to do something like would be really useful)

=== @EmilyV99 (discord: Emily) 09/25/2021 05:28

because it uses the size during compile
it might be able to be changed, but it wouldn't work well with global arrays, which would be problematic and/or require additional error checking, which is a bunch of work to do.

=== @EmilyV99 (discord: Emily) 09/28/2021 15:14

(meta) thread name was changed: ‚ùåüîíAllowing variables, or constants to be used in defining size for an array?
## ‚úÖüîícustom MISC Death animation not playing all the way through (#903)
@ FireSeraphim opened this issue on 09/25/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891354181447856138



=== @ FireSeraphim 09/25/2021 16:03

I'm running into a curious phenomenon where the last 4 frames of my custom animation for the MISC:Death sprite is simply not playing. I partly suspect it has something to do with how that animation is handled by default. I have the number of frames set to nine and the animation speed set to six. The animation speed variable doesn't seem affect MISC:Death.

=== @ FireSeraphim 09/25/2021 16:05

As a test, I recommend starting a fresh quest file and then importing and setting this https://cdn.discordapp.com/attachments/598566141992108032/891132421884506122/16x16_IOG_Death_Animation.png as the MISC:Death animation (since that's what I was using) with the same numbers I was using.

=== @ FireSeraphim 09/25/2021 16:14

I went ahead and make a quick pair of gifs to illustrate what's actually happening in comparison to what should be happening

=== @ FireSeraphim 09/25/2021 16:15

This is how it looks in game due to the bug in question
![image](https://cdn.discordapp.com/attachments/891354181447856138/891357283399905300/How_it_actually_looks_in_game.gif)

=== @ FireSeraphim 09/25/2021 16:16

This is how it should look. The animation and spritework is meant to resemble the enemy death animation from Illusion of Gaia
![image](https://cdn.discordapp.com/attachments/891354181447856138/891357586815860756/How_it_should_look.gif)

=== @ FireSeraphim 09/25/2021 16:45

@<role: Developer> Sorry to pester you guys, but I figure a bug like this wouldn't be too difficult to fix

=== @ P-Tux7 09/26/2021 01:43

while we're at it, can you check the poof spawn animation as well?
and the "blocked" effect (boomerang on edge of screen or shooting an arrow at a darknut)

=== @EmilyV99 (discord: Emily) 09/26/2021 04:31

The `iwDeath` sprite only reads the tile, nothing else. So the frame count/speed is hard-coded.
to fix this without giving enemies custom death sprites per-enemy would be stupid... so this'll be fixed whenever the energy to add that is found

=== @EmilyV99 (discord: Emily) 09/28/2021 03:58

so
firstly

![image](https://cdn.discordapp.com/attachments/891354181447856138/892258891084234762/unknown.png)
this won't fix the frames, but lets you pick what sprite you want

=== @ FireSeraphim 09/28/2021 04:10

Thank you. I take it that it will be tonight's nightly build?

=== @EmilyV99 (discord: Emily) 09/28/2021 04:11

still working on fixing the frames part

=== @ FireSeraphim 09/28/2021 04:11

I see...

=== @EmilyV99 (discord: Emily) 09/28/2021 05:06

O-KAY
```cpp
int lweapon->ShadowSprite;
int eweapon->ShadowSprite;
int itemsprite->ShadowSprite;
int npc->ShadowSprite;
int npc->SpawnSprite;
int npc->DeathSprite;
int npcdata->ShadowSprite;
int npcdata->SpawnSprite;
int npcdata->DeathSprite;```
9 new zscript vars added

=== @EmilyV99 (discord: Emily) 09/28/2021 05:09

@ FireSeraphim if you wouldn't mind testing this out

=== @ FireSeraphim 09/28/2021 05:09

Honestly I'm not a coder by any means.

=== @EmilyV99 (discord: Emily) 09/28/2021 05:09


https://cdn.discordapp.com/attachments/891354181447856138/892276911571599380/buildpack.zip
not necessarily the script part
There's a QR under `Backwards compat -> 3` for changing the hardcoded frames
and the enemy editor `Graphics->Sprites` tab for changing the sprites on enemies without scriptsw

=== @ FireSeraphim 09/28/2021 05:11

I'll test the QR thing. I'm not interested in driving myself mad by trying to manually set each enemy's death sprite to a new one

=== @EmilyV99 (discord: Emily) 09/28/2021 05:12

as long as it fixes the issue you reported

=== @ FireSeraphim 09/28/2021 05:21

I'm testing it now. I'll let you how it pans out on that front

=== @EmilyV99 (discord: Emily) 09/28/2021 05:22

The ability to switch the sprite was the easy part, so frankly I don't expect issues with that at all
but the animation frames stuff is janky AF
thankfully if it works in once place it should work in all since it's the same code

=== @ FireSeraphim 09/28/2021 05:23

It works on my end. Now I just need to tweak the death animation to not play so fast

=== @EmilyV99 (discord: Emily) 09/28/2021 05:23

woo
it played fast, that's a good sign
guessing the speed was 0?

=== @ FireSeraphim 09/28/2021 05:24

I had the speed on six for a nine frame animation

=== @EmilyV99 (discord: Emily) 09/28/2021 05:24

ah, you had edited it
that's about half a second for the whole anim
...given, the engine one only ran for 18 frames
if I read this right anyway
I'll leave this open marked sick for a bit in case any issues come up with it
(meta) thread name was changed: üíäüîìcustom MISC Death animation not playing all the way through

=== @ FireSeraphim 09/28/2021 05:28

Not quite there yet...
Now I can't help but to wonder if I'm doing it wrong on my end.

=== @EmilyV99 (discord: Emily) 09/28/2021 05:29

oh?
What's your setup

=== @ FireSeraphim 09/28/2021 05:29

9 frames, speed of 12 (and the animation still seems to play too fast from what I'm seeing)
(replying to @ FireSeraphim "As a test, I recommend starti‚Ä¶"): These are the sprites I'm using

=== @EmilyV99 (discord: Emily) 09/28/2021 05:30

this is unchecked?
![image](https://cdn.discordapp.com/attachments/891354181447856138/892282028303712334/unknown.png)

=== @ FireSeraphim 09/28/2021 05:30

Yep

=== @ FireSeraphim 09/28/2021 05:33

Is a lower number the way to go for a slower animation? Just now tried it with the frame speed set to 16 as a brute force measure

=== @EmilyV99 (discord: Emily) 09/28/2021 05:33

lower is faster
I noticed something wrong
one moment

https://cdn.discordapp.com/attachments/891354181447856138/892283008122499072/zelda.exe
try that
(I thought the sprite anim clock was counting up.... turns out it was counting *down*, so something was set up backwards... oops)

=== @ FireSeraphim 09/28/2021 05:39

Nope. Just now set the animation frame speed to eight and it's still playing too fast

=== @EmilyV99 (discord: Emily) 09/28/2021 05:39

Really?
oh wait
fuck
I'm stupid

=== @EmilyV99 (discord: Emily) 09/28/2021 05:41


https://cdn.discordapp.com/attachments/891354181447856138/892284870661918740/zelda.exe

https://cdn.discordapp.com/attachments/891354181447856138/892285018964111380/zquest.exe

=== @ FireSeraphim 09/28/2021 05:45

You'll have to zip those. Chrome is being a paranoid bitch

=== @EmilyV99 (discord: Emily) 09/28/2021 05:47


https://cdn.discordapp.com/attachments/891354181447856138/892286288428949545/buildpack.zip

=== @ FireSeraphim 09/28/2021 05:50

Okay, now this going to the freaking twilight zone. Link has utterly vanished!
Where is Elf?
![image](https://cdn.discordapp.com/attachments/891354181447856138/892287211205185576/zc_screen00005.png)

=== @EmilyV99 (discord: Emily) 09/28/2021 05:54

...wtf
....not gonna get this done tonight.

=== @ FireSeraphim 09/28/2021 06:16

@EmilyV99 (discord: EmilyV) I did some further testing
It only seems to affect my quest
Link seems to appear just fine in other quests

=== @EmilyV99 (discord: Emily) 09/28/2021 06:18

...load an older backup of your quest?

=== @ FireSeraphim 09/28/2021 06:18

I am temporarily re-enabling the QR for backwards compatibility
just to see if it fixes that anomalous behavior
and then I'll load an older copy of my project afterwards as a futher test

=== @ FireSeraphim 09/28/2021 06:23

loaded and tested the copy I sent you at 'round midnight and the same phantom elf problem persists

=== @EmilyV99 (discord: Emily) 09/28/2021 06:24

Did the QR fix it?

=== @ FireSeraphim 09/28/2021 06:24

Nope
I did some futher tentative experiementation and link and the enemy and item sprites are invisible. I can seemingly still move the invisible elf into new screens and all
the items aren't invisible in the subscreens.

=== @ FireSeraphim 09/28/2021 06:27

enemy shadows are still visible as well as other particle effects (have not tried giving myself a magic or fire boomerang yet)

=== @EmilyV99 (discord: Emily) 09/28/2021 06:28

How about `Old (Faster) Sprite Drawing`, under `backwards compat -> 2`

=== @ FireSeraphim 09/28/2021 06:29

Trying that now.

=== @ FireSeraphim 09/28/2021 06:30

That seems to have fixed the invisible elf problem

=== @EmilyV99 (discord: Emily) 09/28/2021 06:31

that helps narrow it down

=== @ FireSeraphim 09/28/2021 06:31

Now I am going to do yet another test and re-disable the new QR you added for death animation as a experiement

=== @EmilyV99 (discord: Emily) 09/28/2021 06:32

The funny thing is, the same new code runs regardless of the state of the old drawing QR
so a new issue shouldn't be caused by that
let me rebuild from clean

=== @EmilyV99 (discord: Emily) 09/28/2021 06:37


https://cdn.discordapp.com/attachments/891354181447856138/892298998487064637/buildpack.zip
@ FireSeraphim try this, either will fix everything or change nothing

=== @ FireSeraphim 09/28/2021 06:38

Alright.
I'll let you know how it goes

=== @ FireSeraphim 09/28/2021 06:43

It seems to play alright so far, other than the `Old (Faster) Sprite Drawing` rule still being enabled. The new death animation QR is still disabled but I'm noticing an old thing where the death animation doesn't play all the way through on certain enemies (zols and bats) and the death animation is still too fast despite me setting it to a frames speed of 16.
I am going to disable the `Old (Faster) Sprite Drawing` rule real quick and see how that pans out

=== @EmilyV99 (discord: Emily) 09/28/2021 06:44

if the death compat qr is checked, the animations will be locked in speed and frames
also I just noticed another issue

=== @ FireSeraphim 09/28/2021 06:44

that QR is currently not checked

=== @EmilyV99 (discord: Emily) 09/28/2021 06:44

fun

=== @ FireSeraphim 09/28/2021 06:45

disabled `Old (Faster) Sprite Drawing` just now and the elf and friends are once again invisible

=== @EmilyV99 (discord: Emily) 09/28/2021 06:52

ok, try this one now.

https://cdn.discordapp.com/attachments/891354181447856138/892302947810148392/buildpack.zip

=== @ FireSeraphim 09/28/2021 07:06

Elf and friends are no longer invisible. You're making steps in the right direction, but custom death animations are still borked, in that it doesn't play all the way through and on some enemies it starts on a different frame (bats and gels come to mind as an example)

=== @EmilyV99 (discord: Emily) 09/28/2021 07:07

send allegro.log

=== @ FireSeraphim 09/28/2021 07:07


https://cdn.discordapp.com/attachments/891354181447856138/892306507100725268/allegro.log

=== @EmilyV99 (discord: Emily) 09/28/2021 07:08

hmm, that only has zq logs
run it in zc again, make sure to watch a death animation
then send allegro.log

=== @ FireSeraphim 09/28/2021 07:09

I just now enabled log game events and log script errors to allegro.log in my quest

=== @EmilyV99 (discord: Emily) 09/28/2021 07:09

shouldn't matter
I added debug logs
which don't care about the rules
should also show in the console if you have that open

=== @ FireSeraphim 09/28/2021 07:11

I don't have that opened

=== @EmilyV99 (discord: Emily) 09/28/2021 07:11

it'll also show in allegro.log, so

=== @ FireSeraphim 09/28/2021 07:15

I currently have the misc-death animation at a framespeed of 16 if that helps. I haven't changed that since last time
https://cdn.discordapp.com/attachments/891354181447856138/892308527509565500/allegro.log

=== @EmilyV99 (discord: Emily) 09/28/2021 07:16

huh, not seeing anything in the log
Go to `ZC->Show ZScript Debugger`

=== @ FireSeraphim 09/28/2021 07:17

where?

=== @EmilyV99 (discord: Emily) 09/28/2021 07:17


![image](https://cdn.discordapp.com/attachments/891354181447856138/892309020138946600/unknown.png)

=== @ FireSeraphim 09/28/2021 07:17

Oh

=== @ FireSeraphim 09/28/2021 07:21

Here's the log after the debugger been enabled
https://cdn.discordapp.com/attachments/891354181447856138/892310056178167878/allegro.log
I suspect the text near the bottom would be of interest to you

=== @EmilyV99 (discord: Emily) 09/28/2021 07:22

nope, nothing there useful
the debugger being on won't change allegro.log
it will let you see the information printouts as it happens
which should be whenever something is doing a death animation

=== @ FireSeraphim 09/28/2021 07:24

I don't know what you're looking for. I'm killing enemies and getting stuff like DeathAnim: (3/16), fr (5/9)
the fr 2/9 is coming from me killing keese

=== @EmilyV99 (discord: Emily) 09/28/2021 07:25

It should be printing once per frame of the animation
so the first is saying `(3/16) speed`
and `frame (5/9)`
for a 9-frame 16-speed sprite

=== @ FireSeraphim 09/28/2021 07:26

fr 0/9 from killing gels (the little slimes)

=== @EmilyV99 (discord: Emily) 09/28/2021 07:26

it should be making multiple prints per enemy
Technically, if it were working right, it should print `9*16` times per enemy

=== @ FireSeraphim 09/28/2021 07:26

it is, but the fr numbers is remaining the same per enemy killed

=== @EmilyV99 (discord: Emily) 09/28/2021 07:27

that... isn't right

=== @ FireSeraphim 09/28/2021 07:27

just not got multiple fr 2/9 from killing a keese once

=== @EmilyV99 (discord: Emily) 09/28/2021 07:28

you should get the same fr value 16 frames in a row

=== @ FireSeraphim 09/28/2021 07:29

I don't know what to tell you because I don't know what you're looking for.

=== @EmilyV99 (discord: Emily) 09/28/2021 07:29

hopefully for those values to appear in allegro.log
because everything in the console should appear in the log

=== @ FireSeraphim 09/28/2021 07:31

new fresh allegro.log, just now saved and quited
https://cdn.discordapp.com/attachments/891354181447856138/892312445769625600/allegro.log
The fuck?

=== @EmilyV99 (discord: Emily) 09/28/2021 07:31

something's certainly wrong
because none of that is in the log

=== @ FireSeraphim 09/28/2021 07:33

awkward gadwin printscreen time

=== @ FireSeraphim 09/28/2021 07:34

A fullscreen screenshot, debugger in the background of me just now killing a single keese
![image](https://cdn.discordapp.com/attachments/891354181447856138/892313233266966538/Screen_Shot_001.PNG)
and the resulting printout

=== @EmilyV99 (discord: Emily) 09/28/2021 07:34

ah fuck
figured out why it's carrying over
...still not figured out why the animation isn't playing proper length

=== @ FireSeraphim 09/28/2021 07:35

screenshot from me killing a single gel
![image](https://cdn.discordapp.com/attachments/891354181447856138/892313521801560064/Screen_Shot_002.PNG)

=== @ FireSeraphim 09/28/2021 07:37

screenshot from me killing a single blue tektite
![image](https://cdn.discordapp.com/attachments/891354181447856138/892314043799457792/Screen_Shot_004.PNG)

=== @EmilyV99 (discord: Emily) 09/28/2021 07:45

ok, think I fixed it entirely?

=== @ FireSeraphim 09/28/2021 07:46

I don't know.

=== @EmilyV99 (discord: Emily) 09/28/2021 07:46


https://cdn.discordapp.com/attachments/891354181447856138/892316297705160704/buildpack.zip
wait, but I forgot to apply the same fix to the spawn poof
one sec

=== @EmilyV99 (discord: Emily) 09/28/2021 07:48


https://cdn.discordapp.com/attachments/891354181447856138/892316822160936970/buildpack.zip

=== @ FireSeraphim 09/28/2021 07:50

the death animation seems to be working for the most part. There's just a minor curious hiccup where near the end of the animation it repeats the first frame, it's appropriately slow at a speed of 16 so I'm going to dial that back down to 8 and see how that looks

=== @ FireSeraphim 09/28/2021 07:53

oh boy. dialed it down to eight and the zol (little gels) are still playing the animation really slow.

=== @ FireSeraphim 09/28/2021 07:54

ditto for the octorocks playing the death animation slow despite me dialing the animation speed back down to eight (the keese seem to respect the animation speed variable and plays it at the expected 8 speed)

=== @EmilyV99 (discord: Emily) 09/28/2021 07:55

it should be all or nothing

=== @ FireSeraphim 09/28/2021 07:56

peahats seem to respect the 8 anim. speed
black and red moblins play the animation slow

=== @EmilyV99 (discord: Emily) 09/28/2021 07:58

they should play it the same if it's set to the same sprite

=== @ FireSeraphim 09/28/2021 08:05

I checked. They are set to the same sprite

=== @EmilyV99 (discord: Emily) 09/28/2021 08:07

see if this fixes anything

https://cdn.discordapp.com/attachments/891354181447856138/892321839899115530/buildpack.zip

=== @ FireSeraphim 09/28/2021 08:12

gels, octorock and moblins are still playing the animation slow. Other than that you have seemed to fix the hiccup I mentioned previously

=== @EmilyV99 (discord: Emily) 09/28/2021 08:14

in my test quest octoroks play it fine

=== @ FireSeraphim 09/28/2021 08:15

What I just sent you my quest again via dm? I suspect that might be more productive

=== @EmilyV99 (discord: Emily) 09/28/2021 08:15

sure
With 9 frames 8 speed, that should be 72 frames, just over a second

=== @EmilyV99 (discord: Emily) 09/28/2021 08:22

@ FireSeraphim it seems to be working fine in your quest

=== @ FireSeraphim 09/28/2021 08:23

Wha?
that's not what I'm seeing on my end

=== @EmilyV99 (discord: Emily) 09/28/2021 08:23

are you loading a fresh save file?
or one that was saved before?
....given, I don't think that should matter, but that's always the first thing I check

=== @ FireSeraphim 09/28/2021 08:25

just now started and tested a fresh save file
still having the slow anim. from gels

=== @EmilyV99 (discord: Emily) 09/28/2021 08:25

Zoras and Octoroks appear to be animating properly
I frame-counted with frame-advance
the full anim is 72 frames long
which is a bit slow
but that's how you have it set up

=== @ FireSeraphim 09/28/2021 08:27

have you killed a keese yet?

=== @EmilyV99 (discord: Emily) 09/28/2021 08:27

oh
I just killed a tektite
so, uh
the slow animation is not the problem
that's correct
the fast one is the problem

=== @EmilyV99 (discord: Emily) 09/28/2021 08:31

oh
oh wait you motherfucker
. . . so, enemies that are in the air are drawn multiple times per frame. Which uh. Fuck.
Need to move where this logic is done

=== @ FireSeraphim 09/28/2021 08:47

well at least it's two steps forward and one step back, right?

=== @EmilyV99 (discord: Emily) 09/28/2021 08:56

so, the invisibility seems to like coming back constantly on me
but goes away when I build from clean
....fun annoyances that make it take much longer to compile, yay
<a:hugheart:884673091878391828>
hopefully this will be done soon

=== @EmilyV99 (discord: Emily) 09/28/2021 09:55

fucking hell
that was an hour solid of trying to get sprites to stop being invisible
I hate everything
I think I fixed everything

=== @EmilyV99 (discord: Emily) 09/28/2021 10:03

@ FireSeraphim let me know if this works when you get the chance
https://cdn.discordapp.com/attachments/891354181447856138/892350870614847528/buildpack.zip

=== @ P-Tux7 09/28/2021 16:05

thanks a ton
(replying to @ FireSeraphim "the death animation seems to‚Ä¶"): this is how all animations work iirc with the looping
so putting a duplicate frame at the end can pretty much fix the appearance of it

=== @EmilyV99 (discord: Emily) 09/28/2021 16:22

I fixed that issue

=== @ FireSeraphim 09/28/2021 18:17

Sorry about that guys, I was honesty up past what I should have been
I'm in the Central Time Zone and our discussion (for me at least) was past midnight.
I'll promptly let you know how it both pans out

=== @ FireSeraphim 09/28/2021 18:40

I can confirm that the animation bug is fixed on my end. With one caveat: now the octorock, gels, keese and moblins are missing their death sound while the aquamentus and dodongos aren't.
Just one last little problem

=== @ FireSeraphim 09/28/2021 19:17

I'll be back in an hour or two

=== @ FireSeraphim 09/28/2021 21:32

I'm back.

=== @ FireSeraphim 09/29/2021 00:58

Hey @EmilyV99 (discord: EmilyV)
Ping me or DM me when you're ready

=== @ FireSeraphim 09/29/2021 02:01

I kinda want to see this last little hurdle dealt with.

=== @EmilyV99 (discord: Emily) 09/29/2021 02:18

I'll get to it when I can

=== @EmilyV99 (discord: Emily) 09/29/2021 02:49

@ FireSeraphim see if this fixes the death sounds
https://cdn.discordapp.com/attachments/891354181447856138/892603909967843368/buildpack.zip

=== @ FireSeraphim 09/29/2021 03:24

I can confirm it is fixed.

=== @ FireSeraphim 09/29/2021 06:04

@EmilyV99 (discord: EmilyV) Hello?

=== @EmilyV99 (discord: Emily) 09/29/2021 06:05

hi

=== @ FireSeraphim 09/29/2021 06:14

As I just said I can confirm it is fixed. I tested the new build you sent me and it the problem is finally fixed

=== @EmilyV99 (discord: Emily) 09/29/2021 06:20

Good

=== @EmilyV99 (discord: Emily) 09/29/2021 07:23

(meta) thread name was changed: ‚úÖüîícustom MISC Death animation not playing all the way through
## ‚úÖüîíQuest Icons revert on relaunch (#904)
@ NightmareJames opened this issue on 09/25/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891427226623561768



=== @ NightmareJames 09/25/2021 20:53

Quest Icons change after saving quest, but not after loading quest or reloading quest after shutdown.  Just back to default quest icons
Alpha 96 Nightly 9/23/2021

=== @ P-Tux7 09/26/2021 01:44

oh yeah i noticed years ago and reported it on the old server. this applies to getting a ring and then BEATING a quest without saving as well
it may be tricky to write it to the save file without saving the rest of the game as well

=== @ P-Tux7 09/26/2021 01:46

but wait, that's odd... isn't the game saved after winning it? i wonder what the issue is here

=== @EmilyV99 (discord: Emily) 09/28/2021 15:08

no, p-tux, that's unrelated
this is a bug with the `reload_game_icons` config

=== @EmilyV99 (discord: Emily) 09/29/2021 13:45

@ NightmareJames try this
https://cdn.discordapp.com/attachments/891427226623561768/892769003410436106/buildpack.zip
(meta) thread name was changed: üíäüîìQuest Icons revert on relaunch

=== @ NightmareJames 09/29/2021 15:12

Fixed

=== @EmilyV99 (discord: Emily) 10/04/2021 10:59

(meta) thread name was changed: ‚úÖüîíQuest Icons revert on relaunch
## ‚úÖüîíCSet2 issue on loading tileset? (#905)
@ Moosh opened this issue on 09/26/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891560675233640519



=== @ Moosh 09/26/2021 05:43

Attempting to load DoR in the latest nightly is yielding some seriously strange results. Many combos have wonky CSet2 properties and cset offsets

![image](https://cdn.discordapp.com/attachments/891560675233640519/891560706888044614/unknown.png)
Here's what one of the sample screens look like

=== @ Moosh 09/26/2021 05:45

Here's what one of the combos looks like in the editor
![image](https://cdn.discordapp.com/attachments/891560675233640519/891561046127558666/unknown.png)
According to Russ CSet2 was set to 1 in 2.53. Now it's 15
Clicking a combo and clicking OK also changes it to 11

=== @EmilyV99 (discord: Emily) 09/26/2021 05:48

well this just jumped to next on my list... but I'm in the middle of adding #deleted-channel

=== @ Moosh 09/26/2021 05:50


![image](https://cdn.discordapp.com/attachments/891560675233640519/891562470446096444/unknown.png)

=== @EmilyV99 (discord: Emily) 09/26/2021 05:51

. . .

=== @ Moosh 09/26/2021 05:51

Same combo when viewed in 1.92
So it's meant to be shifting the tile back 1 cset

=== @EmilyV99 (discord: Emily) 09/26/2021 05:51

hmmm

=== @ Moosh 09/26/2021 05:52

Here's how the sample screen looks
![image](https://cdn.discordapp.com/attachments/891560675233640519/891562747521798205/unknown.png)

=== @ Moosh 09/26/2021 05:53

Combo page in 2.53 looks consistent
![image](https://cdn.discordapp.com/attachments/891560675233640519/891563003126886480/unknown.png)

=== @EmilyV99 (discord: Emily) 09/26/2021 05:53

so, the error is that `-1` is being wrapped improperly

=== @ Moosh 09/26/2021 05:53

That would seem to be the case

=== @EmilyV99 (discord: Emily) 09/26/2021 05:53

@arceusplayer11 (discord: Deedee)

=== @ Moosh 09/26/2021 05:54

Hopefully this is the only combo field being interpreted incorrectly...
Cause it'd suck to start a quest and then run into the discovery that my whole combo table had been corrupted :/

=== @EmilyV99 (discord: Emily) 09/26/2021 06:19

definitely @arceusplayer11 (discord: Deedee) https://github.com/ArmageddonGames/ZeldaClassic/commit/0be2f8f5328ba3a67e5b9e9ff437f0722bc83ffa
this isn't a problem I foresaw

=== @EmilyV99 (discord: Emily) 09/26/2021 06:21

see if you can figure out a good way to handle this, Dimi....

=== @EmilyV99 (discord: Emily) 09/26/2021 06:23

....also, why would you `vbound` and then `%12`? the modulo is supposed to be doing the bounding there, so the logic is slightly off

=== @EmilyV99 (discord: Emily) 09/26/2021 06:25

So, it seems that the issue is of sign
because the 0-16 value range
was treated as `-8 to 7`
....so, uh

=== @EmilyV99 (discord: Emily) 09/26/2021 06:31

something like
```cpp
if(loading_old_version)
{
    int cs = temp_combo.csets&15;
    if(cs&8) //sign bit
    {
        cs |= ~int(0xF); //bitwise shit to make it correct
        temp_combo.csets = 12+cs;
    }
}```
...won't work perfectly, but will fix most situations
it won't fix it if csets 12-15 were being used
@arceusplayer11 (discord: Deedee) 's change to fix, when she's up to it

=== @EmilyV99 (discord: Emily) 09/26/2021 07:05

....except wait, no
I know a better way to fix this.... dammit
now it's in my head so I guess I have to code it

=== @EmilyV99 (discord: Emily) 09/26/2021 07:42

@ Moosh

https://cdn.discordapp.com/attachments/891560675233640519/891590635595919420/zelda.exe

https://cdn.discordapp.com/attachments/891560675233640519/891590638305431582/zquest.exe
see how this build treats you

=== @ Moosh 09/26/2021 07:43

gimme a sec while windows detects a new virus ü§¶

=== @EmilyV99 (discord: Emily) 09/26/2021 07:43

fun

=== @ Moosh 09/26/2021 07:44

"No current threats" fuck off and let me open the damn file
...what the fuck windows

=== @EmilyV99 (discord: Emily) 09/26/2021 07:45

windows is real nice sometimes
in all the worst of ways

=== @ Moosh 09/26/2021 07:46

I genuinely have no idea how to allow this build :/
Every other one, it gives me the warning, I tell it to allow it, bing bong goodbye
Here it pops up for a second, the immediately deletes the file

=== @EmilyV99 (discord: Emily) 09/26/2021 07:48


https://cdn.discordapp.com/attachments/891560675233640519/891591975436951583/Release.zip
maybe it'll like a zip better

=== @ Moosh 09/26/2021 07:50

That fixed it

=== @EmilyV99 (discord: Emily) 09/26/2021 07:51

confuse the virus-like antivirus via compression

=== @ Moosh 09/26/2021 07:51

It's weird because it still catches it and gives the exact same warning, but doesn't auto delete if it's in a zip

=== @EmilyV99 (discord: Emily) 09/26/2021 07:51

great job windows

=== @ Moosh 09/26/2021 07:52

Also I can add exclusions but only at an exact path. eg, a file named zelda.exe in my downloads folder but not any file named zelda.exe
That seems like an important distinction to be able to make

=== @EmilyV99 (discord: Emily) 09/26/2021 07:52

yep I hate that so much
guessing it doesn't like `*/zelda.exe` as a path, huh?

=== @ Moosh 09/26/2021 07:54

That would imply being able to specifiy a path as a string, rather than with a file picker dialogue ü§î

=== @EmilyV99 (discord: Emily) 09/26/2021 07:54

oof
probably a string somewhere in the registry.... totally safe to edit, right?

=== @ Moosh 09/26/2021 07:54

Maybe if I hack up some registry shit it'd work, but it's not worth that level of effort

=== @EmilyV99 (discord: Emily) 09/26/2021 07:55

Anyway, to the issue at hand
there's a compat QR, should be enabled when loading any quest saved before *this build*
with it on, cset2 will work exactly as before

=== @ Moosh 09/26/2021 07:56

probably sound like a boomer here but this just shows how infanitilized tech is becoming.

=== @EmilyV99 (discord: Emily) 09/26/2021 07:56

also, independently fixed the issue with negative values

=== @ Moosh 09/26/2021 07:57

I recall I used to complain about odd issues with windows usability but at least back then they could trust the user to use their own shit
And yeah, DoR appears to load properly now

=== @EmilyV99 (discord: Emily) 09/26/2021 07:57

now do `pick ruleset: modern`
and see if anything changes
(or disable the compat rule on the last tab)

=== @ Moosh 09/26/2021 07:58

Modern ruleset doesn't appear to have changed anything

=== @EmilyV99 (discord: Emily) 09/26/2021 07:59

k, so most of the issue was the separate bug
the QR affects the wrapping of csets, so if you have `CS 11, CS2 +1` that will go to `CS 12` in old quests, but `CS 0` in new quests

=== @EmilyV99 (discord: Emily) 09/26/2021 08:01

Any chance you have time to test #deleted-channel ?

=== @EmilyV99 (discord: Emily) 09/26/2021 08:04

(meta) thread name was changed: ‚úÖüîíCSet2 issue on loading tileset?
## ‚úÖüîíDemo ZX crashes on J-Dungeon Gleeok, Part 3 (#906)
@ NightmareJames opened this issue on 09/26/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891823251402158080



=== @ NightmareJames 09/26/2021 23:07

Demo ZX crashes on J-Dungeon Gleeok, Part 3, Reproducable
@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee) @ Moosh

=== @ NightmareJames 09/26/2021 23:08

Alpha 96 9/25/2021

=== @ NightmareJames 09/26/2021 23:09

Allegro Log
https://cdn.discordapp.com/attachments/891823251402158080/891823954115846165/allegro.log

=== @ Moosh 09/26/2021 23:16

Is this a script crash or purely engine? What's happening on that screen where it crashed and were you streaming when it happened?

=== @ NightmareJames 09/26/2021 23:17

I'll be posting the videos moemntarily
They're processing

=== @ NightmareJames 09/26/2021 23:20

https://youtu.be/_6DDSA-lYF0
https://youtu.be/y8r8vNPz5aI

=== @ NightmareJames 09/26/2021 23:26

@ DeletedUser

=== @ Deleted User 09/26/2021 23:26

I'm here.

=== @ NightmareJames 09/26/2021 23:28

@ Moosh The videos are up

=== @ Moosh 09/26/2021 23:30

So something related to the gleeok taking damage I assume

=== @ Moosh 09/26/2021 23:31

To be clear, is this the kind of crash where Windows reports ZC is not responding, the kind of crash where the window closes immediately, or the kind where the screen stops updating

=== @ NightmareJames 09/26/2021 23:36

Yes

=== @ NightmareJames 09/27/2021 14:29

Reproduced the crash in another room, this time the Pols Voice room/Like Like room with Red and Blue Bubbles.  Has something to do with Red Bubble Jinxes I believe, which were also in the Gleeok room
I could recreate all three rooms in a test quest with all the current items if needed
Quest in question
https://cdn.discordapp.com/attachments/891823251402158080/892055745946849350/demozx255.qst

=== @ NightmareJames 09/27/2021 14:36

Cheat Codes:  Lv. 3:  "Phantom Menace"  Lv. 4:  "Huan ying guang lin"

=== @ NightmareJames 09/27/2021 15:09

Tested ZNR with the same conditions.  It did not crash.  So it's the jinx AND something else

=== @ NightmareJames 09/27/2021 15:17

Couldn't replicate it on Downfall either

=== @ NightmareJames 09/27/2021 16:30

Ruled out upgrading FFCScript to 2.0.1 too

=== @ NightmareJames 09/27/2021 16:50

Ruled out upgrading Ghost to 2.8.15 too :: sigh ::
I'm about out of things I can try

=== @EmilyV99 (discord: Emily) 09/28/2021 13:57

your cheat4 is typoed, it has an extra space after the last letter

=== @EmilyV99 (discord: Emily) 09/28/2021 14:08

Exception thrown: Read access violation, zfix::getInt()
...which doesn't tell me anywhere near enough context, yay
it probably tried to read an invalid zfix pointer or something

=== @EmilyV99 (discord: Emily) 09/28/2021 14:13

it occurs even if I just stand on the screen invincible in the wall

=== @EmilyV99 (discord: Emily) 09/28/2021 14:33

fuck
I thought I had converted all of those calls....
this very much seems to be my fault

=== @EmilyV99 (discord: Emily) 09/28/2021 14:35

So, there was a rand call that wasn't converted properly
and it was selecting negative heads of the gleeok
which uh
isn't fun for memory access

=== @EmilyV99 (discord: Emily) 09/28/2021 14:42

@ NightmareJames @ FireSeraphim should fix crashes
https://cdn.discordapp.com/attachments/891823251402158080/892420985301663784/buildpack.zip

=== @EmilyV99 (discord: Emily) 09/28/2021 14:45

(meta) thread name was changed: üíäüîìDemo ZX crashes on J-Dungeon Gleeok, Part 3

=== @ NightmareJames 09/28/2021 15:42

I recompiled Demo ZX in A97.  Hopefully these bugs are crushed
I also upgraded ffcscript and ghost to as far as they could go to avoid other hassles

=== @ NightmareJames 09/28/2021 16:17

All fixed
Raid kills bugs DEAD
@<role: Developer>

=== @EmilyV99 (discord: Emily) 09/28/2021 16:35

(meta) thread name was changed: ‚úÖüîíDemo ZX crashes on J-Dungeon Gleeok, Part 3
## ‚úÖüîíDemo ZX (recompile) - Enemies spawning on solid tiles (#907)
@ NightmareJames opened this issue on 09/26/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891829309067632640



=== @ NightmareJames 09/26/2021 23:31

Just confirmed this in the quest, several instances of enemies spawning on solid tiles.  Will post videos
Alpha 96 Nightly 9/25/2021
@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee) @ Moosh @ DeletedUser

=== @ NightmareJames 09/26/2021 23:42

https://youtu.be/pnXjddlEhHU  Video

=== @ Deleted User 09/27/2021 00:17

I'm here.

=== @EmilyV99 (discord: Emily) 09/28/2021 14:48

Same thing that fixes #906 might fix this too
(meta) thread name was changed: üíäüîìDemo ZX (recompile) - Enemies spawning on solid tiles

=== @ NightmareJames 09/28/2021 16:18

I haven't seen a reoccurance, but I'm going to further test to say before I say it's dead
@ FireSeraphim Check for me too please

=== @ FireSeraphim 09/28/2021 18:42

I can confirm that this bug has been fixed on my end. Gleeok also no longer crashes the game

=== @EmilyV99 (discord: Emily) 09/28/2021 23:46

(meta) thread name was changed: ‚úÖüîíDemo ZX (recompile) - Enemies spawning on solid tiles
## ‚úÖüîíItem cant be collected when `Always Grabbable` is checked. (#908)
@ Lincolnpepper opened this issue on 09/27/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891844020110774323



=== @ Lincolnpepper 09/27/2021 00:29

As far as I can tell, items cannot be collected when `Always Grabbable` is checked in the item editor or when the pickup flag `IP_ALWAYSGRAB` is true.

=== @EmilyV99 (discord: Emily) 09/28/2021 14:58

Fixed
There was a condition, and it was inverted
bleh
(meta) thread name was changed: ‚úÖüîíItem cant be collected when `Always Grabbable` is checked.
## ‚úÖüîíCompilling script causes audio playback (#909)
@ Mani Kanina opened this issue on 09/27/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891876852048756788



=== @ Mani Kanina 09/27/2021 02:40

Whenever you compile scripts in newer version of ZC it blarts loud audio. This is obviously an oversight, but it completely hurts the ears every time.
(I'm being slightly facitious, if it wasn't clear, but make it a toggle please).

=== @EmilyV99 (discord: Emily) 09/27/2021 02:40

zquest.cfg, literally at the top

=== @ Mani Kanina 09/27/2021 02:41

oh

=== @EmilyV99 (discord: Emily) 09/27/2021 02:41

@ Lunaria

=== @ Mani Kanina 09/27/2021 02:41

thanks

=== @EmilyV99 (discord: Emily) 09/27/2021 02:41

...should add gui setting for it

=== @ Mani Kanina 09/27/2021 02:41

that would be nice

=== @EmilyV99 (discord: Emily) 09/27/2021 02:41

so I'll leave this open

=== @ Mani Kanina 09/27/2021 02:41

thanks
üëç

=== @arceusplayer11 (discord: Deedee) 01/15/2022 09:27

@EmilyV99 (discord: EmilyV) did you do the smart and add the gui?

=== @EmilyV99 (discord: Emily) 02/08/2022 11:37


![image](https://cdn.discordapp.com/attachments/891876852048756788/940571957617893386/unknown.png)
yes
(meta) thread name was changed: ‚úÖüîíCompilling script causes audio playback

=== @EmilyV99 (discord: Emily) 02/09/2022 15:19

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíEWeapon Scripts No Longer Do Anything (#910)
@ Moosh opened this issue on 09/27/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891877678926422076



=== @ Moosh 09/27/2021 02:43

Pretty much what it says on the tin, lemme know if I'm doing something stupid here :/

https://cdn.discordapp.com/attachments/891877678926422076/891877713726541854/WeaponScriptDontDoShit.qst
Script is in the buffer, assigned to the enemy's weapon, and isn't tracing or playing the sound when the moblin fires

=== @ Moosh 09/27/2021 02:49

Expanding on the issue, lweapon scripts also appear to be gone. Stuck one on the wand, nothing happen
https://cdn.discordapp.com/attachments/891877678926422076/891879150778974228/WeaponScriptDontDoShit.qst

=== @EmilyV99 (discord: Emily) 09/27/2021 02:50


![image](https://cdn.discordapp.com/attachments/891877678926422076/891879492652519484/unknown.png)
so the weapon has a script assigned to it from the enemy data
it's just... not working

=== @ Moosh 09/27/2021 02:51

NPC scripts appear unaffected, they still run as expected
So it's just weapons

=== @EmilyV99 (discord: Emily) 09/27/2021 02:53

Just EWeapons, or LWeapons too?
And what about itemsprites?

=== @EmilyV99 (discord: Emily) 09/27/2021 02:56

OH fuck I'm dumb aren't I

=== @ Moosh 09/27/2021 03:00

sorry for late response, itemsprites still work

=== @EmilyV99 (discord: Emily) 09/27/2021 03:03

lweapons?

=== @ Moosh 09/27/2021 03:04

EWeapons and LWeapons are the only scripts that I've observed have the problem

=== @EmilyV99 (discord: Emily) 09/27/2021 03:06

GAH there's the typo
hopefully that fixes it...

=== @EmilyV99 (discord: Emily) 09/27/2021 03:09

@ Moosh
https://cdn.discordapp.com/attachments/891877678926422076/891884308095193119/2.55_NightlyBuild_Package.zip

=== @ Moosh 09/27/2021 03:10

Provided this works, is it safe to develop in?

=== @EmilyV99 (discord: Emily) 09/27/2021 03:11

provided this works I'll be posting it in [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
so yes
this includes #deleted-channel too, now

=== @ Moosh 09/27/2021 03:15

Eyyy it all works

=== @EmilyV99 (discord: Emily) 09/27/2021 03:17

There's some stupid variable naming
And a backend refactor of some code left something checking `script` instead of `weaponscript`
... nice thing is now sprites (npc/wpn/itmspr) don't allocate script info or stack memory unless they have a script
And they all use a consistent function for script running
.... but weapons have a tiny difference for no good reason, thanks zoria.

=== @EmilyV99 (discord: Emily) 09/27/2021 03:24

(meta) thread name was changed: ‚úÖüîíEWeapon Scripts No Longer Do Anything
## ‚úÖüîíBitmapToTile() Function (#911)
@ Moosh opened this issue on 09/27/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/891941762359242772



=== @ Moosh 09/27/2021 06:58

This would work similarly to CopyTile() and similar functions, but be sourced from a ZScript bitmap. I imagine arguments would look something like:
`BitmapToTile(bitmap b, int x, int y, int dest, bool eightbit)`
It'd always copy in 16x16 sections from the source bitmap and if 8-bit is turned off, would merge the colors into one cset by index like in the editor. Hopefully the internals of CopyTile could do enough heavy lifting that the latter part isn't especially difficult. If not I wouldn't be against assuming 8-bit in all cases. But yeah, this would be handy for paper doll systems, switching out large graphics banks from external files (would probably require a loading screen) and just generally give ZScript total access to the tile page.

=== @EmilyV99 (discord: Emily) 09/27/2021 07:21

Tile stuff uses *pointer math*, so it's always a huge headache to comprehend what *anything* is doing
which is why this hasn't been done already
but, this is certainly something I'd like to add at some point

=== @EmilyV99 (discord: Emily) 09/29/2021 06:48

so
so
uh
this was way too easy

=== @EmilyV99 (discord: Emily) 09/29/2021 07:08

@ Moosh

![image](https://cdn.discordapp.com/attachments/891941762359242772/892669076382580766/2021-09-29_03-07-24.mp4)
All 17 of those tiles are blank at the start, and nothing ever changes what tiles are being displayed, nor is there any copytile usage.
Bitmap drawing to tiles magic
```cpp
void WriteTile( int layer, int x, int y, int tile, bool is8bit, bool mask);
 * Writes a 16x16 area from (x,y) of the bitmap at layer 'layer' 
 *     TO the tile page, overwriting the tile 'tile', either 4 or 8 bit.
 * If 'mask' is true, overlays instead of overwrites```

=== @ Moosh 09/29/2021 07:10

Splendid. And it's updating in real time too? Looks excellent

=== @EmilyV99 (discord: Emily) 09/29/2021 07:10

Obviously it has the same restraints as CopyTile
in that it won't carry over between reloads and such

=== @ Moosh 09/29/2021 07:10

No copying to blank tiles I assume

=== @EmilyV99 (discord: Emily) 09/29/2021 07:10

?

=== @ Moosh 09/29/2021 07:10

Though IIRC, flagging a tile as 8-bit makes it no longer treated as blank

=== @EmilyV99 (discord: Emily) 09/29/2021 07:11

why would you not be able to write to blank tiles

=== @ Moosh 09/29/2021 07:12

Beats me. Been that way as long as I remember. I kinda figured it had something to do with how tiles are compressed. Though in hindsight it may just be a bug ü§£

=== @EmilyV99 (discord: Emily) 09/29/2021 07:12

is that an issue with CopyTile?

=== @ Moosh 09/29/2021 07:12

As far as I can tell yeah
Didn't try with the other variations
And haven't tried it yet in 2.55 to be fair

=== @EmilyV99 (discord: Emily) 09/29/2021 07:13

I see no reason that should be the case
either for copytile or for this

=== @EmilyV99 (discord: Emily) 09/29/2021 07:16

..and uh, in fact, the tiles in the video were 'blank'
so

=== @EmilyV99 (discord: Emily) 09/29/2021 07:22

(meta) thread name was changed: ‚úÖüîíBitmapToTile() Function
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíForgot to update std_zh with Nightly 9-27-2021 (#912)
@ NightmareJames opened this issue on 09/27/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/891986915430113320



=== @ NightmareJames 09/27/2021 09:57

Functions not compiling with Nightly 9-27-2021, inserted 9-25-2021's std_functions.zh and it compiled

![image](https://cdn.discordapp.com/attachments/891986915430113320/891987030928654366/unknown.png)
@EmilyV99 (discord: EmilyV) @ Moosh

=== @EmilyV99 (discord: Emily) 09/27/2021 10:00

god dammit I made a typo and forgot to compile check it

https://cdn.discordapp.com/attachments/891986915430113320/891987676507570206/std_functions.zh
does this compile right?

=== @ NightmareJames 09/27/2021 10:02

Works now

=== @EmilyV99 (discord: Emily) 09/27/2021 10:03

(meta) thread name was changed: ‚úÖüîíForgot to update std_zh with Nightly 9-27-2021
## ‚ùåüîíEnemy Knockback (#913)
@ Architect Abdiel opened this issue on 09/28/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/892226946178641980



=== @ Architect Abdiel 09/28/2021 01:51

Apologies if this has already been requested, but I was wanting to request enemy knockback as a feature.

The idea is that take a darknut for instance. Darknuts probably wouldn't realistically get knocked back by sword as like a keese.

Furthermore, with enemies drowning in water being a thing, enemy knockback could be used to make that harder.

Bonus points if you could alter the knockback the enemy experiences based on weapons.

=== @EmilyV99 (discord: Emily) 09/28/2021 01:52

Scripts can access scripted knockback via new npc-> commands

=== @ P-Tux7 09/28/2021 16:02

the darknut thing isn't even scripted
you'd just set whatever npc flag determines knockback to 0 via npc script
as usual removing is easier than adding

=== @EmilyV99 (discord: Emily) 09/29/2021 11:08

(meta) thread name was changed: ‚ùåüîíEnemy Knockback
## ‚úÖüîíWeird enemy spawn position in current (as of the time of this posting) nighty build (#914)
@ FireSeraphim opened this issue on 09/28/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/892263135635988530



=== @ FireSeraphim 09/28/2021 04:15

The screenshot I'm about to post should clarify what I'm talking about. I've been noticing weird enemy spawn positions in a few screens in my side project.

![image](https://cdn.discordapp.com/attachments/892263135635988530/892263186806480906/zc_screen00004.png)

=== @ FireSeraphim 09/28/2021 04:29

So far I'm seeing it happen on screens with "enemies enter from the side - random" and one instance of "random spawn"

=== @ NightmareJames 09/28/2021 06:28

Second instance of this, thanks for reporting in a different quest @ FireSeraphim

=== @EmilyV99 (discord: Emily) 09/28/2021 15:01

see #907
(meta) thread name was changed: üíäüîìWeird enemy spawn position in current (as of the time of this posting) nighty build

=== @ FireSeraphim 09/28/2021 18:41

I can confirm that this bug has been fixed

=== @EmilyV99 (discord: Emily) 09/28/2021 23:45

(meta) thread name was changed: ‚úÖüîíWeird enemy spawn position in current (as of the time of this posting) nighty build
## Higher level bracelets affecting block pushing speed as an item attribute (#915)
@ FireSeraphim opened this issue on 09/29/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/892601876720259103



=== @ FireSeraphim 09/29/2021 02:41

Wouldn't be possible to have bracelets that have a noticeable effect on pushing speeds on lower tiered/leveled blocks. An example being a Lv2 Bracelet pushing a Lv0 Block at a noticeably faster speed. Partially quoting myself but I think this simple tweak might be a good idea.

=== @EmilyV99 (discord: Emily) 09/29/2021 02:43

Wouldn't be level-based, would be an attribute of the bracelet item

=== @ FireSeraphim 09/29/2021 02:45

I see.

=== @ Alucard648 09/29/2021 03:33

And also ability to push multiple blocks at the same time.
https://www.purezc.net/index.php?page=scripts&id=394

=== @EmilyV99 (discord: Emily) 09/29/2021 03:39

oh
that uh, is less easy
because that requires rewriting how the movingblock sprite is handled
## ‚ùåüîíFF Combos Overlap and cancel the Flags Underneath them. (#916)
@ SkyLizardGirl opened this issue on 09/29/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/892912075440001104



=== @ SkyLizardGirl 09/29/2021 23:13

FF Combos Overlap and cancel the Flags Underneath them.   I Had one overlapping over a teleport or stairway and the stairway would not function. There should be a box to check to turn a FFC off,
But would still function as an object, layer or overlayer.

=== @EmilyV99 (discord: Emily) 09/29/2021 23:15

That box is called `Ethereal`

=== @ SkyLizardGirl 09/29/2021 23:15

It is?

=== @EmilyV99 (discord: Emily) 09/29/2021 23:15

and has existed for a long time

=== @ SkyLizardGirl 09/29/2021 23:15

I did not know ok
ty

=== @EmilyV99 (discord: Emily) 09/29/2021 23:15

(meta) thread name was changed: ‚ùåüîíFF Combos Overlap and cancel the Flags Underneath them.
## ‚úÖüîíCombo mapping hotkey not respecting cancel button (#917)
@ Moosh opened this issue on 09/30/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/892940924068446228



=== @ Moosh 09/30/2021 01:08

After pressing the m hotkey to map a block on tiles to combo space, if you press escape key while on the combo page you can cancel out of mapping the combos. As soon as you select a combo position to map to however, you cannot cancel the action. The cancel button in the combo editing popup does not actually function as a cancel button.

=== @ Moosh 09/30/2021 01:10

This is really annoying if you happen to press M by accident and hastily press enter on that combo page screen. It'll map whatever you had selected to the start of the combo table, overwriting it. This cancel button worked properly in 2.53

=== @EmilyV99 (discord: Emily) 09/30/2021 02:33

So someone made `bool edit_combo()` return true always, even when you click cancel

=== @EmilyV99 (discord: Emily) 09/30/2021 02:35

@ Moosh
https://cdn.discordapp.com/attachments/892940924068446228/892962836270178304/buildpack.zip

=== @EmilyV99 (discord: Emily) 09/30/2021 02:37

(meta) thread name was changed: üíäüîìCombo mapping hotkey not respecting cancel button

=== @EmilyV99 (discord: Emily) 10/11/2021 02:42

(meta) thread name was changed: ‚úÖüîíCombo mapping hotkey not respecting cancel button
## ‚ùåüîíCan not export files or take screenshots (#918)
@ Shane opened this issue on 09/30/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893109089914212412



=== @ Shane 09/30/2021 12:16

I'm using Windows 10 and I have Avast. Before the latest 2.55 alpha and nightly builds, I was able to do these things, but now I'm not even getting pop up warnings and I've played around with the settings for quite a bit to no avail.

=== @EmilyV99 (discord: Emily) 09/30/2021 12:18

If a security program is preventing it, there's nothing we can do about it

=== @ Rekiron 09/30/2021 12:18

his antivirus says NO

=== @ Haylee 09/30/2021 12:21

??? If there's something different in the alpha that's causing it though, but to not happen in previous alphas, is that not something that should be identified?

=== @EmilyV99 (discord: Emily) 09/30/2021 12:24

Security programs have been yelling at us for literally years
and, nothing remotely to do with exporting or screenshotting has changed recently whatsoever
so chances of it being a change actually related are next to none
meaning it's probably just the security programs being the viruses they are

=== @ Haylee 09/30/2021 12:47

Could've put that a little more eloquently, but thanks for the clarification anyways lmao

=== @EmilyV99 (discord: Emily) 10/04/2021 11:44

(meta) thread name was changed: ‚ùåüîíCan not export files or take screenshots
## üíäüîìZelda flag not updating game icons (#919)
@ Moosh opened this issue on 09/30/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/893241534588268574



=== @ Moosh 09/30/2021 21:02

Here's a "super serious" bug I noticed recently. If you collect a tunic and then touch the Zelda flag without saving, the game icon doesn't update to reflect your tunic color. Everything else in the quest appears to be saved though. Would it be possible to make it so the credits sequence works the same as a normal save, possibly with a quest rule in case people want to keep this behavior to verify a 0 save game?
Here's an example quest showcasing the behavior
https://cdn.discordapp.com/attachments/893241534588268574/893241625814401045/WinGameIcon.qst

=== @ Moosh 09/30/2021 21:18

@ NightmareJames Are people in the 0 game or speedrunning scenes making use of this bug do you know?

=== @ NightmareJames 09/30/2021 22:25

Not AFAIK, but good that we caught it

=== @EmilyV99 (discord: Emily) 10/04/2021 12:36

Just bashed my head against this bug for a solid half hour
and made no progress whatsoever
I have no idea why the icon isn't saving, but nothing I changed worked....

=== @arceusplayer11 (discord: Deedee) 02/09/2022 10:40

I suspect cause it's reading the ring from zinitdata and not gamedata; I think the former might be invalid by the time the ending rolls around?

=== @EmilyV99 (discord: Emily) 02/09/2022 10:47

don't touch this code right now
I'm touching things that might conflict
(will try to push this soon so it's free)

=== @arceusplayer11 (discord: Deedee) 02/09/2022 10:52

well, my initial fix attempt did a bunch of spooky SFX playing and didn't fix it, so I'm guessing my fix accessed random memory somehow
discarded
But I did trace it and confirm that it's not finding any rings... despite you clearly having rings

=== @ NightmareJames 02/09/2022 21:19

Lovely

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:00

Found the solution
```load_game_icon(game,false,currgame);``` 
```load_game_icon(saves+currgame,false,currgame);``` Changing game to saves_currgame fixed it

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:04

This was a giant pain to figure out
tiny little error in a haystack.

=== @ Moosh 02/12/2022 07:09

```saves+currgame```
Dare I ask what this is?

=== @EmilyV99 (discord: Emily) 02/12/2022 07:10

oh

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:10

currgame is an int pointing to the save slot id

=== @EmilyV99 (discord: Emily) 02/12/2022 07:10

`saves` is an array

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:10

and saves is an array

=== @EmilyV99 (discord: Emily) 02/12/2022 07:10

so `saves+currgame` is the same as `&(saves[currgame])`

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:11

Don't ask me *how* that works

=== @EmilyV99 (discord: Emily) 02/12/2022 07:11

a pointer to the `currgame`th element of the array

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:11

it's black voodoo magic

=== @EmilyV99 (discord: Emily) 02/12/2022 07:11

in this case, it's a pointer to the save file of the current quest
as opposed to the current game object
What line is this on?
I can probably explain more detail

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:12

3 different lines in ending.cpp, and the exact lines might not be the same cause I added a bit more code to debug and clean up
656?

=== @EmilyV99 (discord: Emily) 02/12/2022 07:12

oh
is it the one in `inc_quest`?

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:12

in ending()

=== @EmilyV99 (discord: Emily) 02/12/2022 07:13

hmm, then I'm confused

![image](https://cdn.discordapp.com/attachments/893241534588268574/941955102967750686/unknown.png)
That is copying `game` to `saves[currgame]`
and then calling those functions

=== @ Moosh 02/12/2022 07:13

That's kinda what I figured was up, but adding arbitrary offsets to a pointer scares me

=== @EmilyV99 (discord: Emily) 02/12/2022 07:14

Adding to a pointer offsets by the added value times the number of bytes that the type of the array takes up
so a `byte[]`, doing `+ 2` is `+ 2 bytes`
an `int32_t[]`, doing `+2` is `+ 8  bytes`
because `sizeof(int32_t) == 4`
And if say, you have an `itemdata[]`, then it offsets by several hundred bytes per value added
or, for instance, `tmpscr+1` is used often
to access the pointer to `tmpscr[1]`

=== @ Moosh 02/12/2022 07:15

But if you go over the size of the array it'll access random memory, yeah?

=== @EmilyV99 (discord: Emily) 02/12/2022 07:15

Yep!

=== @ Moosh 02/12/2022 07:15

fun

=== @EmilyV99 (discord: Emily) 02/12/2022 07:15

But I mean, same happens if you go over the size in the normal way

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:15

technically I odn't think it's random memory?

=== @EmilyV99 (discord: Emily) 02/12/2022 07:15

`tmpscr[50]` is gonna be very random
but `tmpscr+50` is equally bad

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:15

It's whatever the next thing declared is

=== @EmilyV99 (discord: Emily) 02/12/2022 07:15

It isn't necessarily random
but it very well could be

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:16

yeah

=== @EmilyV99 (discord: Emily) 02/12/2022 07:16

like, an example:

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:16

it's "who the fuck knows" memory

=== @EmilyV99 (discord: Emily) 02/12/2022 07:17


![image](https://cdn.discordapp.com/attachments/893241534588268574/941956067431182367/unknown.png)
this is in `gamedata`
If I access `lvlitems[512]`, that's always going to give me `lvlkeys[0]`
(`MAXLEVELS` being `512`)
This is the end of gamedata
![image](https://cdn.discordapp.com/attachments/893241534588268574/941956307475382272/unknown.png)
If I tried to access....
`bottleSlots[276]`
that would be random
`bottleSlots[274]` and `[275]` would be the two bytes that make up `portalspr`
but [276] goes past the end of the struct
so it would be whatever memory was allocated next, which could vary widely.

=== @ Moosh 02/12/2022 07:21

And the compiler doesn't warn you when doing any of this?

=== @ Moosh 02/12/2022 07:22

I guess it doesn't in ZScript either. But the ZScript console is at least kind enough to yell at me and also catch the errors before I access anything catastrophic

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:27

(replying to @ Moosh "And the compiler doesn't warn‚Ä¶"): nope
lmao

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:35

@EmilyV99 (discord: EmilyV) what should I mark a thread as where a fix hasn't been posted yet but it has been fixed?

=== @EmilyV99 (discord: Emily) 02/12/2022 07:54

Check if the fix is tested/confirmed, pill if it still needs to be tested
doesn't matter if the fix is posted or not, same regardless

=== @arceusplayer11 (discord: Deedee) 02/12/2022 07:55

Okay
(meta) thread name was changed: üíäüîìZelda flag not updating game icons

=== @EmilyV99 (discord: Emily) 02/13/2022 05:13

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) @ Moosh
## ‚úÖüîíSignpost combos lens activation (#920)
@ Orithan opened this issue on 10/01/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893311796339961896



=== @ Orithan 10/01/2021 01:42

ZC version: 2.55 Alpha 97 hotfix.

Signposts don't appear to be functioning anymore. They do nothing whereas they worked in previous nightlies.

=== @ Orithan 10/01/2021 06:16

NVM
Dumb default control configs

=== @EmilyV99 (discord: Emily) 10/01/2021 06:16

Oh lol

=== @ Orithan 10/01/2021 06:16

But I have another bug report - You can lens through signs

=== @EmilyV99 (discord: Emily) 10/01/2021 06:16

??

=== @ Orithan 10/01/2021 06:17

The lens still runs when you interact with signpost

=== @EmilyV99 (discord: Emily) 10/01/2021 06:17

That's annoying

=== @ Orithan 10/01/2021 06:17

The lens runs while pressing to interact with signpost, before and after the string

=== @EmilyV99 (discord: Emily) 10/01/2021 06:18

Guessing a timing issue?
I'm away from home for a bit, I'll look at it when I get home tomorrow

=== @EmilyV99 (discord: Emily) 10/01/2021 22:51

(meta) thread name was changed: Signpost combos lens activation

=== @EmilyV99 (discord: Emily) 10/04/2021 10:46

....oh
it's eating a press input
but it doesn't disable the hold state
the lens ignores the press state

=== @EmilyV99 (discord: Emily) 10/04/2021 10:53

this should fix it
(meta) thread name was changed: üíäüîìSignpost combos lens activation
oh wait
need to copy to chests

=== @EmilyV99 (discord: Emily) 10/04/2021 10:58

this should fix it @ Orithan

https://cdn.discordapp.com/attachments/893311796339961896/894539141470109746/buildpack.zip

=== @ Orithan 10/04/2021 12:39

Nope. Just makes the signpost instead trigger when you move up to it with the button held
It interrupts the lens drawing but then it gets called up again after the fact

=== @EmilyV99 (discord: Emily) 10/04/2021 12:45

Ah crap, missed that first part
... the lens getting called after is kinda gonna happen
Because the lens doesn't trigger when you press the button
It triggers when the button is held

=== @EmilyV99 (discord: Emily) 10/04/2021 13:30


https://cdn.discordapp.com/attachments/893311796339961896/894577238496935986/zelda.exe

https://cdn.discordapp.com/attachments/893311796339961896/894577248034758676/zquest.exe
@ Orithan this should fix the moving up to it
but yeah, there really is no way to prevent it going *after* the sign.

=== @EmilyV99 (discord: Emily) 10/11/2021 02:37

(meta) thread name was changed: ‚úÖüîíSignpost combos lens activation
## Move attributes 11 and 12 in the enemy editor? (#921)
@ Moosh opened this issue on 10/01/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/893312592041357352



=== @ Moosh 10/01/2021 01:45

Bit of an odd one here, but back in 2.50 attributes 11 and 12 were in the Data 2 tab in the editor and were used by pretty much every ghost.zh script. At some point when attributes got expanded, Zoria moved them over to the new Attributes tab. This has caused a bunch of small inconveniences for users who are familiar with 2.50 or unfamiliar with 2.55, trying to follow older script setup instructions, ect. Would it be possible to restructure the UI again to have them either moved back or accessible from both tabs?
And discord lagged out and double posted the thread. ü§¶ Can someone remove the duplicate?
## Cross Beams+Peril Beam flags (#922)
@ Guinevere opened this issue on 10/01/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/893344273251061761



=== @ Guinevere 10/01/2021 03:51

I'd like the cross beams to have a flag where the power is a damage multiplier based on the current sword's beam power
Example:
Power: 2 = sword beam damage x2

=== @ Guinevere 10/01/2021 03:52

Like how the spin attack takes the power of the sword and multiplies it based on the "power" slot

=== @ P-Tux7 10/01/2021 03:54

might as well do peril beam while we're at it

=== @ Guinevere 10/01/2021 03:55

sure why not
would be cool
and would make peril beams more like a desparation attack than just being able to shoot beams with low life

=== @ Guinevere 10/01/2021 03:57

(meta) thread name was changed: Cross Beams+Peril Beam Damage Multiplier

=== @ Guinevere 10/06/2021 04:22

oh yeah. and also for the peril beams, it would be nice to make an option for the maximum hearts have a flag to switch it to percent of health than a specific amount of hearts so it can scale with how many hearts you have

=== @ Guinevere 10/06/2021 04:25

(meta) thread name was changed: Cross Beams+Peril Beam flags

=== @ Guinevere 10/11/2021 03:38

@EmilyV99 (discord: EmilyV) (just adding u to the thread <:shibaheart:668921721948209162>)
## ‚ùåüîíBeam Break effects does not animate (#923)
@ Guinevere opened this issue on 10/01/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893380789805383702



=== @ Guinevere 10/01/2021 06:16

forgot to report this earlier

![image](https://cdn.discordapp.com/attachments/893380789805383702/893380935351955497/2021-09-30-23-14-58.mp4)

![image](https://cdn.discordapp.com/attachments/893380789805383702/893381046278692864/Screenshot_2021-09-30_231200.png)

=== @EmilyV99 (discord: Emily) 10/01/2021 06:53

I don't think they are meant to?
Normally they flash csets, IIRC

=== @EmilyV99 (discord: Emily) 10/01/2021 06:54

(Not home to check code rn)

=== @ Guinevere 10/01/2021 07:17

but the funny thing is that they are spaced like they can

=== @EmilyV99 (discord: Emily) 10/01/2021 07:18

I mean yeah, hardcoded sprite shit is janky af

=== @ Guinevere 10/01/2021 07:19

true
when is zc not jank
<:teehee:620404816769843200>

=== @EmilyV99 (discord: Emily) 10/04/2021 11:38

@ Guinevere Try setting `Miscellaneous Type` to `3` on the sword sprite....

=== @ Guinevere 10/04/2021 11:45

that works
the flickering is a lil weird
but i'll take it
thank ya

=== @EmilyV99 (discord: Emily) 10/04/2021 11:46

peeked at the beam break effect
and saw
```cpp
if ( do_animation ) 
{
    if(type2==3 && (f&2))
        ++tile;
}
```

=== @ Guinevere 10/04/2021 11:46

huh

=== @ Guinevere 10/04/2021 11:48

misc. types in the sprite editor were kinda iffy to figure out so i never messed with them too much

=== @EmilyV99 (discord: Emily) 10/04/2021 11:48

specifically,
```cpp
case wBeam:
case wRefBeam:
{
    if(dead==-1) break;
    
    // draw the beam shards
    int ofs=23-dead;
    int f = frame&3;
    int type2 = o_type;
    //tile = o_tile+((frames?frames:1)*2);
    update_weapon_frame(((frames?frames:1)*2),o_tile);
    
    if(type2)
        cs = o_cset>>4;
    if ( do_animation ) 
    {
        if(type2==3 && (f&2))
            ++tile;
    }
    if(!type2 || f==0 || (type2>1 && f==3)) overtile16(dest,tile,x-2-ofs,y+playing_field_offset-2-ofs-(z+zofs),cs,0);
    
    if(!type2 || f==2 || (type2>1 && f==1)) overtile16(dest,tile,x+2+ofs,y+playing_field_offset-2-ofs-(z+zofs),cs,1);
    
    if(!type2 || f==1 || (type2>1 && f==2)) overtile16(dest,tile,x-2-ofs,y+playing_field_offset+2+ofs-(z+zofs),cs,2);
    
    if(!type2 || f==3 || (type2>1 && f==0)) overtile16(dest,tile,x+2+ofs,y+playing_field_offset+2+ofs-(z+zofs),cs,3);
}
```
that's the entire code block for beam shards

=== @ Guinevere 10/04/2021 11:50

i see

=== @EmilyV99 (discord: Emily) 10/04/2021 11:52

anyway, this appears to be working as intended
(meta) thread name was changed: ‚ùåüîíBeam Break effects does not animate

=== @ Guinevere 10/04/2021 11:53

ye
guess i should make a feature request where there is a misc type where it animates the beam shards without them flickering.
## ‚úÖüîíBuggy Lens of Truth and Timer interaction. (#924)
@ Orithan opened this issue on 10/01/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893385739683905536



=== @ Orithan 10/01/2021 06:35

ZC version: 2.55 Alpha 97 hotfix.

The Lens of Truth does not appear to be operating with the ``Timer`` variable correctly. If ``Timer`` is set to above zero, the game does not drain resources most of the time you activate it.
If you do use it and it does cost, it runs the cost as intended.

=== @ NightmareJames 10/01/2021 11:30

Which quest you testing it on @ Orithan ?

=== @ Orithan 10/01/2021 11:31

My own quest.
Are there quest rules or something of the sort tied to it.

=== @ NightmareJames 10/01/2021 11:47

Can you post the quest (and any applicable saves/cheat codes)?  It helps the devs immensely

=== @ NightmareJames 10/01/2021 11:48

I'm not sure if it's publically released or you're working on a new version

=== @ Orithan 10/01/2021 15:46

Its not publicly released yet.

=== @ FireSeraphim 10/01/2021 18:16

I can confirm a similair phenomenon exist. As an experiement I tried changing the Cane of Bryna's timer value to 30 while leaving the cost at one.

=== @ NightmareJames 10/01/2021 18:16

I'll try it in Demo ZX later tonight

=== @ FireSeraphim 10/01/2021 18:17

aye

=== @ NightmareJames 10/02/2021 09:47

Might be a little longer, installing the enemy placement flags into ZX.  Give me a day or two.  Things going crazy

=== @ NightmareJames 10/04/2021 18:54

Sorry about not getting to this quickly:  Work's been rough, and I've been not feeling all too well.  I'm through Level 1 of ZX, hopefully will be in THAT area soon where you obtain the Lens

=== @ NightmareJames 10/05/2021 06:10

@ FireSeraphim I need to know the parameters of what to test.  I got the Lens out in a reasonable testing situation

=== @ FireSeraphim 10/05/2021 06:28


![image](https://cdn.discordapp.com/attachments/893385739683905536/894833347778461706/Screen_Shot_001.PNG)
These were my exact settings, I haven't changed anything else beyond this tab

=== @ NightmareJames 10/05/2021 23:44

Is this supposed to be in frames or seconds?
(so I know what I'm testing)
Demo ZX's is set at zero

=== @ NightmareJames 10/05/2021 23:58

@ FireSeraphim

=== @ FireSeraphim 10/05/2021 23:59

What do you mean by frames?
These are the only settings I changed, nothing more. nothing less.

=== @ NightmareJames 10/06/2021 00:05

Is the 30 measured in frames or seconds?

=== @EmilyV99 (discord: Emily) 10/06/2021 00:15

frames

=== @ NightmareJames 10/06/2021 01:53

OK

=== @ NightmareJames 10/06/2021 05:50

Anything above a value of "7" (or binary 0111) is busted.  Does this mean anythng to you @EmilyV99 (discord: EmilyV) ?

=== @EmilyV99 (discord: Emily) 10/06/2021 15:00

```cpp
if ( frame % itemsbuf[itemid].magiccosttimer == 0 ) game->change_counter(-(itemsbuf[itemid].magic), itemsbuf[itemid].cost_counter);```
`frame` appears to be an `int`, so has a range FAR larger than 7......
....also it's a global variable

=== @EmilyV99 (discord: Emily) 10/06/2021 15:02

so, very odd

=== @arceusplayer11 (discord: Deedee) 10/09/2021 10:21

Fixed.
(meta) thread name was changed: ‚úÖüîíBuggy Lens of Truth and Timer interaction.
## üîìDeafness Improvements (#925)
@ P-Tux7 opened this issue on 10/01/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/893554818046623746



=== @ P-Tux7 10/01/2021 17:47

This is an idea for ways to show formerly sound-only gameplay-affecting qualities for deaf people or people who are playing without sound.

=== @ P-Tux7 10/01/2021 17:49

-Bombable Wall and Combo Tapping - Add a spark like in oracles when the combo being tapped is bombable? I don't have any particular desire on how the sprite is determined. It could either be per-sword, a hardcoded sprite after the sword beam explosions, a global sprite for all swords, or even just recycling the boomerang/arrow poof effect or the sword beam's explosion effect.

=== @ P-Tux7 10/01/2021 17:51

-Sword and Hammer Charging - This presents a few issues, because there needs to be a distinguishing between Spin Attack/Hurricane Spin and Quake Hammer/Super Quake so that the player knows whether they are at a level 1 or 2 charge. Flashing swords/hammers might be hard to define in ZQuest unless the CSets are hardcoded or we do the costly idea of adding two definable flash CSets to the swords and hammers or scrolls... and what if the user wants the 4-CSet auto-flash?

=== @ P-Tux7 10/01/2021 17:54

We could also use two levels of rumbling effects on Link or the sword/hammer while it's charged, similar to the Stone of Agony/Farore's Wind.

=== @EmilyV99 (discord: Emily) 10/01/2021 22:51

#810 would handle charging (should add the same to hammer, didn't think about that)
as for the tapping, I could add a tapping sprite to misc sprites, letting the questmaker set a sprite for it
will want to update qst.dat with a sprite filled for that, and the sword sparkle options enabled and set up, so that `File->New` has that done already
(meta) thread name was changed: üîìDeafness Improvements
good suggestions, something to move up the list

=== @ P-Tux7 02/10/2022 16:54

ok so i think there should be a "normal" poke spark sprite for each sword and then a "special" poke spark sprite for when it pokes something bombable
## ‚ùåüîíTile and palette ripper reading palette indices differently from other programs? (#926)
@ Moosh opened this issue on 10/02/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893736095689342988



=== @ Moosh 10/02/2021 05:48

This is a very rare issue I've run into, possibly not a bug. More than seeing it fixed, I'd like to first understand why ZC is doing this.

![image](https://cdn.discordapp.com/attachments/893736095689342988/893736193030762496/Golem.png)
So I made a set of enemy sprites in Aseprite and wanted to rip them into ZC.
ZC has having none of it and not rendering them in the right colors. So I tried ripping the palette data from the image and ZC gave me this

![image](https://cdn.discordapp.com/attachments/893736095689342988/893736446400294922/unknown.png)
The starting row in that palette features all the colors in the image. Would normally be indicative of something being saved incorrectly
The thing is, my palette in Aseprite looks like this. Aseprite disagrees with ZC on what this image's palette is
![image](https://cdn.discordapp.com/attachments/893736095689342988/893736833685524500/unknown.png)
And when I open it in Gimp, same result
![image](https://cdn.discordapp.com/attachments/893736095689342988/893736946591993876/unknown.png)

=== @ Moosh 10/02/2021 05:53

Both programs agree that the image is indexed and only ZC is disagreeing and giving me that wacky palette. I suspect this has something to do with ZC being as old as time, could be it ignores some parts of the PNG format that more modern programs are catching
So I'd like to figure out where it's getting this palette data from and how to save it correctly in these other programs so that ZC respects it

=== @ Moosh 10/02/2021 05:55

For comparison, when I saved the same image as a BMP it worked fine. But that doesn't particularly surprise me
https://cdn.discordapp.com/attachments/893736095689342988/893737895360348210/Golem.bmp

=== @ NightmareJames 10/02/2021 09:46

I'm actually going to second this.  I noticed palettes can be off when translating from Paint Shop Pro unless I do special things

=== @EmilyV99 (discord: Emily) 10/02/2021 10:49

(replying to @ Moosh "For comparison, when I saved‚Ä¶"): ^ This is what I was going to suggest as a fix
I have no fucking clue why this would do this, but bitmap is the image type ZC uses, so it makes sense that that would work better

=== @ Moosh 10/02/2021 10:52

So at no point does ZC itself read the image headers? It's all allegro witchcraft?

=== @EmilyV99 (discord: Emily) 10/02/2021 10:52

I have no idea
what menu are you doing this in, exactly?

=== @ Moosh 10/02/2021 10:55

Grab menu initially. Colors went all fucky so I went to investigate. Same behavior in the palette grabber

=== @ Moosh 10/02/2021 10:56

Now what it looks like it's done is what happens when you try to rip in a non indexed image
In which case it auto generates a palette for it
![image](https://cdn.discordapp.com/attachments/893736095689342988/893813756574973962/unknown.png)

=== @EmilyV99 (discord: Emily) 10/02/2021 10:56

where palette grabber
oh

=== @ Moosh 10/02/2021 10:57

Quest->Graphics->Palettes->Main and then Grab

=== @EmilyV99 (discord: Emily) 10/02/2021 10:57

duh
can you send the original png image?

=== @ Moosh 10/02/2021 10:57

Already did, very start of the thread

![image](https://cdn.discordapp.com/attachments/893736095689342988/893814026470043658/Golem.png)
here's a repost

=== @EmilyV99 (discord: Emily) 10/02/2021 10:58

oh bleh
I literally didn't see it because it blended in XD

=== @EmilyV99 (discord: Emily) 10/02/2021 11:12

Umm
Nothing we can do about this
it all occurs within allegro
fun times

=== @ Moosh 10/02/2021 11:13

alas. Well good to know it's not on me. Or at least I can't figure out why it's on me
Might be some setting in gimp that'd do it. I had problems loading images on 1.92 in the past until I fiddled with some shit

=== @EmilyV99 (discord: Emily) 10/02/2021 11:14

Best of luck
marking unfixable
(meta) thread name was changed: ‚ùåüîíTile and palette ripper reading palette indices differently from other programs?

=== @ NightmareJames 10/02/2021 11:40

Hate this as well, but glad to know
Thank you @EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 10/04/2021 08:36

@ZoriaRPG (discord: Timelord)

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:38

Allego bitmaps use a specific format of indexed colour: Modern Windows ` .bmp` is not the sane format as pre-XP `.bmp.`

You can use TARGA (as I recall) to avoid some of these issues.

=== @EmilyV99 (discord: Emily) 10/04/2021 08:38

The modern bmp works fine

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:38

I believe that I had to use TARGA when I edited the packfile contents.

=== @EmilyV99 (discord: Emily) 10/04/2021 08:38

It's an indexed png that fails
(replying to @ Moosh "For comparison, when I saved‚Ä¶"): ^

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:40

Indexed PNG is a whole diff beast, but (e.g.) MS Paint BMP files are no longer compliant with the spec for AG4.
PNG as also undergone internal revisions that alpng.lib does not understand.

=== @EmilyV99 (discord: Emily) 10/04/2021 08:41

Aye. So, unfixable until potentially AL5+AL might fix it.

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:41

TARGA TIFF and AIFF have been pretty nuch static for twenty--plus years
Possibly yes

=== @EmilyV99 (discord: Emily) 10/04/2021 08:41

So, 3.0

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:41

for whenever we a toss in our hats and start that update
Anyway, it is a library problem caused b changes to the data format.
##30##

=== @EmilyV99 (discord: Emily) 10/04/2021 08:43

Re-closing
## A and B Bubbles (mostly for A and B quests) (#927)
@ NightmareJames opened this issue on 10/02/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/893799483131977730



=== @ NightmareJames 10/02/2021 10:00

Balance issue, Bubbles are kinda useless in A and B quests because of the fact that you can just set weapons to whatever button and get around them.  We might need new enemies (A and B button jinxes) to counteract that.  Whether by editor or script I don't know (or care), but it needs to be addressed.  Definitely not on the priority side, but noted.  Also, potions need to be able to remove these jinxes OBVIOUSLY

=== @ P-Tux7 10/02/2021 17:00

You can also post this in [#zc-scripting](https://discord.com/channels/876899628556091432/878114935396257852) if you are okay with a script too

=== @ Guinevere 10/02/2021 22:31

i thought jinx bubbles affected the sword/item itself, not the button they use

=== @EmilyV99 (discord: Emily) 10/02/2021 22:32

they do
he's requesting them to affect the button

=== @ Guinevere 10/02/2021 22:34

but he said bubbles are useless for a and b quests because you can get around them by swapping items

=== @EmilyV99 (discord: Emily) 10/02/2021 22:34

aye
he's saying that you can just not have a sword equipped, and thus be able to use both buttons still

=== @ Guinevere 10/02/2021 22:34

ahh

=== @ Guinevere 10/02/2021 22:36

having item jinxes instead of sword jinxes also fixes that
but i can see the utility of button disabling jinxes
(might also be beneficial to have x and y jinxes as well)

=== @ P-Tux7 10/02/2021 22:51

yeah i'm sure the enemy can set a status when you touch it where the status disables said buttons' usage
and vice versa for a blue button bubble
i think button disabling is in zscript right?

=== @ Guinevere 10/03/2021 00:19

ye
you could script it where if link gets jinxed, disable so-and-so buttons
## ‚úÖüîí2.53.1 beta 55 - Crash on exit (#928)
@ Alucard648 opened this issue on 10/02/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893812522539429970



=== @ Alucard648 10/02/2021 10:51

ZC crashes on exiting every time. Windows 10.

![image](https://cdn.discordapp.com/attachments/893812522539429970/893812593901338684/zccrash.png)

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:30

What method are you using to close it?

=== @ Alucard648 10/04/2021 09:34

Close button on top right corner of window.

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:03

Confirm W10 or user/system specific.
What W10 build? @ Alucard648
Does not occur on W7
will test m W10 tablet

=== @ Alucard648 10/04/2021 11:37

Windows 10 corporate edition. Did nit tested on W7. Happed, probably, after either clicking on Load Module, or Select Save  file button.

=== @EmilyV99 (discord: Emily) 10/04/2021 11:39

oh?
It's crashing at the file loader dialog?
...try running it as admin?

=== @ Alucard648 10/04/2021 12:54

File loader works fine, but after using it even once, the error persists on closing ZC. Only redownloading ZC fixes this crash until next using of file loader.

=== @EmilyV99 (discord: Emily) 10/04/2021 12:58

....all I can think of is some security program on your computer is flagging something when you use it once
and doing something that causes a crash

=== @ZoriaRPG (discord: Timelord) 10/04/2021 13:10

could be almost anything
I do not have corporate
and I would need the w10 build number to do real tests

=== @ZoriaRPG (discord: Timelord) 10/04/2021 13:13

Does 2.55 do the same thing and does Exc key exit or menu exit do it?

=== @ZoriaRPG (discord: Timelord) 10/04/2021 13:14

@ Alucard648

=== @ Alucard648 10/05/2021 04:48

Just tested on 2.55 Tried to open ZCL file loader and boom, crash on evry time you close ZC from now.

![image](https://cdn.discordapp.com/attachments/893812522539429970/894808380118532147/winver.png)

=== @arceusplayer11 (discord: Deedee) 01/31/2022 21:32

@ Alucard648 Is this still a problem in the latest nightly posted in [#builds-253](https://discord.com/channels/876899628556091432/876907016642232430) ?

=== @ Alucard648 02/01/2022 16:08

Bugfix confirmed.

=== @arceusplayer11 (discord: Deedee) 02/01/2022 19:20

Okay, good
I recall fixing it in 2.55 but I wasn't sure if I did so for 2.53

=== @ Alucard648 02/02/2022 00:51

2.55 worked fine in this case. Tested 1 week ago.

=== @arceusplayer11 (discord: Deedee) 02/06/2022 20:43

(meta) thread name was changed: ‚úÖüîí2.53.1 beta 55 - Crash on exit
## Can we move under combo handling to the secret combos tab? (#929)
@ FireSeraphim opened this issue on 10/02/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/893984842784575510



=== @ FireSeraphim 10/02/2021 22:16

If we're talking about GUI improvements I think it would a good and sensible idea to move under combos to the secret combos tab

=== @EmilyV99 (discord: Emily) 10/02/2021 22:17

This is smart

=== @ FireSeraphim 10/02/2021 22:17

Ideally in the misc subtab in secret combos

=== @EmilyV99 (discord: Emily) 10/02/2021 22:17

but, it'll wait until we redesign the secret combo dialog
because, we're converting everything to a new dialog system here
so it requires a lot of rewriting of the various pieces

=== @ FireSeraphim 10/02/2021 22:18

I saw your GUI discussions and I felt I ought to contribute in my own way

=== @ FireSeraphim 10/02/2021 22:19

I got maybe a few more GUI improvement ideas to suggest

=== @ FireSeraphim 10/02/2021 22:23

Infact maybe there should be a general gui discussion thread in new-gui-plans because I don't think the feature request category is ideal for throwing gui related idea and bouncing 'em off.
I can sorta visualize how a consolidation of the title and side warp category would like in my head

=== @EmilyV99 (discord: Emily) 10/02/2021 22:24

I just allowed thread creation in [#new-gui-plans](https://discord.com/channels/876899628556091432/888250124483059713)

=== @ NightmareJames 10/02/2021 22:43

I give my blessing to this.  Under Combos can be easily forgotten

=== @ Tsunami Tommy Reload the Shotty 10/03/2021 00:24

I wonder if this also means we'd free up a Hotkey.  F10 or F11, since it'll all be in one screen.
Then again, people use warps so often that having a hotkey that goes directly to that tab will be very helpful, rather than having to click one more time to go to another warp tab.
## ‚ùåüîíChests on Two Tiles Bugged (#930)
@ NightmareJames opened this issue on 10/02/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/893999362844262430



=== @ NightmareJames 10/02/2021 23:14

Copying the pictures from ZC Help in two different scenarios:

=== @ NightmareJames 10/02/2021 23:15

Scenario 1:

![image](https://cdn.discordapp.com/attachments/893999362844262430/893999757536682064/zc_screen00003.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/893999943923146762/zc_screen00004.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894000094737727538/unknown.png)
Combo structure (even when moved around)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894000254029017128/unknown.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894000372555841556/unknown.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894000622431510528/unknown.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894000766786895942/unknown.png)
Scenario 2:

=== @ FireSeraphim 10/02/2021 23:20

I encountered this glitch recently as well when I was testing the ancient aquaducts dungeon in HF. For some reason an offsetted chest I had in the dungeon was already opened despite me never visiting it.

=== @ NightmareJames 10/02/2021 23:20


![image](https://cdn.discordapp.com/attachments/893999362844262430/894000959120896020/unknown.png)
Chest worked fine into this

![image](https://cdn.discordapp.com/attachments/893999362844262430/894001086787112980/zc_screen00008.png)
Continue discussion here @ P-Tux7 , @ mitchfork , @ Shane , @ Matthew , and @EmilyV99 (discord: EmilyV)

=== @ NightmareJames 10/02/2021 23:23

New Quest:  Cambria
https://cdn.discordapp.com/attachments/893999362844262430/894001673880625162/new-Cambria.qst
New Quest:  Cambria (with the other layout)
https://cdn.discordapp.com/attachments/893999362844262430/894001805128781824/new-Cambria2.qst

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:31

@EmilyV99 (discord: EmilyV) Is there any chance that the chest combo changes caused this?

=== @EmilyV99 (discord: Emily) 10/04/2021 08:33

Well, those changes are required for something like this to work at all
So almost certainly related

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:34

two tile chests tend to involve linked combos (copycats)
and this one would IMO be a maor compat issue

=== @EmilyV99 (discord: Emily) 10/04/2021 08:35

To have only half the combo be openable requires the new collision checks

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:35

might be wise for now to add a temp rule and use the old chest code for old quests until you can do a proper fix

=== @EmilyV99 (discord: Emily) 10/04/2021 08:35

That already exists as a compat rule
Old quests always use the old code

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:36

üëç

=== @EmilyV99 (discord: Emily) 10/04/2021 10:40

@ NightmareJames no bug, your setup is wrong
4 combos, in order:

![image](https://cdn.discordapp.com/attachments/893999362844262430/894534477127233566/unknown.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894534511373725706/unknown.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894534549873229864/unknown.png)

![image](https://cdn.discordapp.com/attachments/893999362844262430/894534581519274024/unknown.png)
This setup works fine
(replying to @ NightmareJames ""): ^This image is a notable mistake in yours; that's a closed chest, it should have the chest type and inherent flag, not be (None)
(meta) thread name was changed: ‚ùåüîíChests on Two Tiles Bugged

=== @ NightmareJames 10/04/2021 18:15

Fixed @EmilyV99 (discord: EmilyV) , thank you
## ‚ùåüîíBroken printf() number read (#931)
@ Orithan opened this issue on 10/03/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/894213776222609458



=== @ Orithan 10/03/2021 13:26

printf does not appear to read integer args fed into it properly, or at the very least ``weapon->OriginalTile``. It gives a completely incorrect result back.

```
Spear's original tile is set to 20621, as confirmed by Trace(spear->OriginalTile);
printf("Spear OriginalTile: %i", spear->OriginalTile);
Print result: "Spear OriginalTile: 206211.0000"
```

=== @ Orithan 10/03/2021 13:49

Tested with other numbers
Seems to consistently do it with any number, usually adding another digit to the end.

=== @EmilyV99 (discord: Emily) 10/04/2021 05:04

Presumably `%d` works fine still?
Or does that also give issues

=== @ Orithan 10/04/2021 05:52

Might have to check

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:19

Is `%i` not the same case as `%d`? These are identical in C

=== @EmilyV99 (discord: Emily) 10/04/2021 08:19

Nope

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:19

i for integer d for decimal (versus hexadecimal)

=== @EmilyV99 (discord: Emily) 10/04/2021 08:19

%i is intended to always be integer
While %f is float

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:20

so is %d
always iteger

=== @EmilyV99 (discord: Emily) 10/04/2021 08:20

%d automatically chooses %i or %f here

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:20

oh
err
that's nonstandard

=== @EmilyV99 (discord: Emily) 10/04/2021 08:20

If the value has a non-0 decimal portion
Aye
I believe that's how std did it
I just ported the behavior

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:20

and may break older quests?
Did it?

=== @EmilyV99 (discord: Emily) 10/04/2021 08:21

I recall following it very specifically

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:23

```else if(chr == 'i') return MF_INT;
    else if(chr == 'f') return MF_FLOAT;
    else if(chr == 'd') return MF_NUM;```
Moses..nani.
Well at least *I* didn't do that.

=== @EmilyV99 (discord: Emily) 10/04/2021 08:24

Personally, I like the option, it makes sense with ZScripts odd numbers

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:24

I would have made `i` and `d` the same.If you want `f` use `f`
I suppose
it is just bizarre when you are used to real printf.

=== @EmilyV99 (discord: Emily) 10/04/2021 08:24

Aye, certainly
At least I added mindigits (with a rule for old printf for old script preservation)
Not having `%03d` was painful

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:26

Sure
I don't mind new stuff. You know that.
That's a useful addition.

=== @EmilyV99 (discord: Emily) 10/04/2021 09:57

pffffft
@ Orithan
this bug is on you

=== @ Orithan 10/04/2021 09:57

?

=== @EmilyV99 (discord: Emily) 10/04/2021 09:58

try running this:
```cpp
printf("Spear OriginalTile: %i", spear->OriginalTile);
TraceS("FooBar\n");```
and you might notice what's happening
and, this, in contrast.
```cpp
printf("Spear OriginalTile: %i\n", spear->OriginalTile);
TraceS("FooBar\n");```

=== @EmilyV99 (discord: Emily) 10/04/2021 10:42

(meta) thread name was changed: ‚ùåüîíBroken printf() number read

=== @EmilyV99 (discord: Emily) 10/07/2021 14:42

(Did you notice the issue?)
(To spell it out, you didn't have a newline at the end of your string)
(so it was tracing your number exactly correctly)
(but then, the next thing you traced, appeared on the same line, thus making it look wrong)

=== @ Orithan 10/07/2021 23:58

I was busy doing other things
## Items on Screen Delay Timed Warps (#932)
@ NightmareJames opened this issue on 10/03/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/894295366881665044



=== @ NightmareJames 10/03/2021 18:50

Similar to Secrets, you should be able to collect any dropped/left items before timed warping.  I hope this would not be too hard to implement, even if it isn't a high priority list.  Basically after you pick up the last item (or it disappears) the timer starts
@<role: Developer>

=== @ P-Tux7 10/03/2021 19:17

It's in feature requests, the developers can see it without a ping

=== @ NightmareJames 10/03/2021 19:26

Didn't know that

=== @EmilyV99 (discord: Emily) 10/04/2021 08:15

Aye, creating a thread leaves a message in the base channel linking to it
So anyone will get *1* notification that a new thread exists, but won't get any notifications for messages in the thread unless they join it or are pinged
## üíäüîìConstants for undocumented Item Classes (#933)
@ Orithan opened this issue on 10/04/2021

Status: needs-testing

Labels: ['feature', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/894433315493396490



=== @ Orithan 10/04/2021 03:58

There are a few item classes that are not documented in ``std.zh`` yet. I'm hoping these can be documented later down the track.
These include Lanterns (``Family: 268``). Curiously that is also the family ID reserved for the Ether Medallion itemclass according to std.zh.

=== @ZoriaRPG (discord: Timelord) 10/04/2021 07:42

Hmm Emily added it in-between instead of at the end? Not a huge issue. Ether is probably not going to happen in this version as it needs frozen enemies.

=== @EmilyV99 (discord: Emily) 10/04/2021 07:44

```cpp

    /*
    itype_templast,
    itype_ether, itype_bombos, itype_quake, 
    itype_powder,
    itype_trowel,
    itype_instrument,
    itype_sword180,
    itype_sword_gb,
    itype_firerod,
    itype_scripted_001 = 400, 
    itype_scripted_002,
    itype_scripted_003,
    itype_scripted_004,
    itype_scripted_005,
    itype_scripted_006,
    itype_scripted_007,
    itype_scripted_008,
    itype_scripted_009,
    itype_scripted_010,
    */```
these itemclasses, while reserved, were commented out internally
so I ignored them in adding more
none of these are implemented yet, so they don't need constants reserved yet. I didn't realize std_zh had them

=== @EmilyV99 (discord: Emily) 10/04/2021 07:57

@ Orithan it's only lantern, right?
`IC_ATKRING = 267` is already there, so

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:12

@EmilyV99 (discord: EmilyV) You can  safelyremove the consts for `itype_templast,` and a after it in <std>
Need to bump the std metadata and version info and make a new branch for it though
You pushed your last change to headers w/o doing that (ghost)
so, I am reminding you that these things exist and for <std> it is critical to always update metadata and push as a branch then merge to master
`std_meta.zh`
Also did you add the lantern to *modues*?

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:16

(The module format requires an update with any new item class so that ZQ knows how to label it in the GUI based on the module.)

=== @ Orithan 10/04/2021 08:46

(replying to @EmilyV99 (discord: Emily) "@ Orithan it's o‚Ä¶"): So far only found Lantern

=== @EmilyV99 (discord: Emily) 10/04/2021 08:46

I just re-did the whole list
Now they are in numeric order
Makes it saner
(I'm going to add the number to the dropdowns so it's easy to find if you need it, for, like, init data or something)

=== @ZoriaRPG (discord: Timelord) 10/04/2021 08:58

ü§∑
the were alphabetic
What about the module data?
P.S. Module data fields are in both ZCP and ZQE

=== @ZoriaRPG (discord: Timelord) 10/04/2021 09:01

There is a default str literal for eachgroup and each group is sized; then the actual module loading can overwrite the field. You need to increment the number of string fields for itemclasses, add the literal, and add a loading fieldfor the.zmod

=== @EmilyV99 (discord: Emily) 10/04/2021 09:04

I see the module-related code, and know how it works

=== @ZoriaRPG (discord: Timelord) 10/04/2021 09:07

good enough, then
IDK if you remembered this stuff or not

=== @EmilyV99 (discord: Emily) 10/04/2021 09:11


![image](https://cdn.discordapp.com/attachments/894433315493396490/894511959817461790/unknown.png)
itype number now prints next to all itemclasses (I `sprintf`'d the module name with the index)
(If people end up disliking this, I can always add a config with a checkbox in options)

=== @ZoriaRPG (discord: Timelord) 10/04/2021 09:21

Why not printf their module class name instead  of the number?

=== @ZoriaRPG (discord: Timelord) 10/04/2021 09:23

same code but %s and the numeric index for the string

=== @EmilyV99 (discord: Emily) 10/04/2021 09:25

. . . ?
Is that not exactly what I'm doing?
```cpp
char const* module_str = moduledata.item_editor_type_names[i];
char* name = new char[strlen(module_str) + 7];
sprintf(name, "%s (%03d)", module_str, i);
```

=== @EmilyV99 (discord: Emily) 10/04/2021 09:27

@ZoriaRPG (discord: Timelord)

=== @EmilyV99 (discord: Emily) 10/04/2021 09:35

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) new build, fixes this
(meta) thread name was changed: üíäüîìConstants for undocumented Item Classes

=== @ZoriaRPG (discord: Timelord) 10/04/2021 09:38

Oh oh I didn't understand. I thought it was printing the class number next to the *item* name
This is printing the class number next to the *class* name.
n/m

=== @EmilyV99 (discord: Emily) 10/04/2021 09:40

aye
## ‚úÖüîíMy Custom Peahat 2 enemy flickers out of existence and never fires its projectile while flying (#934)
@ FireSeraphim opened this issue on 10/04/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/894452433844068352



=== @ FireSeraphim 10/04/2021 05:14

exactly what it's says on the tin. I have a custom Peahat 2 enemy that I made and well it's not firing it's project I set for it (I kinda expect it to fire the projectile intermittently while flying) and near the end of it's animation it flickers in and out of existance. I have gone ahead and taken screenshots of the enemy editor on my end so the devs can have an easier time replicating my edit, I've only snapshot values outside of the default for this enemy type.

=== @ FireSeraphim 10/04/2021 05:15


![image](https://cdn.discordapp.com/attachments/894452433844068352/894452689180712980/Screen_Shot_007.PNG)

![image](https://cdn.discordapp.com/attachments/894452433844068352/894452713159540766/Screen_Shot_007.PNG)

![image](https://cdn.discordapp.com/attachments/894452433844068352/894452747078869002/Screen_Shot_010.PNG)

![image](https://cdn.discordapp.com/attachments/894452433844068352/894452794608713728/Screen_Shot_008.PNG)

![image](https://cdn.discordapp.com/attachments/894452433844068352/894452883968360508/Screen_Shot_009.PNG)

=== @EmilyV99 (discord: Emily) 10/04/2021 11:35

@ FireSeraphim try this

https://cdn.discordapp.com/attachments/894452433844068352/894548540251070464/buildpack.zip
(meta) thread name was changed: üíäüîìMy Custom Peahat 2 enemy flickers out of existence and never fires its projectile while flying

=== @ FireSeraphim 10/04/2021 11:49

Just now tested that build, still not shooting the fireball but the animation now works otherwise.

=== @EmilyV99 (discord: Emily) 10/04/2021 11:49

oh, duh, entirely missed the part where it wasn't firing
but the flicker issue was a bug with `4-Frame Flying 8-Dir Firing` animation style

=== @ FireSeraphim 10/04/2021 11:50

I was kinda expecting my peahat 2 to shoot it's fireball while moving and ideally on the last frame where it's all yellow.

=== @EmilyV99 (discord: Emily) 10/04/2021 11:52

Peahats have no weapon firing code

=== @EmilyV99 (discord: Emily) 10/04/2021 11:53

adding such would need to be a feature request... and likely one we would not take up because enemy code is not something we really want to touch right now
Or, you could use an NPC script

=== @ FireSeraphim 10/04/2021 11:55

I see...

=== @EmilyV99 (discord: Emily) 10/04/2021 11:56

```cpp
npc script doFiring
{
    void run()
    {
        while(true)
        {
            if(this->Tile >= this->OriginalTile + 80)
            {
                while(this->Tile >= this->OriginalTile + 80)
                    Waitframe();
                this->Attack();
            }
            Waitframe();
        }
    }
}```
That should work for you
When it hits the end of the 'firing' animation, it will shoot it's set weapon

=== @EmilyV99 (discord: Emily) 10/04/2021 12:04

(meta) thread name was changed: ‚úÖüîíMy Custom Peahat 2 enemy flickers out of existence and never fires its projectile while flying
## More functions for std.zh (#935)
@ Alucard648 opened this issue on 10/04/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/894518715037650954



=== @ Alucard648 10/04/2021 09:38

I read through all included libraries and found nothing. Hoping these 2.53.x functions for reading combo data from FFCs are useful.
```
//These are functions for reading various properties of combos used by FFCs.

//Returns Type of combo used by given FFC.
int GetFFCComboType(ffc f){
    int origcmb = Screen->ComboD[0];
    Screen->ComboD[0] = f->Data;
    int type = Screen->ComboT[0];
    Screen->ComboD[0] = origcmb;
    return type;
}

//Returns Inherent Flag of combo used by given FFC.
int GetFFCComboIFlag(ffc f){
    int origcmb = Screen->ComboD[0];
    Screen->ComboD[0] = f->Data;
    int flag = Screen->ComboI[0];
    Screen->ComboD[0] = origcmb;
    return flag;
}

//Returns Solidity Mask of combo used by given FFC.
int GetFFCComboSolidity(ffc f){
    int origcmb = Screen->ComboD[0];
    Screen->ComboD[0] = f->Data;
    int solid = Screen->ComboS[0];
    Screen->ComboD[0] = origcmb;
    return solid;
}```

=== @EmilyV99 (discord: Emily) 10/04/2021 09:41

unfortunately not for 2.55
changing combos like that could break combo scripts running
and, you can use `combodata` to do this much easier

=== @EmilyV99 (discord: Emily) 10/04/2021 09:43

```cpp
combodata cd = Game->LoadComboData(ffc->Data);
Trace(cd->Type);
Trace(cd->OriginalTile);
Trace(cd->Tile);
Trace(cd->Walk);
Trace(cd->Frames);
Trace(cd->Attributes[0]);```etc etc

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:12

Here is a 2.55 compliant form
```c
//These are functions for reading various properties of combos used by FFCs.

//Returns Type of combo used by given FFC.
int GetFFCComboType(ffc f)
{
    cobodata cd = Game->LoadComboData(f->Data);
    return cd->Type;
}

//Returns Inherent Flag of combo used by given FFC.
int GetFFCComboIFlag(ffc f)
{
    cobodata cd = Game->LoadComboData(f->Data);
    return cd->Flag;
}

//Returns Solidity Mask of combo used by given FFC.
int GetFFCComboSolidity(ffc f)
{
    cobodata cd = Game->LoadComboData(f->Data);
    return cd->Walk;
}```

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:13

I do not tin tat this belongs in `<std>`m but perhaps t might in `<ffcscript>`

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:14

It doesn't need to exist though as it is literaly one line each

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:15

...
```c
//These are functions for reading various properties of combos used by FFCs.

//Returns Type of combo used by given FFC.
int GetFFCComboType(ffc f)
{
    return Game->LoadComboData(f->Data)->Type;
}

//Returns Inherent Flag of combo used by given FFC.
int GetFFCComboIFlag(ffc f)
{
    return Game->LoadComboData(f->Data)->Flag;
}

//Returns Solidity Mask of combo used by given FFC.
int GetFFCComboSolidity(ffc f)
{
    return Game->LoadComboData(f->Data)->Walk;
}    ```
This should work and provide the same result so why make a function when yo can simply do
```int type = Game->LoadComboData(f->Data)->Type;```
@ Alucard648
My tuppence worth

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:22

The 2.53.x version would be...bleah. You'd need a *scratch screen*
to be safe at all
w/o possible bugs

=== @ZoriaRPG (discord: Timelord) 10/04/2021 11:30

Closest way to do it safely in 2.53.x is this IMO:
```c
//These are functions for reading various properties of combos used by FFCs.

//Returns Type of combo used by given FFC.
int GetFFCComboType(ffc f, int scratchmap, int scratchscr)
{
    Game->SetComboData(scratchmap, scratchscr, 0, f->Data);
    return Game->GetComboFlag(scratchmap, scratchscr, 0);
}

//Returns Inherent Flag of combo used by given FFC.
int GetFFCComboIFlag(ffc f, int scratchmap, int scratchscr)
{
    Game->SetComboData(scratchmap, scratchscr, 0, f->Data);
    return Game->GetComboType(scratchmap, scratchscr, 0);
}

//Returns Solidity Mask of combo used by given FFC.
int GetFFCComboSolidity(ffc f, int scratchmap, int scratchscr)
{
    Game->SetComboData(scratchmap, scratchscr, 0, f->Data);
    return Game->GetComboSolid(scratchmap, scratchscr, 0);
}
```
## ‚úÖüîíSprite Editor Misc. Type for animated beam shards (wo flicker) (#936)
@ Guinevere opened this issue on 10/04/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/894554925034516500



=== @ Guinevere 10/04/2021 12:01

The flicker on the animated beam shard sprite misc. type (3) is a lil weird looking to me. So i would like a misc type where it animates without the flicker.

=== @EmilyV99 (discord: Emily) 10/04/2021 12:02

welp
how about
(slow uploads are slow)
try this with type `4`
https://cdn.discordapp.com/attachments/894554925034516500/894555228773437461/buildpack.zip

=== @ Guinevere 10/04/2021 12:03

Okie

=== @ Guinevere 10/04/2021 12:08

It flickers and doesn't animate

=== @EmilyV99 (discord: Emily) 10/04/2021 12:17

oh fuck I made a typo

=== @EmilyV99 (discord: Emily) 10/04/2021 12:37

@ Guinevere
https://cdn.discordapp.com/attachments/894554925034516500/894563865554194442/zelda.exe

=== @ Guinevere 10/04/2021 12:39

ayy it works
it doesn't carry the animation speed but that's fine
looks good

=== @ Guinevere 10/04/2021 12:42

üëç

=== @EmilyV99 (discord: Emily) 10/04/2021 13:29

(meta) thread name was changed: ‚úÖüîíSprite Editor Misc. Type for animated beam shards (wo flicker)
## ‚úÖüîíNew Itemclasses dont appear on the cheat menu (#937)
@ Guinevere opened this issue on 10/04/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/894568019982946306



=== @ Guinevere 10/04/2021 12:53

item classes like the attack rings and lanterns don't appear in the cheat menu's link data.

=== @ Guinevere 10/04/2021 13:00

OOOOH WAIT
they do appear

=== @EmilyV99 (discord: Emily) 10/04/2021 13:01


![image](https://cdn.discordapp.com/attachments/894568019982946306/894569952378507304/unknown.png)
indeed
they aren't *named*

=== @ Guinevere 10/04/2021 13:01

ye
that's the issue
okay

=== @EmilyV99 (discord: Emily) 10/04/2021 13:02

@ Moosh

=== @EmilyV99 (discord: Emily) 10/04/2021 13:14


![image](https://cdn.discordapp.com/attachments/894568019982946306/894573261994733628/unknown.png)
fixed

=== @ZoriaRPG (discord: Timelord) 10/04/2021 13:15

what was the culprit?

=== @EmilyV99 (discord: Emily) 10/04/2021 13:16

```
Emily ‚Äî Today at 9:14 AM
No, you know what it was?
default_itype_strings was declared separately for ZC and ZQ
and I only modified one of them
I just fixed it by moving that declaration to a shared file, so it need only be modified in one place```

=== @EmilyV99 (discord: Emily) 10/04/2021 13:30

(meta) thread name was changed: ‚úÖüîíNew Itemclasses dont appear on the cheat menu
## ‚ùåüîíGame Icons Ignore Their Associated Sprites (#938)
@ SkyLizardGirl opened this issue on 10/05/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/894754416232632391



=== @ SkyLizardGirl 10/05/2021 01:14

I set all 4 of my Game Icons all to Mermaid sprites, but for some reason Link is showing in there instead.
This is in latest Alpha 2.55

=== @ Moosh 10/05/2021 01:27

Did you make a new save after updating them?

=== @ Moosh 10/05/2021 01:28

I believe if you change game icons but don't make a new save it'll continue to use the old set. Think they're tied to the save data and not the quest

=== @ SkyLizardGirl 10/06/2021 00:23

This happened after i got the blue ring.

=== @EmilyV99 (discord: Emily) 10/07/2021 14:44

try setting `reload_game_icons = 1` in `zc.cfg`

=== @EmilyV99 (discord: Emily) 10/11/2021 03:20

@ SkyLizardGirl test again in A99, and try with `reload_game_icons = 1` in zc.cfg

=== @ SkyLizardGirl 10/11/2021 21:38

Oh ok

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:29

@ SkyLizardGirl did this fix your problem?

=== @ SkyLizardGirl 01/17/2022 21:29

I will checks mornings I just woke ups

=== @EmilyV99 (discord: Emily) 02/07/2022 09:50

@ SkyLizardGirl

=== @EmilyV99 (discord: Emily) 02/13/2022 05:18

Closing report as abandoned by user
(meta) thread name was changed: ‚ùåüîíGame Icons Ignore Their Associated Sprites
## ‚ùåBetter Quest Triforce count handling (#939)
@ FireSeraphim opened this issue on 10/05/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/894770848030928907



=== @ FireSeraphim 10/05/2021 02:19

The idea just now occurred to me, why are still using two to four checkboxes in QR to determine the amount of triforce pieces in a quest? I believe it would be better to have as a typeable number count for triforce pieces in a manner similiar to how map count is now handled. Heck it can even be moved to the same tab that mapcount and the like now call home.

=== @ FireSeraphim 10/05/2021 02:21

It would certainly around more options in quest making, such as a quest that require 12 or even 16 triforce pieces!

=== @ Alucard648 10/05/2021 04:51

Or even multiple McGuffin sets. LttP, LbtW, Twilight Princess etc...

=== @ P-Tux7 10/05/2021 05:25

This would also go good with a Catch All in Triforce Check rooms
With an option to require all pieces up to the specified #, or only a certain amount of pieces equal to the specified #
Like a need 1st 4 triforce pieces room, or need any 4 triforce pieces room

=== @ P-Tux7 10/05/2021 05:28

Though I would accept a scripted solution

=== @ FireSeraphim 10/05/2021 23:19

@EmilyV99 (discord: EmilyV) https://cdn.discordapp.com/attachments/888250462485245952/894971370994302986/unknown.png That last panel with only eight triforce pieces is a huge misstep in my eyes

=== @ FireSeraphim 10/05/2021 23:21

Why limit it to eight and therefore lock out the possibility of having more than eight triforce pieces/macguffins?

=== @EmilyV99 (discord: Emily) 10/05/2021 23:23

There are only 8 bits in init data allocated to storing those
so if I want to expand that, I actually have to expand init data
which currently would break changes Dimi is trying to make with sideview water

=== @ FireSeraphim 10/06/2021 00:00

I see...

=== @ P-Tux7 10/06/2021 02:24

again a scripted array would be so much easier
and you wouldn't need to care about init data as you wouldn't start with anything

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:38

the script needed for this is so simple that internal handling  is super extraneous for the limited number of games that would use it imo

=== @ FireSeraphim 07/22/2022 09:44

I kinda need this now, especially since I have more than eight triforce pieces

=== @EmilyV99 (discord: Emily) 07/22/2022 09:50

(meta) thread name was changed: ‚ùåBetter Quest Triforce count handling
## üíäüîìInvalid subscreen item slots being selected after writing to ABXY buttons (#940)
@ Moosh opened this issue on 10/05/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/894889522251317258



=== @ Moosh 10/05/2021 10:11

After writing to ABXY, upon opening the subscreen, the subscreen selector selects an invalid item position. Sometimes it's invisible sometimes it's where an item I removed via script used to be. I am selecting nothing and I must scream. This is incredibly annoying for multiple character systems where I want it to remember who had what items

https://cdn.discordapp.com/attachments/894889522251317258/894889577058279424/ItemSelectorBug.qst

https://cdn.discordapp.com/attachments/894889522251317258/894889670700335114/ItemBug.zs
Here's a quest and script file demonstrating the bug. L and R swap characters.

=== @ Moosh 10/05/2021 11:22

Also noted another oddity, in that newly added items are added to Y and X buttons before B and A. That priority seems backwards

=== @ Moosh 10/09/2021 05:38

Trying to figure this one out again, to at least be able to sidestep it, it appears when the item position goes invisible the cursor is selecting item 0. Or at least something that assigns item 0 when I put it on a button
That's item ID 0, not subscreen item position 0

=== @EmilyV99 (discord: Emily) 02/12/2022 08:43

I don't think the `->ItemA` `->ItemB` etc are really built to work well with the engine subscreen
they *override* your item selection

=== @ Moosh 02/12/2022 08:50

They've been working well after I overwrote the default subscreen entirely. But that subscreen was not playing kindly with giving and taking items from the player

=== @EmilyV99 (discord: Emily) 02/12/2022 08:52

the engine subscreen is a fucking mess
everything about it is bad

=== @ Moosh 02/12/2022 08:56

It's pretty cringe, yeah
Did scrolling functions for X and Y ever get added?
That always worked for selecting items pre 2.55
And if setting them directly will always have bugs with the engine default, might as well. Not everybody has the patience to reinvent the wheel sadly

=== @EmilyV99 (discord: Emily) 02/12/2022 09:18

...nope, don't seem to exist
`SelectXWeapon` and `SelectYWeapon` need to be added

=== @EmilyV99 (discord: Emily) 02/13/2022 05:04

@ Moosh ```
void SelectAWeapon(int dir);
void SelectBWeapon(int dir);
void SelectXWeapon(int dir);
void SelectYWeapon(int dir);
    * Changes the A/B/X/Y button item (respectively), in the same manner the engine subscreen cursor
    * moves. DIR_RIGHT/DIR_LEFT are equivalent to how quickswap cycles.
    * A/X/Y versions do nothing if the QR allowing items to be set for that button is not enabled.```
(first 2 are unchanged, latter two built to match)

=== @EmilyV99 (discord: Emily) 02/13/2022 05:06

(meta) thread name was changed: ‚ùìInvalid subscreen item slots being selected after writing to ABXY buttons

=== @arceusplayer11 (discord: Deedee) 02/14/2022 18:41

(replying to @ Moosh "Trying to figure this one out‚Ä¶"): It's cause of this
```Awpn = value/10000;
            game->awpn = value/10000;``` this is a simplification of what ->ItemA does
Awpn is your, well, A button weapon

=== @arceusplayer11 (discord: Deedee) 02/14/2022 18:43

game->awpn, on the other hand, is the subscreen position of what you're selecting

=== @arceusplayer11 (discord: Deedee) 02/14/2022 18:44

the problem here is getting an awpn from the A, well, weapon
cause remember, the subscreen has weird hybrid item classes

=== @arceusplayer11 (discord: Deedee) 02/14/2022 20:20

actually, found a simple solution, even if it's not the best: cause there's a way to convert slots to a weapon type, and there's only 256 slots, so I can loop through all the slots and return the first one that matches the current weapon

=== @arceusplayer11 (discord: Deedee) 02/14/2022 20:21

it could be more optimized if I knew how to get the count of used subscreen items, because I doubt there's a lot of quests that use all the subscreen slots
I also put in a "if ItemX != value you're trying to set it to"
just so calling it every frame won't lag the game out like Link->Item[]
(meta) thread name was changed: üíäüîìInvalid subscreen item slots being selected after writing to ABXY buttons

=== @arceusplayer11 (discord: Deedee) 02/14/2022 20:24

@EmilyV99 (discord: EmilyV) if you'd rather find a more elegant solution, feel free

=== @EmilyV99 (discord: Emily) 02/15/2022 03:16

Sounds pretty clean

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:04

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)  @ Moosh

=== @ Moosh 02/16/2022 04:06

Oh boy, it's been a long while since my quest was using any part of the vanilla active subscreen.

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:07

there is a flaw, in that the cursor doesn't actually save whether the last item you selected was an A button, a B Button, etc
Technically has been there since 2.50, plan on fixing it at some point

=== @ Moosh 02/16/2022 04:07

Does it differentiate?
Like the selection cursor doesn't care what it's selecting until you press a button to assign it doesn't it?

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:08

Currently, it just loops through B, A, and I forget the order of X and Y, in that order, and grabs the first one to set the cursor to when you open the subscreen

=== @ Moosh 02/16/2022 04:09

Gotcha. Makes sense

=== @ Moosh 02/16/2022 04:10

~~Now to make a puzzle quest involving activating the bugfix to access otherwise inaccessible subscreen regions contained in closed item loops~~

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:11

you can notice it in stuff like Isle of Rebirth in 2.50.2 or whichever where you have, say, the candle on B, and then you go to select the sword on A; since the sword was the most recent thing you selected, it really should be on the sword when you open the subscreen, but it defaults to the candle cause that's what's on your B button and B button gets priority
but that's an unrelated bug to this one; just another flaw with the subscreen I need to fix at some point

=== @ Moosh 02/16/2022 04:12

A little funky but not as bad as what it was doing before

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:12

ye

=== @ Moosh 02/16/2022 04:12

And for my purposes, goddamn I have fallen in love with DMap subscreen scripts

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:12

it'll at least no longer select invalid items, and will actually try to grab your selected items
subscreen scripts are great

=== @ Moosh 02/16/2022 04:13

Recently added a fourth subscreen tab with three sub tabs. And was momentarily concerned for my ZASM usage until I remembered that one script in 2.55 can hold as much ZASM as the entire 2.53 script buffer ü§¶

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:14

lmao yup
it can hold expontentially more ZASM

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:17

(10000 times more ZASM, to be precise)
(all because we fixed a dumb typo error thing)
## SelectXWeapon() and SelectYWeapon() functions (#941)
@ Moosh opened this issue on 10/05/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/894904425582301194



=== @ Moosh 10/05/2021 11:10

Complete the set. Even if some of the uses for this function are outdated, the functions themselves still have occasional uses. If I want to cycle items by some method except for the quest rule, there's just no convenient way to do that.

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:24

`SetItemSlot(int itm_id, int button, int force);` replaces al of the old stuff and is internal/fast.
```int SetItemSlot(int itm_id, int button, int force);                
 * This allows you to set Link's button items without binary operation with options for forcing them.
 * Use the constants ITM_REQUIRE_* and ITM_SLOT_* from <std> when passing values into this function. 
```

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:28

You also have direct r.w of `ItemA`, `ItemB` , `ItemX` a nd `ItemY`

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:29

Adding <std> ZASM would literally be far slower. What is the desired benefit?

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:30

imo those old functions are now useless and should be avoided rather than expanded and encouraged

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:35

oh
that is the dir based one
fine
I can see this being valid
## ‚úÖüîíBombs are not counting correctly. (#942)
@ SkyLizardGirl opened this issue on 10/06/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/895105115311202335



=== @ SkyLizardGirl 10/06/2021 00:28

I have programed 15 bombs you start the game with, but only 3 keep ending up in my inventory when i pick up bomb ammo.  This happens a second time when I pick up the Super bomb.  I have super bombs as their own selectable items next to normal bombs.   In the Alphas before what i had setup worked absolutely fine.   When i pick up a super bomb, my bombs are reduced back to 3 and i have to pick up the 15 bomb increase item again.   Bombs and Super Bombs share the same bag.  I think this should be undone for super bombs to have their own bag item.

=== @ SkyLizardGirl 10/06/2021 00:29

It messes up when fused with Normal bombs is why.
Anyways, there should be an option to undo this.

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:21

Is bthis also in A95?

=== @arceusplayer11 (discord: Deedee) 10/26/2021 16:02

@ SkyLizardGirl need a bit more info on this

=== @ SkyLizardGirl 10/27/2021 03:10

Super bombs think they are infinite if I pick them up
And my regular bombs go down to 3
.
Because of a technical issue I switched my bombs around with Super bombs
Because the dungeons in my game use that
So Regular bombs are the super bombs
And super bombs are regular bombs.
But the stats I changed to what they are supposed to be for both.
In game
I have done this from the start of my games development
It would be impossible to undo everything on all the maps just to put bomb areas at default
But my bomb counters are not counting the bombs correctly
When I pick them up
This was not a problem until like alpha 2.55 Alpha 97 - then this started to do this
I will check them too now also

=== @arceusplayer11 (discord: Deedee) 10/27/2021 03:25

Hmm
could you send your quest over so I can see what you're doing?

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:16

Do you have the superbomb multiplier set properly? This seemsike a qst design fault and not an engine fajlt.

=== @arceusplayer11 (discord: Deedee) 10/27/2021 14:59

well I have no way of knowing that until I see the quest
but even then, I still need it so I can recreate the bug circumstances

=== @ SkyLizardGirl 10/28/2021 00:49

Hold on
i gotta get it ready to send

=== @ SkyLizardGirl 10/28/2021 01:29

..
My bombs are acting weird now.
i am supposed to have 15 of both but they are accessed wrong.
its uploading now.

=== @ SkyLizardGirl 10/28/2021 01:31

Also when i use either they think they are counting the other.
I put the Normal Bomb and Super Bomb outside the House when you first start the game.

=== @ SkyLizardGirl 10/28/2021 01:32


https://cdn.discordapp.com/attachments/895105115311202335/903093898149253180/Mystical-Harps_T.L.O.Z..qst

=== @arceusplayer11 (discord: Deedee) 02/09/2022 03:23

(replying to @ SkyLizardGirl "Also when i use either they t‚Ä¶"): your super bombs are set to be a bomb item class and your bombs are set to be a super bomb item class
your subscreen counter for super bombs is checking bomb ammo and your subscreen counter for bombs is checking super bombs

=== @arceusplayer11 (discord: Deedee) 02/09/2022 03:28

(replying to @ SkyLizardGirl "Because of a technical issue‚Ä¶"): oh, wait, I see
hmm

=== @arceusplayer11 (discord: Deedee) 02/09/2022 03:33

@ SkyLizardGirl
![image](https://cdn.discordapp.com/attachments/895105115311202335/940812731257339904/unknown.png)
your super bombs are still only giving you super bombs, when they should be giving you bombs (cause you switched the two) (same problem with regular bombs)

=== @arceusplayer11 (discord: Deedee) 02/09/2022 08:33

@ SkyLizardGirl also, I think you have super bombs set to only be used by ariana
229 is Super Bombs
![image](https://cdn.discordapp.com/attachments/895105115311202335/940888214296727632/unknown.png)

=== @arceusplayer11 (discord: Deedee) 02/09/2022 08:35

find this line in your script and comment it out if you want both Link and Ariana to use Super Bombs
A script is taking away your super bombs

=== @arceusplayer11 (discord: Deedee) 02/09/2022 08:41

(meta) thread name was changed: ‚ùìüîìBombs are not counting correctly.

=== @ SkyLizardGirl 02/09/2022 09:39

Oh ok I will look
Thank you

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:05

@ SkyLizardGirl did you check, did that fix it

=== @ SkyLizardGirl 02/16/2022 05:38

Yes
Thank you.*
I got it.
it works now

=== @arceusplayer11 (discord: Deedee) 02/16/2022 15:51

(meta) thread name was changed: ‚úÖüîíBombs are not counting correctly.
## üîìWeapons Move Offscreen is buggy (#943)
@ FireSeraphim opened this issue on 10/06/2021

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/895222731581321216



=== @ FireSeraphim 10/06/2021 08:15

been testing the newest build and I'm running into a couple of "interesting" (in the chinese sense of the word) problems. I have a magic shield and fireballs from the zora still make the correct metallic ding noise when hitting link's shield but afterwords they keep on going. I believe this problem is also connected to another one where Link can seemingly only fire swordbeams once per screen.

=== @EmilyV99 (discord: Emily) 10/06/2021 14:57

*what* and *what*
fuuuck

=== @EmilyV99 (discord: Emily) 10/06/2021 15:38

I'd almost expect the first one to be part of the weapon unblockable flagset I added
....does that occur in A97?

=== @ P-Tux7 10/06/2021 20:03

(replying to @ FireSeraphim "been testing the newest build‚Ä¶"): worn-out sword

=== @ FireSeraphim 10/07/2021 00:19

@EmilyV99 (discord: EmilyV) Yes. I downloaded and tested both yesterday

=== @ FireSeraphim 10/07/2021 05:46

Any progress on fixing the bug I mentioned?

=== @EmilyV99 (discord: Emily) 10/07/2021 13:11

OK, started testing
1. I can fire multiple swordbeams, so I don't seem to be able to replicate that issue
2. Zora fireballs clink against my magic shield and die
so uh
@ FireSeraphim any chance you can provide a quest where this happens?

=== @ FireSeraphim 10/07/2021 13:17

I'm sending you the latest copy of my quest via DM. That's where it's happening for me/

=== @EmilyV99 (discord: Emily) 10/07/2021 13:25

So, the sword beam

![image](https://cdn.discordapp.com/attachments/895222731581321216/895663166674067476/unknown.png)
You have it set so weapons can go offscreen thanks to that compat rule
.....so, the sword beam is never dying.
And you can't have more than one alive at once

=== @ FireSeraphim 10/07/2021 13:26

I don't think I touched that setting. The shield thing is still disconcerting though

=== @EmilyV99 (discord: Emily) 10/07/2021 13:27

what screen will I find a Zora on
oh
right there
ummm
the fireball dies on the shield
just as expected

=== @ FireSeraphim 10/07/2021 13:28

Wha?

=== @EmilyV99 (discord: Emily) 10/07/2021 13:28

oh
it's the *same QR*
causing both issues
@ZoriaRPG (discord: Timelord) Do you at all recall what `Weapons Can Go Out of Bounds (Offscreen)` was compat for?
because it seems to cause a number of issues
(For now @ FireSeraphim just uncheck the rule. Generally, you don't want most compat rules on if you can help it)

=== @ FireSeraphim 10/07/2021 13:30

Aye. I think I put it on to prevent the old "hiding in the dungeon's doorways to avoid enemy projectiles" tactic

=== @EmilyV99 (discord: Emily) 10/07/2021 13:31

Generally speaking compat rules should be off if you can help it, as usually they are just enabling old bugs
like this one you have on

![image](https://cdn.discordapp.com/attachments/895222731581321216/895664743631704074/unknown.png)
light force magic ring doubles as magic wallet
because, it used to, for some reason, because bug
....some of them make sense to leave on, though, until you have a reason to remove them

![image](https://cdn.discordapp.com/attachments/895222731581321216/895665074918801428/unknown.png)

=== @ FireSeraphim 10/07/2021 13:33

To be fair thought the tileset in my quest started out as FYS and I think it had a few of those rules enabled since FYS was made in a older version of ZC

=== @EmilyV99 (discord: Emily) 10/07/2021 13:33

unchecking THOSE would require adding `16` to the width/height of every string you have in the string editor
which would be tedious
so unless you have a reason that you need the bug fixed there, leaving those on is generally ok
(If you are just starting a new project I always recommend disabling them at the *start*)

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:34

@EmilyV99 (discord: EmilyV) It is for scrolling engine scripts.

=== @EmilyV99 (discord: Emily) 10/07/2021 13:34

What was it's compat purpose
it's in compat rules

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:34

Oh

=== @EmilyV99 (discord: Emily) 10/07/2021 13:34

was that placement a mistake?

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:34

that was a2.50.0 compatibility thing
weapons w/o colision can go off screen

=== @EmilyV99 (discord: Emily) 10/07/2021 13:35

no
that's this one

![image](https://cdn.discordapp.com/attachments/895222731581321216/895665651140673626/unknown.png)

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:35

2.50.0 stuff broe in 250.1 and that wasaddedto fix those games
it's in the historic changelog

=== @EmilyV99 (discord: Emily) 10/07/2021 13:36

`"Weapons Can Go Out of Bounds (Offscreen)", qr_WEAPONSMOVEOFFSCREEN`
`"Weapons With No Collision Detection Move Offscreen", qr_OFFSCREENWEAPONS`

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:36

I added the OoB rule for scrolling

=== @ FireSeraphim 10/07/2021 13:36

out of curiousity what is "New Water Collision" and "New Shallow Water Detection"?

=== @EmilyV99 (discord: Emily) 10/07/2021 13:36

Those are Dimi's work

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:37

but the other one is a legit compat rule added by Saf or Gleeok back around 2011/12

=== @EmilyV99 (discord: Emily) 10/07/2021 13:37

I'd recommend all of these be checked @ FireSeraphim
![image](https://cdn.discordapp.com/attachments/895222731581321216/895666091555172392/unknown.png)
so it seems like `"Weapons Can Go Out of Bounds (Offscreen)"` should not be a compat rule
and also bugs the shit out of things anyway
fun times

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:38

`* Added a compatibility rule allowing weapons with collision detection disabled to move offscreen. ( Saffith, 2015-06-12 13:19:44 )`
`"Weapons Can Go Out of Bounds (Offscreen)"`
that shouldbe a weapon rule

=== @EmilyV99 (discord: Emily) 10/07/2021 13:39

aye, that's where I was moving it

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:39

its hould not be enabled by default

=== @EmilyV99 (discord: Emily) 10/07/2021 13:39

and I'm giving it `"Weapons Can Go Out of Bounds (Buggy, don't use)"` for now, considering it clearly isn't fit to be used in its' current state

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:39

it is absolutely needed for games with Z3 scrolling

=== @EmilyV99 (discord: Emily) 10/07/2021 13:39

It shouldn't be a QR, though
it should be a flag on weapons
set by script

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:40

it changes the entire mechanic that ZC uses for weapon destruction
and it is global

=== @EmilyV99 (discord: Emily) 10/07/2021 13:40

it skips one switch statement
in one file
in weapons.cpp

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:41

I now whatit does

=== @EmilyV99 (discord: Emily) 10/07/2021 13:41

it could certainly be done better as a weapon flag
so you can set each weapon to be offscreen or not

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:41

four of my games happen to rely on it

=== @EmilyV99 (discord: Emily) 10/07/2021 13:41

aye, can't remove the rule now, it needs to stay for compat purposes
but it should never have been added as a rule in the first place

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:42

feel free to add a separate flag

=== @EmilyV99 (discord: Emily) 10/07/2021 13:42

for now, renaming the rule
`"Weapons Move Offscreen (Buggy, use at own risk)"`

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:42

but I needed *all* weapons to be able to go offscreen 
 and  back into view.

=== @EmilyV99 (discord: Emily) 10/07/2021 13:43

and moving it to `weapons` rules

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:43

it isn't buggy but it also isn't intended to be used in normal quests ü§∑

=== @EmilyV99 (discord: Emily) 10/07/2021 13:43

Enabling the rule causes buggy behavior
and without a warning like that
we will get bug reports
like this one

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:44

must have forgotten a shieldcanblock check, as that was not intended
leave it live as a bug report, and I will loo into it in the future

=== @EmilyV99 (discord: Emily) 10/07/2021 13:45

(meta) thread name was changed: Weapons Move Offscreen is buggy
(meta) thread name was changed: üîìWeapons Move Offscreen is buggy

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:46

a weapon hitting a shield or an enemy should maek it wDead

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:23

(replying to @ FireSeraphim "out of curiousity what is "Ne‚Ä¶"): Late response, but New Water Collision changes water collision internally (honestly, it should be a compat rule instead of a combo rule), and this change I believe is required for both the new Effects square, Bridge combos, and letting you use FFCs as land, as well as some combination of the 4 quest rules that follow (I don't know off the top of my head)

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:24

New Shallow Water Collision changes Shallow Water to use the same detection it uses to check for regular water, so you can no longer be swimming and have the shallow water graphic display under you. It's also helpful for if you want to use poisonous shallow water.

=== @ P-Tux7 10/29/2021 17:49

ffcs as land? you mean you can have moving platform FFCs now?
of course the moving link with it would have to be scripted but still

=== @arceusplayer11 (discord: Deedee) 10/29/2021 19:50

Okay, so that behavior was... sorta implemented before
As in you can walk onto it and not start swimming
but uh, once you're already swimming you can't get off onto the ffc
## NPC Strings (#944)
@ZoriaRPG (discord: Timelord) opened this issue on 10/06/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/895320080576053298



=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:42

Something that I panned to add is a vector of npc strings to mapscr. By using a vector it uses space only if people add strings with the caveat tat you must add them starting with npc 0 and canna sip any. Used for friendly npcs that would always spawn, so it should be fine.

=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:47

Note that some mapscr elements already use vector storage for this reason.
## Multple Screen items (#945)
@ZoriaRPG (discord: Timelord) opened this issue on 10/06/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/895320737450184735



=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:44

Similar to npc strings a vector of items that you can reference on any mapscr. Again wen not used t will be an empty vector you you need only save a byte of the vector size in saving mapscrs ten write out the vector per mapscr if it is not empty.
## Push and Life Hero Sprites (#946)
@ZoriaRPG (discord: Timelord) opened this issue on 10/06/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/895322291519516713



=== @ZoriaRPG (discord: Timelord) 10/06/2021 14:51

What it says on the tin. Add sprites of Link pushing and Link Lifting objects, including pull/stress sprites. See Z3. With these I can add lifting objects reasonably sanely.
## ‚úÖüîíItemdata script timing inconsistency (#947)
@ Moosh opened this issue on 10/07/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/895584589941202964



=== @ Moosh 10/07/2021 08:13

Itemdata scripts have a 1 frame delay after the first frame of operation when called from an item. This delay is not present when using itemdata->RunScript().

=== @ Moosh 10/07/2021 08:14

```itemdata script Test{
    void run(){
        for(int i=0; i<10; ++i){
            Trace(i);
            Waitframe();
        }
    }
}```
You can use this script with frame advance to see the behavior in action. On the second frame the script runs it will not print anything and then will resume printing where it left off on the third.

=== @ Moosh 10/07/2021 08:22

https://discord.com/channels/876899628556091432/878114935396257852/895572758325510154
Here's a link to the full discussion I had with Zoria on the issue.

=== @ZoriaRPG (discord: Timelord) 10/07/2021 09:24

Try replacing these functions with the ones in this file. It may solve it and has cleaner logic.

=== @ZoriaRPG (discord: Timelord) 10/07/2021 09:43


https://cdn.discordapp.com/attachments/895584589941202964/895607345911046154/itemScriptEngine.cpp
Rearranged some more logic and added some extra sanity checks.

=== @ZoriaRPG (discord: Timelord) 10/07/2021 09:46

@EmilyV99 (discord: EmilyV) Please try a build with this replacing `bool FFScript::itemScriptEngine()` and `bool FFScript::itemScriptEngineOnWaitdraw()` in `ffscript.cpp` and LMK if it fixes this frame No 2 bug without introducing new issues.

=== @ZoriaRPG (discord: Timelord) 10/07/2021 09:55

Hmm, no
still skips a frame

=== @ZoriaRPG (discord: Timelord) 10/07/2021 09:56

Ahha
fixedlocally
change
In `zelda.cpp`, move this
```if ( !FFCore.system_suspend[susptITEMSCRIPTENGINE] )  FFCore.itemScriptEngine(); //run before lweapon scripts
    ```
under
```c
if ( !FFCore.system_suspend[susptLINK] )
    {
        for(int i = 0; i < (gofast ? 8 : 1); i++)
        {
            #if LOGGAMELOOP > 0
        al_trace("game_loop is at: %s\n", "if(Link.animate(0)\n");
        #endif
            if(Link.animate(0))
            {
            if(!Quit)
            {
                //set a B item hack
                //Bwpn = Bweapon(Bpos);
                Quit = qGAMEOVER;
            }
            
            return;
            }
            
            checklink=false;
        }
    }```
so you want this
```c
if ( !FFCore.system_suspend[susptLINK] )
    {
        for(int i = 0; i < (gofast ? 8 : 1); i++)
        {
            #if LOGGAMELOOP > 0
        al_trace("game_loop is at: %s\n", "if(Link.animate(0)\n");
        #endif
            if(Link.animate(0))
            {
            if(!Quit)
            {
                //set a B item hack
                //Bwpn = Bweapon(Bpos);
                Quit = qGAMEOVER;
            }
            
            return;
            }
            
            checklink=false;
        }
    }
    
    if ( !FFCore.system_suspend[susptITEMSCRIPTENGINE] )  FFCore.itemScriptEngine(); //run before lweapon scripts
    ```
that was the timing issue @ Moosh h

=== @ZoriaRPG (discord: Timelord) 10/07/2021 10:01


![image](https://cdn.discordapp.com/attachments/895584589941202964/895611670389461012/itemframe.png)

=== @ Moosh 10/07/2021 10:01

Would this further complicate the script timings as indicated in the doc?

=== @ZoriaRPG (discord: Timelord) 10/07/2021 10:01

I did not test all of this with passive items,but I believe that the new logicis better
IDK
passive items can be separated out into their own functions and run prior to Link which would be best
needs a new suspendtype
a compat rule to suspend both passive and active items with general item suspend and some minor rewrites
this change alone may need a compat rule'Old Itemdata Script Timing' for older 2.55 quests

=== @ Moosh 10/07/2021 10:04

Hmm...according to ZScript_Timing.txt, item action scripts should already be under Link.animate()?

=== @ZoriaRPG (discord: Timelord) 10/07/2021 10:05

but passive items should ultimately run before Link
this only affects 2nd frame or later of active items and when passive item scripts begin
the latter is a possible problem
the first frame of an actively used item still occurs in Link.animate
this also changes the timing for when itemdata->Runscript happens including its first frame.
so that may also need to be broken off and run with passive items

=== @ZoriaRPG (discord: Timelord) 10/07/2021 10:09

I found the problem and documented what needs to be done
**1.** need a suspend type for passive items with a rule to link that to suspending items in general

=== @ZoriaRPG (discord: Timelord) 10/07/2021 10:10

**2. **need a second function pair just for passive and runscript items
placed before Link in zelda.cpp
**3.** the core `itemscriptengine`  otherwise must be after Link in zelda.cpp

=== @ZoriaRPG (discord: Timelord) 10/07/2021 10:13

**4.**Test the revised functions with passive stuff.
**5. **Test it all with waitdraw.

=== @EmilyV99 (discord: Emily) 10/07/2021 12:50

So, what particular reason do passive items run *before* link for?
Would it not make sense to have all items run at the same time?

=== @EmilyV99 (discord: Emily) 10/07/2021 12:58

You missed an important `if ( !itemScriptsWaitdraw[q] ) continue;` in your code block

=== @EmilyV99 (discord: Emily) 10/07/2021 13:06

@ Moosh ?

https://cdn.discordapp.com/attachments/895584589941202964/895658273477361704/zelda.exe

https://cdn.discordapp.com/attachments/895584589941202964/895658282289594428/zquest.exe

=== @EmilyV99 (discord: Emily) 10/07/2021 13:14

(meta) thread name was changed: üíäüîìItemdata script timing inconsistency

=== @ Moosh 10/07/2021 13:20

Don't have time to thoroughly test but it appears to be working at a glance

=== @EmilyV99 (discord: Emily) 10/07/2021 13:45

@ZoriaRPG (discord: Timelord) ```Emily ‚Äî Today at 8:50 AM
So, what particular reason do passive items run before link for?
Would it not make sense to have all items run at the same time?```

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:47

(replying to @EmilyV99 (discord: Emily) "So, what particular reason do‚Ä¶"): passive scripts that affect his tile

=== @EmilyV99 (discord: Emily) 10/07/2021 13:47

. . . and? Why would they need to run before his animate for that?

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:47

such as armour

=== @EmilyV99 (discord: Emily) 10/07/2021 13:47

They'd need to run before his draw
but I see no reason they'd need to run before his animate for that

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:48

his draw is inside his animate

=== @EmilyV99 (discord: Emily) 10/07/2021 13:49

....no it isn't??

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:54

Look at game_loop
where is it originating  if not from Link.animate()

=== @EmilyV99 (discord: Emily) 10/07/2021 13:54

`if ( !FFCore.system_suspend[susptSCREENDRAW] ) draw_screen(tmpscr);`
from `draw_screen`
```cpp
    if(!(get_bit(quest_rules,qr_LAYER12UNDERCAVE)))
    {
        if(showlink &&
                ((Link.getAction()==climbcovertop)||(Link.getAction()==climbcoverbottom)))
        {
            if(Link.getAction()==climbcovertop)
            {
                cmby2=16;
            }
            else if(Link.getAction()==climbcoverbottom)
            {
                cmby2=-16;
            }
            
            decorations.draw2(scrollbuf,true);
            Link.draw(scrollbuf);
            decorations.draw(scrollbuf,true);
            int ccx = (int)(Link.getClimbCoverX());
            int ccy = (int)(Link.getClimbCoverY());
            
            overcombo(scrollbuf,ccx,ccy+cmby2+playing_field_offset,MAPCOMBO(ccx,ccy+cmby2),MAPCSET(ccx,ccy+cmby2));
            putcombo(scrollbuf,ccx,ccy+playing_field_offset,MAPCOMBO(ccx,ccy),MAPCSET(ccx,ccy));
            
            if(int(Link.getX())&15)
            {
                overcombo(scrollbuf,ccx+16,ccy+cmby2+playing_field_offset,MAPCOMBO(ccx+16,ccy+cmby2),MAPCSET(ccx+16,ccy+cmby2));
                putcombo(scrollbuf,ccx+16,ccy+playing_field_offset,MAPCOMBO(ccx+16,ccy),MAPCSET(ccx+16,ccy));
            }
        }
    }
    ```
```cpp
if(get_bit(quest_rules,qr_LAYER12UNDERCAVE))
{
    if(showlink &&
            ((Link.getAction()==climbcovertop)||(Link.getAction()==climbcoverbottom)))
    {
        if(Link.getAction()==climbcovertop)
        {
            cmby2=16;
        }
        else if(Link.getAction()==climbcoverbottom)
        {
            cmby2=-16;
        }
        
        decorations.draw2(scrollbuf,true);
        Link.draw(scrollbuf);
        decorations.draw(scrollbuf,true);
        int ccx = (int)(Link.getClimbCoverX());
        int ccy = (int)(Link.getClimbCoverY());
        
        overcombo(scrollbuf,ccx,ccy+cmby2+playing_field_offset,MAPCOMBO(ccx,ccy+cmby2),MAPCSET(ccx,ccy+cmby2));
        putcombo(scrollbuf,ccx,ccy+playing_field_offset,MAPCOMBO(ccx,ccy),MAPCSET(ccx,ccy));
        
        if(int(Link.getX())&15)
        {
            overcombo(scrollbuf,ccx+16,ccy+cmby2+playing_field_offset,MAPCOMBO(ccx+16,ccy+cmby2),MAPCSET(ccx+16,ccy+cmby2));
            putcombo(scrollbuf,ccx+16,ccy+playing_field_offset,MAPCOMBO(ccx+16,ccy),MAPCSET(ccx+16,ccy));
        }
    }
}

```
```cpp
if(showlink && ((Link.getAction()!=climbcovertop)&&(Link.getAction()!=climbcoverbottom)))
{
    Link.draw_under(framebuf);
    
    if(Link.isSwimming())
    {
        decorations.draw2(framebuf,true);
        Link.draw(framebuf);
        decorations.draw(framebuf,true);
    }
}
```
```cpp
if(showlink && ((Link.getAction()!=climbcovertop)&& (Link.getAction()!=climbcoverbottom)))
{
    mblock2.draw(framebuf);
    
    if(!Link.isSwimming())
    {
        if(Link.getZ()>0 &&(!get_bit(quest_rules,qr_SHADOWSFLICKER)||frame&1))
        {
            Link.drawshadow(framebuf,get_bit(quest_rules,qr_TRANSSHADOWS)!=0);
        }
        
        if(Link.getZ() <= (zfix)zinit.jump_link_layer_threshold)
        {
            decorations.draw2(framebuf,true);
            Link.draw(framebuf);
            decorations.draw(framebuf,true);
        }
    }
}
```
```cpp
//Jumping Link and jumping enemies are drawn on this layer.
if(Link.getZ() > (zfix)zinit.jump_link_layer_threshold)
{
    decorations.draw2(framebuf,false);
    Link.draw(framebuf);
    chainlinks.draw(framebuf,true);
    
    for(int i=0; i<Lwpns.Count(); i++)
    {
        if(Lwpns.spr(i)->z > (zfix)zinit.jump_link_layer_threshold)
        {
            Lwpns.spr(i)->draw(framebuf);
        }
    }
    
    decorations.draw(framebuf,false);
}
```
5 different times
`draw_screen` is where *all* draws originate from

=== @ZoriaRPG (discord: Timelord) 10/07/2021 13:58

oh
very good then it can simply run after him and should be fine
I'm forgetting things rather easily at this point

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:08

butwait
is his base tile and/or scripttile not set in his animastion subroutine?
Am I that far gone?

=== @EmilyV99 (discord: Emily) 10/07/2021 14:09

ScriptTile would not be
base tile would be
so, in fact, I'd think you'd want to run the script *after* that, so it can detect his tile change, and do something based on it
i.e. `Hero->ScriptTile = Hero->Tile+20;`
that would *not* work if run before his animate

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:10

then the cange tat Isuggestedisfine
although I would still advise a timing change rule
as I did for global scripts

=== @EmilyV99 (discord: Emily) 10/07/2021 14:11

aye, of course

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:11

I also see where I missed the waitdraw check

https://cdn.discordapp.com/attachments/895584589941202964/895675033068904458/itemScriptEngine.cpp

=== @EmilyV99 (discord: Emily) 10/07/2021 14:14

why do it in the if
and then in the else
why not just do it *before* the if
also the passive is missing a `doscript` check entirely

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:17

the passive doesn't need doscript
it's an item flag

=== @EmilyV99 (discord: Emily) 10/07/2021 14:17

. . . then what happens if the script isn't an infinite loop, and terminates?
script termination works by setting `doscript` to `0`
given, having a non-infinite-loop-passive doesn't make much *sense*

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:18

I'll go bac and loo at the original functins after I SLEEP
pretty sure that they never checked that
for that exact reason
but they can call quit
so
perhaps they did

=== @EmilyV99 (discord: Emily) 10/07/2021 14:19

`if ( item_doscript[q] < 1 ) continue;` is at the top of the loop in the old code
so was checked for *everything*
funnily enough, this block
```cpp
else if(item_doscript[q]==0)  //Item script ended. Clear the data, if any remains.
{
    itemScriptData[q].Clear();
    FFScript::deallocateAllArrays(SCRIPT_ITEM, q);
    itemscriptInitialised[q] = 0;
    continue;
}
```
will never run
because if doscript is 0 it does `continue;` earlier

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:20

```c
FFScript::itemScriptEngine()
{
    if ( FFCore.system_suspend[susptITEMSCRIPTENGINE] ) return false;
    //zprint("Trying to check if an %s is running.\n","item script");
    for ( int q = 0; q < MAXITEMS; q++ )
    {
        
        //zprint("Checking item ID: %d\n",q);
        if ( itemsbuf[q].script <= 0 || itemsbuf[q].script > NUMSCRIPTITEM ) continue; // > NUMSCRIPTITEM as someone could force an invaid script slot!
        
        #if DEVLEVEL > 0
        if ( runningItemScripts[q] == 3 ) //forced to run perpetually by itemdata->RunScript(int mode)
        {
            zprint("The item script is still running because it was forced by %s\n","itemdata->RunScript(true)");
            //ZScriptVersion::RunScript(SCRIPT_ITEM, itemsbuf[q].script, q & 0xFFF);
        }
        #endif
        
        //Passive items
        if ( ( (itemsbuf[q].flags&ITEM_FLAG16) && game->item[q] && (get_bit(quest_rules, qr_ITEMSCRIPTSKEEPRUNNING)) ) )
        {
            //zprint("ItemScriptEngine() reached a point to call RunScript for item id: %d\n",q);
            ZScriptVersion::RunScript(SCRIPT_ITEM, itemsbuf[q].script, q&0xFFF);
            continue;
            
        }
        else
        {
        ```
that is why I removed code that never runs
passive item scripts have alwas been this way

=== @EmilyV99 (discord: Emily) 10/07/2021 14:22

?

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:23

the function at present in 2.55 does not have a condition to end them
as they trigger on a completely differentbasis
and you can terminate them by unsetting their flag or by removing the item

=== @EmilyV99 (discord: Emily) 10/07/2021 14:24

```cpp
case SCRIPT_ITEM:
{
    zprint("Item script reached quit/end of scope\n");
    int new_i = 0;
    bool collect = ( ( i < 1 ) || (i == COLLECT_SCRIPT_ITEM_ZERO) );
    new_i = ( collect ) ? (( i != COLLECT_SCRIPT_ITEM_ZERO ) ? (i * -1) : 0) : i;
    
    if ( !collect )
    {
        if ( (itemsbuf[i].flags&ITEM_FLAG16) && game->item[i] ) itemsbuf[i].script = 0; //Quit perpetual scripts, too.
        item_doscript[new_i] = 0;
        for ( int q = 0; q < 1024; q++ ) item_stack[new_i][q] = 0xFFFF;
        itemScriptData[new_i].Clear();
    }
    else
    {
        item_collect_doscript[new_i] = 0;
        for ( int q = 0; q < 1024; q++ ) item_collect_stack[new_i][q] = 0xFFFF;
        itemCollectScriptData[new_i].Clear();
    }
    FFScript::deallocateAllArrays(SCRIPT_ITEM, new_i);
    zprint("Item script reached quit/end of scope for new_i: %d\n",new_i);
    itemscriptInitialised[new_i] = 0;
    
    break; //item scripts aren't gonna go again anyway
}
```
That is what would run if the script called `Quit()`
or reached end of scope
note
`item_doscript[new_i] = 0;`
and note the old passive code
```cpp
if ( (item_doscript[q] > 1) || ( (itemsbuf[q].flags&ITEM_FLAG16) && game->item[q] && (get_bit(quest_rules, qr_ITEMSCRIPTSKEEPRUNNING)) ) )
{
    //zprint("ItemScriptEngine() reached a point to call RunScript for item id: %d\n",q);
    ZScriptVersion::RunScript(SCRIPT_ITEM, itemsbuf[q].script, q&0xFFF);
    continue;

}```
which definitely checks `item_doscript`

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:25

ohoh
I'm afool
I am looking at the test branch foroldcode
That does it
my capacity for this today is at an end
three hours on ghost stuff was enough

=== @EmilyV99 (discord: Emily) 10/07/2021 14:27

aye, certainly
get some rest

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:28

I want to test ghost  2.9 tomorrow

=== @ZoriaRPG (discord: Timelord) 10/07/2021 14:42


https://cdn.discordapp.com/attachments/895584589941202964/895682497822740530/itemScriptEngine.cpp

=== @ZoriaRPG (discord: Timelord) 10/07/2021 15:06

At the least, I quickly  found the cause

=== @EmilyV99 (discord: Emily) 10/11/2021 02:40

(meta) thread name was changed: ‚úÖüîíItemdata script timing inconsistency
## ‚úÖüîíHard Crash in 2.55 Alpha 98, the first Sideview swimming one, when scrolling or warping. (#948)
@ Tsunami Tommy Reload the Shotty opened this issue on 10/08/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/896165677755412552



=== @ Tsunami Tommy Reload the Shotty 10/08/2021 22:42

The big bug here is that either scrolling or warping will cause ZC to freeze for a second, and then instantly crash-to-desktop on arrival on the next screen.
------

I'll open by saying I made two additional test quests after experiencing this bug.  The second one only has two screens and two warps, which I can scroll to and warp between freely without an issue.  That was just to see if it was actual scrolling or warping that was the issue.  That test quest was made with standard NES Fixes quest fules set at first.

I also made another quest file that does the same, but with the enhanced SNES rules.  No crashes.
-------
So, this quest that crashed had me delving into the following:

1)  Opened by selecting the Enhanced SNES Rules.  Then,  I made three Dmaps.  #0 is Overworld.  #1 is a cave / Interior.  So is #3, but that has the "Wavy water effect" Dmap flag enabled because I wanted to test Sideview Swimming there.

2)  Three new Midis were added and assigned to the Dmaps.

3)  I got curious and went into the Enemy Editor and modified Enemy #123,  "NPC 1 (Standing)" and give it Goriya graphics, gave it an arrow weapon, and set its Damage and W-Damage to negative ninety in the hopes that it could heal the player. I placed that enemy as enemy #1 on the screen and put Flag #37 down somewhere.  It never spawned on-screen in-game.

4) One screen east of the upper-left corner (Where we start the quest.) I also got curious and wanted to put a Moblin, but found an enemy named "Moblin" which ended up being a Guy. So I put it in the list, but found that it was showing up as "<None>" rather than "Moblin."  In fact, all Guys show up as <None> rather than their name-sakes.  I tried to leave them in, but walking onto that screen just initiated the freeze and crash.

5) I erased those enemies because I thought they were causing the crash, and created a cave on Dmap 1 and put down some dive warps, Switch, and Switch Block combos in there along with a level-key for a lockblock in a chest combo and some enemies.

I think that's about it.  It's not a very interesting test quest.

https://cdn.discordapp.com/attachments/896165677755412552/896165721057411112/TestQuest.qst
^ There's the quest file.  Godspeed, y'all.  Password should be blank.
Here's the other files that it made though, just in case.
https://cdn.discordapp.com/attachments/896165677755412552/896165836765691934/TestQuest.zcheat

https://cdn.discordapp.com/attachments/896165677755412552/896165839605235722/TestQuest.zpwd

https://cdn.discordapp.com/attachments/896165677755412552/896165842264412160/TestQuest.key
Windows 10 64-bit, 21H1.   Launched from ZCL.
I didn't even get to test sideview swimming, or any swimming.  It just crashes when it scrolls or warps.

=== @ Tsunami Tommy Reload the Shotty 10/08/2021 22:45

It's not the Overworld Midi.  I changed it to the standard Z1 Overworld and it still crashed when scrolling East.
I'll try deleting the screen to the east and remaking it and see what happens.

=== @ Tsunami Tommy Reload the Shotty 10/08/2021 22:46

**YES**.   Deleting the screen to the east and remaking it with __only__ combos and nothing else avoided the crash.
But warping into the cave on the first screen did still crash it.

=== @ Tsunami Tommy Reload the Shotty 10/08/2021 22:48

Here's the test quest where it no longer crashes if you scroll to the east, but still crashes if you go into the cave on the start screen.
https://cdn.discordapp.com/attachments/896165677755412552/896167085053464636/TestQuest-ScreenToEastOfStartDoesntCrashAnymore.qst

=== @ Tsunami Tommy Reload the Shotty 10/08/2021 23:00

@arceusplayer11 (discord: Deedee) - I was asked to tag you.

=== @arceusplayer11 (discord: Deedee) 10/09/2021 09:28

@EmilyV99 (discord: EmilyV) this is a you issue
sprite.cpp line 1856
``spr_spawn_anim_frm=(spr_spawn_anim_clk/wpnsbuf[spr_spawn].speed);`` it's a divide by 0 issue with speed
easy fix

=== @arceusplayer11 (discord: Deedee) 10/09/2021 09:36

The issue was with enemy's spawn animation
If you had a speed set to 0, it would crash
fixed now
(meta) thread name was changed: ‚úÖüîíHard Crash in 2.55 Alpha 98, the first Sideview swimming one, when scrolling or warping.

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 12:56

Neat, thanks.  I'll test it again on next release.

My concern is that the crash occurred even after I removed those NPC enemies from the screens that had them.  Even entering a cave that only had Keese and Moblins crashed after warping from a screen that had an NPC on it at one point, but was then erased from the enemies list of that screen.

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 22:49

I encountered a Hard Crash again.  This time, I was actually able to enter the cave on the starting screen without it crashing.

The crash occurred when I killed the blue Moblin in the first screen of the cave.  I haven't made any modifications to this test quest since I uploaded it.  This is the test quest with the deleted and remade screen to the east that didn't crash.
https://cdn.discordapp.com/attachments/896165677755412552/896529930609889340/TestQuest.qst
I did cheat myself a L1 sword.
L4 cheat is 4.  No password on the quest.
This is using the revised build Emily posted today.

=== @EmilyV99 (discord: Emily) 10/09/2021 22:57


more of the same issue

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 22:58

<pat-pat>    

Thanks for looking at it.  üòï

=== @EmilyV99 (discord: Emily) 10/09/2021 22:58

it crashed when you killed something
because it's the death poof
that's crashing
dimi fixed an instance of the spawn poof crashing
but not the death poof
and not even all the instances of the spawn poof
building a full fix now
(this is why you make sure you don't divide by 0!)

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 22:59

I try and avoid that mistake in all walks of life, yes.  Wise words.

=== @EmilyV99 (discord: Emily) 10/09/2021 23:00


https://cdn.discordapp.com/attachments/896165677755412552/896532693678956544/buildpack.zip

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 23:01

<downloads>
That was quick.  Thakns.

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 23:02

Yep, no crash.   Remind me, did the original NES TLOZ have no death poofs?   Not being sarcastic; I genuinely don't remember.  >..<
Because I don't have any.   At least it didn't crash.

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 23:04

<brb dinner>

=== @EmilyV99 (discord: Emily) 10/09/2021 23:05


![image](https://cdn.discordapp.com/attachments/896165677755412552/896533925525065759/unknown.png)
you need to set the frames/speed on this
it used to be hardcoded
(or you can enable the rule `Compat->Hardcoded Shadow/Spawn/Death anim frames` for the old behavior)

=== @ Tsunami Tommy Reload the Shotty 10/09/2021 23:49

Yep, worked fine.  Thanks.  <:NPCNurseThumbsUp:573570441697034281>
set the frame data to 2 frames, 4 speed.  Didn't crash.
## ‚úÖüîíNew Nightly Sideview Swimming (#949)
@ Architect Abdiel opened this issue on 10/08/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/896175212947726336



=== @ Architect Abdiel 10/08/2021 23:20

This is basically for @arceusplayer11 (discord: Deedee) 
So, swimming works fine. Except that when I reach the top of the water Link gets stuck in an endless jumping animation that I can't break out of.

Also, there doesn't seem to be any gravity when swimming. Unless I am messing up on the setup.

![image](https://cdn.discordapp.com/attachments/896175212947726336/896175334267957268/SideviewSwim.png)

=== @EmilyV99 (discord: Emily) 10/08/2021 23:21

there's new variables in init data

=== @ Architect Abdiel 10/08/2021 23:28

Okay, the gravity thing is fine then. But I've adjusted the sideview leaving jump to values of 0.0025 and 1.2005, to try it out. I am able to sink back down, but he doesn't really leave the water with any jump. He gets stuck in his jumping animation briefly, then sinks down in his down animation. And at that point, every directional button makes Link go straight up.

=== @EmilyV99 (discord: Emily) 10/08/2021 23:29

A roc's feather of `power 1` would be a jump of `3.2`, I believe?
Also, if you use a sideview ladder at the top of water, you can easily climb out

=== @ Architect Abdiel 10/08/2021 23:36

Nope. I tried putting a sideview ladder at the top of the screen and had the same issue.
And I know the sideview ladder worked cause I was able to jump on it with the feather and climb up first.
Also can't jump out with the feather.

=== @EmilyV99 (discord: Emily) 10/08/2021 23:42

@arceusplayer11 (discord: Deedee)

=== @ZoriaRPG (discord: Timelord) 10/09/2021 02:44

oh dear, more water

=== @arceusplayer11 (discord: Deedee) 10/09/2021 05:56

I notice you're using VD. Just to check, was the sideview ladder you tested the built in flags, or was it VD's scripted ladder?

=== @arceusplayer11 (discord: Deedee) 10/09/2021 06:42

Anyways, found the issue
it only occurs if NoWaterHopping is disabled; which honestly is a lot more confusing of a name now that Sideview Swimming lets you actually *hop* out of the water

=== @arceusplayer11 (discord: Deedee) 10/09/2021 09:33

Should be fixed in the next nightly, probably coming out once I'm done fixing the other issues

=== @arceusplayer11 (discord: Deedee) 10/09/2021 09:36

(meta) thread name was changed: ‚úÖüîíNew Nightly Sideview Swimming

=== @ Architect Abdiel 10/09/2021 11:25

I was using the system built sideview ladders. I used the VD Light version to test and change everything to only be set up like a basic sideview water screen with only built in ZC functions.

Anyways, excellent. I've been waiting for sideview swimming to do a couple projects.

=== @arceusplayer11 (discord: Deedee) 10/09/2021 11:43

so sideview ladder doesn't work exiting water from the top?
or is it only when you get into that stuck state?
if the former, does it work if you set the waterjump to 0?
and if that doesn't work, does it work if you turn on "no water hopping"?

=== @ Architect Abdiel 10/09/2021 12:16

I'll have to check when I have a chance to get on the computer.

I know when I was exiting from the top he wasn't grabbing onto the ladder. But he was stuck in the water hop state. So it's very likely a water hop thing.

I'll get back to you after I try it out.
Fiance is busy doing computer things atm.

=== @ Architect Abdiel 10/09/2021 12:54

@arceusplayer11 (discord: Deedee) Turning on No Water Hopping, fixed the issue. Although, I still can't jump out of the water with the Roc's Feather. Not sure if that is intended or not.

=== @EmilyV99 (discord: Emily) 10/09/2021 12:54

The roc's feather isn't used to jump out of the water
you just naturally jump out of the water based on the jumping var in init data

=== @ Architect Abdiel 10/09/2021 12:56

Alright. Well even then he never goes above the water's surface. You have to have a sideview ladder to get out. I just tried setting the leaving jump to 13.something, and he still won't get out.

=== @EmilyV99 (discord: Emily) 10/09/2021 12:57

that's a bug

=== @arceusplayer11 (discord: Deedee) 10/09/2021 13:02

(replying to @ Architect Abdiel "Alright. Well even then he ne‚Ä¶"): try setting it to 3?

=== @ Architect Abdiel 10/09/2021 13:08

I have tried that.

=== @arceusplayer11 (discord: Deedee) 10/09/2021 13:26

hmm
odd.
Can you send the quest?

=== @ Architect Abdiel 10/09/2021 13:34


https://cdn.discordapp.com/attachments/896175212947726336/896390049590046740/VintageDreamsLightVersion.qst

=== @arceusplayer11 (discord: Deedee) 10/09/2021 14:33

Okay, I didn't account for non-newheromovement stuff
Should be fixed now

=== @ Architect Abdiel 10/09/2021 16:35

It's all good. It's only natural to miss something. Especially when dealing with what I can only imagine is a massive undertaking of a feature.

=== @arceusplayer11 (discord: Deedee) 10/09/2021 16:35

üò©
## ‚úÖüîíStrange Collision issues when walking back to a previous screen while off-grid. (#950)
@ FireSeraphim opened this issue on 10/09/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/896303901748371477



=== @ FireSeraphim 10/09/2021 07:51

As of the 98 Alpha I've been running into a strange collision issue, the screen shown in the video clip isn't the only place you can actually do this.

=== @ FireSeraphim 10/09/2021 07:53

It's a 9mb video, the reason why I chose to record it as a video is because I don't think I can quite describe it

=== @ FireSeraphim 10/09/2021 07:55

the video is still uploading

=== @ FireSeraphim 10/09/2021 08:08


![image](https://cdn.discordapp.com/attachments/896303901748371477/896308222938476584/Strange_Collision_Hiccups.mp4)

=== @arceusplayer11 (discord: Deedee) 10/09/2021 08:39

what the hell?

=== @ FireSeraphim 10/09/2021 08:43

yeah, that's what I said.

=== @arceusplayer11 (discord: Deedee) 10/09/2021 09:30

Could you send me the quest?
need to run it through my debug build cause I'm not reproducing it

=== @arceusplayer11 (discord: Deedee) 10/09/2021 09:34

@ FireSeraphim

=== @arceusplayer11 (discord: Deedee) 10/09/2021 11:06

Okay this was a really dumb error on my part
the position check for the solidity of the next screen was going out of bounds when scrolling left
fixed

=== @arceusplayer11 (discord: Deedee) 10/09/2021 11:49

(meta) thread name was changed: ‚úÖüîíStrange Collision issues when walking back to a previous screen while off-grid.

=== @EmilyV99 (discord: Emily) 10/11/2021 17:44

@ FireSeraphim

=== @ FireSeraphim 10/11/2021 22:29

Yes?

=== @EmilyV99 (discord: Emily) 10/11/2021 23:03

re-opened the thread as requested

=== @ FireSeraphim 10/12/2021 00:29

Aye. Let me know if there's any new builds that might finally nail the bug in it's overdue coffin

=== @arceusplayer11 (discord: Deedee) 10/12/2021 00:50

next time a nightly is posted
## Customizable hints for Lens of Truth (#951)
@ Alucard648 opened this issue on 10/09/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/896374366567272478



=== @ Alucard648 10/09/2021 12:31

With all those 2.55 features coming in one of many thins still missing is customizable lens hints, similar to this script:
https://www.purezc.net/index.php?page=scripts&id=239
## ‚ùåüîíLoadMapData() thinks the bottom row of screens are invalid (#952)
@ Moosh opened this issue on 10/10/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/896799972845056040



=== @ Moosh 10/10/2021 16:42

Pretty straightforward. Calling Game->LoadMapData() on a screen in the bottom row (0x80+) produces an error

![image](https://cdn.discordapp.com/attachments/896799972845056040/896799992554078249/unknown.png)

=== @ Moosh 10/10/2021 16:44

Dunno if there's some internal reason for this. Figured it might be a one line fix, otherwise no big deal
Just discovered it because I like to use that bottom row of screens for special layers

=== @EmilyV99 (discord: Emily) 10/10/2021 16:50

This is intentional

=== @ Moosh 10/10/2021 16:50

Oh?

=== @EmilyV99 (discord: Emily) 10/10/2021 16:51

the bottom screens *are* special, and literally don't have all the data that mapdata normally can access
so a number of things would be invalid/glitchy

=== @ Moosh 10/10/2021 16:51

Oh
Well hmm
I'ma have to test something then

=== @EmilyV99 (discord: Emily) 10/10/2021 16:51

and, uh
in general, you should not use those screens
for anything other than their exact intended purpose

=== @ Moosh 10/10/2021 16:51

Because I think I accessed them another way
Wait nope, it checks out, it was a temp layer ü§¶
How exactly are they different structurally though out of curiousity?
Wouldn't it take _more_ effort to code them to not have all the properties of a screen?

=== @EmilyV99 (discord: Emily) 10/10/2021 16:52

frankly I don't know entirely, that's part of the ZC janky-as-fuck shit I try to avoid touching at all costs

=== @ Moosh 10/10/2021 16:53

Fair. Maybe add this as a note in the docs

=== @EmilyV99 (discord: Emily) 10/10/2021 16:53

Also, I just checked the code

=== @ Moosh 10/10/2021 16:53

Because it sure tripped me up

=== @EmilyV99 (discord: Emily) 10/10/2021 16:53

`0x80`/`0x81` are accessible

=== @ Moosh 10/10/2021 16:53

oh
well then
false assumption on my part I suppose

=== @EmilyV99 (discord: Emily) 10/10/2021 16:53

`else if ( _scr < 0 || _scr > 129 ) //0x00 to 0x81 -Z`
so, @ZoriaRPG (discord: Timelord) , what exactly is the reason for this limitation?

=== @EmilyV99 (discord: Emily) 10/10/2021 16:55

(replying to @ Moosh "Wait nope, it checks out, it‚Ä¶"): aye, temp layers are fun. Basically, there are 14 global variables that are screen objects
and it copies from the perm screen data into the global temp vars
(14 because 7 (layers 0-6) for both the current screen, and for the 'other' screen during scrolling)

=== @ Moosh 10/10/2021 16:56

Oh yeah, I believe I confirmed earlier that temp screens do not exist if the layer isn't assigned on the screen
Cause I was having difficulty debugging something and enabling the layer fixed that

=== @EmilyV99 (discord: Emily) 10/10/2021 16:57

what happens if you access the layer?

=== @ Moosh 10/10/2021 16:57

Error I believe. Lemme double check

=== @ Moosh 10/10/2021 16:59

Oh...it's letting me read it at least. Hmm, what is up with this

=== @ Moosh 10/10/2021 17:00

Ah yes, it was working because I forgot to unassign the layer. Can tell I'm tired üòõ

=== @ Moosh 10/10/2021 17:03

```        mapdata l6 = Game->LoadTempScreen(6);
        Trace(l6->ComboD[0]);```
So this works. It recognizes there's nothing there and traces 0
```            l6->ComboD[i] = Rand(100);
            l6->ComboC[i] = 0;```
This does not work. It does not successfully garble the screen
Make of that what you will
¬Ø\_(„ÉÑ)_/¬Ø

=== @EmilyV99 (discord: Emily) 10/10/2021 17:07

????
so, `l6->ComboD[i] = 10; Trace(lb->ComboD[i]);` traces `0`?

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:20

(replying to @EmilyV99 (discord: Emily) "so, @ZoriaRPG (discord: Timelord) ,‚Ä¶"): those are prohibitions

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:21

else if ( _scr < 0 || _scr > 129 ) //0x00 to 0x81 -Z
    {
        Z_scripterrlog("Invalid Screen ID passed to Game->LoadMapData: %d\n", _scr);
        ri->mapsref = LONG_MAX;
        return LONG_MAX;
    }

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:22

Can fix later with an inst rule

=== @EmilyV99 (discord: Emily) 10/10/2021 21:23

I was asking *why* it was limited

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:24

i wasn't sold that the 0x82 screens would be safe to modify
probably should be > 0x82

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:26

*(>130)
I missed one valid screen
0x82 is afaik never normally used
80 is guy room 81 is passageway
82 was reserved for future similar room types bu never implemented in any way

=== @EmilyV99 (discord: Emily) 10/10/2021 21:30

up to 0x87 are editable

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:37

aye  but reserved for sys expansion

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:39

so an instr rule that changes the cap rom 129 to whatever you feel *is safe considering that *would allow it if you  want

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:40

I did not want to encourage using these for random stuff
as that could limit actually adding special purposes to them

=== @ZoriaRPG (discord: Timelord) 10/10/2021 21:44

so, I intentionally limited it to screens that are at present used by engine mechanics to prevent those possible problems

=== @EmilyV99 (discord: Emily) 10/11/2021 02:41

(replying to @EmilyV99 (discord: Emily) "so, `l6->ComboD[i] = 10; Trac‚Ä¶"): @ Moosh

=== @ Moosh 10/11/2021 02:42

Ah, lemme check

=== @ Moosh 10/11/2021 02:45

Okay so it traces whatever I set it to. So I guess the problem is less that the tempscreens don't exist and more they don't draw when the layer is unassigned

=== @EmilyV99 (discord: Emily) 10/11/2021 02:47

*OH*
`->Valid`
probably involved

=== @ Moosh 10/11/2021 02:51

I assume Valid is read only

=== @EmilyV99 (discord: Emily) 10/11/2021 02:52

pretty sure, aye
give me a moment

=== @EmilyV99 (discord: Emily) 10/11/2021 02:54

@ Moosh see how this works

https://cdn.discordapp.com/attachments/896799972845056040/896953796628996126/buildpack.zip

=== @ Moosh 10/11/2021 02:56

What's it change?

=== @EmilyV99 (discord: Emily) 10/11/2021 02:56

I made the screen combo modify postroutine set the valid bit
so `l6->ComboD[i] = n;` should set the valid bit true

=== @ Moosh 10/11/2021 02:57

Ah
Will that make setting ComboD run slower?

=== @EmilyV99 (discord: Emily) 10/11/2021 02:58

Technically, yes
slower by some fraction of a microsecond
so, noticably, not likely

=== @EmilyV99 (discord: Emily) 10/11/2021 03:00

so, does it draw the layer now?

=== @ Moosh 10/11/2021 03:01

Doesn't appear to, no

=== @ Moosh 10/11/2021 03:02

```ffc script NewLayer{
    void run(){
        mapdata l6 = Game->LoadTempScreen(6);
        for(int i=0; i<176; ++i){
            l6->ComboD[i]=Rand(100);
        }
    }
}```
Here's all I'm doing

=== @EmilyV99 (discord: Emily) 10/11/2021 03:03

ah crap
it's checking directly against `->layermap[]`
give me a minute

=== @EmilyV99 (discord: Emily) 10/11/2021 03:08

@ Moosh
https://cdn.discordapp.com/attachments/896799972845056040/896957501700968488/zelda.exe

=== @ Moosh 10/11/2021 03:10

Yup that did it

=== @EmilyV99 (discord: Emily) 10/11/2021 03:11

changed the `->layermap[type]!=0` checks to `->valid` checks
so now once the valid bit gets set, it knows to draw the layer
viola, layer effects without needing to use up a screen

=== @EmilyV99 (discord: Emily) 10/11/2021 03:13

(replying to @ Moosh "Pretty straightforward. Calli‚Ä¶"): As for this original report, I'm going to call that `not a bug`. Frankly you probably shouldn't be using those screens for anything.

=== @ Moosh 10/11/2021 03:13

sure. I do think it should be noted in ZScript_Additions.txt though

=== @EmilyV99 (discord: Emily) 10/11/2021 03:14

aye, noted
(meta) thread name was changed: ‚ùåüîíLoadMapData() thinks the bottom row of screens are invalid
## Added Custom Item Sound Effects (#953)
@ Guinevere opened this issue on 10/11/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/896957585511571507



=== @ Guinevere 10/11/2021 03:09

there are some items that have multiple sound effects tied to them. And i think it'd be neat to add more sound affects to the action tab of the item editor to make each item sound more unique from eachother.
examples:
-sword beam+peril beam+cross beam
-bomb+super bomb place
-din's fire rise+fall
- nayru's love out+in
- lens on+off
- quake+super quake pound
-spin+hurricane spin+quake+super quake charge

=== @ZoriaRPG (discord: Timelord) 10/11/2021 05:46

Isn't the lens sfx set by the item edtor? Sorry i never use that item and IDR
If not shod be simple to adapt
most of these belong in a genera sfx menu

=== @EmilyV99 (discord: Emily) 10/11/2021 05:49

the point being, the lens has a separate on/off sound
and you can't just select both

=== @ Guinevere 10/11/2021 05:50

the lens is a general sfx
but i want these to be item specific for purely for customization reasons

=== @ Guinevere 10/11/2021 05:51

like when i shoot a sword beam from a stick
and shoot a sword beam from a sword of legendary proportions
i kinda expect them to sound different lol
just thought it would be cosmetically beneficial

=== @ Guinevere 10/11/2021 05:54

a lot of requests i have mostly are intended to expand upon what's already there.

=== @ P-Tux7 10/11/2021 08:21

well the lens one is an easy matter
have the user select one sound for on
and the sound directly after that one is used for off
i think the same can work for all the others
bombs being firstly explode then place (or vice versa)
though you could likely set a unique sound for peril beam and cross beam scrolls, no hacks needed
and i'd change the quake scrolls to be "charge then charged pound" or vice versa

=== @ P-Tux7 10/11/2021 08:26

though i have NO idea how the spin attacks or quake sounds (both charging and charged use) would interfere with the sounds that the swords and hammers themselves are set to
you could have a LTM-like additive setup but that's a lot of work and can we just use that on the rewrite please

=== @ Guinevere 10/11/2021 14:30

My idea was to just add more slots for sound effects on the action tab for the multiple sound effects.

=== @ Guinevere 10/11/2021 15:57

Sword: Slash Sound, Beam Sound
Peril Beam: Beam Sound
Cross Beams: Beam Sound
Din's Fire: Rise Sound, Fall Sound, Flame Sound
Nayru's Love: Fly Out Sound, Fly In Sound, Shield Sound
Lens: On Sound, Off Sound
Quake Hammer: Pound Sound, Charge Sound
Super Quake: Pound Sound, Charge Sound
Spin Attack: Spinning Sound, Charge Sound
Hurricane Spin: Spinning Sound, Charge Sound

so like 3-4 sfx slots in the action tab of the item editor

=== @ P-Tux7 10/11/2021 19:18

admittedly my idea does save quest file size since it only has one user-set value for each
## üíäüîìSword beam sprite wrong graphics for horizontal beams (#954)
@ DarkMatt opened this issue on 10/11/2021

Status: closed

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/896973161684406282



=== @ DarkMatt 10/11/2021 04:11

sword beams from wooden sword have graphical errors if they are horizontal sword beams. https://gfycat.com/SpitefulLivelyAustralianshelduck
item's sprites in the item editor: https://i.imgur.com/wQkl60O.png
and the sprite data of the beam sprite: https://i.imgur.com/28K6Nqy.png
This affects all swords.

=== @ Guinevere 10/11/2021 04:20

Oh that's how it supposed to work
beam shards now have vertical and horizontal sprites

=== @ DarkMatt 10/11/2021 04:21

I see. Built in tiles have not been updated to support this it seems.

=== @ Guinevere 10/11/2021 04:22

yeah
it's just the tileset

=== @EmilyV99 (discord: Emily) 10/11/2021 04:22

??

=== @ Guinevere 10/11/2021 04:22

set it up like this and you should be good
![image](https://cdn.discordapp.com/attachments/896973161684406282/896976067955413013/Screenshot_2021-10-10_212148.png)

=== @EmilyV99 (discord: Emily) 10/11/2021 04:22

what QR affects this, if any?

=== @ DarkMatt 10/11/2021 04:22

and done

=== @EmilyV99 (discord: Emily) 10/11/2021 04:23

and when did this change

=== @ Guinevere 10/11/2021 04:23

when we added extra frames of animation to directional beams

=== @EmilyV99 (discord: Emily) 10/11/2021 04:25

(replying to @EmilyV99 (discord: Emily) "what QR affects this, if any?"): ^

=== @ Guinevere 10/11/2021 04:28

when this is off
(in backwards compatibility)
![image](https://cdn.discordapp.com/attachments/896973161684406282/896977561907769374/Screenshot_2021-10-10_212808.png)
if it's on it goes back to the old setup

=== @EmilyV99 (discord: Emily) 10/11/2021 04:35

ahk

=== @ P-Tux7 10/11/2021 08:20

oh yeah i need to finally file a report for the broken third tile of slash or whichever it was

=== @ Guinevere 10/11/2021 16:37

what's wrong with slash?
seems to work fine for me

=== @ P-Tux7 10/11/2021 19:16

so it has four tiles
i think one of them is unused and instead a flipped version of one of the others is used

=== @ Guinevere 10/11/2021 20:10

First tile is slash up, the second tile is slash down, the third tile is slash left, and the forth tile is slash right.
I've checked each one and all of them correlate properly.

=== @ Guinevere 10/11/2021 20:22

Ahh. I see what's up.
you're using flipped right facing slash
yes, that one uses only 3 tiles, and flip the slash up for the slash right
with flipped right facing slash off it uses all 4 tiles

=== @ P-Tux7 10/11/2021 20:56

that means the right-down one is never used

=== @ Guinevere 10/11/2021 20:57

only when you have flipped right facing slash on
when it's off all 4 are used

=== @ P-Tux7 10/11/2021 21:55

oh right spin attack
i wonder if it's used there

=== @ Guinevere 10/11/2021 22:03

(i don't know what the issue is.)

=== @ Guinevere 10/11/2021 22:06

right spin also uses the flipped down slash

=== @ Guinevere 10/11/2021 22:09

the fourth slash sprite is there for normal gb zelda slash where it slashes up-to-right
flipped right facing slash slashes down-to-right and doesn't use the forth sprite
neither does the spin attack
they use the up facing slash slash, but they just flip it on the x-axis

=== @ Guinevere 10/11/2021 22:14

there is no bug
everything slash related seems to work as intended

=== @arceusplayer11 (discord: Deedee) 10/12/2021 20:40

So is there a bug here?
Was busy

=== @ P-Tux7 10/12/2021 21:03

(replying to @ Guinevere "the fourth slash sprite is th‚Ä¶"): why shouldn't they use unique sprites for every direction

=== @arceusplayer11 (discord: Deedee) 10/31/2021 13:23

Gonna mark this as not a bug
(meta) thread name was changed: ‚ùåüîíSword beam sprite wrong graphics for horizontal beams

=== @arceusplayer11 (discord: Deedee) 02/13/2022 14:37

So uh
this actually was  abug
fixed now
(meta) thread name was changed: üíäüîìSword beam sprite wrong graphics for horizontal beams

=== @EmilyV99 (discord: Emily) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## NES Scrolling Dungeon vs. Interior Behaviour (#955)
@ vlamart opened this issue on 10/11/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/897145084942897242



=== @ vlamart 10/11/2021 15:34

A DMap setting or flag that let's you adjust whether Player autowalks 0, 1, or 2 tiles. Then a per screen flag or setting that allows you to turn auto-walk off for a specific edge

=== @ P-Tux7 10/11/2021 19:17

this could be dangerous when it comes to shutter doors since link needs to autowalk so he doesn't get stuck inside the door

=== @ vlamart 10/11/2021 19:28

Well the idea would be 2 tiles is the traditional push needed for Classic NES shutters, and 1 for free form shutters/doors, etc., and 0 for no push
## ‚ùåüîíScripted Fire still hurts Player despite being set otherwise. (#956)
@ Orithan opened this issue on 10/12/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/897407891336728637



=== @ Orithan 10/12/2021 08:58

Scripted Fire still harms the player even if the following are set:
Quest Rules, Items: ``Scripted Fire Weapons Don't Hurt Link``
Player Defenses: ``Fire or Candle Fire Player Defense = ignore``

ZC Alpha 97, Windows 10

=== @EmilyV99 (discord: Emily) 10/12/2021 14:10

What is the fire's `->Weapon` and `->ParentItem`? @ Orithan

=== @ Orithan 10/12/2021 14:26

``LW_FIRE``, A ``Lantern`` item

=== @EmilyV99 (discord: Emily) 10/13/2021 13:28

so, there's your issue
shouldn't set that to a lantern item
`Scripted ....` qrs affect items with `ParentItem < 0`
if `ParentItem > -1`, it reads flags from the item editor data
....and those flags on a lantern, are not the flags it expects from a candle

![image](https://cdn.discordapp.com/attachments/897407891336728637/897838706172526652/unknown.png)

![image](https://cdn.discordapp.com/attachments/897407891336728637/897838777853157386/unknown.png)
`Flags[2]`, `Fire Doesn't Hurt Player`
obviously the lantern is not intended to be the parent to fire weapons, so it doesn't have such a name for the flag
and the lantern could have new flags added in the future that could conflict with that
so, no bug here, just user error with wrongly modifying `ParentItem`

=== @EmilyV99 (discord: Emily) 10/13/2021 13:33

(meta) thread name was changed: ‚ùåüîíScripted Fire still hurts Player despite being set otherwise.

=== @ Orithan 10/13/2021 13:56

That's pretty annoying tbh because this is 1) poorly documented and 2) ``ParentItem`` may be used by scripters for functionality

=== @ Orithan 10/13/2021 13:58

I would like for that to be decoupled with ``ParentItem`` in the future or at the very least have a setting that sets "Do not hurt player"

=== @EmilyV99 (discord: Emily) 10/13/2021 14:01

The purpose of ParentItem is to make an item behave as though it were generated by the given item ID

=== @ Orithan 10/13/2021 14:02

And that's the only easy way to deal with level triggers if I ever need them

=== @EmilyV99 (discord: Emily) 10/13/2021 14:09

so
`1) poorly documented` adding documentation
`2) ParentItem may be used by scripters for functionality` Scripter error is scripter error

=== @EmilyV99 (discord: Emily) 10/13/2021 14:11

`I would like for that to be decoupled with ParentItem in the future or at the very least have a setting that sets "Do not hurt player" `
^This requires literally rewriting most of how weapons work
and would take months
```
int Parent;
npc Parent;
 * The ID of the item, or pointer of the npc (respectively for lweapon, and for eweapon) that created this weapon.
 * Weapons created by script have a default Parent of -1 (lweapon) and <npc>-0.0001 (eweapon). 
 * For lweapons, this value determines what item editor index to read item flags from.
 *     Setting it to an item of a class that does not normally generate the given weapon
 *     type may have unexpected effects.```

=== @EmilyV99 (discord: Emily) 10/13/2021 14:14

(replying to @ Orithan "And that's the only easy way‚Ä¶"): ?
what does any of this have to do with level triggers?

=== @ Orithan 10/13/2021 14:15

Level triggers use ParentItem as a reference?

=== @EmilyV99 (discord: Emily) 10/13/2021 14:15

oh, duh
...do they?
Or do they read `lweapon->Level`?

=== @ Orithan 10/13/2021 14:15

AFIAK

=== @EmilyV99 (discord: Emily) 10/13/2021 14:18

Book fire seems to burn blue, red, wand fire triggers no matter what
or wait, no, that's magic with the insta-burn book flag
the generic `wFire` code
runs
```
findentrance(x,y,mfBCANDLE,true);

if(type>1) //red candle 
{
    findentrance(x,y,mfRCANDLE,true);
}

if(linked_parent == itype_dinsfire)
{
    findentrance(x,y,mfDINSFIRE,true);
}
```
`type` here is `lweapon->Level`
(`linked_parent` is hardcoded garbage)

=== @EmilyV99 (discord: Emily) 10/13/2021 14:21

. . . boomerangs seem to use the item editor though
what the fuck

=== @EmilyV99 (discord: Emily) 10/13/2021 14:22

uhg
So, if you want better level trigger stuff, that'd be a feature request to file
`ParentItem` is not changing though, it's far too much work to change

=== @ Orithan 10/13/2021 22:52

Mhm
## ‚úÖüîíCombo packs are not referencing the right tiles (#957)
@ Moosh opened this issue on 10/12/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/897430230216622091



=== @ Moosh 10/12/2021 10:27

Tried importing a combo pack with some wall tiles, gave me a bunch of garbage tiles. At a glance all the combo data besides the tiles seems to have loaded correctly.
Here's what it's giving me when I load it in
![image](https://cdn.discordapp.com/attachments/897430230216622091/897430284746776606/unknown.png)
Here's the pack I used
https://cdn.discordapp.com/attachments/897430230216622091/897430362718896198/a.zcombo

![image](https://cdn.discordapp.com/attachments/897430230216622091/897430434428882964/260.png)

![image](https://cdn.discordapp.com/attachments/897430230216622091/897430471590436864/261.png)
And here's the tile pages it's supposed to be referencing. 260 and 261

=== @ Moosh 10/12/2021 10:29

I look forward to importing these combos by hand üò¶

=== @EmilyV99 (discord: Emily) 12/23/2021 06:39

Should be fixed? Build posting soon...
(meta) thread name was changed: üíäüîìCombo packs are not referencing the right tiles

=== @EmilyV99 (discord: Emily) 12/23/2021 06:57

(meta) thread name was changed: ‚úÖüîíCombo packs are not referencing the right tiles
## ‚úÖüîí[std.zh] BITDX_HFLIP and BITDX_VFLIP are mixed up (#958)
@ Moosh opened this issue on 10/12/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/897464872206479381



=== @ Moosh 10/12/2021 12:45

See I thought it was VFLIP for Vertical Flip, silly me. The V stands for Vorizontal

=== @arceusplayer11 (discord: Deedee) 02/12/2022 08:38

ah, yes
Vorizontal
fixed
(meta) thread name was changed: ‚úÖüîí[std.zh] BITDX_HFLIP and BITDX_VFLIP are mixed up
## Variable to Disable Shield (#959)
@ mitchfork opened this issue on 10/12/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/897514642425933866



=== @ mitchfork 10/12/2021 16:02

Right now, in order to temporarily disable the shield, you have to grant a higher level shield with no block flags and then remove it appropriately.  Would be nice to have a `Hero` variable that would do this instead

=== @ mitchfork 10/12/2021 16:03

This is different than flagging projectiles as unblockable - I need to do this in a lot of custom item scripts that have animations where the shield should not be active (e.g. custom slash/stab items or items with charge animations)

=== @EmilyV99 (discord: Emily) 10/12/2021 16:18

I mean, you could remove the shield
or edit it's `itemdata`
to remove the blockflags

=== @ mitchfork 10/12/2021 16:49

all of these things seem equally fussy to me
editing the itemdata most-so because incorrectly restoring them is really bad
although I guess incorrectly removing the dummy shield is also bad so maybe not worse

=== @arceusplayer11 (discord: Deedee) 10/12/2021 16:50

a disable shield variable might not be hard to do
I'll look into it

=== @ mitchfork 10/12/2021 16:51

üëç
I mean if it's an absolute nightmare I can definitely manage
but it's one of the fussiest things I run into regularly

=== @ P-Tux7 10/12/2021 18:20

(replying to @arceusplayer11 (discord: Deedee) "a disable shield variable mig‚Ä¶"): it might be worth looking into link's invincibility code
in that state his shield reacts with nothing
much ire with blue/mirror wizzrobes has been had
## Flipped Right-Facing Slash uses its own sprite (#960)
@ Guinevere opened this issue on 10/12/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/897605256878374942



=== @ Guinevere 10/12/2021 22:02

Allow the right facing slash use the fourth tile in the sprite while the flipped right facing slash flag is checked on.

=== @ P-Tux7 10/12/2021 22:04

the same goes for the four diagonal spin attacks using the four diagonal sprites of your current sword
i think the reason i cared is because lttp has the sword "trail" for each direction
also this should just be a QR
## more-unique-doors (#961)
@ P-Tux7 opened this issue on 10/13/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/897668017348022312



=== @ P-Tux7 10/13/2021 02:12

https://www.purezc.net/forums/index.php?showtopic=77039
Basically this
Z1, LTTP, and the GBC games don't have different graphics between what doors can be opened or not, but I'd like to

=== @ P-Tux7 10/13/2021 02:14

For reference, Shutter (the kind that opens if Enemies -> Shutters or Secrets -> Shutters) and Shutter (One Way) currently use the same graphics
## ‚úÖüîíMissing (but still strangly usable) one handed hold up option in player graphics menu (#962)
@ FireSeraphim opened this issue on 10/13/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/897794878149373993



=== @ FireSeraphim 10/13/2021 10:36

I ran into a new and interesting problem in the current publicly available alpha. The box for the one handed hold up is missing but you can still click there and chose a one-handed animation despite the box being missing. I just took a screenshot of this bug and I'll be posting it real soon.

![image](https://cdn.discordapp.com/attachments/897794878149373993/897794999343796254/Screen_Shot_002.PNG)

=== @EmilyV99 (discord: Emily) 10/13/2021 13:33

@arceusplayer11 (discord: Deedee) uh oh
pretty sure this one's on you

=== @ FireSeraphim 10/14/2021 09:21

Just now tested the newest build, the bug is still there and now it's slightly worse

=== @ FireSeraphim 10/14/2021 09:23


![image](https://cdn.discordapp.com/attachments/897794878149373993/898138941092421673/Screen_Shot_003.PNG)

![image](https://cdn.discordapp.com/attachments/897794878149373993/898138977582850058/Screen_Shot_004.PNG)

=== @EmilyV99 (discord: Emily) 10/14/2021 16:54

...considering no one touched the issue or changed anything in any way, I wouldn't expect anything at all to be different

=== @ FireSeraphim 10/18/2021 01:39

I will test the new build, I hope the problem is solved in this one.
I swear to god I'm not making this s--- up

=== @ FireSeraphim 10/18/2021 01:44


![image](https://cdn.discordapp.com/attachments/897794878149373993/899473070597738597/Screen_Shot_005.PNG)

![image](https://cdn.discordapp.com/attachments/897794878149373993/899473087559503902/Screen_Shot_006.PNG)
Please fix this, I swear I'm not crying "wolf".

=== @EmilyV99 (discord: Emily) 10/18/2021 02:02

. . . I pinged dimi, it takes time
chill, dude
like seriously

=== @EmilyV99 (discord: Emily) 10/18/2021 02:03

@arceusplayer11 (discord: Deedee) might want to look at this?

=== @arceusplayer11 (discord: Deedee) 10/18/2021 03:04

If we post here ssying its fixed, then its fixef
And its not getting fixed until i get my new charger
If a new build is posted and nothing is ssid in this thread, then it has not been fixed

=== @arceusplayer11 (discord: Deedee) 10/18/2021 03:07

Emily has different priorities than me, so she works on different things than me. This bug is my territory for the time being, and im out of commission for a day or so

=== @ FireSeraphim 10/29/2021 15:53

any progress on fixing this?

=== @arceusplayer11 (discord: Deedee) 10/29/2021 19:45

Yeah, I'm currently pounding away at it

=== @arceusplayer11 (discord: Deedee) 10/29/2021 19:48

... I can't reproduce the issue
oh god, I hope that's just an accidental fix and not "this only occurs in very specific scenarios"

=== @EmilyV99 (discord: Emily) 10/29/2021 20:43

@ FireSeraphim test in latest build
if still broken, provide test quest

=== @ FireSeraphim 10/29/2021 20:44

aye, i'll get to that right away

=== @ FireSeraphim 10/29/2021 20:48


![image](https://cdn.discordapp.com/attachments/897794878149373993/903747189711442011/Screen_Shot_014.PNG)
latest build, can confirm the bug still persists
![image](https://cdn.discordapp.com/attachments/897794878149373993/903747243952209920/Screen_Shot_013.PNG)

=== @arceusplayer11 (discord: Deedee) 10/29/2021 22:14

Okay, so I may have figured out why it doesn't display, but I don't know *how* it happened
flip is set to 255 for that

=== @arceusplayer11 (discord: Deedee) 10/29/2021 22:19

oh shit
@EmilyV99 (discord: EmilyV) the thing that saves the tile of the holdspr is saving it as long
but qst.cpp reads it as word
should it be long or word?
...Oh god every link sprite does this

=== @EmilyV99 (discord: Emily) 10/29/2021 22:30

. . . .
it should be a long, because MAXTILES does not fit in word
also how the fuck would this not have been noticed
and bugged EVERYTHING TO HELL
I wouldn't expect any of the sprites to work, AT ALL, if that were the case

=== @EmilyV99 (discord: Emily) 10/29/2021 22:33

.....how the fuck is this not 1000x more broken?

=== @EmilyV99 (discord: Emily) 10/29/2021 22:34

wait no
you're looking at the wrong function
@arceusplayer11 (discord: Deedee)
```cpp
if ( s_version >= 6 ) 
{
    //al_trace("Reading Link Sprites v6\n");
    return readlinksprites3(f, s_version, dummy, keepdata);
}
else return readlinksprites2(f, s_version, dummy, keepdata);
```
`if(!p_igetl(&tile,f,keepdata))`
definitely reading as a long

=== @EmilyV99 (discord: Emily) 10/29/2021 22:41

@arceusplayer11 (discord: Deedee) ?

=== @EmilyV99 (discord: Emily) 10/29/2021 22:46


![image](https://cdn.discordapp.com/attachments/897794878149373993/903776825992437791/unknown.png)
try adding this line
`zc_custom.cpp`

=== @EmilyV99 (discord: Emily) 10/29/2021 22:48

....that won't fix it though
because `flip` literally has nothing to do with it drawing or not
does `extend` have the same issue?

=== @EmilyV99 (discord: Emily) 10/29/2021 22:52

If `extend` isn't `0`,`1`, or `2` it skips the drawing code

=== @ FireSeraphim 10/29/2021 22:52

I'm sorry guys, I was busy with house chores

=== @EmilyV99 (discord: Emily) 10/29/2021 22:53

so for the record, Fire, the bug here is in the quest file itself
....what caused said bug, not sure
but that'd be why we can't recreate it elsewhere

=== @ FireSeraphim 10/29/2021 22:53

strange... I swear I didn't do anything to cause it

=== @EmilyV99 (discord: Emily) 10/29/2021 22:54

What version was it last saved in before you updated to 2.55?
....praying your answer isn't `it started in 2.55`

=== @ FireSeraphim 10/29/2021 22:55

I've been building it in 2.55 but I believe the FYS tileset I've been using started out in 2.53, so I build my quest on the quest file for the FYS tileset
so basically it's a heavily modified 2.53 quest in a nutshell.

=== @EmilyV99 (discord: Emily) 10/29/2021 22:56

this one? https://www.purezc.net/index.php?page=tilesets&id=86

=== @ FireSeraphim 10/29/2021 22:56

yep

=== @EmilyV99 (discord: Emily) 10/29/2021 22:56

welp, that's now confusing
because loading that has no issues
So, my guess

=== @arceusplayer11 (discord: Deedee) 10/29/2021 22:56

Okay, so extend wasn't correct either

=== @EmilyV99 (discord: Emily) 10/29/2021 22:56

is that there *was* a bug in an older alpha
you saved in that alpha
that bug got fixed
but it stayed broken in the quest
the easy solution to this @arceusplayer11 (discord: Deedee) is to bound the values in `linktile()`
probably not with what I did above, actually
instead, try
`if(*flip > 3) *flip = 0;`
and `if(*extend > 2) *extend = 0`
.....but that won't actually fix the values in the .qst, hmm
so you'd want to do that.... for every single sprite type on load? That seems painful

=== @EmilyV99 (discord: Emily) 10/29/2021 22:59

how about this
```cpp
void fixSprite(int32_t* arr)
{
    if(arr[spr_flip] > 3) arr[spr_flip] = 0;
    if(arr[spr_extend] > 2) arr[spr_extend] = 0;
}```
then do like this:
change
```cpp
if(keepdata)
{
    walkspr[i][spr_tile]=(int32_t)tile;
    walkspr[i][spr_flip]=(int32_t)flip;
    walkspr[i][spr_extend]=(int32_t)extend;
}
```
to
```cpp
if(keepdata)
{
    walkspr[i][spr_tile]=(int32_t)tile;
    walkspr[i][spr_flip]=(int32_t)flip;
    walkspr[i][spr_extend]=(int32_t)extend;
    fixSprite(walkspr[i]);
}
```
that should force the values within bounds for any quests that might be broken

=== @arceusplayer11 (discord: Deedee) 10/29/2021 23:02

and do that for every single sprite in keepdata I'm guessing?

=== @EmilyV99 (discord: Emily) 10/29/2021 23:02

aye
in `readlinksprites3()`
`readlinksprites2()` should be fine, as that's only for quite old quests now (i.e. before tile page increase)
actually, how about this, even better

=== @EmilyV99 (discord: Emily) 10/29/2021 23:04

```cpp
void setSprite(int32_t* arr, int32_t tile, int32_t flip, int32_t ext)
{
    arr[spr_tile] = tile;
    arr[spr_flip] = (flip > 3 ? 0 : flip);
    arr[spr_extend] = (extend > 2 ? 0 : extend);
}```
then```cpp
if(keepdata)
{
    setSprite(walkspr[i], int32_t(tile), int32_t(flip), int32_t(extend));
}
```
simplifies the block to a function call, which will make it easier to change in the future in case of further issues

=== @arceusplayer11 (discord: Deedee) 10/29/2021 23:35

...goddamnit
I already got through half of them

=== @ FireSeraphim 11/01/2021 16:12

any progress on this?

=== @arceusplayer11 (discord: Deedee) 11/02/2021 01:29

it's fixed now, but a new nightly needs to come out

=== @arceusplayer11 (discord: Deedee) 11/03/2021 11:54

(meta) thread name was changed: üíäüîìMissing (but still strangly usable) one handed hold up option in player graphics menu

=== @EmilyV99 (discord: Emily) 11/03/2021 11:54

(feel free to post a nightly whenever, Dimi, you have a batch file to build them with...)

=== @arceusplayer11 (discord: Deedee) 11/03/2021 11:56

Yeah
I'm waiting on finishing some other stuff first
being a biiiit greedy with the nightly

=== @EmilyV99 (discord: Emily) 11/03/2021 11:58

you can always post one
and then post another
I've posted 3+ in a single night before lol\

=== @arceusplayer11 (discord: Deedee) 11/03/2021 11:59

Yeah, but I don't want to post one with a half implemented feature because I forgot to commit a state between finishing the last feature and starting the next

=== @ FireSeraphim 11/03/2021 17:30

I can now confirm that the holdup glitch is finally fixed. Thank you
@<role: ZC Council> feel free to close this. I have tested and confirmed that the holdup glitch is finally fixed in the latest nightly

=== @ tim 11/03/2021 17:31

council isnt staff
but they all cant see this anyway
anywho... noted

=== @arceusplayer11 (discord: Deedee) 11/03/2021 17:32

(meta) thread name was changed: ‚úÖüîíMissing (but still strangly usable) one handed hold up option in player graphics menu

=== @ FireSeraphim 11/03/2021 17:32

I kinda chose that since Dimi and Emily were on it and because lazinness

=== @EmilyV99 (discord: Emily) 11/03/2021 17:32

No need to ping to get a thread closed, anyone who needs to see it will see the unread messages @ FireSeraphim

=== @ FireSeraphim 11/03/2021 17:32

aye

=== @arceusplayer11 (discord: Deedee) 11/03/2021 17:33

Alright, that's another one off the list

=== @EmilyV99 (discord: Emily) 11/03/2021 17:33

And just choosing a ping like that is potentially annoying to any others with the role
## ‚úÖüîíCombo scripts broken (#963)
@EmilyV99 (discord: Emily) opened this issue on 10/13/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/897976431634677841



=== @EmilyV99 (discord: Emily) 10/13/2021 22:37

Moosh found this....
so
```cpp
#include "std.zh"
combodata script TorchGoOut
{
    void run()
    {
        //printf("RAN TORCHGOOUT\n");
        int counter = this->Attributes[0];
        int offset = this->Attributes[1];
        printf("0 - %d, %d\n", counter, offset);
        while(true)
        {
            printf("1\n");
            Screen->DrawInteger(6, this->X, this->Y, FONT_Z3SMALL, 0x01, 0x0F, -1, -1, counter, 0, 128);
            unless(Screen->State[ST_SECRET])
            {
                if(counter)
                    --counter;
                else
                {
                    printf("2\n");
                    //counter = this->Attributes[0];
                    Screen->ComboF[this->Pos()] = 95;
                    Screen->ComboD[this->Pos()] += offset;
                }
            }
            Waitframe();
        }
    }
}```

https://cdn.discordapp.com/attachments/897976431634677841/897976546902569030/torch.qst
The first time the script runs, the first trace traces `0 - 30, 1`
then `1` quite a number of times
then `2`
and the combo changes
that combo cycles back into the original combo
and then the script, starting over, traces `0 - 0, 0`.
then `1` and `2` on the same frame

![image](https://cdn.discordapp.com/attachments/897976431634677841/897977006090772520/unknown.png)
and then `1` followed by stack errors
@ZoriaRPG (discord: Timelord) @arceusplayer11 (discord: Deedee) something is VERY broken with combodata scripts, here.

=== @ mitchfork 10/13/2021 22:48

This smells similar to some bugs I had found with combodata scripts months ago where InitD values would reset (permanently) when you left the screen and required a hard close/open
dunno if that information would help find what's going on

=== @ZoriaRPG (discord: Timelord) 10/13/2021 23:57

Der
if you are cycling cobos

=== @ZoriaRPG (discord: Timelord) 10/13/2021 23:59

as soon as you change the combo the scrpt is NULL an may be undeined
alpha status or a reason

=== @ZoriaRPG (discord: Timelord) 10/14/2021 00:00

so I wold exect that exact error

=== @ZoriaRPG (discord: Timelord) 10/14/2021 00:02

what needs to happen s to exec a new combo script on cycle
they were not designed to carry script data across to a cycle to or a next

=== @ZoriaRPG (discord: Timelord) 10/14/2021 00:05

need t clear cobo script
data (all)

=== @ZoriaRPG (discord: Timelord) 10/14/2021 00:10

and then load ay script o THAT ob b first clearin ha data **and/or  ** (aps or llinjcvpp )he prior onel

=== @EmilyV99 (discord: Emily) 10/14/2021 00:10

so, cycling isn't clearing anything?

=== @ZoriaRPG (discord: Timelord) 10/14/2021 00:10

Npe

=== @EmilyV99 (discord: Emily) 10/14/2021 00:10

(The combo it's set to has no script data set up whatsoever, so a non-scripted combo cycling TO a scripted combo)

=== @ZoriaRPG (discord: Timelord) 10/14/2021 00:14

cobdata scri[voidr(){ts arev ipleentedin theirstasicfort an rvr intene fr thd
ee reettinerithr

=== @EmilyV99 (discord: Emily) 10/14/2021 00:15

. . .
english?

=== @arceusplayer11 (discord: Deedee) 10/14/2021 00:25

worlds first martian, we've had contact with alien life for the first time!
Do you come in pieces? üôÉ

=== @ Moosh 10/14/2021 01:34

So since this is apparently a hot mess, should I assume it's unsafe to use combo scripts on combos that can cycle at all? I have one in my quest currently and while it seems to be working fine, who knows what could be subject to change

=== @ Moosh 10/22/2021 02:50

A week later coming back to my question here: is it safe to use combodata scripts at all? Happening upon another situation where it would be convenient for me to use one and while it doesn't require changing back to a combo with a script, I'm worried about whatever it's doing here.

=== @EmilyV99 (discord: Emily) 10/22/2021 02:52

Feel free to try it and see if it has issues
if it doesn't, good; if it does, more to report

=== @ Moosh 10/22/2021 02:54

Alright will do. My concern is more whether this whole situation is feasible to fix. Or is it a case of poor foresight that could potentially get deprecated

=== @EmilyV99 (discord: Emily) 10/22/2021 02:55

Oh, it'll be fixed

=== @ Moosh 10/22/2021 02:56

Alright cool

=== @EmilyV99 (discord: Emily) 10/22/2021 02:56

just a matter of taking the time to dig into fuckery

=== @ Moosh 10/22/2021 02:56

Yeah perfectly understandable

=== @EmilyV99 (discord: Emily) 10/22/2021 02:56

things like new dialog design are much easier on the stress/mental energy
so, end up doing a lot more of that than other stuff

=== @ Moosh 10/22/2021 02:58

I can certainly relate to that
I've been avoiding enemy design like the plague lately
And doing every other system I possibly can first ü§£

=== @EmilyV99 (discord: Emily) 10/22/2021 02:59

I just finished `rowSpan`/`colSpan` for the new dialog system for grids
which is kinda vital for a lot of things, like for instance,
![image](https://cdn.discordapp.com/attachments/897976431634677841/900941523024248913/unknown.png)
To convert this (old dialog screenshot), I am gonna want the checkbox to `colSpan = 2`, since there's only one thing in that row, but 2 in every other row
(Text on the checkbox is actually *part* of the checkbox; the text on textfields/dropdowns is a separate widget)

=== @ Moosh 10/22/2021 03:16

```combodata script Barrel{
    void run(){
        mapdata thislayer = Game->LoadTempScreen(this->Layer());
        while(thislayer->ComboF[this->Pos]==0){
            Screen->FastTile(6, this->PosX(), this->PosY(), Link->Tile, 6, 128);
            Waitframe();
        }
        int pos = this->Pos;
        if(pos%16>0&&pos%16<15&&pos>15&&pos<160){
            thislayer->ComboD[this->Pos] = 0;
            Quit();
        }
    }
}```
Noticing another issue here which may just be the same one, when the combo sets its own ComboD to 0, the script thinks it's position is 0,0 for one frame afterwards. Tried sticking in a Quit() to fix this, but it occurs to me combodata scripts might not be able to do that by nature of how they work

=== @EmilyV99 (discord: Emily) 10/22/2021 03:21

They should quit when they quit, unless writing the `ComboD` auto-quits, which frankly it should

=== @ Orithan 10/22/2021 07:33

An instance of combo scripts being ???
https://discord.com/channels/876899628556091432/878114935396257852/901002641235140639
Might be related to this

=== @ Moosh 10/22/2021 08:28

Going off your description that sounds like intended behavior. Switching ComboD resets combo scripts and this is intentional. What isn't intentional is the weird corruption that happens when it tries to run a new one

=== @ Orithan 10/22/2021 09:01

The combo at the original position continues running that script if I push the combo back into place
Like its not that the script gets killed at that position, it gets suspended

=== @ Orithan 10/23/2021 05:18

A workaround to the whole "cannot cycle combo" thing can be done here:
```
Screen->FastCombo(this->Layer(), this->X, this->Y, this->ID+1, Screen->ComboC[this->Pos], OP_OPAQUE); //Draw the graphic of the next combo in the list to signify its been used, since combo cycling is not safe to do here.
```
This only works to display the next combo's graphic, so no extra functions

=== @ Orithan 10/23/2021 05:32

--==ZC CRASH==--
ZC will crash if you push a combo with another script over a combo where the first script was. The game will stop playing sound and hang for a little bit before it crashes.
Allegro\.log traced the following leading up to the crash:
```
Combodata script 2 (Dummy): Invalid ZASM command 6213 reached
Combodata script 2 (Dummy): Division by 0 Err: InvPower() exponent divisor cannot be 0!!
```

=== @ Orithan 10/23/2021 05:33

This I presume is the result of the game not clearing the first combo's script and then attempting to run a second script afterwards.
The more I think about it the more cursed combo scripts are...

=== @EmilyV99 (discord: Emily) 10/23/2021 05:37

uhg why were they implemented this poorly?

=== @ Orithan 10/23/2021 05:38

Does ZC really not have a way of telling when a scripted combo does not exist on x location anymore and then clearing the script before the new combo is registered by the engine?
Because this is consistent with how moving a combo with a script appears to suspend said script until the script combo returns to the position. Hooray for janky workarounds.

=== @EmilyV99 (discord: Emily) 10/23/2021 06:00

from the looks of this, @ZoriaRPG (discord: Timelord) just completely failed to add most of the checks necessary for combo scripts to function properly

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:25

I didn't think about push flags. I testes the most common stuff with non-changing combos and tested writing to the grid by script. I fully anticipated there to be issues that would need beta phase resolution.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:26

Until recently combo scripts weren't being used by anyone and thus nested logic for these interactions wasn't being tested.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:28

Note that push flags are something I would always have missed as I design them using negative layers and they would always replace blank space.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:29

E.g., a pressure plate would be on layer -2 and the block on layer 0.
Thus, both scripts would be running.
One would never replace the other.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:32

IDK how I'd uncouple the script on a combo when you legitimately replace it with a push flags, or how you'd safely continue running a combo script on anything in motion.
Every script is linked to grid position and layer.
This includes its stack and its refinfo.

=== @ Moosh 10/23/2021 06:33

The script that started this whole thread was a simple "count down and then write to the grid" type, so I'm not sure what caused it to go fucky if grid writes should be cleaning everything up properly

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:34

Writing ComboD should stop scripts running at that pos.
If not, then either I  forgot to commit a change, I missed something, or it is a timing problem.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:36

IIRC I intended to make descriptions a byte array and not a flagset, to allow uncoupling states.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 06:37

*doscript

=== @EmilyV99 (discord: Emily) 10/23/2021 07:26

I think it's clearing the `doscript`, but not the `refInfo`
as it "suspended, but started back up when the combo changed back to the original combo"
that indicates to me that `pc` wasn't cleared, even though `doscript` was

=== @EmilyV99 (discord: Emily) 10/23/2021 07:28

Having a moving block run a combo script seems like it would be a separate feature to implement

=== @EmilyV99 (discord: Emily) 10/23/2021 07:29

and, I'd expect pushing a block onto a new position to end the script being run by whatever was on the position, replacing it with any script from the block

=== @ Orithan 10/23/2021 08:32

Do combos tied to FFCs inherit any of the new combo properties?

=== @EmilyV99 (discord: Emily) 10/23/2021 08:46

Combo properties are tied to the combo type
so if the combo type functions on FFCs, it will have it's properties

=== @ Orithan 10/23/2021 08:48

Does it keep its script and attributes?

=== @EmilyV99 (discord: Emily) 10/23/2021 09:11

combo scripts don't run on ffcs
...because, you have ffc scripts

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:15

(replying to @EmilyV99 (discord: Emily) "Having a moving block run a c‚Ä¶"): ja
(replying to @EmilyV99 (discord: Emily) "and, I'd expect pushing a blo‚Ä¶"): and absolutely

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:17

The closest to this that I tested was a  ombo script that acted as a trigger when a block on another layer was in its pos.
I never intended for moving block sprites to run their combo scripts
And I never tested what happens if a moving block overwrites a combo running a script as none of my setups ever did that.
Heck , I never do thqt
I had that in 1.9x, but not in anything after layers existed
Moving blocks need to suspend and exit any script over which they are pushed and that is its own thing that needs to occur.
The script for a block should end when you push it as its. Grid pos changes
What is happening here is that the script and its refinfo are being corrupted with lithosphere of its destination.
...
I THINK I need to disable autocorrect
*with the refinfo and stack of its destination

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:23

Technically if you put a script on a block it would start anew with every positional change of the block.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:25

The engine reads the Cambodia for script ID and if that pos had doscript&1 then it will start e exuding that script with the refinfo of any script that was already running in that pos, on that layer.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:26

I had never even considered giving a movingblock a script, as having designed this, I know that it would not work as the combo script engine works based on grid I'd and layer.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:28

I don't know a good way around simply aborting scripts with regard  to moving blocks and changing combos. You could certainly change the 0/1 to. Quad system where 2 is for a slow suspension like item scripts and 3 is for restart status.
It would take some rewrites.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:29

Right not the doscript is bit shifted as one byte where the shift is the layer

=== @ZoriaRPG (discord: Timelord) 10/23/2021 09:30

Changing it to do anything else will require a 2d byte (or 4b bitfield) array instead.

=== @EmilyV99 (discord: Emily) 10/23/2021 10:51

So, I'm attempting to do several things at once here
1. I'm adding combo reset cleanup code to `modify_combo_postroutine`, so anywhere that's called will automatically handle cleaning up combo scripts
2. I'm adding specific script resetting code to `movingblock`
....and the big one, 3. Trying to add layer 1+2 pushblocks

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:10

Errr...enjoy?
I would do those one at a time, but to do as you will shall be the whole of the law.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:12


![image](https://cdn.discordapp.com/attachments/897976431634677841/901427736705380392/LayerPushBlock.mp4)
bwahahahaha
That was way too easy

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:12

Myself, I am going to enjoy my Shabbat.
And my wine, and my far, far reduced stress levels; and play some Famicom and Atari games ere I pass out in a stinking mess.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:14

So, to explain what I've done here
`Quest->Options->Combos->"Pushblocks Work on Layer 1 and 2"`
when you push a pushblock on a layer, it places the undercombo specified on that layerscreen in the position on that layer (thus how these two blocks have different undercombos)

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:15

Clearly one component  was easy to correct.
Oh
That wasn't related to the bug or to cdata scripts?

=== @EmilyV99 (discord: Emily) 10/23/2021 11:16

If multiple blocks are in the *same position* but on *different layers*, the highest layer block will be pushed first (as if pushing it off of the stack of blocks)
I had to work with blocks anyway, and wanted to do this while I was thinking about it
Hopefully the script issues will also be fixed

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:16

Blocks on layers is trivial. I didn't add that as I was working through 400 bug reports.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:18

@ Moosh @ Orithan See if the combo script stuff is better in this. Also enjoy the pushblocks on layers 1+2.
https://cdn.discordapp.com/attachments/897976431634677841/901429320034164846/buildpack.zip

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:20

I put a moratorium  on new feats including shyte I would use as I wanted to solve issues ere I add any more crud to this thing. Anyway, have fun. This isn't magical and it solves nothing,but it compounds the existing  issue as this can now occur across three layers instead of only one. I strongly advise fixing the crashes and related issues ere compounding them.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:20

Well, hopefully I fixed the issues as well
blocks now call `FFCore.reset_combo_script(blockLayer, combopos);` when altering a combo

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:21

I hope likewise, but I suspect  that combodata scripts need more than two run conditions.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:21

....I didn't handle cycling, unless that calls `combo_modify_postroutine`. Gotta check that next.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:21

Same as item data they need a cool down reset frame
I NEVER fekked with cycling. I never use it.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:22

oh, those call the postroutine
so they should be handled
```cpp
for(int32_t i=0; i<176; i++)
{
    if(newdata[i]==-1)
        continue;
        
    screen_combo_modify_preroutine(tmpscr,i);
    tmpscr->data[i]=newdata[i];
    if(newcset[i]>-1)
        tmpscr->cset[i]=newcset[i];
    screen_combo_modify_postroutine(tmpscr,i);
    
    newdata[i]=-1;
    newcset[i]=-1;
}
```

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:23

I don't create 'modern' quests. Either I am making something absurd and experimental, or I am making  a Z1 style quest, or some sort of tiny social commentary.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:24

I frankly don't recall how combo cycling works or where it lives. I have never needed to touch it and I don't personally use ite.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:25

If you recall, I don't even use animated combos for water.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:27

I never intended this feature to be used for such a comple me hanic and I'd why I added it other than DD saying we should have it.

=== @ZoriaRPG (discord: Timelord) 10/23/2021 11:28

I regret adding it at all.
It was on the DD todo list.

=== @EmilyV99 (discord: Emily) 10/23/2021 11:35

hmm, so it *mostly* seems fixed
only one problem, Moosh's test quest ends up running the script an extra time in the frame without the variables initialized still.... but it's no longer throwing a bunch of random errors.
and, that was because it was modifying *itself*; so when it reset its' own `do_script`, it just kept running
so now, when it's combo value is changed, it exits the script
which seems to make the test quest work perfectly
...don't have a test quest for @ Orithan 's issues

https://cdn.discordapp.com/attachments/897976431634677841/901434325982142484/buildpack.zip

=== @arceusplayer11 (discord: Deedee) 10/23/2021 17:50

(replying to @EmilyV99 (discord: Emily) ""): holy shit layer 1/2 pushblocks

=== @arceusplayer11 (discord: Deedee) 10/23/2021 17:55

(replying to @EmilyV99 (discord: Emily) "2. I'm adding specific script‚Ä¶"): I want to attempt to have a script continue running the comboscript when the block is pushed (which would probably be carrying over the script into a pushblock slot or something, need to figure out how combo scripts work currently) and then let the script continue running as is at the new position (with flags of course to enable or disable this behavior)

=== @arceusplayer11 (discord: Deedee) 10/23/2021 17:56

Whether it's actually feasible or not is another matter, but I feel like this feature is what people would *expect* out of a combo script. It's highly unfortunate how buggy and unusable combo scripts were, and even now they're still a bit jank v.v

=== @EmilyV99 (discord: Emily) 10/23/2021 21:20

Keep in mind the returns for `PosX()`, `PosY()`, `Pos()`, `Layer()`

=== @EmilyV99 (discord: Emily) 10/24/2021 00:43

(I'd expect returns of the block's X/Y/Layer, and `Pos() == -1` to indicate pushblock)

=== @arceusplayer11 (discord: Deedee) 10/24/2021 09:09

(replying to @EmilyV99 (discord: Emily) "(I'd expect returns of the bl‚Ä¶"): makes sense, ye

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:31

You'd need to clone all the scriptdata to the sprite, then copy it to the new combo. This seems extremely unsafe to me.
To start you'll need to ensure that movingblock sprites have all of the attributes that combos have...

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:33

They will need to copy the attributes  of the combo they originally occupied and that is just one of many copies  they will need. Not will be the script stack, and the refinfo.
I have no idea how feasible that would be.
Sprite class objects and combos have  very little in common. Be sure to add this to the subcla@ of sprite::movingblock
I suppose if this works, it can be copied to lifted combos in the future.
Again, I see this as initially unsafe.

=== @EmilyV99 (discord: Emily) 10/24/2021 12:36

Nothing needs to be added to movingblock

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:36

Also, -10000 as I recall is the return for invalid

=== @EmilyV99 (discord: Emily) 10/24/2021 12:37

All the combo stacks, refinfos, etc for combos are global
Expanding those arrays by 1 would suffice

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:37

You would want -n where n is a special value for a movingblock

=== @EmilyV99 (discord: Emily) 10/24/2021 12:37

Aye, if -1 is the error, then -2 or some other value should be used

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:38

Those need to be copied to the sprite, so that the sprite can run them instead during its frames of movement.
And PosX and PosY would return  MovingBlock x/y
Pos() would return a special value
Otherwise a number of facets would conceptually  break.

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:42

And iirc you can have more than one movingblock at a time. If I am mistaken, someone in the future may want to add that, and then you'd be back to this.

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:44

Copying the data to the sprite, and then copying it to the final rest pos at the end of the block slide, is probably  the only safe and future proof way for this and will ensure that the script runs during the movingblock animation.

=== @EmilyV99 (discord: Emily) 10/24/2021 12:45

(replying to @ZoriaRPG (discord: Timelord) "Those need to be copied to th‚Ä¶"): I see no reason to copy it to the sprite, when the sprite is effectively a singleton (one instance only)
expanding the global arrays `combo_stack[]`, `combo_refinfo[]` etc by 1 index would accomplish the same

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:47

ü§∑
Except that would always use memory

=== @EmilyV99 (discord: Emily) 10/24/2021 12:48

the movingblock is also always in memory
`movingblock mblock2;` is a global singleton

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:49

And if it is part of the movingblock subclass it only does when those exist, and it is tied to sprite instances...wait...why?

=== @EmilyV99 (discord: Emily) 10/24/2021 12:49

always in memory, regardless of if a block is moving or not

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:49

Gob

=== @EmilyV99 (discord: Emily) 10/24/2021 12:49

It quite literally just has one block in memory, and updates it's values as needed
Not very sensical, but, uh, yeah

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:50

I suppose it is leftover from v0.x
I feel as if script timing might break though if the script isn't transferred.
How should I know. I never conceptualised  needing this so I never planned it out.

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:53

I never thought of a good reason why a movingblock engine sprite would need to run a script.
I could see the block triggers needing them, but not the block itself.
In fact, I tested *that*
But not on layer 0
As I knew in advance that the block would overwrite but I expected I to overwrite with script==0
Thus, it should simply kill the script. This is a case that I never even considered.
IDK if this affects armos/chest crud.
It could, I suppose if a chest appears or certain combo changes due to secrets appear or armos are triggered

=== @ZoriaRPG (discord: Timelord) 10/24/2021 12:59

I likewise, until now, didn't in any way anticipate these special purpose combo types/flags to already be running scripts.
This is a lack of foresight due to instinctively knowing how the engine works and never considering these invalid uses.
I have no doubts that other oversights like this exist

=== @ Moosh 10/25/2021 14:26

Tried writing a similar script as before. Everything seems to work better now, though InitD[0] appears to still bug out and reset to 0
```combodata script LessDumbCycle{
    void run(int delay, int offset){
        int sfx = this->Attribytes[0];
        Waitframes(delay);
        if(sfx>0)
            Game->PlaySound(sfx);
        mapdata lyr = Game->LoadTempScreen(this->Layer);
        lyr->ComboD[this->Pos] += offset;
    }
}```
Example script where it bugs out
```combodata script LessDumbCycle{
    void run(){
        int sfx = this->Attribytes[0];
        int delay = this->Attrishorts[0];
        int offset = this->Attributes[0];
        Trace(delay);
        Trace(offset);
        Waitframes(delay);
        if(sfx>0)
            Game->PlaySound(sfx);
        mapdata lyr = Game->LoadTempScreen(this->Layer);
        lyr->ComboD[this->Pos] += offset;
    }
}```
And then my fixed one where I didn't use InitD

=== @ Moosh 10/25/2021 14:28

Unsure if it's just InitD[0] or if there's further issues. InitD[1] seemed to be working fine when I traced it. Alternating between -1 and 1 in this case
Also small ui thing I just noticed
![image](https://cdn.discordapp.com/attachments/897976431634677841/902202218881634344/unknown.png)

=== @EmilyV99 (discord: Emily) 10/25/2021 14:30

@arceusplayer11 (discord: Deedee) on the UI

=== @ZoriaRPG (discord: Timelord) 10/25/2021 15:42

@ Moosh base initD or sriting/reading this->InitD?

=== @ Moosh 10/25/2021 15:43

base

=== @arceusplayer11 (discord: Deedee) 10/25/2021 19:44

fuck
easy fix
(the ui I mean)

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:13

Wrong structure data access
@ Moosh  example script pls.

=== @ Moosh 10/27/2021 15:42

(replying to @ZoriaRPG (discord: Timelord) "@ Moosh  exampl‚Ä¶"): https://discord.com/channels/876899628556091432/897976431634677841/902201633583288350

=== @arceusplayer11 (discord: Deedee) 02/07/2022 02:43

@EmilyV99 (discord: EmilyV)

=== @arceusplayer11 (discord: Deedee) 02/07/2022 02:48

I know the UI is fixed, but did you ever do anything about InitD[0] resetting to 0?

=== @EmilyV99 (discord: Emily) 02/07/2022 03:02

uhh
no clue
test?

=== @arceusplayer11 (discord: Deedee) 02/07/2022 08:05

Tested it, no it is not fixed
bloody hell,  let's see what's wrong

=== @arceusplayer11 (discord: Deedee) 02/07/2022 08:23

@EmilyV99 (discord: EmilyV) you awake?

=== @EmilyV99 (discord: Emily) 02/07/2022 08:25

Not enough

=== @arceusplayer11 (discord: Deedee) 02/07/2022 08:25

fuck

=== @arceusplayer11 (discord: Deedee) 02/07/2022 08:43

okay, so
it's getting initialized correctly
the problem is that it's getting overwritten
```default:
        {
            if(arg >= D(0) && arg <= D(7))            ri->d[arg - D(0)] = value;
            else if(arg >= A(0) && arg <= A(1))        ri->a[arg - A(0)] = value;
            else if(arg >= GD(0) && arg <= GD(MAX_SCRIPT_REGISTERS))    game->global_d[arg-GD(0)] = value;
            
            break;
        }``` this appears to be what is clearing it

=== @arceusplayer11 (discord: Deedee) 02/07/2022 08:55

https://pastebin.com/9Sf0qfjp I'll be honest, I'm not the best at ASM

=== @EmilyV99 (discord: Emily) 02/07/2022 09:00

Compare an ffc script with 2 params with a combo script with 2 params, where both scripts just `Trace();` each param

=== @EmilyV99 (discord: Emily) 02/07/2022 09:01

```cpp
type script foo
{
    void run(int a, int b)
    {
        Trace(a);
        Trace(b);
    }
}```
Replace `type` with each type

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:07

It only happens if it's not the original placed combo
```FFC script 1 (LessDumbCycle2): ffc script:FFC script 1 (LessDumbCycle2): 14.0000
FFC script 1 (LessDumbCycle2): 17.0000
FFC script 1 (LessDumbCycle2): 14.0000
FFC script 1 (LessDumbCycle2): 17.0000
combodata script 1 (LessDumbCycle): initial combo script:combodata script 1 (LessDumbCycle): 15.0000
combodata script 1 (LessDumbCycle): -1.0000
combodata script 1 (LessDumbCycle): 15.0000
combodata script 1 (LessDumbCycle): -1.0000
combodata script 2 (LessDumbCycle3): combo script:combodata script 2 (LessDumbCycle3): 0.0000
combodata script 2 (LessDumbCycle3): 1.0000
combodata script 2 (LessDumbCycle3): 15.0000
combodata script 2 (LessDumbCycle3): 1.0000
Combo script 2 (LessDumbCycle3): Stack over or underflow, stack pointer = 0```
```#include "std.zh"

combodata script LessDumbCycle{
    void run(int delay, int offset){
    TraceS("initial combo script:");
    Trace(delay);
    Trace(offset);
    Trace(this->InitD[0]);
    Trace(this->InitD[1]);
        int sfx = this->Attribytes[0];
        Waitframes(delay);
        if(sfx>0)
            Game->PlaySound(sfx);
        mapdata lyr = Game->LoadTempScreen(this->Layer);
        lyr->ComboD[this->Pos] += offset;
    }
}

combodata script LessDumbCycle3{
    void run(int delay, int offset){
    TraceS("combo script:");
    Trace(delay);
    Trace(offset);
    Trace(this->InitD[0]);
    Trace(this->InitD[1]);
    }
}

ffc script LessDumbCycle2{
    void run(int delay, int offset){
    TraceS("ffc script:");
    Trace(delay);
    Trace(offset);
    Trace(this->InitD[0]);
    Trace(this->InitD[1]);
    }
}```

=== @EmilyV99 (discord: Emily) 02/07/2022 09:10

Doesn't seem like a zasm issue then
Probably in run_script?

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:12

uh
where exactly is combodata's run_script?
I see one for every other class but combodata

=== @EmilyV99 (discord: Emily) 02/07/2022 09:12

...no, not that

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:12

oh, nevermind

=== @EmilyV99 (discord: Emily) 02/07/2022 09:12

ffscript.cpp

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:13

```case SCRIPT_COMBO:
        {
            ri = &(comboScriptData[i]);

            curscript = comboscripts[script];
            stack = &(combo_stack[i]);
            int32_t pos = ((i%176));
            int32_t lyr = i/176;
            int32_t id = comboscript_combo_ids[i]; 
            this_combo_id = FFCore.tempScreens[lyr]->data[pos];
            if(!(combo_initialised[pos] & (1<<lyr)))
            {
                memset(ri->d, 0, 8 * sizeof(int32_t));
                for ( int32_t q = 0; q < 2; q++ )
                    ri->d[q] = combobuf[id].initd[q];
                combo_initialised[pos] |= 1<<lyr;
            }

            ri->combosref = id; //'this' pointer
            ri->comboposref = i; //used for X(), Y(), Layer(), and so forth.
            break;
        }```
Right, this
yeah, I traced this
the ri->d is being set properly I think
or at the very least, d[0] is being set and d[1] is beign set to what they are supposed to be

=== @EmilyV99 (discord: Emily) 02/07/2022 09:14

Both times?
What happens when a combo is "changed"
How is it changing

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:14

it's being changed by a comboscript changing itself

=== @EmilyV99 (discord: Emily) 02/07/2022 09:15

ComboD[] assign?
So, check that

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:15

```mapdata lyr = Game->LoadTempScreen(this->Layer);
        lyr->ComboD[this->Pos] += offset;``` yeah, but through mapdata

=== @EmilyV99 (discord: Emily) 02/07/2022 09:15

Ah

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:15

I'm guessing that's it's own thing?

=== @EmilyV99 (discord: Emily) 02/07/2022 09:15

Those are separate
MAPDATACOMBODD or something?

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:17

yup
https://pastebin.com/pn6ggvTK

=== @EmilyV99 (discord: Emily) 02/07/2022 09:18

Appears to be properly clearing the initialized state...

=== @EmilyV99 (discord: Emily) 02/07/2022 09:20

I have an idea, I'll check when I get upstairs

=== @EmilyV99 (discord: Emily) 02/07/2022 09:23


![image](https://cdn.discordapp.com/attachments/897976431634677841/940175956839116850/unknown.png)
Add `ri->pc = 0;` to this block

=== @EmilyV99 (discord: Emily) 02/07/2022 09:25

...or move this block above the `ri->pc++`
either would actuallywork I think?
the latter would probably be 'neater'
so, this
![image](https://cdn.discordapp.com/attachments/897976431634677841/940176868252987392/unknown.png)

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:27

the first thing fixed the problem, so at least that appears to be the issue

=== @EmilyV99 (discord: Emily) 02/07/2022 09:27

makes perfect sense
what's happening is
it changes the combo
clears all the data
that clears `ri->pc` to 0, as well

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:28

and then adds one

=== @EmilyV99 (discord: Emily) 02/07/2022 09:28

....but then it was adding 1

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:28

so it's offset
and thus reading the wrong thing off the stack

=== @EmilyV99 (discord: Emily) 02/07/2022 09:28

so it was skipping the first ZASM command

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:28

big oooof

=== @EmilyV99 (discord: Emily) 02/07/2022 09:28

which, is always a push
missing a push offsets the stack
and, it's the first initd
as soon as I realized it was clearing everything properly on changing the combo
I realized "wait, but this doesn't have the same auto-script-kill thing that things like `npc->Remove()` have, does it?"
it actually clearly did, but not quite in the right place.
extremely fucking stoned for the record

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:31

Did you just wake up and started smoking, or are you smoking before bed

=== @EmilyV99 (discord: Emily) 02/07/2022 09:31

I'm smoking trying to all-nighter to fix my sleep cycle

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:32

ooooof

=== @EmilyV99 (discord: Emily) 02/07/2022 09:32

been up 12 hours only

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:32

anyways @ Moosh  4 months late but this should be fixed in the next build

=== @EmilyV99 (discord: Emily) 02/07/2022 09:33

(meta) thread name was changed: ‚úÖüîíCombo scripts broken

=== @EmilyV99 (discord: Emily) 02/07/2022 09:37

oh wait, just realized a problem
this, uhh, would cause issues if you changed the combo to the same ID it already is?
because that check will fail

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:40

oof

=== @ Moosh 02/07/2022 09:41

4 months late isn't too bad when I'd completely forgotten this wasn't working ü§£
I don't use combo scripts a lot, turns out

=== @EmilyV99 (discord: Emily) 02/07/2022 09:43

I have a more robust fix
now when it clears the combo data, it sets a global var to the combo position modified (including layer info)
(`pos+176*lyr`)
then, the check compares that against the `i` value of run_script (which should be the same value for the correct combo script)
so, if that position is modified at all, it clears and exits.
@arceusplayer11 (discord: Deedee) I'll push, will need you to test

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:45

alright

=== @EmilyV99 (discord: Emily) 02/07/2022 09:45

I'll check that it compiles first at least

=== @EmilyV99 (discord: Emily) 02/07/2022 09:53

@arceusplayer11 (discord: Deedee) pushed

=== @arceusplayer11 (discord: Deedee) 02/07/2022 10:05

alright; might not test till tomorrow

=== @EmilyV99 (discord: Emily) 02/07/2022 10:07


https://cdn.discordapp.com/attachments/897976431634677841/940186947077427200/buildpack.zip

=== @arceusplayer11 (discord: Deedee) 02/08/2022 04:30

Okay what the fuck this is some cursed shit
it's not even working at all, and I'm tracing it back to "variable = another variable" not fucking working and that's scaring me

=== @arceusplayer11 (discord: Deedee) 02/08/2022 05:47

nevermind, I was being a stupid
and by I I mean Emily
@EmilyV99 (discord: EmilyV) you big stupid.

=== @arceusplayer11 (discord: Deedee) 02/08/2022 05:50

(you also smart cause you fixed it but also I need someone to throw under the bus)

=== @arceusplayer11 (discord: Deedee) 02/08/2022 05:58

updated buildpack (also has the bitmap stuff)

https://cdn.discordapp.com/attachments/897976431634677841/940486793621557258/buildpack.zip

=== @arceusplayer11 (discord: Deedee) 02/08/2022 06:32

(meta) thread name was changed: üíäüîìCombo scripts broken

=== @EmilyV99 (discord: Emily) 02/13/2022 05:12

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Moosh 02/15/2022 10:16

Tried using combo scripts again in the latest, this still seems to be bugged.
In this case I had a bush combo with InitD of 0, I slash it to turn it into a bush combo with InitD of 1. Both are using the same bush. Second one is behaving as if InitD is still 0. Which is the same bug that was happening before IIRC

=== @EmilyV99 (discord: Emily) 02/15/2022 10:18

Are you getting stack over/underflow errors still?

=== @ Moosh 02/15/2022 10:19

Seems not at least. Lemme try tracing the values

=== @ Moosh 02/15/2022 10:22

looks like the script isn't quitting when the combo changes

=== @ Moosh 02/15/2022 10:25

```combodata script RupeeBush{
    #option BINARY_32BIT on
    void run(int spawnItem){
        int anim;
        int d = Floor(this->Pos/32);
        int dbit = 1<<(this->Pos%32);
        if(Screen->D[d]&dbit){
            Quit();
        }
        
        printf("Combo %d Item %d\n", this->Pos, spawnItem);
        
        if(spawnItem){
            item itm = CreateItemAt(spawnItem, this->X, this->Y);
            while(itm->isValid()){
                Waitframe();
            }
            Screen->D[d] |= dbit;
        }
        else{
            int anim;
            while(true){
                anim = (anim+1)%360;
                if(anim%24==(this->Pos+7)%24){
                    ParticleAnim(this->X+Rand(-8, 8), this->Y+Rand(-8, 8), 968, 8, 8, 5);
                }
                Waitframe();
            }
        }
    }
}

lweapon ParticleAnim(int x, int y, int tile, int cset, int frames, int aspeed){
    lweapon l = CreateLWeaponAt(LW_SPARKLE, x, y);
    l->OriginalTile = tile;
    l->Tile = l->OriginalTile;
    l->CSet = cset;
    l->NumFrames = frames;
    l->ASpeed = aspeed;
    l->CollDetection = false;
    return l;
}
```
Here's the script. I'm converting it back to an FFC and giving up. Combo scripts were a mistake

=== @EmilyV99 (discord: Emily) 02/15/2022 10:26

What's changing the combo, exactly?

=== @ Moosh 02/15/2022 10:26

Engine

=== @EmilyV99 (discord: Emily) 02/15/2022 10:27

what engine

=== @ Moosh 02/15/2022 10:27

Bush->Next (131)

=== @EmilyV99 (discord: Emily) 02/15/2022 10:27

ok....
oh
give me like 10 minutes

=== @ Moosh 02/15/2022 10:33

I assume combo scripts are set up in such a way that the code for restarting them when the combo changes is copied across several different combo types?

=== @EmilyV99 (discord: Emily) 02/15/2022 10:33

It has to call a function when it changes a combo
and the slashable set of combos (`check_slash_block2()`) is missing the calls

=== @ Moosh 02/15/2022 10:34

welp

=== @EmilyV99 (discord: Emily) 02/15/2022 10:34

oh, so are pounds
fun

=== @ Moosh 02/15/2022 10:34

How about step->next?
Or some obscure stuff like block holes?
Possibly generic because that can also have ->next behavior

=== @EmilyV99 (discord: Emily) 02/15/2022 10:36

gonna be fun times
or, gonna want some way to generify it so this doesn't need to be shit
ghhh

=== @EmilyV99 (discord: Emily) 02/15/2022 10:41

So, every frame when combo scripts run
cache the combo id
if none was cached already
compare it to the previous cached value, and if it changed, clear the combo script data for that position, and update the cached value

=== @EmilyV99 (discord: Emily) 02/15/2022 10:58

building first test

=== @EmilyV99 (discord: Emily) 02/15/2022 11:04


https://cdn.discordapp.com/attachments/897976431634677841/943100529574289428/zquest.exe
https://cdn.discordapp.com/attachments/897976431634677841/943100530367025213/zscript.exe
https://cdn.discordapp.com/attachments/897976431634677841/943100531038117918/zelda.exe

=== @ Moosh 02/15/2022 11:06

Do I need to recompile to test?

=== @EmilyV99 (discord: Emily) 02/15/2022 11:14

shouldn't?

=== @ Moosh 02/15/2022 11:17

oh fuck right on off Discord, not you too
![image](https://cdn.discordapp.com/attachments/897976431634677841/943103693589471232/unknown.png)

=== @ Moosh 02/15/2022 11:22

@EmilyV99 (discord: EmilyV) Now it's restarting the script every frame ü§î

=== @ Moosh 02/15/2022 11:23

On both the slashed and unslashed bush to be clear

=== @ Moosh 02/15/2022 11:25

My guess would be that the function you stuck it in is also running every frame, but then why do it after I slash the bush as well

=== @EmilyV99 (discord: Emily) 02/15/2022 11:30

the fuck
oh
....ffs
I forgot one line

https://cdn.discordapp.com/attachments/897976431634677841/943107382928625704/zelda.exe

=== @EmilyV99 (discord: Emily) 02/15/2022 11:35

there's a debug print in that as well

=== @ Moosh 02/15/2022 11:49

Alright, it's working

=== @EmilyV99 (discord: Emily) 02/15/2022 12:09

woo!
For the record, what I forgot was really stupid

![image](https://cdn.discordapp.com/attachments/897976431634677841/943116881362043010/unknown.png)
I uh, totally forgot `cache_initialized = true;`

=== @EmilyV99 (discord: Emily) 02/15/2022 12:17

(meta) thread name was changed: ‚úÖüîíCombo scripts broken
## ‚úÖüîíCannot input negative script arguments less than 1 (#964)
@ Moosh opened this issue on 10/14/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/898035618335035392



=== @ Moosh 10/14/2021 02:32

Clicking out of the window or hitting the buttons to the right of the text box reverts the value back to positive if it's less than 1

=== @EmilyV99 (discord: Emily) 10/14/2021 02:34

in your build, if you backspace everything out of the field and then press `-`, does a `-` sign appear in the textfield?

=== @ Moosh 10/14/2021 02:34

Yes it does

=== @EmilyV99 (discord: Emily) 10/14/2021 02:35

then you have that other issue fixed, this is separate, fun
give me a minute
....oh
I already see it
how am I that dumb?

=== @EmilyV99 (discord: Emily) 10/14/2021 02:37

```cpp
v = atoi(tempstr);
v *= 10000;
if(v < 0)
    v -= atoi(ptr);
else v += atoi(ptr);```
spot the obvious logical flaw
so, now, ```cpp
v = atoi(tempstr);
v *= 10000;
if(tempstr[0] == '-')
    v -= atoi(ptr);
else v += atoi(ptr);```a bit smarter
just waiting for it to build
Also need you to test script access for `int Attrishorts[8];`
if you can

=== @ Moosh 10/14/2021 02:38

joy
The other combo script issue isn't getting fixed any time soon I assume? I'm kinda on a tight schedule, quest contest and all
Not to rush you guys or anything. Just saying if I can't test all these bugs, yeah there's reasons

=== @EmilyV99 (discord: Emily) 10/14/2021 02:40

I did the attrishorts earlier, before looking at that, just didn't take the time to build it
will try to take a look at it now, especially with zoria's response to help

=== @ Moosh 10/14/2021 02:41

gotcha

=== @EmilyV99 (discord: Emily) 10/14/2021 02:43


https://cdn.discordapp.com/attachments/898035618335035392/898038278828195890/buildpack.zip

=== @ Moosh 10/14/2021 02:46

Seems to still have the issue?

=== @EmilyV99 (discord: Emily) 10/14/2021 02:46

really, that didn't fix it?
hmm

=== @ Moosh 10/14/2021 02:47

lemme double check to make sure I didn't do a dumb

=== @ Moosh 10/14/2021 02:48

yeah it's still the same
Ah. But it fixed it on the hex button specifically

=== @EmilyV99 (discord: Emily) 10/14/2021 02:49

oh fek
I see
I fixed the read from the string to the value
but not the write from the value to a string
...and fun fact, `sprintf()`'s `%X` arg doesn't handle negative values at all.
So the hex mode already has special handling for negatives

=== @ Moosh 10/14/2021 02:50

Neat
Another small detail in this dialog
When I have a decimal place selected and type another number in, it doesn't take kindly to that
![image](https://cdn.discordapp.com/attachments/898035618335035392/898040137668239380/unknown.png)

=== @EmilyV99 (discord: Emily) 10/14/2021 02:51

oh?

=== @ Moosh 10/14/2021 02:51

Used to be it'd shift over the last place and remove it, now it just doesn't let me input anything without deleting one of the 0's

=== @EmilyV99 (discord: Emily) 10/14/2021 02:51

?????
so right now

![image](https://cdn.discordapp.com/attachments/898035618335035392/898040361136562196/unknown.png)
like this
I press `2`

![image](https://cdn.discordapp.com/attachments/898035618335035392/898040412655218748/unknown.png)
now like this
oh wait
I see

=== @ Moosh 10/14/2021 02:52

Yeah it works for numbers in front of the decimal, not the back

=== @EmilyV99 (discord: Emily) 10/14/2021 02:52

brain isn't working right now

=== @ Moosh 10/14/2021 02:52


![image](https://cdn.discordapp.com/attachments/898035618335035392/898040568834297897/unknown.png)

=== @EmilyV99 (discord: Emily) 10/14/2021 02:52

huh
ok

=== @ Moosh 10/14/2021 02:52


![image](https://cdn.discordapp.com/attachments/898035618335035392/898040642662457374/unknown.png)
Here's how 2.53 handled it
Mistakenly thought it shaved off the last decimal place

=== @EmilyV99 (discord: Emily) 10/14/2021 02:53

oh of course
because 2.53 literally uses a plaintext field, for the record
just with a numeric/`-`/`.` character filter
it has no idea what value is stored inside it
until the dialog closes entirely
the new system constantly stores the value, every single time you type a character

=== @ Moosh 10/14/2021 02:54


![image](https://cdn.discordapp.com/attachments/898035618335035392/898040946694946846/unknown.png)

=== @EmilyV99 (discord: Emily) 10/14/2021 02:54

so that it can update when you click the button
oh wow that doesn't even have a numeric filter
that's extra fun

=== @ Moosh 10/14/2021 02:54

it's pretty great

=== @EmilyV99 (discord: Emily) 10/14/2021 02:54

it just runs the string through `atoi`

=== @ Moosh 10/14/2021 02:54

It at least recognizes not to read these as garbage data

=== @EmilyV99 (discord: Emily) 10/14/2021 02:54

or, well, if it detects any `.` in the string, it uses a special version
aye
that's what `atoi` does
it reads the value as an integer
and when it hits an invalid character, it instantly just stops
so if the first character is invalid, it just returns `0`
I have an idea on how to handle that slightly better
(do the attrishorts work, btw?)

=== @ Moosh 10/14/2021 02:56

Haven't tested. Actually gotta get back into dungeon design now

=== @EmilyV99 (discord: Emily) 10/14/2021 03:02

ahk, seem to have fixed both the negative and the decimal places issue
...though how the decimal places one was fixed, is not how you would expect

=== @EmilyV99 (discord: Emily) 10/14/2021 03:03


https://cdn.discordapp.com/attachments/898035618335035392/898043393328947210/buildpack.zip

=== @EmilyV99 (discord: Emily) 10/14/2021 04:03

(meta) thread name was changed: ‚úÖüîíCannot input negative script arguments less than 1

=== @ Moosh 12/27/2021 07:57

@EmilyV99 (discord: EmilyV) Turns out this wasn't actually fully fixed. It still happens with all the other number fields in the FFC editor ü§¶

=== @EmilyV99 (discord: Emily) 12/27/2021 11:31

ah crap
something's broken in the actual string parsing function

=== @ Moosh 12/27/2021 11:32

Ah, is that it?
I figured both tabs were using different settings for text fields
Because the first tab lets you type anything while the script one is restricted to numbers only

=== @EmilyV99 (discord: Emily) 12/27/2021 11:33

the base parsing function for strings is shared
the difference is the second tab has fancy fields that restrict the input

=== @ Moosh 12/27/2021 11:34

I see. So that input restriction was unrelated to the string parsing fix?

=== @EmilyV99 (discord: Emily) 12/27/2021 11:34

correct

=== @ Moosh 12/27/2021 11:34

Script tab is still working fine btw

=== @EmilyV99 (discord: Emily) 12/27/2021 11:35

building a hopeful fix now

=== @EmilyV99 (discord: Emily) 12/27/2021 11:40

@ Moosh
https://cdn.discordapp.com/attachments/898035618335035392/924990159143964702/zquest.exe
https://cdn.discordapp.com/attachments/898035618335035392/924990159852818433/zelda.exe

=== @ Moosh 12/27/2021 11:42

All appears to be in working order
I assume this build still has the funky stuff going on that makes it inadvisable to use?

=== @EmilyV99 (discord: Emily) 12/27/2021 11:43

Deedee noticed some memory wonkiness
could be something bad, could be something minor

=== @ Moosh 12/27/2021 11:44

I reported this on behalf of tacochopper, so I'll let him know the fix is pending üëç

=== @EmilyV99 (discord: Emily) 12/27/2021 11:45

See, the only problem now is
I hate this dialog, looking at it
and now I really want to remake it in the new gui system so it's better

=== @EmilyV99 (discord: Emily) 12/28/2021 14:52

sooo
#deleted-channel
## Add NPC Strings to New GUI (#965)
@ZoriaRPG (discord: Timelord) opened this issue on 10/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/898412516567298100



=== @ZoriaRPG (discord: Timelord) 10/15/2021 03:30

The proc for Screen->Enemies need a new tab with ten choose buttons that select a string n the string editor each aired with a numerical edit field to match the string ID (display or manual entry).

=== @ZoriaRPG (discord: Timelord) 10/15/2021 03:32

Editing this would write to MapScr[n]->npcstrings[i].

=== @ZoriaRPG (discord: Timelord) 10/15/2021 03:33

The data has been allocated for years and is designed to be integrated with 'friendly' enemy types to allow talking to them. (They would display the string allocated to their load slot on correct interaction.)

=== @ZoriaRPG (discord: Timelord) 10/15/2021 03:35

e.g., proximity, facing the npc, pressed action button assign to speech/read interactions.
for now,being able to set store and save this data is very useful

=== @ZoriaRPG (discord: Timelord) 10/16/2021 00:41

@EmilyV99 (discord: EmilyV) Any chance of this soon? i can do the npc side but I have yet to touch the new UI  stuff

=== @EmilyV99 (discord: Emily) 10/16/2021 01:20

It'll be on the list, as most UIs are, when it gets gotten to. There's plenty of GUIs to update.
currently ripping my hair out trying to get everything converted to using `<cstdint>` types

=== @EmilyV99 (discord: Emily) 10/16/2021 01:23

(A lovely `find+replace` attempt left me with >20k errors, so now it's just about whittling those down)

=== @ZoriaRPG (discord: Timelord) 10/16/2021 04:03

then I might do it the old way for now

=== @ZoriaRPG (discord: Timelord) 10/16/2021 04:05

Sounds as if you are inventing work for no gain again IMO converting types

=== @ZoriaRPG (discord: Timelord) 10/16/2021 04:06

finishing talking npcs is higher up my totem pole than syntax reform
## Add Screen-ExtraItems Proc (#966)
@ZoriaRPG (discord: Timelord) opened this issue on 10/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/898414404759060490



=== @ZoriaRPG (discord: Timelord) 10/15/2021 03:38

There are three arrays or up to ten extra specal items on mapscreens. One contains the item ID (should t to -1) and the other two are or x and y coods. The latter two should both nit to -32767
Even if there is no engine implementation this is very useful for scripts such as extra chests, &c.

=== @EmilyV99 (discord: Emily) 10/15/2021 03:43

@arceusplayer11 (discord: Deedee) was thinking about stuff like this, so if there are already arrays to work with, that could be useful
## ‚úÖüîíPassive Subscreen Scripts do not run 1 frame after Map Script ends (#967)
@ Orithan opened this issue on 10/15/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/898522369835028500



=== @ Orithan 10/15/2021 10:47

Passive Subscreen Scripts do not appear to run 1 frame after the map script ends.

Version: 2.55 Alpha 97
OS: Windows 10

=== @EmilyV99 (discord: Emily) 10/22/2021 01:39

Does the engine passive subscreen update on that frame?
What occurs with normal spacebar map?

=== @EmilyV99 (discord: Emily) 02/07/2022 10:07

@ Orithan https://cdn.discordapp.com/attachments/897976431634677841/940186947077427200/buildpack.zip
Does this fix this issue?

=== @EmilyV99 (discord: Emily) 02/07/2022 10:51

(meta) thread name was changed: üíäüîìPassive Subscreen Scripts do not run 1 frame after Map Script ends

=== @EmilyV99 (discord: Emily) 02/09/2022 15:19

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Orithan 02/21/2022 03:03

Appears to be fixed.

=== @EmilyV99 (discord: Emily) 02/21/2022 13:51

(meta) thread name was changed: ‚úÖüîíPassive Subscreen Scripts do not run 1 frame after Map Script ends
## weapon immortal (#968)
@EmilyV99 (discord: Emily) opened this issue on 10/16/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/898889446982832188



=== @EmilyV99 (discord: Emily) 10/16/2021 11:05

@ZoriaRPG (discord: Timelord)

=== @ZoriaRPG (discord: Timelord) 10/17/2021 14:53

**General Plan Outline**

Add immortal flag to lwpns. (Ewpns can wait)
Add ZS lwpn->Immortal to set this flag.
Add a check for the immortal flag to wpn deletion (see my QR for not deleting offscreen wpns), *except*, if a wpn is > 32768, or < -32768 on x/y and the QR is not enabled, then just toggle immortal=false.
Add a wrapper to all actions that set wDead as if(!immortal) deadstate  = wDead

=== @EmilyV99 (discord: Emily) 10/17/2021 20:23

If it would be to match `npc->Immortal`, the immortal state should prevent screen edge death as well

=== @ZoriaRPG (discord: Timelord) 10/18/2021 13:35

(replying to @EmilyV99 (discord: Emily) "If it would be to match `npc-‚Ä¶"): Add a check for the immortal flag to wpn deletion (see my QR for not deleting offscreen wpns), except, if a wpn is > 32768, or < -32768 on x/y and the QR is not enabled, then just toggle immortal=false.

=== @ZoriaRPG (discord: Timelord) 10/18/2021 13:36

I thin that signed short is practical to prevent roklover but whatever
you want it to wrap back and eat up a sprite when it is that far away you can always ass a rule

=== @ZoriaRPG (discord: Timelord) 10/18/2021 13:38

once it work you can do w/e you wish
as far as I can see what I outlined should work

=== @ZoriaRPG (discord: Timelord) 10/24/2021 17:45

Going to be another week or two. Doing day trading now. Shouldstil be easy but I now need to focus on income as I am no longer obligated to work on this and it is many times harder to apply commits that my time expense may as well wait for full implementation  and tests, which to say the least takes 5x longer noe.

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:20

Jfyi it will be another week or two.
I am involved in some investments,  and sending stuff to wata to grade
In the space while they are grading my stuff I will have some free time

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:22

Once they do. I will again have constraints as I s.ell o$ those games,  send more to wata qnd other grading firms, and convert these assets into silver,  gold and crypto
Sorry, but I am preparing for huge inflation issues a d need to think of my ability to eat ere this
But I will eventually get to it if bed on the info that I provided , no-one else does first
## 6-and-8-frame-enemy-animation (#969)
@ P-Tux7 opened this issue on 10/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/899460792590667776



=== @ P-Tux7 10/18/2021 00:56

Monodirectional. This is intended for setting the Guy fires to it in the Enemy Editor, to mimic BS Zelda

=== @ P-Tux7 10/25/2021 16:35

Oh yeah, how'd I forget. The fire enemy (guarding Zelda) in BS Zelda is also 6 frames.

=== @ P-Tux7 03/11/2022 23:20

I made these tiles for Cambria as BS-style fire tiles, but they can easily be used in the default tileset as the "New Enemy Tiles" for the Fire enemy and Guy (and Guy Fire, if that ever gets implemented as a Misc. Sprite) to demonstrate these new kind of animation styles if they get added. 6 frames on top, 8 frames on bottom.
![image](https://cdn.discordapp.com/attachments/899460792590667776/951983019705651270/bsfire.png)

=== @ P-Tux7 07/13/2022 17:29

okay, note to self
https://github.com/ArmageddonGames/ZeldaClassic/blob/b3eb6426adfb9b473fd94709c23a19f033b98f61/src/guys.cpp#L8690
## qr-sideview-screens-left-right-only (#970)
@ P-Tux7 opened this issue on 10/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/899717812107481099



=== @ P-Tux7 10/18/2021 17:57

Inspired by @arceusplayer11 (discord: Deedee) 's new QR to make sideview swimming only let the player face left and right. This is the same thing but for sideview. The one exception would be if the player is using a sideview ladder, where the up and down directions would be allowed, and only up would be allowed if the "Force Player to Face Up on Sideview Ladders" QR is checked. I presume the up and down directions would be allowed in the cases of Ladders and Rafts as well, as well as the Spin Attack/Hurricane spin.
This was inspired by TheRock's Mario quest.

=== @arceusplayer11 (discord: Deedee) 10/18/2021 22:12

Wouldnt be hard to do

=== @ P-Tux7 10/20/2021 02:26

@ Architect Abdiel does this sound good to you

=== @ Architect Abdiel 10/20/2021 17:55

I don't really understand.
Wait. I think I get it. So the QR would just be for sideview in addition to sideview swimming.

=== @ P-Tux7 10/20/2021 19:44

Yeah
This also means that you can make Gohmas that need you to be on a sideview ladder or the item Ladder to shoot them
You can also use Boomerangs in new ways, since they're one of the only weapons you can aim up, down, or diagonal while facing left or right.
To hit crystal switches, combo flag switches, break customized bush combos, or kill enemies
This also applies to all other items while you are on a sideview ladder or item Ladder, such as only being able to shoot the arrows or wand up and down to hit the above mentioned things while on one of those ladders. There's a lot of puzzle potential there

=== @ P-Tux7 10/20/2021 19:48

Or using the hookshot up/down while on a ladder, or using the hammer up/down while on a ladder...

=== @ P-Tux7 10/20/2021 19:49

(Don't forget the many newly hookshottable things - bush combos, pushblocks, magic sponges/prisms, hammer pegs, treasure chests...)
Oh yeah and you can make signposts/npcs and treasure chests openable from the left/right as well. So you can have truly sideview chests like Mario 3.
(Or use the downwards-facing ones in a puzzle, hahaha...)

=== @ P-Tux7 10/20/2021 19:51

That's right, if this rule gets added you can be that evil all without scripting.

=== @ Architect Abdiel 10/20/2021 21:03

I like it.

=== @ P-Tux7 11/05/2021 01:20

@arceusplayer11 (discord: Deedee) ... was this added yet? We need to do some testing in the sideview engine regarding Castlevania stairs, since IIRC they used up/down

=== @arceusplayer11 (discord: Deedee) 11/05/2021 11:34

Not yet

=== @ P-Tux7 11/05/2021 14:01

np
just asking in case we had to get to testing it
## üíäüîìDemo ZX - Shopkeeper appears when you kill a Gohma form (#971)
@ NightmareJames opened this issue on 10/18/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/899734880122966086



=== @ NightmareJames 10/18/2021 19:05

Long story here, but reproducable

=== @ NightmareJames 10/18/2021 19:06

You get to Level 1, I put in now completely non-teleporting  teleporting Wizzrobes with the Red Wizzrobes on Form 1, message plays before.  You go to the Blue Gohma, Form 2.  Intentionally die (or die or whatever).  You come back to the boss room and you get a shopkeeper and you can't advance, plain and simple

=== @ NightmareJames 10/18/2021 19:13

https://youtu.be/FVksIGoWR9k - Video demonstrating the bug

=== @ NightmareJames 10/18/2021 19:14

Version from Alpha 98/99 using Alpha 98 compiled scripts
https://cdn.discordapp.com/attachments/899734880122966086/899737290434302042/demozx255_-_old_version.qst
Using freshly recompiled scripts in latest nightly
https://cdn.discordapp.com/attachments/899734880122966086/899737365906604105/demozx255_-_recompiled_scripts.qst
@ 4matsy @ naturesucks were in attendance on the stream when this ugliness happened

=== @ tim 10/18/2021 19:17

yeah this was a weird one

=== @ NightmareJames 10/21/2021 12:17

Still occuring in the latest nightly @EmilyV99 (discord: EmilyV) .  Hate to do this with your workload, but tagging you on this too @ Moosh since this deals with scripting
Just wondering when there will be an estimated timetable for look at or fix so I don't be a pain in the ass about it

=== @EmilyV99 (discord: Emily) 10/21/2021 14:07

...no one posted here saying it was worked on at all, @ NightmareJames . No need to ping.

=== @ NightmareJames 10/21/2021 14:09

OK.  Estimated time?

=== @EmilyV99 (discord: Emily) 10/21/2021 14:09

<:LinkShrug:704789324746588301>

=== @ NightmareJames 10/21/2021 14:11

LMK when you start looking at it then, I'll work on other stuff and post an update then on the project forum
God I hate phone keypads
Thank you in advance

=== @arceusplayer11 (discord: Deedee) 02/09/2022 12:45

what the fuck.
this is really bizarre

=== @ NightmareJames 02/09/2022 21:20

Yeah, it is
Do you want me to retry in latest alpha?

=== @arceusplayer11 (discord: Deedee) 02/09/2022 23:42

I already tried, it still exists

=== @arceusplayer11 (discord: Deedee) 02/12/2022 08:30

This might have been broken this whole time; it was accessing random memory and presumably the reason it was never caught was cause shopkeepers couldn't be spawned in engine probably
either that, or the random memory pointed elsewhere
(meta) thread name was changed: üíäüîìDemo ZX - Shopkeeper appears when you kill a Gohma form
Fixed now

=== @ NightmareJames 02/12/2022 10:15

Go fig, test it out by Monday, have CD today, and work too
TY

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:49

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ NightmareJames 02/14/2022 12:44

Going to have to make it for tomorrow
Got scheduled for tonight
Sorry for the delay

=== @ NightmareJames 02/16/2022 05:21

Today turned out to be a crazy day, tomorow hopefully better

=== @ NightmareJames 02/17/2022 02:07

This is fixed in test mode using a recompile, will make a formal test soon

=== @ NightmareJames 02/21/2022 00:21

Hopefully will get to it tomorrow again

=== @ NightmareJames 02/23/2022 20:48

Called into work, stress test went well

=== @ NightmareJames 03/03/2022 01:50

Still working on this
Unarchiving to keep a personal reminder

=== @ 4matsy 03/03/2022 02:34

It's dead.
It's SO dead.
üòÉ

=== @ NightmareJames 03/03/2022 03:04

Dead as a doornail
## ‚ùåüîíDWeapon class (#972)
@ Alucard648 opened this issue on 10/18/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/899769078653263874



=== @ Alucard648 10/18/2021 21:21

This is class, similar to LWeapons and  Eweapons, for projectiles that pose threat to both enemies and Hero, such as magic created by magic prism combos.

=== @EmilyV99 (discord: Emily) 10/18/2021 21:24

god no
just no
not splitting a third weapon type off of this jank ass shit
lweapons/eweapons are bad enough
(meta) thread name was changed: ‚ùåüîíDWeapon class
## üíäüîìSecrets-Item does not spawn with hit all triggers (#973)
@ Moosh opened this issue on 10/19/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/899841391042134116



=== @ Moosh 10/19/2021 02:08

Secrets->Item doesn't trigger on a screen with Hit All Triggers->Perm Secret until you leave the screen and re-enter. Inconsequential to me, but may affect other's design.

=== @EmilyV99 (discord: Emily) 10/19/2021 02:16

Guessing `Screen->SecretsTriggered()` is also returning false in that circumstance?

=== @ P-Tux7 11/12/2021 10:14

interested here too

=== @EmilyV99 (discord: Emily) 11/14/2021 23:06

so, actually, I feel like I understand the issue here
I'm guessing if you place a bomb/burn/arrow/etc flag, it also won't trigger those?
and that it would only trigger flags `16-31`?

=== @ Moosh 11/14/2021 23:17

Sorry for late response. Been a while since the screen where I ran into this issue. In my case it was a group of torches with flags 4/95. No 16-31 on the screen though I believe I tested with that flag both on and off

=== @EmilyV99 (discord: Emily) 11/14/2021 23:18

Err, my point was, try placing a bomb flag somewhere in the screen
And it won't trigger from all torches being lit
Is my theory

=== @ Moosh 11/14/2021 23:19

Yeah that is the idea

=== @EmilyV99 (discord: Emily) 11/14/2021 23:19

So, it also doesn't trigger secrets->item
As screen secrets are not triggered
Just 16-31 are triggered

=== @ Moosh 11/14/2021 23:19

But there's a flag for that
And on reentering the screen the item did drop

=== @EmilyV99 (discord: Emily) 11/14/2021 23:20

Because it set perm secrets
So on re- entering, all secrets trigger

=== @ Moosh 11/14/2021 23:20

And this isn't a bug?

=== @EmilyV99 (discord: Emily) 11/14/2021 23:20

technically intended behavior, since it only triggers 16-31

=== @ Moosh 11/14/2021 23:21

I think something's not coming across here but gotta eat dinner. bbl

=== @EmilyV99 (discord: Emily) 11/14/2021 23:21


![image](https://cdn.discordapp.com/attachments/899841391042134116/909583843168755774/unknown.png)
is this flagged or not?

=== @EmilyV99 (discord: Emily) 11/14/2021 23:25

oh
yeah
fucking wow
`fTRIGGERFPERM` sets perm secrets
but *not temp secrets*
`fTRIGGERF1631` changes flags 16 through 31 to their secret combos
but does not trigger *any* type of "secrets"
it manually replaces flag 16-31 spaces
so, neither of these triggers "temp secrets"
thus nothing calls down the item
this seems mostly intentional, based on the design of these flags
....changing the `->Perm Secret` one to also trigger temp secrets, and adding a compat rule for the old behavior, would probably be smart though.

=== @ Moosh 11/14/2021 23:45

Aha I see
It seems to me like ->Perm Secret should set the temp secret as well, especially if it does so immediately upon reentering the screen already
because that's the main thing that makes the behavior seem buggy. That it's behaving differently when the secret is triggered vs. when the screen is entered

=== @EmilyV99 (discord: Emily) 11/14/2021 23:46

it's "technically intentional"
but the idea that anything that doesn't trigger the screen's full temp secrets should set the perm secret flag is flawed inherently

=== @ Moosh 11/14/2021 23:47

mhm

=== @EmilyV99 (discord: Emily) 11/14/2021 23:47

....the same issue existed with `Enemies->Secret` being permanent until a recent QR addition
as, did you know Enemies->Secret only triggered 16-31, and nothing else?

=== @ Moosh 11/14/2021 23:48

Secrets system kinda sounds like a mess

=== @EmilyV99 (discord: Emily) 11/14/2021 23:48

it really is
inherently flawed in many ways

https://cdn.discordapp.com/attachments/899841391042134116/909590620732014592/buildpack.zip
so, try this
will need to disable compat rule

=== @EmilyV99 (discord: Emily) 02/08/2022 11:41

@ Moosh

=== @EmilyV99 (discord: Emily) 02/08/2022 13:19

(meta) thread name was changed: üíäüîìSecrets-Item does not spawn with hit all triggers
(try in a more recent build than the one posted above as that's a bit old now)

=== @EmilyV99 (discord: Emily) 02/09/2022 15:18

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ P-Tux7 02/15/2022 05:46

@ Moosh
## ‚úÖüîíCrash on blitting missized bitmap (#974)
@ Moosh opened this issue on 10/20/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/900339313936580628



=== @ Moosh 10/20/2021 11:07

I don't know what the exact cause of this was, but I've had crashes with this code block
```            int w = 16-activeFrames/2;
            int h = 32-activeFrames;
            int x = this->X+(16-w)/2;
            int y = this->Y-16+(32-h)/2;
            b->ReplaceColors(0, c, 0x91, 0x97);
            b->Blit(2, RT_SCREEN, 0, 0, 16, 32, x, y, w, h, 0, 0, 0, mode, 0, true);
            
            ++activeFrames;
            if(this->DeadState==1||activeFrames>16){
                TempBMP[bitid]->Create(0, 1, 1);
                this->DeadState = 1;
                Quit();
            }```
The particular problem seems to have been the `TempBMP[bitid]->Create(0, 1, 1);` after the blit (b and TempBMP[bitid] are the same bitmap in this case)

=== @ Moosh 10/20/2021 11:09

So changing the draw layer for Create() to 2, fixed it. My assumption here is that when I resize the bitmap (to flag it as freed for my temp bitmap system), it performed that operation before Blit() because of layer order and this lead to it trying to draw a bitmap smaller than I intended.

=== @EmilyV99 (discord: Emily) 10/20/2021 20:34

Aye, that's a script error. Shouldn't cause a crash, though...

=== @EmilyV99 (discord: Emily) 10/22/2021 22:08

@ Moosh I can't replicate a crash in similar circumstances
can you provide a test quest where the crash occurs?

=== @ Moosh 10/22/2021 22:11

oh geez, I've so long since fixed the crash I don't know if I still have the full script that did it

=== @ Moosh 10/22/2021 22:12

I was sure it was specifically those two lines. It may also be to do with my temp bitmap global script, so I can try linking you that

=== @EmilyV99 (discord: Emily) 10/22/2021 22:13

All I need is a way to make the crash occur
because if it crashes while linked to the debugger, it tells me the exact line that caused the crash

=== @ Moosh 10/22/2021 22:14

yeah I figured as much. And I figured just something along the lines of those two lines would do it because I'd narrowed down the cause to just that

=== @EmilyV99 (discord: Emily) 10/22/2021 22:14


![image](https://cdn.discordapp.com/attachments/900339313936580628/901232023312670731/unknown.png)
I tried this, and a bunch of tweaking it totry to get it to crash
but it just doesn't

=== @ Moosh 10/22/2021 22:20

Only real differences I can think with my setup is the bitmap is very small (16x32) and the scale can sometimes be non integer. Can't see why that would crash though.
I'll try and see if I can reproduce it myself

=== @EmilyV99 (discord: Emily) 10/22/2021 22:22

The scale there should be non-integer
and changing it to `1x1` should be enough, if that actually has anything to do with it

=== @ Moosh 10/22/2021 22:22

oh also it was running off a weapon script. Once again shouldn't have any impact on the timing or scale of the bitmap

=== @EmilyV99 (discord: Emily) 10/22/2021 22:22

I'm just baffled that this is this elusive
I figured it'd be a quick fix

=== @ Moosh 10/22/2021 22:22

Yeah it seemed incredibly straightforward
I guess if it's rare that's a good thing

=== @ Moosh 10/22/2021 22:31

```global script Crashy{
    void run(){
        bitmap b = Game->AllocateBitmap();
        b->Create(0, 16, 32);
        
        while(true){
            b->Create(0, 16, 32);
            for(int i=0; i<32; ++i){
                b->Clear(0);
                b->FastTile(0, 0, 16, Link->Tile, 6, 128);
                b->ReplaceColors(0, 0x81, 0x61, 0x6F);
                b->Blit(2, RT_SCREEN, 0, 0, 16, 32, Link->X+32, Link->Y-16, i/2, i, 0, 0, 0, 0, 0, true);
                if(i==31)
                    b->Create(0, 1, 1);
                    
                Waitframe();
            }
        }
    }
}```
Okay does this one crash for you?

=== @ Moosh 10/22/2021 22:32

better yet here's just the test quest I used
https://cdn.discordapp.com/attachments/900339313936580628/901236717992968302/BitmapCrashTestDummy.qst

=== @EmilyV99 (discord: Emily) 10/22/2021 22:40

that crashes, perfect. Now for debug mode.

=== @EmilyV99 (discord: Emily) 10/22/2021 22:42

well, it seems to be... where I would likely have expected, in general. Which makes me confused why mine *didn't* crash.

=== @ Moosh 10/22/2021 22:44

glad it wasn't some convoluted combination of my global systems at least

=== @EmilyV99 (discord: Emily) 10/23/2021 00:41

See, I thought Allegro was supposed to handle this for us, frankly, based on how everything was coded
and what I think is happening
....hopefully what I just attempted will fix it.

=== @EmilyV99 (discord: Emily) 10/23/2021 00:46

ah, it has
now it's just looping the animation repeatedly, never crashing
given, it's still an error on the script side, as the last frame it's drawing `1x1` instead of `16x32`
but, no more crashy

=== @EmilyV99 (discord: Emily) 10/23/2021 00:50

building a release build now

=== @EmilyV99 (discord: Emily) 10/23/2021 00:59

So, what I had to do to fix this
is, if `sx + sw > sourceBitmap->w || sy + sh > sourceBitmap->h`
it now creates a new bitmap that is `sw x sh` sized
clears that to `0`, and draws what is in-bounds from `sourceBitmap` to this new bitmap
then uses that for the draw
(so, anything "out of bounds" will read as "0", instead of reading as "crash everything")

=== @EmilyV99 (discord: Emily) 10/23/2021 01:04


https://cdn.discordapp.com/attachments/900339313936580628/901274837941641226/2.55_Nightly_Build_Package.zip

=== @EmilyV99 (discord: Emily) 10/24/2021 00:41

(meta) thread name was changed: ‚úÖüîíCrash on blitting missized bitmap
## Adding Item Property to Whistle to disable sword jinxes (#975)
@ NightmareJames opened this issue on 10/20/2021

Status: closed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/900382427061559337



=== @ NightmareJames 10/20/2021 13:58

Another Z1 compatibility issue, put a flag in the Whistle if you play it, it removes temporary sword jinxes.  I can make LoZ videos to verify this

=== @ NightmareJames 10/20/2021 13:59

Not by any means a big priority, but would be nice.  Just putting it out there

=== @ P-Tux7 10/20/2021 15:45

so the way it worked in z1 was that playing the whistle didn't stop the countdown for the temporary jinx
so its not that the whistle was coded to remove the jinx, the jinx timer just expires on its own due to the length of the whistle song

=== @ NightmareJames 10/20/2021 16:14

OFC, but in ZC I think it'd have to be coded that way to be effective, not sure though.  Can @arceusplayer11 (discord: Deedee)  or @EmilyV99 (discord: EmilyV)  confirm?

=== @ZoriaRPG (discord: Timelord) 10/24/2021 17:57

This is not a property of Z1. It is an artefact of the whistle tune taking longer to play than the jinx timer and should  not be part of the engine.

=== @ZoriaRPG (discord: Timelord) 10/24/2021 17:59

thiis 'bug' in NES Z1 is literally caused by the recorder tune taking as long to play (or longer) thN the jinx clk. It is not intended and as long as you use the Z1 recorder melody it should still work in ZC. Otherwise, it can be solved with a one instr itemdata script.

=== @ P-Tux7 10/24/2021 18:10

it doesn't work in zc since iirc the temp. jinx timer is paused while the whistle plays, unlike z1

=== @arceusplayer11 (discord: Deedee) 10/24/2021 20:44

(replying to @ P-Tux7 "it doesn't work in zc since i‚Ä¶"): I don't think this would be a hard thing to fix
under NES compat rules

=== @EmilyV99 (discord: Emily) 10/24/2021 22:58

It wouldn't be hard to fix with a script, either, as Zoria said
```cpp
itemdata script whistle
{
    void run()
    {
        if(Hero->ItemJinx > 0) Hero->ItemJinx = 0;
        if(Hero->SwordJinx > 0) Hero->SwordJinx = 0;
    }
}```

=== @ NightmareJames 10/24/2021 23:36

You sure that will work @EmilyV99 (discord: EmilyV) ?
If it is I'll try it out tomorrow

=== @EmilyV99 (discord: Emily) 10/24/2021 23:39

....use  item, clear jinx. Very extremely basic script.

=== @ NightmareJames 10/24/2021 23:40

OK, give it a run tomorrow
Let you know how it works

=== @arceusplayer11 (discord: Deedee) 10/24/2021 23:43

(replying to @EmilyV99 (discord: Emily) "It wouldn't be hard to fix wi‚Ä¶"): Well, no. What I mean is letting the jinx counter count down while the whistle is being played
AKA the original behavior

=== @EmilyV99 (discord: Emily) 10/24/2021 23:43

Well, this gives the same effect with a basic script

=== @ NightmareJames 10/24/2021 23:45

Doesn't really matter.  As long as the behavior is fixed and the option is available, possibly in std.zh
We can argue that point later
I'm not going to argue semantics, I'm not difficult to work with
Thank you.  üôÇ

=== @arceusplayer11 (discord: Deedee) 10/24/2021 23:49

(replying to @EmilyV99 (discord: Emily) "Well, this gives the same eff‚Ä¶"): Yeah, which is good for what NJ wants
It wouldn't change it for longer whistle tunes, but honestly I'm not sure how many people give a shit

=== @ NightmareJames 10/24/2021 23:51

Neither do I, just put it in std.zh for accuracy since it's in the original game IMO.  Quest creators can decide

=== @EmilyV99 (discord: Emily) 10/24/2021 23:56

scripts do not go in `std.zh`
they go in the `scripts` folder, separately
having any scripts in std.zh is a *terrible* idea, as that literally FORCES *EVERYONE* to have the script in their script list, at all times.

=== @ NightmareJames 10/24/2021 23:59

Agreed
Anyway, thank you

=== @ NightmareJames 10/25/2021 07:00

Before I go implementing this
Will it leave perm jinxes alone?

=== @EmilyV99 (discord: Emily) 10/25/2021 07:23

should
that's why it checks `>0` instead of `!=0`

=== @ZoriaRPG (discord: Timelord) 10/25/2021 08:45

(replying to @EmilyV99 (discord: Emily) "having any scripts in std.zh‚Ä¶"): Classic.zh exists for simple system extension scripts for Z1/Classic Plus quests.

=== @ NightmareJames 10/25/2021 08:56

Testing now

=== @ NightmareJames 10/25/2021 09:08

```itemdata script whistleSwordJinxRemover
{
    void run()
    {
        if(Hero->SwordJinx > 0) Hero->SwordJinx = 0;
    }
}```
Just fixed it up so it don't remove Item Jinxes
But it works now, you can put it wherever you put all the other utility scripts, it works now @EmilyV99 (discord: EmilyV) and @arceusplayer11 (discord: Deedee) .  TY

=== @ NightmareJames 10/25/2021 09:52

Fixed 1st Quest in 2.55 A 99 Nightly 10/21/2021
https://cdn.discordapp.com/attachments/900382427061559337/902132585264734238/classic_1st.qst

=== @ NightmareJames 10/25/2021 10:02

Fixed 2nd Quest in 2.55 A 99 Nightly 10/21/2021

https://cdn.discordapp.com/attachments/900382427061559337/902135162987499560/classic_2nd.qst
3rd, 4th, and 5th are up to their creators
@ HeroOfFireZC @ bigjoe

=== @ HeroOfFireZC 10/25/2021 15:15

I didn't contribute the dungeons of 4th, so this wouldn't affect anything on my end. For the sake of compatibility, this makes sense for the nth quests. Kinda surprised it wasn't noticed until recently (though why would one Whistle while temp jinxed?) Only use case is if a screen contained temp bubbles and a Digdogger.

=== @ NightmareJames 10/25/2021 15:33

I used it in speedruns @ HeroOfFireZC
Before the glitches changed things
It was just almost impossible to implement for a while universally

=== @ HeroOfFireZC 10/25/2021 15:42

Thinking about it more, I suppose having the jinx run out while everything is paused would be useful for normal combat. That said, this script assumes the jinx won't last longer than the length of the Whistle SFX.

=== @ HeroOfFireZC 10/25/2021 15:44

For example, this would not make sense in Moosh's 7th, where he sets the SFX to basically "null", and has a script play the SFX (thus making the Whistle appear to no longer pause anything)

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:17

There is an engine way to do this, but also a script rendition if the a ility to read sfx length is implemented,  as planned.

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:19

The only true issue here is Z1 compat/,emul, qnd nonstandard sfx for Z1 emulation are not su]opted at present.
For now, the issue is solved where it matters.
Heck
I wrote a script for this two years ago. IdK why it has now become so critical.

=== @ NightmareJames 10/31/2021 19:26

3rd Quest is undergoing Whistle Testing.  Currently grinding out Rupees for the Arrow.  Going to work

=== @ NightmareJames 10/31/2021 23:36

3rd Quest Whistle Testing confirm has to wait a bit more.  Whistle doesn't look like it's in Lv. 3 and I'm short supplies

=== @ HeroOfFireZC 11/01/2021 00:38

Yeah, even when I knew where everything was (thanks to an unpassworded version), I still quit before the Whistle in 4.
Better than my first attempt which ended in 2 with basically nothing but the Book.

=== @ P-Tux7 11/01/2021 00:40

i like how they knew how useless the book was
let me guess it wasn't even used to trigger something you couldn't reach with the normal candle

=== @ HeroOfFireZC 11/01/2021 00:41

Nope, it was just "haha, you get nothing helpful in Level 1"

=== @ P-Tux7 11/01/2021 00:41

(in z1 hacking/zc 1.90 you can do this by putting a tree by the edge of the screen, then putting a tree two combos in front of it so that only magic can hit it, not the candle fire. you need to leave one space in front and a path to that space so link may walk to it once it's burnt of course)

=== @ HeroOfFireZC 11/01/2021 00:42

I'm trying to recall if you could make Slash a required upgrade in older quests.
I think there was a specific angle for Sword flags.

=== @ P-Tux7 11/01/2021 00:42

sort of in a t-shape with burnable tree on the left, non-burnable on the right, and the path in the middle
most probably you could do that yeah
required sword flag
put it in a diagonal that only the slash could reach

=== @ HeroOfFireZC 11/01/2021 00:43

I think it only works if it is diagonally below where you can walk.
Due to the half tile upward walking.

=== @ P-Tux7 11/01/2021 00:44

oh true
though you could fix that by making the combo where link stands solid on the top half
so he can't be horizontally level to the sword flag

=== @ NightmareJames 11/01/2021 00:52

OK people, here's your Whistle-fixed 3rd Quest
Enjoy people
https://cdn.discordapp.com/attachments/900382427061559337/904533438223241226/classic_3rd.qst

=== @ NightmareJames 11/01/2021 00:54

I'll probably do the 4th tomorrow

=== @ NightmareJames 11/01/2021 00:55

@ HeroOfFireZC, I'm going to check my sugars and meds, then we can chat a bit

=== @ HeroOfFireZC 11/01/2021 00:56

I've got nothing new to say at the moment, still bugtesting other quests.

=== @ NightmareJames 11/01/2021 01:03

OK, fair

=== @ NightmareJames 11/01/2021 17:24

I once again have to get to Level 4:  This might take me a bit

=== @ NightmareJames 11/01/2021 17:35

Lv. 1 is done for

=== @ NightmareJames 11/01/2021 18:05

Lv. 2 has come and gone

=== @ NightmareJames 11/01/2021 19:15

And your Classic 4th Quest with Whistle Fix Implemented and Tested
https://cdn.discordapp.com/attachments/900382427061559337/904810898110160916/classic_4th.qst
Enjoy people

=== @ NightmareJames 11/01/2021 19:19

Quests have been pinned for everyone's convenience, especially @ HeroOfFireZC , @EmilyV99 (discord: EmilyV) , and @arceusplayer11 (discord: Deedee) .  They work in the latest nightly for 2.55

=== @ NightmareJames 11/02/2021 09:06

@ bigjoe , when you add this (and fix anything else you wish) with your 5th Quest, please post it here so it can be added, unless you want me to install it.  Let me know.  Thank you.

=== @ bigjoe 11/02/2021 09:10

I do not have the password to the completed and packaged version. It was changed prior to release, with I suspect good reason. Someone with master access or whatever will have to change it.

=== @ NightmareJames 11/02/2021 09:12

Another replay (and a long one) in my book

=== @ NightmareJames 11/02/2021 09:15

Now I got to do an accuracy check on top of this........
DM me plz

=== @ NightmareJames 11/02/2021 13:12

@ Mitsukara @ Lunaria If the Discord closes for the 6th closes before you get it, you can find the Whistle fix here in the pinned section, if you choose to use it at all.  You may leave the thread after you pick it up and/or decide not to use it

=== @ P-Tux7 11/02/2021 13:46

(the "fix" fyi is that playing the whistle times out temporary jinxes like Z1)

=== @ZoriaRPG (discord: Timelord) 11/05/2021 07:23

@ NightmareJames  I am curious if you had any permission to release modified 3rd, 4th and 5th quests, or if we have we determined that they are AGN property?

=== @ZoriaRPG (discord: Timelord) 11/05/2021 07:25

I don't particularly care what you do here, but you were very touchy about making any bugfixes or alterations to quests > and I am interested to know what has changed or if these are unofficial homebrew hacks.

=== @ NightmareJames 11/05/2021 08:12

Talk to @ HeroOfFireZC about the 4th or @ bigjoe about the 5th.  3rd's status is still undetermined

=== @ NightmareJames 11/05/2021 08:14

The current plan is to implement the fixes and to retire it as-is, but is subject to change if Alpha comes back as he has granted permission officially to edit U3Q

=== @ NightmareJames 11/05/2021 08:17

My stance still hasn't changed:. The original authors retain control and can only be overridden by council/community vote

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:18

I do  not o je t to the changes. Ai question if we have the right to introduce them.@ NightmareJames

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:19

5th,fine, we have contacted. 3rd and 4th, I have no clue. The original agn topics are broken.

=== @ NightmareJames 11/05/2021 08:20

4th we are considering redoing.  You can contact @ HeroOfFireZC and it's up to him if he will allow you access

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:20

4if atn owns them, l is well. If not, then we have legal issues a d need to avoid them
I do not know the best option now  any more than I did when fixing Dodington two or three years ago

=== @ NightmareJames 11/05/2021 08:21

If @<role: War Lord> has any objection he can voice them here
Otherwise, the original owners retain control

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:22

Do we expect ownership and do whatever we want, or respect original content creators and do nothing until we have approval?
It is not a simple decision

=== @ NightmareJames 11/05/2021 08:22

The latter.  According to ZCO's charter, we have to get community approval to override

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:23

Wtf does HeroOfFire have to do with 4th ownership?
Zco?
I am getting too old for this.

=== @ NightmareJames 11/05/2021 08:24

1.  HeroOfFire was one of the original creators of the 4th and the only one active
2.  ZCO = Zelda Classic Organization, our group's official name

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:25

He is not listed as the creator of that asset in my records. I THOUGHT IT WAS alphadawg
Or was that 3rd?

=== @ NightmareJames 11/05/2021 08:25

AlphaDawg did the 3rd
HeroOfFireZC and QuestWizard did the 4th

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:25

Ah, well
Then he can direct 4th
I said I was going senile

=== @ NightmareJames 11/05/2021 08:26

I wish AlphaDawg was still involved:  Sadly, it's all I can do all things considered

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:27

I said that two years ago but you sort of ignored my deterioration and just patted me on me back...

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:28

When I repeatedly frak up, mix up events or ppl, just saying go on old man may not have been the best idea.

=== @ NightmareJames 11/05/2021 08:29

I just don't know what to do about the 3rd's final fate personally
I don't think it should be lost permanently

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:30

Nor do I. I personally would leave it alone until ownership is conclusive and focus instead of. A new assets and qst set
I paid for the assets
I will ruthlessly go after them while I live
If I drop dead I cease caring and you all can go after them

=== @ NightmareJames 11/05/2021 08:31

I think you're right on this one.  Just put the two fixes in and call it a day, post it as final
And put it in the ZC.com/Pure archive and let it live in infamy

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:32

Until that time, th3y are legally my assets and I intend them to be released under a spcific licence
Android kb
And large hands

=== @ NightmareJames 11/05/2021 08:33

I'm just sorry I couldn't find AlphaDawg:  We did everything to hunt him down

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:34

Nobody asked me to find him
Not sure if I could do better

=== @ NightmareJames 11/05/2021 08:34

All his old sites and e-mails besides his tutorial are pretty much defunct

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:35

But nobody asked the defcon maniac
Just as well
Less work for me

=== @ NightmareJames 11/05/2021 08:36

We worked hard on this, even had a few oldbies look, nothing

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:36

Since I was stripped of even basic commitment resources, I abandoned giving a frak and focused on money earning projects.

=== @ NightmareJames 11/05/2021 08:37

Which is fair
Sometimes you just got to take care of yourself man

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:37

This is a disaster for y'all as now I am too busy making money to waste extra time to make a fix
ü§∑

=== @ NightmareJames 11/05/2021 08:38

If anything, this is my cross to bear from 2000
It was my mistakes IRL that gave TSA the opportunity

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:38

If something goes takes more time than it need take I canna allocate time to do it

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:40

Make it simple for me and I *might* do simple stuff that requires little investment
My present investment in ZC is 0.005%
Versus about 35.050% a year ago
Hoping I grow back some hair

=== @ NightmareJames 11/05/2021 08:41

RN, if we need you, Emily will call you

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:41


![image](https://cdn.discordapp.com/attachments/900382427061559337/906100801271922698/hair1-1.jpg)
I had a full head of hair in 2019

=== @ NightmareJames 11/05/2021 08:42

Just for the unofficial record, if you had a vote for the 3rd, I'm interested how you would've voted for excommunication

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:42

Wot?

=== @ NightmareJames 11/05/2021 08:42

Would you have kept it, or excommunicated it?

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:44

I would have voted that sans eviden e that agn owns it, as I feel they do, tbat the creator owns it. I would have wanted to see the 3rd Colntest threads (404s) and wanted to see the original rules, then .ade a judgement.

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:45

Even here where I have no stake and I do not personally care, I have an ethical requirement to rule on the rules of the Contest, the submission, and the content therein.
I ne er .ame arbitrary decisions, nor do I rule on personal bias.
I do not care who you are or what your needs or urgency are: I rule only on the merits.
You saw me rule against you inb our own contest
Despite being your mate, I disagreed and rul3d against  you in favour of someone with whom I share mutual disdain
F3kif tbat does not say that my judgement bias is impartial than you can all frak off

=== @ NightmareJames 11/05/2021 08:49

I can tag you into the archive of the 3rd so you can review what we found so you know everything

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:50

Zco

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:51

If you want to be your own charter, why are you flying an agn flag and creating a rift between me and wl/agn to ensure that op3nzc.orgd functions?
Your new consortiu. Has absolutely no legal authority over a contest from AGN years ago.
You can choose to do what you want, but the legal ownership of those creations is either the content creator or agn,  not some new consortium.

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:54

This is equal to making a co.pany. copying MS assets and saying g you ownWin95
You mentioned ZCO above
(replying to @ NightmareJames "The latter.  According to ZCO‚Ä¶"): Here

=== @ NightmareJames 11/05/2021 08:55

Isn't ZC GPL in the first place?  I do not want to get in THIS argument again

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:56

A new group with a new charter can ot simply absorb something to which they have no legal ownership validity
I do not care who owns 3 4 and 5 quests
But to legally own them, you need to have the legal rights to both distribute and to  *modify* them
Ppl ask my opinion on this crud
I can only give a legal opinion
Not my personal opinion

=== @ NightmareJames 11/05/2021 08:58

Then maybe with AlphaDawg gone, excommunicating the 3rd was the right choice
On that
We have the creators of the other two
If you want to go that route

=== @ZoriaRPG (discord: Timelord) 11/05/2021 08:58

Ppl 2ho know me already know my personal opinion
I may be able to find AlphaDawgn
Nobody asked

=== @ NightmareJames 11/05/2021 08:59

I just, don't want to argue.  Even despite everything, I still have some like for you, even after this whole god damn argument
And some respect

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:00

And r/n, I see no reason to waste that tim3

=== @ NightmareJames 11/05/2021 09:00

I know I don't show it much because I'm still working and very, very angry at you for certain things, and the favor is definitely returned

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:01

At least NJ is less frakked now
Idk what you hate me over, tbh
You sent death threats to Aecin and were forgiven

=== @ NightmareJames 11/05/2021 09:02

I guess time does heal all wounds

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:02

Nothing that I ever did even came close to that

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:03

So I have no clue how you balance anything I did or was willing to do/say against the same from you
But I wS never banned for death threats, so clearly I had lines I would never cross

=== @ NightmareJames 11/05/2021 09:04

Well, when you have 5 people tearing into you
You have to stop them somehow

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:04

If you want to judge me, judge yourself first
Surely our do
Treating them is imo not acceptable
I ignored thatd
But only becauseb knew of your issues

=== @ NightmareJames 11/05/2021 09:05

It's not as easy as you think it is to control this
I actually probably do a very good job compared to most
I have made mistakes though

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:07

You in turn burnt m3e like a tthrice used 
Matxh when it gave you some political clout
I will work with you, but our relationship now it entirely professional.

=== @ NightmareJames 11/05/2021 09:08

I "don't" have a problem with that

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:09

Given that I saved you from suicide what...twice
.
You probably should care that our involvement has descended to this
But fine

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:11

I never again want to be involved with your personal or political issues. KEEP IT PROFESSIONAL and if qi am not needed,nleave me alone

=== @ NightmareJames 11/05/2021 09:12

I have unblocked you on Discord.  Please let's make this work for everyone's sake

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:12

Enough Zc people are in my will anymore,  so no-one meed care about kissing me arse and tuen praying g for me to drop dead.

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:13

I genuinely have nothing 5o discuss  outside this projedt either you due to how I perceived you treating m4.
No need to block or unblock m4

=== @ NightmareJames 11/05/2021 09:14

I know you'll always hate me

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:15

You do not believe in keeping private messages private so I am only willing to discuss things with you In Public servers.

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:16

(replying to @ NightmareJames "I know you'll always hate me"): I will never forget nor forgive you stabbing me like Caesar.

=== @ NightmareJames 11/05/2021 09:17

Your eyes are jaded, anyway, not getting into this with you
It'll only cause pain

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:19

You literally went from the man who would stop a bullet to save you to the man who would deny you a thimble of water if you were dying of thirst in a matter of a month.
Sorry. But that is the hard truth

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:21

Don't blame me for that reaction.  But reflect on why this shift occurred

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:22

My eyes are not jaded, but yours are clouded by propaganda and me doing stupid shyte while blackout pissed
I don't care much anymore

=== @ NightmareJames 11/05/2021 09:23

I think you do
Deep down you do

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:23

Not being in charge means having no responsibility  which means having little to no reason to work on this at Ll; then coupled with making it hard to work on it equals NO
(replying to @ NightmareJames "Deep down you do"): No, I genuinely do not.
I expect ppl 5o have a sense of humour and context

=== @ NightmareJames 11/05/2021 09:24

(replying to @ZoriaRPG (discord: Timelord) "No, I genuinely do not."): Then why engage?  If you didn't care you wouldn't engage me
So yes, I'll call you on that

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:25

And when ppl know I am out of my mind I expect them to see stuff as insane and possibly unconscious ramblings
I am not part of your cult
engage  you?
Specific POi?
Give me a specific comme t and a debate point

=== @ NightmareJames 11/05/2021 09:26

Not in a romantic sense, but in a conversation
(internet, how lovely)

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:27

Although. This channel is a bad place to debate this crud
Er4

=== @ NightmareJames 11/05/2021 09:27

We can finish this off in [#rants](https://discord.com/channels/876899628556091432/877041572825407512)

=== @ZoriaRPG (discord: Timelord) 11/05/2021 09:29

I wouod ko5 become engaged in anything beyond business ot platonic relations to you, unless you were a multi millionaire.  THIS APPLIES TO ANYONE.

=== @ NightmareJames 11/05/2021 09:29

Let's take this to [#rants](https://discord.com/channels/876899628556091432/877041572825407512)

=== @ P-Tux7 11/05/2021 15:42

(replying to @ZoriaRPG (discord: Timelord) "I may be able to find AlphaDa‚Ä¶"): i read on this server that you were already asked about the unedited official 3rd quest long ago

=== @ tim 11/05/2021 15:45

doubt but go on

=== @ P-Tux7 11/05/2021 15:53

(replying to @ tim "doubt but go on"): 
![image](https://cdn.discordapp.com/attachments/900382427061559337/906209592680271902/Screenshot_20211105-105313_Discord.jpg)
also in re-reading this bloodstar is still around? awesome

=== @EmilyV99 (discord: Emily) 11/05/2021 15:54

frankly, what does this have to do with whistles killing jinxes?
this thread has gone off-topic far enough
(feel free to discuss things elsewhere, of course, but feature requests are for feature request discussion about, you know, the thread topic)

=== @arceusplayer11 (discord: Deedee) 11/05/2021 19:08

@ MEE6

=== @ MEE6 11/05/2021 19:09

(meta, MessageType.chat_input_command) :CHECK6:

=== @arceusplayer11 (discord: Deedee) 11/05/2021 19:10

@ZoriaRPG (discord: Timelord) You have been warned for abusive behavior and derailing this thread. Please refamiliarize yourself with our rules: [#rules](https://discord.com/channels/876899628556091432/876903416960544789)
You're on thin ice. Any future rulebreaking behavior will result in an indefinite mute.
## üíäüîìWarn on global variable change? (#976)
@ Moosh opened this issue on 10/21/2021

Status: needs-testing

Labels: ['feature', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/900564083097600002



=== @ Moosh 10/21/2021 02:00

Mismatched save data with regards to global variables and arrays seems to trip up new users quite often. Would it be possible to have a compiler setting (on by default) that totals up the size of the global stack before and after compile and displays a warning popup after if it has changed, informing the user that old saves will be incompatible and scripts may behave incorrectly.

=== @EmilyV99 (discord: Emily) 10/21/2021 02:06

huh, that sounds smart
it could also mention that you can bump the version info in `Header` to prevent users from loading saves that would be corrupted by this

=== @ Moosh 10/21/2021 02:21

Indeed. Provided Header version info actually works, because I've never actually used it and I don't know anyone who has ü§£

=== @EmilyV99 (discord: Emily) 10/21/2021 02:23


![image](https://cdn.discordapp.com/attachments/900564083097600002/900570023976914984/unknown.png)
if the `Quest Ver` a quest was saved in is lower than `Min. Ver` of the `.qst` you are loading, it throws an error
pretty damn sure it works

=== @ Moosh 10/21/2021 02:24

Yeah I've seen these. I know what they do, just never messed with or gotten an error from loading a quest over them
There's a general trend in the ZC community of people being pretty bad at versioning

=== @EmilyV99 (discord: Emily) 10/21/2021 02:42

. . . hmm, so, I'm actually having trouble thinking of a good way to detect that changing
this is a bit more complicated than I thought at first

=== @EmilyV99 (discord: Emily) 10/21/2021 02:44

because, what I need to do, is know what the old value was. How do I do that, exactly? Measuring the size of the init script isn't reliable, as it appends the user init script, so that would detect any init script changes. Given, that could be a good thing. But, it also only detects a *size* change, not a *content* change.
...probably the best I can do, but now the question is how to go about it. This is gonna involve changing a bunch of different things just to process that count, and as such, sadly not gonna finish it tonight.
Also, I need to do it in a way that won't fuck up when we move to external parser, so I need to design it very specifically to avoid future issues

=== @ Moosh 10/21/2021 03:05

Ah yeah, makes sense. I only suggested it becuase I figured there might be the slimmest of chances it'd be possible without screwing with parser stuff

=== @EmilyV99 (discord: Emily) 10/21/2021 03:06

if it has to do with compiling, it means fucking with parser

=== @EmilyV99 (discord: Emily) 10/21/2021 04:06

OK, well, screw what I said about not finishing it tonight, because I'm insane as usual
well, technically it's past midnight, but meh

![image](https://cdn.discordapp.com/attachments/900564083097600002/900595914685685760/unknown.png)
(small mode)
hmm, it's cut off at the end
so need to fix the gui, but it's popping up at the correct time
(the `(60->2)` refers to the ZASM linecount of the init script; for the record, `60` is with `std.zh` and `Classic.zh`; `2` is with just `std.zh`)

=== @EmilyV99 (discord: Emily) 10/21/2021 04:38

K, there

![image](https://cdn.discordapp.com/attachments/900564083097600002/900603933712580648/unknown.png)
that took more doing that I wanted to deal with to fix the lines issue

=== @EmilyV99 (discord: Emily) 10/21/2021 04:50


![image](https://cdn.discordapp.com/attachments/900564083097600002/900606863471697950/unknown.png)
and large mode
clicking header, of course, brings up
![image](https://cdn.discordapp.com/attachments/900564083097600002/900606941603188746/unknown.png)

=== @EmilyV99 (discord: Emily) 10/21/2021 05:10

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) @ Moosh
(meta) thread name was changed: üíäüîìWarn on global variable change?

=== @EmilyV99 (discord: Emily) 10/21/2021 05:20

...oh, and I immediately think of a way to make it better

![image](https://cdn.discordapp.com/attachments/900564083097600002/900614608673464350/unknown.png)
Notice the `4->4`.... so the size is the same, yet there is a difference detected. Because I changed `int x = 0;` to `int x = 1;` as a global var. That was far easier than I thought it would be....
It eats up a slight chunk more memory for just a moment, as it stores a copy of the entire old init script (to compare to the new one), but that shouldn't be that big an issue
@ Moosh [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Moosh 10/21/2021 05:23

Nice!
Did not expect this one to be an overnight addition

=== @EmilyV99 (discord: Emily) 10/21/2021 05:55

The big thing I realized was, a previous change of mine made script data it's own struct (instead of just being a map of data); which made it fairly simple to just... copy the entire script data with a single `=`. Not hard to compare them, either; just a for loop.
Frankly the thing that took the longest was the dialog work
that's a new type of popup dialog, which takes an arbitrary amount of buttons; as both the text, and a function to call when it's clicked.
so, `2, 1, "Header", call_header_dlg, "OK", NULL` is the code for that one
(2 buttons, where `[1]` is the default focus; the OK button, here. The first button says "Header", calling '`void call_header_dlg()`, while the second says "OK", and closes the dialog)
with this, I should be able to make a lot of small customized dialogs, without needing to actually create new dialog code every time
(anything that has a title, textbox, and then buttons)

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:43

Is this an option?

=== @EmilyV99 (discord: Emily) 10/21/2021 06:44

No, but you can mash enter to get past it as the `OK` button is selected by default

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:44

Hmm
Might get annoying when youre devving a quedt

=== @EmilyV99 (discord: Emily) 10/21/2021 06:44

if we get complaints it's easy enough to add a config
but, that will be easier once I've redone the `Etc->Options` dialog

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:45

Can I request a config now?

=== @EmilyV99 (discord: Emily) 10/21/2021 06:45

sure.... I'll get to it once I've redone the `Etc->Options` dialog

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:45

This is really cool btw

=== @EmilyV99 (discord: Emily) 10/21/2021 06:46

You should see the actual dialog code for it
because, it takes *arbitrary buttons*
You could call it with 5 buttons that run 5 different functions

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:46

...actually, what is the max version a quest can have?

=== @EmilyV99 (discord: Emily) 10/21/2021 06:46

...well, 4, because one button needs to run `NULL`, as that's what closes the dialog
uh

=== @EmilyV99 (discord: Emily) 10/21/2021 06:47

it's a 9 character *string*
and they are compared via `strcmp()`
so, for instance, you could do `00.00.01`, and then it would recognize `02.00.00` as "greater"

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:48

Oof

=== @EmilyV99 (discord: Emily) 10/21/2021 06:49

```cpp
if(QHeader.minver[0])
{
    if(strcmp(g->version,QHeader.minver) < 0)
        ret = qe_minver;
}
```

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:50

Im not familiar with strcmp

=== @EmilyV99 (discord: Emily) 10/21/2021 06:50

....not sure what it would make of `0.0.0` vs `10.10.10`, though
or `0.9.0` vs `0.0.10`
time for online compiler for fast testing

=== @EmilyV99 (discord: Emily) 10/21/2021 06:53

`0.9.0` > `0.0.10`
`10.10.10 > 0.0.0`
so, that seems to work as one would hope

=== @EmilyV99 (discord: Emily) 10/21/2021 06:55

`10.0.0 > 0.99.99`

=== @ Moosh 10/21/2021 06:55

For real?
Here I would've assumed it just discards decimal places past the first

=== @EmilyV99 (discord: Emily) 10/21/2021 06:55

```
Compares the C string str1 to the C string str2.

This function starts comparing the first character of each string. If they are equal to each other, it continues with the following pairs until the characters differ or until a terminating null-character is reached.

This function performs a binary comparison of the characters. For a function that takes into account locale-specific rules, see strcoll.```
@arceusplayer11 (discord: Deedee) that's `strcmp`

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:56

Okay

=== @EmilyV99 (discord: Emily) 10/21/2021 06:56

(replying to @ Moosh "For real?"): yep, versioning is important to have multiple places
basically how this comparison works is, if it hits a decimal in one before the other, it knows it has less digits in that 'place', thus it knows which is better
if they are the same through a decimal, it would hit that check for the next 'place'

=== @ Moosh 10/21/2021 06:57

For actual developers, yeah. This is a little used feature in a program from the early 2000's though

=== @EmilyV99 (discord: Emily) 10/21/2021 06:57

and if they are same length, but different values, it would compare the actual numbers

=== @ Moosh 10/21/2021 06:58

Would it think 1.0.1 is less than 1.0.000?

=== @arceusplayer11 (discord: Deedee) 10/21/2021 06:58

See i was gonna suggest a config option to bump up the subversion when it detects this stuff, but that sounds nightmarish now

=== @ Moosh 10/21/2021 06:59

That sounds like it'd just annoy people and go unused tbh

=== @EmilyV99 (discord: Emily) 10/21/2021 06:59

`1.0.1` > `1.0.000`
basically, `1.0.` == `1.0.`
then `1 > 0`
it goes char by char
now,

=== @arceusplayer11 (discord: Deedee) 10/21/2021 07:00

I mean, the way it works nowvis that it shows a popup each time it happens

=== @EmilyV99 (discord: Emily) 10/21/2021 07:00

`1.0.1 < 1.00.1`
....so try to make your `0`'s consistent

=== @ Moosh 10/21/2021 07:00

yeah that's what I was thinking of. I stuck the extra 0's in the wrong place
not that any sane person would do that

=== @EmilyV99 (discord: Emily) 10/21/2021 07:01

I could probably write a new function to compare them and catch things like that
basically, if the strings contain nothing but numbers and `.`'s, read each number as a number, and compare values, one by one

=== @ Moosh 10/21/2021 07:04

Wait a sec is this all just strcmp? If I have my quest at version `Necromancer` and upgrade it into `WhyWouldYouDoThis`, would that count as an increase in version?
no it wouldn't because neither of those fit in the text field

=== @EmilyV99 (discord: Emily) 10/21/2021 07:06

It fits 9 chars

=== @ Moosh 10/21/2021 07:06

But if I wanted to be absolutely mad I could version my quest with arbitrary strings

=== @EmilyV99 (discord: Emily) 10/21/2021 07:07

`banana > apple`
because `b > a` at the first comparison
keeping in mind that `a > Z`, as all capitals are in a row before the lowercases start
and it is case-sensitive compare

=== @EmilyV99 (discord: Emily) 10/21/2021 07:19

K, made a new function
`1.0.1 == 1.00.1`
If any character in the string is not either a number or a decimal, it just returns `strcmp()` still, so alphabetic shit would still work as expected
but, if it's all numbers + decimals, it tries to compare it

=== @EmilyV99 (discord: Emily) 10/21/2021 07:26

incase anyone cares to inspect, here it is:
```cpp
int8_t smart_vercmp(char const* a, char const* b)
{
    for(int q = 0; a[q]; ++q)
    {
        if((a[q] >= '0' && a[q] <= '9') || a[q] == '.')
            continue;
        return strcmp(a, b);
    }
    for(int q = 0; b[q]; ++q)
    {
        if((b[q] >= '0' && b[q] <= '9') || b[q] == '.')
            continue;
        return strcmp(a, b);
    }
    char *cpya = (char*)zc_malloc(strlen(a)), *cpyb = (char*)zc_malloc(strlen(b));
    strcpy(cpya, a); strcpy(cpyb, b);
    char *ptra = cpya, *ptrb = cpyb, *tmpa = cpya, *tmpb = cpyb;
    std::vector<int32_t> avec, bvec;
    while(*(ptra++))
    {
        if(*ptra == '.')
        {
            *ptra = 0;
            avec.push_back(atoi(tmpa));
            tmpa = ++ptra;
            if(!*ptra) break;
        }
        if(!*ptra)
        {
            avec.push_back(atoi(tmpa));
            break;
        }
    }
    while(*(ptrb++))
    {
        if(*ptrb == '.')
        {
            *ptrb = 0;
            bvec.push_back(atoi(tmpb));
            tmpb = ++ptrb;
            if(!*ptrb) break;
        }
        if(!*ptrb)
        {
            avec.push_back(atoi(tmpb));
            break;
        }
    }
    zc_free(cpya); zc_free(cpyb);
    while(avec.size() < bvec.size())
        avec.push_back(0);
    while(bvec.size() < avec.size())
        bvec.push_back(0);
    for(int q = 0; q < avec.size(); ++q)
    {
        if(avec.at(q) < bvec.at(q))
            return -1;
        if(avec.at(q) > bvec.at(q))
            return 1;
    }
    return 0;
}```

=== @EmilyV99 (discord: Emily) 10/21/2021 07:28

`zc_malloc`/`zc_free` are zc-wrapper-versions of `malloc` and `free`, which basically make an array with a size not known at compile time (here, with whatever size the input strings are)
(and yes that is a good chunk of pointer shenanigans, because it makes it easier)

=== @ Moosh 10/21/2021 07:32

~~ZScript malloc when~~ (this is joke pls do not take seriously)

=== @EmilyV99 (discord: Emily) 10/21/2021 07:35

I mean, legitimately wouldn't be hard with how arrays work internally
just gotta spend the time to put together the logic for it
(It wouldn't work quite like C++, but it would be a function like `ResizeArray(arr, size, 0)` (the `0` being `fill any new space with 0s`)
I feel like last time I looked at it that was the plan I had, anyway

=== @EmilyV99 (discord: Emily) 10/21/2021 10:00

@ Moosh So that last build actually has a couple *crashes* that my test quest didn't catch. Might wanna grab the new one.
Also, the new one includes `ResizeArray()`. It doesn't take a thing to fill the space with, it's just:```cpp
void ResizeArray(untyped[] arr, int size);
 * Resizes the array 'arr' to size 'size'.
 * If size is <1, the array will be resized to size '1'.```

=== @EmilyV99 (discord: Emily) 10/21/2021 10:09

Here's the test case
![image](https://cdn.discordapp.com/attachments/900564083097600002/900687124758683648/unknown.png)
It uses the same function that array declaration uses, because that's already just a resizing operation. So, it should have every new index be `0`

=== @EmilyV99 (discord: Emily) 10/21/2021 10:20

.....except wait fuck that's not working dammit

=== @EmilyV99 (discord: Emily) 10/21/2021 10:21

oh duh, I see

=== @EmilyV99 (discord: Emily) 10/21/2021 10:24

ahk, fixed it
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
So, if you size up an array, it fills the new area with `0`
if you size down an array, it obviously just chops the end off and leaves the same area in tact.
Technically then, if you size it down and back up, you can clear a chunk off the end of it
....probably not the best way to do so, though; memset() is much better.
Also, the cool thing is, from what I understand, global arrays resizing *should save in the save file*, as you would hope it would.
It saves a `count` followed by that number of indexes; but the count is determined by the same thing that `SizeOfArray()` reads, which clearly is changed.
Anyway, night.

=== @EmilyV99 (discord: Emily) 10/22/2021 02:37

(replying to @arceusplayer11 (discord: Deedee) "Can I request a config now?"): #deleted-channel is on the working table now
once I finish porting the existing options, adding a new one should be trivial

=== @EmilyV99 (discord: Emily) 10/22/2021 04:22

@arceusplayer11 (discord: Deedee)
![image](https://cdn.discordapp.com/attachments/900564083097600002/900962345457692682/unknown.png)

=== @EmilyV99 (discord: Emily) 10/22/2021 04:26

New options dialog, now has option for this warning
https://cdn.discordapp.com/attachments/900564083097600002/900963412622856222/buildpack.zip

=== @arceusplayer11 (discord: Deedee) 10/22/2021 04:34

:o

=== @ Moosh 10/25/2021 07:14

I'm getting the warning despite not making changes to my header at all. As in I can compile, save, compile again without making any changes, and it displays the warning

=== @EmilyV99 (discord: Emily) 10/25/2021 07:23

huh, that's odd

=== @ Moosh 10/25/2021 07:23

Can do it on a fresh quest with just the default headers. Only need to compile three times it seems
## -See-, -Active- and -Attack- sounds for custom enemies (#977)
@ FireSeraphim opened this issue on 10/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/900577849281503292



=== @ FireSeraphim 10/21/2021 02:54

Like I said in dev discussion,  I hope it's not too late to suggest/request a few things on the enemy sound side of things. I would like to suggest an optional "see/sight" sound for when an enemy first spawns, an "active" sound that plays at random intervals while the enemy is still alive and an "attack/projectile" sound that can overwrite the default sound effect for when a projectile is shot from an enemy. Kinda like how classic Doom does it.

=== @ FireSeraphim 10/21/2021 02:56

(meta) thread name was changed: -See-, -Active- and -Attack- sounds for custom enemies

=== @ P-Tux7 10/21/2021 04:22

wait we don't have shot sounds?
that sounds important
also as said i thought all enemies already had the "boss roar" thing as you see in isle of rebirth
even darknuts can have one

=== @ FireSeraphim 10/21/2021 04:24

Yes but the boss roar is constant, without randomized periods of silence between them
ergo, it doesn't really count

=== @ P-Tux7 10/21/2021 04:26

hmm well in that case a QR or a checkbox for each enemy would certainly work
but it should still use the sound # field to conserve qst filesize

=== @EmilyV99 (discord: Emily) 10/21/2021 04:28

the point would be to have multiple different sounds for the same enemy
and the file size cost wouldn't be much, especially since SFX are `byte` sized

=== @ FireSeraphim 12/01/2021 19:53

any progress on this?

=== @ FireSeraphim 03/27/2022 15:28

I hate to ask again but it's seems relevant to me, especially since it seems like you guys are actively working on the enemy editor right now. But has there been any progress on this front?

=== @ P-Tux7 03/27/2022 21:53

Definitely agreed with the firing sound thing

=== @ FireSeraphim 07/22/2022 09:12

bump

=== @EmilyV99 (discord: Emily) 07/22/2022 09:22

```cpp
npc script customSounds
{
    void run(int spawnSound, int activeSound, int activeSoundMinInterval, int chance)
    {
        if(spawnSound) Audio->PlaySound(spawnSound);
        unless(activeSound) return;
        while(true)
        {
            Waitframes(activeSoundMinInterval);
            while(Rand(chance)) Waitframe();
            Audio->PlaySound(activeSound);
        }
    }
}```

=== @EmilyV99 (discord: Emily) 07/22/2022 09:24

weapon sounds should be added in engine, that script would handle the other 2 easily

=== @EmilyV99 (discord: Emily) 07/22/2022 09:27


![image](https://cdn.discordapp.com/attachments/900577849281503292/999971018628157510/unknown.png)
## ‚úÖüîíCRASH, MAJOR - ZScript compiler crashing after two unsuccessful compile attempts. (#978)
@ Orithan opened this issue on 10/21/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/900751011055009814



=== @ Orithan 10/21/2021 14:22

The ZScript compiler crashes after two unsuccessful compiles in a given session. This triggers on the second failed compile of the session. When it crashes on the second fail varies. Sometimes it will report the error and then crash after you click the prompt while at other times it will crash before then.

Build: Latest nightly.
OS: Windows 10.

=== @EmilyV99 (discord: Emily) 10/21/2021 14:29

fucking REALLY
I thought I fixed ittttttttt

=== @EmilyV99 (discord: Emily) 10/21/2021 14:31

. . . I can't replicate it with the said conditions
This is in the `6:25 AM EST` nightly, yes?

=== @EmilyV99 (discord: Emily) 10/21/2021 14:34

(`ZC->About` gives build time to the second, so is very specific)

=== @ Orithan 10/21/2021 14:43

Yes
This is with out the box ZC settings
The main exception being the include paths file being modified to suit the paths where my script files are stored.

=== @EmilyV99 (discord: Emily) 10/21/2021 19:12

@ Orithan I cannot replicate the crash. Can you send a screenshot of `ZC -> About` in ZQ, and your `includepaths.txt` file?

=== @EmilyV99 (discord: Emily) 10/21/2021 19:13

Also, what error is it throwing in the compile when it's crashing?

=== @ Orithan 10/21/2021 23:05

The error that is being thrown is through regular compile errors
![image](https://cdn.discordapp.com/attachments/900751011055009814/900882597872291870/Untitled.png)

=== @EmilyV99 (discord: Emily) 10/21/2021 23:08

That is not the most recent nightly build @ Orithan

=== @EmilyV99 (discord: Emily) 10/21/2021 23:10


![image](https://cdn.discordapp.com/attachments/900751011055009814/900883815319339039/unknown.png)
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Orithan 10/21/2021 23:15

I'm pretty sure I downloaded the latest nightly

=== @EmilyV99 (discord: Emily) 10/21/2021 23:15

well the `.exe` you are using there is not the latest nightly

=== @ Orithan 10/22/2021 01:23


![image](https://cdn.discordapp.com/attachments/900751011055009814/900917159306330222/Untitled.png)
This is the exe that's in the latest alpha

=== @ Orithan 10/22/2021 01:24

I literally downloaded the most recent package and this is the exe I have

=== @EmilyV99 (discord: Emily) 10/22/2021 01:25

Aye, that's 6 hours more recent a build than your previous screenshot
Is it still crashing in that build? Because I can't replicate it

=== @ Orithan 10/22/2021 01:30

I was replicating it last night but I can't seem to replicate it now
Even after repeating the steps used to cause that crash

=== @EmilyV99 (discord: Emily) 10/22/2021 01:30

(replying to @ Orithan "The error that is being throw‚Ä¶"): ^If you were replicating it in this build, that makes sense

![image](https://cdn.discordapp.com/attachments/900751011055009814/900919227580563498/unknown.png)
Pretty sure you were using the top one there, and said crashes were fixed in the bottom one there

=== @ Orithan 10/22/2021 01:32

I have no idea how I downloaded that one

=== @EmilyV99 (discord: Emily) 10/22/2021 01:33

<:nekoshrug:869489800271503400> you had a `12:57 AM` build time, so it happened.
anyway, given that the crashes were indeed fixed, I'll close this
(meta) thread name was changed: ‚úÖüîíCRASH, MAJOR - ZScript compiler crashing after two unsuccessful compile attempts.
## Fire Gleeok Shot Timer Editing (#979)
@ P-Tux7 opened this issue on 10/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/900847757324079145



=== @ P-Tux7 10/21/2021 20:47

See title. This enemy shoots way too quickly to ever let Link get a hit in, especially in old quests where it's only vulnerable to melee weapons. A script would also be okay in my book but @ NightmareJames may or may not want that

=== @ NightmareJames 10/21/2021 21:07

I think this needs to be addressed.  I'd prefer an enemy editor window (in frames) for shot delay

=== @ Mitsukara 11/05/2021 21:22

I absolutely like the idea of being able to adjust this. I made an FFC script in my 6rh quest where, if there were two or more EW_FIREs onscreen, it would set the gleeok's weapon to EW_NONE until the fires went away, making it so it could only fire two at a time (technically I think I made it a script argument, so you could just change the number arbitrarily to limit exactly how many fires)
I also liked the idea of trying to make the fire gleeok flash as a warning before it shoots (a la Trinexx), but didn't implement such a thing in that script.

=== @ P-Tux7 11/06/2021 15:55

@ Mitsukara check my thread in [#dev-discussion](https://discord.com/channels/876899628556091432/876908472728453161) about enemy rebalancing, your scripts could be a huge help

=== @ P-Tux7 11/06/2021 15:58

i know npc scripts have something about "reverse direction" that could be useful for my anti-homing ideas for gleeok heads/patras

=== @ NightmareJames 11/07/2021 11:21

Could we have some test quests of these scripts @ Mitsukara ?  Like to see these in action
## The ability to disable items in certain map screens (#980)
@ SkyLizardGirl opened this issue on 10/22/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/900923342536704021



=== @ SkyLizardGirl 10/22/2021 01:47

This would mainly be used for Dungeon type maps. Besides depending on the Disable items in Dmaps, you could now disable items on any map screen you choose simply by entering the ID of the item in a Text box in screen data.

=== @EmilyV99 (discord: Emily) 10/22/2021 01:48

adding more things to screen data takes a TON of memory

=== @ SkyLizardGirl 10/22/2021 01:48

Oh
ok

=== @ P-Tux7 10/22/2021 04:57

this is easy
step 1: make two dmaps that have the same level, but different banned items
step 2: have side warps between the two screens take you to the correct screen on dmaps 1 and 2
so it looks like link is just walking to the next screen, and he keeps all his map, compass, boss key, and level keys, but it's really a different map
with different banned items
and when he walks back, it goes back to the original map

=== @ P-Tux7 10/22/2021 05:00

and of course to save on "real" map space, all of those dmaps can use the same "real" map
so both dmaps use the same "real" map, just the warp sets the "dmap" as the one with banned items
i can make a demo quest tomorrow if needed
## üíäüîìDS_PHANTOM broken with new sprite drawing. (#981)
@ Moosh opened this issue on 10/22/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/901122140261195836



=== @ Moosh 10/22/2021 14:57

Usually the DS_PHANTOM DrawStyle would give weapon sprites transparency as with draw commands. With the Old (Faster) Sprite Drawing rule on they still do

![image](https://cdn.discordapp.com/attachments/901122140261195836/901122156614807612/unknown.png)
However when I use the new drawing that allows for scaling and rotation, I get this
![image](https://cdn.discordapp.com/attachments/901122140261195836/901122290534715402/unknown.png)
Appears to just be averaging the colors with black and completely ignoring whatever's underneath

=== @ Moosh 11/12/2021 10:14

boop

=== @EmilyV99 (discord: Emily) 11/12/2021 10:22

gah
you know what's happening?
It's doing the transparency at the wrong step
to a sub-bitmap
which is clear
so it's averaging it with color 0

=== @EmilyV99 (discord: Emily) 11/13/2021 07:15

.....yeeeeep, I was correct
blehg
I basically need to rewrite the new sprite draw code, like, almost entirely
god fucking dammit zoria, can't even design something as basic as this correctly....

=== @EmilyV99 (discord: Emily) 11/13/2021 07:26

. . . so the problem is, the cloaked/transparent draw functions used are direct tile draws
I need a version that is a bitmap blit
so it can take the rotated/scaled image as input

=== @EmilyV99 (discord: Emily) 11/13/2021 07:29

transparent is easy enough, but *cloaked* draws are going to be a fucking pain
because they
are like
```cpp
void overtilecloaked16(BITMAP* dest,int32_t tile,int32_t x,int32_t y,int32_t flip)
{
    if(x<-15 || y<-15)
        return;
        
    if(y > dest->h)
        return;
        
    if(y == dest->h && x > dest->w)
        return;
        
    if(tile<0 || tile>=NEWMAXTILES)
    {
        rectfill(dest,x,y,x+15,y+15,0);
        return;
    }
    
    unpack_tile(newtilebuf, tile, 0, false);
    byte *si = unpackbuf;
    byte *di;
    
    if(flip&1)
        si+=15;
        
    if((flip&2)==0)
    {
        if(y<0)
            si+=(0-y)<<4;
            
        for(int32_t dy=(y<0 ? 0-y : 0); (dy<16)&&(dy+y<dest->h); ++dy)
        {
            di = &(dest->line[y+dy][x<0 ? 0 : x]);
            
            if(x+15<dest->w)
            {
                if(x<0)
                    flip&1 ? si-=0-x : si+=0-x;
                    
                for(int32_t dx=(x<0 ? 0-x : 0); dx<16; ++dx)
                {
                    if(*si)
                    {
                        *di=dest->line[((y+dy)^1)][((x+dx)^1)];
                    }
                    
                    ++di;
                    flip&1 ? --si : ++si;
                }
            }
            else
            {
                for(int32_t i=0; i<16; ++i)
                {
                    if(x+i<dest->w)
                    {
                        if(*si)
                        {
                            *di=dest->line[((y+dy)^1)][(x^1)];
                        }
                        
                        ++di;
                    }
                    
                    flip&1 ? --si : ++si;
                }
            }
            
            if(flip&1)
                si+=32;
        }
    }
    else
    {
        if(y+15>=dest->h)
            si+=(16+y-dest->h)<<4;
            
        for(int32_t dy=(y+15>=dest->h ? dest->h-y-1 : 15); (dy>=0)&&(dy+y>=0); --dy)
        {
            di = &(dest->line[y+dy][x<0 ? 0 : x]);
            
            if(x+15<dest->w)
            {
                if(x<0)
                    flip&1 ? si-=0-x : si+=0-x;
                    
                for(int32_t dx=(x<0 ? 0-x : 0); dx<16; ++dx)
                {
                    if(*si)
                    {
                        *di=dest->line[((y+dy)^1)][((x+dx)^1)];
                    }
                    
                    ++di;
                    flip&1 ? --si : ++si;
                }
            }
            else
            {
                for(int32_t i=0; i<16; ++i)
                {
                    if(x+i<dest->w)
                    {
                        if(*si)
                        {
                            *di=dest->line[((y+dy)^1)][(x^1)];
                        }
                        
                        ++di;
                    }
                    
                    flip&1 ? --si : ++si;
                }
            }
            
            if(flip&1)
                si+=32;
        }
    }
}
```
so much memory bullshit that I literally don't know what it's doing

=== @EmilyV99 (discord: Emily) 11/13/2021 07:32

so uh, cloaked is not gonna work right without a lot of work
phantom should be an easy enough fix, though

=== @ Moosh 11/13/2021 07:42

At least cloaked is the more niche of the two
Though I assume you can't really fix one without also fixing the other, or at least laying down the foundation to do so?

=== @EmilyV99 (discord: Emily) 11/13/2021 07:43

I'm going to make it so if you set it to cloaked it ignores rotation/scaling, for now
(just making it use the old draw code as though the QR were on)
which is simple enough
and *hopefully* I've just fixed the phantom one
as transparency functions are common enough, so shouldn't need anything too fancy, just needed a bit of rearranging

=== @EmilyV99 (discord: Emily) 11/13/2021 07:49

see if this works?
@ Moosh
https://cdn.discordapp.com/attachments/901122140261195836/908987063729266718/buildpack.zip

=== @ Moosh 11/13/2021 07:58

uhhhhhhhh
![image](https://cdn.discordapp.com/attachments/901122140261195836/908989064395493436/unknown.png)
the fudge
Suppose it's fortunate I made a backup
Yeah this is very broken

=== @EmilyV99 (discord: Emily) 11/13/2021 07:59

.....hmmm

=== @ Moosh 11/13/2021 07:59

Link is invisible and my phantom weapons are showing up cloaked with black flicker

=== @EmilyV99 (discord: Emily) 11/13/2021 07:59

so uh, the title screen is most certainly a separate issue
I noticed some title screen fuck up in a few recent builds
....though that's far worse than what I saw
feel like something to do with modules is fucked up there

=== @EmilyV99 (discord: Emily) 11/13/2021 08:02

.....what the fuck would be making Link invisible, though???

=== @EmilyV99 (discord: Emily) 11/13/2021 08:03

You just have 1x1 tile link, right?
and, what size are the weapons?

=== @ Moosh 11/13/2021 08:05

1x1 weapons. 1x2 Link

=== @EmilyV99 (discord: Emily) 11/13/2021 08:06

OK, so, I only modified 1x1
so if something's wrong with a 1x2 link
then there's something really weird going on here
maybe it just build-bugged.... let me rebuild clean

=== @ Moosh 11/13/2021 08:07

It's all sprites
Enemies are invisible as well

=== @EmilyV99 (discord: Emily) 11/13/2021 08:07

what the fuck
literally all I did is make it so in the spot it normally does either `draw tile, draw trans tile, draw cloaked tile`
now it just does `draw tile`
so anything with a drawstyle that isn't phantom/cloaked should be fucking *exactly the same*

=== @ Moosh 11/13/2021 08:09

Sounds like this stuff is more complicated than it seemed then?

=== @EmilyV99 (discord: Emily) 11/13/2021 08:09

unless MSVC just decided to fuck up the build
so I'm rebuilding from clean
and hopefully that will magically fix it

=== @ Moosh 11/13/2021 08:10

Alrighty then
I take it that's just a thing that happens sometimes

=== @EmilyV99 (discord: Emily) 11/13/2021 08:11

yeah, sometimes
if you think the zscript parser is bad
holy hell
real compilers are shit

=== @EmilyV99 (discord: Emily) 11/13/2021 08:13


https://cdn.discordapp.com/attachments/901122140261195836/908992965165322260/zelda.exe
try that
and please for the love of fucking god let it work

=== @ Moosh 11/13/2021 08:15

well this looks completely different now
![image](https://cdn.discordapp.com/attachments/901122140261195836/908993435418120192/unknown.png)
still invisible

=== @EmilyV99 (discord: Emily) 11/13/2021 08:17

what the *fuck*
*oh
oh
wait
I'm a fucking dumbass
I see a single tiny fucking typo
uhg

=== @EmilyV99 (discord: Emily) 11/13/2021 08:26

try this
@ Moosh
(ignore the title screen because I haven't touched that)
....wtf discord
`upload failed`

https://cdn.discordapp.com/attachments/901122140261195836/908996367983190026/zelda.exe
there we go

=== @ Moosh 11/13/2021 08:28

uhhh
it's crashing on the title screen for me now
no error, just gone

=== @EmilyV99 (discord: Emily) 11/13/2021 08:29

what the fuck

=== @ Moosh 11/13/2021 08:29

wait run as admin worked

=== @EmilyV99 (discord: Emily) 11/13/2021 08:29

I haven't changed anything related to the title screen
in literally days
so that's all some other unrelated issue
that apparently can randomly crash
ffs

=== @ Moosh 11/13/2021 08:29

I mean it's very unstable and apparently reading random data for graphics
so it's not out of the question some of what's causing that could cause random crashes

=== @EmilyV99 (discord: Emily) 11/13/2021 08:30

I don't have any idea why that's doing any of that
it just started doing it a couple days ago
and it probably has something to do with zoria's module bullshit
which frankly never should have fucking touched title screen stuff
jesus

=== @ Moosh 11/13/2021 08:31

Anyways, same result
Sprites invisible, ones with phantom are behaving as cloaked

=== @EmilyV99 (discord: Emily) 11/13/2021 08:32

what?????? the?????? fuck?????????????

=== @EmilyV99 (discord: Emily) 11/13/2021 08:37


https://cdn.discordapp.com/attachments/901122140261195836/908998943277469786/zelda.exe
try this

=== @ Moosh 11/13/2021 08:43

situation appears to be the same

=== @EmilyV99 (discord: Emily) 11/13/2021 08:43

I am *so* confused
I made such a small change
what the fuck

=== @arceusplayer11 (discord: Deedee) 11/13/2021 08:45

@EmilyV99 (discord: EmilyV) try building in debug and seeing if things break

=== @ Moosh 11/13/2021 08:45

1st.qst still draws correctly but I suspect that's just because old sprite drawing

=== @arceusplayer11 (discord: Deedee) 11/13/2021 08:45

if not, then it might be debug code that for some reason compiles but screws over release
not sure why that would happen or if that's at all likely

=== @EmilyV99 (discord: Emily) 11/13/2021 08:52

ok
fucking humor me

https://cdn.discordapp.com/attachments/901122140261195836/909002912276021259/zelda.exe
and tell me that this fucking works
as far as things not being invisible

=== @ Moosh 11/13/2021 08:55

I see again

=== @EmilyV99 (discord: Emily) 11/13/2021 08:56

OK, thank the lord for my sanity
(I literally just reverted everything I changed)

=== @ Moosh 11/13/2021 08:56

Yeahh that makes sense

=== @arceusplayer11 (discord: Deedee) 11/13/2021 08:57

okay, thank god

=== @EmilyV99 (discord: Emily) 11/13/2021 09:01

can you just post your quest file you're testing with, @ Moosh ?
probably easier for me to test things repeatedly at this point instead of posting 50000 builds for you

=== @ Moosh 11/13/2021 09:01

Sure thing

=== @ Moosh 11/13/2021 09:04

aaaaand it's too big now to send over Discord. shit

=== @EmilyV99 (discord: Emily) 11/13/2021 09:04

oof
any chance you could make a smaller test quest that showcases the issues?

=== @EmilyV99 (discord: Emily) 11/13/2021 09:13

huh
the title screen thing is based on the last quest you loaded
what the fuck

=== @EmilyV99 (discord: Emily) 11/13/2021 09:50

I WANT TO FUCKING KILL SOMEONE
WHAT THE FUCK
SO
```cpp
if(drawstyle==0 || drawstyle==3) overtile16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,cs,((scriptflip > -1) ? scriptflip : flip));
else if(drawstyle==1) overtiletranslucent16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,cs,((scriptflip > -1) ? scriptflip : flip),128);
else if(drawstyle==2) overtilecloaked16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,((scriptflip > -1) ? scriptflip : flip));```
this is a code block
it does opaque if drawstyle is 0 or 3
trans if 1
and cloaked if 2
changing it to this
```cpp
overtile16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,cs,((scriptflip > -1) ? scriptflip : flip));
```
makes it not fucking work and everything is invisible
despite that, for a drawstyle of 0 or 3, *it is literally the same fucking block of code*
and ***even fucking stupider***
```cpp
if(drawstyle==0 || drawstyle==3) overtile16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,cs,((scriptflip > -1) ? scriptflip : flip));
else if(drawstyle==1) overtile16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,cs,((scriptflip > -1) ? scriptflip : flip));
else if(drawstyle==2) overtile16(sprBMP,tileToDraw,sx+j*16,sy+(tysz-i-1)*16,cs,((scriptflip > -1) ? scriptflip : flip));
```
this now does the same thing in all 3 ifs
....and THIS ONE FUCKING WORKS??????????????????
WHAT THE FUCK

=== @EmilyV99 (discord: Emily) 11/13/2021 09:54

.....
`if(unsigned(drawstyle) < 4)` does not work
but `if(drawstyle==0||drawstyle==1||drawstyle==2||drawstyle==3)` does
and those are fucking identical logically
what the fuck
what is this cursed bullshit
why

=== @EmilyV99 (discord: Emily) 11/13/2021 10:17

ooookay
finally got it working for all extend values
with enough fiddling with random cursed bullshit

=== @EmilyV99 (discord: Emily) 11/13/2021 10:32


![image](https://cdn.discordapp.com/attachments/901122140261195836/909027989054951424/unknown.png)
might be hard to tell at a glance, but there's cloaked draws there
and they are working
with new code
I want to murder these functions that use pointer bullshit, but at least I fucking understand them now

=== @EmilyV99 (discord: Emily) 11/13/2021 10:41

@ Moosh
https://cdn.discordapp.com/attachments/901122140261195836/909030125566296064/buildpack.zip
title screen is still fucked
gonna tackle that next... though probably not until I've slept
(meta) thread name was changed: üíäüîìDS_PHANTOM broken with new sprite drawing.
## Non-Hardcoded Moldorm Animation (#982)
@ P-Tux7 opened this issue on 10/22/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/901258465199128627



=== @ P-Tux7 10/22/2021 23:59

Moldorms currently have hardcoded animation - one tile for New Enemy Tiles off, their usual setup for New Enemy Tiles on. You can see that their Animation Style is empty. Requesting a Moldorm animation style (which is 4-frame 8-dir + 2 copy rows) and for this to no longer be linked to the QR
might be useful for scripted enemies to be able to access such a kind of animation too, like emily's splitting moldorm
## armos-on-layers (#983)
@ P-Tux7 opened this issue on 10/23/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/901585233428770826



=== @ P-Tux7 10/23/2021 21:37

Requesting Armos working on layers now that layer stuff is being worked on. Both me and @ Falco are interested in this
(btw falco, the reason i said there's layer stuff being worked on is that emily just got pushblocks working on layers - including them producing their layer's screen's undercombo beneath them)

=== @ Falco 10/23/2021 21:44

cool, cool
why was I interested in this again? üôÇ
*doesn't remember*
I remember being interested in walkable armos combos...

=== @ Falco 10/23/2021 21:46

that is cool though

=== @EmilyV99 (discord: Emily) 10/23/2021 21:51

Pushblocks were dead easy.... armos look a *lot* harder

=== @ Falco 10/23/2021 21:54

you sure it was me, P-Tux?
Like I said, I remember suggesting armos combos be available to trigger as walkable combos (as in, you walk across them, and an enemy spawns)
I don't remember layers though

=== @ Moosh 10/23/2021 21:55

Believe 2.55 can already do that can't it? Just with a step->next into generic with enemy spawning

=== @ Falco 10/23/2021 21:55

well
I ended up sort of half and halfing it with walkability. As in, checkerboard patterning the walkability of the combo
somehow that actually worked

=== @ P-Tux7 10/23/2021 21:59

that might be problematic if spawning enemies can hurt you

=== @ Falco 10/23/2021 22:08

They dont.
Mine don't anyways
Quest rules.
Or... something
It's been a minute
But I do know I didn't have trouble with that when I got things going
It was utilized to simulate gels coming out of the floor like in Alttp, and actually worked nicely
## Expand FFC size limit (#984)
@ Alucard648 opened this issue on 10/24/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/901905970261794826



=== @ Alucard648 10/24/2021 18:52

4*4 is sometimes not enough for ghosted enemies and certain scripts.

=== @ P-Tux7 10/24/2021 19:53

What's the limit for the new resizable normal combos?

=== @EmilyV99 (discord: Emily) 10/24/2021 22:57

"Resizable normal combos"?

=== @ P-Tux7 10/24/2021 23:13

i thought some combos now had a size field
such as armos

=== @EmilyV99 (discord: Emily) 10/24/2021 23:22

oh, think Zoria did that
I have no clue what the limit is
but, it's entirely separate code, entirely unrelated to ffcs

=== @ P-Tux7 10/24/2021 23:26

yeah i was asking because whatever limit was efficient there, might apply here as well

=== @EmilyV99 (discord: Emily) 11/11/2021 10:04

so uhhhhhh
fun times
An FFC's `TileWidth` and `EffectWidth` are crammed into a single variable as bitwise
so there *literally is not any more room* in the variable
and, expanding FFC's variables by *anything* is a ***MASSIVE*** memory and .qst size cost
## üíäüîìBridge combos and effect squares (#985)
@ Moosh opened this issue on 10/25/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/902103385543688214



=== @ Moosh 10/25/2021 07:56

From my understanding bridge combos are supposed to unset solidity bits for all layers under them. And to have a bridge cover half a combo, you can use the effect squares to mark which bits it overrides. But I'm only managing to get a bridge that overrides the full tile

![image](https://cdn.discordapp.com/attachments/902103385543688214/902103403684048926/unknown.png)

=== @EmilyV99 (discord: Emily) 10/25/2021 07:57

don't thing bridges had effect square support added
@arceusplayer11 (discord: Deedee)

=== @ Moosh 10/25/2021 07:57

Here's what my combo setup looks like. The idea is the left side should have bridge behavior while the right side should be a barrier
Ah really? Shoot. Swore they did

=== @ Moosh 10/25/2021 08:00

I gotta say this feature is excellent. I threw together a basic over/under script in a little under an hour when before this was a major multi day headache. Of course the "simple" part might be a part of this, it doesn't interact with enemies

=== @ P-Tux7 10/25/2021 16:36

How'd this help you do that?

=== @arceusplayer11 (discord: Deedee) 10/25/2021 19:42

(replying to @ P-Tux7 "How'd this help you do that?"): I imagine the fact that you don't need to make walkable versions of every combo and manually change swap between them for the combos on the under part

=== @ P-Tux7 10/25/2021 19:45

lmfao nice

=== @arceusplayer11 (discord: Deedee) 01/15/2022 10:00


![image](https://cdn.discordapp.com/attachments/902103385543688214/931850285251428432/unknown.png)
hatred

=== @ Moosh 01/15/2022 10:27

I am deebly sorry Deedee üò¶

=== @arceusplayer11 (discord: Deedee) 01/15/2022 10:31

It's something that needs to be done
but oof I hate my past self

=== @arceusplayer11 (discord: Deedee) 01/17/2022 13:02

I got through the second biggest file of this, which was 30-something calls just to ensure the misalignment things worked with bridges
and 3 of the files didn't need to be changed, so only 2 more files, or about 70 calls left to fix
and then pray that I didn't break them entirely

=== @arceusplayer11 (discord: Deedee) 01/17/2022 13:41

Finished one of them
One file left
aka 31 more calls to look at

=== @ P-Tux7 01/17/2022 16:29

oof

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:05

Alright, done
I tested it with spikes, water, and solidity
There's a possibility I missed something obscure though

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:26

@ Moosh should be available whenever a new build comes out

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:28

It'll be tied to a compat rule, "old bridge combo behavior"

=== @arceusplayer11 (discord: Deedee) 02/11/2022 09:14

(meta) thread name was changed: üíäüîìBridge combos and effect squares

=== @EmilyV99 (discord: Emily) 02/13/2022 05:22

@ Moosh [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## The ability to export item data - just like enemies (#986)
@ SkyLizardGirl opened this issue on 10/26/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/902385730070929408



=== @ SkyLizardGirl 10/26/2021 02:38

You can export backups of all your item's settings and data just like you can with enemies.

=== @ZoriaRPG (discord: Timelord) 10/27/2021 11:25

Didn't I add this?
.zitem was on my list. DID I forget it?

=== @ SkyLizardGirl 11/04/2021 07:34

Oh wait, i will take a look.
how do I again?

=== @ZoriaRPG (discord: Timelord) 11/05/2021 07:21

@ SkyLizardGirl it is piece meal, in the item editor, export button
Mass import was planned but yet to be added

=== @ SkyLizardGirl 11/05/2021 10:05

Oh ok
Thank you
## Instant warp with fadeout effect (#987)
@ Alucard648 opened this issue on 10/28/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/903078675371667506



=== @ Alucard648 10/28/2021 00:32

Why this warp type is still missing?

=== @ P-Tux7 10/28/2021 01:16

huh... that's true...
do you mean like a z1 staircase warp
or the fade to white warp
the former has a quicker fade in and fade out than the latter

=== @ P-Tux7 10/28/2021 01:19

also huh i wonder if the fade to white and zap warps use a hardcoded white colour

=== @ Alucard648 10/28/2021 02:28

Former one.

=== @ Alucard648 10/28/2021 02:55

like a z1 staircase warp, but instant variety

=== @ P-Tux7 10/28/2021 04:34

maybe this can be renamed to be more specific

=== @ P-Tux7 11/23/2021 03:18

wait @EmilyV99 (discord: EmilyV) what warp animation do warping pitfalls use

=== @EmilyV99 (discord: Emily) 11/23/2021 03:22

the one set in the tile warp they use, IIRC?

=== @ P-Tux7 11/23/2021 04:02

oh mm
i think we need two new warp types
the z1 quick stair fade to black
and the lttp pit warp fade to black
time for me to count frames...

=== @ Alucard648 11/24/2021 09:24

(replying to @EmilyV99 (discord: Emily) "the one set in the tile warp‚Ä¶"): And side warps.

=== @EmilyV99 (discord: Emily) 11/24/2021 14:45

....no?
don't think pits use sidewarps

=== @ Alucard648 11/26/2021 06:15

Falling off bottom of the screen in sideview areas.

=== @EmilyV99 (discord: Emily) 11/26/2021 13:52

That isn't a pitfall combo
## üîì1.90 compat bugs (#988)
@arceusplayer11 (discord: Deedee) opened this issue on 10/28/2021

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/903143138741350410



=== @arceusplayer11 (discord: Deedee) 10/28/2021 04:48

Apparently, the "Start with 999 rupees" quest rule was misinterpreted when updated for newer quests in 1.90. Apparently, it's a quest rule intended to start you with the level 2 wallet. However, this seems to have been forward ported as starting with actually 999 rupees. The intended behavior should be starting with a *max* of 999 rupees, not starting with 999 rupees.

=== @ tim 10/28/2021 04:49

looks like i also misunderstood that one
i was under impression of amount and not wallet back then, but never used the rule

=== @arceusplayer11 (discord: Deedee) 10/28/2021 04:59

really easy fix, might be able to fix this right now

=== @ P-Tux7 10/28/2021 05:07

ah yeah that was before 1.92 init data

=== @arceusplayer11 (discord: Deedee) 10/28/2021 18:35

(meta) thread name was changed: 1.90 compat bugs
This ended up being a bundle cause there were way more than just that issue for 1.90
spawning graphics didn't initialize as wSPAWN, because 1.90 stuff is handled in it's own if statent

=== @arceusplayer11 (discord: Deedee) 10/28/2021 18:37

message strings were broken by being 1 too short both width and heightwise, a bug I fixed a while back for everything but 1.90 quests cause, again, those are handled in their own if statement

=== @arceusplayer11 (discord: Deedee) 10/28/2021 18:38

subscreen couldn't even be opened, because, again, subscr speed initialized as 0 instead of 1 when only the 1.90 if statement runs
(I'm surprised it lets you unpause though. I would have expected a softlock)\

=== @EmilyV99 (discord: Emily) 10/28/2021 18:39

Fun

=== @arceusplayer11 (discord: Deedee) 10/28/2021 18:41

1.90 quests are going on the watchlist for "might have broken stuff"
So uh, tha tmeans I'm gonna be binging 1.90 quests in the near future... fun.

=== @ tim 10/28/2021 18:55

ping me for anything 1.90/1.92 related
can verify and test old versions

=== @ P-Tux7 10/28/2021 18:57

newfirst edit, type "zelda" cheat, give yourself bow and arrow, speed to first dungeon
https://cdn.discordapp.com/attachments/903143138741350410/903356807857180722/ARROWDGN.QST
room right of entrance has arrow-shoot tiles
example
![image](https://cdn.discordapp.com/attachments/903143138741350410/903356865147187220/2021-10-28_13-55-59.mp4)
ok so it seems like arrows are meant to go that far inside dungeons inside 1.90, i know at least one quest that takes advantage of this that doesn't work right in 2.50
https://www.zeldaclassic.com/resource-listing/entry/83/

=== @ P-Tux7 10/28/2021 18:59

(i don't know of any quests that use the left/right thing but i did it just to test; it seems like it doesn't work unless you stand right next to the wall so the arrow spawns "inside" it for a frame)

=== @ P-Tux7 10/28/2021 19:01

(tested it out on the overworld as well, it seems like arrows go all the way up even in 2.50 so we're good there)

=== @ P-Tux7 10/28/2021 19:02

none of the dungeon arrow triggers in these locations work in 2.50.2
![image](https://cdn.discordapp.com/attachments/903143138741350410/903358112898101279/2021-10-28_14-02-10.mp4)

=== @ P-Tux7 10/28/2021 19:11

i think keese tribbles also grow up into vire tribbles in 1.90 quests
when they SHOULD grow up into blue vires
and lanmolas/manhandlas need per-segment drops enabled in 1.90 quests

=== @ P-Tux7 10/28/2021 19:13

i can't remember if it applies to any extant 1.90 quests but the "old hammer range" thing should apply to 1.90 quests if it wasn't already

=== @arceusplayer11 (discord: Deedee) 10/28/2021 21:51

Okay uh this might be harder to recreate than I thought
because we don't seem to have the 1.90 source code

=== @EmilyV99 (discord: Emily) 10/28/2021 21:52

^ aye

=== @arceusplayer11 (discord: Deedee) 10/28/2021 21:54

it looks like it's blocking them some of the time but not all of the time
so I assume it's pixel and step speed based, where it clips farther before getting blocked

=== @arceusplayer11 (discord: Deedee) 10/28/2021 22:06

@ P-Tux7 it would be helpful to know the specifics of when this change was introduced. Currently it checks for quests made before 1.92.
The arrow clip, I mean

=== @ tim 10/28/2021 22:13

i wanna say 2.10 was the big version where it changed

=== @ P-Tux7 10/28/2021 22:13

that's odd because 1.92 and 2.10 seem very similar

=== @ tim 10/28/2021 22:14

i think i tested this with ptux in 1.92
do you recall?

=== @ P-Tux7 10/28/2021 22:14

i don't sorry

=== @ tim 10/28/2021 22:15

problem is 2.10 doesnt run in w10 or dosbox
it might run in wxp vm

=== @arceusplayer11 (discord: Deedee) 10/28/2021 22:18

apparently you need command line arguments to run it

=== @ tim 10/28/2021 22:21

i could try later tonight to force it to work

=== @ P-Tux7 10/28/2021 22:21

dumb question can the 2.5 launcher launch THAT .exe

=== @arceusplayer11 (discord: Deedee) 10/28/2021 22:21

the guy who told me this is currently away, I'm not sure if they're offline or not

=== @ tim 10/28/2021 22:21

i found this arrow issue in uh

=== @ P-Tux7 10/28/2021 22:22

(replying to @ P-Tux7 "ok so it seems like arrows ar‚Ä¶"): ^
that's the quest, a 1.90 one

=== @ tim 10/28/2021 22:22


![image](https://cdn.discordapp.com/attachments/903143138741350410/903408377588228196/unknown-99.png)
this is the one i reported back then
altadd

=== @arceusplayer11 (discord: Deedee) 10/28/2021 22:45

@ P-Tux7 what version was that quest saved in?

=== @arceusplayer11 (discord: Deedee) 10/28/2021 22:48

nevermind, seems to have been saved in 1.90
okay, hmm

=== @ P-Tux7 10/28/2021 23:00

yeah both ALTADD and my test quest are saved in 1.90
top video is 1.90 player
bottom video is 1.90 QUEST in 2.50.2 player

=== @arceusplayer11 (discord: Deedee) 10/29/2021 02:54

https://www.purezc.net/forums/index.php?showtopic=68678&hl=
Seems to be a good guide for running in older versions
I'll keep this handy
@ P-Tux7 could you do me a favor and see if this persists in 1.92?
we have the source for that, and I'm really hoping it wasn't fixed before then

=== @ P-Tux7 10/29/2021 02:55

yeah i'll try
which version do you have the source for?

=== @arceusplayer11 (discord: Deedee) 10/29/2021 03:27

1.92 b114

=== @ tim 10/29/2021 03:27

that's the thread i pulled the dosbox config from
rambles also reposted it at some point

=== @arceusplayer11 (discord: Deedee) 10/29/2021 03:40

Disregard that, I figured out what line of code broke this behavior
So the old behavior can now be recreated 100%
And it clearly does exist in 1.92 b114
I need to check when exactly it got added though

=== @ tim 10/29/2021 03:41

i must've tested it in 1.90 and not 1.92 then

=== @arceusplayer11 (discord: Deedee) 10/29/2021 03:42

er, I mean
The old behavior exists in 1.92
As in it wasn't fixed by then

=== @ tim 10/29/2021 03:42

OH i misread

=== @arceusplayer11 (discord: Deedee) 10/29/2021 03:42

And it doesn't exist in the initial version of 2.10 (just checked)

=== @ tim 10/29/2021 03:42

so my thoughts may be right
i can do a quick test in b183

=== @arceusplayer11 (discord: Deedee) 10/29/2021 03:45

Okay, out of curiosity
2.10.3 was the final release of 2.10 right
before 2.11 dev started

=== @ tim 10/29/2021 03:46

that im not sure about... let me see what i have

=== @arceusplayer11 (discord: Deedee) 10/29/2021 03:46

there's a dark period between 2.10.3 and 2.11 beta 11 where this change got added
we don't have any source code between those two versions

=== @ tim 10/29/2021 03:47

my copy of 2.10 is from 1/1/2005
let me see if i can open it

=== @ tim 10/29/2021 03:52

all i seem to have is that date which is build 0
you have a copy of 2.10.3?
can you check the file date

=== @ tim 10/29/2021 03:57

and hell if its newer than what i have i'll take a copy and see of i can run it

=== @arceusplayer11 (discord: Deedee) 10/29/2021 04:02

It seems like 2.10.3 was just a ZQuest update looking at this

=== @arceusplayer11 (discord: Deedee) 10/29/2021 04:07

Also it's only the source code
I don't think I can build it
(can't find a date for 2.10.3 or 2.10.2 in the source files... figures)
but 2.10.2 seems to be the latest 2.10 build

=== @arceusplayer11 (discord: Deedee) 10/29/2021 05:10

(replying to @ P-Tux7 "i think keese tribbles also g‚Ä¶"): as far as I can tell, the source code already has code for this
Does anyone here have an example of a 1.90 quest with tribble enemies so I can test this out?

=== @ P-Tux7 10/29/2021 17:43


https://cdn.discordapp.com/attachments/903143138741350410/903700503517610044/TRIBBLES.QST
so go to cheats, type "zelda" and cheat yourself the White Sword and then wait for the tribbles to grow up
if the keese tribble grows up into a blue vire, GOOD. if it grows up into a black vire, BAD
and now test the zol you see by hitting it with the white sword. if it dies in one hit, GOOD, it's a regular zol. if it doesn't, it's a zol tribble, which is BAD
so in summary tribbles in 1.90 quests are supposed to grow up into their ORDINARY versions not tribble versions
also sorry, gels and zols look identical to their tribbles in 1.90 (both use the same tiles and cset 9), nothing i could do to expedite that

=== @ P-Tux7 11/02/2021 03:06

Was half-tile weapons hitting you supposed to be off in this version and 1.84? @ NightmareJames
And perhaps 1.92 as well

=== @ NightmareJames 11/02/2021 03:30

I'll work on this tomorrow.  I spent a lot of time on ZC tonight.  I need to do some other things

=== @ NightmareJames 11/02/2021 10:40

I can't remember if we agreed to have it flaggable or not
I'd prefer to have it togglable via emulation flags for 2.50 and below to avoid issues TBH
And let rules take care of it from 2.50 plus

=== @ P-Tux7 11/02/2021 12:48

That's the plan
I'm asking if it's currently in ZC or not
Or if all pre-2.5 quests are broken

=== @ NightmareJames 11/02/2021 12:51

I'll put it on my list to review.  RN taking care of 1.  5th Quest Whistle addition and 2.  Next recording, in addition to IRL stuff. Probably deal with it next week or on my next major time off.  üôÇ

=== @ P-Tux7 11/02/2021 13:10

no problem, i've got this

=== @ P-Tux7 11/04/2021 08:06

oh, something else i need to check in 1.90 (and possibly 1.92/2.10) is lanmola spawning
in quite a few quests i've seen they can't move at where they spawn, implying that they used to spawn in psuedorandom locations like other dungeon enemies
come to think of it i should check blue wizzrobe spawn patterns in those versions too...

=== @ tim 11/04/2021 17:24

is it mostly screen edges?
ive def seen stationary in the middle of the screen though... not sure what causes it

=== @arceusplayer11 (discord: Deedee) 11/04/2021 17:28

(replying to @ P-Tux7 "in quite a few quests i've se‚Ä¶"): Is it Hookshot 1 you're thinking of?
Cause I know it's an injoke there

=== @ P-Tux7 11/04/2021 17:50

no i mean 1.90-2.10 quests lol
(replying to @ tim "ive def seen stationary in th‚Ä¶"): more like middle to the left
i think that's where they always spawn in z1 (you know like how gleeoks always spawn in one place), and someone fixed it from 1.90 to 2.50, but failed to make the old behaviour still apply to 1.90 quests in 2.50

=== @ P-Tux7 11/20/2021 00:37

invisible enemies in 1.90 were completely invisible a la zelda 2. not cloaked.
i need to test if this applies to their projectiles
i'm not sure if the amulet was in 1.84 because 1.84 was 1.90 with half the inventory missing but let's make the version check "1.90 or below" just in case

=== @ P-Tux7 12/24/2021 03:39

ok so according to haylee apparently swimming in 1.90 (and 1.92? idk) had something a la smart screen scrolling but ONLY when swimming
also in 2.50.2 it seems that the whole "bomb explosions last longer and can kill aquamentus with one bomb" isn't enabled in 1.90 (and 1.92? again idk) quests automatically?

=== @ tim 12/24/2021 03:51

why would it
that's not how it was intended in 1.90/92

=== @ P-Tux7 12/24/2021 03:54

i admit it's not high priority but quests should generally play the same as the version they were made in
and also because iirc there's already a quest rule for it so it's not a big deal to toggle it being turned on automatically in said quests

=== @ P-Tux7 01/23/2022 00:06

ok so the aquamentus thing is somehow a 1.92 only thing. it takes two bombs to kill an aquamentus in 1.90 and the compat rule name is correct.

=== @arceusplayer11 (discord: Deedee) 02/08/2022 09:41

This channel is kinda useless now that compatibility reports are a thing

=== @arceusplayer11 (discord: Deedee) 02/08/2022 09:43

@ P-Tux7 if it's not too much trouble, could you recap the specific issues that you don't think are fixed yet? Either here or in compat rules, either works
I just need to sort out what's a bug that needs to be fixed and what's an observation

=== @EmilyV99 (discord: Emily) 02/08/2022 13:20

(meta) thread name was changed: üîì1.90 compat bugs

=== @ P-Tux7 02/08/2022 18:15

yeah i am
i've already made a few channels and have been in the process of testing a few more
turns out that lanmolas and manhandlas do NOT have per-segment drops in 1.90 - that was a bug introduced in 1.92, just like the aquamentus 1-hit bomb kill

=== @ P-Tux7 02/13/2022 05:49

check if lanmola spawn location is hardcoded in 1.90 and check if "entering screen on a water combo + ladder causes softlock" bug from 2.50.2 is still extant in Puzzle Quest
## üîì1.92 2.10 compat bugs (#989)
@ P-Tux7 opened this issue on 10/28/2021

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/903413814618378300



=== @ P-Tux7 10/28/2021 22:43

same as above
@ Moosh i recall you scripted some of these quirks into armageddon quest 2. any that you did besides the windrobes?
(meta) thread name was changed: 1.92 2.10 compat bugs

=== @ Moosh 10/28/2021 22:45

Believe windrobes were the only thing

=== @ P-Tux7 10/29/2021 00:12

okay so 2.53 (and 2.55?) has native code for the windrobe thing in the emulation menu
now all that needs to be done @<role: Developer> is making it auto-run when quest ver is 2.10 or less
(instead of the emulation menu)
oh sorry for the ping i thought developer was just emily and dimi

=== @EmilyV99 (discord: Emily) 10/29/2021 00:15

yeah nope it's a few people
try to direct ping instead of role ping

=== @ P-Tux7 10/29/2021 00:17

i didn't wanna single anyone out but yeah

=== @ Moosh 10/29/2021 00:23

It was my understanding I thought that emulation rules were made optional rather than mandatory because different quests were made for different subversions of ZC, especially in the 1.92 days
It's a messy solution but then ZC is a messy program

=== @ P-Tux7 10/29/2021 00:23

nah iirc it was because 2.50 was out of QRs to auto-activate

=== @ Moosh 10/29/2021 00:24

Right, the reason they're a toggle menu, not the reason they exist in the first place

=== @EmilyV99 (discord: Emily) 10/29/2021 00:26

@ZoriaRPG (discord: Timelord) made them

=== @ P-Tux7 10/29/2021 00:27

not to put too fine a point on it but i don't think he cares anymore

=== @ P-Tux7 10/29/2021 00:33

of course we're free to reuse the code though

=== @ZoriaRPG (discord: Timelord) 10/29/2021 06:17

I was going to make the windrobe fix an enemy flag, not a qr, for 2.55 and auto enable it for older quests.
Same for other enemy fixes.
Some of the emulation could become rules.
Some may be best to keep as emulation options in the player.

=== @ P-Tux7 10/29/2021 17:54

yeah, i was going to feature request that since OUCH! has stated they prefer the old windrobes
though i couldn't do it here since this is strictly for bugs

=== @ZoriaRPG (discord: Timelord) 10/29/2021 19:06

Enemy variation always belongs on enemy flags, not on a global rule.

=== @ P-Tux7 10/29/2021 19:58

oh yeah and from 1.92-2.10
"rope 2s do not flash" should assign them cset 9, not 8

=== @ P-Tux7 10/30/2021 02:08

#990

=== @ P-Tux7 10/30/2021 07:59

@arceusplayer11 (discord: Deedee) speaking of armageddon quest
has the whole "door repairs in gamble dungeon never exhaust, they keep draining you every time you enter because it's in a dungeon" thing been emulated
i thought it was a rule in 2.50.2 already but i remember someone complaining that it broke in 2.50.2

=== @arceusplayer11 (discord: Deedee) 10/30/2021 08:00

hmm

=== @ P-Tux7 10/30/2021 08:02

oh and also while we're at it
https://www.purezc.net/index.php?page=quests&id=744
(744)
would you mind asking ouch what broke and needed changing for 2.53
because they'll care more if it's from an actual dev

=== @arceusplayer11 (discord: Deedee) 10/30/2021 08:06

robber's mansion most likely
the left path was broken because of lanmolas not counting as ringleaders IIRC

=== @ P-Tux7 10/30/2021 08:15

oh mm
fixed yet? dare i ask

=== @arceusplayer11 (discord: Deedee) 10/30/2021 08:28

no clue
I think they did something else for that room

=== @ P-Tux7 10/30/2021 08:40

so what's the issue
they DID or DIDN'T count in 1.92

=== @arceusplayer11 (discord: Deedee) 10/30/2021 08:41

they did count
every other enemy in the room is a phantom ghini
unkillable

=== @ P-Tux7 10/30/2021 08:50

well that's odd

=== @arceusplayer11 (discord: Deedee) 10/30/2021 08:59

so for some reason they no longer killed those ghinis when they died

=== @ P-Tux7 10/30/2021 18:26

@ZoriaRPG (discord: Timelord) which 1.92 version swapped cancel and wavy warps

=== @arceusplayer11 (discord: Deedee) 10/30/2021 20:53

build 163

=== @arceusplayer11 (discord: Deedee) 10/30/2021 20:54

@ P-Tux7

=== @ P-Tux7 10/30/2021 20:54

thanks!

=== @arceusplayer11 (discord: Deedee) 10/30/2021 20:54

fun fact, the rule internally is named qr_192b163

=== @ P-Tux7 10/30/2021 20:54

well then

=== @arceusplayer11 (discord: Deedee) 10/30/2021 20:54

and before was emu192b163

=== @ P-Tux7 10/30/2021 20:54

sorry for the ping timelord

=== @arceusplayer11 (discord: Deedee) 10/30/2021 20:55

thank god, cause I couldn't find the topic about it on the old dev server

=== @ P-Tux7 10/30/2021 21:12

@ZoriaRPG (discord: Timelord) out of curiosity do you have any of the four(?) "1.93" builds

=== @ P-Tux7 10/30/2021 21:23

ok so link's bad hair day 4 confirmed to not be bugged in B104. let's see about 183 now
(for reference, the bug is that the overworld's "cave" things such as text and shops show on their respective overworld screen without you entering the cave)

=== @ZoriaRPG (discord: Timelord) 10/31/2021 13:24

(replying to @ P-Tux7 "@ZoriaRPG (discord: Timelord) out of‚Ä¶"): No, I have a set of *seven* 1.93 builds.
I am uncertain what differentiates  '√ó from 'ws' designations
I have alpha 4 as d, s, w, and 'ws'
Alpha 5 as dos and windows
And alpha 6 as windows

=== @ P-Tux7 10/31/2021 17:50

lay em on me please

=== @ZoriaRPG (discord: Timelord) 11/01/2021 14:56

I will wait for @EmilyV99 (discord: EmilyV) to make a channel so that no-one have a reason to complain about ot posts.

=== @EmilyV99 (discord: Emily) 11/01/2021 14:57

[#old-build-archive](https://discord.com/channels/876899628556091432/903985751967010866)

=== @ZoriaRPG (discord: Timelord) 11/01/2021 14:58

That works
It was specific to 1.92 before
1.93 is 2.50 alpha
Err
2.10 alpha

=== @ P-Tux7 11/02/2021 14:04

OH GOD OH GOD
https://cdn.discordapp.com/attachments/903413814618378300/905095115452874792/nf.qst
this upgraded newfirst from 1.92 beta 68b has the same issue as LBHD4
i.e. the cave guys appear on their respective overworld screens

=== @ P-Tux7 11/02/2021 14:11

presumably same for "newfirst_enhanced.qst" from beta 91
https://cdn.discordapp.com/attachments/903413814618378300/905096852041515058/newfirst_enhanced.qst

=== @arceusplayer11 (discord: Deedee) 11/02/2021 14:30

(replying to @ P-Tux7 "i.e. the cave guys appear on‚Ä¶"): Oh yeah, I fixed this
Haven't posted the nightly for it yet
thanks to @ Rambly for being kind and helping me iron out that bug

=== @ P-Tux7 11/02/2021 14:30

what was the problem?

=== @EmilyV99 (discord: Emily) 11/02/2021 14:30

dmap flags

=== @arceusplayer11 (discord: Deedee) 11/02/2021 14:31

there was an early breakpoint that was missed

=== @ P-Tux7 11/02/2021 14:31

oh mm

=== @arceusplayer11 (discord: Deedee) 11/02/2021 14:31

and the code we had to do this was after that

=== @ P-Tux7 11/02/2021 14:31

looking in the quest itself it *said* the overworld map was an Overworld
are there any known quests that this affects besides Link's Bad Hair Day 4 and the two Newfirst test .qsts?

=== @EmilyV99 (discord: Emily) 11/02/2021 14:33

it'd be every quest in that version

=== @ P-Tux7 11/02/2021 14:33

actually rambly if you can see this i'd like to ask you that, I'd like to play more of them

=== @EmilyV99 (discord: Emily) 11/02/2021 14:33

but should be fixed

=== @arceusplayer11 (discord: Deedee) 11/02/2021 15:00

It is fixed yeah
overworld types used to include those flags implicitly
but it wasn't actually setting those flags when upgrading to versions that split the type and the flags

=== @ Rambly 11/02/2021 16:15

(replying to @ P-Tux7 "actually rambly if you can se‚Ä¶"): one of these days im just gonna upload my whole quest archives
im busy lately so it might be a bit, but i'd like to
also um, mountain drew's hitchhiker's guide quest
to answer more directly

=== @ P-Tux7 11/02/2021 16:57

thanks!
also holy shit that's a thing?

=== @ P-Tux7 11/02/2021 17:00

ok so i dmed ouch and the only compatibility bug that they remember is that lanmola ringleaders do not kill the other enemies when killed

=== @arceusplayer11 (discord: Deedee) 11/02/2021 17:34

yeah, I need to look into that

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:20

I guess that those builds were of some use.
1.90 go 1.93 bugs are by far the worst.
2.10 is not that bad

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:22

It was helpful for checking a quest I couldn't open in 2.55

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:23

2.0.0, 2.10.1., 2.10.2, and the unreleased 2.10.3 source files re all on GH as brqnches
That is why I spent so much effort pestering ppl to send w/e they had and archiving it all in a coherent manner alongside my files
Behavioural observations help substantially

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:25

granted, it's not as helpful as actual source files
1.83 source would be huge
as would 1.90 source

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:25

1.80 was only the player
The 1.50 src is the closest stopgap
There was no public zq bin until iirc 1.83

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:27

1.83 source, I meant

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:27

I was lucky to get one 1.92 zrc pack, even incomplete
Are there any 1.84 to 1.90 issues that are unsolved?
The majority of fekked up regular changes were 1.92 to 1.93

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:29

it'd give a nice insight whenever it comes to quests made in those versions

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:29

Shrug
Look at the 1.50 src
It is so different that it isn't reasonably comprehensible compared to 2.50
I wrote a quest loader for 1.50 quests but never tested it
I wanted to convert Jer's 3rd to 2.53
Was meant to be the original official 3rd
And nobody in the general userbase have played it, few know it exists
I literally spent over two years hunting down what you have and pestering wl to find old media with files
The family of DNbmight still have his 20 year old drives but I did not want to ask them for something like that
DarkNation

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:35

I do not liking askeling parents of a deceased child for that sort of thing. I have been there and I know what memories it would resurface if it were done to me.

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:37

You are 9f course welcome to do what you want.
Perhaps wl may one day find more
But you need to be on his good side and to keep on it

=== @ P-Tux7 11/03/2021 15:15

(replying to @ZoriaRPG (discord: Timelord) "I guess that those builds wer‚Ä¶"): They were, thank you. Helped me test Link's Bad Hair Day 4

=== @ P-Tux7 11/03/2021 15:16

(replying to @ZoriaRPG (discord: Timelord) "I wanted to convert Jer's 3rd‚Ä¶"): what version was Jer's 3rd made in?

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:31

1.50

=== @ P-Tux7 11/11/2021 01:38

note to self: check dark nation's/zc.com's reports of when standalone digdogger kids and gohma 3s and 4s were changed to never return after death for specific version

=== @ P-Tux7 11/11/2021 01:40

i remember a video of dcsyxx swearing while playing soshi's quest because he dies while playing a 1.92 quest in 1.92 and knows the gohma 3 that he killed will respawn as it's not in a boss room lol

=== @ P-Tux7 11/15/2021 19:35

@arceusplayer11 (discord: Deedee) has 1.92 beta 104 quests having overworld guys show up outside their caves been fixed yet?
it doesn't seem to be in a recent nightly
and is it possible for me to manually fix it in zquest for the time being

=== @ P-Tux7 11/15/2021 19:38

oh i think it may not be setting use caves instead of item cellars or special rooms and guys are in caves only, for overworld dmaps in those quests
yup setting both of those fixed it, not sure which one
probably the second

=== @arceusplayer11 (discord: Deedee) 11/16/2021 08:44

....damnit

=== @ P-Tux7 11/24/2021 00:00

https://www.zeldaclassic.com/files/zc2102w.zip
doesn't work
could someone please give me windows 2.10
need to test something
someone SAID din's fire should trigger wand book fire triggers in their 2.10 quest but it's not doing so in 2.50.2
so i wanted to try and see if din's fire DID do that in 2.10 or if they just messed their quest up

=== @arceusplayer11 (discord: Deedee) 11/24/2021 00:06

um
I have it on my old comp but I don't want to boot it up if I can help it
Lemme see if I can find where I got it from

=== @EmilyV99 (discord: Emily) 11/24/2021 00:06

After dinner I'll check the link

=== @arceusplayer11 (discord: Deedee) 11/24/2021 00:08


https://cdn.discordapp.com/attachments/903413814618378300/912857179197960262/zc210w.exe
Here
it's not 2.10.2, it's only 2.10
unsure if it matters

=== @arceusplayer11 (discord: Deedee) 11/24/2021 00:12

@ P-Tux7

=== @ P-Tux7 11/24/2021 00:34

what is this, an install?
also yeah i actually did want 2.10.0 thanks
hah, 7zip shredded right through that
https://cdn.discordapp.com/attachments/903413814618378300/912864072192622592/zc210w.zip
[#old-build-archive](https://discord.com/channels/876899628556091432/903985751967010866)
```DemoEX.qst```
uh oh

=== @EmilyV99 (discord: Emily) 11/24/2021 01:06

(replying to @ P-Tux7 "https://www.zeldaclassic.com/‚Ä¶"): ....indeed, the link and the mirror are both broken

=== @ P-Tux7 11/24/2021 02:36

please post this on that channel
ah, they're on the wayback machine

=== @EmilyV99 (discord: Emily) 11/24/2021 02:45

remind me tomorrow to fix the link
and if you could post the wayback link here

=== @ P-Tux7 11/24/2021 02:45

ok so the window is just throwing hissy fits when i try to open either zelda-w or zquest-w

=== @EmilyV99 (discord: Emily) 11/24/2021 02:45

use zlaunch

=== @ P-Tux7 11/24/2021 02:45

https://web.archive.org/web/20170429074306/http://www.zeldaclassic.com/downloads

=== @EmilyV99 (discord: Emily) 11/24/2021 02:46

2.50.2 I had a similar issue, it would not open directly without bugging the shit out
but zlaunch worked fine

=== @ P-Tux7 11/24/2021 02:46

yeah no
![image](https://cdn.discordapp.com/attachments/903413814618378300/912896938540683294/unknown.png)
deedee i'm afraid you'll have to test this one on your own
just make a quest in 1.92 or 2.10 that gives you din's fire and has a wand book fire combo flag, and see if the din's fire fire triggers that please

=== @arceusplayer11 (discord: Deedee) 11/24/2021 03:08

@ P-Tux7 if you want to test 2.10 stuff, you need to do some weird stuff
you need to make a shortcut of ZQ, edit the shortcut, add "-w" after the path
should work

=== @ P-Tux7 11/24/2021 03:11

thanks!
does that apply to zelda-w as well?

=== @ P-Tux7 11/24/2021 03:13

```C:\Users\PTux7\Downloads\zc210w\zquest-w.exe -w```
huh, this doesn't work
do i need to enclose either one of the "words" in quotes?
(either the file path or the -w)

=== @EmilyV99 (discord: Emily) 11/24/2021 03:14

file path should only need quotes if it includes spaces
flags should never be quoted

=== @ Moosh 11/24/2021 03:15

Mine just looks like
`zelda-w.exe -windowed`

=== @ P-Tux7 11/24/2021 03:15

ah thanks that worked!

=== @ P-Tux7 11/24/2021 03:17

...wait, will that work for anyone else?
i put what moosh said for both (changing zelda to zquest of course) but when i open the shortcuts back up it's my file path again

=== @EmilyV99 (discord: Emily) 11/24/2021 03:27

that'd be how shortcuts work
so no
afaik to make it work for someone else you'd need to use a batch file
...which should be able to just have the same exact text in it and work

=== @ P-Tux7 11/24/2021 03:28

okay it triggers flag 74 in 2.10
https://cdn.discordapp.com/attachments/903413814618378300/912907547705491456/dinsfire.qst
okay why can't i use din's fire in the latest alpha it has no cost in this quest.
related to #1053 ?

=== @EmilyV99 (discord: Emily) 11/24/2021 03:29

wtf

=== @ P-Tux7 11/24/2021 03:30

uh yeah uh no
![image](https://cdn.discordapp.com/attachments/903413814618378300/912907952875257886/unknown.png)
magic was disabled in that 2.10 quest so nothing should use magic

=== @EmilyV99 (discord: Emily) 11/24/2021 03:31

it should cost rupees instead, then
iirc
and if the `enable magic` qr is unchecked, it should cost rupees when the cost counter is set to magic

=== @ P-Tux7 11/24/2021 03:34

said qr is unchecked

=== @EmilyV99 (discord: Emily) 11/24/2021 03:34

so it should be costing 32 rupees then
I would think

=== @ P-Tux7 11/24/2021 03:34

no, it shouldn't, since din's fire cost 0 rupees in 2.10 when magic was disabled
don't ask why

=== @EmilyV99 (discord: Emily) 11/24/2021 03:34

interesting
check if having 32 rupees works
definitely a compat bug, regardless

=== @ P-Tux7 11/24/2021 03:36

ok it works fine in 2.50.2
no rupees or magic needed

=== @EmilyV99 (discord: Emily) 11/24/2021 03:36

. . . wtf

=== @ P-Tux7 11/24/2021 03:36

though as i said, it's not triggering the wand book fire flag

=== @EmilyV99 (discord: Emily) 11/24/2021 03:36

OK, so 2 bugs
`Din's Fire triggers Book Fire Flag`

=== @ P-Tux7 11/24/2021 03:36

so let me mod in some rupees in that 2.10 quest and see if it triggers said flag in the latest 2.55 build

=== @EmilyV99 (discord: Emily) 11/24/2021 03:37

and `2.10 porting: if no enable magic, cost should be 0 for dins fire`

=== @ P-Tux7 11/24/2021 03:37

*2.10.2 or less
din's fire was in some late 1.92 builds iirc

=== @ P-Tux7 11/24/2021 03:41

ok so 2 things
1. din's fire does not trigger the wand book fire flag in the latest build
2. din's fire only VALIDATES cost, it does not remove 32 rupees

=== @EmilyV99 (discord: Emily) 11/24/2021 03:41

??????

=== @ P-Tux7 11/24/2021 03:41


https://cdn.discordapp.com/attachments/903413814618378300/912910868554080286/dinsfire.qst

=== @EmilyV99 (discord: Emily) 11/24/2021 03:42

Is the `only validate cost` flag being checked in the editor????

=== @ P-Tux7 11/24/2021 03:42

(go down one screen to get the 50 rupees)
no?!?
![image](https://cdn.discordapp.com/attachments/903413814618378300/912911052323311636/unknown.png)

=== @EmilyV99 (discord: Emily) 11/24/2021 03:42

What the *fuck*

=== @ P-Tux7 11/24/2021 03:43

again it seems similar to #1053
though in that case it DOES have enough rupees to validate the cost yet still does not work

=== @arceusplayer11 (discord: Deedee) 11/25/2021 03:53

(replying to @ P-Tux7 "though as i said, it's not tr‚Ä¶"): can confirm the 2.10 source does the check for wand fire when it goes to trigger dins fire stuff

=== @arceusplayer11 (discord: Deedee) 11/25/2021 03:54

need to see if it's also in 1.92 (since I believe Din's Fire was first added there) and then see which 2.50 RC it got changed in

=== @EmilyV99 (discord: Emily) 11/25/2021 04:42

ah
so zoria fucked the cost
it's checking rupees for the cost
but then it's charging your magic

=== @ P-Tux7 11/25/2021 04:48

(replying to @arceusplayer11 (discord: Deedee) "need to see if it's also in 1‚Ä¶"): would you mind if its a qr or item setting or something that the user can set, and not just auto-changed in the zc player? i like it
since logically a bigger magical fire item should be able to trigger a smaller magical fire item's trigger

=== @EmilyV99 (discord: Emily) 11/25/2021 04:50

. . . you keep asking things like this
it literally ***HAS*** to be a qr or item setting
for it to function in old quests
that's not an optional thing
"auto-changed in the zc player" is not a way things can be fixed

=== @ P-Tux7 11/25/2021 04:51

i could have sworn at least 2.50.2 hid some of those compatibility options in zquest but i could be wrong

=== @EmilyV99 (discord: Emily) 11/25/2021 04:51

2.50.2 did
which is, in itself, a 2.50.2 bug
because the devs didn't give enough of a crap about compatibility

=== @ P-Tux7 11/25/2021 04:51

see also: sideview damage combos

=== @EmilyV99 (discord: Emily) 11/25/2021 04:52

doing it like that is not fixing the bug

=== @ P-Tux7 11/25/2021 04:52

sorry for the confusion, that must be where i got the idea that zelda.exe can automagically detect and change stuff from

=== @EmilyV99 (discord: Emily) 11/25/2021 04:52

it's causing a compat bug

=== @EmilyV99 (discord: Emily) 11/25/2021 04:59

oh blehg
the cost shit here is really messed up
god dammit zoria
there's an item flag
that is no longer editable
that controls a thing\
and wasn't ported quite right

=== @EmilyV99 (discord: Emily) 11/25/2021 05:07

so this will still be broken in any quests loaded since around the time I started devving
but should be fixed for any old quests loaded in new versions now

=== @EmilyV99 (discord: Emily) 11/25/2021 05:14

(replying to @ P-Tux7 "no, it shouldn't, since din's‚Ä¶"): this wasn't dins
it was all items
but there was a *flag* to make it cost rupees

=== @EmilyV99 (discord: Emily) 11/25/2021 05:49

@ P-Tux7
https://cdn.discordapp.com/attachments/903413814618378300/913305393462149130/buildpack.zip
(didn't touch the wand fire flag issue, only the cost issues)

=== @ P-Tux7 11/25/2021 05:52

thanks!

=== @arceusplayer11 (discord: Deedee) 11/25/2021 08:11

(replying to @ P-Tux7 "i could have sworn at least 2‚Ä¶"): Yeah, it used to, but it's easier for us to have it be quest rules and stuff
or item rules, or etc
it's gonna be an item quest rule instead of a compat rule
cause it's more subjective whether you'd want it or not, as opposed to compat rules just fixing bugs

=== @ P-Tux7 12/06/2021 03:29

Oh... it seems part of the Beta 104 bug where Guys show up outside of their caves also means that their screens are flagged to have Stairways (like you'd find in a dungeon), not Caves.

=== @ P-Tux7 12/06/2021 03:31

Oh, it's not setting "Use Caves Instead of Item Cellars" properly

=== @ P-Tux7 12/31/2021 20:24

oh dear, i'm going to have to check how "Start with 999 Rupees" works in 1.90, 1.92, and 2.10
i know that to the top (2.10) INTENDS for you to start with a full 999 rupee counter + wallet

=== @arceusplayer11 (discord: Deedee) 12/31/2021 22:25

(replying to @ P-Tux7 "i know that to the top (2.10)‚Ä¶"): IIRC it just uses init data to start you with 999 rupees

=== @ P-Tux7 12/31/2021 23:35

ah good
i was worried it was broken back in 2.10 and we'd have to emulate it separately between 1.84 and 2.10
(i wonder if that rule existed in 1.84... i haven't even downloaded that one yet because until now it just seemed like 1.90 but worse)

=== @EmilyV99 (discord: Emily) 02/08/2022 13:20

(meta) thread name was changed: üîì1.92 2.10 compat bugs

=== @ P-Tux7 02/13/2022 05:52

write up report for 1.92 beta 104 (and presumably all 1.92 betas below that?) overworlds being broken - check if they are missing Use Caves Instead of Item Cellars, Guys Are Inside Caves/Special Rooms Only, or both map flags when played in 2.5x
i know enabling *both* fixes them... i just forgot to check if it's specifically one or the other

=== @EmilyV99 (discord: Emily) 02/13/2022 05:53

Frankly, it would be good if you could start moving anything that isn't fixed yet from these channels to [#compat-bug-reports](https://discord.com/channels/876899628556091432/932919361415577661)

=== @ P-Tux7 02/13/2022 05:53

those builds are kind of wacky... their quests still use 1.90 password encryption instead of 1.92's, as proven by ZCheat
(replying to @EmilyV99 (discord: Emily) "Frankly, it would be good if‚Ä¶"): ...yeah, that's what "write up report" is telling myself

=== @EmilyV99 (discord: Emily) 02/13/2022 05:53

but like
just make a thread
(replying to @ P-Tux7 "write up report for 1.92 beta‚Ä¶"): put this in it
and then add more details to that same thread later

=== @ P-Tux7 02/13/2022 05:54

oh i can? i thought it had to be the whole enchilada at the start
thanks

=== @EmilyV99 (discord: Emily) 02/13/2022 05:54

. . .
Well these messages we are sending right now
certainly are not the first message in the thread
so I don't see what would stop you from... doing the same... in any other thread.....

=== @ P-Tux7 02/13/2022 05:55

because i don't intend these as formal bug reports? (at least after i requested the compat bug reports channel)
for example, there was the case of me questioning if 1.90 lanmolas/manhandlas had individual segment drops, so i made a note in that general thread to test it later
turns out they didn't
so there was no compat bug and no reason to make a thread

=== @EmilyV99 (discord: Emily) 02/13/2022 05:57

But like
you could have made a thread
and then
said `yeah nope, all good`
and closed it

=== @ P-Tux7 02/13/2022 05:59

that's fine? and not a bother? well okay then if you say so

=== @EmilyV99 (discord: Emily) 02/13/2022 06:00

it's much less of a bother than having threads that just have like 5000 unrelated topics in them
better to close things off when they are done

=== @ P-Tux7 02/13/2022 06:00

yeah ok
i'll get to it tomorrow copy pasting on mobile sucks

=== @EmilyV99 (discord: Emily) 02/13/2022 06:01

oh, fuck, yeah don't try that on mobile lol
and no particular rush
not like we're hurting for things to work on at the moment
## ‚úÖüîíWizzrobe flag for teleporting style (#990)
@ P-Tux7 opened this issue on 10/30/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/903827648042635276



=== @ P-Tux7 10/30/2021 02:08

Request from OUCH! and Timelord to have a flag for Wizzrobes that chooses between the teleport style for Orange/Wind ones (that is, lined up with the player) and Bat/Summoner (randomly on any valid tile, respecting a certain minimum distance from the player). In other words, it is decoupled from their EWeapon style and moved to a flag. The ones in qst.dat are updated to have the correct flag set. Phasing Wizzrobes are unaffected, but this flag may find use there for something I suggested in the enemy rebalance thread.
The relevant code exists in the Emulation menu, it's just a matter of making the flag check for it.

=== @arceusplayer11 (discord: Deedee) 10/30/2021 04:18

you made this request an hour after I implemented it
the fucking coincidence lmao

=== @ P-Tux7 10/30/2021 06:58

so you can mark it complete

=== @arceusplayer11 (discord: Deedee) 10/30/2021 07:17

(meta) thread name was changed: ‚úÖüîíWizzrobe flag for teleporting style
## Script access to pickupstring read state (#991)
@EmilyV99 (discord: Emily) opened this issue on 10/30/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/903905946328260618



=== @EmilyV99 (discord: Emily) 10/30/2021 07:19

Script access `bool Game->ItemStringRead[]`, read/write access to the bits that mark pickup strings as having already been displayed.

This would allow scripts to, say, read the real time clock, and if you haven't played for a while, reset the strings to display again. Or any number of other uses, but that's one that comes to mind immediately.
@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 10/30/2021 07:21

I'll look into it; I'm not comfortable with adding new ZScript cause I fear it'll break or etc

=== @EmilyV99 (discord: Emily) 10/30/2021 07:27

If you want to vc with me I can walk through it with you again (at some point less 3:30am)

=== @EmilyV99 (discord: Emily) 10/30/2021 07:29

like, adding ZScript stuff is thousands of times easier than most of the things you've done
(i.e. all it takes is knowing the basic steps, and it's not bad)

=== @arceusplayer11 (discord: Deedee) 10/30/2021 07:32

well shit you said that 3 minutes before 3:30 AM
I missed my window

=== @EmilyV99 (discord: Emily) 10/30/2021 07:32

XD\
the intention was `at a reasonable hour`, dammit

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:17

Best to define working hrs and time zone. ;)
Idk what this new command is. Itemsprite and it3lemdata PString are both r/w afaik

=== @EmilyV99 (discord: Emily) 11/03/2021 14:20

So, item pickup strings only play once
How does that work? An internal bit is set if they have already been played, of course
....scripts can't read those bits.
## ‚úÖüîíLanmola 1 Segment = Dead Fix (#992)
@ P-Tux7 opened this issue on 10/30/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/903927601477849088



=== @ P-Tux7 10/30/2021 08:45

Rebringing this up so we can put a bow on ZC 2.XX. I'll do some test quests tomorrow but I'm pretty sure the issue is that Lanmolas (and moldorms maybe?) count as dead even if you only kill one segment, even if the QR to fix it for Digdoggers is set. I think killing one segment also kills all the bosses in a room if you leave and come back, even if the QR for Must Defeat All Bosses is set. That is to say, similar to a Digdogger in Z1, kill 1 segment, die and come back or exit the room and come back, whole thing is dead. And I think whole room is cleared if it was a Dungeon Boss room

=== @ P-Tux7 10/30/2021 08:47

The obvious first thing to look at (and solution to copy) for clues on how to fix this would be the 3-Digdogger, which has had both issues successfully fixed and does NOT add one to the room's dead enemy count until all 3 kids are killed, and does NOT set the all enemies beaten in that room status or DMap boss room flag status until all 3 kids are killed. With those NESFix rule(s) on of course

=== @ P-Tux7 10/30/2021 08:53

Might also be worth looking into "Temp Set No Return", which is also a QR that messes with Lanmolas. Maybe setting that on or off fixes some of the glitchy behaviour by mistake, similar to how Enemies -> Secret had to be set on to have "Must Hit All Triggerable Combos" secrets in 2.50/3 that didn't activate if you triggered one, left the room, and came back?

=== @ P-Tux7 10/30/2021 08:55

Just writing this down for myself tomorrow...

1. Lanmola alone, Must Kill All Digdogger Segments on (if that's a rule?
2. Lanmola alone, Must Kill All Digdogger Segments off
3. Lanmola as part of a boss room, Must Kill All Bosses on, Must Kill All Digdogger Segments on
4. Lanmola as part of a boss room, Must Kill All Bosses on, Must Kill All Digdogger Segments off
5. Lanmola as part of a boss room, Must Kill All Bosses off, Must Kill All Digdogger Segments on
6. Lanmola as part of a boss room, Must Kill All Bosses off, Must Kill All Digdogger Segments off
All of these will be tested by killing one segment, leaving and reentering the room and seeing what happened.
Oh and 7-12 for Tmp. No Return on. This is gonna suck

=== @ P-Tux7 11/02/2021 02:38

@ NightmareJames can you give any details that you remember, I recall you saying this during one of your James Quest streams

=== @ NightmareJames 11/02/2021 03:31

I'll work on this tomorrow.  I spent a lot of time on ZC tonight.  I need to do some other things

=== @ NightmareJames 11/02/2021 10:42

Time for a ton of test quests.........
I don't remember all of it, @ P-Tux7 , start creating the test cases and let's start testing them

=== @arceusplayer11 (discord: Deedee) 11/06/2021 19:42

Okay so lanmola just sets the "you killed the whole screen" flag when you kill it.
regardless of if there's more than 1 lanmola or etc

=== @arceusplayer11 (discord: Deedee) 11/06/2021 19:47

@ P-Tux7 out of curiosity, is it specifically "you kill one segment, the whole thing counts as dead", or "you kill the lanmola, all enemies count as dead"?

=== @ P-Tux7 11/06/2021 19:49

i think it's both, i'll have to check
btw what rule is it that determines whether a 3-digdogger counts as dead when you kill all 3 segments or only 1
or is that just lumped into "must kill all bosses"

=== @arceusplayer11 (discord: Deedee) 11/06/2021 19:54

(replying to @ P-Tux7 "btw what rule is it that dete‚Ä¶"): It's "Temporary No Return Disabled"
And that rule *does* seem to affect lanmolas
Okay, Lanmolas don't actually obey "enemy never returns"

=== @ P-Tux7 11/06/2021 19:57

ok so i gotta test them as ringleaders
temporary no return disabled
must kill all bosses
and in boss rooms vs non-boss rooms
(replying to @arceusplayer11 (discord: Deedee) "It's "Temporary No Return Dis‚Ä¶"): also is temp set no return a different rule or the same

=== @arceusplayer11 (discord: Deedee) 11/06/2021 19:58

Temp set no return?
where is this rule?

=== @ P-Tux7 11/06/2021 19:58

oh it's in the 1.90 docs
must have been renamed then

=== @ P-Tux7 11/06/2021 20:00

phantom menace said it was related to "in nes zelda, lanmolas in level 9 don't respawn when you continue, but they do when you leave and re-enter. this rule makes them always return" (or was it "respawn like normal enemies"?)
so perhaps its that rule you said
sorry not at home

=== @EmilyV99 (discord: Emily) 11/06/2021 20:01

so, you know how enemies don't respawn until you go a certain distance away?
that's temp no return

=== @ P-Tux7 11/06/2021 20:02

yup
oh hmm

=== @EmilyV99 (discord: Emily) 11/06/2021 20:02

so, temp no return disabled.... disables that

=== @ P-Tux7 11/06/2021 20:03

i'll check where that rule was in the 1.90 rules menu - should be in the same order in the quest rules file, since those are sorted by chronological order

=== @arceusplayer11 (discord: Deedee) 11/06/2021 20:14

(replying to @EmilyV99 (discord: Emily) "so, temp no return disabled..‚Ä¶"): No, that's not it
temp no return disabled disables the lanmola and digdoggers counting the whole screen as dead if you kill a single enemy one of them onscreen

=== @arceusplayer11 (discord: Deedee) 11/06/2021 20:17

I have the source open, it's called in exactly two places, and both of them function as whether or not to check the mapflag "tempnoreturn" or to ignore it

=== @arceusplayer11 (discord: Deedee) 11/06/2021 20:21

tempnoreturn is only set by:
rooms with line of sight traps in it (if a room has line of sight traps and you kill all enemies, the flag is set)
lanmolas whenever you kill one
Digdoggers check the flag, but for some reason they never actually set it
I'm curious if that's a bug that was introduced at some point

=== @arceusplayer11 (discord: Deedee) 11/06/2021 20:23

(replying to @EmilyV99 (discord: Emily) "so, you know how enemies don'‚Ä¶"): the rule that disables this behavior is "Enemies Always Return", and the internal variable for that is game->guys

=== @EmilyV99 (discord: Emily) 11/06/2021 20:26

oh
that's.... really poorly named

=== @arceusplayer11 (discord: Deedee) 11/06/2021 20:27

are you surprised?

=== @ P-Tux7 11/06/2021 22:30

aren't ringleaders named superman in the code lmfao

=== @EmilyV99 (discord: Emily) 11/06/2021 22:33

no
superman is the invincible variable
used for Link with cheats
and peahats while they are flying

=== @ P-Tux7 11/06/2021 22:34

...what
i'm surprised that hasn't blown something up yet
peahats are already awful when they WORK

=== @arceusplayer11 (discord: Deedee) 11/06/2021 22:57

kill_em_all is the ringleader kill command

=== @arceusplayer11 (discord: Deedee) 11/23/2021 06:26

@ P-Tux7 are you able to recreate this bug?

=== @ P-Tux7 11/23/2021 06:53

whoops i'll check tomorrow
...hopefully
(replying to @arceusplayer11 (discord: Deedee) "Okay, Lanmolas don't actually‚Ä¶"): okay well this needs to be fixed too
(replying to @arceusplayer11 (discord: Deedee) "@ P-Tux7 out of‚Ä¶"): quoting so i'll remember it

=== @ P-Tux7 11/24/2021 02:49

downloading latest build...

=== @ P-Tux7 11/24/2021 02:55

sorry for the inconvenience but you'll need to use cheat 4 and go to level 1. the lanmolas are in the left room.
https://cdn.discordapp.com/attachments/903927601477849088/912899306766344262/1stClassic.qst
i needed something with a dungeon template
i checked the rule "must kill all bosses for "no return"" and killing one lanmola, leaving the room, and re-entering gives me the key

=== @ P-Tux7 11/24/2021 02:58

okay swapped 'em with aquamentuses and killing one, then leaving and re-entering leaves there one aquamentus
https://cdn.discordapp.com/attachments/903927601477849088/912900000571334707/1stClassic.qst
so apparently the issue is that killing one lanmola is just setting the screen as You Killed Everything for some reason
is it something to do with the flag that boss rooms use to know to clear the room of enemies?
does it have something to do with their broken "never returns after death" checkbox? that it's incorrectly telling zc to not return these enemies?

=== @ P-Tux7 11/24/2021 03:02

okay so here's phantom menace's description of TempNoReturn
``` - TmpNoRet Disabled: This was my solution to a strange problem in the NES game. Lanmolas stay dead until you exit the dungeon. Also, if you beat everyone in a room that has traps, they stay dead until you exit. I called this "Temp No Return". So for true NES quests, this rule is left unchecked. If checked, lanmolas act as normal enemies, and enemies come back to rooms with traps just as if the traps weren't there. ```

=== @ P-Tux7 11/24/2021 03:04

oh ok mm
https://cdn.discordapp.com/attachments/903927601477849088/912901346817110096/1stClassic.qst
turning that rule on makes it so that when you kill one lanmola and re-enter the room, there's still one lanmola left
that's a little weird but it seems to act as one would expect with tempnoreturn on - unsure if it's worth "fixing" to include lanmolas in the must kill all bosses chicanery if this rule is off. most people have both on, right?
now to test boss rooms

=== @arceusplayer11 (discord: Deedee) 11/24/2021 03:07

(replying to @ P-Tux7 "so apparently the issue is th‚Ä¶"): Could you check "disable temp no return"?

=== @ P-Tux7 11/24/2021 03:07

(replying to @ P-Tux7 "turning that rule on makes it‚Ä¶"): ^ i did
that makes it act normal for non-boss rooms at least
now to test it with 2 lanmolas as the level 1 boss

=== @arceusplayer11 (discord: Deedee) 11/24/2021 03:08

Yeah, that's the point of that rule
it's a really shitty named rule

=== @ P-Tux7 11/24/2021 03:08

so the weirdness is that if you kill 1 aquamentus with Must Kill All Bosses on and TmpNoReturn off, it won't kill the other one when you return. but with lanmolas, it does.

=== @ P-Tux7 11/24/2021 03:09

okay, seems to work, killing one lanmola and leaving the boss room leads there to be one lanmola remaining (i edited level 1 to have open doors to let you beeline straight to the aquamentus room)
https://cdn.discordapp.com/attachments/903927601477849088/912902824340385842/1stClassic.qst
ok things seem normal, but there's one last thing for me to test... i recall some rule that makes it where if you don't kill all the enemies in a Boss Room, you leave, and re-enter, they all respawn - even Z1 bosses (overriding the "Does Not Return After Death" enemy attribute)?
i'm not sure where that rule is but once i know i'll test that too

=== @ P-Tux7 11/25/2021 04:03

like i could have sworn there was this rule or something in some quests in pre-2.5 versions, which was preserved when you played said quests in 2.5, where if you had a room full of Manhandlas and killed one, then died, all 10 of them would be back the next go-round. what rule was that? i need to check how lanmolas interact with it

=== @ P-Tux7 11/25/2021 04:04

or am i going barmy

=== @arceusplayer11 (discord: Deedee) 11/25/2021 04:31

Must kill all bosses to set No Return

=== @ P-Tux7 11/25/2021 04:32

different from must kill all bosses?

=== @arceusplayer11 (discord: Deedee) 11/25/2021 04:37

what's the QR name for that
I've changed the QR name on my end cause it was confusing

=== @EmilyV99 (discord: Emily) 11/25/2021 04:44

guessing the issue is that qr doesn't count lanmolas as bosses

=== @ P-Tux7 11/25/2021 04:44

(replying to @arceusplayer11 (discord: Deedee) "what's the QR name for that"): "must kill all bosses"? near the top of enemy QRs
whats the name of the "...to set no return" rule
perhaps it should go right under must kill all bosses?

=== @EmilyV99 (discord: Emily) 11/25/2021 04:45

6th enemy qr from the top?
if so then it's the same rule, just renamed

=== @ P-Tux7 11/25/2021 04:46

ok this is odd because i set "must kill all bosses", put two aquamenti in a boss room, killed one, left and returned, and only one remained
so what rule is it that spawns two if you leave and return

=== @arceusplayer11 (discord: Deedee) 11/25/2021 08:09

enemies always return screen flag + must kill all bosses
Bosses isn't dungeon boss
it's enemies marked with "doesn't return after death"

=== @ P-Tux7 11/25/2021 08:18

ah mm i'll try that then
maybe it's lanmolas fuck with the enemies always return flag, or it combined with that rule...

=== @arceusplayer11 (discord: Deedee) 11/25/2021 08:18

it's very poorly named
Could you layman's terms what you've tried?
this thread makes my head spin a little

=== @ P-Tux7 11/25/2021 08:20

so each room has two lanmolas and i leave the room after killing one, and come back. this applies to all test cases
-no rules - 0 lanmolas when i return
-temp no return disabled - 1 lanmola
-temp no return disabled and must kill all bosses - 1 lanmola
-those two rules + boss room - 1 lanmola
now what's left for me to try is the screen flag, plus and minus the must kill all bosses screen rule

=== @arceusplayer11 (discord: Deedee) 11/25/2021 08:23

okay, so up to this point everything is working fine? (minus the temp no return rule being a stupid name and unclear)

=== @ P-Tux7 11/25/2021 08:23

(by "disabled", i mean that's the rule name. the rule is checked.)
yup

=== @arceusplayer11 (discord: Deedee) 11/25/2021 08:23

okay, good
I sometimes find it hard to keep track of what's an issue and what's an observation

=== @ P-Tux7 11/25/2021 08:24

honestly might as well move it to NESFix or something? or name it "Fix NES Lanmola and Screen Flag Trap Interactions"
tooltip: "when this rule is off, killing one enemy in a room with lanmolas or the corner traps flag, leaving, and coming back (unless you leave the level and come back) will kill them all. recommended to turn on"
not sure about phrasing since they're "already dead" when you come back, you don't see them explode or anything
but it opens shutters, enables blocks, spawns item yadda yadda
also it might be BOTH of the nes trap screen flags idk

=== @ P-Tux7 11/25/2021 08:27

(replying to @ P-Tux7 "okay so here's phantom menace‚Ä¶"): ah seems its both zelda 1 trap screen flags yes (corners and center)
the rule and this help text was made before trap-spawning combo flags existed, and you could place traps as enemies. the screen data was the only way to spawn traps at all.
(sorry for all the edits to the rule name/tooltip)
(replying to @ P-Tux7 "now what's left for me to try‚Ä¶"): anyways replying for tomorrow

=== @arceusplayer11 (discord: Deedee) 02/08/2022 09:37

@ P-Tux7 Is this fixed, or was there anything I missed?
(meta) thread name was changed: üîìLanmola 1 Segment = Dead Fix

=== @ P-Tux7 02/08/2022 18:15

it appears that setting the modern rules fixes it

=== @arceusplayer11 (discord: Deedee) 02/08/2022 23:10

Alright

=== @arceusplayer11 (discord: Deedee) 02/08/2022 23:43

(meta) thread name was changed: ‚úÖüîíLanmola 1 Segment = Dead Fix
## üíäüîìTektites Entering From Sides (#993)
@ P-Tux7 opened this issue on 10/30/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/904110340667764777



=== @ P-Tux7 10/30/2021 20:51

Time to fix this. This breaks a remake of Outlands because it has Tektites that enter from sides. In Z1 they don't do anything special. They just spawn at the sides.

=== @arceusplayer11 (discord: Deedee) 11/02/2021 09:15

So uh
what exactly is the bugged behavior?

=== @ NightmareJames 11/02/2021 10:44

I don't think this "ever" worked
But I'll test quest it tonight formally

=== @ZoriaRPG (discord: Timelord) 11/07/2021 14:14

This never worked.

=== @ZoriaRPG (discord: Timelord) 11/07/2021 14:15

It requires a heavy handed rewrite of that enemy class to make it work. You can fake it by spawning. WALKER from the sides and using a script to change them to a textile class...

=== @ NightmareJames 11/13/2021 19:42

Test quest incoming

=== @ P-Tux7 11/13/2021 19:47

(replying to @ZoriaRPG (discord: Timelord) "It requires a heavy handed re‚Ä¶"): if tektites being spawned facing left or right on enter from sides, when ordinarily they're being spawned facing up by default is the issue, why not just make an exception in either the tektite class or the enter from sides routine that says "tektites ALWAYS spawn facing up"

=== @ NightmareJames 11/13/2021 19:49

Tektites from Sides.  Have Fun
https://cdn.discordapp.com/attachments/904110340667764777/909168219825254442/tektitessides.qst

=== @arceusplayer11 (discord: Deedee) 02/13/2022 15:59

@ P-Tux7 so what should they be doing?
Should they just appear at the screen sides?

=== @ P-Tux7 02/13/2022 17:00

yup

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:28

wait what the fuck
they are not behaving right *at all*

=== @EmilyV99 (discord: Emily) 02/13/2022 17:29

(replying to @ P-Tux7 "if tektites being spawned fac‚Ä¶"): ^

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:45

Really easy fix I think

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:47

Forcing their dir to be down every frame fixes it.
(meta) thread name was changed: üíäüîìTektites Entering From Sides

=== @ P-Tux7 02/13/2022 17:54

(replying to @arceusplayer11 (discord: Deedee) "Forcing their dir to be down‚Ä¶"): uh just for the spawning or...?
because some graphics have the tektites as 8-way

=== @EmilyV99 (discord: Emily) 02/13/2022 17:55

It should just spawn initially facing down

=== @ P-Tux7 02/13/2022 17:55

if you've ever played DOR or PTUX quests which have the tektites and frogs which you can see the behind of when they face up
oh good

=== @EmilyV99 (discord: Emily) 02/13/2022 17:55

no, I mean, I'm saying that
not deedee
so I don't know what she's done

=== @arceusplayer11 (discord: Deedee) 02/13/2022 18:44

(replying to @ P-Tux7 "because some graphics have th‚Ä¶"): Yeah but those don't use the real direction

=== @ P-Tux7 02/13/2022 18:51

oh mm

=== @arceusplayer11 (discord: Deedee) 02/13/2022 18:58

(replying to @EmilyV99 (discord: Emily) "It should just spawn initiall‚Ä¶"): hmm... I could do that too, but I'm unsure why anyone would willingly call this bugged behavior and safety proofing it feels smarter

=== @arceusplayer11 (discord: Deedee) 02/14/2022 11:35

I just made the tektites ignore the direction being set by side loading, which should be a more elegant solution (while still preserving the bugged behavior in case anyone *actually* used it intentionally)
```It requires a heavy handed rewrite of that enemy class to make it work. You can fake it by spawning. WALKER from the sides and using a script to change them to a textile class...``` "lol" said the deedee. "lmao"

=== @ P-Tux7 02/14/2022 20:49

Wait is this in the latest build

=== @arceusplayer11 (discord: Deedee) 02/14/2022 21:08

not yet
next build to get posted will have it

=== @ P-Tux7 02/16/2022 04:00

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) ?

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:01

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) .
## ‚úÖüîíChests on layers reference effect square on layer below (#994)
@ Moosh opened this issue on 10/31/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/904161677476499466



=== @ Moosh 10/31/2021 00:15

If I place a chest combo on a layer, it won't open if the combo underneath it doesn't have the effect square set. Dunno if this is intended or not but it seems to me like the chest should be referencing its own effect square to determine which parts are the chest. Especially when I might happen to be making new floor types in an older tileset resulting in combos without the square checked

=== @ P-Tux7 10/31/2021 00:28

```in an older tileset```
shouldn't zq import effect squares correctly? a water combo should have all four quadrants checked automatically

=== @ Moosh 10/31/2021 00:34

Could be with how ZQuest does or did interpret old files
I know I started the quest after effect squares were added, but all my unused combos have the effect square as blank.

=== @ P-Tux7 10/31/2021 00:35

@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee) are unused combos meant to have full or empty effect squares

=== @arceusplayer11 (discord: Deedee) 10/31/2021 00:35

full

=== @ P-Tux7 10/31/2021 00:35

uhh
something ain't importing right

=== @arceusplayer11 (discord: Deedee) 10/31/2021 00:35

damnit

=== @ Moosh 10/31/2021 00:35

But the quest was saved before that was fixed IIRC

=== @arceusplayer11 (discord: Deedee) 10/31/2021 00:35

ah, yeah, makes sense

=== @ Moosh 10/31/2021 00:36

or perhaps not? Try and see on a fresh tileset if it sets it for unused combos

=== @ P-Tux7 10/31/2021 00:36

ok so do me a favour, import DOR's original quest now and see what happens to the unused combos

=== @ Moosh 10/31/2021 00:37

Yup, as of this version it updates the effect squares properly on older quests
So it's just that my quest was saved in 2.55 prior that it doesn't have that

=== @ P-Tux7 10/31/2021 00:37

ok good
no issue

=== @ Moosh 10/31/2021 00:38

Still, the original issue. Are effect squares intended to only work on layer 0?
Or to be inherited from 0 on higher layers

=== @EmilyV99 (discord: Emily) 10/31/2021 03:09

It should be checking on the layer
Guessing that's a bug with the new chest code
Check signs too, they probably have the same issue

=== @arceusplayer11 (discord: Deedee) 10/31/2021 14:20

(meta) thread name was changed: Chests on layers reference effect square on layer below
chests on layer 2 check layer 1, layer 1 checks layer 0

=== @ Moosh 10/31/2021 14:43

Is that for serious what it's doing? ü§¶

=== @arceusplayer11 (discord: Deedee) 10/31/2021 14:43

yeah, but I'm not sure why
unless the code's just been horribly broken this whole time

=== @arceusplayer11 (discord: Deedee) 11/01/2021 00:40

yeah the code's just been broken for layered effect squares
layers 1 and 2 always checked the layer below

=== @ZoriaRPG (discord: Timelord) 11/07/2021 14:11

So, first...are Layer 1 and 2 chests rule based?

=== @ZoriaRPG (discord: Timelord) 11/07/2021 14:13

You might start to see why I did not rush into layer 1/2 chests and blocks. I may have not elaborated my reasons, as the I am tired of doing that, but I put stuff like that on hold for 2.60 b Ed cause it just adds to beta phase 2.55 fixes.

=== @EmilyV99 (discord: Emily) 11/07/2021 15:33

yes of fucking course they are
everything that could break old stuff is rule based
we aren't stupid

=== @EmilyV99 (discord: Emily) 11/07/2021 17:15

@arceusplayer11 (discord: Deedee) have you fixed this yet?
(asking because I'll handle it now if you haven't)

=== @arceusplayer11 (discord: Deedee) 11/07/2021 17:15

I believe I fixed this, yeah
had to remember but I remember making a test quest to test out the fix

=== @EmilyV99 (discord: Emily) 11/07/2021 17:17

ah yeah, I see the commit
(meta) thread name was changed: ‚úÖüîíChests on layers reference effect square on layer below
## üíäüîìWeapons reflect wrongly off mirrors. (#995)
@arceusplayer11 (discord: Deedee) opened this issue on 11/01/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/904663207589867520



=== @arceusplayer11 (discord: Deedee) 11/01/2021 09:28

Sword Beams do not change their graphic after being reflected if they originated facing left or right. Additionally, when firing downwards into a mirror, the Sword Beam will be positioned one combo above the mirror after being redirected.

=== @ZoriaRPG (discord: Timelord) 11/01/2021 15:11

The latter may be due to a newer rule for how mirrors and prisms work.
Not sure on the former. Is that new or in 2.53/2.50.x?

=== @arceusplayer11 (discord: Deedee) 02/12/2022 12:23

Issue was the "mirrors use weapon centre" quest rule

=== @arceusplayer11 (discord: Deedee) 02/12/2022 12:59

(meta) thread name was changed: üíäüîìWeapons reflect wrongly off mirrors.

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:49

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @EmilyV99 (discord: Emily) 02/13/2022 16:49

(Who are you linking that to, it's just us here to test it)

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:49

...good point lmao

=== @EmilyV99 (discord: Emily) 02/13/2022 16:50

you're thread, so uh, linking it to yourself I guess?
XD

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:50

look I have a hard time finding things okay

=== @EmilyV99 (discord: Emily) 02/13/2022 16:50

<a:hugheart:884673091878391828>

=== @ P-Tux7 03/03/2022 01:03

so test the sword beam graphic and shooting downwards onto the mirror?
and should i enable or disable said QR?
## Enemy defense type - Different item drop set. (#996)
@ Alucard648 opened this issue on 11/01/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/904869374563860521



=== @ Alucard648 11/01/2021 23:07

Link`s awakening Goombas...

=== @ P-Tux7 11/02/2021 02:27

i thought the dropset ID was modifiable via script, and the enemy could detect with what weapon it was being damaged
so if it was damaged with stomp boots and hp = 0 change dropset

=== @ P-Tux7 11/02/2021 02:30

i think also with NPC scripts it runs for one frame after the enemy gets killed. So if you want to make a stomp effect you just can, nothing like ghost/Newbie Boss where it has to exist at 1 HP to show the death animation
Though I know the walker is currently ghosted

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:06

I suppose this is possible, but it would need an alt droplet field in guydata
And some funky stuff in the enemy hit resolution code
Thankfully I did add *wpn to that in the past
But you need to use the resolved wpn type after factoring in simulated weapon types
I.e. overrides
So this would require allowing stomp type for non stomp wpns
But it should be quite feasible
Then again
A five line npc script solves it
switch(this->HitBy)

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:11

Case wStomp: itm hrt = CreateItem(this-X,this-Y, I_HEART)
Set hrt flags to a drop item
There is a more abstract case for frozen enemies or enemies destroyed by fire.
But those do not yet exist, so for sideview goombas, a script is a decent stopgap

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:14

You may also be able to write this-DropSet based on this->HitBy
Idk if the killl system timing will be happy with that.
## Door Repair - Anti-Cheat (#997)
@ P-Tux7 opened this issue on 11/02/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/904958391921836042



=== @ P-Tux7 11/02/2021 05:01

Something similar to the "Draining Rupees Can Still Be Spent" rule being off, where if you continue or save and quit while the door repair is draining your rupees, it will subtract the full amount automatically.
I'm not sure if the existing rule fixes Life or Money rooms, but if not, that needs to be too.

=== @arceusplayer11 (discord: Deedee) 11/02/2021 05:26

I think it already works this way

=== @ P-Tux7 11/02/2021 12:49

@ HeroOfFireZC I don't think it does does it?

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:15

I think that you can cheat out of that, and I know that you can cheat out of LikeLikes
These are both easy hero script fixes but could be in engine

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:24

I'll be honest, having the likelike thing as a QR seems like advocating for assholeish design
"tick this to piss off 100% of your playerbase!"

=== @EmilyV99 (discord: Emily) 11/03/2021 14:29

I mean, it's fixing a bug
Frankly it should be on by default
(The assholeish design part is *using door repair rooms*)

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:30

I mean "f6ing out of likelike"
the door repair part should be fixed yeah
my mistake, forgot to clarify

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:56

why not both?

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:57

if you encourage cruelty to animals go 100%

=== @ P-Tux7 11/03/2021 15:09

(replying to @ZoriaRPG (discord: Timelord) "I think that you can cheat ou‚Ä¶"): i don't view f6ing for like likes as cheating
when you spend the rupees, the game intends to take them away instantly
but like likes have a timer before they eat your shield

=== @ P-Tux7 11/03/2021 15:12

granted, it is usually used when the player can't kill the like like before that timer expires, but it's still a case
and at the very least should be a separate QR from draining rupees
(not that i really desire it as a rule)
and when you get into rupee/magic draining like likes it just gets hairy. how much to deduct for an F6?

=== @arceusplayer11 (discord: Deedee) 11/03/2021 15:13

I will make zero effort into implementing it as a rule

=== @ P-Tux7 11/03/2021 15:13

^

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:34

(replying to @ P-Tux7 "and at the very least should‚Ä¶"): Separate yes
## ‚ùåüîíAllow writing to EntryX and EntryY (#998)
@ Moosh opened this issue on 11/02/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/904977840448094249



=== @ Moosh 11/02/2021 06:18

These appear to be read only currently. Any reason why? It's a mild nuisance when a script causes Link to enter a screen from over a pit

=== @arceusplayer11 (discord: Deedee) 11/02/2021 06:26

Probably just hasn't been added yet
I'll see what I can do

=== @ Moosh 11/02/2021 06:26

Thanks. No rush, as I've already got a system to get around it
Just has a small downside that Link flickers

=== @ZoriaRPG (discord: Timelord) 11/03/2021 13:57

No, I considered this one entirely unsafe without a qr that allows it.
These properties are written bybscrolling and warps and pits.

=== @arceusplayer11 (discord: Deedee) 11/03/2021 13:58

...yes, they are
cause that's the entire point of EntryX/EntryY
it's for saving where you first entered the screen, so that pits and etc know where you put you

=== @ZoriaRPG (discord: Timelord) 11/03/2021 13:59

Wo if you want to allow r/w a qr or instr qr should be added with a precaution that basic system timing can override them or timing could override scrolling qnd warps causing softlocks or even crashes.

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:00

My general theory is that you could just write x and y and until EntryX and EntryY were proven safe to write or were protected by a rule, not to allow writing them.
There are a number of additions where I felt writing may be unsafe so I waited on that.

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:01

they can't be proven safe to write without allowing them to be written to

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:01

Yew
Henc3
Add an instr rule first

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:01

But they don't need a QR to enable them

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:02

If not enabled, ignore writing to them

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:02

if they are unsafe, a QR to enable them can be added after the fact.

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:02

You can make it a default on rule
But it is a trivial to add safeguard
I'd wait for Emily to rule on this one ere merging

=== @arceusplayer11 (discord: Deedee) 11/03/2021 14:03

@EmilyV99 (discord: EmilyV) I highly doubt you object to this

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:03

As encouraging a possibly unsafe behaviour can be a huge down the road headache

=== @ Moosh 11/03/2021 14:04

Sorry didn't know this would be a whole _thing_

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:04

It is literally three lines of code to insulate it now
Well, four to enable it by decault
Always CYA

=== @EmilyV99 (discord: Emily) 11/03/2021 14:19

They never should have been read-only to begin with

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:48

wait a minute here
I apparently did a setEntryX an setEntryY
??
as part of Screen->
Not sure why at this point.

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:50

So if writing to the is not working, it is probably due to the exact sorts of system events that I mentioned worrying about
```case SCREENDATAENTRYX:         
        {
            int newx = vbound((value/10000),0,255);
            tmpscr->entry_x = newx;
            if ( get_bit(quest_rules, qr_WRITE_ENTRYPOINTS_AFFECTS_HEROCLASS) )
            {
                Link.entry_x = (zfix)(newx);
            }
            
        }
        case SCREENDATAENTRYY:         
        {
            
            int newy = vbound((value/10000),0,175);
            tmpscr->entry_y = newy;
            if ( get_bit(quest_rules, qr_WRITE_ENTRYPOINTS_AFFECTS_HEROCLASS) )
            {
                Link.entry_y = (zfix)(newy);
            }
            break;    //B
        }```
and there is already a QR
In instruction rules
@ Moosh
So all the stuff I said should be done has been in place as I discussed for some tie
You probably just need to enable the rule.
My senile mind forgot that I already did it all
the rule is

=== @ Moosh 11/04/2021 13:53

Oh! Well that's sure hidden away. I assumed instruction rules would all default to whatever makes sense. I'm also still not clear on why it's a rule...
But thanks for pointing it out

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:54

Writing Screen->EntryX EntryY Resets Entry Spawn Points
and it s enabled by default n new quests as I had also said that it should be

=== @ Moosh 11/04/2021 13:55

Huh

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:55

Because I was unsure what bugs could occur if you do it and wanted a safeguard.

=== @ Moosh 11/04/2021 13:55

I know this quest was loaded more recently than whenever you added that

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:55

```//Alpha 85

Default new rule on in new quests or on Pick Ruleset.
Fix position of new Instruction Rule in Dialogue
Added a script quest instruction setting to cause Link's respawn
    points to match script-written EntryX and EntryY for Screen->Entry*.
Fixed the bug where Link's spin attack animation is mused when he falls
    into pits if he is holding a charged sword.
    ( ZoriaRPG, 12th November, 2020 )```

=== @ Moosh 11/04/2021 13:56

But it does indeed default to set on a new quest. So gotta be something about loading a tileset

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:57

tilesets use whatever rules the tileset used when it was saved in whatever version it was last saved
that is normal
using Pick Ruleset will allow you to instantly convert to the `Modern` ruleset
otherwise they use legacy rules and may use version flags

=== @ Moosh 11/04/2021 13:58

Right, but this being a script related rule, and tilesets not having any scripts in them, would it not make sense for it to default to on?

=== @ZoriaRPG (discord: Timelord) 11/04/2021 13:58

to set rules that you do not want
it was saved before those existed
it is a .qst file

=== @ Moosh 11/04/2021 14:00

...Oh. I think I'm just getting mixed up how this works because some of these rule bits have inverted checkboxes ü§¶

=== @ZoriaRPG (discord: Timelord) 11/04/2021 14:01

if a tileset was made in 2.10, and you open it in the latest nightly where 2.10 quests flag all windrobes in 2.10 quests to use the bugged movement, zq will flag the enemies as if it were any other 2.10 quest
inverted?

=== @ Moosh 11/04/2021 14:01

Like all these default to checked but it's not because ZQuest recognizes the quest format version and updates the ruleset to enable fixes, it's because they're all worded as "don't do thing"
![image](https://cdn.discordapp.com/attachments/904977840448094249/905819140084875275/unknown.png)

=== @ZoriaRPG (discord: Timelord) 11/04/2021 14:02

ah
well
that is how compatibility based rules tend to function
Just use Pick Rulset, select Modern done.

=== @ Moosh 11/04/2021 14:03

On an existing project it's easier to just handle case by case but will keep that in mind for next time

=== @ZoriaRPG (discord: Timelord) 11/04/2021 14:04

sure
funny though how I described how I would do this an I already did it in that exact manner

=== @ZoriaRPG (discord: Timelord) 11/05/2021 07:20

Fwiw, this shows that presented with a logic issue my mind works in the same way, repeatedly
@<role: Developer> You can close this thread as the feature already exists and the report was due to user errror/miscomprehension.

=== @EmilyV99 (discord: Emily) 11/05/2021 14:01

"already exists"
(meta) thread name was changed: ‚ùåüîíAllow writing to EntryX and EntryY
## ‚úÖüîíCrash when hovering over FFC with long script name (#999)
@ Moosh opened this issue on 11/02/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/905042531891445760



=== @ Moosh 11/02/2021 10:35

Next in the line of bugs caused by naming FFC scripts goofy things that are too long, it appears the tooltip for hovering over it can cause a crash. Script name was `AllTheseFeaturesAndIStillHaveToCodeMovingPlatformsMyself`

=== @EmilyV99 (discord: Emily) 11/02/2021 10:42

A fucking *TOOLTIP* crash? Uuuhhg

=== @ZoriaRPG (discord: Timelord) 11/03/2021 14:59

char buffer for display overflow

=== @EmilyV99 (discord: Emily) 11/03/2021 15:07

So, turns out this uses *local buffer arrays* for the thing, different for each thing that calls tooltips....
....I'm curious what the limit is on script names.
.......if there is one.....

=== @EmilyV99 (discord: Emily) 11/03/2021 15:10

...so, uh, fun times, I don't think script names have a limit on length

=== @EmilyV99 (discord: Emily) 11/03/2021 15:13

setting it up to use `zc_malloc` to create a buffer of variable size, so it allocates exactly what it needs

=== @EmilyV99 (discord: Emily) 11/03/2021 15:20

. . . . well THERE'S an issue
I just made a script with an absurdly long name
and it just crashed on compile

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:32

(replying to @EmilyV99 (discord: Emily) ".......if there is one....."): none
make that one longmax
bleah

=== @EmilyV99 (discord: Emily) 11/03/2021 15:34

ok, so the crash on long name on compile is an `al_trace` somewhere...
....and on fixing that, it crashes again one step later in compile.....

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:35

how about truncating scriptnaes on comp to 255chars?
thatca be an OS limit
orienaes
so why not here

=== @EmilyV99 (discord: Emily) 11/03/2021 15:50

....so it turns out `_jwin_draw_abclistbox` has a fatal error handling long strings
It is supposed to cap and read only the first 1023 characters, but.... the array was uninitialized, so the `[1023]` index was not guaranteed to be a nullchar.....

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:52

hahahahah
been there fir years

=== @EmilyV99 (discord: Emily) 11/03/2021 15:52

yeah, certainly would expect that to have been around a while

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:52

my script naes are never onger than 16 to 31 chars

=== @EmilyV99 (discord: Emily) 11/03/2021 15:52


![image](https://cdn.discordapp.com/attachments/905042531891445760/905484658517635102/unknown.png)
woo, now it shows up

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:52

i woud never have foun this

=== @EmilyV99 (discord: Emily) 11/03/2021 15:53

the script name here is `foooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooobaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaarrrrrrr`

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:53

as I do not give scripts insane names

=== @EmilyV99 (discord: Emily) 11/03/2021 15:53

so, uh, `1211` chars long
which was finally enough to break some of this shit
....for FUCKS SAKE
Third crash
on trying to assign it to a slot
how many buffer errors are there in this fucking code?

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:54

is why any scriptname needs to be that long other than as a joe
so the joie is apparently o n the usr

=== @EmilyV99 (discord: Emily) 11/03/2021 15:55

I have no idea why it needs to be this long, but might as well test it to make sure there aren't any crashes

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:55

i tried to ind them all
this one eluded me
I awas init char array to {0}
c habit
and insert null at len-1
safe plus safe

=== @EmilyV99 (discord: Emily) 11/03/2021 15:57

. . . PFFFFFT this last one is totally on me
the `script_slot_data->update()` uses a size 128 buffer

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:57

k
now you learnt and know
it happens

=== @ZoriaRPG (discord: Timelord) 11/03/2021 15:59

forgot to limit copy len and insert null?

=== @EmilyV99 (discord: Emily) 11/03/2021 16:00

aye, wasn't limiting

=== @ZoriaRPG (discord: Timelord) 11/03/2021 16:00

can ae t i16u
an liit it
and insert nu at th n
solve
we a frak up
I am not immune
no programmer is immune

=== @ZoriaRPG (discord: Timelord) 11/03/2021 16:04

nyny

=== @EmilyV99 (discord: Emily) 11/03/2021 16:06

OK, now it compiles and assigns without crashes
now to test the tooltip
.....nope, don't even get to
selecting the script in the ffc script selection dropdown crashes
so that's 5 fucking separate crashes from this one thing

=== @EmilyV99 (discord: Emily) 11/03/2021 16:08

guessing the dropdown has a similar crash to the abclister

=== @EmilyV99 (discord: Emily) 11/03/2021 16:13

ah, and while I fixed the buffer crash for the tooltip
it also has a *separate* crash if the tooltip is wider than the screen

=== @EmilyV99 (discord: Emily) 11/03/2021 16:17

....err, wider than the tooltip bitmap, which is not as wide as the screen

=== @EmilyV99 (discord: Emily) 11/03/2021 16:21

Oh
also it's doing `[x][y]` instead of `[y][x]`

![image](https://cdn.discordapp.com/attachments/905042531891445760/905492095597441034/unknown.png)
@ Moosh

=== @EmilyV99 (discord: Emily) 11/03/2021 16:27

....the script name along the top probably shouldn't go that far over

=== @EmilyV99 (discord: Emily) 11/03/2021 16:39

aaand

![image](https://cdn.discordapp.com/attachments/905042531891445760/905496476220805190/unknown.png)
now that cuts off instead of drawing over the combo side panel

=== @ZoriaRPG (discord: Timelord) 11/03/2021 16:42

üññ

=== @EmilyV99 (discord: Emily) 11/03/2021 16:44

will be in next nightly build

=== @EmilyV99 (discord: Emily) 11/03/2021 16:51

(meta) thread name was changed: ‚úÖüîíCrash when hovering over FFC with long script name
## üíäüîìLanmolas dont count as ringleaders (#1000)
@arceusplayer11 (discord: Deedee) opened this issue on 11/02/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/905148325865615411



=== @arceusplayer11 (discord: Deedee) 11/02/2021 17:36

Older versions of Armageddon Quest are broken because they have a bunch of invincible ghinis with a lanmola as the kill all enemy

=== @ P-Tux7 11/02/2021 18:52

Yeah I was gonna report this but needed to make some comparison videos. I'll do it later

=== @arceusplayer11 (discord: Deedee) 11/06/2021 21:11

okay this seems pretty simple
lanmolas just handle their deaths differently

=== @ P-Tux7 11/06/2021 22:28

i wonder, should we test this on all the other multi-enemy enemies?
moldorm, manhandla, patra, and... gleeok?
(as for batrobes/summoners i know those work as ringleaders, at least in 2.50.2)

=== @ZoriaRPG (discord: Timelord) 11/07/2021 14:04

Lanmolas have never been ringleaders
In theory the income value might help here
But ringleaders tended to be Z1 quests and lqnmolas have never been such
This coupled with the lanmola death bug rule makes them somewhat unsuitable

=== @arceusplayer11 (discord: Deedee) 11/07/2021 15:08

(replying to @ZoriaRPG (discord: Timelord) "Lanmolas have never been ring‚Ä¶"): demonstrably false.
You can literally open up 2.10 and test this.

=== @arceusplayer11 (discord: Deedee) 11/07/2021 15:09

Either way, this was because lanmolas got a bit of a rewrite in 2.50, presumably to make them less buggy with the enemy editor

=== @ P-Tux7 11/07/2021 15:14

one quest already used them for that purpose - armageddon quest

=== @ZoriaRPG (discord: Timelord) 11/07/2021 15:40

Oh? As did that?
Well, you can apply it to the core enemy.
And the .10 src exists to use as a point of comparison.

=== @EmilyV99 (discord: Emily) 11/07/2021 15:40

> Deedee ‚Äî Yesterday at 5:11 PM
> okay this seems pretty simple
> lanmolas just handle their deaths differently
we seem to already know how to handle this

=== @arceusplayer11 (discord: Deedee) 11/08/2021 00:54

Okay I'm actually tearing my hair out
I have the source code for both 2.55 and 1.92 open
I'm trying to understand just what exactly changed to disallow lanmolas to be ringleaders

=== @arceusplayer11 (discord: Deedee) 11/08/2021 00:57

the thing where it's stopped is that "dying" is never set as true for the main enemy, it handles it's own death on it's own

=== @arceusplayer11 (discord: Deedee) 11/08/2021 01:11

1.92 also checks for dying, and the only time dying is set is if hp <= 0

=== @arceusplayer11 (discord: Deedee) 11/08/2021 15:55

Okay, figured it out, and it's absurdly dumb
In old versions, the handler enemy set it's own id to something else in the initializer

=== @arceusplayer11 (discord: Deedee) 11/08/2021 15:56

So when the check to grab the first enemy of that id and assign it the ringleader value happens, it would grab the first segment of the lanmola

=== @arceusplayer11 (discord: Deedee) 11/23/2021 06:24

(meta) thread name was changed: üíäüîìLanmolas dont count as ringleaders
## 5-Shot for Aquamentus (#1001)
@ P-Tux7 opened this issue on 11/02/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/905180783063494707



=== @ P-Tux7 11/02/2021 19:45

``` case e1t5SHOTS: //BS-Aquamentus
        Ewpns.add(new weapon(x+xoff,y+yoff,z,wpn,2+(((dir^left)+5)<<3),wdp,dir,-1, getUID(),false));
        Ewpns.add(new weapon(x+xoff,y+yoff,z,wpn,2+(((dir^right)+5)<<3),wdp,dir,-1, getUID(),false));```
Found this code in the ZC source. This seems to imply that if Aquamentuses were capable of being set to have 5-Shots, they'd shoot them just fine, which is what I'm requesting to be added. All it probably needs is the option added

I'm not so sure about Gohmas and Gleeoks, but it'd be nice for them too if it doesn't take any extra code except adding those shot types to the list
Please enable 3-Shot and 5-Shot for all 3 of those classes in the next nightly and I'll test them to see if anything breaks.

=== @ Mitsukara 11/05/2021 21:20

I second this request if it's not too hard to implement at some point
## ‚úÖüîíHero-Grabbed (#1002)
@EmilyV99 (discord: Emily) opened this issue on 11/03/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/905424462307029033



=== @EmilyV99 (discord: Emily) 11/03/2021 11:53

`bool Hero->Grabbed`, as `Hero->Eaten`, but for wallmasters instead of like-likes

=== @ P-Tux7 11/03/2021 15:14

sorry for the trouble
i thought this was a legitimate thing already

=== @EmilyV99 (discord: Emily) 11/03/2021 15:14

No trouble, it should have been
the fact that it was missed is silly

=== @ P-Tux7 11/03/2021 15:14

i wonder if Hero->Winded should exist too, for both the whistle and enemy wind

=== @EmilyV99 (discord: Emily) 11/03/2021 15:14

uhhh
`Hero->Action == LA_INWIND` IIRC

=== @ P-Tux7 11/03/2021 15:14

ah good

=== @EmilyV99 (discord: Emily) 11/03/2021 15:15

anyway, this should be added, will be in next build
(It's just read/write of an already existing engine variable; though I doubt writing it will do much of anything in most cases, as there isn't a way to link it to an enemy, so most likely it will just ignore writes)
(took like 2 minutes to add)
(meta) thread name was changed: ‚úÖüîíHero-Grabbed
## Bookmarks in tile editor (#1003)
@ Alucard648 opened this issue on 11/04/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/905733011176296458



=== @ Alucard648 11/04/2021 08:19

Having to scroll through 100+ pages every time you want to edit a tile or choose one for combo, item, sprite or enemy is very annoying.

=== @ Moosh 11/04/2021 08:33

You're aware of the P hotkey for skipping to a page right?

=== @EmilyV99 (discord: Emily) 11/04/2021 09:13

^ this. Also "open tile page" by right- clicking a combo... including a favorite combo, which you can totally use as bookmarks.
## Hookshot bugs (#1004)
@arceusplayer11 (discord: Deedee) opened this issue on 11/04/2021

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/905785103958044682



=== @arceusplayer11 (discord: Deedee) 11/04/2021 11:46

Diagonal hookshot's grabbing collision is *very* off

=== @arceusplayer11 (discord: Deedee) 11/04/2021 11:48

and whenever a hookshot post is grabbed, Link just gets moved upwards sometimes for no reason

=== @arceusplayer11 (discord: Deedee) 11/04/2021 12:25

(replying to @arceusplayer11 (discord: Deedee) "and whenever a hookshot post‚Ä¶"): Oh goddamnit, I know what this is. The diagonal hookshot change made it so that Dir is no longer checked when checking your position relative to the hookshot
and it's just a simple if position is greater than hookshot head or position less then hookshot head

=== @arceusplayer11 (discord: Deedee) 11/04/2021 12:26

So New Hero Movement can cause buggy behavior with it because the decimal will throw it off

=== @EmilyV99 (discord: Emily) 11/04/2021 12:27

oh fun

=== @arceusplayer11 (discord: Deedee) 11/04/2021 12:27

an Abs check should fix that

=== @EmilyV99 (discord: Emily) 11/04/2021 12:27

?

=== @arceusplayer11 (discord: Deedee) 11/04/2021 12:29

Only do the thing if the difference between the two is equal to or greater than 1

=== @EmilyV99 (discord: Emily) 11/04/2021 12:31

ah, makes sense

=== @arceusplayer11 (discord: Deedee) 11/04/2021 12:34

doesn't explain the wonky diagonal hookshot grabbing collision though

=== @ZoriaRPG (discord: Timelord) 11/07/2021 14:03

Diagonal bookshop is dead alpha and meant to be perfected in beta. I KNEW going in that it had flaws.  I asked for help and testers,  got none and put it on the backbench
The head and chain links work mostly right, q huge improvement over 2.futur3
But the actual angles and latching need fine tuning
## Multiple placed Enemy0-9 flags of the same ID - spawn on random of flagged spots. (#1005)
@ Alucard648 opened this issue on 11/05/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/906063471987281922



=== @ Alucard648 11/05/2021 06:12

For instance, if you place multiple Enemy0 flags (ID37) on the same screen, the 1st enemy in list will chose one of flagged spots at random to spawn upon  screen entry. This will make at least usable to place multiple flags for same enemy slot in list. As for now only first such flag is used, regardless of others.
## New Gohma Animation Style (#1006)
@ P-Tux7 opened this issue on 11/06/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/906595856659152906



=== @ P-Tux7 11/06/2021 17:28

I was thinking that it would be really nice to have a new animation style for Gohmas, like for Elvis' Mothula. Here's how it would work
Row 1: Closed eye
Row 2: Opening eye
Row 3: Opened eye
Each row with 4 frames. And the vulnerable part is auto-calculated based upon the Gohma enemy's tile width, the middle 16 pixels.

=== @ P-Tux7 11/06/2021 17:29

This allows to have animated eyes, and for the leg frames to be different between rows.

=== @arceusplayer11 (discord: Deedee) 11/17/2021 20:54

I'll definitely take a look at this

=== @ P-Tux7 11/17/2021 22:05

thank you!
## üíäüîìFlying Enemies Get Stuck at Bottom of Screen (#1007)
@ HeroOfFireZC opened this issue on 11/06/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/906649822998724690



=== @ HeroOfFireZC 11/06/2021 21:02

A bug that has supposedly been around awhile that I've looked deeper into recently. It appears that Flying-movement enemies can get stuck on the bottom of screens in the 2.55 builds.
The best example are Bats, though I've seen Digdogger Kids, Keese with increased step speed, and even Manhandla's lacking 3 heads do this.
It seems more common the faster the enemy moves, possibly a rounding error in the movement code?
I made a test quest in 2.52 (to confirm this movement bug was introduced later on).
https://cdn.discordapp.com/attachments/906649822998724690/906650375950577734/FlyingTest.qst
Interestingly, they respect No-Enemy flags and NES dungeon walls.
Slower enemies do not appear to be capable of getting stuck, though surprisingly unmodified Peahats can get stuck.

=== @EmilyV99 (discord: Emily) 11/06/2021 21:06

This came about during a rewrite of enemy collision
and it's a fucking mess

=== @ HeroOfFireZC 11/06/2021 21:06

Also, on the starting screen, notice how there are No Enemy flags matching the cliffs on the bottom. When they get stuck, they suddenly start moving back and forth on the bottom, ignoring said flags.

=== @EmilyV99 (discord: Emily) 11/06/2021 21:06

....but the same rewrite that caused this issue also is what allows larger than 1x1 enemies to work, like, at all
@arceusplayer11 (discord: Deedee)
if you want to try this headache........

=== @ HeroOfFireZC 11/06/2021 21:07

Best guess, this is just a rounding issue when calculating some sort of "can move" with screen bottoms and higher step speeds.

=== @arceusplayer11 (discord: Deedee) 11/06/2021 21:08

Thank you for rebringing this up
I've been meaning to kill this dead but the report was lost in the old dev server

=== @ HeroOfFireZC 11/06/2021 21:09

Now, I have been attempting to reproduce a similar looking bug where Bats have a similar "stuck" issue with south-side NES dungeon walls. I saw this behavior while testing a quest for NightmareJames.
They did not stay stuck as long, but also were clearly moving exactly horizontally along the wall for an extended period, something that should be too rare to ever encounter, let alone multiple times.
So, there is a small chance this bug does apply to NES dungeon walls the same way it applies to open screen bottoms.

=== @ P-Tux7 11/06/2021 22:29

i recall it definitely happened a year ago with moldorms as well
gleeok heads, peahats, and phantoms probably do it too

=== @ HeroOfFireZC 11/10/2021 02:14

Besides keeping this relevant and not archived quite yet, I have noticed Bats and Digdogger Kids getting stuck on south NES dungeon walls in one of Nightmare James's quests. Although they don't seem to stay stuck as long, both enemies are clearly moving horizontally along the wall longer than should be plausible. I was unable to replicate this in the test quest though.

=== @ HeroOfFireZC 11/10/2021 02:52

Okay, figured it out. In my test quest, dungeon walls have the "No Flying Enemy" combo type, while in James's quest, the walls are the "None" combo type. When I replace a south wall in my NES dungeon screens with other solid combos that don't have the "No Flying Enemy" combo type, the rules of NES dungeon enemy movement does lead to flying enemies getting stuck on the south "wall" on occasion.
This means both "No Enemy" flags and "No Flying Enemy" combo interactions are correct, while screen bottoms and the invisible NES dungeon bottom wall have the issue.

=== @ NightmareJames 11/10/2021 18:49

Reporting in for this

=== @arceusplayer11 (discord: Deedee) 11/10/2021 18:54

I'll be looking into this indepth soon
Currently going enemy code for a couple of things

=== @ P-Tux7 11/10/2021 18:59

uh oh
uh i mean
hooray!
(replying to @arceusplayer11 (discord: Deedee) "Currently going enemy code fo‚Ä¶"): https://twitter.com/foxygrandpa62/status/1188608568108486658

=== @arceusplayer11 (discord: Deedee) 11/23/2021 10:22

(meta) thread name was changed: üíäüîìFlying Enemies Get Stuck at Bottom of Screen
I think I fixed it, but I'm confused as to why the bug happened now when it didn't before

=== @ P-Tux7 11/23/2021 17:08

i thought speculation was the addition of enemy size changing messed something up?

=== @arceusplayer11 (discord: Deedee) 11/23/2021 21:24

the problem was that diagonal upleft and diagonal upright were both returning false when on the bottom row but not left/right

=== @arceusplayer11 (discord: Deedee) 11/23/2021 21:30

and bat enemies always change direction to either of the two nearby directions; left means it's only options are upleft and downleft
exception is when they hit a wall which is why they can escape

=== @ HeroOfFireZC 11/23/2021 21:31

I assume all the enemies I saw reacting to the bug used this same movement code.

=== @arceusplayer11 (discord: Deedee) 11/23/2021 21:31

yup
constantwalk8

=== @ HeroOfFireZC 11/23/2021 21:31

Manhandla was the most unexpected one.
And Peahats on occasion, which was silly given you don't think of Peahats as a fast moving enemy like Bats.

=== @ P-Tux7 11/23/2021 22:14

speaking of
i wonder why keese, peahats, and phantom ghinis aren't in a combined class
i know _L_ mentioned he wanted to do that

=== @ P-Tux7 02/16/2022 01:30

oh i should mention i've seen moldorms do this a few times in ZC 2.50.2... but at the *top* of the dungeon playfield. just saw it yesterday
## Quest Script Auto-Import Folder (#1008)
@ P-Tux7 opened this issue on 11/09/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/907466425977946144



=== @ P-Tux7 11/09/2021 03:07

If a folder that's the same name as your quest is in the same folder as your quest, there would be a button in the Compile ZScript dialog that "auto-imports" every script file in that folder and auto-compiles them as a global header. This doesn't happen upon LOADING or RELOADING the quest - you have to press the button every time you want to import from that folder. Might be worth having an "are you sure?" box.

=== @ P-Tux7 11/09/2021 03:09

Since you have to import all of them every time you compile, this would allow questmakers a neat place to keep track of them, especially if the scripts got updates. Some people have also expressed confusion about writing headers, and this would do it for them.
## ‚úÖüîíLA_HOPPING softlock when cancel warp lines up with water on same screen (#1009)
@ Moosh opened this issue on 11/10/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/907784945517334570



=== @ Moosh 11/10/2021 00:13

Here's a strange one. I have a screen with water along the right side and a cancel warp on the left. When trying to scroll off the left side Link gets stuck in a walking animation as if trying to enter the water. When the water is removed the issue goes away.
The most baffling thing though
![image](https://cdn.discordapp.com/attachments/907784945517334570/907785004636061706/unknown.png)

=== @EmilyV99 (discord: Emily) 11/10/2021 00:14

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 11/10/2021 00:29

wtf

=== @ Russ 02/12/2022 01:57

This is still occurring, by the way

https://cdn.discordapp.com/attachments/907784945517334570/941875597628563517/CancelWater.qst
Quick test quest

=== @EmilyV99 (discord: Emily) 02/12/2022 01:58

@arceusplayer11 (discord: Deedee) Cancel warps interact *how* with the 'see the combo on the edge of the next screen' function?

=== @ Russ 02/12/2022 01:58

It only happens if "New Water Collision" is enabled
Disabling that rule fixes it

=== @EmilyV99 (discord: Emily) 02/12/2022 01:59

My guess is the cancel warp runs as though you are scrolling onto the same screen
in the same dir
so it's running the water scrolling code

=== @arceusplayer11 (discord: Deedee) 02/12/2022 13:20

ugh
hate that

=== @arceusplayer11 (discord: Deedee) 02/12/2022 13:27

(replying to @ Moosh "The most baffling thing though"): So scrolling screens still sets LA_HOPPING, the QR doesn't prevent that and I'm unsure if I want to have it prevent it

=== @arceusplayer11 (discord: Deedee) 02/12/2022 13:49

actually, wait, fuck

=== @arceusplayer11 (discord: Deedee) 02/12/2022 13:50

it's an issue with x not being bounded properly

=== @arceusplayer11 (discord: Deedee) 02/12/2022 14:11

fixed
(meta) thread name was changed: üíäüîìLA_HOPPING softlock when cancel warp lines up with water on same screen

=== @EmilyV99 (discord: Emily) 02/13/2022 05:12

@ Moosh @ Russ  [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Russ 02/13/2022 05:12

Excellent, thank you
Let me do a quick test to verify it's dead

=== @ Russ 02/13/2022 05:14

Unfortunately it appears to still be happening

=== @EmilyV99 (discord: Emily) 02/13/2022 05:15

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/13/2022 09:05

what the hell

=== @arceusplayer11 (discord: Deedee) 02/13/2022 09:58

(replying to @ Russ "Unfortunately it appears to s‚Ä¶"): I'm gonna need more info

=== @EmilyV99 (discord: Emily) 02/13/2022 09:59

(replying to @ Russ ""): I'd guess this

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:00

cause the test quest that was sent earlier (as well as an expansion I did just now that tests cancel warps on all sides and the natural cancel warp going off the map) is fixed

=== @EmilyV99 (discord: Emily) 02/13/2022 10:00

Hmm

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:00

at least for me anyways

=== @EmilyV99 (discord: Emily) 02/13/2022 10:00

Did you not push something?

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:01

I pushed everything I had before I went to bed
and this is fixed with a recompile I just did having pulled everything
lemme test if the same test quest breaks in the nightly you posted

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:03

wait a fucking minute
Yeah okay I'm just a dumbass

=== @EmilyV99 (discord: Emily) 02/13/2022 10:04

What

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:04

I fixed it for New Hero Movement but I missed the code block for non-new movement
so it still happens if that's turned off

=== @EmilyV99 (discord: Emily) 02/13/2022 10:04

Ah
Fun

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:07

...why didn't I just edit the function to vbound it for me instead of editing every single argument passed in? v.v

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:09

okay yeah I'm gonna revert my original fix and just do the simpler fix cause I don't know what I was thinking lmao

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:12

actually fixed now

=== @ Russ 02/13/2022 14:42

lol
Yay

=== @EmilyV99 (discord: Emily) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Russ 02/13/2022 16:52

Confirmed fixed

=== @EmilyV99 (discord: Emily) 02/13/2022 16:53

(meta) thread name was changed: ‚úÖüîíLA_HOPPING softlock when cancel warp lines up with water on same screen
## üíäüîìPits not respecting NPC Z when Stun is set? (#1010)
@ Moosh opened this issue on 11/10/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/907793981960761364



=== @ Moosh 11/10/2021 00:49

Enemies that drop from the ceiling aren't falling in pits until they land, but ones I've raised up with a script fall in while in the air. I'm assuming the fall from ceiling pattern is setting the move flag?

=== @arceusplayer11 (discord: Deedee) 11/10/2021 00:56

@EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 11/10/2021 00:57

uhhh, nope
ceiling pattern has no special code

=== @ Moosh 11/10/2021 00:57

Then I have no fucking idea what's going on

=== @arceusplayer11 (discord: Deedee) 11/10/2021 01:04

out of curiosity, what's the Z you're setting the enemies to?
And are they being initialized over a pit?

=== @ Moosh 11/10/2021 01:05

Initialized over safe ground, Z value of 32
And I can't reproduce it in a test quest
Yet I can see those fuckers flying. I'm not doing anything particularly complicated here :/

=== @ Moosh 11/10/2021 01:09

Oh! FFS I figured it out
Its NPC->Stun

https://cdn.discordapp.com/attachments/907793981960761364/907799064945504298/PitBug.qst
Setting NPC->Stun makes them fall in while in the air

=== @EmilyV99 (discord: Emily) 11/10/2021 01:09

. . . interesting

=== @ Moosh 11/10/2021 01:10

Which is super strange. I'd think it'd make them _not_ able to fall in if Stun was interfering

=== @ Moosh 11/10/2021 01:13

(meta) thread name was changed: Pits not respecting NPC Z when Stun is set?

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:52

```if(can_pitfall() && ((z <= 0 && !isflier(id)) || stunclk) && !superman)
        {
            fallCombo = check_pits();
        }``` @EmilyV99 (discord: EmilyV)
I think you missed some parenthesis

=== @arceusplayer11 (discord: Deedee) 02/13/2022 10:58

Fixed

=== @arceusplayer11 (discord: Deedee) 02/13/2022 11:04

(meta) thread name was changed: üíäüîìPits not respecting NPC Z when Stun is set?

=== @EmilyV99 (discord: Emily) 02/13/2022 11:58

oop

=== @EmilyV99 (discord: Emily) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíSigned Homing and Hunger for NPCs (#1011)
@ P-Tux7 opened this issue on 11/10/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/907833915455180841



=== @ P-Tux7 11/10/2021 03:27

reminder for @arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 11/10/2021 03:28

thanks

=== @ P-Tux7 11/10/2021 03:28

thank you as well
this makes certain enemies (gleeok heads and patras) as well as the bait incredibly more viable

=== @ P-Tux7 11/23/2021 18:22

lock

=== @arceusplayer11 (discord: Deedee) 11/23/2021 21:30

(meta) thread name was changed: ‚úÖüîíSigned Homing and Hunger for NPCs
## üíäüîìNES Fiery Gleeok Heads block all blockable projectiles (#1012)
@ P-Tux7 opened this issue on 11/10/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/907836196770676746



=== @ P-Tux7 11/10/2021 03:36

Ok so the red/fiery Gleeok heads block all projectiles on the NES, similar to a Darknut's front. This includes
-Sword Beams
-Boomerangs
-Arrows (makes tink sprite too)
-Wand magic (produces fire too, if Book is had)
Not sure if this would be a bug report or feature request, considering that it involves adding a new Gleeok attribute and QR, but it's technically a bug compared to NES Zelda.
Not to mention that the... possible usage of Gleeok heads to spawn Book fire is fascinating
I can provide video proof if needed. Have a savestate

=== @ NightmareJames 11/13/2021 19:54

I would suggest making this an enemy rule.  This would break compatibility in certain quests
But interesting note

=== @ P-Tux7 11/13/2021 19:59

yeah the way (most?) enemy qrs work is that they turn on enemy rules
like dodongo cset 8->cset dodongo/digdogger fix is just telling the zc player to make dodongos cset dodongo/digdogger instead of 8
or rope 2s don't flash tells the zc player to turn flashing off for rope 2s and set the cset to 8 (9 in older versions, which is a compatibility issue)
(replying to @ NightmareJames "I would suggest making this a‚Ä¶"): and all pre-existing quests would have it off anyways, though we'd need to update the nth quests

=== @ P-Tux7 11/13/2021 20:02

bugfixes generally don't mess with extant quests; even in 2.50.2, which had a lot of bugfixes that messed with extant quests, it still kept 1.84/1.90 quest dodongos as cset 8 instead of cset dodongo/digdogger
so that they'd look like what they did to the questmaker and in the 1.84/1.90 zc players
and for instance if side tektites can be bugfixed it'll probably be a rule as well, and extant quests will still have boomeranging tektites

=== @ P-Tux7 11/13/2021 20:05

i wonder... could fiery gleeok heads be set to be shielded, while the green gleeok heads aren't?
that would block sword beams and keep all their current immunities
@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee)
i'm unsure if fiery gleeok heads are their own spawned enemies, a la how moldorms and lanmolas each spawn 5 enemies
(replying to @ P-Tux7 "i wonder... could fiery gleeo‚Ä¶"): so if they are, refer to this

=== @ P-Tux7 11/13/2021 20:09

wait yeah... patras DO have code to shield/block all themselves state-dependently, so refer to that
~~getting awful, awful ideas for moldorms and lanmolas whose only unshielded pieces are the currently-first or last ones~~

=== @arceusplayer11 (discord: Deedee) 02/13/2022 11:23

@ P-Tux7 Do they make the *chink* sound when they hit? if so, is it just projectiles, or does the sword and etc also make the sound?

=== @arceusplayer11 (discord: Deedee) 02/13/2022 13:43

(meta) thread name was changed: üíäüîìNES Fiery Gleeok Heads block all blockable projectiles
added an enemy flag

=== @ P-Tux7 02/13/2022 13:51

just projectiles iirc

=== @arceusplayer11 (discord: Deedee) 02/13/2022 13:52

okay, good

=== @ P-Tux7 02/13/2022 13:53

oh i should mention that the boomerang comes back, sorry
as though it had hit a darknut or pols voice

=== @arceusplayer11 (discord: Deedee) 02/13/2022 13:55

yeah, I figured
question though: if the boomerang comes back *through* a gleeok head, does it still make the chink sound?
Or only if it hits it on the initial trip out?

=== @ P-Tux7 02/13/2022 13:56

i'll check but presumably the constant string of blocked sounds a la the aforementioned enemies

=== @arceusplayer11 (discord: Deedee) 02/13/2022 14:07

okay, so I shouldn't have to change anything hopefully

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ P-Tux7 02/14/2022 21:25

Ok so this works perfectly except for not making a sound when blocking bombs!
Thanks a ton!

=== @ P-Tux7 02/14/2022 21:28

Ok, so I PERSONALLY don't care about this, but it turns out that in NES Z1 the sounds made are
1. Every frame while the weapon is colliding with the head
2. Use the "enemy death" sound instead of the "tink" sound

I guess this is because of that behaviour where, similar to Dungeon Man/Goriya, Manhandla cores and Patra cores when invincible, the Fiery Gleeok Head is not actually invincible. It is just resurrected every frame if it "shouldn't" be dead.

=== @ P-Tux7 02/14/2022 21:30

Except for the bomb thing I'd call this one dead and done. Patras in ZC actually don't have that sound quirk either IIRC, and I've never found that odd

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:03

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
They should make a sound when blocking bombs
I also did a thing with manhandla cores with a compat qr where hitting the center body doesn't make the hit sound
## üíäüîìDMap Offset Messes With Dungeon Tracker Map (#1013)
@ HeroOfFireZC opened this issue on 11/10/2021

Status: closed

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/908056918155722762



=== @ HeroOfFireZC 11/10/2021 18:14

In recent builds, the active subscreen tracker map that shows rooms visited in dungeons seems to be reacting to DMap Offset and displaying wrong.

![image](https://cdn.discordapp.com/attachments/908056918155722762/908056974690766878/zc_screen00001.png)

=== @ HeroOfFireZC 11/10/2021 18:15

If the DMap Offset is flush against the left column of the map (dungeon 0, 0 is also map 0, 0), it displays correctly. In this screenshot, the DMap Offset is -1 (dungeon 0, 0 is map -1, 0)

=== @EmilyV99 (discord: Emily) 11/10/2021 18:34

uhhh
check compat rules for something mentioning `charting` or `charted`
and see how that affects it

=== @ HeroOfFireZC 11/10/2021 18:39

I will, but also note this was a quest last updated in an older version, so by default it has this bugged behavior when played in recent builds.

=== @ HeroOfFireZC 11/10/2021 18:41

"Dungeon DMaps Use Classic Charting" is toggled on by default.

=== @EmilyV99 (discord: Emily) 11/10/2021 18:42

...ok, that's the right setting, so there's a bug

=== @ HeroOfFireZC 11/10/2021 18:42

Yeah, toggling it off and re-entering that dungeon did not change anything with the character map.
~~not my weirdest autocorrect~~
I noticed this too when James was playing through my 4th entry, and it had to have been saved in a recent version to have additions like the Whistle removing Jinxes.

=== @ NightmareJames 11/11/2021 15:40

Definitely noting this.  Kept quiet because didn't know what was causing it

=== @ NightmareJames 11/13/2021 19:41

We definitely need to get to the bottom of this.  Now that I actually got a half hour to concentrate, is this being caused by offsets on the slider in the dmap, or something else?

=== @EmilyV99 (discord: Emily) 11/14/2021 22:32

it only breaks with negative offsets
which is probably why this wasn't caught sooner

=== @EmilyV99 (discord: Emily) 11/14/2021 22:57


![image](https://cdn.discordapp.com/attachments/908056918155722762/909577750048800848/unknown.png)
fixed
weird fucking math shenanigans

=== @EmilyV99 (discord: Emily) 11/14/2021 22:59

basically, the problem is
when you have a negative offset
it has less than 8 screens per row to check
but the way the math was working
it always checked 8 screens
so it weirdly bled some screens from the next row into it
and offset fucking everything
making a giant fucking mess

=== @ NightmareJames 11/14/2021 23:00

I'll test it later tonight or tomorrow

=== @EmilyV99 (discord: Emily) 11/14/2021 23:00

(meta) thread name was changed: üíäüîìDMap Offset Messes With Dungeon Tracker Map
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) shortly

=== @EmilyV99 (discord: Emily) 11/14/2021 23:05

@ HeroOfFireZC

=== @ HeroOfFireZC 11/15/2021 00:52

So far so good, not seeing any broken tracker maps.

=== @EmilyV99 (discord: Emily) 11/15/2021 00:55

good

=== @ NightmareJames 11/15/2021 15:31

This looks completely fixed
## GUI+Tooltip Bugs and Corrections (#1014)
@ P-Tux7 opened this issue on 11/10/2021

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/908133462572146750



=== @ P-Tux7 11/10/2021 23:18

Bugs and accuracy improvements for the [?] boxes beside certain ZQuest elements that explain what they do or how they work in the quest.
Quest Rule - Lesser Damage Combos Take Priority
![image](https://cdn.discordapp.com/attachments/908133462572146750/908133551139094538/unknown.png)

=== @arceusplayer11 (discord: Deedee) 11/11/2021 00:06

uh, whoops
got distracted while typing that
...though in fairness the tooltips weren't supposed to be out yet
I didn't mean to push them to the main branch
Wait, that's odd
it's typed out in the code...

=== @EmilyV99 (discord: Emily) 11/11/2021 00:09

Post the code block?

=== @arceusplayer11 (discord: Deedee) 11/11/2021 00:13

```{ "Lesser Damage Combos Take Priority", qr_DMGCOMBOPRI, "If this is enabled and you touch two damage combos at once, the one with less damage takes priority."
        " If disabled, the one with more damage takes priority."},```

=== @EmilyV99 (discord: Emily) 11/11/2021 00:15

....hmm
Maybe you fixed it after you pushed?
If not, then something in the gui code is being buggy, which would suck....

=== @arceusplayer11 (discord: Deedee) 11/11/2021 00:16

might be it ye

=== @ P-Tux7 11/11/2021 00:54

(replying to @arceusplayer11 (discord: Deedee) "...though in fairness the too‚Ä¶"): i mean, good that they were

=== @ P-Tux7 11/11/2021 00:58

first just try retyping it up to see if you accidentally formatted it wrong

=== @arceusplayer11 (discord: Deedee) 11/11/2021 01:11

it works fine on my end, so I think it just got posted before I finished that string

=== @EmilyV99 (discord: Emily) 11/11/2021 01:13

k, thank god
(Originally, there were at least 7 different issues with making the strings auto-size correctly, so not wanting to need to rip my hair out over it again lol)

=== @ P-Tux7 11/15/2021 06:43

not quite a tooltip but still
![image](https://cdn.discordapp.com/attachments/908133462572146750/909695208919269416/unknown.png)
(meta) thread name was changed: GUIslashTooltip Bugs and Corrections
from a few-days-old nightly

=== @EmilyV99 (discord: Emily) 11/15/2021 06:44

where is that

=== @ P-Tux7 11/15/2021 06:44

in sword flags
yeah sorry i was typing

=== @EmilyV99 (discord: Emily) 11/15/2021 06:45

huh, guess I need to increase the width constant there....

=== @ P-Tux7 11/15/2021 06:46

also, since we have enough room, can you please un-abbreviate these?
![image](https://cdn.discordapp.com/attachments/908133462572146750/909695718342660126/unknown.png)
(beam hearts and beam damage)
same menu

=== @EmilyV99 (discord: Emily) 11/15/2021 06:46

oh, fuck, yeah I should
it's `Beam Hearts` and `Beam Damage`, right?

=== @ P-Tux7 11/15/2021 06:46

yup

=== @EmilyV99 (discord: Emily) 11/15/2021 06:46

easy enough

=== @ P-Tux7 11/15/2021 06:47

also while we're at it, for swords, wands, and canes, i think "quick" needs a better name
i'm having a bit of trouble thinking of one just a note to self

=== @EmilyV99 (discord: Emily) 11/15/2021 06:47

`No Slash Cooldown`

=== @ P-Tux7 11/15/2021 06:47

(quick means that you can restart your swipe without having to wait for it to play through)
aha!
just change that to melee and we're golden
since it works even on non-slashing melee weapons

=== @EmilyV99 (discord: Emily) 11/15/2021 06:48

ah, true

=== @ P-Tux7 11/15/2021 06:48

thank you!

=== @EmilyV99 (discord: Emily) 11/15/2021 06:48

does it affect beams/magic?

=== @ P-Tux7 11/15/2021 06:48

nope

=== @EmilyV99 (discord: Emily) 11/15/2021 06:48

then yeah, that's perfect

=== @ P-Tux7 11/15/2021 06:48

they still have their on-screen limits and don't repeatedly fire if you quick-melee or anything

=== @ P-Tux7 11/15/2021 07:32

Room Type - Potion Shop could do with changing to "Letter-Requiring Shop". You can put anything in them, not just potions

=== @EmilyV99 (discord: Emily) 11/15/2021 07:34

(meta) thread name was changed: GUI+Tooltip Bugs and Corrections

=== @EmilyV99 (discord: Emily) 11/15/2021 07:35


![image](https://cdn.discordapp.com/attachments/908133462572146750/909708149181800458/unknown.png)

=== @ P-Tux7 11/15/2021 07:36

(replying to @EmilyV99 (discord: Emily) ""): 
![image](https://cdn.discordapp.com/attachments/908133462572146750/909708425624178728/250.png)

=== @ P-Tux7 11/20/2021 23:09

i am also unsure about whether this replaces the combo flagged with secrets->next's inherent flag or placed flag when secrets happen
![image](https://cdn.discordapp.com/attachments/908133462572146750/911755161406406706/unknown.png)
or if it cleverly replaces whichever flag of the two is secrets->next

=== @EmilyV99 (discord: Emily) 11/20/2021 23:19

the placed flag
the same way every other flag set in secret combos works

=== @ P-Tux7 11/20/2021 23:32

mm thanks
there's room below - could that label be lengthened to two rows please?

=== @EmilyV99 (discord: Emily) 11/20/2021 23:38

that's an old gui
so not easily

=== @ P-Tux7 11/23/2021 05:45


![image](https://cdn.discordapp.com/attachments/908133462572146750/912579591263092736/unknown.png)

=== @ P-Tux7 11/23/2021 05:49


![image](https://cdn.discordapp.com/attachments/908133462572146750/912580487959175178/unknown.png)
![image](https://cdn.discordapp.com/attachments/908133462572146750/912580488412151828/unknown.png)

=== @ P-Tux7 11/23/2021 05:50


![image](https://cdn.discordapp.com/attachments/908133462572146750/912580796630573106/unknown.png)

=== @ P-Tux7 11/23/2021 05:53

lantern class action tab
![image](https://cdn.discordapp.com/attachments/908133462572146750/912581483653390336/unknown.png)

=== @arceusplayer11 (discord: Deedee) 11/23/2021 05:53

'
ugh

=== @EmilyV99 (discord: Emily) 11/23/2021 05:53

(replying to @ P-Tux7 "lantern class action tab"): ?

=== @arceusplayer11 (discord: Deedee) 11/23/2021 05:53

I'm not sure why that's being cut off

=== @ P-Tux7 11/23/2021 05:57

(replying to @EmilyV99 (discord: Emily) "?"): no space
and i think the standard is "Activation
Sound"

=== @EmilyV99 (discord: Emily) 11/23/2021 05:58

Lantern is literally *using the default*
it has `NULL` for it's specific name for that field
also the lack of space was intentional, as it's `itemdata->UseSound` in ZScript
similarly to the other default names like `Attributes[0]`, being the ZScript access for that field

=== @ P-Tux7 11/23/2021 05:59

oh does that mean the lens needs to be changed to this instead?

=== @arceusplayer11 (discord: Deedee) 11/23/2021 05:59

to be fair, I'm not sure P-Tux knew that it was shared for all classes
wait what

=== @EmilyV99 (discord: Emily) 11/23/2021 05:59

the lens presumably has a specific name
the lantern has the default
as it doesn't actually use that field
you can't *use* a lantern, so the sfx field is not used by the engine

=== @EmilyV99 (discord: Emily) 11/23/2021 06:01

for reference
```cpp
ItemNameInfo defInfo =
{
    -1, "Power:", "Attributes[0]:", "Attributes[1]:", "Attributes[2]:",
    "Attributes[3]:", "Attributes[4]:","Attributes[5]:","Attributes[6]:",
    "Attributes[7]:","Attributes[8]:","Attributes[9]:", "Flags[0]",
    "Flags[1]", "Flags[2]", "Flags[3]", "Flags[4]", "Sprites[0]:",
    "Sprites[1]:","Sprites[2]:","Sprites[3]:","Sprites[4]:","Sprites[5]:",
    "Sprites[6]:","Sprites[7]:","Sprites[8]:","Sprites[9]:","UseSound",
    "Flags[5]", "Flags[6]", "Flags[7]", "Flags[8]", "Flags[9]", "Flags[10]",
    "Flags[11]","Flags[12]","Flags[13]", "Flags[14]","Constant Script"
};```
This is the default names array

![image](https://cdn.discordapp.com/attachments/908133462572146750/912583950990467072/unknown.png)
with plenty of things using a specific name for it, usually if they actually make use of the field

=== @ P-Tux7 11/23/2021 06:04

thanks!

=== @ P-Tux7 11/24/2021 03:45

ok so what the fuck
apparently you can assign a flag to any Room Secret Combo Type (and flags 16-31 ones etc.) by ctrl+clicking on it
this definitely needs to be added to the gui
oh so THAT'S what people used to make torches that you had to activate one after the other

=== @EmilyV99 (discord: Emily) 11/24/2021 03:46

That's tiered secrets
literally the definition of tiered secrets

=== @ P-Tux7 11/24/2021 03:47

yeah i know but i thought you had to use inherent combo flags for that
instead this auto-places them when the Secret Combo appears

=== @EmilyV99 (discord: Emily) 11/24/2021 03:48

this isn't at all new
(replying to @EmilyV99 (discord: Emily) "the same way every other flag‚Ä¶"): ^

=== @ P-Tux7 11/24/2021 03:48

i know but it needs either a reminder on the secret combos screens
or just prompt which flag to use after the user selects each secret combo
(it defaulting to 0 [None] of course)

=== @EmilyV99 (discord: Emily) 11/24/2021 03:49

something to keep in mind when that gui is rewritten

=== @ P-Tux7 11/24/2021 03:50

you added the convert water to non-solid dialog to the ruleset picking process didn't you?

=== @EmilyV99 (discord: Emily) 11/24/2021 03:51

It used to do it without asking
I made it ask

=== @arceusplayer11 (discord: Deedee) 12/20/2021 16:35

@ P-Tux7 now that they're done
if you find any bugs or anything with QR help text, please lemme know

=== @ P-Tux7 12/20/2021 17:34

thanks!

=== @ P-Tux7 12/23/2021 02:59

ah this was it
so i think for the rule where burn flags are triggered instantly
it says that wand magic can trigger them if on, right
however it should say that "if the player has the book, wand magic will trigger burn flags as it passes over them"

=== @ P-Tux7 12/23/2021 03:01

a space too many
![image](https://cdn.discordapp.com/attachments/908133462572146750/923409938716459078/unknown.png)
oh and for "downward hookshot bug", i'm pretty sure the hookshot can clip downwards through an ENTIRE combo of solidity in 1.90-2.10?

=== @EmilyV99 (discord: Emily) 12/23/2021 03:05

(replying to @ P-Tux7 "a space too many"): ... there's supposed to be a slash there
`holes / triggers`

=== @ P-Tux7 12/23/2021 03:06

latter should be "DISabled"
![image](https://cdn.discordapp.com/attachments/908133462572146750/923411332269735997/unknown.png)

=== @ P-Tux7 12/23/2021 03:08


![image](https://cdn.discordapp.com/attachments/908133462572146750/923411652785881118/unknown.png)

=== @ P-Tux7 12/23/2021 03:13


![image](https://cdn.discordapp.com/attachments/908133462572146750/923413089087549520/unknown.png)

=== @EmilyV99 (discord: Emily) 12/23/2021 03:15

pfffffffffffffffffft

=== @ P-Tux7 12/23/2021 03:16


![image](https://cdn.discordapp.com/attachments/908133462572146750/923413855349129216/unknown.png)

=== @ P-Tux7 12/23/2021 03:20

presumably a placeholder title
![image](https://cdn.discordapp.com/attachments/908133462572146750/923414768059056138/unknown.png)
also, i can't seem to find "items disappear upon item hold-up"?

=== @EmilyV99 (discord: Emily) 12/23/2021 07:20

(replying to @ P-Tux7 "also, i can't seem to find "i‚Ä¶"): 
![image](https://cdn.discordapp.com/attachments/908133462572146750/923475181442334801/unknown.png)

![image](https://cdn.discordapp.com/attachments/908133462572146750/923475237318828082/unknown.png)

=== @ P-Tux7 12/23/2021 07:22

ahh thanks

=== @arceusplayer11 (discord: Deedee) 12/23/2021 08:37

(replying to @ P-Tux7 ""): this one is a you error @EmilyV99 (discord: EmilyV)
the text is fine, the GUI is cutting it off

=== @arceusplayer11 (discord: Deedee) 12/23/2021 08:41

(replying to @ P-Tux7 ""): Same deal here

=== @arceusplayer11 (discord: Deedee) 12/23/2021 08:43

(replying to @ P-Tux7 "presumably a placeholder title"): yup, thank you for catching that
Fixed the ones I could

=== @EmilyV99 (discord: Emily) 12/23/2021 08:44

hmmm

=== @EmilyV99 (discord: Emily) 12/23/2021 08:47


![image](https://cdn.discordapp.com/attachments/908133462572146750/923497052208513094/unknown.png)
fixed it
Was REALLY close last time, when I accounted for all of the paddings
Just missed the fact that the WINDOW has a built in 6-pixel hpadding

=== @arceusplayer11 (discord: Deedee) 12/23/2021 08:48

pffft

=== @EmilyV99 (discord: Emily) 12/23/2021 08:48

so, the message had to be within an exact 6 pixels to get cut off
thus why it wasn't caught sooner
if it went to the 7th pixel, it'd have made a new line, which would work just fine

=== @ P-Tux7 12/24/2021 03:36

he
![image](https://cdn.discordapp.com/attachments/908133462572146750/923781220754681906/unknown.png)

=== @ P-Tux7 01/01/2022 02:20

@arceusplayer11 (discord: Deedee) i was playing with the new patra options and
![image](https://cdn.discordapp.com/attachments/908133462572146750/926661070662270996/unknown.png)
i'm pretty sure patras are not items and do not dispel invisibility
oh waaaaaaaaaait
is it like the item ID in the slot can disable this one specific enemy's invisibility
sorry

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:24

yeah

=== @EmilyV99 (discord: Emily) 01/01/2022 02:31

For the record, last I checked the code surrounding all the invisibility stuff Zoria added was completely fucked

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:42

I fixed it actually

=== @EmilyV99 (discord: Emily) 01/01/2022 02:42

oh, nice

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:42

But I'd still like for that to be tested

=== @EmilyV99 (discord: Emily) 01/01/2022 02:42

the ganon stuff too?

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:42

Yeah

=== @ P-Tux7 01/01/2022 03:01


![image](https://cdn.discordapp.com/attachments/908133462572146750/926671342395338792/unknown.png)
(this also applies to the L3 cheat menu)
oh dear um
so check either of those two menus
select an item class
and press up and down
the selected class will scroll, but the list of items on the right will not change
unless you manually click on one of the classes, but of course that defeats the purpose of arrow key scroll

=== @ P-Tux7 01/01/2022 03:03

(replying to @ P-Tux7 ""): oh same here
![image](https://cdn.discordapp.com/attachments/908133462572146750/926672027056754729/unknown.png)
it seems like the items are being listed in ID order rather than "level order and then in ID order if there are same-level items" order

=== @arceusplayer11 (discord: Deedee) 01/01/2022 03:04

@EmilyV99 (discord: EmilyV)

=== @ P-Tux7 01/01/2022 03:05

i.e. the worn-out glove and small shield have bigger item IDs than their higher-level counterparts (due to being added later) so they are displaying at the bottom instead of the top

=== @EmilyV99 (discord: Emily) 01/01/2022 03:17

oh
Saff must not have set up the lister to call it's update event on keypress
and, aye, duh, that does need to check level, doesn't it....

=== @EmilyV99 (discord: Emily) 01/01/2022 03:35


https://cdn.discordapp.com/attachments/908133462572146750/926679891028607018/zquest.exe
https://cdn.discordapp.com/attachments/908133462572146750/926679891716476938/zelda.exe
should fix the lister issues? Didn't fix the item ordering yet

=== @EmilyV99 (discord: Emily) 01/01/2022 03:59


![image](https://cdn.discordapp.com/attachments/908133462572146750/926685984068861962/unknown.png)
ahk
note the proper order
and note the `sh` text... showing that I typed `sh` and it updated instantly to show the shields on the right panel

https://cdn.discordapp.com/attachments/908133462572146750/926686168911843390/zquest.exe
https://cdn.discordapp.com/attachments/908133462572146750/926686169666838528/zelda.exe
@ P-Tux7 if you want to test this to ensure nothing's wonky
And @ Deedee: If you thought maps of `int`->`vector<int>` were fun, how about maps of `int`->`map` of `int`->`vector<int>`
```cpp
map<int32_t, map<int32_t, vector<int32_t> > > families;```

=== @EmilyV99 (discord: Emily) 01/01/2022 04:03

(Laymans terms, this reads:
`Map: For each int (itemclass ID), *optionally* store a...`
`Map: For each int (item level), *optionally* store a...`
`Vector: List of item IDs`)
So for each itemclass, it stores a map which, for each item level of that itemclass, stores all the items of that level
...then it iterates through the map in the map's order, populating the dialog
so, for each family, iterate through each level; for each level, iterate through each item ID
ergo, by family first, level second, and ID last for sorting. Fun!

=== @ P-Tux7 01/03/2022 01:32

um
![image](https://cdn.discordapp.com/attachments/908133462572146750/927373939217432626/unknown.png)
it does this for all of them
22nd, 33rd, etc.

=== @EmilyV99 (discord: Emily) 01/03/2022 01:33

uhhhhhhhhhhhhhhhhh

=== @EmilyV99 (discord: Emily) 01/03/2022 01:46

...I definitely didn't check how the ordinal function worked before using it
easy fix

=== @ P-Tux7 01/03/2022 02:03

this is technically a readme thing but...
above the list of hotkeys in zquest.txt can it please be added that some shortcuts may require usage of the numpad keys with num lock on to use them on laptop keyboards?
y'know, like there's two asterisks on the keyboard, but only the numpad one works
(the list below 2.2 BASIC COMMANDS in zquest.txt)

=== @EmilyV99 (discord: Emily) 01/03/2022 02:05

Ideally such issues could be fixed
though, like, allegro bullshit
...immediate question though, you leave numlock off ever?

=== @ P-Tux7 01/03/2022 02:06

this is gonna sound really silly but yeah because if num lock is on there's this little light on the num lock key

=== @EmilyV99 (discord: Emily) 01/03/2022 02:07

If that light isn't on my keyboard I know something is wrong

=== @ P-Tux7 01/03/2022 02:07

oh, you've gotten used to it? very well then, i can give it a try

=== @EmilyV99 (discord: Emily) 01/03/2022 02:07

having that off is physically painful to me
I have not had numlock off in like
since I first touched a computer
so like 2 decades

=== @ P-Tux7 01/03/2022 02:08

https://coub.com/view/zudms

=== @EmilyV99 (discord: Emily) 01/03/2022 02:08

and on a desktop, I use the indicator light being on as an indication that the keyboard is plugged in right

=== @ P-Tux7 01/03/2022 16:26

no ammo required to display subscreen items
![image](https://cdn.discordapp.com/attachments/908133462572146750/927598712509853736/unknown.png)

=== @ P-Tux7 01/05/2022 01:31

Weapon editor - weapons are called "Script 1-10"
![image](https://cdn.discordapp.com/attachments/908133462572146750/928098292863234078/unknown.png)
Combo editor - weapons are called "Custom Weapon 1-10"
![image](https://cdn.discordapp.com/attachments/908133462572146750/928098509687767050/unknown.png)

=== @ P-Tux7 01/05/2022 20:51


![image](https://cdn.discordapp.com/attachments/908133462572146750/928390159664283658/unknown.png)

![image](https://cdn.discordapp.com/attachments/908133462572146750/928390239536431175/unknown.png)
...where do I set the speed @arceusplayer11 (discord: Deedee)
there's the rate but what about the speed

=== @EmilyV99 (discord: Emily) 01/05/2022 20:51

scroll down
the speed is attributes, which are at the bottom below the attribytes

=== @ P-Tux7 01/05/2022 20:52

WHAAA
there's a scroll bar on attribs now?
thanks

=== @ P-Tux7 01/05/2022 21:02

DMap
![image](https://cdn.discordapp.com/attachments/908133462572146750/928393089796685834/unknown.png)

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:10

oop

=== @ P-Tux7 01/05/2022 22:18

after this build, should I start reporting other instances in ZQuest of "Link"?
i.e. screen flag "Invisible Link"

=== @EmilyV99 (discord: Emily) 01/05/2022 22:19

sure
worth changing them

=== @ P-Tux7 01/05/2022 22:20

Yeah, about that...
![image](https://cdn.discordapp.com/attachments/908133462572146750/928412788395749386/unknown.png)
ok i'll be tagging all these link issues with "LinkFix"
like such

=== @ P-Tux7 01/05/2022 22:24

LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928413743799480360/unknown.png)
so you can search for them
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928413856731131944/unknown.png)

=== @ P-Tux7 01/05/2022 22:26

"1-damage flame"... isn't that changeable now?
![image](https://cdn.discordapp.com/attachments/908133462572146750/928414156888109137/unknown.png)
also even if it's not it should be 2 damage, as that's how powerful the blue/red candle flames are by default, which the wand fire is equal to in zelda 1
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928414346491600926/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928414425726193775/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928414520219697152/unknown.png)

=== @ P-Tux7 01/05/2022 22:30

"effets", no period
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415200166694922/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415313610018856/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415426105470997/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415550495928330/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415664933335100/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415745652695040/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415838673985546/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928415993515089920/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928416093574418512/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928416182581723146/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928416264014151690/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928416356678897724/unknown.png)

=== @ P-Tux7 01/05/2022 22:37

LinkFix (Also, more than just Hookshot Grab combo types can be grabbed with it now)
![image](https://cdn.discordapp.com/attachments/908133462572146750/928416904220147804/unknown.png)

=== @ P-Tux7 01/05/2022 22:40

LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928417580157403176/unknown.png)

=== @ P-Tux7 01/07/2022 04:30

LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928868181962006528/unknown.png)

=== @ P-Tux7 01/07/2022 04:34

LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869153413160970/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869296694763520/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869425212452904/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869528555896882/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869629898678332/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869786371379241/unknown.png)
LinkFix (Also, isn't it allowed to use fractional rings now?)
![image](https://cdn.discordapp.com/attachments/908133462572146750/928869970555838504/unknown.png)
LinkFix (also needs new description of how the new alternative jump height determination works)
![image](https://cdn.discordapp.com/attachments/908133462572146750/928870139812794408/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928870260231254036/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928870347187585104/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928870426443141121/unknown.png)

=== @ P-Tux7 01/07/2022 04:40

LinkFix (Also, the block/reflect bitwise [or whatever those additive flags are called] flags are now in the tooltips for the Blocks and Reflects attributes)
![image](https://cdn.discordapp.com/attachments/908133462572146750/928870812382023700/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928870971920777276/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928871075859804170/unknown.png)
LinkFix (Also, Tiger Scroll is a term used nowhere else)
![image](https://cdn.discordapp.com/attachments/908133462572146750/928871261386461254/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928871368970350652/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928871453120659497/unknown.png)
I think it should be like, "Can optionally deal damage to enemies by..."
![image](https://cdn.discordapp.com/attachments/908133462572146750/928871643592413264/unknown.png)

=== @ P-Tux7 01/07/2022 04:46

Can now perform screen-wide damage to enemies, and the whirlwind can trigger combos set to be triggered by whirlwinds
![image](https://cdn.discordapp.com/attachments/908133462572146750/928872107645997056/unknown.png)
Well, that's all the item type tooltips. Now to dig into their flag/attribute tooltips...

=== @ P-Tux7 01/07/2022 04:48

(Bomb Bags) Regenerates plural, no punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928872641354424360/unknown.png)
Ditto
![image](https://cdn.discordapp.com/attachments/908133462572146750/928872713030877184/unknown.png)
Capitalization and punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928872779800014898/unknown.png)

=== @ P-Tux7 01/07/2022 04:49

(Bottle Fillers) punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928873068259082270/unknown.png)
(Bottles) "Valid values are..."
![image](https://cdn.discordapp.com/attachments/908133462572146750/928873227349008424/unknown.png)
(Bug Nets) Punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928873465015050321/unknown.png)
Ditto
![image](https://cdn.discordapp.com/attachments/908133462572146750/928873522007261224/unknown.png)
(Candles) Punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928873731898626088/unknown.png)
Ditto
![image](https://cdn.discordapp.com/attachments/908133462572146750/928873807773597737/unknown.png)

=== @ P-Tux7 01/07/2022 04:54

(Custom Weapon 1-10) Punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928874119615873044/unknown.png)
(Fairies) Punctuation
![image](https://cdn.discordapp.com/attachments/908133462572146750/928874300247801906/unknown.png)
Ditto
![image](https://cdn.discordapp.com/attachments/908133462572146750/928874376307294229/unknown.png)
Ditto
![image](https://cdn.discordapp.com/attachments/908133462572146750/928874470406488124/unknown.png)
Ditto
![image](https://cdn.discordapp.com/attachments/908133462572146750/928874525993627648/unknown.png)

=== @EmilyV99 (discord: Emily) 01/07/2022 04:56

I mean, those aren't really sentences

=== @ P-Tux7 01/07/2022 04:56

...oh I just posted in [#dev-discussion](https://discord.com/channels/876899628556091432/876908472728453161)
Consider my offer applicable to the rest of the grammar stuff. Should I delete the grammar stuff from this channel?

=== @ P-Tux7 01/07/2022 04:58

Probably should be retitled to be experimental as well
![image](https://cdn.discordapp.com/attachments/908133462572146750/928875305500827668/unknown.png)

=== @ P-Tux7 01/07/2022 05:00

Uh, I think these are hardcoded, right? To how the L1/L2/L3 Boomerangs blocked/reflected stuff in 2.10 and below when the New/Z3 Boomerang rule was on. These presumably use the same block/reflect flag numbers as the default three boomerangs
![image](https://cdn.discordapp.com/attachments/908133462572146750/928875811757506560/unknown.png)
(Ice Rod) Capitalization
![image](https://cdn.discordapp.com/attachments/908133462572146750/928875977017266256/unknown.png)

=== @EmilyV99 (discord: Emily) 01/07/2022 05:01

if you want to set up git for the repo so you can commit stuff
`src/dialog/quest_rules.cpp`, `src/dialog/itemeditor.cpp`, `src/dialog/comboeditor.cpp` contain pretty much all of that text

=== @ P-Tux7 01/07/2022 05:02

Uh, let's move this to [#dev-discussion](https://discord.com/channels/876899628556091432/876908472728453161)

=== @ P-Tux7 01/07/2022 05:08

Experimental diagonal switchhook
![image](https://cdn.discordapp.com/attachments/908133462572146750/928877836046065745/unknown.png)
(meta, MessageType.pins_add) 

=== @ P-Tux7 01/07/2022 05:18

Really impressed. No Link fixes needed for the item tooltips
Combo flag time...
LinkFix (How many blocks are there? I hate myself...)
![image](https://cdn.discordapp.com/attachments/908133462572146750/928880340615954515/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928880427098337310/unknown.png)
LinkFix
![image](https://cdn.discordapp.com/attachments/908133462572146750/928880502763565086/unknown.png)

=== @EmilyV99 (discord: Emily) 01/07/2022 05:19

Find/replace exists
As long as you're careful with it

=== @ P-Tux7 01/07/2022 05:19

oh i'll be editing them manually due to Link being yeah
a real word

=== @EmilyV99 (discord: Emily) 01/07/2022 05:19

But like

=== @ P-Tux7 01/07/2022 05:20

and a term in the code for the player still

=== @EmilyV99 (discord: Emily) 01/07/2022 05:20

`Allows Link to push` -> `Allows the Player to push`

=== @ P-Tux7 01/07/2022 05:20

AHH for specific sentences

=== @EmilyV99 (discord: Emily) 01/07/2022 05:20

that find+replace would do all blocks

=== @ P-Tux7 01/07/2022 05:20

neat

=== @EmilyV99 (discord: Emily) 01/07/2022 05:20

like I said, `as long as you're careful with it`
I think I did the combo type help text for link stuff
and, it was a fun time making sure I didn't fuck anything up....
Also keep in mind you can find *in selection*
so you can highlight just a section of text and replace only within that section

=== @ P-Tux7 01/07/2022 05:21

Fuck it I'll do the combo flags link fix myself soon
Though here's one for you
![image](https://cdn.discordapp.com/attachments/908133462572146750/928881111814246430/unknown.png)

=== @EmilyV99 (discord: Emily) 01/07/2022 05:22

also, you could do `Link` -> `the Player`; but don't use `Replace All`
instead hit `find` to look at each one
and then `replace` for each one that should be changed
letting you manually check each one, while still being much faster than *completely* manual

=== @ P-Tux7 01/07/2022 05:22

what text editor is that in?

=== @EmilyV99 (discord: Emily) 01/07/2022 05:24

notepad++
I pretty much never use anything else
it's way too good
anyway, adding this for no mirroring:`"While touching this flag, attempting to use a Mirror item will fail."`
pushed that
feel free to change if you like
Also, now just imagine us going through THIS https://www.zeldaclassic.com/zscript-docs/
to find typos and stuff....
given, I'm trying to do my best with it... but it'll need some more sets of eyes eventually to check it

=== @ P-Tux7 01/10/2022 23:06

did i report that the defense classes in the item tab's weapon tab for item spoofing say "script 1-10" when it should be "custom 1-10"
because if not, yeah
you can give items these classes and give combos/enemies responses to them without scripts
heck the combo trigger selector has them as custom weapon 1-10 already

=== @EmilyV99 (discord: Emily) 01/12/2022 03:34

(replying to @ P-Tux7 "did i report that the defense‚Ä¶"): fixed, was a module thing that wasn't updated

=== @EmilyV99 (discord: Emily) 01/12/2022 03:36

(replying to @ P-Tux7 "Uh, I think these are hardcod‚Ä¶"): 
![image](https://cdn.discordapp.com/attachments/908133462572146750/930666459351367680/unknown.png)
(replying to @ P-Tux7 "Probably should be retitled t‚Ä¶"): both are listed as experimental, in the `?`

=== @ P-Tux7 01/12/2022 07:05

(replying to @EmilyV99 (discord: Emily) ""): wait hookshots have these?

=== @EmilyV99 (discord: Emily) 01/12/2022 07:09

yes

=== @ P-Tux7 01/14/2022 18:38

zstrings.txt - says item pickup scripts do not run when an item is given by an SCC. this was true, however there is now a rule that one can set to make this happen or not

=== @ P-Tux7 01/16/2022 17:22

mroe
![image](https://cdn.discordapp.com/attachments/908133462572146750/932323935410851840/unknown-544.png)

=== @EmilyV99 (discord: Emily) 01/17/2022 17:10

(replying to @ P-Tux7 "zstrings.txt - says item pick‚Ä¶"): ...is there?

=== @EmilyV99 (discord: Emily) 01/17/2022 17:23

(meta, MessageType.pins_add) 
(meta, MessageType.pins_add) 

=== @EmilyV99 (discord: Emily) 01/17/2022 17:26

All item help text has been linkfixed

=== @ P-Tux7 01/17/2022 17:27

Aw FUCK sorry

=== @EmilyV99 (discord: Emily) 01/17/2022 17:27

It took 3 minutes
if that
there were only 40 instances of `Link` in the file

=== @EmilyV99 (discord: Emily) 01/17/2022 17:33

(meta, MessageType.pins_add) 

=== @EmilyV99 (discord: Emily) 01/17/2022 20:05

also did combo types / flags
which uh, was able to be done in one click with a find replace

=== @ P-Tux7 01/17/2022 20:09

Next build release I'll go through them and make sure nothing got replaced wrongly

=== @EmilyV99 (discord: Emily) 01/17/2022 20:12

I scanned all of them
there were only 41
so I just did `find all in current document`
skimmed over them looking for any that would have a problem with find+replace
saw none
and did it
should be fine

=== @ P-Tux7 01/17/2022 20:18

great

=== @ P-Tux7 01/18/2022 00:35

The Ganon class has a new behaviour flag that allows the amulet to affect the enemy if the owned amulet is L2 or higher.
![image](https://cdn.discordapp.com/attachments/908133462572146750/932795248806088734/unknown.png)

=== @EmilyV99 (discord: Emily) 01/18/2022 00:35

(meta, MessageType.pins_add) 

=== @ P-Tux7 01/18/2022 00:37

...if the Pitfall combo is set to allow the Ladder
![image](https://cdn.discordapp.com/attachments/908133462572146750/932795796909351053/unknown.png)

=== @ P-Tux7 01/18/2022 00:43

Everything looks great as far as "Player" goes. Capitalization is inconsistent, referring to them as a proper noun sometimes and sometimes not, but it works.

=== @ P-Tux7 01/18/2022 00:44

You even got the Screen Data flags that said Link. Very thorough.
I don't think we can do much about this one can we
![image](https://cdn.discordapp.com/attachments/908133462572146750/932797796325658634/unknown.png)
Though if that's what I think it is it's awesome.
Same for the "Can cancel diving", now that I'm at it.

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:00

(replying to @ P-Tux7 "Though if that's what I think‚Ä¶"): One of Zoria's few good additions (though he flubbed the backwards compat on it)
Yes, you can make the subscreen be faster

=== @ P-Tux7 01/20/2022 20:43

so er
"fast dungeon scrolling" applies to overworlds too

=== @ P-Tux7 01/21/2022 02:25

i feel as though this compatibility rule really belongs more in item rules. could be used strategically
![image](https://cdn.discordapp.com/attachments/908133462572146750/933910257103671376/unknown.png)
if you move it maybe just add a note to it saying ", as in all pre-2.55 quests"

=== @ P-Tux7 01/21/2022 19:02

(meta, MessageType.pins_add) 

=== @ P-Tux7 02/04/2022 08:31

i wonder if there's a more elegant way to say "big patra" in the patra size dropdown than 2x2?
i know the graphic is 2x2 for whatever reason but i'm pretty sure that the *hitbox* is the same size as the actual bs zelda patra like that one you see in classic

=== @ P-Tux7 02/14/2022 21:32

Keese Family: "Walk Style"?

=== @ P-Tux7 02/14/2022 21:34


![image](https://cdn.discordapp.com/attachments/908133462572146750/942896586416070746/unknown.png)

=== @arceusplayer11 (discord: Deedee) 02/14/2022 21:55

pfft

=== @connorjclark (discord: connorclark) 09/04/2022 03:33

very very long thread... @ P-Tux7 anything left to do here?
## Rename Script LWeapons 1-10 to Custom or General-Purpose (#1015)
@ P-Tux7 opened this issue on 11/10/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/908134842779205704



=== @ P-Tux7 11/10/2021 23:23

Since they can be used to hurt enemies or trigger combos without scripts by setting an existing item to use their defense, these "Scripted LWeapons" should be renamed to show that they can be used without scripting. New users intimidated by scripting may not realize this without the name change.
This affects the following dialogs, to my knowledge
-Item Defense
-Enemy Defenses
-Combos - Triggered By...
## ‚úÖüîíInvisibility Bullshit (#1016)
@EmilyV99 (discord: Emily) opened this issue on 11/11/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/908184341874606101



=== @EmilyV99 (discord: Emily) 11/11/2021 02:40

uhg

![image](https://cdn.discordapp.com/attachments/908184341874606101/908184379392688158/unknown.png)
these flags appear to be wrong
`ENEMY_FLAG1` is being checked for `Attributes 13`, despite that being flag 2 in the editor

![image](https://cdn.discordapp.com/attachments/908184341874606101/908184498410229800/unknown.png)
and this is the special flags for Ganon
which.... ***all of the related code for this flag is commented out and does not exist in builds***
What the fucking hell
This needs to be fixed, and the flag for amulet 2+ showing ganon needs to be implemented+checked by default

=== @ P-Tux7 11/16/2021 23:24

does enemy is completely invisible cloak them or just plain not draw them

=== @EmilyV99 (discord: Emily) 11/16/2021 23:24

should be not draw

=== @ P-Tux7 11/16/2021 23:43

mm

=== @arceusplayer11 (discord: Deedee) 11/19/2021 23:05

Okay, but how would it make him visible

=== @EmilyV99 (discord: Emily) 11/19/2021 23:05

great question

=== @arceusplayer11 (discord: Deedee) 11/19/2021 23:05

Reminder that ganons tile chanes every frame to a random tile

=== @EmilyV99 (discord: Emily) 11/19/2021 23:05

perhaps check the commented out code to see if there was an idea there
if not, perhaps come up with something new

=== @arceusplayer11 (discord: Deedee) 11/19/2021 23:05

Just showing ganon all the time is a lazy copout
Maybe he shows every x frames?
You get a better gist of where he is, but not a perfect one

=== @ P-Tux7 11/20/2021 00:29

cloaked ganon?
(replying to @arceusplayer11 (discord: Deedee) "Reminder that ganons tile cha‚Ä¶"): oh yeah, more ganon bs
zelda classic has 5 frames
but zelda 1 seems to have him go through *6* frames in order, one per frame, and the one displayed when you hurt him is said frame that he's currently on
it's a little hard for me to tell if the 6th frame is a real thing or not because i've only seen it using the Buffet speedrun test rom's visible ganon option... not on unmodified Z1

=== @ P-Tux7 11/20/2021 00:33

also i wasn't sure whether to say this the other day
and keep in mind i think it was through the zoria or tamamo grapevine
but i heard there were meant to be two "classes" of invisible enemies
1. cloaked
2. invisible (1.90, 2.50 enemy is completely invsible)
amulet 1 makes cloaked enemies visible and invisible enemies cloaked
amulet 2 makes all enemies visible
i, as said before, was unsure to mention this
because i am not sure if it was ever an intended idea
and to be frank, completely invisible enemies as a gameplay mechanic are awful and should not have dev time spent on them
(though rendering cloaked enemies as invisible DOES need to be added for 1.90 compatibility, I'll go post in that thread and remind myself to check if their projectiles are invisible too tomorrow)

=== @arceusplayer11 (discord: Deedee) 11/20/2021 01:38

(replying to @ P-Tux7 "and to be frank, completely i‚Ä¶"): Didnt stop zoria from wasting attributes on that exact feature

=== @ P-Tux7 11/20/2021 01:40

i thought enemy was completely invisible was a 2.50.2 thing
or did he add more

=== @ P-Tux7 11/20/2021 19:31

(replying to @ P-Tux7 "zelda classic has 5 frames"): oh duh i'm an idiot
does it have him have 6 frames and the 6th is just a flipped version of one of the others
like so many pre-new enemy tiles things worked

=== @arceusplayer11 (discord: Deedee) 11/20/2021 20:14

ye

=== @ P-Tux7 11/20/2021 20:21

whew

=== @ P-Tux7 11/20/2021 23:39

i think the best way to handle this would have settings in the amulet 2 item itself
1. How Often To Show Ganon
2. How Long Each Showing Lasts
and it might need a bit of touchup with the ganon animation code so every appearance of ganon isn't animating and stays on one static frame
...or you could just have the "appearances" be their own decoration/sparkle, spawned where ganon is, and have them NOT move with him

=== @ P-Tux7 11/20/2021 23:42

i could PROBABLY rustle up 4-way walking Ganon sprites (not in time for the alpha but for the tileset) but i have no idea how you'd set the animation for those
(they'd use the "special" tile or just be on the row below Z1 Ganon)
okay so, kooky idea, but QR where a Ganon enemy is hardcoded to use the Ganon animation while invisible, and uses the user-defined one while visible

=== @ P-Tux7 11/20/2021 23:46

or enemy flag, whatever, and make all quests in the player below A100 (or A101) turn that flag off

=== @arceusplayer11 (discord: Deedee) 11/20/2021 23:52

maybe yeah

=== @ P-Tux7 11/21/2021 00:40

oh and the first z1 frame should probably always be used for when he's hurt while visible

=== @ P-Tux7 11/21/2021 21:22

@arceusplayer11 (discord: Deedee) #1050 had a great idea for what an amulet 2 can do to modern ganon

=== @arceusplayer11 (discord: Deedee) 11/21/2021 21:24

yeah?

=== @ P-Tux7 11/21/2021 21:24

the thing at the bottom
where you can see him once every (x) teleports

=== @arceusplayer11 (discord: Deedee) 11/21/2021 21:25

ahhh

=== @EmilyV99 (discord: Emily) 01/01/2022 02:42

@arceusplayer11 (discord: Deedee) @ P-Tux7

=== @ P-Tux7 01/01/2022 02:43

yes?

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:44

Can you test to see if Ganon and enemies work with invisibility options and havign specific items toggle visibility for enemies?
I think it works, but I lack self confidence

=== @EmilyV99 (discord: Emily) 01/01/2022 02:45

<a:hugheart:876927396215930930>

=== @ P-Tux7 01/01/2022 02:45

in the buildpack?
sure

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:48

yeah

=== @ P-Tux7 01/01/2022 02:53

also while we're at it i was modifying ganon and
flags -> behaviour -> use editor???
and "death shot item ID"?

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:54

Death shot item ID is, I think, an attempt to have silver arrows but for any item type?

=== @ P-Tux7 01/01/2022 02:54

i'll try it out later in #deleted-channel

=== @ P-Tux7 01/01/2022 02:56

oh and uh, one last thing, how do i set enemies to be invisible (the kind that can be dispelled)

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:56

Oh, @ P-Tux7 don't bother

=== @ P-Tux7 01/01/2022 02:56

i thought you could make enemies individually invisible and not just the screen flag

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:56

it's not implemented
entire code is commented out and does nothing

=== @ P-Tux7 01/01/2022 02:56

well that's handy

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:56

lmfao
the ganon deaht shot and use editor stuff, I mean

=== @ P-Tux7 01/01/2022 02:57

yeah i would have thought it'd be Lweapon type + Lweapon level instead of just one number to enter

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:57

Use Editor is supposed to let you define custom defense values for ganon
(replying to @ P-Tux7 "i thought you could make enem‚Ä¶"): Should be one of the 3 flag tabs of the enemy editor

=== @ P-Tux7 01/01/2022 02:57

(replying to @arceusplayer11 (discord: Deedee) "Use Editor is supposed to let‚Ä¶"): ok that'd admittedly be neat but i don't have any plans in mind for it right now
oh so i want "enemy is completely invisible" + "draw enemy as cloaked" to simulate the screen flag effect?

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:59

I think so, yeah
Draw Invisible as Cloaked

=== @ P-Tux7 01/01/2022 02:59

it works!!!
https://cdn.discordapp.com/attachments/908184341874606101/926671030666280980/invisibility.qst

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:59

woo!

=== @ P-Tux7 01/01/2022 02:59

there are two enemies on the screen - an octorok and ganon
use the l4 cheat (4) to give yourself an l2 bracelet to see the octorok, and an l3 bracelet to see ganon

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:30

Since this was confirmed fixed
(meta) thread name was changed: ‚úÖüîíInvisibility Bullshit
## Options for More Readable Custom Item Classes (#1017)
@ HeroOfFireZC opened this issue on 11/11/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/908468087697858621



=== @ HeroOfFireZC 11/11/2021 21:27

At the moment, all custom item classes are simply called "zzNumber", which appears to start at 67. This can be difficult to keep track of what each custom class is for when creating custom items or setting up subscreens.
An ideal solution would be the ability to rename each of these item classes on a quest per quest basis, though it has been pointed out this would increase quest sizes and be a lot of work to set up.

=== @ HeroOfFireZC 11/11/2021 21:32

One other (I admit silly) consideration is a zQuest compatibility option that when enabled, displays classes zz067 - zz 086 as "Custom Item Class Number" like it used to be, for those who preferred that method (plus older quests might have specifically used those item classes because of those identifiers, and would be confused by them being grouped with all the other zz classes now.
## Learn Slash, and Learn Sword Beam Items (#1018)
@ P-Tux7 opened this issue on 11/11/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/908473851762073600



=== @ P-Tux7 11/11/2021 21:50

If the default tileset isn't supposed to have scripts, then I guess these need to be in as unscripted items.

=== @ P-Tux7 11/18/2021 03:03

added learn sword beam item
(meta) thread name was changed: Learn Slash, and Learn Sword Beam Items
might need a new QR that says you can't sword beam unless you have such an item?

=== @EmilyV99 (discord: Emily) 11/18/2021 03:05

Could be added the same as learn slash
Adding items for such things would be another whole thing to do

=== @ P-Tux7 03/24/2022 07:25

Bump (for the Learn Slash scroll, Magic Divisor ring is better-described in #1293 and so is #1291)

=== @ P-Tux7 03/24/2022 07:27

Sorry for all the passive item stuff - the expansion of string length (SCC viability), Signposts, Menus, etc. has really got my gears turning for the "passive ability" items

=== @ P-Tux7 03/24/2022 07:28

(You can also thank Haylee and Nightmare for inspiring me with their multi-class quests Nostalrul and whatever Nightmare's quest is, where adding and taking away ability items is pivotal to the class system)
## üíäüîìtitle screen bugginess (#1019)
@EmilyV99 (discord: Emily) opened this issue on 11/13/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/909032712990511175



=== @EmilyV99 (discord: Emily) 11/13/2021 10:51

sooooo

![image](https://cdn.discordapp.com/attachments/909032712990511175/909032722889048114/unknown.png)
it's very fucking confused about how to draw the title screen
and uhhh
nothing to do with the title screen drawing has changed in *almost 2 years*
so, what the fuck has decided to cause this now, is a great question
it's pulling the tiles from the most recently loaded quest, instead of from the qst.dat quest

=== @EmilyV99 (discord: Emily) 11/13/2021 11:11

.......so, this change appears to be an issue with the new `qst.dat`
going back a number of builds the issue persisted
but reverting to the old *module* fixed the issue
what the ever-living fuck could cause this
this has probably been broken for *years* on the engine side, just waiting for a module to fuck everything up
and, nothing related to the title screen settings in the module has changed in any way.....
Proposed fix: Revert the title screen to not use modules anymore. This means scavenging for the old code from *years* ago
FML
not tonight's job
@ Moosh @arceusplayer11 (discord: Deedee) figure you might care to be in this thread

=== @ Moosh 11/13/2021 11:15

Kinda hilarious that modules went relatively unused for so long that something like this apparently slipped by

=== @EmilyV99 (discord: Emily) 11/13/2021 11:15

again, *nothing related to the title screen changed*
even in the module update
so, I still have absolutely no clue what's causing it
also, the fact that it's reading tiles from DoR when I load your quest is severely worrying
as it should be reading the tiles from qst.dat
and it clearly isn't
so there might be *multiple* issues here
but, the module is the clear and obvious first issue
Frankly at this rate, I feel like slowly reverting everything to do with modules is the right way to go
taking things like itemclass names and making those per-quest editable
and just removing things like title screen and sfx.dat
....probably leave modules as just quest progression chains
because that part seems quite solid and useful

=== @arceusplayer11 (discord: Deedee) 11/13/2021 11:21

(replying to @ Moosh "Kinda hilarious that modules‚Ä¶"): idea doomed to failure

=== @EmilyV99 (discord: Emily) 11/13/2021 21:15

.....hmm
So, actually digging into this, I have no fucking idea what's actually causing it not to load properly
because it looks like it should
but, regardless, frankly, the title screen shouldn't be *reliant* on qst.dat
it literally *only uses the blue frame*

=== @EmilyV99 (discord: Emily) 11/13/2021 22:17

I want to fucking rip my hair out
what the fuck
is wrong with this
thus far I've gotten crashes... where the debugger specifies that it's an allegro file that it can't give me any information on
but when I breakpoint to try to find where it crashes.... it just doesn't crash
and now I'm trying to fix the blue frame
but instead I get literally the entire fucking screen being a solid gray
like what the fuck

![image](https://cdn.discordapp.com/attachments/909032712990511175/909205637290946561/unknown.png)
what the fuck
what the fuck
what the fuck

![image](https://cdn.discordapp.com/attachments/909032712990511175/909205752634298408/unknown.png)
but then if I type in a name
suddenly it exists
gaaaaaaaaaaaah wtf

=== @EmilyV99 (discord: Emily) 11/13/2021 22:23

....it's failing to open the qst.dat
why
wtf

=== @EmilyV99 (discord: Emily) 11/13/2021 22:31

gaaaaaaaaaaaaaaaaaaaaaaah
I fucking hate this

=== @EmilyV99 (discord: Emily) 11/13/2021 22:44


![image](https://cdn.discordapp.com/attachments/909032712990511175/909212095252410368/unknown.png)
ooo-kay
got it back to this
something is *seriously* fucked up with how ZC is reading qst.dat
which, it tries to load *only certain parts of the quest file*, rather than loading it all at once

=== @EmilyV99 (discord: Emily) 11/13/2021 22:46

something to do with that system is clearly broken for new quests
so now I just have it loading the whole qst.dat each time
which might increase load times on the title screen, but hopefully not by much

=== @ Moosh 11/13/2021 23:19

Perhaps a dumb question, but why does the title screen rely on the quest format just to access graphics? Could it not just use a .dat with only title and menu graphics, or just package the menu graphics in the .exe?

=== @ Moosh 11/13/2021 23:21

Even for back in the 1.90 days the way this menu is being handled seems exceptionally silly. The only graphics that should need to be loaded from .qst files is the menu icons, and that's seemingly the only part that didn't break

=== @EmilyV99 (discord: Emily) 11/13/2021 23:24

Fuck if I know
The blue frame now is not loading from that anymore, notice that it doesn't have rounded corners
I just made it a blue rect
but, the entire fucking *palette* is loaded from the qst.dat
which is why it was grey blob before

=== @EmilyV99 (discord: Emily) 11/13/2021 23:28

(game icons have their own palette)
(which is why they weren't broken)

=== @ Moosh 11/13/2021 23:28

Could they not have just loaded the main part of the palette from an array? Also does the 4th quest password load from a different quest or just hardcode change colors?
assuming the latter

=== @EmilyV99 (discord: Emily) 11/13/2021 23:30

```cpp
loadpalset(0,red ? pSprite(spPILE) : 0);```
it loads a sprite palette from the same quest

=== @EmilyV99 (discord: Emily) 11/13/2021 23:42

I am so confused

![image](https://cdn.discordapp.com/attachments/909032712990511175/909226749911527444/unknown.png)
the life meter is just that
and I don't know why
according to it, it's drawing the correct tile, in the correct cset
but then it just isn't

=== @EmilyV99 (discord: Emily) 11/13/2021 23:50

what the fuck color even *is* that?
it isn't in the palette that I can see

=== @EmilyV99 (discord: Emily) 11/14/2021 00:09


![image](https://cdn.discordapp.com/attachments/909032712990511175/909233658773266472/unknown.png)
so I drew the palette to the screen to figure out what the fuck is going on
and wtf
after loading the quest and going *back* to title screen, it instead gave

![image](https://cdn.discordapp.com/attachments/909032712990511175/909233819578667008/unknown.png)
so wtf
that should be the same both times
why is it different

=== @ Moosh 11/14/2021 00:12

Are those funky csets leftover bits of the title screen palette?

=== @EmilyV99 (discord: Emily) 11/14/2021 00:12

....I think I see a problem

![image](https://cdn.discordapp.com/attachments/909032712990511175/909234341194899536/unknown.png)
fixed it
for absolute fucks sake

=== @ Moosh 11/14/2021 00:12

Nice

=== @EmilyV99 (discord: Emily) 11/14/2021 00:12

`//  loadfullpal();`
WHY IN THE ABSOLUTE FUCK WAS THIS COMMENTED OUT
GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH

=== @ Moosh 11/14/2021 00:13

Have you tested with custom quest icons?

=== @EmilyV99 (discord: Emily) 11/14/2021 00:14

no, but it shouldn't matter
those load into special palette rows
and won't overwrite cset fucking 1
and this palette loading occurs when it draws the blue frame

=== @ Moosh 11/14/2021 00:16

Was more wondering if the commented out line would overwrite those in certain circumstances

=== @EmilyV99 (discord: Emily) 11/14/2021 00:16

which is drawn once, at the very start of the title screen, before it draws any icons or loads anything to do with save slots
so anything with save slots should occur after

=== @ Moosh 11/14/2021 00:16

Gotcha

=== @EmilyV99 (discord: Emily) 11/14/2021 00:20


![image](https://cdn.discordapp.com/attachments/909032712990511175/909236226190639104/unknown.png)
all 3 instances of frame now no longer use the qst.dat, and instead just draw a damned rectangle

=== @ Moosh 11/14/2021 00:20

Nice
I barely noticed the difference until you pointed it out too

=== @EmilyV99 (discord: Emily) 11/14/2021 00:21

Technically, I could make it identical, if I used a subbitmap drawing thing and cleared the corner pixels
...frankly, might as well

=== @EmilyV99 (discord: Emily) 11/14/2021 00:27


![image](https://cdn.discordapp.com/attachments/909032712990511175/909237951165235220/unknown.png)

=== @ Moosh 11/14/2021 00:27

side note has anyone ever actually used this name entry menu?

=== @EmilyV99 (discord: Emily) 11/14/2021 00:27

not a clue, it's trash
I had to change to it just to test that it drew correctly

=== @ Moosh 11/14/2021 00:27

Cool that it exists but it's a PC game, lol

=== @EmilyV99 (discord: Emily) 11/14/2021 00:28

well, people use controller
but yeah

=== @EmilyV99 (discord: Emily) 11/14/2021 00:37

Anyway, the bugs here are fixed now
but I'm gonna leave this open so I can remember to try removing all the other shit from using qst.dat
gonna mean hardcoding the title screen palette, the heart meters, the selector icon, etc

=== @EmilyV99 (discord: Emily) 11/14/2021 00:47

(meta) thread name was changed: üíäüîìtitle screen bugginess

=== @EmilyV99 (discord: Emily) 11/14/2021 00:49

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíPolygon missing sanity checks (#1020)
@ Moosh opened this issue on 11/13/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/909036728688476161



=== @ Moosh 11/13/2021 11:07

Pretty simple, draw a polygon to the screen, give it more points than the supplied array allows, ZC hangs and becomes unresponsive

=== @EmilyV99 (discord: Emily) 11/13/2021 11:10

...........fucking really?
wow

=== @EmilyV99 (discord: Emily) 11/13/2021 20:55

oh
fun
so, uh,
it just passes the arguments directly to allegro's `polygon`
and.... allegro's polygon doesn't like giving it more points than the array

=== @EmilyV99 (discord: Emily) 11/13/2021 21:05

@ Moosh see if this fixes it
https://cdn.discordapp.com/attachments/909036728688476161/909187312569704458/zelda.exe
it should, if you give more points than the array holds, reduce the points to what the array holds
so if you give a `[6]` array, but pass `4` for numpoints, it'll pretend you passed `3` instead, as that's the most that fits
also, it'll now do nothing if you give it 0 or negative number of points
given that I saw no sanity check on that either

=== @EmilyV99 (discord: Emily) 11/13/2021 21:21

err wait
I did a stupid
I was backdated to an old build while debugging the title thing and forgot to move forward
so that build will be quite broken
rebuilding now

=== @EmilyV99 (discord: Emily) 11/13/2021 21:26


https://cdn.discordapp.com/attachments/909036728688476161/909192460910092308/zelda.exe

=== @EmilyV99 (discord: Emily) 11/14/2021 00:40

@ Moosh is this fix good?

=== @ Moosh 11/14/2021 00:41

Ah right, lemme go test. Gotta re-make my setup where it was broken before

=== @EmilyV99 (discord: Emily) 11/14/2021 00:41

build doesn't have the title screen fixes
but if it works, nightly build will be posted with both

=== @ Moosh 11/14/2021 00:45

Appears to be working now, yes

=== @ Moosh 11/14/2021 00:46

```ffc script Polygon{
    void run(){
        while(true){
            int vert[22];
            for(int i=0; i<11; ++i){
                vert[i*2+0] = this->X+8+VectorX(24, i*(360/11));
                vert[i*2+1] = this->Y+8+VectorY(24, i*(360/11));
            }
            Screen->Polygon(6, 12, vert, 0x01, 128);
            Waitframe();
        }
    }
}
```
Here's my test script for reference

=== @EmilyV99 (discord: Emily) 11/14/2021 00:46

woo, great
To be fair to whoever implemented this originally, the allegro function itself caused the lock-up
but, sanity checks are important
(meta) thread name was changed: ‚úÖüîíPolygon missing sanity checks
## Candle Flag - Perma-Light Old Dark Rooms Like Z2 (#1021)
@ P-Tux7 opened this issue on 11/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/909692741066293248



=== @ P-Tux7 11/15/2021 06:34

If the player owns a candle item with this flag, NES dark rooms no longer darken. This check is performed BEFORE the game darkens the room, so no darken-then-relight animation has to play. I think this was a classic.zh script but would be REALLY great to have.
## Roc Item Flags (#1022)
@ P-Tux7 opened this issue on 11/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/909697690554736690



=== @ P-Tux7 11/15/2021 06:53

1. https://www.armageddongames.net/showthread.php?97729-Controllable-jump-height
Like this, or as seen scripted in Alucard648's sideview engine
This immediately triggers what happens when you reach the peak of the jump (i.e. you slowly decelerate and then fall)
2. a "usable only once per screen" flag

=== @EmilyV99 (discord: Emily) 11/15/2021 06:55

Smart idea, though may be quite hard to implement
gotta track that you hold the button, and that it was a roc's feather button, so a bunch of global work there

=== @arceusplayer11 (discord: Deedee) 11/15/2021 07:00

This has been in the back of my mind cause it's one of the few things preventing ZC from being really sideview friendly
but I don't know how the math or shit would work lmao

=== @ P-Tux7 11/15/2021 07:01

both zoria and alucard (or grayswandir?) implemented it in script... see how they did it

=== @EmilyV99 (discord: Emily) 11/15/2021 07:01

A script for it could be pretty simple
so, aye

=== @ P-Tux7 11/15/2021 07:02

alucard's played pretty well for what i remembered

=== @EmilyV99 (discord: Emily) 11/15/2021 07:02

to do it in engine though would be much harder
a script can just have a local variable that stays between frames
the engine can't
anything in-engine would need to be handled globally with all sorts of checks

=== @ P-Tux7 11/15/2021 07:02

in the classic tileset i am putting somewhere "ptux's recommended scripts to import"

=== @EmilyV99 (discord: Emily) 11/15/2021 07:02

to remember 1. what button it was 2. that there was a jump button etc

=== @arceusplayer11 (discord: Deedee) 11/15/2021 07:02

(replying to @EmilyV99 (discord: Emily) "to do it in engine though wou‚Ä¶"): aka don't expect it unless Dimi chugs a ton of caffeine and beer and decides to toss her sanity out the window for the 5th time in a month

=== @ P-Tux7 11/15/2021 07:02

this and see also: [#dev-discussion](https://discord.com/channels/876899628556091432/876908472728453161) estoteric enemy additions
sorry
i can certainly keep the TILESET script free but i'd like to be allowed to recommend the importation of scripts to users
if that's not a problem

=== @arceusplayer11 (discord: Deedee) 11/15/2021 07:04

That's not an outright no to having it in-engine though. Just, it may happen but it depends entirely on when I feel like learning mario math.
@ P-Tux7 does SMB have variable jumping? If so, do you know of a decomp of it?
might be helpful.

=== @ P-Tux7 11/15/2021 07:05

ahahahahaha
mario 1 has so many
just google it
zelda 1 also has a very well-commented one
i haven't ever linked them here for legal reasons but they're so easy to find

=== @arceusplayer11 (discord: Deedee) 11/15/2021 07:05

Zelda 1's decomp is a very useful tool that I have yet to start looking at

=== @ P-Tux7 11/15/2021 07:17

y'know. "once per screen" might be a good one too
(meta) thread name was changed: 2 Roc Item Flags

=== @EmilyV99 (discord: Emily) 11/15/2021 07:17

(meta) thread name was changed: Roc Item Flags
## Hover Boots Flags (#1023)
@ P-Tux7 opened this issue on 11/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/909698486621073439



=== @ P-Tux7 11/15/2021 06:57

1. A flag that doesn't auto-hover - you have to press the jump button again while in mid-air. Might be tricky to handle with multi-jumps, sorry.
2. Multi-Use With Multi-Jumps: If checked, you get a new hover for each jump that you get (Roc's Feather multi-jump feature). If not, it only activates once no matter how many times you've jumped.
3. Auto-Hover over Pitfalls - If you have Hover Boots and walk over a pitfall, you auto-hover to stop your fall. I think Ocarina of Time worked like this? It gives similar but more useful functionality to a ladder, even without Roc's Feather. Great for 8-way quests.

=== @EmilyV99 (discord: Emily) 11/15/2021 06:58

So
1. This will be basically impossible thanks to multi-jump
2. This is *sort of* already a thing

![image](https://cdn.discordapp.com/attachments/909698486621073439/909698974175363093/unknown.png)
If you hover until it runs out, it won't reset until you land with that checked
though, if you press Down to cancel the hover, then multi-jump, the timer will resume from where you cancelled it
3. Does this not already happen? I thought that's how I implemented pitfalls....

=== @ P-Tux7 11/15/2021 06:59

```down to cancel the hover```
is this a sideview thing?

=== @EmilyV99 (discord: Emily) 11/15/2021 06:59

err, yes

=== @ P-Tux7 11/15/2021 06:59

(replying to @EmilyV99 (discord: Emily) "3. Does this not already happ‚Ä¶"): Oh, I looked in the GUI for both hover boots and pitfalls and didn't see anything. sorry
also that's awesome

=== @EmilyV99 (discord: Emily) 11/15/2021 07:00

(replying to @ P-Tux7 "Oh, I looked in the GUI for b‚Ä¶"): aye, because it isn't a flag, it's just how pits work

=== @ P-Tux7 11/15/2021 07:00

yo it's even in the tooltip for hover boots class

=== @EmilyV99 (discord: Emily) 11/15/2021 07:17

(meta) thread name was changed: Hover Boots Flags
## Item Flags - Blocked by Solid Combos (#1024)
@ P-Tux7 opened this issue on 11/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/909702145572499517



=== @ P-Tux7 11/15/2021 07:11

The following classes, similar to LTTP or later games, would have options for their projectiles to be blocked by any combo detected as solid. These would run the usual animation when blocked by an enemy, so for example an arrow would have that "tink" thing.
-Arrow (the projectile)
-Boomerang
-Candle (the projectile)
-Cane of Byrna(beam, low priority)
-Din's Fire(this has been postulated to probably not be possible)
-Magic Book (applies to wand fire)
-Sword (the beam)
-Wand (the magic, creates fire if book is owned)
I think Generic Combos have projectile-blocking features, but this would apply to all solid combos, and would check their solidity quadrants.
## Magic Key - Level Item Attribute (#1025)
@ P-Tux7 opened this issue on 11/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/909704510920876032



=== @ P-Tux7 11/15/2021 07:20

A request for the Magic Key to be able to set map status, compass status, and boss key status
if you are in a DMap within its currently-existing level range option.

Attributes:
0: Keys
1: Maps
2: Compasses
3. Boss Keys
The Magic Compass can actually be extremely nifty to do a late-game "treasure hunt" in compassless quests - by giving it to you late in the game and telling you to go look in the rooms indicated by the compass in earlier levels.
The Magic Map mostly just serves as a convenience similar to Z1, but it can be used as an "atlas" item if you have custom dungeon map graphics and give it a range of DMaps to work in.

=== @EmilyV99 (discord: Emily) 11/15/2021 07:23

....using attributes for this sounds terrible
and, a "range"? A range would take 2 attributes per

=== @ P-Tux7 11/15/2021 07:24

The Magic Boss Key is inspired by Liberation of Hyrule, where James24 used the Magic Key to allow for certain lock blocks to be used, and to let you skip certain rooms. This would allow for the usage of normal keys in such a situation. It can also be used to unlock various places all across the game world, separate from normal keys.
(replying to @EmilyV99 (discord: Emily) "and, a "range"? A range would‚Ä¶"): No, it uses the existing Magic Key level range. Basically, you set in an attribute whether it applies to keys, maps, compasses, or boss keys.

=== @EmilyV99 (discord: Emily) 11/15/2021 07:25

oh wait
they already have a level range?

=== @ P-Tux7 11/15/2021 07:25

And it only applies to that one type of map item. You'd need 4 different items to have a complete set here.
yup

=== @EmilyV99 (discord: Emily) 11/15/2021 07:25

So, it would just be a flag for each
no more attributes

=== @ P-Tux7 11/15/2021 07:25

I don't get it - seems like we have a ton of unused attributes for Magic Keys
![image](https://cdn.discordapp.com/attachments/909704510920876032/909705767022632980/unknown.png)

=== @EmilyV99 (discord: Emily) 11/15/2021 07:26

...why not use 4 flags instead?
that way you can check multiple off
and it's easier, not requiring looking up which value does what

=== @ P-Tux7 11/15/2021 07:26

Ah, mm. Didn't want to be wasteful of flags but I guess what else would this class need spare flags for?

=== @EmilyV99 (discord: Emily) 11/15/2021 07:26

exactly
attributes are for when you need wide values
flags are for when you need simple toggles
...and again, even if we needed to expand item flags? That would not be the end of the world

=== @ P-Tux7 11/15/2021 07:27

yeaaaaaaah i forgot that attributes ALWAYS go 0-255, even if only a small range of them do anything in-engine
instead of 0-3 saving room
so flags it is

=== @EmilyV99 (discord: Emily) 11/15/2021 07:28

err

![image](https://cdn.discordapp.com/attachments/909704510920876032/909706368892669952/unknown.png)
they go far higher than 255
## Merge Hero`s status effects vars into single array (#1026)
@ Alucard648 opened this issue on 11/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/909744181726052413



=== @ Alucard648 11/15/2021 09:58

Titla says all. Drunk, jinxed, transformed into bunny etc. This will streamline further adding of new status effects, both built-in and script powered. And maybe reserve 30+ status effects for scripters.
## üíäüîìSCC warp resets music (#1027)
@EmilyV99 (discord: Emily) opened this issue on 11/15/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/909955500047753287



=== @EmilyV99 (discord: Emily) 11/15/2021 23:58

https://www.purezc.net/forums/index.php?showtopic=77325#entry1066838

=== @ P-Tux7 11/23/2021 18:24

bump
obviously this only applies to when it's the same music, screens/dmaps with different music should restart it of course
should probably be a QR fix

=== @ P-Tux7 11/29/2021 20:47

hello???
someone i know needs this for their quest's cutscenes

=== @ P-Tux7 12/07/2021 05:50

Hello?

=== @EmilyV99 (discord: Emily) 12/07/2021 06:00

I'm not even home so
Chill out, bro

=== @EmilyV99 (discord: Emily) 12/07/2021 16:34

have a fix I'm trying to post but at this rate it's going to take like 40 minutes to upload.... internet speed here is shit

=== @EmilyV99 (discord: Emily) 12/07/2021 17:03

@ P-Tux7 try this
https://cdn.discordapp.com/attachments/909955500047753287/917823760151773224/buildpack.zip

=== @ P-Tux7 12/07/2021 19:45

```this fixed the music problem but fucked the warp itself horribly
but it made the screen permanently white```

=== @EmilyV99 (discord: Emily) 12/07/2021 19:45

. . . what the fuck?

=== @ P-Tux7 12/07/2021 19:51

i'm sorry i don't have access to the quest and don't know much about SCCs

=== @ P-Tux7 12/08/2021 00:01

test quest
https://cdn.discordapp.com/attachments/909955500047753287/917928872153067590/FoodBug.qst
try it in your latest build

=== @EmilyV99 (discord: Emily) 12/08/2021 14:58

uhhh
It does do a lot of white in the warp effects
but it also does that in the previous nightly
so that isn't new to this build

=== @EmilyV99 (discord: Emily) 12/08/2021 15:01

....this quest was last saved in A95, so the whiteness could be any number of issues, fun

=== @EmilyV99 (discord: Emily) 12/08/2021 15:12

A98 has no issue

=== @EmilyV99 (discord: Emily) 12/08/2021 15:15

no issue 11/11 nightly

=== @EmilyV99 (discord: Emily) 12/08/2021 15:17

no issue 11/19 nightly

=== @EmilyV99 (discord: Emily) 12/08/2021 15:19

broken 11/28 nightly

=== @EmilyV99 (discord: Emily) 12/08/2021 15:25

bah think it's magic mirrors
fucked something up editing the warp function
yep, I had a true and a false flipped.... fuuun

=== @EmilyV99 (discord: Emily) 12/08/2021 15:29


https://cdn.discordapp.com/attachments/909955500047753287/918162384294654083/zelda.exe
https://cdn.discordapp.com/attachments/909955500047753287/918162384865099796/zquest.exe
@ P-Tux7
should be fixed

=== @EmilyV99 (discord: Emily) 12/08/2021 15:50

(meta) thread name was changed: üíäüîìSCC warp resets music
## ‚úÖüîíScript weapon classes dont use cost (#1028)
@EmilyV99 (discord: Emily) opened this issue on 11/16/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/909956433150349312



=== @EmilyV99 (discord: Emily) 11/16/2021 00:02

https://www.purezc.net/forums/index.php?showtopic=77274

=== @EmilyV99 (discord: Emily) 02/08/2022 12:03

(meta) thread name was changed: ‚úÖüîíScript weapon classes dont use cost

=== @EmilyV99 (discord: Emily) 02/09/2022 15:18

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Items that can ONLY be used as Bunny Link (#1029)
@ Alucard648 opened this issue on 11/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910336243806642186



=== @ Alucard648 11/17/2021 01:11

More Random Fun with this status effect.
## ‚úÖüîíHardcoded Candle Step Speed (#1030)
@ HeroOfFireZC opened this issue on 11/17/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/910402223840849980



=== @ HeroOfFireZC 11/17/2021 05:33

Thinking ahead of a useful feature, there is a curiosity on how Candles set the step speed of the created flames, how hardcoded of a value this is, and if this could be changed so an Attribute of Candle Items is the Step Speed of Candle Flames.
This addition would likely need to include a QR to support current "hardcoded" Candle Flame step speed.
Some advantages to freeing up this hardcoded value is being able to create Candles with no range (sort of like the LttP Lantern flames), or have higher leveled candles shoot flames further.

=== @ P-Tux7 11/17/2021 05:54

this is a feature request

=== @EmilyV99 (discord: Emily) 11/17/2021 05:55

I said to make a bug report for it

=== @EmilyV99 (discord: Emily) 02/08/2022 12:40

Shouldn't need a QR, it seems
there's nothing fancy hardcoded about the candle
it just sets the step speed to 50 in the constructor
so, instead, it can set it to an attribute
(which will default to 50)

=== @EmilyV99 (discord: Emily) 02/08/2022 12:45


![image](https://cdn.discordapp.com/attachments/910402223840849980/940589094436761660/2022-02-08_07-44-51.mp4)
(meta) thread name was changed: ‚úÖüîíHardcoded Candle Step Speed

=== @EmilyV99 (discord: Emily) 02/09/2022 15:18

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ P-Tux7 02/10/2022 07:15

excellent... do any other weapons have hardcoded step speeds?
-sword beams? (though idk if we're outta attributes for those)
-the wand?
-boomerangs?
-the whistle whirlwind?
-the hooks? (though this could get messy if they don't already)
i'll check the item editor tomorrow

=== @EmilyV99 (discord: Emily) 02/10/2022 08:43

Uhh
Most weapons
would
## ‚ùåüîípotion and letter not working (#1031)
@ likelike on fire opened this issue on 11/17/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/910624292566343731



=== @ likelike on fire 11/17/2021 20:15

i never got my problem fixed. I don't know if it is a bug or my error. I posted on the forum about it, and tried everything told to me. so I don't know if that is an error. i tested my game with just giving myself potions, but when i saw I forgot to add where you get the letter, I added the letter and it did not pick up, nor was it able to trade it in to buy potions.

=== @EmilyV99 (discord: Emily) 11/17/2021 20:29

If you can post the quest file so we can take a look

=== @ likelike on fire 11/17/2021 21:08

where do i post it? here?

=== @ likelike on fire 11/17/2021 21:09

this should be it
https://cdn.discordapp.com/attachments/910624292566343731/910637852747005962/180simp.qst

=== @arceusplayer11 (discord: Deedee) 02/08/2022 09:15

I can't find where you get the letter

=== @arceusplayer11 (discord: Deedee) 02/11/2022 07:03

@ likelike on fire I need more info; cause I'm not seeing a letter

=== @ likelike on fire 02/11/2022 10:48

it broke
that is my problem
ok

=== @EmilyV99 (discord: Emily) 02/11/2022 10:49

(replying to @ likelike on fire "i never got my problem fixed.‚Ä¶"): Where did you add the letter?

=== @ likelike on fire 02/11/2022 10:49

i need to open it  because i forgot

=== @ likelike on fire 02/11/2022 10:51

i could of sworn it was not working

=== @ likelike on fire 02/11/2022 11:02

screen 3 e
loooks like i forgot to put something on  screen 0c

=== @ likelike on fire 02/11/2022 11:05

i'm so far behind in what build we're on now

=== @ likelike on fire 02/11/2022 11:13

it's been so long. i had no clue what i was doing

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:22

@ likelike on fire on the subscreen, you have the "item override" for the letter position be the red potion

=== @ likelike on fire 02/11/2022 11:23

i was told to do that

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:23

by who?

=== @ likelike on fire 02/11/2022 11:23

i really don't recall.
but when i was testing i would just give my self a potion
then i realised i had no letter room
then I got it and it stoped working
this was many months ago
so i did all this thigns and sacrificed an item

=== @ likelike on fire 02/11/2022 11:28

i tried what people told me to do, to fix it
and it did not fix

=== @ likelike on fire 02/11/2022 11:32

that is why it is here. because i did everything i was told to do and it did not fix it

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:41

I'm guessing you tried to pick up the level 2 magic potion, drank it, and it turned into a blue health potion?

=== @ likelike on fire 02/11/2022 11:41

no
i really don't know what happend.
potions "worked"

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:42

Well, that's what seems to be happening

=== @ likelike on fire 02/11/2022 11:42

then i saw i had no letter

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:42

(replying to @arceusplayer11 (discord: Deedee) "@ likelike on fire on the‚Ä¶"): turn item override off and you will have your letter (and blue potion) back

=== @ likelike on fire 02/11/2022 11:44

what is the new build?

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:45

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ likelike on fire 02/11/2022 11:45

https://www.purezc.net/forums/index.php?showtopic=76491#entry1058253

=== @EmilyV99 (discord: Emily) 02/11/2022 11:45

(meta) thread name was changed: ‚ùåüîípotion and letter not working

=== @ likelike on fire 02/11/2022 11:46

i need to get into my other youtube i have a hidden video

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:48

@ likelike on fire in the Active Subscreen (the "revision 2 triforce" one), go to the potion/letter item slot
Make sure it is set to "Letter or Potion (Subscreen only)"
this will make it so letters and potions work as they should work
make sure you do this for every subscreen you are using in the quest

=== @ likelike on fire 02/11/2022 11:50

oh.
i wasn't told that

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:50

we were very confused back then
However, your quest has magic potions as well. What you want to happen when you use the Level 2 Magic Potion? Do you want to use the Level 2 Magic Potion and have it turn into a Level 1 Magic Potion? When you use that Level 1 Magic Potion, do you want it to turn back into the letter?

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:52

Also, make sure you have "Item override" turned OFF.

=== @ likelike on fire 02/11/2022 11:54

that is the thing
i added them as an after thought in an attmpt to fix the problem

=== @ likelike on fire 02/11/2022 12:00

i dont feel good right now so this is hard to comprehend
https://www.youtube.com/watch?v=-aaZRd2Zjko&t=3s
oh my god
it's been that long

=== @arceusplayer11 (discord: Deedee) 02/11/2022 12:05

Ah, I see
Yeah, it needs to be "Letter or Potion"
you have it set to "Letter"

=== @ likelike on fire 02/11/2022 12:05

agian, i could of sworn another member told me to put it to letter or potion
but this was in 2020

=== @arceusplayer11 (discord: Deedee) 02/11/2022 12:15

You might have misinterpreted it maybe?
Maybe you thought they were saying "Letter" or "Potion", not "Letter or Potion"

![image](https://cdn.discordapp.com/attachments/910624292566343731/941668865736339496/unknown.png)

=== @ likelike on fire 02/11/2022 12:33

i need to do this later. i have some kind of sickness
## Dodongo class attributes (#1032)
@ P-Tux7 opened this issue on 11/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910653386406383656



=== @ P-Tux7 11/17/2021 22:11

1. Do Not Drop Bomb Item When Killed While Stunned by an Explosion - does not drop the 4 bombs item (whatever ID that is) when killed while stunned by explosion smoke
2. Do Not Drop Super Bomb Item When Killed While Stunned by a Super Explosion - same but for super bomb explosions
3. Do Not Auto-Drop Super Bombs If Killed By Eating One - does not drop (default super bomb item #) if it eats one and this depletes its HP and it dies. So you can't "recycle" the one Super Bomb.
4. Use Choking Frames While Stunned - uses the choking frames while stunned by an explosion. Visual indicator to let you know you can hit it
@arceusplayer11 (discord: Deedee)
(todo: list whatever IDs 4bombs and super bomb are hardcoded to be)

=== @ P-Tux7 11/17/2021 22:13

it might also be worth it to add an option to change its auto-drops by entering an item # instead of them being hardcoded. but that could be costly

=== @ P-Tux7 11/20/2021 00:28

ok so apparently the dodongo drops use hardcoded dropset #s
instead of item #s
## Separation of Fireball and Boss Fireball EWeapons (#1033)
@ P-Tux7 opened this issue on 11/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910654501889912862



=== @ P-Tux7 11/17/2021 22:15

These are separated in shields, but not in the enemy editor. They're hardcoded without scripts setting EWeapon's isbossfireball to true
This would require an extra weapon in the dropdown and a new QR to make it no longer tied to enemy class.
## QR - Combos Are As Sensitive To Explosion Hitbox as Everything Else (#1034)
@ P-Tux7 opened this issue on 11/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910655586419482674



=== @ P-Tux7 11/17/2021 22:20

Combos are less sensitive to bomb explosions than Link and enemies due to this being how Z1 bombable caves worked. But I think this is annoying.
## Manhandla Class (#1035)
@ P-Tux7 opened this issue on 11/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910658110803312640



=== @ P-Tux7 11/17/2021 22:30

Data 2
Speed Increase: how much the below flags use
-Firing Style: Original (every head has its own random rate), In Sync (there is one random rate and every head fires at once), One Head (there is one random rate and a random head is chosen to fire when it's time to fire. Like a Gleeok but with a random rate.)
Flags
-Use New Speed Calculation: starts at Step Speed, and every time a head is destroyed do the following increases
-Speed Increase is Additive
-Speed Increase is Multiplicative
Speed Increases may either be checkboxes or a dropdown.
@arceusplayer11 (discord: Deedee) you will recognize those shooting options from Patras.
## |Items-Enemies| Screen Flag (#1036)
@ FireSeraphim opened this issue on 11/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910743094985646090



=== @ FireSeraphim 11/18/2021 04:07

I see you have an Items->Secrets screen flag and I think it would be cool to have an Items->Enemies screen flag where enemies don't appear until you pick up the item on the screen.

=== @ vlamart 11/18/2021 04:35

Seeing that there are all these combinations of screen flags, and maybe it could also be away to consider tiered secrets, by maybe a menu or tab or something organised like:
Event 1 -> Event 2 = screen state 1
Event 3 -> Event 4 = screen state 2
Event 5...
And the events can be a pull-down with item, secret, trigger, enemies, etc., and the screen state can be a check box. So not only could you do Items->Enemies, but also
Items->Enemies [check]
Enemies->Secrets [check]

=== @EmilyV99 (discord: Emily) 11/18/2021 16:09

Keep in mind that adding more memory usage to screens is something we need to be very careful about
## Generic Combo Can Trigger Screen Secrets (#1037)
@ P-Tux7 opened this issue on 11/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910841592091410452



=== @ P-Tux7 11/18/2021 10:39

yup
i thought deedee already added it?
but i guess not

=== @arceusplayer11 (discord: Deedee) 11/18/2021 11:32

I might've added it!
I have a really bad memory though
I won't be able to dig through the code and check until after I have a nap though, cause code is starting to blur together for me

=== @ P-Tux7 11/20/2021 22:10

oh wait
so it seems that you can set the generic combo to trigger secrets, and for it to be "singular secret" or not
i'll test this soon

=== @ P-Tux7 11/20/2021 22:32

yup, works, thanks, i think this can be closed

=== @arceusplayer11 (discord: Deedee) 11/20/2021 22:37

it actually triggers secrets?
Like completely, not just a specific secret type or only the 16-31?

=== @ P-Tux7 11/20/2021 22:56

well this is a nightmare

=== @ P-Tux7 11/20/2021 22:58

if you have it set to not be always triggered, triggering it doesn't seem to do anything
https://cdn.discordapp.com/attachments/910841592091410452/911752509784223804/triggersecrets1.qst

=== @ P-Tux7 11/20/2021 23:00

but if you set it to always be triggered, it does seem to trigger all room secrets
https://cdn.discordapp.com/attachments/910841592091410452/911752798574637187/triggersecrets2.qst
(forgive me for forgetting to set a secret combo for the bomb-triggered tree, but you'll see it get triggered and disappear in the second quest)
so here we have a tree corner, that when slashed with a sword, should be triggered. it is triggered properly in both quests as you can tell because it goes to the next combo. quest 2 has it be "always triggered". it's triggered there too because it goes to the next combo there too.
but in quest 1, it doesn't trigger any secrets despite triggers secrets being set
but in quest 2 it does trigger all the secrets - secret tiles 0-3 appear, and the bomb and blue candle flags make their respective secret tiles appear
so uh, the idea here is that in quest 1, when manually triggering it, the stuff that happens when it's always triggered in quest 2 should happen

=== @ P-Tux7 11/20/2021 23:06

...wait, is "Triggers Secrets" meaning that triggering that combo should trigger secrets, or that that combo appearing should trigger secrets? it sounds like the first considering always triggering the combo in quest 2 triggers secrets

=== @arceusplayer11 (discord: Deedee) 11/20/2021 23:24

it's weird

=== @ P-Tux7 11/27/2021 02:55

ok so since you're talking about secrets in purezc @arceusplayer11 (discord: Deedee) you might want to look at this again
"secret-triggering x"es would be a really neat thing to have pre-built in tilesets and especially without wasting a flag

=== @arceusplayer11 (discord: Deedee) 11/27/2021 02:59

secret triggering x?

=== @ P-Tux7 11/27/2021 03:13

you know, like something with an inherent secret-triggering combo flag
but using the triggered by... menu
for things more specific than "any weapon" and less specific than "only one type of weapon"
trees, ice, rocks...

=== @arceusplayer11 (discord: Deedee) 11/27/2021 03:21

ohh, yeah

![image](https://cdn.discordapp.com/attachments/910841592091410452/913992957080772648/unknown.png)
Right
I did this

=== @ P-Tux7 11/27/2021 03:51

the test quests above have that checked in both
but it only works in the one where the combo is Always Triggered, not the one where you manually-trigger it
great job so far just a bit more

=== @arceusplayer11 (discord: Deedee) 11/27/2021 04:18

Ahh, okay

=== @EmilyV99 (discord: Emily) 11/27/2021 06:51

The manual trigger of a single flag type needs to allow for fully triggering

=== @arceusplayer11 (discord: Deedee) 11/27/2021 11:21

?
unsure what you mean

=== @ P-Tux7 11/27/2021 17:59

this has nothing to do with flag types
i didnt enter any secret flag type to trigger
i just checked what triggers the combo and that it triggers secrets

=== @EmilyV99 (discord: Emily) 11/27/2021 18:45

oh wait
what combo type is it you're using?

=== @ P-Tux7 11/27/2021 18:53

generic
at least iirc

=== @arceusplayer11 (discord: Deedee) 11/28/2021 13:50

(replying to @ P-Tux7 "but it only works in the one‚Ä¶"): @ P-Tux7 Triggers Secrets appears to work in general
I just checked with sword and triggers secrets checked on an armos combo

=== @ P-Tux7 11/28/2021 20:29

(replying to @ P-Tux7 "if you have it set to not be‚Ä¶"): Ok so, explain this?

=== @arceusplayer11 (discord: Deedee) 12/12/2021 09:17

@ P-Tux7
(replying to @ P-Tux7 "Ok so, explain this?"): I'll take a look at it

=== @ P-Tux7 12/12/2021 11:25

There it is, thank you

=== @ P-Tux7 12/19/2021 01:42

is this in alpha 100 or not

=== @arceusplayer11 (discord: Deedee) 12/19/2021 07:11

Can you check to see if the "triggers secrets" checkbox in the Triggers tab works?
If it doesn't work, can you check if it works for non-generic combos
it's been a while, so I'm unsure if I've fixed it in the meantime. having stuff on my mind

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:06

@ P-Tux7

=== @ P-Tux7 01/01/2022 02:10

check generic combos first?

=== @ P-Tux7 01/01/2022 02:14

well this is certainly something
https://cdn.discordapp.com/attachments/910841592091410452/926659652828160020/triggers1.qst
none combo, triggered by boomerang, triggers screen secrets
however, change it to a Generic combo, and it doesn't trigger screen secrets
https://cdn.discordapp.com/attachments/910841592091410452/926659891542773841/triggers2.qst
oh yeah, is there any way to make hitting it play the secret sound?
if not perhaps that should be the default and it only doesn't play the secret sound if the no secret sounds screen flag is checked

=== @arceusplayer11 (discord: Deedee) 01/01/2022 02:24

hmm

=== @ P-Tux7 02/10/2022 17:42

bump

=== @ P-Tux7 02/10/2022 17:43

still doing the same thing in the latest buildpack with these quests

=== @ P-Tux7 02/10/2022 17:46

or should we move this to bug reports...

=== @ P-Tux7 02/18/2022 06:34

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 02/19/2022 03:46

#1220
## Conveyor in air flag (#1038)
@EmilyV99 (discord: Emily) opened this issue on 11/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910927337263071293



=== @EmilyV99 (discord: Emily) 11/18/2021 16:20

https://www.purezc.net/forums/index.php?showtopic=77332#entry1066886

=== @ Alucard648 11/18/2021 17:30

Does the "Combos Affect Midair Link" cause conveyors to work as requested - affect Link in Midair?

=== @EmilyV99 (discord: Emily) 11/18/2021 17:30

....where is that?

=== @ P-Tux7 11/18/2021 17:33

probably player or combo QRs

=== @EmilyV99 (discord: Emily) 11/18/2021 17:38

oh, its screen flags

=== @EmilyV99 (discord: Emily) 11/18/2021 17:42

affects:
-damage combos
-slow combos
-tall grass/shallow water?
-maybe some warps?
-screen reset combo
and yes, conveyors too

=== @ P-Tux7 11/19/2021 08:37

lemme test this tomorrow
## ‚úÖüîíQR - Rapid-Fire Shot Type Works With Rope Walk Style (#1039)
@ P-Tux7 opened this issue on 11/18/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910977322113454122



=== @ P-Tux7 11/18/2021 19:38

If you set a Rope-walking Walking Enemy to have a Shot Type of Rapid-Fire, it doesn't actually ever fire... despite that shot type not requiring halting. This QR would allow for that. I think this would make Death Knights a whole lot fairer since you would be able to "bait" them and hit them from the side. If this counts as a bug report then let me know and I'll recreate it there.
@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 11/18/2021 19:40

I'll look into it
Emily wants to get Alpha 100 out ASAP, and my computer is on it's last legs and I won't have another one for about 5 days

=== @ P-Tux7 11/18/2021 19:41

np

=== @ P-Tux7 12/10/2021 23:29

lock this - it actually does work in 2.55
i'll check 2.50.2 but i don't think theres a compatibility flag needed, it must have just always worked

=== @arceusplayer11 (discord: Deedee) 12/11/2021 04:46

(meta) thread name was changed: ‚úÖüîíQR - Rapid-Fire Shot Type Works With Rope Walk Style
## Fixed variants of AdjacentCombo functions (#1040)
@ Alucard648 opened this issue on 11/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910979406527352833



=== @ Alucard648 11/18/2021 19:46

```//Fixed variant of AdjacentCombo function from std_extension.zh
int AdjacentComboFix(int cmb, int dir)
{
    int combooffsets[13]={-0x10, 0x10, -1, 1, -0x11, -0x0F, 0x0F, 0x11};
    if ( cmb % 16 == 0 ) combooffsets[9] = -1;//if it's the left edge
    if ( (cmb % 16) == 15 ) combooffsets[10] = -1; //if it's the right edge
    if ( cmb < 0x10 ) combooffsets[11] = -1; //if it's the top row
    if ( cmb > 0x9F ) combooffsets[12] = -1; //if it's on the bottom row
    if ( combooffsets[9]==-1 && ( dir == DIR_LEFT || dir == DIR_LEFTUP || dir == DIR_LEFTDOWN ) ) return -1; //if the left columb
    if ( combooffsets[10]==-1 && ( dir == DIR_RIGHT || dir == DIR_RIGHTUP || dir == DIR_RIGHTDOWN ) ) return -1; //if the right column
    if ( combooffsets[11]==-1 && ( dir == DIR_UP || dir == DIR_RIGHTUP || dir == DIR_LEFTUP ) ) return -1; //if the top row
    if ( combooffsets[12]==-1 && ( dir == DIR_DOWN || dir == DIR_RIGHTDOWN || dir == DIR_LEFTDOWN ) ) return -1; //if the bottom row
    if ( cmb >= 0 && cmb < 176 ) return cmb + combooffsets[dir];
    else return -1;
}
```
Title says all. Original functions from std_extension.zh don`t work well with screen edges.

=== @ Alucard648 11/18/2021 19:49


https://cdn.discordapp.com/attachments/910979406527352833/910980147417587844/adj.zh
## Gohma Attributes Expansion (#1041)
@ P-Tux7 opened this issue on 11/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910989419144695819



=== @ P-Tux7 11/18/2021 20:26

Shot Types:
-1 Shot
-3 Shots
-5 Shots
-Breath

Shot Timing:
-Constant (Z1)
-Only While Vulnerable (Gohma 4)

Flag: Breath Fireballs Count As Boss Fireballs (they're currently hardcoded to be normal fireballs; see also #1033)
## Gleeok Attributes Expansion (#1042)
@ P-Tux7 opened this issue on 11/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/910991224209547264



=== @ P-Tux7 11/18/2021 20:33

Shot Types:
-1 Shot
-3 Shots
-5 Shots
-Breath

Shooting Type:
-Random Head Shoots (default)
-Every Head Shoots In Unison
-Every Head Takes Turns Shooting (may be too hard to implement)

Flag: Fiery Heads Block All (NES accuracy)

Flag: Does Not Create Fiery Heads

Flag: Breath Fireballs Count As Boss Fireballs (they're hardcoded to be normal fireballs; see also #1033)

Flag: Longer Firing Wait (intended to be used for Fire Breath Gleeoks; I'll time how many frames it takes for the breath to disappear later so I can give a number that this should be)

I'm also interested in the "Unsigned Homing" feature request so that fiery heads don't have a chance of cornering Link.
## Wallmasters that dont grab you (#1043)
@ Mitsukara opened this issue on 11/19/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/911067833977421905



=== @ Mitsukara 11/19/2021 01:38

An option for Wallmasters to just do damage (and maybe knockback?) like a regular enemy, while still having the cool wallmaster movement.

Bonus points if the wallmasters can shoot weapons.

=== @ Alucard648 11/21/2021 16:13

I would also add WallMaster(warp) that upon grabbing Link will warp him via side warp, like into pit with insta-death spikes.

=== @ P-Tux7 12/10/2021 23:31

(replying to @ Mitsukara "An option for Wallmasters to‚Ä¶"): seconded it
though idc about weapons

=== @ P-Tux7 12/10/2021 23:45

Wallmaster warp should be a 2-bit flag for
0: Z1 behaviour
1: Tile Warp
2: Side Warp
3: ??? (Reserved? maybe a setting of 3 makes it not grab the player at all?)
And a 2-bit flag for which of the tile/side warp to use
0: A
1: B
2: C
3: D
possibly make this as a dropdown instead of entering a number manually
## Load Theme button in ZC-ZQ (#1044)
@EmilyV99 (discord: Emily) opened this issue on 11/19/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/911088374507507783



=== @EmilyV99 (discord: Emily) 11/19/2021 02:59

Similar to "Load Module", but for ztheme files. Sets the config for the theme so it is remembered.
## Light shapes - Square and (maybe) Flashlight, Octagon and Diamond? (#1045)
@ Mitsukara opened this issue on 11/19/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/911175601627471882



=== @ Mitsukara 11/19/2021 08:46

Darkness light options (for Link's latern and torches/etc) that are:

- squares (probably easy)

- diamonds (rotated squares?)

- octagons (maybe hard)

- flashlights (sorta like the Z3 lantern shape, but longer forward)
(meta) thread name was changed: Light shapes - Square and (maybe) Octagon and Diamond?

=== @ P-Tux7 11/19/2021 08:48

octagons? the shape with eight fantastic sides and eight awesome angles?

=== @ Mitsukara 11/19/2021 08:50

indeed XD
(meta) thread name was changed: Light shapes - Square and (maybe) Flashlight, Octagon and Diamond?
## Percentage Multiplier for Attack Rings (#1046)
@ HeroOfFireZC opened this issue on 11/19/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/911386374756790303



=== @ HeroOfFireZC 11/19/2021 22:44

Works the same as the option for Defense Rings, you enter a damage value of 125, and it translates to 125% damage (or +25% damage). The item rule could apply to an existing damage slot, or a new one added.

=== @ P-Tux7 03/24/2022 07:24

Throwing my hat into this
## ‚úÖüîíPotential ST_VISITED access overlap? (#1047)
@ Moosh opened this issue on 11/20/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/911646590899458059



=== @ Moosh 11/20/2021 15:58

I'm experiencing an issue where calling GetScreenState() is treating screen 3:00 as having been visited after visiting 2:80. I am only reading the state, never writing it, and using the default 2.53 Classic tileset, the one that's 1st Quest. The behavior is the same in 2.55.

=== @ Moosh 11/20/2021 15:59

here's a mostly unchanged default quest. Go to level 1, enter the passage, go to level 7, check the upper left of the spacebar map
https://cdn.discordapp.com/attachments/911646590899458059/911646847351795712/Screen80Bug.qst
Screen 00 and screen 80 are the same on two adjacent maps ü§¶
I am so fed up with ZC right now I can't even

=== @arceusplayer11 (discord: Deedee) 11/20/2021 16:48

Is *that* why that bug happens?

=== @EmilyV99 (discord: Emily) 11/20/2021 20:36

> Emily ‚Äî Today at 3:34 PM
> states don't work on screen 80
> screens 80+ don't exist in some of the arrays
> so, where you'd try to read state for map 1, screen 80
> you would instead get the index of map 2, screen 00
> this is, in all technicality, not a bug
...except wait, *visiting 0x80* is marking the next map's 0x00 as visited in-engine?
or is your script writing the visited state there for some reason?
because, the bug then is that ST_VISITED is being set for an 0x8\* screen

=== @arceusplayer11 (discord: Deedee) 11/20/2021 22:10

(replying to @EmilyV99 (discord: Emily) "...except wait, *visiting 0x8‚Ä¶"): this would explain a bug where screen 0 would be marked in the spacebar map
Like out of nowhere

=== @ Moosh 11/21/2021 00:05

Visiting 0x80 is marking the next map's 0x00, yes. The file I sent has no scripts, at least none I added

=== @EmilyV99 (discord: Emily) 11/21/2021 00:09

ok, yeah, that'd be an issue then
whatever code sets ST_VISITED needs to just not if `currscr > 0x7F`

=== @EmilyV99 (discord: Emily) 02/08/2022 12:48

should be fixed

=== @EmilyV99 (discord: Emily) 02/08/2022 12:50

(meta) thread name was changed: ‚úÖüîíPotential ST_VISITED access overlap?

=== @arceusplayer11 (discord: Deedee) 02/08/2022 23:16

Not actually fixed
just checked, it's still marking them for some reason

=== @arceusplayer11 (discord: Deedee) 02/08/2022 23:24

(assuming you're talking about what's been done before and you haven't just fixed it now, lemme rebuild)

=== @EmilyV99 (discord: Emily) 02/08/2022 23:36

I just fixed it when I posted that

=== @arceusplayer11 (discord: Deedee) 02/08/2022 23:41

Okay yeah
tested it now, it is fixed
sorry for the heartattack

=== @EmilyV99 (discord: Emily) 02/08/2022 23:42

Too stoned to panick its all g

=== @EmilyV99 (discord: Emily) 02/09/2022 15:18

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Zora Flag Is Sideview (#1048)
@ P-Tux7 opened this issue on 11/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/911689030226309120



=== @ P-Tux7 11/20/2021 18:46

This flag makes Zoras spawn 1 tile above water combos if...
1. The combo doesn't have another water combo above it
2. Doesn't have a solid combo above it
## QR -Remap default sword button to B- (#1049)
@ FireSeraphim opened this issue on 11/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/911719971837579285



=== @ FireSeraphim 11/20/2021 20:49

In ALTTP the default button for swing your sword was the B Button and due to recent updates regarding button mapping, ZC finally has enough buttons to mimic the ALTTP button mapping for those quest aiming to mimic ALTTP. It would be ideal to have the freedom to change the default sword button to B for certain quests, although I can forsee some tweaks being required for certain other QRs.

=== @EmilyV99 (discord: Emily) 11/20/2021 20:54

This.... would require rewriting a solid amount of how the subscreen works
so, gonna go with no for that one
unless deedee is insane enough

=== @ P-Tux7 11/20/2021 21:01

i literally map emulators to have my zc a key be sword so yuck
## Ganon Overhaul (#1050)
@ P-Tux7 opened this issue on 11/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/912090639557066853



=== @ P-Tux7 11/21/2021 21:22

Flag: Modern Ganon
```honestly if i had to reprogram ganon i'd just do something like "teleports x amount towards link by drawing a straight line to him and moving along that axis, and shoots, does this ad infinitum until hit, then respawns in random-ish location that won't telefrag link a la summonerobe"```
If the flag is used, his Step Speed is how many pixels each teleport takes him closer to Link.

Flag: Hold Up Triforce: On by default. If on, you'll do the intro cutscene thingy.

Flag: Drops Room Special Item: If on, he drops the room's Special Item instead of the Triforce (Whole). This is actually how it worked in Z1 - that was just his room's item.

Flag: Can Be Stun-Locked: If on, you can do that thing from Z1 where he has a few vulnerable frames between getting hurt once and rando-teleporting. If not, he will be invincible during this time, guaranteeing a rando-teleport.

Attribute: Teleports Per Shot: How many teleports he takes, and on the last one shoots, and resets the counter. This means that if you set it to 3, he'd teleport, teleport, teleport+make fireball, repeat. I realized that if he shot one every time he teleported you couldn't get in to hit him.

Attribute: How Many Death Knells: If more than 1, his HP resets once you shoot him (a la Z1 if you DON'T shoot him), one gets added to this counter, and he restarts his pattern. Once this counter is reached, shooting him will actually kill him. It was 4 in LTTP, for example.

Attribute: Death Knell Weapon Type: What you have to shoot him with to add a Death to his counter while stunned. Arrows by default.

Attribute: Minimum Death Knell Weapon Level: 2 by default.

Attribute: Teleports Per Visible: If you have a Ganon-seeing Amulet, every xth teleport will show him, and then he will hide again until the next xth teleport. (maybe a flag for this happening without an amulet as well?)

=== @ P-Tux7 11/21/2021 21:27

oh yeah, and i have no idea if it's currently hardcoded, but to avoid wasting an attribute let's just say that his stunned cset will be the one after whichever is set for him
so in the ESPs you'd put
-teal ganon
-red ganon
in that order

=== @arceusplayer11 (discord: Deedee) 11/21/2021 21:28

```Flag: Hold Up Triforce: On by default. If on, you'll do the intro cutscene thingy.``` this is tied to the Ganon room type

=== @ P-Tux7 11/21/2021 21:29

oh yeah, and obviously fixin git so that the ganon intro and ganon item ashes door open thingy is - uh
oh well ok then
of course the issue is that if you want a ganon without that you can't right now because... he won't spawn outside a ganon room lol

=== @arceusplayer11 (discord: Deedee) 11/21/2021 21:29

(replying to @ P-Tux7 "of course the issue is that i‚Ä¶"): that's already fixed
as of 1 hour ago

=== @ P-Tux7 11/21/2021 21:31

<:pinch:878676376796930109>
...that's not the ok sign

=== @arceusplayer11 (discord: Deedee) 11/21/2021 21:32

wow
WOW
telling me to "shut up"?
as in "zip it"?
banned!
banned!
get double banned

=== @ P-Tux7 11/21/2021 21:33

i'm too fried and thought it was the ok sign
üëå
like this

=== @arceusplayer11 (discord: Deedee) 11/21/2021 21:33

WOW
you think it's OK to tell me to ZIP IT!?
triple banned!

=== @ P-Tux7 11/21/2021 21:33

yeah you really should be working on ganon some more

=== @ P-Tux7 11/21/2021 21:44

also you're REALLY gonna hate me for this... #1052
it sadly has to be fixed if we want to make Ganon a general, reusable, duplicatable enemy

=== @ P-Tux7 12/29/2021 17:27

Oh, it's just come to my attention that Ganon's explosion sprite is hardcoded in the location where it is on tile page 0. So it probably should be his Special Tile or an attribute.
## BS Zelda Ganon Animation (#1051)
@ P-Tux7 opened this issue on 11/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/912091450110533652



=== @ P-Tux7 11/21/2021 21:25

https://www.spriters-resource.com/snes/bszelda/sheet/157714/
sorry deedee this is gonna be a pain in the ass but this sheet is quite comprehensive with the timings
## üíäüîìGanon Returns Once in Non-Boss Room and Shutters Auto-Open (#1052)
@ P-Tux7 opened this issue on 11/21/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/912095508162568244



=== @ P-Tux7 11/21/2021 21:41

Ok so this is gonna be weird...

https://cdn.discordapp.com/attachments/912095508162568244/912095565163151390/ganonreturns.qst

=== @ P-Tux7 11/21/2021 21:43

Go right and then left to activate the Ganon fight (Ok, this is actually probably a bug in and of itself, isn't it, that the start room [or continue point?] can't initiate a Ganon fight)
Kill Ganon, pick up Triforce, shutter opens, yadda yadda. Go right and then left again.
Notice that he respawns! However, the shutter opens on its own, and he drops no Triforce, only ashes. Go right and then left again.
No more Ganon!
Of note is that this room is NOT a boss room. So this would be of interest to people who don't want Ganon to be the Dungeon Boss.
(meta) thread name was changed: Ganon Returns Once in Non-Boss Room and Shutters Auto-Open

=== @arceusplayer11 (discord: Deedee) 02/14/2022 18:07

Fixed both
(meta) thread name was changed: üíäüîìGanon Returns Once in Non-Boss Room and Shutters Auto-Open

=== @arceusplayer11 (discord: Deedee) 02/16/2022 03:58

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíRupee Lens ??? (#1053)
@ P-Tux7 opened this issue on 11/23/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/912582729386836039



=== @ P-Tux7 11/23/2021 05:57

so uh

https://cdn.discordapp.com/attachments/912582729386836039/912582767945064448/lenswallet.qst
https://cdn.discordapp.com/attachments/912582729386836039/912582768481947699/lenswallet2.qst
i was trying to check if a bug where you could "run out" of rupees to use a rupee-using lens with even if you had the magic wallet still existed
but now i just cannot use the lens with rupees at all. in both quests, the lens is set to use 1 rupee as its cost.

=== @ P-Tux7 11/23/2021 05:59

first quest, start with 10 rupees and magic wallet
second, start with 0 rupees and magic wallet and pick up 10 rupee screen item
can't use it at any time during either
did i mess something up???

=== @ Alucard648 11/23/2021 17:26

Same issue hapeened to a player, who tried to use Lens of truth while wearing Chaos Ring in Link stuck in Castlevania. I fixed that bug by editing Chaos Ring (magic wallet reskin) to give Link full wallet of rupees.

=== @ P-Tux7 11/23/2021 18:08

oh, i know the bug is in 2.50.2
i was checking to see if it got fixed now
but now the bug is that i cannot seem to use a lens that uses rupees at all

=== @ P-Tux7 11/25/2021 04:04

really needs to be investigated before alpha 100
because this applies to *newly-created and played* 2.55 quests

=== @EmilyV99 (discord: Emily) 11/25/2021 04:23

(replying to @ P-Tux7 "but now i just cannot use the‚Ä¶"): so you are saying that in the first quest here you can't use the lens?
because, uh
....can't replicate that issue
it works fine for me

=== @ P-Tux7 11/25/2021 04:23

ok, time to test it in the very latest one that was released since i made it
i swear i made and tested it in the latest version that existed at the time

=== @EmilyV99 (discord: Emily) 11/25/2021 04:24

unless you were testing on a version literally years old there should be no changes

=== @EmilyV99 (discord: Emily) 11/25/2021 04:30

did you download a fresh build and forget to rebind your controls, perhaps? That's the only thing I could think of

=== @ P-Tux7 11/25/2021 04:31

perhaps, though a and b worked in the same build because i was able to defeat ganon in another test quest in that build which requires those buttons
i'll try again tomorrow
sorry if it was a false alarm

=== @ P-Tux7 11/27/2021 21:21

so should i try again in the new build

=== @EmilyV99 (discord: Emily) 11/28/2021 04:09

yes

=== @EmilyV99 (discord: Emily) 02/07/2022 10:05

@ P-Tux7

=== @ P-Tux7 02/10/2022 16:57

fuck, it still doesn't work in these quests
what's going on?!?
the lens is specifically powered by rupees in its action tab
you start with the magic wallet and can find 10 rupees sitting there (in case of that old bug i'm unsure was fixed if you could "run out" of rupees for the lens even with a magic wallet)

=== @EmilyV99 (discord: Emily) 02/10/2022 22:11

I'm still able to use the lens 100% fine in the first quest posted here

=== @arceusplayer11 (discord: Deedee) 02/11/2022 10:37

what the fuck
I'm able to use the lens in both of them
that's not a good sign
if it's inconsistent, that either means something really obscure with configs, or something accessing memory that it shouldn't

=== @ P-Tux7 02/14/2022 20:56

Okay, both of these quests work in the latest build without re-saving them or anything
I think I was being dumb and not realizing that the new builds use Alt as the B-Button by default instead of what I had set it to in 2.50.2...?

=== @arceusplayer11 (discord: Deedee) 02/14/2022 21:09

ahhhh
But just to confirm, you can no longer run out of rupees while you have infinite rupees with the lens?

=== @ P-Tux7 02/14/2022 21:20

correct

=== @arceusplayer11 (discord: Deedee) 02/14/2022 22:27

alright
(meta) thread name was changed: ‚úÖüîíRupee Lens ???

=== @EmilyV99 (discord: Emily) 02/15/2022 03:16

(replying to @ P-Tux7 "I think I was being dumb and‚Ä¶"): Eww, I use literally none of the default controls
(Makes it obvious when I forget to set controls in a new build because I would fail to open a quest as my Start is different)

=== @arceusplayer11 (discord: Deedee) 02/15/2022 11:59

we should probably update the default controls

=== @EmilyV99 (discord: Emily) 02/15/2022 12:08

I dare not, as I know mine are weird
you can feel free too
`/output/config/zc.cfg`
and also make sure to change the default value in the `zc_get_config` calls in the source
## Combo alias editor rework (#1054)
@ Moosh opened this issue on 11/24/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/912933080992469053



=== @ Moosh 11/24/2021 05:10

Bit of a longshot here, but some parts of the combo alias menu simply put could do a bit better. In particular I'm thinking of the organization button that has you copy individual aliases by entering the numbers of the source and destination. Ew

![image](https://cdn.discordapp.com/attachments/912933080992469053/912933098654662666/unknown.png)

=== @ Moosh 11/24/2021 05:12

A visual menu similar to the large combo table screen would be ideal, giving a bigger view of the alias list, allowing more natural copy/paste/move operations, ect

=== @EmilyV99 (discord: Emily) 11/24/2021 05:12

That'll be a MASSIVE rewrite

=== @ Moosh 11/24/2021 05:12

As I figured
Just recording my thoughts here for the future

=== @EmilyV99 (discord: Emily) 11/24/2021 05:12

Keep in mind that the tile/combo page menus are *not* guis
they are hardcoded bullshit

=== @ Moosh 11/24/2021 05:13

yup
For a stopgap, would giving aliases a right click context menu be possible?
Like what the combo tables have but with edit/copy/paste
![image](https://cdn.discordapp.com/attachments/912933080992469053/912934220505165854/unknown.png)

=== @EmilyV99 (discord: Emily) 11/24/2021 05:15

not a clue

=== @ Moosh 11/24/2021 05:15

¬Ø\_(„ÉÑ)_/¬Ø

=== @ Moosh 11/24/2021 05:16

Also the third thing that bothers me with this menu is that you can map blocks of tiles to combos but not blocks of combos to aliases. Despite them more often being placed next to each other, you have to assign one at a time
Be nice if the alias editor allowed shift click. Once again I assume hardcode bullshit

=== @EmilyV99 (discord: Emily) 11/24/2021 05:17

aliases are ass

=== @ Moosh 11/24/2021 05:17

Yup
But you brought this upon yourself by recommending a new user use them and reminding me that this awful menu existed üòÑ

=== @ P-Tux7 11/25/2021 06:42

true, i do have to add some combo alises for things like z1 dungeon entrances and eyeball+signpost NPCs
## New passive item = Protect Bell (#1055)
@ FireSeraphim opened this issue on 11/24/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/913210750095458304



=== @ FireSeraphim 11/24/2021 23:33

I notice you guys are kinda on a roll with new item implementation lately and I think I got one that I think would work great in classic styled quest. The Protect Bell from Terranigma. It would be a passive item that rings when you choose the correct direction in a maze path screen, similar to how it originally worked in Terranigma

=== @ FireSeraphim 11/24/2021 23:35

A video that demonstrates the Protect Bell in it's original source game: https://youtu.be/G7N930A4pUo?t=28

=== @arceusplayer11 (discord: Deedee) 11/28/2021 03:31

I'll look into this

=== @ FireSeraphim 12/01/2021 19:52

Any progress on this little thing?

=== @arceusplayer11 (discord: Deedee) 12/01/2021 20:30

No, because it's not a priority

=== @arceusplayer11 (discord: Deedee) 12/01/2021 20:56

And we need to get Alpha 100 out

=== @ FireSeraphim 12/02/2021 01:05

Aye

=== @ P-Tux7 02/25/2022 22:42

Suggestions:
-"Error" sound as well for when the wrong path is picked and the maze resets, similar to Super Mario All-Stars. Does not play when using the "maze exit" (i.e. East in Z1 Lost Woods)
-Flag: Also Play Success Sound When Maze Solved (if set to off, only the screen secret sound plays a la normal Z1. If set to on, the success chime of the item plays in addition to the screen secret sound.)
Huh do mazes use their maze screen or destination screen secret sound... I need to test it

=== @ P-Tux7 02/25/2022 22:44

(I'm not planning on using Z1 mazes, but I figured this could use a more detailed spec for the implementation)

=== @ FireSeraphim 03/27/2022 15:29

Still holding out for this one.

=== @ FireSeraphim 07/22/2022 09:12

bump
## Extra Lens of Truth flags -  Mask of Eyes like behaviour (Ys I Ancient Ys Vanished) (#1056)
@ FireSeraphim opened this issue on 11/24/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/913214929467748372



=== @ FireSeraphim 11/24/2021 23:50

I would like to have the option to faithfully emulate the behavior of the Mask of Eyes as flags for the Lens of Truth (In YS 1: The Mask of Eyes causes the world to be rendered in grey-scale and hides enemies on screen but still reveals hidden passages and hidden items). This would be ideal for an alternate early game tier version of the Lens of Truth.

=== @ FireSeraphim 11/24/2021 23:53

A video demonstrating the Mask of Eyes, please keep in mind the guy in this video is fighting a boss with the Mask of Eyes on as a self imposed challenge: https://youtu.be/DSA_sDbVABI

=== @arceusplayer11 (discord: Deedee) 11/28/2021 03:32

Might be able to do this

=== @arceusplayer11 (discord: Deedee) 11/29/2021 15:31


![image](https://cdn.discordapp.com/attachments/913214929467748372/914901433927729172/unknown.png)
That's that part down

=== @arceusplayer11 (discord: Deedee) 11/29/2021 15:33

I'm not sure of a good way to make everything grayscale without also making the subscreen grayscale

=== @ FireSeraphim 11/30/2021 02:56

That's a nice step in the right direction at least.

=== @ FireSeraphim 03/27/2022 15:29

What happened to this one?

=== @EmilyV99 (discord: Emily) 03/28/2022 01:50

no pallette stuff by script has been done
you can do greyscale already, just, it *will* affect the subscreen
## ‚úÖüîísideview room 80 link doesnt grab ladder (#1057)
@ tim opened this issue on 11/27/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/914250043530297424



=== @ tim 11/27/2021 20:23

Alpha 99 current
link doesnt grab the ladder while coming into room 80 for secret item
link just falls down to the floor, like a cliff jump
default gravity, sideview gravity on

![image](https://cdn.discordapp.com/attachments/914250043530297424/914250256705785897/unknown.png)
this rule required or link can't traverse down the ladder at all

=== @ tim 11/27/2021 20:25

without rule it forces you upwards to the previous screen

=== @EmilyV99 (discord: Emily) 11/27/2021 20:28

@arceusplayer11 (discord: Deedee) halp

=== @arceusplayer11 (discord: Deedee) 11/28/2021 02:51

wtf

=== @arceusplayer11 (discord: Deedee) 11/28/2021 02:54

oh, I see the context
just needs to put a "grab ladder" whenever you enter a sideview screen

=== @EmilyV99 (discord: Emily) 11/28/2021 04:08

I thought that existed
also why does it walk off the top of the screen if it isn't new hero movement?
is it doing the stepforward code to step forward by 2 tiles?

=== @arceusplayer11 (discord: Deedee) 11/28/2021 05:07

I presume so
Which is weird
I need to look into it

=== @ tim 11/28/2021 05:17

its doing the dungeon step
up cause it thinks its collision below

=== @arceusplayer11 (discord: Deedee) 11/28/2021 05:18

ooof

=== @arceusplayer11 (discord: Deedee) 02/07/2022 02:04

Fixed, I'm pretty sure
(meta) thread name was changed: ‚úÖüîísideview room 80 link doesnt grab ladder
## Raft Attribute Draw Over Link (#1058)
@ P-Tux7 opened this issue on 11/28/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/914404364393775154



=== @ P-Tux7 11/28/2021 06:36

Inspired by the Deku Leaf, Minish Cap tornado hat thing, and Ballad of a Bloodline. Item class flag/attribute.

=== @ P-Tux7 11/28/2021 06:37

Though wait, I think I need to see if rafts can animate and if they're auto-flipped with the ladder auto-flip rule enabled.
## Completed rooms checkmark (#1059)
@ Chadward Chaddington the 143rd opened this issue on 11/29/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/914767511394856962



=== @ Chadward Chaddington the 143rd 11/29/2021 06:39

i think it'd be cool and alot easier to keep up with more complex work if you could just add checkmark to the editor window for that screen just so you know everything you've done on that is complete!

=== @ P-Tux7 11/29/2021 07:48

honestly it really never is

=== @ Tsunami Tommy Reload the Shotty 11/29/2021 16:36

A very, VERY lazy thing to do to simulate that feature is to create a fully walkable normal boring new combo that looks like a series of extremely visible check-mark shaped colors and such, and put it on a transparent layer of each screen.

When it's time to ship the quest out, all you have to do is go that combo and remove the graphics and animation from it.  The combo will still technically be there on those screens that you know are done, but no one will see it.  If you want to do more work on it, give that combo back its graphics so you'll see that big annoying highly-visible checkmark everywhere on screens you're happy with.

=== @ Tsunami Tommy Reload the Shotty 11/30/2021 14:04

Yes.
## View checkbox to highlight FFC hitboxes (#1060)
@ Moosh opened this issue on 11/30/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/915283068330315826



=== @ Moosh 11/30/2021 16:48

So you know how we've all gotten used to changers being shown by a little flashing pixel in the upper left? That's a little strange isn't it? It can be a little hard to see at times. But also a lot of scripts run off an invisible FFC. It's tradition to hide those in the upper left corner, but it's still easy to lose track of them. So what I'd propose is a checkbox under the View dropdown that makes all FFCs more visible, drawing rectangular hiboxes around them.

=== @EmilyV99 (discord: Emily) 11/30/2021 20:55

This is really smart

=== @ Alucard648 12/01/2021 09:10

Also clicking on FFC script list entry at the top left corner of editor should highlight FFC`s actual position and doubleclick opens FFC in editor.

=== @EmilyV99 (discord: Emily) 12/01/2021 10:16

this is also really smart

=== @ Moosh 12/01/2021 11:11

That's a smart idea, though it'll cause a little bit of trouble for me when my scripts with long and goofy-ass names that reach across the screen start obstructing things

=== @ Moosh 12/01/2021 11:14

Also should maybe be disabled in small mode because there script names actually do fairly frequently cover portions of the screen. Portions where nothing much is happening but still enough for it to get irritating

=== @EmilyV99 (discord: Emily) 12/09/2021 04:09

Frankly it would make most sense to just draw a button to the left of the name
## ‚úÖüîíMake All Empty Combos Have Effects Dialog (#1061)
@ P-Tux7 opened this issue on 11/30/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/915325470386561034



=== @ P-Tux7 11/30/2021 19:36

title @EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 11/30/2021 20:55

üëç

=== @ P-Tux7 11/30/2021 21:47

er that is to say, all four effect squares should be checked (every quadrant has an effect)

=== @EmilyV99 (discord: Emily) 12/08/2021 17:50

was added, `Tools->Fix Tools->Effect Square Fix`
(meta) thread name was changed: ‚úÖüîíMake All Empty Combos Have Effects Dialog
## ‚ùåüîíLink Hover Timer Should Reset Upon Continue (#1062)
@ P-Tux7 opened this issue on 11/30/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/915374493311062027



=== @ P-Tux7 11/30/2021 22:51

@EmilyV99 (discord: EmilyV) for the record

=== @EmilyV99 (discord: Emily) 12/07/2021 19:30

what exactly were the details on this again?

=== @ P-Tux7 12/07/2021 19:51

i recall that the hover boots timer didn't properly reset upon continuing
i.e. if you continued while hovering over a pitfall you'd still be in hover mode for a bit
original video of the glitch: https://discord.com/channels/129399825342005250/297553638925008896/915364008595431464
deedee says it's "at the end"

=== @EmilyV99 (discord: Emily) 12/07/2021 19:55

Oh eww
No, that's a terrible way to fix this
#deleted-channel is the way to fix this

=== @EmilyV99 (discord: Emily) 12/09/2021 04:07

(meta) thread name was changed: ‚ùåüîíLink Hover Timer Should Reset Upon Continue
## QR - Cleared Boss Rooms Kill Non-Beatable Enemies (#1063)
@ P-Tux7 opened this issue on 12/04/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/916826880391401583



=== @ P-Tux7 12/04/2021 23:02

This has two components:
1. Killing all beatable enemies in a boss room makes all the non-beatable enemies disappear as well
2. The non-beatable enemies will not spawn when any boss room on the current DMap is entered. This is similar to and in addition to how, currently, beatable enemies do not spawn if the room is a boss room and the boss room cleared flag is true.

This is to allow for boss rooms with hazards like statues, traps, Zoras, and Bubbles, but that do not unfairly kill or jinx the player after the boss dies or should they return to the boss room.

=== @EmilyV99 (discord: Emily) 12/04/2021 23:04

@arceusplayer11 (discord: Deedee)
## QR Killing All Enemies Kills All EWeapons (#1064)
@ P-Tux7 opened this issue on 12/04/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/916827196532871240



=== @ P-Tux7 12/04/2021 23:03

This kills all EWeapons once the conditions for an enemy room clear (all beatable enemies are dead) is true. This prevents enemies or bosses from killing you after you thought you successfully cleared the room.

=== @EmilyV99 (discord: Emily) 12/04/2021 23:04

@arceusplayer11 (discord: Deedee)
## Boomerang returns when button pressed, extra boomerangs (#1065)
@ Mitsukara opened this issue on 12/05/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/916851594774081617



=== @ Mitsukara 12/05/2021 00:40

Options for boomerangs to:

1. Set their deadstate to return (WDS_BOUNCE, I think?) when you push the button

2. Spawn additional boomerangs (up to a set number) when you push the button again. This would probably override the above feature until you've thrown your last available boomerang.

=== @ Mitsukara 12/05/2021 02:09

This same deadstate idea could apply to the hookshot, too. (Press the button to make the hookshot stop early)
## üíäüîìSettable maximum fires for candle (#1066)
@ Mitsukara opened this issue on 12/05/2021

Status: needs-testing

Labels: ['feature', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/916851894083809311



=== @ Mitsukara 12/05/2021 00:42

Currently I think the candle allows 2 fires onscreen at once. Could this number be adjusted in the item editor to create more / less fire?

=== @EmilyV99 (discord: Emily) 12/07/2021 20:42


![image](https://cdn.discordapp.com/attachments/916851894083809311/917878641814298644/unknown.png)
Sooooo
Max number of fire weapons onscreen at once
and also, `Once Per Screen` is now `Limited Per Screen`
able to set a max limit per screen
so you could, say, make a candle that can be used 5 times max per screen

=== @EmilyV99 (discord: Emily) 12/07/2021 20:44

also, if you had multiple candles that were once per screen before, it was once TOTAL, not once EACH
that's no longer the case, on a rule

=== @EmilyV99 (discord: Emily) 12/07/2021 22:25

(meta) thread name was changed: üíäüîìSettable maximum fires for candle
## ‚ùåüîíOne More Tile Page (#1067)
@ P-Tux7 opened this issue on 12/07/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/917827358172528690



=== @ P-Tux7 12/07/2021 17:18

I recall that Zoria incorrectly implemented the combo page expansion and that there's actually room for one more. Is this true?

=== @EmilyV99 (discord: Emily) 12/07/2021 17:43

combo pages weren't expanded

=== @ P-Tux7 12/07/2021 19:53

oh maybe it was *tile* pages then
(meta) thread name was changed: One More Tile Page

=== @EmilyV99 (discord: Emily) 12/08/2021 15:54

Another tile page would be too much by 11 tiles, not quite enough room
(meta) thread name was changed: ‚ùåüîíOne More Tile Page

=== @ P-Tux7 12/08/2021 16:34

oh mm
i believed it because zoria fucking something up sounded believable
## QR or Item Setting Hover Boots Hover Over Drowny Liquids (#1068)
@ P-Tux7 opened this issue on 12/08/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/918195806627037194



=== @ P-Tux7 12/08/2021 17:42

In the same manner as pitfalls. Does not happen if you have a ladder, are rafting, or have flippers.
(meta) thread name was changed: QR or Item Setting Hover Boots Hover Over Drowny Liquids
also does not apply to the land/shallow water part of the liquid combo, just the drowny part
## Statue Combo Class Expansion (#1069)
@ P-Tux7 opened this issue on 12/09/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/918346208647479376



=== @ P-Tux7 12/09/2021 03:39

Note: I presume this would work like the Conveyor combo extension where if you check a flag, they all run the same code. Making the Left, Center, and Right Statues functionally the same class
Rename the combo type: Spawn Enemy/Shooter

=== @arceusplayer11 (discord: Deedee) 12/09/2021 03:41

Already planned
I want to do an entire overhaul of this combo
let you choose what weapon it fires, what direction or angle or if it's aimed, how many it fires, how often, the chance for it to fire
etc

=== @arceusplayer11 (discord: Deedee) 12/09/2021 03:43

Also let it be attached to FFCs and have the enemy move around with the FFC if it doesn't already do that

=== @ P-Tux7 12/09/2021 03:46

Attributes:
-Is New (flag, tells it to use these new properties)
-What enemy to spawn (0-511)
-Spawn type (Instant, Puff [default Z1 puff], Blink [Armos/Grave Ghini], Use Enemy's Spawn Animation [for if the user, well, set a custom spawn animation that they want it to use])
-Spawn Offset X (-256-255 should be enough for scriptless users)
-Spawn Offset Y
-Requires Screen To Have Shooting Statue Screen Flag To Spawn (as the title says. Most users would want this off for convenience. But it's required for compatibility, and scripters can use it to do a sneaky quick difficulty increase by having the hard difficulty mode set the Statues Shoot screen flag to always be on, and have some statue combos only shoot if that flag is on aka in hard difficulty.)
I was reminded of this with the #deleted-channel discussion. It would be nice to be able to always spawn an enemy in a certain spot when you enter the room so you always have something to switch spots with.
And of course, custom (the default ZC projectile-shooter enemies now as combos) and scripted npc statue combos.
So one doesn't have to waste room enemy slots or FFC slots to spawn statues other than fireball.

=== @ P-Tux7 12/09/2021 04:04

(replying to @arceusplayer11 (discord: Deedee) "let you choose what weapon it‚Ä¶"): i wonder if those settings should be reserved for the enemy
(replying to @arceusplayer11 (discord: Deedee) "Also let it be attached to FF‚Ä¶"): i don't believe it does at least for statues with pushblock flags

=== @arceusplayer11 (discord: Deedee) 12/09/2021 04:05

(replying to @ P-Tux7 "i wonder if those settings sh‚Ä¶"): I feel like combos makes more sense
Cause then you can just only have one enemy
but multiple combos

=== @ P-Tux7 12/09/2021 04:06

at the same time, altering those settings via script would either require sending commands to both the combo and npc script to update the mutually-exclusive combo and npc properties, or having them communicate

=== @arceusplayer11 (discord: Deedee) 12/09/2021 04:06

NPC would always be reading off the combo

=== @EmilyV99 (discord: Emily) 12/09/2021 04:06

. . . why would you need to update it on both?
the combo spawns the enemy as soon as the screen is entered
so either you modify the spawned enemy
or you modify the combo for the whole quest
I don't see much need to do both

=== @ P-Tux7 07/17/2022 16:47

Yoo #2 got added! I never saw it in the patch notes... did I miss it?

=== @EmilyV99 (discord: Emily) 07/17/2022 16:48

...are you sure that wasn't added before you requested it?
I feel like Zoria did that

=== @ P-Tux7 07/17/2022 16:50

wait never mind, someone mistook armos combo for statue combo
i'll double-check later today
he did indeed add customizable armos enemy IDs
but what i mean is like, the shooting fireball statues
you have all these shooter-type enemies in the default tileset but you have to waste screen enemy slots on them and place them via flags, blegh right?

=== @EmilyV99 (discord: Emily) 07/17/2022 16:57

ah, yeah, I see
## Magic Mirror - Location on Passive Subscreen (#1070)
@ P-Tux7 opened this issue on 12/09/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/918364755796836412



=== @ P-Tux7 12/09/2021 04:53

So you know that thing where there's the CSet 6 dot on the overworld/dungeon map showing which screen that Link is on? That but for the magic mirror's placed return portal, like how you can see it on the map in LTTP. Probably should use a Misc. Color

=== @ Alucard648 12/09/2021 13:38

All subscreen related requests are now automatic red light. Unfortunately, subscreens in ZC is total shit and it requires complete rewriting, which will take ages.

=== @ P-Tux7 12/09/2021 15:25

well it's not part of the subscreen editor so i assumed it would be different
## Block Weapon combo type (#1071)
@EmilyV99 (discord: Emily) opened this issue on 12/09/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/918371438589804564



=== @EmilyV99 (discord: Emily) 12/09/2021 05:20

Combo type that uses the Triggers tab to select weapons that die when they touch it. Similar idea to `Block All`, but configurable to specific things. @arceusplayer11 (discord: Deedee) ?

=== @arceusplayer11 (discord: Deedee) 12/09/2021 05:42

Yeah, I'll look into this

=== @ P-Tux7 03/03/2022 01:08

mayhaps a flag on the block all combo ITSELF to respect checked/unchecked weapon types instead of a new combo
so we don't add an unnecessary combo type

=== @EmilyV99 (discord: Emily) 03/03/2022 01:09

...or a "kills weapons" trigger flag, which would then work alongside the others
Then even a none combo could block stuff
Or, say, have a pound combo that blocks arrows
## ‚úÖüîíWhat the heck even happens when you drag an FFC off the screen? (#1072)
@ Moosh opened this issue on 12/09/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/918427242848194560



=== @ Moosh 12/09/2021 09:01

So here's one of those buggy blind spots I recently noticed. When moving FFCs around in the editor, they get caught along the edges of the screen despite being able to be positioned out of bounds. Then when you release it, it gets placed at a random-ass position. So for example, I dragged one off the top of the screen and it got flung to 189, 247. It's like the Y value when being dragged was a byte and it underflowed. Oh fuck that's exactly what's happening isn't it?
Anyways, this is one of those editor quirks I've just sorta gotten used to, but it probably is a bug the more I look at it

=== @EmilyV99 (discord: Emily) 02/08/2022 12:55

Pahhahaha yeah that's exactly what's happening
should be fixed (now will bound it within the screen)
same code used for several things `dragging`, like blue squares and such

=== @EmilyV99 (discord: Emily) 02/08/2022 12:59

(meta) thread name was changed: ‚úÖüîíWhat the heck even happens when you drag an FFC off the screen?

=== @EmilyV99 (discord: Emily) 02/09/2022 15:18

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## üíäüîìExtra bitmap DrawScreen functions borked? (#1073)
@ Moosh opened this issue on 12/09/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/918451995533258774



=== @ Moosh 12/09/2021 10:40

A while back I recall Zoria added a bunch of strange functions that drew screen combo data to a bitmap as color data, supposedly for use with scrolling systems. I figured it'd be handy to use this to autogenerate a solidity minimap for something aaaaaaaaaand they don't fucking work at all.
These ones for reference
https://cdn.discordapp.com/attachments/918451995533258774/918452181231865876/message.txt

=== @ Moosh 12/09/2021 10:43

The main one I tried was DrawScreenSolid. It worked for map 29 but arbitrarily not for map 28. I have no idea what map number had to do with it, but 28 did not match that map's solidity map at all. I also tried both the  DrawScreenComboFlags and DrawScreenComboIFlags functions, neither of which seemed to work, once again on map 28

=== @ Moosh 12/09/2021 10:46

...But once again, they seem to work on map 29. So I seem to be narrowing in on some kind of cause

=== @EmilyV99 (discord: Emily) 12/09/2021 15:47

Fuuun

=== @arceusplayer11 (discord: Deedee) 02/07/2022 10:04

ooof, right
this
@ Moosh got any test quests where the issue exists?

=== @arceusplayer11 (discord: Deedee) 02/07/2022 22:48

oh shit oh fuck
it's crashing the ffc script after a while
that's not good...
oh
oh I see
I'm just a bitmap brainlet lmao

=== @arceusplayer11 (discord: Deedee) 02/07/2022 22:50

Apparently you have to Free it manually, you can't just treat it like other variables...

=== @arceusplayer11 (discord: Deedee) 02/08/2022 00:02

@ Moosh okay, so I think I already know the answer
but just gonna ask: did the screens in question where it didn't work have a layer assigned?
and the ones where it did work not have any layers

=== @ Moosh 02/08/2022 00:03

Oh yeah, sorry I forgot to get back to you on that earlier

=== @ Moosh 02/08/2022 00:05

Believe so yes. Specifically 28 was a game map and 29 was one of its layer maps

=== @arceusplayer11 (discord: Deedee) 02/08/2022 00:05

yeah then that's the problem
```DrawScreenComboFlags and DrawScreenComboIFlags functions, neither of which seemed to work, once again on map 28``` I'm weirded out that these are inverted

=== @ Moosh 02/08/2022 00:06

So what's going on with this then? Layers on the screen causing some kind of offset on what data it's reading?

=== @arceusplayer11 (discord: Deedee) 02/08/2022 00:08

the layer draws were basically overwriting the draws of the layer 0 draws

=== @arceusplayer11 (discord: Deedee) 02/08/2022 00:09

so layer 1 would just replace whatever layer 0 had drawn with it's own shit, even if there's nothing on layer 1
because the bitmaps weren't being masked

=== @ Moosh 02/08/2022 00:09

ohh

=== @EmilyV99 (discord: Emily) 02/08/2022 00:10

also, the very way this is set up won't work AT ALL for anything but solidity
all of the flag versions won't work

=== @ Moosh 02/08/2022 00:10

That's fucking wacky

=== @arceusplayer11 (discord: Deedee) 02/08/2022 00:11

Going to deprecate/rewrite the ones that aren't DrawScreenSolid

=== @ Moosh 02/08/2022 00:11

Why would he even use DrawScreen as the basis when writing these instead of DrawLayer ü§¶

=== @EmilyV99 (discord: Emily) 02/08/2022 00:11

the problem is, what if position 0 has a flag on layer 0 and layer 1?
it would only show layer 1's
because it COVERS layer 0's
very fun times

=== @arceusplayer11 (discord: Deedee) 02/08/2022 00:13

(replying to @ Moosh "Why would he even use DrawScr‚Ä¶"): hell if I know

=== @arceusplayer11 (discord: Deedee) 02/08/2022 02:56

Fixed with a QR

=== @arceusplayer11 (discord: Deedee) 02/08/2022 06:31

https://cdn.discordapp.com/attachments/897976431634677841/940486793621557258/buildpack.zip
Has both this + fixed combo scripts (hopefully)
(meta) thread name was changed: üíäüîìExtra bitmap DrawScreen functions borked?

=== @EmilyV99 (discord: Emily) 02/13/2022 05:21

@ Moosh [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Quest Rule - LWeapon Whirlwinds Dont Despawn On-Screen (#1074)
@ P-Tux7 opened this issue on 12/09/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/918600832843411456



=== @ P-Tux7 12/09/2021 20:31

A small QR to fix the visual weirdness that happens when an LWeapon whirlwind hits the edge of the screen and just disappears. This makes it stay alive for a few frames longer until it has smoothly scrolled off the screen.

=== @arceusplayer11 (discord: Deedee) 12/10/2021 01:54

@ P-Tux7 do you have BS-Zelda Animation disabled?

=== @ P-Tux7 12/10/2021 03:00

ah yeah that'd do it
## üíäüîìCSet 8 (Red)9 Keese Should Be Faster (#1075)
@ P-Tux7 opened this issue on 12/10/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/918906002995314698



=== @ P-Tux7 12/10/2021 16:44

Note to self or @arceusplayer11 (discord: Deedee) : check z1 disassembly. These keese are faster than the blue ones on NES

=== @arceusplayer11 (discord: Deedee) 12/11/2021 04:46

Hmm...

=== @ P-Tux7 12/12/2021 02:37

blue keese max speed in the disassembly: 1f = 31
red/cset 9 keese max speed in the disassembly: 7f = 127
considering that the keese step speed in zelda classic is 62, i presume this means it would be 254 or 255
though, death knights only have 150... perhaps keese step speed needs to be recalculated?

=== @ P-Tux7 12/12/2021 02:40

```InitBlueKeese:
    ; Choose one of eight random directions.
    LDA Random, X
    AND #$07
    TAY
    LDA Directions8, Y
    STA ObjDir, X
    JSR ResetFlyerState
    LDA #$C0
    STA FlyingMaxSpeedFrac
    LDA #$1F
    STA Flyer_ObjSpeed, X
    RTS

InitRedOrBlackKeese:
    JSR InitBlueKeese

    ; Red and black keeses are like blue ones, but faster.
    LDA #$7F
    STA Flyer_ObjSpeed, X
    RTS```
that's sure sounding like it's setting the object speeds to be 1f and 7f respectively

=== @ P-Tux7 12/12/2021 02:42

yeah er, moldorms have $80 which would be 128
it's clearly not the same way of calculating step speed here

=== @ P-Tux7 12/12/2021 02:45

ok so $40 is 1 pixel per frame movement it seems

=== @EmilyV99 (discord: Emily) 12/12/2021 02:45

so $40 = 100 step

=== @EmilyV99 (discord: Emily) 12/12/2021 02:46

so take the input value `n`, and do `n / 0.64` to get a zc step speed?
0x7F = `198.4375`, so 198 step
....and `48.4375`, or 48 step, for the blue
I'd probably round those off to 50/200 for simplicity

=== @ P-Tux7 12/12/2021 02:50

```If the darknut is red, then move at q-speed $20 (0.5 pixels a frame).```
citation for what's a pixel per frame

=== @ P-Tux7 12/12/2021 02:52

eeyeah this doesn't seem right
https://cdn.discordapp.com/attachments/918906002995314698/919421404259160144/keesespeed.qst
the vire keese are faster but certainly not THAT much more so
i'll ask the randomizer community that has some hackers in it how many pixels per frame flying enemy speed results in

=== @ P-Tux7 12/12/2021 03:02

ok so i think what we need to do is
i need to know how many pixels per frame a keese step speed at max acceleration is
or preferably, what step speed would result in 1 pixel per frame
*in ZC

=== @EmilyV99 (discord: Emily) 12/12/2021 03:07

100 = 1px/frame

=== @ P-Tux7 12/12/2021 07:22

Oh, so Red/Black Keese START at a higher speed, but have the same max speed as a Blue Keese
![image](https://cdn.discordapp.com/attachments/918906002995314698/919489361848979456/Screenshot_20211212-012149_Discord.jpg)

=== @EmilyV99 (discord: Emily) 12/12/2021 07:36

huh, odd

=== @arceusplayer11 (discord: Deedee) 12/12/2021 09:19

(replying to @EmilyV99 (discord: Emily) "I'd probably round those off‚Ä¶"): IIRC Blue Keese use a specific step speed that has a hardcoded side effect

=== @arceusplayer11 (discord: Deedee) 02/13/2022 14:19

Added a Keese (Fast) option to the list of Keese types
it makes them spawn at max speed but unlike bats still lets them stop slowly and start slowly like regular keese

=== @ P-Tux7 02/13/2022 14:26

(replying to @arceusplayer11 (discord: Deedee) "IIRC Blue Keese use a specifi‚Ä¶"): oh?
also thanks, i'll try it out

=== @arceusplayer11 (discord: Deedee) 02/13/2022 14:37

(meta) thread name was changed: üíäüîìCSet 8 (Red)9 Keese Should Be Faster

=== @EmilyV99 (discord: Emily) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ P-Tux7 02/15/2022 05:39

It's a good effort, but it doesn't seem like they're as fast as they are on NES. Why do the red Keese seem faster on NES even though they and the blue ones have the same top speed?!?

=== @arceusplayer11 (discord: Deedee) 02/15/2022 12:00

@ P-Tux7 all it does is start them with their max speed when they spawn
so if they aren't as fast, then that means that their max speed is higher than what the default quest has them as

=== @arceusplayer11 (discord: Deedee) 02/15/2022 15:41

(it also means that blue keese are also slower than they are in NES)

=== @arceusplayer11 (discord: Deedee) 02/15/2022 15:42

oh, wait
hmm, red keese don't actually start at their max speed

=== @ P-Tux7 02/15/2022 18:38

oh i know, i made a test quest to try em out
sorry i'll upload it later

=== @arceusplayer11 (discord: Deedee) 02/15/2022 18:40

I think I figured it out
It's mostly just wrangling with the dumb way floater_walk is handled internally to add the features

=== @arceusplayer11 (discord: Deedee) 02/15/2022 18:41

@ P-Tux7 So I have two attributes, "acceleration step" and "acceleration frame delay"

=== @arceusplayer11 (discord: Deedee) 02/15/2022 18:42

the first is how much step it increases the keese by when accelerating; the second is how many frames between each step increase there are
do you think that's clear, or is there a better way to name these?

=== @ P-Tux7 02/15/2022 18:45

acceleration interval for the latter?
or maybe that for the former and acceleration timer for the latter

=== @arceusplayer11 (discord: Deedee) 02/15/2022 20:12

@ P-Tux7 was Z1 60 FPS?

=== @ P-Tux7 02/15/2022 20:17

yuh
you've found a disassembly right

=== @arceusplayer11 (discord: Deedee) 02/15/2022 20:18

I used the one you linked, but reading the assembly is tedious cause I only half understand it
Just to confirm, Keese max speed are 3 pixels per frame, right?

=== @ P-Tux7 02/15/2022 21:20

Uh I'll check once I get home
In the meantime I can give you the tip to set your Level to 4 in Buffet and give yourself a sword to easily test Vires
(Black Keese only show up in the second quest but act the exact same as Vire/Red)

=== @arceusplayer11 (discord: Deedee) 02/15/2022 22:05

@ P-Tux7 there's no way their max speed is 3 pixels per frame
that's way too fast
even with the more gradual speeding up
(I can't check the buffet hack cause I don't have a Z1 emulator set up)

=== @arceusplayer11 (discord: Deedee) 02/15/2022 22:07

even 200 feels too fast

=== @ P-Tux7 02/15/2022 22:07

you might want to join the reloaded randomizer server or the speedrun server and ask about it

=== @arceusplayer11 (discord: Deedee) 02/15/2022 22:07

link?
hmm
100 feels just right though

=== @ P-Tux7 02/15/2022 22:08

the channel you want here is #rom-hacking
https://discord.gg/etT3VXbgGd
https://discord.gg/Ns2efyQStd

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:00

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
I did do something with the default red keese; let me know if that feels right @ P-Tux7

=== @ P-Tux7 02/16/2022 04:01

thanks!
what was it specifically?

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:02

I gave them a landing cooldown of 4 seconds
or was it 5? goldfish memory
so they won't try to land until after they've been in the air for at least that much time
they also spawn at max speed
## ‚ùåüîíOnLaunch global script unable to access global arrays on first load (#1076)
@ Moosh opened this issue on 12/12/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/919519457540468736



=== @ Moosh 12/12/2021 09:22

When I first load my quest, any references to my global array in my OnLaunch script gives this error: 
```Global script 5 (OnLaunch):
Invalid pointer (0) passed to array (don't change the values of your array pointers)```
If I save, this problem no longer occurs.

=== @ Moosh 12/12/2021 09:23

This seems to indicate that OnLaunch is running before Init. But ZScript_Timing.txt says otherwise. And it makes sense because nothing should run before global variables are initialized save for other things in the init script. So what gives?

=== @EmilyV99 (discord: Emily) 12/12/2021 09:26

`ZScript->Quest Script Settings->Script->Use Old Global Init and SaveLoad Timing`
is this checked or not?

=== @ Moosh 12/12/2021 09:27

god fucking dammit ü§¶
Get real used to old bug reports resurfacing as I completely overlook these compat rules
Not to mention how half of them are "use old" and the other half "use new"

=== @EmilyV99 (discord: Emily) 12/12/2021 09:28

yeahhhh.....

=== @EmilyV99 (discord: Emily) 12/12/2021 09:43

(meta) thread name was changed: ‚ùåüîíOnLaunch global script unable to access global arrays on first load
## ‚úÖüîíInit Script Changed warning displaying on every compile (#1077)
@ Moosh opened this issue on 12/12/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/919520508456878100



=== @ Moosh 12/12/2021 09:26

I'm pretty sure I reported this back in another thread, but it should probably have its own so it doesn't go forgotten. This pretty much defeats the purpose of the popup currently, not that it really affects me any
¬Ø\_(„ÉÑ)_/¬Ø

=== @EmilyV99 (discord: Emily) 12/12/2021 09:28

I am so confused why this is a problem

=== @ Moosh 12/12/2021 09:30

You and me both. I swear for a little bit when it was added it was working as intended.

=== @EmilyV99 (discord: Emily) 12/12/2021 09:31

.....oh
You know what the fuck is wrong with it?
Here's the ZASM command struct:```cpp
struct ffscript
{
    word command;
    int32_t arg1;
    int32_t arg2;
    char *ptr;
};```
(the ptr is unused)
but uh
the interesting thing?\
`arg1` and `arg2` are not ever initialized unless they are used
....so they are random memory values, which might "change", and it's detecting THOSE changes.....

=== @ Moosh 12/12/2021 09:32

ahh
well that sounds like a headache and a half

=== @EmilyV99 (discord: Emily) 12/12/2021 09:33

<:nkoFacepalm:697173951465521152>

=== @EmilyV99 (discord: Emily) 12/12/2021 09:34

Theoretically adding a `clear()` function should help
and then calling that on every instance during scripts_data initalization SHOULD work?

=== @ Moosh 12/12/2021 09:36

Wait aren't arg1 and arg2 fields in the FFC editor? Why would they be initializing to random memory and not that

=== @EmilyV99 (discord: Emily) 12/12/2021 09:36

no, no
this isn't that at all
this is ZASM Opcodes

=== @ Moosh 12/12/2021 09:36

ah

=== @EmilyV99 (discord: Emily) 12/12/2021 09:36

when you have like
`PUSHV 10`

=== @ Moosh 12/12/2021 09:37

gotcha

=== @EmilyV99 (discord: Emily) 12/12/2021 09:37

that sets `command` to the value for `PUSHV`
and `arg1` to `100000`
....but wouldn't initialize `arg2`, since it doesn't use that.....

=== @EmilyV99 (discord: Emily) 12/12/2021 09:39

@ Moosh see if this fixes it?
https://cdn.discordapp.com/attachments/919520508456878100/919523823181758466/zquest.exe
(Don't save any important projects in this without backup, not sure about stability, this is on switchhook branch)

=== @ Moosh 12/12/2021 09:42

Appears to be working

=== @EmilyV99 (discord: Emily) 12/12/2021 09:43

woo, that's really good

=== @ Moosh 12/12/2021 09:43

Glad this one's sorted üôÇ

=== @EmilyV99 (discord: Emily) 12/12/2021 09:43

(meta) thread name was changed: ‚úÖüîíInit Script Changed warning displaying on every compile
take a look at #deleted-channel if you haven't yet
## Lens of Truth Attribute Activate-Deactivate by Pressing (#1078)
@ Bagu opened this issue on 12/12/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/919641173256187914



=== @ Bagu 12/12/2021 17:25

I scripted this kind of Lens behavior, for a current test quest, but I think it would be a nice engine addition, to allow to decide if constant Button Input is required to use the lens or if you want to simply activate/deactivate it by pressing the Button once.

=== @ Alucard648 12/12/2021 20:46

I am also supporting this feature request. Jumping from one invisible platform to another, enemy fight in secret passages etc...

=== @ Bagu 12/13/2021 00:21

Exactly!

=== @ Bagu 12/13/2021 00:32

...esspecially when jumping on moving, invisible platforms

=== @ P-Tux7 12/15/2021 00:57

yeah, this should be in if for no other reason than OOT did it this way
which is the justification for why hits under the effect of nayru's love still confer knockback, for instance, even though i'm not too much of a fan of that i have to respect it

=== @EmilyV99 (discord: Emily) 12/16/2021 08:01

(replying to @ P-Tux7 "yeah, this should be in if fo‚Ä¶"): ....It was a toggle in OOT??

=== @ Bagu 12/16/2021 11:11

In OoT it did was handled by single pressing, yes
...not by constant input

=== @ Bagu 12/16/2021 11:15

I scripted this with a trick
...I used an identifier "lens_on" it initiates a constant input if it's = 1 (by pressing the button once), while pressing the button again sets it back to "0" (and stop constant input)

Also if Start is pressed, or the equiped item is not the lens, or link is falling, or MP is < 1 (etc) ... it's instantly set to "0"
But that's definitly not the best way to do it üôÇ üôÇ üôÇ
(it's just a "for the moment" solution, to me)
## Writable hookshot speed in the editor (#1079)
@ Moosh opened this issue on 12/13/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/919822102406762526



=== @ Moosh 12/13/2021 05:24

And all the associate clipping issues involved D:
## Load Theme button - Theme Editor (#1080)
@EmilyV99 (discord: Emily) opened this issue on 12/13/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/919831432912842763



=== @EmilyV99 (discord: Emily) 12/13/2021 06:01

Some things that need to happen....
## Combos Run Scripts on Screen Init (#1081)
@ Bagu opened this issue on 12/13/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/919897479724564520



=== @ Bagu 12/13/2021 10:24

Is it possible to add a feature, that would allow combos to run scripts on screen init. (like FFC or Screen Scripts)?
Or is this a clash with basically engine screen/map handling?
## Demo-Test Quests (#1082)
@ vlamart opened this issue on 12/13/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/919966197334810705



=== @ vlamart 12/13/2021 14:57

It would be helpful in further testing and organising assets if demo/test quests used during development for new features were released either with the Nightly, or packaged separately

=== @ Moosh 12/13/2021 15:00

Packaged separately would be better IMO. Zoria used to package his demos with releases and it just contributed to the thing being unwieldy to download

=== @ vlamart 12/13/2021 15:08

That's smart, maybe in their own thread for those who'd even want them

=== @ P-Tux7 12/13/2021 15:58

it also didn't help that he packaged scripted quests which a lot of users didn't care about or at least couldn't tell how it was any "better" than 2.50

=== @ vlamart 12/13/2021 17:17

Just a simple one or two screen demo of how a new combo/enemy/item is put together during development. But I can see the bloat many of these could cause
## ‚ùåüîíThese items are still missing from Zelda Classic (#1083)
@ SkyLizardGirl opened this issue on 12/13/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920068098906783744



=== @ SkyLizardGirl 12/13/2021 21:42

Cane Of Somaria  - Cane that makes push blocks

Magic Powder  - Magic candle post powder

Fire Rod  - Melts Ice blocks

Magic Cape  - Turns link invisible
-----
We need All these things built into Zelda Classic.
You guys understand what they do.
If you ever played a link to the past.

![image](https://cdn.discordapp.com/attachments/920068098906783744/920068586784051296/1000.png)

![image](https://cdn.discordapp.com/attachments/920068098906783744/920068657600659496/77032-400.png)
Putting these 4 items built into ZC will finally Complete the SNES section.

=== @EmilyV99 (discord: Emily) 12/13/2021 21:48

somaria - no
powder - maybe? not important
fire rod - already planned
magic cape - maybe?

=== @ SkyLizardGirl 12/13/2021 21:49

Ok
Magic Cape is one of those items you cant forget.

=== @arceusplayer11 (discord: Deedee) 12/13/2021 21:55

Magic Powder sounds like it'd be dead easy tbh

=== @EmilyV99 (discord: Emily) 12/13/2021 21:55

It should just be a simple weapon spawn

=== @arceusplayer11 (discord: Deedee) 12/13/2021 21:55

It's just a hitbox that's in front of you for a second
yeah

=== @EmilyV99 (discord: Emily) 12/13/2021 21:55

but it needs a new enemy defense
and triggers

=== @arceusplayer11 (discord: Deedee) 12/13/2021 21:56

Cane of Somaria; fuck I want to do that so much

=== @EmilyV99 (discord: Emily) 12/13/2021 21:56

(frankly, I'll add new 'Secret Combos' / placed trigger flags for everything that needs them at once)

=== @arceusplayer11 (discord: Deedee) 12/13/2021 21:56

I have no idea where I'd even start though

=== @arceusplayer11 (discord: Deedee) 12/13/2021 21:57

It'd have to happen around the time I start working on solid frozen enemies/freeform solidity

=== @arceusplayer11 (discord: Deedee) 12/13/2021 21:59

Would it be a Weapon Type or a new Sprite Class though?

=== @arceusplayer11 (discord: Deedee) 12/13/2021 22:00

If the former, it could damage enemies that it's pushed into
but then that goes into it being a weapon type that presumably could be created, unless it's given the same restrictions as melee weapons and just isn't allowed to be created
(replying to @ SkyLizardGirl "Cane Of Somaria  - Cane that‚Ä¶"): You're forgetting about the Ice Rod, which is already planned
and the Book of Mudora, which... hmm

=== @arceusplayer11 (discord: Deedee) 12/13/2021 22:03

That might actually be really easy, if it's tied to signposts

=== @EmilyV99 (discord: Emily) 12/13/2021 22:05

(replying to @arceusplayer11 (discord: Deedee) "but then that goes into it be‚Ä¶"): why not create it
(replying to @arceusplayer11 (discord: Deedee) "That might actually be really‚Ä¶"): SCCs can do this

=== @arceusplayer11 (discord: Deedee) 12/13/2021 22:07

(replying to @EmilyV99 (discord: Emily) "SCCs can do this"): They can, yeah
Though we do have an unused readingspr for link sprites
(replying to @EmilyV99 (discord: Emily) "why not create it"): fair point...
Weapon->Solid as a variable might make sense
or, hell
Sprite->Solid
Just make it a Sprite thing

=== @EmilyV99 (discord: Emily) 12/13/2021 22:10

makes sense, not the best channel for this though

=== @ Tsunami Tommy Reload the Shotty 12/13/2021 22:31

I don't even remember what the Book of Mudora did.  All I remember it doing was Link holding it aloft in the southeast of the Light World in the desert, and a dungeon appeared or something.  The Whistle can do that now.

=== @arceusplayer11 (discord: Deedee) 12/13/2021 22:32

If you use it in front of certain signs, you can read them
It's like a String Control Code but  you need to actually *use* the item

=== @ Bagu 12/13/2021 22:32

What about a Re-/Deflect Attribute, for Swords, to crate real Agahnim - Mastersword "PingPong" Battles?

=== @EmilyV99 (discord: Emily) 12/13/2021 22:39

ü§¢
OK, so I'm going to close this thread, because it's a jumbled mess of ideas
If you want to *make separate threads for each idea*, that's fine
but everything is just gonna get buried in here
@arceusplayer11 (discord: Deedee) @ Bagu @ SkyLizardGirl @ Changeling

=== @ P-Tux7 12/15/2021 22:07

Would the Cane of Somaria be doable by creating a pushblock *on a layer*?
Now, granted, that would require not having layer 1/2 combos in spots where you can place or push a block - but you already have to make similar considerations when using layer 1/2 pushblocks

=== @arceusplayer11 (discord: Deedee) 12/15/2021 22:12

It could be doable, but that seems less elegant honestly
ZC push blocks aren't great

=== @ P-Tux7 12/15/2021 22:28

mm
why i didn't make a new thread

=== @EmilyV99 (discord: Emily) 12/16/2021 08:00

(meta) thread name was changed: ‚ùåüîíThese items are still missing from Zelda Classic
## Re- & Deflect Attribute for Swords (#1084)
@ Bagu opened this issue on 12/13/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920083734374522890



=== @ Bagu 12/13/2021 22:44

I'd really love to have an availablle Re-/Deflect Attribute for Swords.
(like for Boomerangs and Shields)

...to allow authentical Agahnim/Mastersword PingPong

=== @EmilyV99 (discord: Emily) 12/13/2021 23:09

This makes sense, though swords are a pain to work with... definitely a good idea though

=== @ Bagu 12/14/2021 00:00

Yeah, the LWeapon Type Sword is an istant basic engine thing and I guess it's really hard to rewrite/advance its behavior.

=== @ Bagu 12/14/2021 00:03

But if this might be possible in future ...I would definitly appreciate it
## Quest Rule - No PushBlocks on Liquid (#1085)
@ Bagu opened this issue on 12/14/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920108592349216828



=== @ Bagu 12/14/2021 00:23

Sorry @EmilyV99 (discord: EmilyV) , I don't wanna flood this forum with threads, but there is one last idea, I had a few days ago, when I was making some experiments with your "FreezeWater" LWeapon Script.

I advanced it a little, so it will only change water combos into next, if a certain flag is placed under them, and it can also turn Damage 1/2 herat combos into next, also checking flags.

In fact I think, frezzing water is a good way to move Pushblocks about water barriers.
But the water should be Walk/Swimable (without unchecking "can't Swim in unwalkable Water") 
...and having a (maybe inherent) Flag under all Water "-Edges" and "-Corners" is a waste of Flags IMO.

What if there was a quest rule
"Pushblocks can't be pushed on Liquid" and maybe, even a second "PushBlucks will sink in Liquid"
...Like Blockholes (Block->Next) but using a constant combo or clipping.

=== @EmilyV99 (discord: Emily) 12/14/2021 00:24

@arceusplayer11 (discord: Deedee)

=== @ Bagu 12/14/2021 00:29

Just BTW, I added a combo data script, to turn the screen's undercombo into melting (cycking) ice->water combos, if they appear on assigned "CF_FREEZEWATER" flags.

=== @ P-Tux7 12/14/2021 00:33

oh, this is a side effect of non-solid water, right
oh while we're at it
smart pushblocks check all 4 quadrants of the combo for solidity, right

=== @ Bagu 12/14/2021 00:34

I think so, ye

=== @EmilyV99 (discord: Emily) 12/14/2021 00:34

...`smart pushblocks`?

![image](https://cdn.discordapp.com/attachments/920108592349216828/920111571668205608/unknown.png)
If that's set, they can't be pushed into solids

=== @ Bagu 12/14/2021 00:35

But the Water shall not be solid

=== @EmilyV99 (discord: Emily) 12/14/2021 00:35

yeah, that seems interesting
didn't think about that

=== @ Bagu 12/14/2021 00:35

And "Can't swim in solid Water" needs to stay checked

=== @ Bagu 12/14/2021 00:37

So Link shall be be enabled to swim in walkable water,but not in solid
...but pushblocks shall not be pushed onto any liquid (solid, walkable or lava)
...or else, you can decide to push em on, but they sink in it üôÇ

=== @ Bagu 12/14/2021 00:45

Maybe it can be an attribute of the water combo, instead of a questrule?

...so, the pushblocks will not have to check the water, the water will check the pushblocks...?

The Water combos could possibly have an attribute "No PushBlocks"
or "Push Blocks will sink".

=== @ Bagu 12/14/2021 00:52

...cause, if only the side- and edge water combos will check the pushblock position and push state, they will only have the chekc (max) two (min) one edge(s)

...instead of one more check one all four corner of the pushblocks

=== @arceusplayer11 (discord: Deedee) 12/14/2021 01:26

I'll look into that
(replying to @ Bagu "Maybe it can be an attribute‚Ä¶"): "push blocks will sink" already exists; it's the "block hole" flag

=== @ Bagu 12/14/2021 05:29

Yeah, but I thought of instant Liquid Block Hole (like mentioned in my earlier post)

https://discord.com/channels/876899628556091432/920108592349216828/920108607440318474

And Having an extra BlockHole->Next Flag under each Water Combo, is same kind of flag waste as having a NoPushblocks flag under each Water Combo.

An engine Block->Liquid replacement would be much better, so there would be no need for each pushblock to have a "->Next" Combo following.

...and a Block that sinks in a Left-Edge WaterCombo would need another "->Next" combo, than one that sinks in Right-Edge Water Combos.
...Anyting else causes odd graphics.
...but exactly this is the Problem, cause "There can be only ONE" ->Next combo üôÇ

=== @ Bagu 12/14/2021 05:51

I think, Pushblocks (if "sinkable") should turn into that watercombo, that they were pushed onto (and create a "Drown" Animation ...as sprites who can drown when they collide with liquids.)

=== @ vlamart 12/14/2021 19:27

It would be interesting to have the opposite idea for pits. Like pushing a block over a pit to use its undercombo to make a bridge over the pit

=== @ Bagu 12/14/2021 20:21

That's definitly intressting, @ vlamart 

Thanks for mentioning, cause I tried and just noticed that Pits offer exactly that Pushblock interaction, that I would wish for liquid.

=== @ Bagu 12/14/2021 20:25

The Puhblock disappears, the combo creates a "Fall" sprite (drown in case of liquids) and evrything else stays as it is (without any ->Next combos)
## Z3 Animation Expansion (#1086)
@ P-Tux7 opened this issue on 12/14/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920171456623706172



=== @ P-Tux7 12/14/2021 04:32

ZC lacks some animation frames that Z3 did, even if you set "Z3 Player Animation". It's divided into existing animation slots that need to have expanded frames, and things that require whole new animation slots.

Expansion of existing slots:

Floating - 2 frames per direction
Swimming: 4 frames per direction
Slash: 6 frames up/down, 7 frames left/right (set to 6 for all four???)
Pound: 3 exclusive frames to each direction. Not shared with stab/slash like they currently are

New slots:
Boomerang: 2 frames per direction
Hookshot: 1 frame per direction
Bug net: 7 frames per direction
Bow: 3 frames per direction (might be worth waiting until we have visible sprite bows?)

And a final note that the rods and canes both reuse the pound animation.
oops pressed enter too soon

=== @ P-Tux7 12/14/2021 04:39

There
## üíäüîìBug Net Does Not Use Slash Sprites (#1087)
@ P-Tux7 opened this issue on 12/14/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/920175690752610356



=== @ P-Tux7 12/14/2021 04:49

As the title says - you'd think it would use the standard slash sprites, yet it doesn't. It also seems to go back to the "Standing Link" tile even before the net animation has completed and you can move again.

=== @EmilyV99 (discord: Emily) 12/14/2021 04:55

oh, crap

=== @EmilyV99 (discord: Emily) 01/20/2022 22:32

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:35

why you pinging me?
Bug net was your doing

=== @EmilyV99 (discord: Emily) 01/20/2022 22:35

because p-tux mentioned this in the animations thing
and uhhh
I have no clue what would be wrong with animations üò¶

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:35

I'll fix this if you fix the music looping bug

=== @EmilyV99 (discord: Emily) 01/20/2022 22:36

I would have assumed the attackclk, but that should be >0 for the whole duration?
uhhhh
yeah sure
let me get right on that
it'll only take me a few years


=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:36

then this is waiting until I figure out why some songs are only a few seconds long

=== @EmilyV99 (discord: Emily) 01/20/2022 22:37

I mean, not rushing this, it's not that important
just putting it on your radar as a thing that is a problem that is existing

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:38

aight

=== @ P-Tux7 01/20/2022 22:41

can you guys copy the animation code from the normal sword slash
the bug net seems a little faster than the sword, but you can either adjust *its* timings or the sword animation's timings

=== @EmilyV99 (discord: Emily) 01/20/2022 22:43

`copy the animation code from`
hahahahhahahas
hahahahahahhahahahahahahhhhhhahaaaaaaaaaaaaaaaaaaa
that sentence is meaningless
do you mean link's animation or the net animation?
If the net animation, it's literally entirely different
if link's animation, it *is already fucking using the same code*
it sets the attacking action and attackclk

=== @ P-Tux7 01/20/2022 22:45

something isn't adding up the last time i used the bug net
i'll try it in the next nightly and see if it's still looking funny

=== @EmilyV99 (discord: Emily) 01/20/2022 22:46

if something's wrong, it's not something as simple as `can't you just copy this from here`
it's probably some jankeryfuckery of the highest order
melee weapons *suck*
link animations *suck*
link actions *suck*
and this relates to all 3, so it *really sucks*

=== @ P-Tux7 01/20/2022 22:47

(replying to @EmilyV99 (discord: Emily) "if something's wrong, it's no‚Ä¶"): the framedata (tiles used and how long it takes for each one to go to the next) would at least be of reference i thought
i trust you when you said you copied that from normal slash but it didn't look it last time
like i said, i'll try again next nightly

=== @EmilyV99 (discord: Emily) 01/20/2022 22:47

(replying to @ P-Tux7 "the framedata (tiles used and‚Ä¶"): for link or the net?

=== @ P-Tux7 01/20/2022 22:47

link

=== @EmilyV99 (discord: Emily) 01/20/2022 22:48

it sets `attackclk = duration` and `action = attacking`
that's literally all the net does
and appears to be all any other weapon does
animation stuff is all based on `action`
as for the action animation tiles, none of that is in any code relating to the net
that code is literally not different
that's just link's animation code
shared by *everything*
it's not like the net has some copy of animation setup or anything

=== @ P-Tux7 01/20/2022 22:49

(replying to @ P-Tux7 "As the title says - you'd thi‚Ä¶"): well link certainly doesn't do this when slashing any other weapon

=== @EmilyV99 (discord: Emily) 01/20/2022 22:49

aye, so there's probably some absolutely jank fuckery going on
but the actual animation code is shared
there's only 2 copies of link's animation code in the entire source
one of them is ZQ-only, used in the dialog to animate the previews
the other is ZC-only, used for actually displaying in-game
Now, here's a question for you
Does the slash animation for the net last the same length as it does for the sword?
because, I'm pretty sure the net swing is longer

=== @ P-Tux7 01/20/2022 22:58

@ P-Tux7
will check in next nightly

=== @EmilyV99 (discord: Emily) 02/08/2022 13:00

@arceusplayer11 (discord: Deedee) @ P-Tux7

=== @ P-Tux7 02/10/2022 06:58

uh is it okay to import my previous quest into this build
i had to add the bug net to the subscreen and i don't want to do it again lol

=== @EmilyV99 (discord: Emily) 02/10/2022 08:43

. . . ?
Why would there be a problem?

=== @ P-Tux7 02/10/2022 16:39

Better
https://cdn.discordapp.com/attachments/920175690752610356/941372712486580224/bugnet.qst
Link can now no longer move while bug netting and the net changes direction correctly.
However, the animation still starts a frame or two before the net spawns, and it only uses one frame (Slash), as opposed to the Slash + Stab animation for the slashing sword (I included both items in Init Data)

=== @ P-Tux7 02/10/2022 16:41

Also observe how Link goes back to a standing pose before the net's animation is even halfway-done, unlike the sword.
So the gameplay is perfect, it's just the animation that needs tuning.

=== @EmilyV99 (discord: Emily) 02/10/2022 22:12

. . . uhh, wait, something changed?

=== @ P-Tux7 02/10/2022 22:13

(replying to @ P-Tux7 "As the title says - you'd thi‚Ä¶"): from way back when THIS post was made
you used to be able to move before the visible net disappeared - like you could move before it was even IN FRONT OF link, that early
i recall you saying you fixed that? which it is indeed fixed now

=== @EmilyV99 (discord: Emily) 02/10/2022 22:22

I uhh
don't recall fixing anything

=== @ P-Tux7 02/10/2022 23:04

must have been deedee

=== @arceusplayer11 (discord: Deedee) 02/11/2022 04:55

um?
I never touched bug net

=== @EmilyV99 (discord: Emily) 02/11/2022 04:56

so uh, @ P-Tux7, it fixed itself?

=== @ P-Tux7 02/11/2022 04:57

Hooray?
Now all that's left is animation

=== @arceusplayer11 (discord: Deedee) 02/12/2022 20:23

So, I think I edited the timing of both the bug net and link's animation while doing it to feel nice
(30 felt way too long; reduced it to 24 and it feels a lot better)

=== @arceusplayer11 (discord: Deedee) 02/12/2022 20:26

There's a bit of an issue though; the bug net when facing right is either the only time the bug net lines up with Link's animation (if left handed), or the only time it *doesn't* line up with Link's animation (if right handed)

=== @arceusplayer11 (discord: Deedee) 02/12/2022 20:29

@EmilyV99 (discord: EmilyV) any chance you could have a "unflipped right-facing bugnet" item flag? (so it mirrors the left facing bug net)
I can probably handle the animations from there (though it's looking increasingly likely that I need to implement a slash (continued) link animation v.v)

=== @EmilyV99 (discord: Emily) 02/12/2022 23:28

Frankly, do what you like with it, I never want to touch a melee weapon again in my life

=== @ P-Tux7 02/12/2022 23:48

"it's melee not welee"

=== @arceusplayer11 (discord: Deedee) 02/15/2022 22:51


![image](https://cdn.discordapp.com/attachments/920175690752610356/943278434841407588/2022-02-15_17-50-12.mp4)
@ P-Tux7
(also @EmilyV99 (discord: EmilyV) )

=== @ P-Tux7 02/15/2022 23:15

looking perfect

=== @arceusplayer11 (discord: Deedee) 02/16/2022 03:59

(meta) thread name was changed: üíäüîìBug Net Does Not Use Slash Sprites
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Z3 Bug Net Style (#1088)
@ P-Tux7 opened this issue on 12/14/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920176508616712222



=== @ P-Tux7 12/14/2021 04:52

A new movement style for the Bug Net.  Used as a flag.

-The net completes a full 9-frame animation through the 8 directions, starting at one point beside Link and ending at that same point. The animation is clockwise no matter which direction Link faces.

-Where each net starts per-Link facing direction:
Up: To his left
Right: To his north
Down: To his right
Left: To his south
This means that the net always starts on Link's left-hand side.
Sorry for the delay in testing out the bug net, but I didn't think to compare the animation to Z3 until now that I'm documenting all that frame data.

=== @EmilyV99 (discord: Emily) 12/16/2021 07:59

This will probably wait a bit, because.... frankly handling that many frames sounds suuuper painful
(melee weapons need to have each individual frame hard-coded)
## ‚úÖüîíSwitch Hook Features (#1089)
@ P-Tux7 opened this issue on 12/14/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920411185940152381



=== @ P-Tux7 12/14/2021 20:25

So this is an idea where like Oracle of Ages, if you stand on a block destination (name?) and swap with a combo with this attribute, it sets the block destination to be "triggered" and renders the block unpushable if it has a pushable flag on it, just like any other pushblock that is pushed onto a block destination.

=== @EmilyV99 (discord: Emily) 12/15/2021 20:58

So, switching pushblock onto block hole isn't triggering it already? ...makes sense...

=== @ P-Tux7 12/15/2021 21:14

Well I wouldn't know, I don't have a switchhook build

=== @EmilyV99 (discord: Emily) 12/15/2021 21:14

oh, duh, I haven't posted that
(hoping A100 comes out soon, just need @arceusplayer11 (discord: Deedee) to finish the last few QRs
pretty sure it wouldn't trigger though
since that's in the pushing code

=== @ P-Tux7 12/15/2021 21:14

But the fact that this was one of my friends' first thoughts when hearing about the switch hook seems to show it's important
(replying to @EmilyV99 (discord: Emily) "since that's in the pushing c‚Ä¶"): Yeah I figured

=== @EmilyV99 (discord: Emily) 12/15/2021 21:15

also, pushblocks on layers still only trigger things on *their layer*
need to fix that

=== @ P-Tux7 12/15/2021 21:15

HOLD it
if you have two blocks and two destinations on different layers
that could mean you could have like, color or symbol coded blocks and destinations
make it a QR at least please

=== @EmilyV99 (discord: Emily) 12/15/2021 21:16

A block being switch-hooked onto a block hole on the same layer would switch places with each other, not trigger
without doing a lot of work....
blehg
so much to do still

=== @ P-Tux7 12/15/2021 21:18

perhaps a combo type or "Unswappable Block Hole" combo flag that gets checked and sets it to not swap

=== @EmilyV99 (discord: Emily) 12/15/2021 21:50

@ P-Tux7 hope you're up for some testing
because now:
-Block holes should apply on layer 0 only (+1&2 if the qr for pushblocks on 1&2 is on), UNLESS the new QR is *enabled* to make them do same layer only.
-Switchhooks should not be able to swap with `Push->Wait` combo types if they would not be pushable (i.e. enemies on screen)
-Switchhooks swapping with any push combo should trigger block holes that it swaps pushblocks onto

=== @ P-Tux7 12/15/2021 21:56

sure

=== @EmilyV99 (discord: Emily) 12/15/2021 21:56

Anything that is 'breakable' with the switchhook will ignore this, as... the combo breaks, instead of filling the hole
so a pushable `Bush->Next` that you swap into a hole would not trigger the hole

=== @ P-Tux7 12/15/2021 21:56

(replying to @EmilyV99 (discord: Emily) "-Switchhooks should not be ab‚Ä¶"): you know
how does this interact with heavy/very heavy pushblock flags

=== @EmilyV99 (discord: Emily) 12/15/2021 21:57

It doesn't
If you use the `SwitchHook Block` combo type, you can require a certain level of switchhook to switch with it

=== @ P-Tux7 12/15/2021 21:57

whoa

=== @EmilyV99 (discord: Emily) 12/15/2021 21:57

but other than that, if it's switchable it's switchable

=== @ P-Tux7 12/15/2021 21:57

np

=== @EmilyV99 (discord: Emily) 12/15/2021 21:59

For fucks sake
`cmb2` is apparently a constant in some header somewhere
that's what I get for trying to name my combo variables simply....

=== @EmilyV99 (discord: Emily) 12/15/2021 22:01

@ P-Tux7 here's a full buildpack

https://cdn.discordapp.com/attachments/920411185940152381/920797901117071440/buildpack.zip
Also, push combos that have been 'locked in place' won't be switchable
...which, while it includes block holes, sadly ALSO includes `Push Once` blocks that have been pushed

=== @ P-Tux7 12/15/2021 22:02

yeah that's what i'd hope
oh

=== @EmilyV99 (discord: Emily) 12/15/2021 22:03

To change that... would mean rewriting how push once's are handled

=== @ P-Tux7 12/15/2021 22:03

i dunno if you could swap them off in oracles, but it's not like zc has lttp/gb style "un-pushable" buttons

=== @EmilyV99 (discord: Emily) 12/15/2021 22:03

yeah
I've scripted such before easily
it was a lens puzzle, so I just used ffcs that were visible to lens only, and checking when a block was below every one of them
but, the whole `click into place` idea means they aren't going to move again
....the question is, should a push once click into place when you swap with it, even if you haven't pushed it?
that would make it `one push OR one swap`, consistently

=== @EmilyV99 (discord: Emily) 12/15/2021 22:07

oh, wait... hmmm
so, interesting tidbit
if you have a blockhole on a different layer, as it is now, the hole could eat multiple blocks.... because the hole itself isn't being overwritten
that's not right
uhg, and I forgot block *triggers*

=== @EmilyV99 (discord: Emily) 12/15/2021 22:20

OOOKAY
So block holes are fairly easy
Block TRIGGERS are fucking hard

=== @EmilyV99 (discord: Emily) 12/15/2021 22:22

So, the way I have it set up now
If you layer multiple `Block Hole`s on top of each other
each can eat a block
first the one on the same layer as the block, then counting up 0,1,2
Block Triggers should ALL trigger
and, triggers on layers other than the one the block is on will become that layer's undercombo

=== @EmilyV99 (discord: Emily) 12/15/2021 22:26

....I think that's handled for BLOCKS, now to handle it for SWITCHHOOKS
....frankly I should just make the switchhook run the block placement code....

=== @EmilyV99 (discord: Emily) 12/15/2021 22:43

HOOOOOOOOOOKAY
If you thought pushblocks were jank
now, switchhooking a pushblock
will spawn a movingblock sprite object
and immediately trigger it 'clicking into place', which should *automatically* resolve all triggers the same as though it were pushed
building now

=== @EmilyV99 (discord: Emily) 12/15/2021 22:56

@ P-Tux7 Here, if you could test the everliving shit out of this please
https://cdn.discordapp.com/attachments/920411185940152381/920811503710535690/buildpack.zip

=== @ P-Tux7 12/15/2021 22:56

does it come with a quest with the switch hook set up
i know i had to edit the subscreen to get the bug net to show up

=== @EmilyV99 (discord: Emily) 12/15/2021 22:57

uhhh

https://cdn.discordapp.com/attachments/920411185940152381/920811861727924264/switchhook.qst
here have my test quest
doesn't have anything set up for pushblocks and stuff
but, it's what I used for the switchhook thus far

=== @ P-Tux7 12/15/2021 23:01

oh by the way
you can shave off a mb or two by deleting the .zips in utilities

=== @ P-Tux7 12/15/2021 23:09

uh
https://cdn.discordapp.com/attachments/920411185940152381/920814745886527518/switchhook.qst
try hooking the block after you've hooked it or pushed it

=== @ P-Tux7 12/15/2021 23:10

changed the flag to push 4 way many and same result
https://cdn.discordapp.com/attachments/920411185940152381/920815110396706816/switchhook.qst

=== @ P-Tux7 12/15/2021 23:12

and in this quest (idk about the others) you can hook the block (but not swap) even before you've killed the keese
https://cdn.discordapp.com/attachments/920411185940152381/920815632604340304/switchhook.qst
and it seems like swapping a block onto the block trigger doesn't trigger it (i only set up the block trigger in this last one oops), but pushing it does (as normal)
@EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 12/15/2021 23:13

hmmm
OK, so the hooking but not swapping effect is normal
the switchhook block combo type does the same if it's set to `only swap with combo 0` but you try to swap it with a non-0 combo
that's showing `yes this is switchable, but something's in the way`
apparently it's setting the pushed flag even if it's a many type....

=== @ P-Tux7 12/15/2021 23:15

(replying to @EmilyV99 (discord: Emily) "that's showing `yes this is s‚Ä¶"): well it's weird because nothing's in the way

=== @EmilyV99 (discord: Emily) 12/15/2021 23:15

Something is; the block is already clicked into place

=== @ P-Tux7 12/15/2021 23:15

except for the keese existing, but that SHOULD make it just not hook, right?

=== @EmilyV99 (discord: Emily) 12/15/2021 23:15

or it's a wait combo

=== @ P-Tux7 12/15/2021 23:15

oh yeah it's a wait combo

=== @EmilyV99 (discord: Emily) 12/15/2021 23:16

the wait combo is checked when it tries to actually swap you with the block, not when it initially grabs it

=== @EmilyV99 (discord: Emily) 12/15/2021 23:19

...OH fun
the push flags are dir-based, so I need to set dir shit

=== @ P-Tux7 12/15/2021 23:22

well it would seem everything else is working as planned
though i do have a question - why do bush drops snap to the nearest combo instead of wherever the bush was destroyed? it's not like item drops are required to snap to combos
unlike, uh, combos

=== @EmilyV99 (discord: Emily) 12/15/2021 23:27

they... don't?
they drop at Link's position
before the swap

=== @ P-Tux7 12/15/2021 23:30

ohh i must have been doing some close-range swaps sorry

=== @ P-Tux7 12/15/2021 23:32

by the way, a few times i was able to get the switch hook to make the "poof" effect in this quest?
what's the condition for that happening?

=== @EmilyV99 (discord: Emily) 12/15/2021 23:32

oh
there's numbers in the top-left
the top number is the effect style (0=poof,1=flicker,2=rise)
pressing the A button cycles through

=== @ P-Tux7 12/15/2021 23:33

oh thanks

=== @EmilyV99 (discord: Emily) 12/15/2021 23:34

should have a new build in a moment with a couple fixes

=== @EmilyV99 (discord: Emily) 12/15/2021 23:38

my god this is confusing

=== @EmilyV99 (discord: Emily) 12/16/2021 03:08

@ P-Tux7
https://cdn.discordapp.com/attachments/920411185940152381/920875022355165185/zelda.exe
https://cdn.discordapp.com/attachments/920411185940152381/920875023034626069/zquest.exe

=== @EmilyV99 (discord: Emily) 12/16/2021 07:48

OK, did some fancy here
https://cdn.discordapp.com/attachments/920411185940152381/920945549350436864/zelda.exe
https://cdn.discordapp.com/attachments/920411185940152381/920945549820194836/zquest.exe
I removed `Hero->SwitchNPC(npc n, int effect);`
now instead it's `npc->Switch(int effect);`
and also `lweapon->`, `eweapon->`, and `itemsprite->Switch(int effect);`

https://cdn.discordapp.com/attachments/920411185940152381/920945798613704714/ZScript_Additions.txt
also

![image](https://cdn.discordapp.com/attachments/920411185940152381/920945918478524426/unknown.png)
#1091
and also the ability to switch with items on the ground, flag-based. (Drags Items is ignored if Swaps Items is checked; but the `Picks Up Keys` and `Pick Up Anything` flags apply to *both*

=== @EmilyV99 (discord: Emily) 12/16/2021 07:53


![image](https://cdn.discordapp.com/attachments/920411185940152381/920946758874464296/unknown.png)
and a QR for making objects continue their scripts even while they are frozen by the switchhook

=== @EmilyV99 (discord: Emily) 12/16/2021 07:55

All sprite objects that are under the switch effect are paused; this includes the switchhook weapon itself, as it also flickers/rises with those effects. Such objects will neither move nor animate, and only will run their scripts if `Switchhooked Objects Run Scripts` is set.
(replying to @EmilyV99 (discord: Emily) "OK, did some fancy here"): ^Whenever anyone has time to test such
(meta) thread name was changed: Switch Hook Features

=== @EmilyV99 (discord: Emily) 12/16/2021 07:57

(meta) thread name was changed: üíäüîìSwitch Hook Features

=== @EmilyV99 (discord: Emily) 12/16/2021 08:28

> ...should probably add a Switch (Once) and Switch (Many) flag
> the former being switchable, but only once, similar to the push once, but not pushable
> and the latter being no different from a normal switchable combo, but it counts as a push type flag, so it triggers block triggers / block holes
> that would be nice....
(meta, MessageType.pins_add) 

=== @ P-Tux7 12/17/2021 00:43

so uh sorry
what do i need to test

=== @EmilyV99 (discord: Emily) 12/17/2021 00:43

Just make sure it works with blocks,  and on different layers

=== @ P-Tux7 12/17/2021 03:22

oh have we tested combos that are larger than 1x1 yet

=== @arceusplayer11 (discord: Deedee) 12/17/2021 03:23

probably not
we'd need some sort of big combo feature
and that... oof

=== @ P-Tux7 12/17/2021 03:25

arent armos and generic combos resizable

=== @EmilyV99 (discord: Emily) 12/17/2021 03:26

ha ha yeaaaah, that's not any sane handlable system
and also completely Zoria's work

=== @arceusplayer11 (discord: Deedee) 12/17/2021 03:26

the armos system is honestly not very well handled...
it grabs *any* armos combo and tries to position the enemy based on that
makes it impossible to have multiple big armos next to eachother

=== @ P-Tux7 12/17/2021 03:30

we should probably put a disclaimer somewhere that the switch hook doesn't work with resizable combo types, similar to how the diagonal hookshot/switch hook flag says it's experimental
though i'd have no idea where

=== @EmilyV99 (discord: Emily) 12/19/2021 05:17

(meta) thread name was changed: üíäüìåSwitch Hook Features

=== @ P-Tux7 02/18/2022 07:42

uh... how do i enable this again?

=== @ P-Tux7 02/18/2022 07:50

@EmilyV99 (discord: EmilyV) the switching with a block over a block trigger

=== @EmilyV99 (discord: Emily) 02/18/2022 19:40

uhh
you switch
with something pushable
while standing on a block trigger

=== @ P-Tux7 02/18/2022 23:24

hrm

=== @ P-Tux7 02/18/2022 23:26

OH she wasn't doing that
time to request a new combo flag

=== @ P-Tux7 02/18/2022 23:28

#1218

=== @EmilyV99 (discord: Emily) 02/19/2022 03:50

(meta) thread name was changed: ‚úÖüîíSwitch Hook Features
## Simpler 16x16 Relational Combos (Uses 13 Combos) (#1090)
@ P-Tux7 opened this issue on 12/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920726066857918514



=== @ P-Tux7 12/15/2021 17:16

I'd really appreciate a simpler relational combo system that only supports 16x16 pieces and only has these combos. Most dungeons don't need all of the options that current relational combos have, and it's a pain to set up for tile makers and quest makers alike.
Example walls from Super Mario World:
![image](https://cdn.discordapp.com/attachments/920726066857918514/920726118519160852/unknown.png)

=== @ P-Tux7 12/15/2021 17:22

@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee) i'm gonna be honest having to place dungeons/areas tile by tile really kills my motivation to use zquest so i'd really appreciate this
not you guys' fault or anything just letting you know how important it is

=== @EmilyV99 (discord: Emily) 12/15/2021 20:56

Pahahahahaha
I'm not fucking touching the cursed bullshit that is relational combos
Deedee can feel free if she wants

=== @arceusplayer11 (discord: Deedee) 12/15/2021 21:07

Sure thing
@ P-Tux7 this might take a bit though, cause I want to look into other things with aliases and stuff

=== @EmilyV99 (discord: Emily) 12/15/2021 21:08

Add it as a new mode you scroll through, so `Normal`, `Relational`, `Relational16`, `Dungeon`, `Alias`

=== @arceusplayer11 (discord: Deedee) 12/15/2021 21:08

mainly, I want to have the switch button be *per combo pane*
Because as it stands, aliases are annoying to use

=== @EmilyV99 (discord: Emily) 12/15/2021 21:10

*OOOOH*
uh
that's a big undertaking
while you're at it, make aliases not turn your cursor invisible?

=== @ P-Tux7 12/15/2021 21:12

(replying to @arceusplayer11 (discord: Deedee) "@ P-Tux7 this m‚Ä¶"): No problem
(replying to @EmilyV99 (discord: Emily) "Add it as a new mode you scro‚Ä¶"): Yeah this was my thought
It's not like we can break the relational combos sets that already exist anyways
...all 10 of them but

=== @ cbailey78 12/17/2021 03:39

(replying to @EmilyV99 (discord: Emily) "I'm not fucking touching the‚Ä¶"): The dungeon mode is much worse than relational mode.  It's no wonder I never see anyone uses this useful feature.  It is painfully tedious, confusing to set up and time consuming process.

=== @ cbailey78 12/17/2021 03:41

RPG maker for PC's uses this exact "Simple" relational drawing!
## ‚úÖüîíSwitch Hook Flag - Only Use Cost If Successful Swap (#1091)
@ P-Tux7 opened this issue on 12/15/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920817398687350894



=== @ P-Tux7 12/15/2021 23:19

A flag for the switch hook that makes it only use its cost if the swap is successful. This means the cost is not subtracted if the hook hits something non-hookable or something that IS hookable, but doesn't have an actual swap happen (such as a wait pushblock while an enemy is on-screen).
Oh, that reminds me...

=== @EmilyV99 (discord: Emily) 12/16/2021 07:56

Merging with #1089
(meta) thread name was changed: ‚úÖüîíSwitch Hook Flag - Only Use Cost If Successful Swap
## Item Flag or QR - Charge Scrolls Only Use Cost Upon Use (#1092)
@ P-Tux7 opened this issue on 12/15/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920817987638951936



=== @ P-Tux7 12/15/2021 23:21

So as it is charge scrolls use their cost when you successfully charge up, not when you actually release the button to use the charged attack. This means that you can waste your magic on a spin attack or hammer quake without actually doing anything because you got hit after you charged but before you let go of the button.

With this item flag or QR the cost would only be subtracted when you let go of the button and the sword/hammer is swung.
## Candle Melee and Can Slash Flags (#1093)
@ P-Tux7 opened this issue on 12/16/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/920916369569099806



=== @ P-Tux7 12/16/2021 05:52

As the Candle has options for melee sprites, it would be nice to see those have the potential to cause damage like the Wand melee can.

=== @EmilyV99 (discord: Emily) 12/16/2021 06:00

ü§¢

=== @ P-Tux7 12/16/2021 06:10

i don't quite get it - can't the wand rod code be copied?
the only thing they can do is harm and use can slash flags
(meta) thread name was changed: Candle Melee and Can Slash Flags

=== @EmilyV99 (discord: Emily) 12/16/2021 06:11

can the *insert melee anything here* be done easily? no

=== @ P-Tux7 12/16/2021 06:11

it's not like the sword where you have all the spin attack charge up stuff

=== @EmilyV99 (discord: Emily) 12/16/2021 06:12

it's not so simple as copying one thing
it's copying all very specific like 80 things
without fucking any of them up
and making sure it works right for the candle without fucking things up with the flag off

=== @ P-Tux7 12/16/2021 06:13

i could have sworn byrna had melee without an associated combo trigger... maybe i was wrong
## chests have opening sound (#1094)
@arceusplayer11 (discord: Deedee) opened this issue on 12/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921240553419583509



=== @arceusplayer11 (discord: Deedee) 12/17/2021 03:21

Allow chests to specify an opening sound.

=== @ P-Tux7 12/17/2021 03:26

...can you tell i play with the sound off a lot?

=== @arceusplayer11 (discord: Deedee) 12/17/2021 03:27

heh
## Traps Respect Step Speed (#1095)
@ P-Tux7 opened this issue on 12/17/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921244899226050611



=== @ P-Tux7 12/17/2021 03:38

Traps don't actually move any faster or slower if you change their step speed. This is that request.
## ‚úÖüîíPressing T in the combo editor opens the tiles page (#1096)
@ Deathrider opened this issue on 12/17/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921245987681468417



=== @ Deathrider 12/17/2021 03:42

Before, hitting T in the combo editor would take you to the tile that was currently set, as of now that functionality is lost

=== @ P-Tux7 12/17/2021 03:48

sounds more like a bug report

=== @EmilyV99 (discord: Emily) 12/17/2021 03:49

it doesn't matter

=== @ Deathrider 12/17/2021 03:49

ü§∑‚Äç‚ôÇÔ∏è
emily said to put this here

=== @EmilyV99 (discord: Emily) 04/24/2022 23:04

(replying to @ Deathrider "Before, hitting T in the comb‚Ä¶"): For the record, *WHEN* is 'before'?
because uhh, this isn't in 2.50.2

=== @ Deathrider 04/24/2022 23:40

I recall being able to perhaps a year ago or so, sorry if that isn't helpful I do not remember.

=== @EmilyV99 (discord: Emily) 04/25/2022 02:46

oh, huh, it just wasn't working for me when I launched before
2.50.2 is always fun

=== @EmilyV99 (discord: Emily) 04/25/2022 03:00

ahk, fixed
(meta) thread name was changed: ‚úÖüîíPressing T in the combo editor opens the tiles page
## ‚úÖüîíGrass sprites dont work on layers over 0 (#1097)
@ Deathrider opened this issue on 12/17/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/921248115451920404



=== @ Deathrider 12/17/2021 03:51

walking through grass placed on non layer 0 do not show a walking through grass sprite

=== @EmilyV99 (discord: Emily) 12/19/2021 00:10

(meta) thread name was changed: üîìGrass sprites dont work on layers over 0

=== @EmilyV99 (discord: Emily) 12/19/2021 05:15

(meta) thread name was changed: ‚úÖüîíGrass sprites dont work on layers over 0

=== @ Deathrider 12/20/2021 04:52

also this thread can be resolved as well
## ‚úÖüîí[2.55 A100] Stairs or Cave warp tile bug (#1098)
@ cbailey78 opened this issue on 12/17/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/921537625876217867



=== @ cbailey78 12/17/2021 23:01

Link instantly re-enters the cave or stairs upon exiting.  The warping tiles shouldn't be active until link steps off of it.

=== @ tim 12/17/2021 23:03

is this overworld or dungeons?
or both

=== @ cbailey78 12/17/2021 23:09

It's both.

=== @ tim 12/17/2021 23:09

this is def happening in 1st quest <:dead:870411772383883286>

=== @EmilyV99 (discord: Emily) 12/17/2021 23:12

@arceusplayer11 (discord: Deedee) I feel like this sounds like something you might have touched?

=== @ cbailey78 12/17/2021 23:13

@tim That's exactly where I discovered it.  I go into the cave to get the sword and as I leave the cave, link instantly re enters the cave leaving me trapped.  This is definitely game breaking bug.

=== @arceusplayer11 (discord: Deedee) 12/17/2021 23:20

hmm
I'll look at it

=== @ cbailey78 12/18/2021 01:18

I hope it gets fixed soon

=== @EmilyV99 (discord: Emily) 12/18/2021 01:42

I am very confused
I see nothing apparent in recent changes

=== @arceusplayer11 (discord: Deedee) 12/18/2021 01:42

I'll look into it when I'm done doing stuff, it'll be easier to debug with the debug build

=== @EmilyV99 (discord: Emily) 12/18/2021 02:03

Whatever caused this is newer than Nov 29th

=== @EmilyV99 (discord: Emily) 12/18/2021 02:43

bah fuck this is mine

=== @arceusplayer11 (discord: Deedee) 12/18/2021 02:44

lmao

=== @EmilyV99 (discord: Emily) 12/18/2021 02:50

it was cross-screen respawn
I missed a variable

=== @EmilyV99 (discord: Emily) 12/18/2021 03:00

should be fixed
(meta) thread name was changed: üíäüîì[2.55 A100] Stairs or Cave warp tile bug

=== @arceusplayer11 (discord: Deedee) 12/18/2021 03:06

ooof

=== @EmilyV99 (discord: Emily) 12/18/2021 03:09

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ cbailey78 12/18/2021 03:30

It's so nice that we have a can of Raid to kill these nasty bugs!

=== @EmilyV99 (discord: Emily) 12/19/2021 05:15

(meta) thread name was changed: ‚úÖüîí[2.55 A100] Stairs or Cave warp tile bug
## ‚úÖüîíSome overlayers disabled (#1099)
@ SkyLizardGirl opened this issue on 12/17/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/921550730777755658



=== @ SkyLizardGirl 12/17/2021 23:53

I have noticed certain overlayers are not covering objects such as when you start up my game, there is supposed to be a black overlayer over the character, and you can see the character through it now. That's not supposed to happen.

=== @EmilyV99 (discord: Emily) 12/17/2021 23:54

what layer is it, what color index of black is it

=== @ SkyLizardGirl 12/17/2021 23:54

I am searching for that now hold on

=== @ SkyLizardGirl 12/17/2021 23:56

Oh
Overhead (043)
is not functioning
where you make a tile Overhead on the tile itself
Not a layer
Just so you know, this was working in the previous Alpha

=== @EmilyV99 (discord: Emily) 12/18/2021 00:05

Hmm
I'll take a look

=== @ SkyLizardGirl 12/18/2021 00:13

Also i cant test more stuff because of the doorway error in the other Bug report i made.
i use alot of doors in this quest.

=== @ SkyLizardGirl 12/18/2021 00:21

doorway glitch is of course caves entry

=== @ HeroOfFireZC 12/18/2021 00:38

Can confirm, Overhead type combos are not drawing over the player.

=== @EmilyV99 (discord: Emily) 12/18/2021 01:31

bleh I'm dumb

https://cdn.discordapp.com/attachments/921550730777755658/921575542698938378/zelda.exe
this should fix
(meta) thread name was changed: üíäüîìSome overlayers disabled

=== @EmilyV99 (discord: Emily) 12/19/2021 05:15

(meta) thread name was changed: ‚úÖüîíSome overlayers disabled
## ‚úÖüîíFinish the Magic Mirror (#1100)
@ Zaidyer opened this issue on 12/18/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921553701917822976



=== @ Zaidyer 12/18/2021 00:05

The Mirror item class should have a secondary Warp effect and sound effect, to be used when the DMap flag "Mirror Continues instead of Warping" is set, as it worked in A Link to the Past.

=== @ HeroOfFireZC 12/18/2021 01:22

More additions specific to the Mirror.
A - A screen with a "No Mirror Into" flag.
B - A "cannot mirror onto" combo Flag
C - A Item Option / QR where if you bonk on these "No Mirror", you get a wavy screen effect, similar to how Oracle of Ages prevented time travel in some places.

=== @EmilyV99 (discord: Emily) 12/19/2021 00:10

(meta) thread name was changed: üîìFinish the Magic Mirror

=== @EmilyV99 (discord: Emily) 12/19/2021 00:19

(replying to @ HeroOfFireZC "C - A Item Option / QR where‚Ä¶"): This one is a bit tougher... you already have the warp effect playing

=== @ HeroOfFireZC 12/19/2021 00:29

I think it just depends on how Mirror bonking works. If it loads the screen, shows it for a moment, then warps you back, idea idea is that a consistent wavy effect plays, implying something is preventing you from warping there.
(based on how it looks in Ages)

=== @EmilyV99 (discord: Emily) 12/19/2021 00:48

It plays a warp of whichever effect to go there
and then immediately starts a warp back as soon as the warp there finishes

=== @EmilyV99 (discord: Emily) 12/19/2021 03:05

Showcases the `No Mirror` flag (the orange tiles on the left have it).
Also showcases the return portal bonking you back, due to temp secrets.
The `Disable Mirror` screen flag also exists, making it treat the entire screen area as `No Mirror` flag.
![image](https://cdn.discordapp.com/attachments/921553701917822976/921961451776790578/2021-12-18_22-02-57.mp4)
Also, the continue warp effect and sfx are separately set now.
@ HeroOfFireZC @ Zaidyer

=== @EmilyV99 (discord: Emily) 12/19/2021 03:11


![image](https://cdn.discordapp.com/attachments/921553701917822976/921962923419652196/2021-12-18_22-10-59.mp4)
@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 12/19/2021 05:15

(meta) thread name was changed: ‚úÖüîíFinish the Magic Mirror
## Wizzrobe Class Expansion (#1101)
@ P-Tux7 opened this issue on 12/18/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921678654977757214



=== @ P-Tux7 12/18/2021 08:21

@arceusplayer11 (discord: Deedee)

Shot Types:
-3-way spread
-5-way spread
-4-directional

Flags/Attributes
-Only Appears On Initial Spawn Point (LTTP/LA wizzrobes. Applies to Teleporting only. Will always pick its spawn point for every time it appears)
-Can Be Knocked Back (idk if this works by setting the knockbackability via scripts)
-Kind Phasing (Phasing only. When phasing, refuses to phase in any of the 3 8-way directions closest to Link and will keep rerolling until it gets one of the five others. This prevents a Wizzrobe to the face)
-Summoners Kill Children When Dead - Enemies are "owned" by the Wizzrobe that summoned them. When the Wizzrobe dies, they die too. Perhaps should also apply to walking enemies, but if it can't it's no biggie. Most summoning enemies I've seen people make are Wizzrobes
-Summon Fixed Amount of Enemies: Instead of summoning 1-3 enemies at random, always summon an amount of enemies equal to the value in the next attribute.
-How Many Enemies To Summon: See above. Useless unless the above flag is checked
Big McThankies from McSpanky's

=== @ P-Tux7 12/18/2021 08:24

The last four attributes would make Blue/Fire/Mirror and Bat/Summoner Wizzrobes a LOT more tolerable, fair, and able to strategize, especially in low-gear quests or when attempting to beat a late-game dungeon early

=== @arceusplayer11 (discord: Deedee) 12/18/2021 08:36

<:ThinkingLink:884884438679437313>

=== @ cbailey78 12/18/2021 18:30

Add a wizzrobe weapon firing SFX attribute.

=== @ P-Tux7 12/18/2021 18:55

don't enemies have their own shooting sounds now?

=== @ cbailey78 12/19/2021 02:05

Oh, I just discovered we now have custom weapon items, so I can scratch that suggestion.
## ‚úÖüîíVarious Keyboard Shortcuts (#1102)
@ vlamart opened this issue on 12/18/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921731655260049418



=== @ vlamart 12/18/2021 11:52

I don't know if there is a thread for this already, but just a missing convenient shortcut. R - rotate, for the Combo Page

=== @EmilyV99 (discord: Emily) 12/18/2021 22:09

...R/H/V should all work on the combo page @ vlamart

=== @ vlamart 12/18/2021 22:11

It works on tile page, combo editor, and tile editor, but NOT the combo page

=== @EmilyV99 (discord: Emily) 12/18/2021 22:13

Ohhh
Ok

=== @EmilyV99 (discord: Emily) 12/20/2021 05:23

(meta) thread name was changed: ‚úÖüîíVarious Keyboard Shortcuts
Added
## ‚úÖüîíenlarged enemy death animations broken (#1103)
@ Zaidyer opened this issue on 12/18/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/921907587438501889



=== @ Zaidyer 12/18/2021 23:31

2.55 offers fine control over enemies‚Äô size and hitboxes, but if you make their sprites any bigger than 1 tile it also applies to whatever death sprite you‚Äôve set. But not the way you‚Äôd think. Because it still animates by ‚Äúmoving forward along the tile page‚Äù 16 pixels per frame. so a traditional 1-tile sized death animation will be surrounded by garbage tiles, while animations drawn at the intended size look broken.

=== @ P-Tux7 12/18/2021 23:37

This would probably be something good to solve by default, but does setting the enemy to have a custom death sprite and setting that sprite to be 2x2 tiles in the "Weapons/Misc" graphic editor work?
Make sure the QR(s?) for Per-Enemy Weapon/Spawn/Death/Shadow Sprites are on so you can assign them per-enemy in the Enemy Editor.

=== @ Zaidyer 12/18/2021 23:38

The sprite can‚Äôt be set larger than 1 tile in the sprite editor. It inherits the size attributes of the enemy that calls for it.

=== @ P-Tux7 12/18/2021 23:38

(That's a thing now too if you haven't noticed. Now all walking enemies can have LTTP-style shadows, even custom ones tailored to their size)
(replying to @ Zaidyer "The sprite can‚Äôt be set large‚Ä¶"): Okay that's... odd
I must have misremembered, sorry.

=== @EmilyV99 (discord: Emily) 12/18/2021 23:39

yeah, all a sprite data does is give a tile and animation data
no size data
and the code used clearly doesn't account for size changes

=== @ P-Tux7 12/19/2021 00:10

i presume it isn't but should be doing the anim.skip x and y like combos can and large enemies do

=== @EmilyV99 (discord: Emily) 12/19/2021 00:10

....yes, that would indeed be the bug
as I said, the code used clearly doesn't account for size changes

=== @EmilyV99 (discord: Emily) 12/19/2021 05:15

(meta) thread name was changed: ‚úÖüîíenlarged enemy death animations broken

=== @ P-Tux7 12/19/2021 08:51

awesome

=== @ Zaidyer 12/19/2021 20:47

The reported fix appears not to exist.
I set a 2x2 enemy's death sprite to an intentionally-designed animation meant for a 2x2 bounding box, but it still displays incorrectly.

=== @ Zaidyer 12/19/2021 21:00

Tile setup for a 2x2 death animation in the top two rows
![image](https://cdn.discordapp.com/attachments/921907587438501889/922231868009640037/deathtest1.png)
Actual result
![image](https://cdn.discordapp.com/attachments/921907587438501889/922231917695344650/zc_screen00001.png)

=== @ Zaidyer 12/19/2021 21:01

The animation is 6 frames long, and therefore it should look like it's showing four of the same number in a single frame of animation, and go all the way up to showing four 6s.
Instead, it looks like this, and stops after showing four 3s, indicating that even though the bounding box of the animation is 2 tiles wide, it's only advancing across the tile page 1 tile per frame.

=== @ P-Tux7 12/19/2021 21:09

this should probably be checked for spawns and shadows too

=== @ Zaidyer 12/20/2021 02:30

Further testing reveals that the reason the fix didn't appear to work was because the Compatibility Rule "hard-coded shadow/spawn/death anim frames" was enabled.

=== @ Zaidyer 12/20/2021 02:37

So technically, this bug *is* fixed, but not for the hard-coded variety of death animations. Not sure if there's a reason to fix those.

=== @EmilyV99 (discord: Emily) 12/20/2021 03:56

(meta) thread name was changed: üíäüîìenlarged enemy death animations broken

=== @EmilyV99 (discord: Emily) 12/20/2021 04:49

@ Zaidyer https://cdn.discordapp.com/attachments/922348751119609907/922349900572811294/testbuild.zip
should fix even with compat rule enabled?
(meta) thread name was changed: ‚úÖüîíenlarged enemy death animations broken
## Projectile Item Flags - Blocked By Solid Combos (#1104)
@ P-Tux7 opened this issue on 12/19/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/921941231678935070



=== @ P-Tux7 12/19/2021 01:45

A flag for these items that kills them if they hit a solid combo.

-Sword (beams)
-Wand (magic)
-Candle (fire)
-Byrna (beams)
-Boomerang (Itself)
-Arrows (Themselves)
-Din's Fire (fire)

In short, the same that happens if they hit the edge of the screen or are hit by an enemy that blocks them. So sword beams "explode", arrows "tink", etc.

=== @ P-Tux7 12/19/2021 01:46

Good for nerfing or differentiating the arrows or wand, or making higher-level items that can go through solid combos as their "upgrade". Also good for LTTP/GBC style gameplay
## üîìZ3 Animations unimplemented in Zelda.exe (#1105)
@ Zaidyer opened this issue on 12/19/2021

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922161694782943322



=== @ Zaidyer 12/19/2021 16:21

Thread from PureZC:
https://www.purezc.net/forums/index.php?showtopic=76556
Details:
Zelda.exe does not display the correct animations for "Slash", "Stab" and "Pound" when the Animation Style is set to "Zelda 3". Instead, Zelda.exe defaults to the standard behavior of "Original" and "BS-Zelda" animation styles.
While editing and previewing Link's sprites in ZQuest, these animations are displayed correctly. "Slash" is expanded to 6 unique frames of animation, "Stab" is expanded to 3 unique frames of animation, and "Pound" is expanded to 3 unique frames of animation. This represents the original intention of the developer who first implemented Zelda 3 animation for Link, but it was never fully implemented in Zelda.exe itself.

=== @ Zaidyer 12/19/2021 16:26

Additionally, "Charge" does not reset to the first frame when the player stops moving. Instead, it defaults to the way it works in "Original" and "BS Zelda" styles, where it will stop on the current frame and stay that way until the player does something.

=== @ P-Tux7 12/19/2021 17:36

Don't forget swimming, which only uses two frames for each of "floating" and swimming

=== @ P-Tux7 01/04/2022 07:01

@ jman2050

=== @ jman2050 01/04/2022 07:53

hmm?

=== @ jman2050 01/04/2022 07:54

yeah, none of that did get finished, did it...

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:26

@ Zaidyer could you show me a setup of the correctly set up tiles for these animations?

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:27

I'm curious if the sword's tile and positioning should also be changed to account for this animation style

=== @ Zaidyer 01/18/2022 10:27


![image](https://cdn.discordapp.com/attachments/922161694782943322/932944373568634890/original_z3_big_link_pg2.png)
![image](https://cdn.discordapp.com/attachments/922161694782943322/932944373753217044/original_z3_big_link_pg1.png)
This is what it was supposed to be when the feature was first added, though I see swimming has changed since then

=== @ Zaidyer 01/18/2022 10:30

(replying to @arceusplayer11 (discord: Deedee) "I'm curious if the sword's ti‚Ä¶"): It *just barely* works as-is but the alignment is a little weird and it's particularly bad when facing up. It looks even worse when using a taller sprite, which is not unheard-of now thanks to the incredible wealth of sprites from the Randomizer alone

=== @ Zaidyer 01/18/2022 10:36

Slash facing up at full extension barely clears this sprite's head
![image](https://cdn.discordapp.com/attachments/922161694782943322/932946615776444426/zc_screen00016.png)
Charging up a Spin Attack while facing up doesn't clear this sprite *at all*
![image](https://cdn.discordapp.com/attachments/922161694782943322/932946767052423199/zc_screen00017.png)

=== @EmilyV99 (discord: Emily) 01/18/2022 10:37

The problem here is mostly the fact that the sword is only one tile long
which doesn't work well with that graphical style
it being behind the head there is the exact proper *hitbox* alignment for it

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:38

I mean, we could have the sword extend outwards more with positioning, though there might be some disjointed hitboxes involved

=== @EmilyV99 (discord: Emily) 01/18/2022 10:38

It'd be more awkward for collision to make it look better graphically
the proper solution would be a longer sword
but uh
fuck no
the way that size shit works is so terrible and I hate it

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:39

(replying to @EmilyV99 (discord: Emily) "the proper solution would be‚Ä¶"): don't tempt me

=== @EmilyV99 (discord: Emily) 01/18/2022 10:40

Be tempted, bitch

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:40

ugh, Z3 sword already sounds nightmarish enough

=== @ Zaidyer 01/18/2022 10:40

I tried adjusting this with the Weapon hitbox and draw offsets in the item editor. But it interacts strangely with the sword

=== @EmilyV99 (discord: Emily) 01/18/2022 10:40

you just tempted me to make a whole new launcher, deedee
you get this in return

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:40

I diiiiiiid üò©

=== @EmilyV99 (discord: Emily) 01/18/2022 10:40

(replying to @ Zaidyer "I tried adjusting this with t‚Ä¶"): yes the sword sucks
everything about the sword is bad

=== @ Zaidyer 01/18/2022 10:40

Look, you people dug your own grave here when you made the Bug Catching Net a 180-degree slash instead of a spin attack
make a sword that does that

=== @EmilyV99 (discord: Emily) 01/18/2022 10:41

@arceusplayer11 (discord: Deedee) you could probably copy most of that
that won't help making it longer, though
a `sword length` attribute would be the way to handle longer
and all the hardcoded bullshit would need to adjust based on that

=== @ Zaidyer 01/18/2022 10:44

I have a radical suggestion for the Sword issue and I think I'll have to make another thread for it

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:46

Okay, so from the sprites you sent
slashing needs to be 4 frames if it's the standard LA slash
And 6 frames if I were to implement 180 sword slashing

=== @ Zaidyer 01/18/2022 10:47

indeedly-doo

=== @arceusplayer11 (discord: Deedee) 01/18/2022 10:47

You wouldn't happen to have sword sprites for the directions for these, would you?
I need to know how to position the sword for up facing big sprites

=== @ Zaidyer 01/18/2022 10:48

I can generate them real quick, gimme a minute

=== @ Zaidyer 01/18/2022 10:58


![image](https://cdn.discordapp.com/attachments/922161694782943322/932952057479045170/link_attack_zoom-x1_speed-100d.gif)

=== @ Zaidyer 01/18/2022 10:59


![image](https://cdn.discordapp.com/attachments/922161694782943322/932952400195649606/link_attack_zoom-x1_speed-100d.png)

=== @arceusplayer11 (discord: Deedee) 01/18/2022 11:00

Could you get some for up facing?

=== @ Zaidyer 01/18/2022 11:00

comin' up

=== @arceusplayer11 (discord: Deedee) 01/18/2022 11:00

thank you!

=== @ Zaidyer 01/18/2022 11:01


![image](https://cdn.discordapp.com/attachments/922161694782943322/932952786646216774/link_attack_zoom-x1_speed-100u.png)
![image](https://cdn.discordapp.com/attachments/922161694782943322/932952786864308245/link_attack_zoom-x1_speed-100u.gif)
Worth noting that when the sword is fully-extended (frame 6 here) the animation speed *changes* for that particular frame
Normally the animation speed is 1 (or 17 milliseconds), for frame 6 here it's 4 (or 67 milliseconds)

![image](https://cdn.discordapp.com/attachments/922161694782943322/932953415942807573/link_attack_zoom-x1_speed-100l.gif)
![image](https://cdn.discordapp.com/attachments/922161694782943322/932953416278376498/link_attack_zoom-x1_speed-100l.png)
And for good measure, left facing. This is mirrored for right facing, obvs

=== @arceusplayer11 (discord: Deedee) 01/18/2022 11:11

Okay so it looks like the sword is 16x16 from a glance
but the hitbox would extend further down when up facing, so as to catch enemies inside of link

=== @arceusplayer11 (discord: Deedee) 01/18/2022 11:13

also that adds up to 12 frames of sword slashing; but the ZQ preview seems to be *24* frames of slashing

=== @ Zaidyer 01/18/2022 11:21

Possibly due to conjecture
It was really hard to measure this stuff 15 years ago

=== @ Zaidyer 01/18/2022 11:25

The sword is indeed 16x16 except for when it‚Äôs 16x8 or 8x16. Not counting the Master Sword which *looks* bigger but may in fact not have a bigger hitbox

=== @ Zaidyer 01/18/2022 11:26

In A Link to the Past, the sprites for the Master Sword are drawn for the same tile size as the Fighter Sword, and while slashing the game adds an extra specially drawn 8x8 tile to the tip to make it longer.
Except when it doesn‚Äôt do that
It won‚Äôt lengthen the Master Sword if you slash while walking down a slow walk combo on the overworld
It doesn‚Äôt lengthen it *ever* in the GBA port

=== @ Zaidyer 01/18/2022 11:33

Ergo I think ‚Äúlonger sword‚Äù features would probably work differently in ZC if they‚Äôre attempted at all

=== @arceusplayer11 (discord: Deedee) 01/18/2022 12:45

uhhhhhh
okay I'm very weirded out
There appears to be bitmap shenanigans going on

=== @arceusplayer11 (discord: Deedee) 01/18/2022 12:49


![image](https://cdn.discordapp.com/attachments/922161694782943322/932979985860411452/zc_screen00009.png)

=== @ Zaidyer 01/18/2022 12:51

What am I seeing here

=== @ Zaidyer 01/18/2022 12:52

I recall triggering a bizarre ‚Äúevery tile is shifted weirdly in a box around Big Link‚Äù bug but I forget how, might be a quest rule

=== @arceusplayer11 (discord: Deedee) 01/18/2022 12:53

(replying to @ Zaidyer "I recall triggering a bizarre‚Ä¶"): that's exactly what is happening

=== @ Zaidyer 01/18/2022 12:54

Turn off all the rules and see if that fixes it
Might be one of the newer ones actually

=== @arceusplayer11 (discord: Deedee) 01/18/2022 12:59

Old (Faster) Sprite Drawing needs to be enabled for it to draw correctly
@EmilyV99 (discord: EmilyV) also the pick ruleset dialogue doesn't activate any QRs or anything

=== @EmilyV99 (discord: Emily) 01/18/2022 13:02

?
(replying to @arceusplayer11 (discord: Deedee) "Old (Faster) Sprite Drawing n‚Ä¶"): check `sprite::draw()` for bitmap shenanigans

=== @arceusplayer11 (discord: Deedee) 01/18/2022 13:03

(replying to @EmilyV99 (discord: Emily) "?"): When you Pick a Ruleset... it does nothing
whether you press OK, Cancel, etc

=== @EmilyV99 (discord: Emily) 01/18/2022 13:07

@arceusplayer11 (discord: Deedee) ```cpp
void call_ruleset_dlg()
{
    PickRulesetDialog([](int32_t ruleset)
    {
        applyRuleset(ruleset);
    }).show();
}```
try changing this to ```cpp
PickRulesetDialog(applyRuleset).show();```?
if not, then try debugger to see wtf is going wrong

=== @arceusplayer11 (discord: Deedee) 01/18/2022 13:15

@EmilyV99 (discord: EmilyV) I'm not very familiar with the new sprite drawing
VC?

=== @EmilyV99 (discord: Emily) 01/18/2022 13:23

not rn, maybe in an hour or two if you're still on?

=== @arceusplayer11 (discord: Deedee) 01/18/2022 19:19

Okay, so the sword needs to be repositioned with big Link in all directions
except maybe down? Idk
But left, right, and up aren't cutting it

=== @arceusplayer11 (discord: Deedee) 01/18/2022 19:32

Either way, the Link sprites themselves are working
though it looks terrible without working on the weapons as well; the best looking one is the sword slash, which looks kinda decent
But stabbing and hammer both draw *under* Link and can barely be seen

=== @ P-Tux7 01/18/2022 22:01

(replying to @arceusplayer11 (discord: Deedee) "Okay, so the sword needs to b‚Ä¶"): this should preferably be a customizable stored offset given that there's at least two big link sprites (LTTP, Minish Cap)

=== @ P-Tux7 01/18/2022 22:04

(replying to @arceusplayer11 (discord: Deedee) ""): wait, is this a shadow being drawn under Link, or is it part of the sprite

=== @ P-Tux7 01/18/2022 22:08

if it's part of the sprite it looks very weird when used with roc's feather and falling down from a warp pit, and lttp uses it for a lot of other shenanigans as well (while he's invisible when hurt, while he's invisible when using the magic cape, gb cliffs, pegasus boots bonking)

=== @ P-Tux7 01/18/2022 22:10

(other uses for constant drawn shadows include having an item on the floor or while falling from the ceiling have a shadow on the ground but not while held up, and telling the Z-Axis [if enabled] of jumping/flying enemies + all enemies that fall from ceilings not looking weird)

=== @ P-Tux7 01/18/2022 22:11

you know, i don't know if we could fit it (maybe as an item flag or quest rule?), but invisible enemies that only display their shadows until you get the amulet would be hilarious

=== @ Zaidyer 01/18/2022 22:11

Shadows are one thing, but the bigger issue here are the hard-coded weapon offsets

=== @ P-Tux7 01/18/2022 22:12

(replying to @ Zaidyer "The sword is indeed 16x16 exc‚Ä¶"): IIRC, it does.

=== @ Zaidyer 01/18/2022 22:12

Might have to make those adjustable to account for variance in sprites

=== @ P-Tux7 01/18/2022 22:13

The other issue is that even if you COULD adjust the offsets from the item editor tab... what about the *beam*?

=== @arceusplayer11 (discord: Deedee) 01/20/2022 14:08

the new animations are kinda in in the nightly; they look bad without me doing the weapon portion, but the sprite portion should work

=== @ P-Tux7 01/20/2022 19:43

oh?
also hold on a sec

=== @ P-Tux7 01/20/2022 19:55

Ok so hi I am making a Big Link sprite
and is it positioned like this
![image](https://cdn.discordapp.com/attachments/922161694782943322/933812045617446943/unknown.png)
Or like this
![image](https://cdn.discordapp.com/attachments/922161694782943322/933812115754598440/unknown.png)
(Magenta/purple: Tile delineators
Cyan: Tile that I should pick in the player sprite picker? Maybe?
Blue: Link's hitbox if set to Big Player Hitbox)

=== @arceusplayer11 (discord: Deedee) 01/20/2022 20:11

The top one
But
cyan should be where the blue is

=== @ P-Tux7 01/20/2022 20:15

ohh ok
i thought it was upper left since it was like that for enemies
wait so do big link sprites use all 6 tiles, or just the 32x32 pixel portion in the center of that image?

=== @arceusplayer11 (discord: Deedee) 01/20/2022 20:20

just the 32x32 portion

=== @ P-Tux7 01/20/2022 22:27

thanks!
i'd appreciate if you could post a guide to the new animations, what they're used for, how many frames, etc.
also did you or emily ever fix the bug net thing
https://discord.com/channels/876899628556091432/920175690752610356

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:35

(replying to @ P-Tux7 "i'd appreciate if you could p‚Ä¶"): @ Zaidyer posted an image guide a bit up

=== @ P-Tux7 01/20/2022 22:43

(replying to @ Zaidyer ""): wait hrm
i thought swimming was four frames

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:43

swimming is 4 frames, yeah
that image isn't completely accurate

=== @ P-Tux7 01/20/2022 22:44

ah good you set it to that?

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:44

But it's like, a lot of frames of walking
4 frames of slashing (6 when 180 sword gets added)
3 frames of stabbing and hammering

=== @ P-Tux7 01/20/2022 22:45

(replying to @arceusplayer11 (discord: Deedee) "But it's like, a lot of frame‚Ä¶"): 1 standing 8 walking

=== @ P-Tux7 01/20/2022 22:50

so is the "wands and canes use pound" rule thing still unimplemented?
(i imagine for sake of implementation the rule being on would ignore both whether the wand/cane can melee damage and whether it uses slash or not)

=== @ P-Tux7 01/20/2022 22:52

lemme pin something

=== @ P-Tux7 01/20/2022 22:54

link's framedata when using rods in lttp:
1st tile: 3 frames
2nd tile: 4 frames
3rd tile: 6 frames
appears to be same numbers for all directions
(meta, MessageType.pins_add) 

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:54

(replying to @ P-Tux7 "so is the "wands and canes us‚Ä¶"): yeah, still is
Right now, my focus currently is searching for compat issues
fixing them

=== @ P-Tux7 01/20/2022 22:54

and let's see hammer framedata...

=== @arceusplayer11 (discord: Deedee) 01/20/2022 22:55

(replying to @ P-Tux7 "link's framedata when using r‚Ä¶"): thank you
will be very helpful later

=== @ P-Tux7 01/20/2022 22:55

link's framedata when using the hammer in lttp:
1st tile: 3 frames
2nd tile: 4 frames
3rd tile: 17 frames
appears to be same numbers for all directions

oh, you know what? even though it's inaccurate to LTTP, that means the hammer sparks should start on frame 8 as well since that's when the hammer touches the ground
(meta, MessageType.pins_add) 
the wand/hammer frames are synced up to each link frame, no desync or anything. they also make link unable to move until the animation is complete. so he's paused for 13 frames using a rod, and 24 frames using the hammer
(meta, MessageType.pins_add) 

=== @ P-Tux7 01/20/2022 22:58

(replying to @arceusplayer11 (discord: Deedee) "Right now, my focus currently‚Ä¶"): oh god you mean old quests?
sorry that i haven't been very helpful on that lately
been in a slump

=== @arceusplayer11 (discord: Deedee) 01/20/2022 23:00

Well; sorta
right now I've been in a Yuurand mood and have been trying to get Yuurand working in 2.55
but certain. goddamn. music tracks keep looping the first few seconds but they don't in 2.53

=== @EmilyV99 (discord: Emily) 01/20/2022 23:01

Great test case for tons of bugs
I haven't the first idea about anything music-related

=== @ P-Tux7 01/20/2022 23:02

(replying to @EmilyV99 (discord: Emily) "Great test case for tons of b‚Ä¶"): Panoply should be too for npc scripts since it directly modifies engine enemies far more than most other quests do, though in a global or ffc script of course
and her 6th quest too
and i think lweapons and eweapons too...?
the enemy stuff in that quest is an "according to all known laws of aviation, there is no way that..." moment

=== @arceusplayer11 (discord: Deedee) 01/21/2022 01:05

(replying to @arceusplayer11 (discord: Deedee) "but certain. goddamn. music t‚Ä¶"): and it turns out this might have been my stupid fault and I might've gone on a wild goose chase for nothing
lovely.

=== @ Zaidyer 01/25/2022 12:34

Changelog for Alpha 102 reports Z3 Animation fixes but I'm not seeing any
ZQuest still plays the long (correct) animations while ZC falls back to BS-Zelda style

=== @ P-Tux7 01/25/2022 13:42

Does that include the weird 2-frame swimming/swim moving?
Also, make sure to save your quest in Alpha 102 - I'm sure there's compatibility checks in place so older quests use the old buggy kind

=== @ Zaidyer 01/25/2022 13:48

Okay so I didn't notice there was a new compatibility rule I needed to uncheck
So far it's hard to tell that the new animations are working with the base A Link to the Past sprites, but I did some frame-by-frame checks and they do work now. Albeit strangely for some weapons.

=== @ Zaidyer 01/25/2022 13:50

@arceusplayer11 (discord: Deedee) Hookshot is doing a weird thing where you see frame 1 of Stab while the weapon is being drawn, then at the very end when it's retracted all the way and stops being drawn you see frame 2 of Stab

=== @ Zaidyer 01/25/2022 13:53

The full Slash animation for the Sword is played but cuts out before the end, I presume this is based on earlier discussion here about doing that for 90-degree slashing

=== @ Zaidyer 01/25/2022 13:54

The full 3-frame Hammer animation isn't working though. It switches from Hammer to Stab at the end.

=== @ Zaidyer 01/25/2022 14:06

That's not a case of mistaken sprites on my end either, I used different ones for each animation and it definitely changes from Hammer to Stab

=== @ P-Tux7 01/25/2022 14:08

I'll also look into the death animation tomorrow

=== @ P-Tux7 01/25/2022 14:09

Besides Link flopping in Z3, Z3 Link uses two walking frames of animation while rotating in ZC, instead of Z3 where he only used the standing frames

=== @ P-Tux7 01/25/2022 14:38

Also perhaps a Boomerang toss/catch sprite, and a QR that makes the boomerang have a delay to it before spawning, as well as showing in Link's hand during the delay. I'll have to crunch the frames there too

=== @arceusplayer11 (discord: Deedee) 01/25/2022 22:52

(replying to @ Zaidyer "@arceusplayer11 (discord: Deedee) Hooksh‚Ä¶"): ah shoot, I need to have an exception for the hookshot

=== @ P-Tux7 01/26/2022 00:18

Oh turns out there's no catch sprite even if you stand still
Boomerang hold: 7 frames
Boomerang toss (same as stab/hookshot): 6 frames

=== @ P-Tux7 01/26/2022 00:47

Hurt frames
Code:
H: Hurt, visible
I: Invisible except for shadow (which becomes small during this animation)
HHIHIHIHIHIHIHIHIHI
In short, 1 extra hurt frame at the beginning, then 18 more frames where hurt and invisible are alternated
Total: 19

=== @ P-Tux7 01/26/2022 00:56

Death frames:
72 hurt frames in the direction that Link is facing (NO flickering)
6 down-stand frames
6 left-stand frames
6 up-stand frames
6 right-stand frames
6 down-stand frames
6 left-stand frames
6 up-stand frames
6 right-stand frames
6 down-stand frames
6 left-stand frames
6 up-stand frames
6 right-stand frames
4 Death frame 1
("Bonk" displays beneath Link for the first 4 frames of this next animation)
292(?) Death frame 2
Total: 440 (if this is longer than the Z1/ZC death animation, feel free to cut off the Death Frame 2)

Death frame 1 and 2 are always facing to the right, so we only need 1 death player sprite.
I'll try and get the boomerang/death bonk offsets later

=== @ P-Tux7 01/26/2022 00:58

(If you're wondering what the death bonk is, it's this. It's gotta be displayed separately due to being drawn beneath the player tiles)
![image](https://cdn.discordapp.com/attachments/922161694782943322/935700281776295956/LTTPHack-v13.1.1-emulator-vanillahud490.png)

=== @EmilyV99 (discord: Emily) 02/03/2022 03:24

@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 02/03/2022 04:24

(replying to @arceusplayer11 (discord: Deedee) "ah shoot, I need to have an e‚Ä¶"): This is the only *bug*, right?

=== @arceusplayer11 (discord: Deedee) 02/03/2022 04:25

I think so, yeah
wand too maybe

=== @EmilyV99 (discord: Emily) 02/08/2022 13:21

(meta) thread name was changed: üîìZ3 Animations unimplemented in Zelda.exe

=== @ P-Tux7 02/08/2022 18:19

yeah so, we should move this to feature requests for expansion?

=== @ P-Tux7 02/10/2022 07:10

oh god... i need to research the *spin attack* framedata
i am very sorry
## ‚úÖüîíPols Voice cannot jump over water by Default (#1106)
@ HeroOfFireZC opened this issue on 12/19/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922192911146315816



=== @ HeroOfFireZC 12/19/2021 18:25

Pols Voice need the movement flag "Can Walk On Liquids" enabled in order to jump over Water combos. This is also a compatibility bug, as they jumped over Water in older versions.
Flag Off - Pols Voice stuck on the platforms.
![image](https://cdn.discordapp.com/attachments/922192911146315816/922193032051318805/zc_screen00001.png)
Flag On - Move like they did in earlier versions.
![image](https://cdn.discordapp.com/attachments/922192911146315816/922193099160162324/zc_screen00002.png)
The flag is off by default, both in new quests and loading older quests.

=== @EmilyV99 (discord: Emily) 12/20/2021 04:16

Should be fixed
(meta) thread name was changed: ‚úÖüîíPols Voice cannot jump over water by Default

=== @EmilyV99 (discord: Emily) 12/20/2021 04:46

@ HeroOfFireZC https://cdn.discordapp.com/attachments/922348751119609907/922349900572811294/testbuild.zip

=== @ HeroOfFireZC 12/20/2021 06:26

Seems to be fixed in this build.
## ‚úÖüîíSingle Block Trigger Triggers Secrets when Multiple (#1107)
@ HeroOfFireZC opened this issue on 12/19/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922214705328689154



=== @ HeroOfFireZC 12/19/2021 19:52

When a block puzzle involves moving blocks on top of multiple Block Trigger (66) Flags, normally you need to push blocks on all of them. In 100, secrets are triggered as soon as you cover *one*.

![image](https://cdn.discordapp.com/attachments/922214705328689154/922214750585258074/zc_screen00005.png)

![image](https://cdn.discordapp.com/attachments/922214705328689154/922214779173605426/unknown.png)
The door at the bottom (Secret Flag 16) was opened after moving just one block onto a Block Trigger

=== @ P-Tux7 12/19/2021 20:50

Sorry. This was probably a result of me asking for switchhooked pushblocks (if you set them to have the switch hookable attribute) to depress block triggers if you swap them onto one

=== @ P-Tux7 12/19/2021 20:57

Like the diamonds in Oracle of Ages
There's also a setting on the dedicated Switch Hook Blocks to let them depress block triggers even if the block itself is unpushable, much like those diaminds.

=== @EmilyV99 (discord: Emily) 12/20/2021 03:55

err, no there isn't

=== @EmilyV99 (discord: Emily) 12/20/2021 04:10

Bah dammit
It's checking one fewer layer than it should for triggers because I have a `<` not `<=`
...and I'm guessing you have only layer 0 set to work, so it checks *no* layers, and thus assumes it found them all...
(meta) thread name was changed: ‚úÖüîíSingle Block Trigger Triggers Secrets when Multiple

=== @EmilyV99 (discord: Emily) 12/20/2021 04:45

@ HeroOfFireZC https://cdn.discordapp.com/attachments/922348751119609907/922349900572811294/testbuild.zip

=== @ HeroOfFireZC 12/20/2021 06:26

Looks to be fixed in this build.
## üíäüîìLayers do not draw correctly (#1108)
@ Orithan opened this issue on 12/20/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/922323457692299356



=== @ Orithan 12/20/2021 03:04

Layers do not appear to be drawing correctly in the latest nightly. They seem to be drawing the contents of Layer 0 to that layer.
https://cdn.discordapp.com/attachments/876906363756879902/922318901252075550/zc_screen00001.png
https://cdn.discordapp.com/attachments/876906363756879902/922319386566610984/zc_screen00002.png
In the latter case the layered stuff on Layer 1 is causing the contents of Layer 0 to be drawn above the player because said Layer 1 Combos are overhead combos

=== @ Orithan 12/20/2021 03:07

In the former case Layer -2 is drawing above Layer 0

=== @EmilyV99 (discord: Emily) 12/20/2021 03:59

Oh fuck wait, overhead combos are involved?
Thank god, something sane to deal with

=== @EmilyV99 (discord: Emily) 12/20/2021 04:06


I'm THAT stupid, huh?
(2-line fix)
(meta) thread name was changed: ‚úÖüîíLayers do not draw correctly

=== @EmilyV99 (discord: Emily) 12/20/2021 04:45

@ Orithan https://cdn.discordapp.com/attachments/922348751119609907/922349900572811294/testbuild.zip

=== @ Orithan 12/20/2021 22:08

I think this is irrelevant because you said this was fixed for the next build in another channel, but I am still running into this problem here.

=== @EmilyV99 (discord: Emily) 12/21/2021 05:38

Oh?
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) still in this build?

=== @EmilyV99 (discord: Emily) 12/21/2021 05:49

I know I fixed overhead combos being a problem

=== @ Orithan 12/21/2021 06:17

(replying to @EmilyV99 (discord: Emily) "[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) still i‚Ä¶"): Yes. I don't see a new build in [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) after the one you linked me to

=== @EmilyV99 (discord: Emily) 12/21/2021 06:19

https://discord.com/channels/876899628556091432/876906918847852594/922368515661529158
That one is newer than the download in this thread

=== @ Orithan 12/21/2021 08:04

It still has the problem

=== @ Orithan 12/22/2021 04:31

(replying to @EmilyV99 (discord: Emily) "@ Orithan https:‚Ä¶"): Tried this. It still has the problem

=== @EmilyV99 (discord: Emily) 12/22/2021 04:39

so what exactly is happening wrong?

=== @ Orithan 12/22/2021 04:42

The bug I reported
Layer -2 is rendering over Layer 0, Layer 2 is background on all screens in the first screenshot

=== @EmilyV99 (discord: Emily) 12/22/2021 04:44

dmap flag layer 2 is background, screen flag layer 2 is background, or both?

=== @ Orithan 12/22/2021 04:44

Both

=== @EmilyV99 (discord: Emily) 12/22/2021 04:44

They are a toggle
both being enabled disables it

=== @ Orithan 12/22/2021 04:45

...
I think it would be clearer if it was listed as a toggle on the screen data end
It didn't used to be a toggle

=== @EmilyV99 (discord: Emily) 12/22/2021 04:47

It was *supposed* to be a toggle
but zoria doesn't know how to do shit right

=== @ Orithan 12/22/2021 04:48

Oh
Its still listed as Layer -2 in screen data

=== @ Orithan 12/22/2021 04:49

There now it's working
ZC still has oddities with viewing Layer 2 as background even with the appropriate setting is checked

=== @EmilyV99 (discord: Emily) 12/23/2021 02:57

What oddities?

=== @ Orithan 12/23/2021 03:02

Namely the preview for other screens does not use the Layer 2 as background property when the view option "View Layer 2 as background" is checked

=== @EmilyV99 (discord: Emily) 12/23/2021 03:03

@arceusplayer11 (discord: Deedee) ?
(For the record, the view as bg option also is toggled by the screen flag)
(...or, should be, at least)

=== @ Orithan 12/23/2021 03:05

(replying to @EmilyV99 (discord: Emily) "(For the record, the view as‚Ä¶"): The screen flag toggles it fine and it works with adjacent screens that also have the flag

=== @EmilyV99 (discord: Emily) 12/23/2021 03:09

So adjacent screens just ignore the view option?
Pretty sure @arceusplayer11 (discord: Deedee) could probably fix that easily enough

=== @EmilyV99 (discord: Emily) 12/23/2021 06:57

(meta) thread name was changed: üíäüîìLayers do not draw correctly
## ‚úÖüîíAnimated combo preview in CB Editor doesnt calculate frames correctly (#1109)
@ Deathrider opened this issue on 12/20/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922323730363990057



=== @ Deathrider 12/20/2021 03:05

Ex: I have a 4 frame combo, if i go into the combo editor when the animation is on frame 1, it is fine. But if I enter the combo editor when the combo animation is on, say, the second frame, then the preview will show that frame +3 (it doesnt know the starting frame is already on frame 2 so it goes off of the intended cycle)

=== @ Deathrider 12/20/2021 03:11

https://drive.google.com/file/d/1iooAb9kOLqmKts9paB4GTQblRY4f27Io/view?usp=sharing

=== @EmilyV99 (discord: Emily) 12/20/2021 03:59

ah crap, it should reset animations when you open the editor....

=== @EmilyV99 (discord: Emily) 12/20/2021 04:07

(meta) thread name was changed: ‚úÖüîíAnimated combo preview in CB Editor doesnt calculate frames correctly

=== @EmilyV99 (discord: Emily) 12/20/2021 04:45

@ Deathrider https://cdn.discordapp.com/attachments/922348751119609907/922349900572811294/testbuild.zip

=== @ Deathrider 12/20/2021 04:51

@EmilyV99 (discord: EmilyV) fixed
## ‚úÖüîí[QR] SCCs-Item Bundles Can Merge Items (#1110)
@ P-Tux7 opened this issue on 12/20/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/922384640902320149



=== @ P-Tux7 12/20/2021 07:07

Useful for if you get a potion from a SCC. Such as a shopkeeper or a potion given to you by an NPC

=== @EmilyV99 (discord: Emily) 12/20/2021 07:17

@ P-Tux7 if you want to test it, QR is under items tab
https://cdn.discordapp.com/attachments/922384640902320149/922387256201842728/zquest.exe
https://cdn.discordapp.com/attachments/922384640902320149/922387256898125844/zelda.exe
(meta) thread name was changed: ‚úÖüîí[QR] SCCs-Item Bundles Can Merge Items

=== @ P-Tux7 12/20/2021 07:26

awesome!
## [QR] Link, Items, and Enemies Always Use Shadow Sprites (#1111)
@ P-Tux7 opened this issue on 12/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/922543627044003840



=== @ P-Tux7 12/20/2021 17:39

Not just while jumping or Z=/=0, but always. Similar to a Pols Voice, Vire, Tektite, Keese, or Peahat

=== @ P-Tux7 01/16/2022 19:17

You know, I think that might be a good per-enemy setting. It's also what @ Zaidyer wanted

=== @ P-Tux7 01/17/2022 10:10

(meta) thread name was changed: [QR] Link, Items, and Enemies Always Use Shadow Sprites
## More than 8 triforce pieces (#1112)
@ cbailey78 opened this issue on 12/20/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/922626884871794728



=== @ cbailey78 12/20/2021 23:09

I don't know if this is done, but I think i think we should have the ability to collect more than 8 triforce pieces to have a longer quest especially if the quest was a really good enjoyable one.  There have been times I would enjoy the quest but the end is nearing.

=== @ P-Tux7 12/20/2021 23:41

Agreed
I could have sworn I also made a request to have the Triforce Gate room allow you to set a number of triforce pieces that you need. Which would go well with this, and also allows for some places you can go when you've got only part of the triforce but not all of it.

=== @ cbailey78 12/21/2021 00:06

When I made a triforce piece above number 8, the tile becomes invisible until I set it below number 8, then it's visible.

=== @EmilyV99 (discord: Emily) 12/23/2021 07:32

To make this work for triforce rooms, would be easy enough
to make this work for the triforce on the subscreen, would be nearly impossible
...To allow displaying the current triforce count you own on the subscreen, might be doable, but will be painful

=== @ P-Tux7 12/23/2021 07:42

proposal: a triforce subscreen object that changes to the next tile when the triforce # in its properties has been obtained
or wait, can't one just display the triforce piece ITEM in the subscreen?

=== @EmilyV99 (discord: Emily) 12/23/2021 07:52

^That I believe would display if you have it in the current dungeon
similarly to map/compass
new subscreen objects are not something I'll be touching
@arceusplayer11 (discord: Deedee) is free if she's insane enough

=== @ P-Tux7 12/24/2021 22:08

i wonder if there could be an individual triforce piece subscreen object where it displays a set tile (from an attribute) once you have a triforce from the level equal to the object's Level attribute
so for level 1's triforce you'd set an object with the Level property of 1 and its tile set to the left triforce
Level 2, level property is 2 and you pick the right facing triforce tile
## ‚ùåüîíTorch Option for Damage Combos (#1113)
@ SkyLizardGirl opened this issue on 12/21/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/922651404475199519



=== @ SkyLizardGirl 12/21/2021 00:47

There should be an options to set up combos that can damage the player as Torches that light up a room also.  This would be mainly fires on the ground as seen by old men in caves if you use fire by itself alone as a tile in dungeons or map screens etc.

![image](https://cdn.discordapp.com/attachments/922651404475199519/922651430848962631/unknown.png)
I cannot set it as a torch and as a Damage Combo, it takes up that option to do so.
Maybe a checkbox for torch idk.

=== @ SkyLizardGirl 12/21/2021 00:49

Or new rule maybe.

=== @ Moosh 12/21/2021 00:55

Can you not just layer one under the other?

=== @ SkyLizardGirl 12/21/2021 00:57

Huh?
Actually Damage Combos with torch effect might be the easiest new type to make.
.
Does torch work on overlayer torches?

=== @ P-Tux7 12/21/2021 02:32

i'm not sure but i do know damage combos work on overlayers

=== @ Alucard648 12/21/2021 05:35

QR - Damage Combos Work on Layer 1 & 2.

=== @EmilyV99 (discord: Emily) 12/21/2021 05:37

`make one combo to the work of two combos` is a feature request that is never going to happen
there are only so many attributes on combos
layers exist for a reason
(meta) thread name was changed: ‚ùåüîíTorch Option for Damage Combos
## Touch - Next combo type (#1114)
@ cbailey78 opened this issue on 12/21/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/922725759284568064



=== @ cbailey78 12/21/2021 05:42

I think we should have a touch - next combos where combo tile changes to the next when link touches it whereas step - next combo type which we have when the tile changes when link is completely on it.  This would be essential for crumbling bridge tiles in Zelda 2.

=== @ Alucard648 12/21/2021 05:45

I think, this feature could be implemented as special case of handling step->* combo types for combos that have full or partial solidity.

=== @EmilyV99 (discord: Emily) 12/23/2021 07:30

so, would he touch something solid if he steps next to it, or only if he pushes into it? (Gravity would 'push' down in sideview, of course)
the difference more being, if you had a 1-tall gap, would he touch the floor and the ceiling at once, or only touch the ceiling if he jumps into it?
or, in non-sideview, if you walk along a mountain, are you touching every bit of it, or do you need to push towards the mountain to trigger it?

=== @ Alucard648 12/23/2021 08:14

Top-down: must push against to trigger.
Sideview: sides -> push to trigger. Top -> just step on it, like crumbling bridges in Z2. Bottom -> bonk against to tringger, like Mario.

=== @EmilyV99 (discord: Emily) 12/23/2021 08:19

so, any combo that is inside Link's 16x16 will trigger
and any combo that has its' solidity prevent Link from moving (either from gravity, manual movement, or jumping), will trigger
....not gonna be the easiest to add, but shouldn't be THAT bad.
## ‚ùìEnemies ignoring pitfall combos (#1115)
@ tacochopper opened this issue on 12/21/2021

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922764275502686228



=== @ tacochopper 12/21/2021 08:15

Enemies are ignoring pitfall combos, as per conversation with Emily in the PureZC discord. Regularly happening with moblins and like likes, but more recently with gels and zols as well.
we did it
![image](https://cdn.discordapp.com/attachments/922764275502686228/922764337846833182/asTH5T00tG.gif)

=== @ 4matsy 12/21/2021 11:00

...Now *that* is a truly frightening video.
Floating Like-Likes are not to be fucked around with, sir. o.o;;;

=== @ mitchfork 12/21/2021 17:28

I should have reported this months ago. I've been giving them inherent No Ground Enemies flags lol

=== @EmilyV99 (discord: Emily) 12/21/2021 17:39

How do you replicate it?
in a fresh quest it doesn't occur

=== @ P-Tux7 12/21/2021 17:44

isnt whether the enemy falls in pits and avoids pits both enemy flags

=== @EmilyV99 (discord: Emily) 12/21/2021 17:45

yes, with this combination the enemy should die in the pit and display a falling sprite

=== @ P-Tux7 12/21/2021 17:48

@deedee wizzlikes

=== @ tacochopper 12/22/2021 07:18

(replying to @EmilyV99 (discord: Emily) "in a fresh quest it doesn't o‚Ä¶"): yeah i see what you mean, i just did a test myself and i can't replicate it

=== @ tacochopper 12/22/2021 07:29

ok now i can't replicate it in the quest, wtf

=== @ mitchfork 12/22/2021 16:13

(replying to @ mitchfork "I should have reported this m‚Ä¶"): update to this comment: I just remembered this was a Ghost thing.  Ghost movement functions don't respect pits,  but this is a compat issue with Ghost needing to work in 2.53 and 2.55
so not the same as this bug

=== @ tacochopper 12/23/2021 02:11

(replying to @ mitchfork "update to this comment: I jus‚Ä¶"): i have ghost in the  quest but surely it wouldn't be affecting default enemies like likelikes, right?

=== @EmilyV99 (discord: Emily) 12/23/2021 02:12

I wouldn't *expect* it to

=== @ mitchfork 12/23/2021 02:12

nah, wouldn't

=== @EmilyV99 (discord: Emily) 12/25/2021 20:25

(replying to @ tacochopper "ok now i can't replicate it i‚Ä¶"): unless we can replicate it there isn't much we can do about it

=== @EmilyV99 (discord: Emily) 12/25/2021 20:34

(meta) thread name was changed: ‚ùìEnemies ignoring pitfall combos
## ‚ùìDodongo doesnt like smoke (#1116)
@ Kampy opened this issue on 12/21/2021

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922940601538871356



=== @ Kampy 12/21/2021 19:56

The boss Dodongo usually can be stunned by bomb smoke and then killed with the sword. It didnt seem to work in the Zelda Remake Quest.

=== @EmilyV99 (discord: Emily) 12/21/2021 19:59

it should
what version are you using?

=== @EmilyV99 (discord: Emily) 12/21/2021 20:01

@arceusplayer11 (discord: Deedee)

=== @ Kampy 12/21/2021 20:27

255
1st Remake

=== @ Kampy 12/21/2021 20:38

I just went into another room with 3 dodongos and there it worked. Maybe I just missed the monster? I thought I had hit it though.

=== @EmilyV99 (discord: Emily) 12/21/2021 20:38

what build

=== @ Kampy 12/21/2021 20:39

It was the boss from level 2 where I thought it hadnt worked

=== @EmilyV99 (discord: Emily) 12/21/2021 20:39

screenshot the `ZC->About` menu

=== @ Kampy 12/21/2021 20:40

255  61

=== @ Kampy 12/21/2021 20:41

But now that I stunned the dodongos in the other room successfully Im in doubt if I just missed him earlier.

=== @EmilyV99 (discord: Emily) 12/21/2021 20:43

Alpha 61?
That's over a year old
download an update
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Kampy 12/21/2021 20:46

It says the version is from yesterday

=== @EmilyV99 (discord: Emily) 12/21/2021 20:48

(replying to @ Kampy "255  61"): ?
I asked for a screenshot for a reason

=== @ Kampy 12/21/2021 20:50

What more do you need? It is Version 255 Build 61 built yesterday by you.

=== @EmilyV99 (discord: Emily) 12/21/2021 20:50

Alpha number is usually important

=== @ Kampy 12/21/2021 20:50

100

=== @EmilyV99 (discord: Emily) 12/21/2021 20:51

and is usually the most important number
so not giving that
meant I had no idea what you were talking about
Anyway
you need to hit the front of the dodongo

=== @ Kampy 12/21/2021 20:51

You asked for the Build number not the Alpha number.  üòõ

=== @EmilyV99 (discord: Emily) 12/21/2021 20:52

I asked what build
build means all of the information

=== @ Kampy 12/21/2021 20:52

Anyway, I think you can hit him from the side in the original though I dont remember exactly.

=== @EmilyV99 (discord: Emily) 12/21/2021 20:54

@ naturesucks ?

=== @ Kampy 12/21/2021 20:54

Yes, thats it
I just fought them again
You cant hit them from the sides
Thats the error
Like side of the face should work

=== @ tim 12/21/2021 20:55

pretty sure side is expected behavior

=== @ Kampy 12/21/2021 20:56

I landed a perfect hit and it didnt register. So now Im sure it is different.

=== @ tim 12/21/2021 20:56

1st remake is what
the one packaged with zc?

=== @ Kampy 12/21/2021 20:57

It is called like that. I dont know if it is made by you.
https://www.youtube.com/watch?v=O9iIbx88hxU
This here

=== @ tim 12/21/2021 20:58

darkflamewolf's remake, noted

=== @ P-Tux7 12/21/2021 21:03

oh yeah i wanted to report this a few days ago but forgot
the hitbox to smoke a dodongo DOES seem easier/more lenient to do on nes

=== @ P-Tux7 12/21/2021 21:43

i'll test just how far later

=== @EmilyV99 (discord: Emily) 12/23/2021 08:59

(meta) thread name was changed: ‚ùìDodongo doesnt like smoke
## ‚ùåüîíThe ghosts on the cemetery (#1117)
@ Kampy opened this issue on 12/21/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922948755509108746



=== @ Kampy 12/21/2021 20:28

When I kill the master ghosts the spawning ghosts on the cemetery should disappear but they dont (1st Remake)

=== @ Kampy 12/21/2021 21:00

darkflamewolf's remake

=== @ tim 12/21/2021 21:10

not an engine issue - custom quest liberty

=== @arceusplayer11 (discord: Deedee) 12/22/2021 06:55

(meta) thread name was changed: ‚ùåüîíThe ghosts on the cemetery
## ‚ùåüîíBoss Level 5 door locks you in (#1118)
@ Kampy opened this issue on 12/21/2021

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/922953831061540914



=== @ Kampy 12/21/2021 20:49

When you dont find the flute and you enter the boss battle in level 5 it locks the door behind you and you can only suicide. I dont think it was like that in the original game. (1st Remake)

=== @ tim 12/21/2021 20:49

it was
pretty sure there's multiple spots in z1 you can softlock yourself

=== @EmilyV99 (discord: Emily) 12/21/2021 20:50

(meta) thread name was changed: ‚ùåüîíBoss Level 5 door locks you in

=== @ tim 12/21/2021 20:59

custom quest - does not apply to NES consistency

=== @ Kampy 12/21/2021 20:59

I just checked it
It does not lock you in
in the original game
bug found in darkflamewolf's remake

=== @ tim 12/21/2021 21:01

yeah we're not making changes on that - it's a custom quest and thats at the developers discretion
let me see if its in the actual 1st.qst

=== @ Kampy 12/21/2021 21:02

In the NES game it is not. I checked it.

=== @ tim 12/21/2021 21:04

level 5 is a key door
in the packaged 1st.qst this is not a shutter

=== @ tim 12/21/2021 21:06

since this is a custom quest, we aren't at liberty to change this

=== @EmilyV99 (discord: Emily) 12/21/2021 21:09

@ Kampy report it to the questmaker
that isn't our quest, we aren't the right people to report it to

=== @ tim 12/21/2021 21:10

```It alters many things in the original quest, yet retains all of its secrets and dungeon layouts.```
## üíäüîìMoving Spike Things look strange (#1119)
@ Kampy opened this issue on 12/21/2021

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/922961062003888168



=== @ Kampy 12/21/2021 21:17

Again this might be a bug from darkflamewolf's remake but those spikes that jump at you look like heart icons really strange. Not sure if that is intended but it looks like a bug.

=== @ tim 12/21/2021 21:21

did this happen in 1st dungeon?

=== @ tim 12/21/2021 21:28


![image](https://cdn.discordapp.com/attachments/922961062003888168/922963699810050068/unknown.png)
native traps using wrong tile

=== @ Kampy 12/21/2021 21:33

Yes it happened in all situations

=== @arceusplayer11 (discord: Deedee) 12/22/2021 06:55

yikes, that's an issue
Might've been me, I'm the one who's been doing enemy stuff. I'll take a look

=== @arceusplayer11 (discord: Deedee) 12/24/2021 11:28

@ naturesucks what quest is that?
I can't replicate it in Origin

=== @ tim 12/24/2021 15:31

dfw's 1st remake
its a 1.92 b183 quest
im assuming something with quest compat shifted tiles

=== @arceusplayer11 (discord: Deedee) 12/24/2021 15:53

...she made *two* remakes of Z1!?

=== @ tim 12/24/2021 15:57

https://www.zeldaclassic.com/resource-listing/entry/46/

=== @EmilyV99 (discord: Emily) 02/03/2022 03:24

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/11/2022 09:19

Weird, I can't seem to reproduce it

=== @arceusplayer11 (discord: Deedee) 02/11/2022 11:41

@ naturesucks do you have any info on the build this was happening in?

=== @ tim 02/11/2022 14:19

one of the late alpha 100 nightlies

=== @ tim 02/11/2022 14:20

probably the last one before 101

=== @ tim 02/11/2022 14:22

https://discord.com/channels/876899628556091432/876906918847852594/922368515661529158

=== @ tim 02/11/2022 14:24

ok discord, dont link the post then

=== @arceusplayer11 (discord: Deedee) 02/12/2022 16:15

okay, so it was broken but is no longer broken
the question is whether we fixed it, or if the broken behavior got shafted elsewhere

=== @arceusplayer11 (discord: Deedee) 02/12/2022 19:40

So I accidentally fixed it with a bandaid fix, but the real problem was that the ANONE compat rule was being flagged for pre-2.55 quests when it shouldn't have been. Fixed.
(meta) thread name was changed: üíäüîìMoving Spike Things look strange

=== @EmilyV99 (discord: Emily) 02/13/2022 05:12

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## üîìCan we fix the botched fonts? (#1120)
@ Moosh opened this issue on 12/22/2021

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/923045868490338375



=== @ Moosh 12/22/2021 02:54

A bunch of the fonts Zoria added for 2.55 have some characters that look botched, presumably from being scaled down from their base resolution. For example, the lowercase s in Sherwood looks like a g. Could we touch these up to look more presentable?
I'd be willing to edit them myself if need be

=== @EmilyV99 (discord: Emily) 12/22/2021 04:03

If you want to submit a revised `fonts.dat` that you feel is better, feel free
just don't change any fonts that existed in 2.53

=== @arceusplayer11 (discord: Deedee) 12/22/2021 06:56

Aren't the fonts that Zoria added technically his copyright?
Wouldn't he have a leg to stand on if we kept them?

=== @ Moosh 12/22/2021 07:24

That's a good question. I assumed that given how Zoria was about things the fonts he added would be public domain. I doubt he made any of them himself

=== @arceusplayer11 (discord: Deedee) 12/22/2021 07:32

I remember him making a fuss about this

=== @ Moosh 12/22/2021 07:33

Looking at the list the ones that appear to have downscaling crust are:
-Sherwood
-Fantasy Letters
-COCO Mode I

=== @ Moosh 12/22/2021 13:06

Hmm, tried editing fonts.dat and it's giving me errors and crashing. Presumably because my images are in the wrong format. Any idea what exactly it's expecting? Tried bmp and pcx, seems Gimp may be up to no good again

=== @ Moosh 12/22/2021 13:17


https://cdn.discordapp.com/attachments/923045868490338375/923202604736053308/Coco.bmp

https://cdn.discordapp.com/attachments/923045868490338375/923202626777124934/CocoOrig.bmp

=== @ Moosh 12/22/2021 13:19

Here's the example I was testing with. Also the one I'm least certain about "fixing" because it's so scuffed I can't tell what it was supposed to be and have no idea where Zoria got the original aside from that it resembles this one:
https://www.kreativekorp.com/software/fonts/trs80.shtml

=== @EmilyV99 (discord: Emily) 12/23/2021 00:43

I'd use only the allegro tools
All of them are in /utilities
Grabber, sprite editor, font editor

=== @ Moosh 12/23/2021 02:10

Also crashes when saved with aseprite :/

=== @EmilyV99 (discord: Emily) 12/23/2021 02:10

Then I have no idea
I've never edited fonts.dat, only qst.dat

=== @ Moosh 12/23/2021 02:26

Hmm okay managed to get it to not crash but then I get the ever so helpful "error saving [path]"

=== @EmilyV99 (discord: Emily) 12/23/2021 02:26

Did it save the .dat file?
I've gotten a saving error for the ".h" file it's also supposed to save
But that can be ignored, as long as the .dat is updated

=== @ Moosh 12/23/2021 02:27

It does appear it saved my chances
We have no idea what these supposed errors are?

=== @EmilyV99 (discord: Emily) 12/23/2021 02:28

It's failing to save the header file
I have no idea why
But it also isn't that important
Because it can function without it
All the header does is define a bunch of constants for accessing the dat file
Which is extra hilarious getting the error for qst.dat
Because that has one file in it, so literally just one constant of value 0 in its header...

=== @ Moosh 12/23/2021 02:30

welp

=== @ Moosh 12/23/2021 09:55

Talked to Zoria a bit about the source of the fonts in question. Apparently he redrew them by hand off of references and that's why they have these flaws ü§î
Also gave me this to pass along. I'm pretty sure you guys removed the splash screen altogether but if it's still there, fixed typo
https://cdn.discordapp.com/attachments/923045868490338375/923514236968243230/AGFixedLogo.zip

=== @arceusplayer11 (discord: Deedee) 12/23/2021 10:12

Yeah, we removed the splash screen entirely
it was dumb

=== @ Moosh 12/30/2021 09:57

Hey, so sorry I completely forgot about this
Here's a dat file with my edits. Check it out and see if it works.
https://cdn.discordapp.com/attachments/923045868490338375/926051543839567872/fonts.dat

=== @ Moosh 12/30/2021 09:59

Fonts affected should be Sherwood (minor edits), Coco Mode 1, Coupe, and Sinclair QL (this one appears to be very similar to Coupe for some reason)

=== @ Moosh 12/30/2021 10:01

The last two required resizing some of the characters, but those characters were also completely broken so...
¬Ø\_(„ÉÑ)_/¬Ø

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:32

@EmilyV99 (discord: EmilyV) I wouldn't know anything about this

=== @EmilyV99 (discord: Emily) 01/17/2022 20:42

uhh
if you want to check it, just replace the `classic_fonts.dat` and see if the fonts look right
and if they do, then.... it can replace the `classic_fonts.dat` in the repo

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:43

Ah, okay

=== @EmilyV99 (discord: Emily) 02/08/2022 13:21

(meta) thread name was changed: üîìCan we fix the botched fonts?
## Rock and Boulder Attributes (#1121)
@ P-Tux7 opened this issue on 12/22/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/923128886047408159



=== @ P-Tux7 12/22/2021 08:24

Flags:
Kill When Below Screen: The rock dies when it is no longer visible. This is to allow for enemies that summon falling rocks without them looping around the screen.

Attributes:
Sound: The sound to play once when it bounces.
Bounce Height: How high it bounces. Fake Z-axis if that rule is off, real Z-axis if it's on.
(meta) thread name was changed: Rock and Boulder Attributes

=== @arceusplayer11 (discord: Deedee) 12/22/2021 08:30

@arceusplayer11 (discord: Deedee) you're the enemy girl, take a look at thi-
...Fuck, I'm Deedee

=== @EmilyV99 (discord: Emily) 12/22/2021 08:53

XD
## ‚úÖüîíS key hotkey to string table editor (#1122)
@ Moosh opened this issue on 12/22/2021

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/923173997137498112



=== @ Moosh 12/22/2021 11:23

Quick access to the string editor can be handy when performing some story and script related stuff. When room data got merged into one menu the S hotkey was freed up again. Could the hotkey for opening the string table be shortened from Alt Q, S to just S? (This'd also ease up some muscle memory for me since I frequently used to use the A and S hotkeys to preview screen special items and the string table)

=== @EmilyV99 (discord: Emily) 12/23/2021 07:23

That did used to be the room string, huh?
I always hated that S wasn't string editor...

=== @EmilyV99 (discord: Emily) 12/23/2021 07:29


![image](https://cdn.discordapp.com/attachments/923173997137498112/923477331895521300/unknown.png)
and there you go, sir
(meta) thread name was changed: ‚úÖüîíS key hotkey to string table editor

=== @ cbailey78 12/24/2021 21:20

You should add "Scroll and select string in current screen" like "Scroll to combo"
## ‚úÖüîíPlayer Death Frame Advance Death Hang (#1123)
@ Orithan opened this issue on 12/22/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/923209393372291122



=== @ Orithan 12/22/2021 13:44

Dying while the system is paused through F3 and using F4 to frame advance hangs ZC.
You cannot use F3 to unpause the program or F4 to continue to frame advance. F6 is shut down during this time as usual. This results in the program being hung and needing to F9 or F10 to reset or quit.

![image](https://cdn.discordapp.com/attachments/923209393372291122/923209474800517200/zc_screen00004.png)
Example of this in action

=== @EmilyV99 (discord: Emily) 12/23/2021 00:48

ffs

=== @ Orithan 12/23/2021 02:39

Also the Current Life counter does not draw during the death animation

=== @EmilyV99 (discord: Emily) 12/23/2021 02:41

Is that an engine subscreen object?

=== @ Orithan 12/23/2021 02:56

Yes
Counter, Curret Life

=== @EmilyV99 (discord: Emily) 12/23/2021 02:58

Check if that object draws during death animation in 2.50.2/2.53 if you can?
I don't feel like that would have changed

=== @ Orithan 12/23/2021 02:59

That object was not present in 2.53

=== @EmilyV99 (discord: Emily) 12/23/2021 02:59

Oh?
It's new??
Who the fuck added new engine subscreen stuff

=== @ Orithan 12/23/2021 02:59

Life, Magic, Max Life and Max Magic were added as selectable counters for the counter object after 2.53

=== @EmilyV99 (discord: Emily) 12/23/2021 03:00

Why weren't they selectable before??
Gaaah zc why everything
Screenshots of the subscreen editor tabs for that object?

=== @ Orithan 12/23/2021 03:36


![image](https://cdn.discordapp.com/attachments/923209393372291122/923418709719150642/Untitled.png)

=== @ Orithan 12/23/2021 03:38

Okay resolved the life counter disappearing on 0 thing
Had to tick "Show Zero"
Which is pretty confusing tbh given the other things that display 0s

=== @EmilyV99 (discord: Emily) 12/23/2021 04:01

Yeah, if it doesn't show 0, then it just shows nothing when the counter is empty

=== @EmilyV99 (discord: Emily) 12/23/2021 06:56

(replying to @ Orithan "Dying while the system is pau‚Ä¶"): need a quest that this occurs in

=== @ Orithan 12/23/2021 06:57

Unable to reproduce this in a fresh file?

=== @EmilyV99 (discord: Emily) 12/23/2021 06:57

correct

=== @ Orithan 12/23/2021 06:58

Because I don't know what in the world does this in the two quest files I've had it in.

=== @EmilyV99 (discord: Emily) 12/23/2021 06:58

Do you have a `hero onDeath` script assigned?

=== @ Orithan 12/23/2021 06:59

Only in the case of Ryuu. Soul Hunter, the quest I posted the screenshot from, doesn't
Unless... that script is empty
I typically assign all the globals with empty files when I start a project and fill them where needed

=== @EmilyV99 (discord: Emily) 12/23/2021 06:59

and, `ZScript->Quest Script Settings->Hero OnDeath Script runs AFTER engine death animation`?

=== @ Orithan 12/23/2021 06:59

No. Not this rule

=== @EmilyV99 (discord: Emily) 12/23/2021 07:03

aha
only happens with that rule off and an ondeath script assigned
and that rule defaults to on in fresh quests

=== @ Orithan 12/23/2021 07:04

I run with that rule off because I want to play my own death animation

=== @EmilyV99 (discord: Emily) 12/23/2021 07:06

*OH*
So, it sets `Playing = false` to disable F6
but that also disables F3/F4
and normally that's fine
because the engine death animation forcibly undoes F3 mode
but the onDeath script does NOT do that
it needs to

=== @EmilyV99 (discord: Emily) 12/23/2021 07:19

(meta) thread name was changed: ‚úÖüîíPlayer Death Frame Advance Death Hang
## ‚úÖüîí1.90 QUEST IN 2.55 COMBO-DELETING SPRITE TILE PICKER BUG (#1124)
@ P-Tux7 opened this issue on 12/23/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/923418491292385300



=== @ P-Tux7 12/23/2021 03:35

okay so first open this quest

https://cdn.discordapp.com/attachments/923418491292385300/923418540655149086/typeb.qst
it's a 1.90 tileset saved in 2.55
and go to sprite data and open one of the sprites, then go to pick a tile for it
at that screen, press escape to back out of it, then again to back out of the sprite, then again to back out of the sprite list
all the combos are blanked out

=== @ P-Tux7 12/23/2021 03:38

wait what the absolute fuck
no
just OPENING and picking a tile for a sprite in that dialog causes all the combos to be blanked out
@EmilyV99 (discord: EmilyV) @arceusplayer11 (discord: Deedee)

=== @ P-Tux7 12/23/2021 03:39

ok so it doesn't happen with new/qst.dat quests
but it does happen with this imported quest

=== @ P-Tux7 12/23/2021 03:42

this happens with ANY misc. sprite - ones that are already in the quest (arrow projectile sprite), and others that are not (magic meter)

=== @ P-Tux7 12/23/2021 03:44

(meta) thread name was changed: 1.90 QUEST IN 2.55 COMBO-DELETING SPRITE TILE PICKER BUG

=== @EmilyV99 (discord: Emily) 12/23/2021 06:40

?
hmmm
I don't see anything happening @ P-Tux7
oh wait
it doesn't happen until the dialog closes
duh
ummmmmmmmmmmm

=== @EmilyV99 (discord: Emily) 12/23/2021 06:43

Guessing this is OriginalTile related, somehow

=== @ P-Tux7 12/23/2021 06:43

ok so good news and bad news

=== @EmilyV99 (discord: Emily) 12/23/2021 06:43

and probably version check related on quest load

=== @ P-Tux7 12/23/2021 06:43

this does not happen with 1.92 tilesets

=== @EmilyV99 (discord: Emily) 12/23/2021 06:44

I think I remember deedee mentioning something about 1.90 quest loading being weird
it probably has a separate block that wasn't handled

=== @ P-Tux7 12/23/2021 06:44

the bad news is that this happens even with an unmodified revenge 2 tileset
https://www.purezc.net/index.php?page=tilesets&id=7

=== @EmilyV99 (discord: Emily) 12/23/2021 06:44

it probably would happen to ANY 1.90 quest

=== @ P-Tux7 12/23/2021 06:44

yeah the good news here is that saving a 1.90 quest in 2.55 isn't what's fucking it up

=== @EmilyV99 (discord: Emily) 12/23/2021 06:44

for the record, the sprite data has very little to do with it

=== @ P-Tux7 12/23/2021 06:44

so it's not permanently borked unless you save the quest AFTER that happens

=== @EmilyV99 (discord: Emily) 12/23/2021 06:44

it's just when it tries to reset all combo animations
it reads every combo as having an original tile of 0
so it

=== @ P-Tux7 12/23/2021 06:45

oh haha those didn't EXIST in 1.90

=== @EmilyV99 (discord: Emily) 12/23/2021 06:45

resets them all to 0
it should be copying the tile to the originaltile
on quest load
but clearly it's doing something weird for 1.90 right now

=== @ P-Tux7 12/23/2021 06:45

hold on lemme grab a 1.84 quest

=== @EmilyV99 (discord: Emily) 12/23/2021 06:46

`if( version < 0x192 )`
guessing that's the culprit

=== @ P-Tux7 12/23/2021 06:46

yup happens in this too
https://cdn.discordapp.com/attachments/923418491292385300/923466701587226684/example_bs1st.qst

=== @EmilyV99 (discord: Emily) 12/23/2021 06:47

(meta) thread name was changed: üíäüîì1.90 QUEST IN 2.55 COMBO-DELETING SPRITE TILE PICKER BUG

https://cdn.discordapp.com/attachments/923418491292385300/923466912745271326/zquest.exe
https://cdn.discordapp.com/attachments/923418491292385300/923466913349255178/zelda.exe
....hmmm
doesn't seem to have fixed it, actually

=== @EmilyV99 (discord: Emily) 12/23/2021 06:50

oh, wait
you re-saved this in 2.55 didn't you
uhg

=== @ P-Tux7 12/23/2021 06:51

oh nah that's not the issue
i linked you the original 1.90 tileset
and a 1.84 quest

=== @EmilyV99 (discord: Emily) 12/23/2021 06:52

the `typeb.qst`?

=== @ P-Tux7 12/23/2021 06:52

opening them and then closing out of the sprite dialog after selecting a tile does it *whether or not* you saved it in 2.55
oh yeah i did that one

=== @EmilyV99 (discord: Emily) 12/23/2021 06:52


![image](https://cdn.discordapp.com/attachments/923418491292385300/923468101310369822/unknown.png)
so that matters

=== @ P-Tux7 12/23/2021 06:52

but if you download example_bs1st and try it, you'll find the same happens

=== @EmilyV99 (discord: Emily) 12/23/2021 06:52

but my point is
what I just did the first time
should fix the ones that were original

=== @ P-Tux7 12/23/2021 06:53

ah good

=== @EmilyV99 (discord: Emily) 12/23/2021 06:53

but doesn't fix the one that was resaved

=== @ P-Tux7 12/23/2021 06:53

no problem i just started on it

=== @EmilyV99 (discord: Emily) 12/23/2021 06:53

no, but, other people could have the same bug
so I need to fix it
gimme a minute

=== @ P-Tux7 12/23/2021 06:53

(one of my friends suggested to save the 1.90 quest in 2.50, and that fixed it for 2.55 usage as well)

=== @EmilyV99 (discord: Emily) 12/23/2021 06:54

viola, fixed

https://cdn.discordapp.com/attachments/923418491292385300/923468774374535178/zquest.exe
https://cdn.discordapp.com/attachments/923418491292385300/923468775049797672/zelda.exe

=== @ P-Tux7 12/23/2021 06:56

you did it, thanks!

=== @EmilyV99 (discord: Emily) 12/23/2021 06:57

(meta) thread name was changed: ‚úÖüîí1.90 QUEST IN 2.55 COMBO-DELETING SPRITE TILE PICKER BUG
## ‚úÖüîíNew respawn points water bug (#1125)
@EmilyV99 (discord: Emily) opened this issue on 12/23/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/923470349713150022



=== @EmilyV99 (discord: Emily) 12/23/2021 07:01

I tested these with pits, not drownable water... and that was a mistake. Uhg.

It uh, lets you just walk through water drowning continuously.
Gonna be fun to fix

=== @EmilyV99 (discord: Emily) 12/23/2021 07:20

(meta) thread name was changed: ‚úÖüîíNew respawn points water bug
## ‚ùìBitmap draws need to be same layer as what bitmap is blitted to (#1126)
@ Orithan opened this issue on 12/24/2021

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/923727231828787261



=== @ Orithan 12/24/2021 00:02

Bitmap draws have to be drawn to the same layer they are being blitted to in order to be drawn to said bitmap.
After talking with Emily this is a definite bug and needs to be fixed.

=== @EmilyV99 (discord: Emily) 12/24/2021 00:03

Can you replicate this in a fresh quest with a minimum-sized script?

=== @ Orithan 12/24/2021 00:17


https://cdn.discordapp.com/attachments/923727231828787261/923731137891827712/DontBeSquare.qst
Test quest
Script is in the buffer
Press L to change layer which the circle is being drawn to

=== @EmilyV99 (discord: Emily) 12/25/2021 20:28

So, in this example
you're blitting to the bitmap on layer 1
and then  blitting from the bitmap on layer 0
doesn't show that draw
because it hasn't happened yet
...I see no bug with what this test quest showcases @ Orithan, this seems completely correct
If I change it to blit the bitmap on layer 1
it displays, regardless of whether the circle draw is layer 0 or 1
which is correct

=== @EmilyV99 (discord: Emily) 12/25/2021 20:30

if there is a bug, this test quest fails to showcase it.

=== @EmilyV99 (discord: Emily) 12/25/2021 20:34

(meta) thread name was changed: ‚ùìBitmap draws need to be same layer as what bitmap is blitted to

=== @ Orithan 12/25/2021 22:21

I was able to reproduce this bug in the test quest file

=== @ Orithan 12/25/2021 23:31


![image](https://cdn.discordapp.com/attachments/923727231828787261/924444168183480361/2021-12-26_10-30-08.mp4)

=== @ Orithan 12/25/2021 23:32

...Could it have something to do with the build I have? I'm running on the test build that fixed the overhead layer combo issue
## ‚ùåüîíInsert Savegames Name In String (#1127)
@ P-Tux7 opened this issue on 12/24/2021

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/923994643836846161



=== @ P-Tux7 12/24/2021 17:44

Some kind of SCC that puts the file name into the quest dialogue

=== @EmilyV99 (discord: Emily) 12/24/2021 18:24

why don't you click `help` in the string editor and read the existing SCCs..... @ P-Tux7

=== @ P-Tux7 12/24/2021 18:30

Aw fuck I need to stop thinking about ZQuest when I'm not feeling well enough to use the computer... thanks

=== @EmilyV99 (discord: Emily) 12/25/2021 20:20

(meta) thread name was changed: ‚ùåüîíInsert Savegames Name In String
## Slow Walk Combo - Speed Multiplier Attribute (#1128)
@ P-Tux7 opened this issue on 12/24/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/924006748430430218



=== @ P-Tux7 12/24/2021 18:32

Similar to conveyor belts, this is a flag (to enable it) and attribute for the Slow Walk combo that multiplies Link's speed by the number instead of being hardcoded. @arceusplayer11 (discord: Deedee)
## ‚ùìWhistle Recorder Sound Effect Issues (#1129)
@ SkyLizardGirl opened this issue on 12/24/2021

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/924062209733197885



=== @ SkyLizardGirl 12/24/2021 22:13

The Recorder Whistle sound effect repeats playing after one use of the item. They do not stop playing unless you left a screen.
This happens in Alpha 2.55 the latest one.

=== @EmilyV99 (discord: Emily) 12/25/2021 20:33

this doesn't happen in a fresh quest
(meta) thread name was changed: ‚ùìWhistle Recorder Sound Effect Issues
## ‚úÖüîíDarkness appears over text screen game messages (#1130)
@ SkyLizardGirl opened this issue on 12/24/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/924062844532690974



=== @ SkyLizardGirl 12/24/2021 22:15

Darkness appears over text screen game messages.
This is the darkness used with the New lantern features.

=== @ SkyLizardGirl 12/24/2021 22:17

Regular Text boxes are all covered and you cannot read them in a room.

=== @EmilyV99 (discord: Emily) 12/25/2021 04:17

try using the latest build before making a report
pretty sure this was already fixed?

=== @ SkyLizardGirl 12/25/2021 22:47

I did.
I did use the latest build.
it was this one  ....
Fix overhead combo bug
Fix pushblock bugs
Fix Pols Voice movement bug
Add 'R' to Rotate in combo pages
Fixed combo editor visual bugs

2.55_Nightly_Build_Package.zip
59.20 MB
You do not have permission to send messages in this channel.

=== @ SkyLizardGirl 12/25/2021 22:51

.
I Only use the latest always.

=== @ SkyLizardGirl 12/25/2021 23:00


![image](https://cdn.discordapp.com/attachments/924062844532690974/924436475238555678/unknown.png)
I just started a New quest too.

=== @ SkyLizardGirl 12/25/2021 23:03

I was right, it is doing this for some reason.

=== @ SkyLizardGirl 12/25/2021 23:08


![image](https://cdn.discordapp.com/attachments/924062844532690974/924438574932303932/unknown.png)
I created an entirely new quest and it does this.   Is there a quest rule doing this maybe?

=== @ SkyLizardGirl 12/25/2021 23:12

Oh wait, ...
I just downloaded a Fresh one
it did the exact same thing.

=== @ SkyLizardGirl 12/25/2021 23:16

it still does the exact same thing, even with a fresh download of the latest build.

=== @ SkyLizardGirl 12/25/2021 23:32


![image](https://cdn.discordapp.com/attachments/924062844532690974/924444551014408302/unknown.png)
I just tried this rule  New Darkness Draws Under Layer 7.
I reset the game and tested, .... it failed.

=== @ SkyLizardGirl 12/25/2021 23:35


![image](https://cdn.discordapp.com/attachments/924062844532690974/924445378177282048/unknown.png)

https://cdn.discordapp.com/attachments/924062844532690974/924445576475594792/URGH.qst
Fresh quest with error

=== @EmilyV99 (discord: Emily) 12/26/2021 00:59


![image](https://cdn.discordapp.com/attachments/924062844532690974/924466481503305728/unknown.png)
you need new darkness to draw under layer 7
and again
make sure you are on the latest build
I know this works
because I *literally fixed this bug within the last couple days*
if it isn't working in the most recent posted build
then you'll need to wait for the next build
but this bug *has been fixed*
@ SkyLizardGirl

=== @ SkyLizardGirl 12/26/2021 04:34

I am on the very latest build
The latest one you have out.

=== @ SkyLizardGirl 12/26/2021 04:35

i even re-downloaded the latest 2.55 Alpha to retest on a new quest.
(replying to @EmilyV99 (discord: Emily) "if it isn't working in the mo‚Ä¶"): Oh ok
I was worried..
i was trying to test a dungeon, i could not see what the text was telling me.

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:34

@ SkyLizardGirl test on the latest nightly or alpha
see if it's fixed

=== @EmilyV99 (discord: Emily) 02/03/2022 03:23

@ SkyLizardGirl

=== @ SkyLizardGirl 02/03/2022 04:21

(replying to @arceusplayer11 (discord: Deedee) "see if it's fixed"): Oh ok i will test it

=== @ SkyLizardGirl 02/03/2022 04:23

(replying to @arceusplayer11 (discord: Deedee) "@ SkyLizardGirl test o‚Ä¶"): 
![image](https://cdn.discordapp.com/attachments/924062844532690974/938650927190143046/unknown.png)
: /
It's doing that?  i will see if there is a 2.55 update
hold on

=== @arceusplayer11 (discord: Deedee) 02/03/2022 04:24

yeah, update 2.55

=== @ SkyLizardGirl 02/03/2022 04:28

Ok
i updated it
: /

![image](https://cdn.discordapp.com/attachments/924062844532690974/938652252527271946/unknown.png)
It did exact same thing
i even saved the quest
in the updated version to be sure

=== @arceusplayer11 (discord: Deedee) 02/03/2022 04:29

hmm

=== @ SkyLizardGirl 02/03/2022 04:29


https://cdn.discordapp.com/attachments/924062844532690974/938652510019788822/TEST_Today.qst
Its a small darkness test
See if it does it to you?

=== @arceusplayer11 (discord: Deedee) 02/03/2022 04:30

will do when I can

=== @ SkyLizardGirl 02/03/2022 04:30

Ok

=== @EmilyV99 (discord: Emily) 02/03/2022 20:48

(replying to @EmilyV99 (discord: Emily) "you need new darkness to draw‚Ä¶"): ^
Check qrs for that
@ SkyLizardGirl

=== @ SkyLizardGirl 02/03/2022 21:00

Oh ok i will try this

=== @ SkyLizardGirl 02/03/2022 21:02

Does that have to be checked with Normal   - Darkness also?

=== @EmilyV99 (discord: Emily) 02/03/2022 21:02

?

=== @ SkyLizardGirl 02/03/2022 21:03

It's In Options?

=== @EmilyV99 (discord: Emily) 02/03/2022 21:03

Should be a qr mentioning darkness and layer 7

=== @ SkyLizardGirl 02/03/2022 21:03

Am looking for this now

=== @EmilyV99 (discord: Emily) 02/03/2022 21:03

Probably under the misc tab, near the end?

=== @ SkyLizardGirl 02/03/2022 21:04

Ok i will look

=== @EmilyV99 (discord: Emily) 02/03/2022 21:04

(replying to @ SkyLizardGirl ""): ^

=== @ SkyLizardGirl 02/03/2022 21:04

Ok

=== @EmilyV99 (discord: Emily) 02/03/2022 21:04

"New Darkness Draws Under Layer 7"

=== @ SkyLizardGirl 02/03/2022 21:04

Ok
And Do i remove the Darkness above it?
checkbox?

=== @EmilyV99 (discord: Emily) 02/03/2022 21:05

No
Then it would use nes zelda darkness

=== @ SkyLizardGirl 02/03/2022 21:05

Ok
Ty.*

=== @EmilyV99 (discord: Emily) 02/08/2022 13:00

@ SkyLizardGirl

=== @EmilyV99 (discord: Emily) 02/08/2022 13:21

(meta) thread name was changed: üíäüîìDarkness appears over text screen game messages

=== @EmilyV99 (discord: Emily) 02/13/2022 05:21

@ SkyLizardGirl

=== @ SkyLizardGirl 02/13/2022 05:45

Yes?

=== @EmilyV99 (discord: Emily) 02/13/2022 05:46

... is it fixed?

=== @ SkyLizardGirl 02/13/2022 05:46

I will test the darkness again
Hold on

=== @ SkyLizardGirl 02/13/2022 05:55

Ok
This is weird
Darkroom is not working now

=== @EmilyV99 (discord: Emily) 02/13/2022 05:55

What have you done with the quest rules

=== @ SkyLizardGirl 02/13/2022 05:56

Nothing
It‚Äôs on darkness

=== @EmilyV99 (discord: Emily) 02/13/2022 05:56

. . . `it's on darkness` does not tell me what is and is not checked
is new darkness checked?
is new dark under layer 7 checked?
What is set

=== @ SkyLizardGirl 02/13/2022 05:57

Yes

=== @EmilyV99 (discord: Emily) 02/13/2022 05:57

`Yes` as an answer when I asked two separate questions

=== @ SkyLizardGirl 02/13/2022 05:57

Ok
Now it‚Äôs working
But
For some reason

=== @EmilyV99 (discord: Emily) 02/13/2022 05:58

. . . What did you change?
What was it before?
I need you to actually answer my questions
or I can't help

=== @ SkyLizardGirl 02/13/2022 05:58


![image](https://cdn.discordapp.com/attachments/924062844532690974/942298671066779668/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 05:58

What is checked
screenshot the quest rules

=== @ SkyLizardGirl 02/13/2022 05:58

For some reason some rooms are not dark when i made certain screens dark
does this only do this if a certain rule is unchecked or checked?

=== @EmilyV99 (discord: Emily) 02/13/2022 05:59

*screenshot the quest rules*

=== @ SkyLizardGirl 02/13/2022 06:01


![image](https://cdn.discordapp.com/attachments/924062844532690974/942299380755595286/unknown.png)

![image](https://cdn.discordapp.com/attachments/924062844532690974/942299425856946196/unknown.png)
This room is marked as dark
yet its not working here

![image](https://cdn.discordapp.com/attachments/924062844532690974/942299521986203708/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 06:02

err wait

=== @ SkyLizardGirl 02/13/2022 06:02

There is no darkness

=== @EmilyV99 (discord: Emily) 02/13/2022 06:02

?
that... should be a dark room

=== @ SkyLizardGirl 02/13/2022 06:03


![image](https://cdn.discordapp.com/attachments/924062844532690974/942299838547132466/unknown.png)
Room is not dark even though the room is checked as dark

=== @EmilyV99 (discord: Emily) 02/13/2022 06:03

do you have any torch combos on the screen?

=== @ SkyLizardGirl 02/13/2022 06:03

Otherwords the messages over the darkness works now
Yes

=== @EmilyV99 (discord: Emily) 02/13/2022 06:03

Where are they, and what are their settings?
(replying to @ SkyLizardGirl ""): this at least appears to be fixed

=== @ SkyLizardGirl 02/13/2022 06:04

I am removing the torches
hold on

=== @EmilyV99 (discord: Emily) 02/13/2022 06:04

What were their settings, out of curiosity?

=== @ SkyLizardGirl 02/13/2022 06:05


![image](https://cdn.discordapp.com/attachments/924062844532690974/942300328911593534/unknown.png)
Ok now there are no torches
but the room is still not dark

=== @EmilyV99 (discord: Emily) 02/13/2022 06:05

on any layers, including on ffcs?
Is anything in that room being drawn by script?

=== @ SkyLizardGirl 02/13/2022 06:05

Just crystal switch

![image](https://cdn.discordapp.com/attachments/924062844532690974/942300598575956059/unknown.png)

![image](https://cdn.discordapp.com/attachments/924062844532690974/942300647741620225/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 06:06

?

=== @ SkyLizardGirl 02/13/2022 06:06


![image](https://cdn.discordapp.com/attachments/924062844532690974/942300684018151444/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 06:06

what does that have to do with torch combos

=== @ SkyLizardGirl 02/13/2022 06:06

Thats the only ffc
i removed the two torches that were in a picture above

=== @EmilyV99 (discord: Emily) 02/13/2022 06:07

I was asking if you had torch combos on any layers or ffcs
so if the ffc isn't a torch
it has nothing to do with what Ia sked

=== @ SkyLizardGirl 02/13/2022 06:08


![image](https://cdn.discordapp.com/attachments/924062844532690974/942301111036031046/unknown.png)
Torches used to be there
i removed them
room is still not dark

=== @EmilyV99 (discord: Emily) 02/13/2022 06:08

In `Init Data`, what is the `Darkness Color` set to?

=== @ SkyLizardGirl 02/13/2022 06:09


![image](https://cdn.discordapp.com/attachments/924062844532690974/942301328036745286/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 06:09

click on it so I can see the whole swatch

=== @ SkyLizardGirl 02/13/2022 06:09


![image](https://cdn.discordapp.com/attachments/924062844532690974/942301413436964884/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 06:09

. . .
That's....
That's the transparent color.
So your darkness is invisible.

=== @ SkyLizardGirl 02/13/2022 06:09

Oh?
Oh ok
hold on
which color is it supposed to be?

=== @EmilyV99 (discord: Emily) 02/13/2022 06:10

You should leave the darkness selected on the default (the black on the bottom row, 3 from the right) if you want it to be pure black
that is always black in ZC, regardless of tileset

=== @ SkyLizardGirl 02/13/2022 06:11

Very bottom row ?

=== @EmilyV99 (discord: Emily) 02/13/2022 06:11

yes

=== @ SkyLizardGirl 02/13/2022 06:11

3 to the right?
Ok is set

![image](https://cdn.discordapp.com/attachments/924062844532690974/942301912181645342/unknown.png)

=== @EmilyV99 (discord: Emily) 02/13/2022 06:11


![image](https://cdn.discordapp.com/attachments/924062844532690974/942301923346878504/unknown.png)

=== @ SkyLizardGirl 02/13/2022 06:11

Oh

=== @EmilyV99 (discord: Emily) 02/13/2022 06:11

3 *from the right*

=== @ SkyLizardGirl 02/13/2022 06:11

Ok i got it
i am testing now

=== @ SkyLizardGirl 02/13/2022 06:14


![image](https://cdn.discordapp.com/attachments/924062844532690974/942302604816437318/unknown.png)
Ok is working now
.*
Thank you.*
‚ù§Ô∏è

=== @EmilyV99 (discord: Emily) 02/13/2022 06:14

generally things are invisible when you make them invisible
you're welcome

=== @ SkyLizardGirl 02/13/2022 06:14

i understand now
.* ‚ù§Ô∏è

=== @EmilyV99 (discord: Emily) 02/13/2022 06:14

(meta) thread name was changed: ‚úÖüîíDarkness appears over text screen game messages
## this - Scale (scripted) Attribute for FFCs (#1131)
@ Bagu opened this issue on 12/25/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/924350799843319808



=== @ Bagu 12/25/2021 17:20

I just wondered why `this->Scale = ...` is not working in FFC Scripts

=== @EmilyV99 (discord: Emily) 12/25/2021 17:21

ffcs are not sprite objects
they do not use sprite drawing mechanics such as scale

=== @ Bagu 12/25/2021 17:28

...oh
I just thought it might be cool for animated cutscenes
Makin things moving closer to "camera"

=== @ Bagu 12/25/2021 17:30

But I guess I could also create scripted (0 Hitbox) LWeapons, using custom sprites for those kind of sequences

=== @EmilyV99 (discord: Emily) 12/25/2021 17:31

Also a great thing to keep in mind
is lweapons of type `LW_SPARKLE` will automatically die when their animation ends once
so if you want to create animations that will run through once, you can spawn that on those and not need to worry about killing it before it loops

=== @ Bagu 12/25/2021 17:33

...genius  clue!!!
Thanks
## Separate Hookshot Hook or chain sprites when coming back. (#1132)
@ Tsunami Tommy Reload the Shotty opened this issue on 12/25/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/924379873668132865



=== @ Tsunami Tommy Reload the Shotty 12/25/2021 19:15

I have no idea if this is even possible, and it's certainly extremely low on the scale of usefulness, but here's the thought:

Separate vertical/horizontal sprites for the Hookshot hook and the Hookshot chain when retracting and after having been fired.

So you could have an open grabby-style metal hookshot hook hurtling towards a wooden target, its rope loose and wavy trailing behind it, but then the hook hits its target and visibly closes, and the rope goes taut and turns into a straight line as it pulls you towards it.

Also, a specific sound when contact is made.  But I suppose that's a separate suggestion.

Thoughts?  Is this feasible and reasonable, or unthinkable and unblinkable.

=== @ vlamart 12/28/2021 17:21

I like this idea, it would be also neat to add the switchhook teleportation animation/sprites to the hookshot (or at least just the poof)

=== @ Tsunami Tommy Reload the Shotty 12/29/2021 18:26

Yep, it's a fun thing to think about.
## [QR] Bait in Feed the Goriya Room uses Placed Bait Sprite (#1133)
@ P-Tux7 opened this issue on 12/26/2021

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/924806170533851216



=== @ P-Tux7 12/26/2021 23:29

Bait has two sprites:
1. The item sprite for pickup/your inventory
2. The sprite you can set for its placed down form
However, when you place down the bait in a Feed the Goriya room, it uses its inventory sprite instead of its placed item sprite.
## ‚úÖüîíEntrance BUG 2.55.0.0 (#1134)
@ bleugriffon2 opened this issue on 12/29/2021

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/925872085425852467



=== @ bleugriffon2 12/29/2021 22:05

when I exit a place and the character up the stairs for go in a new place, it will down instantly the stairs and no action are possibles. I just cannot start to play a quest. my only way is to die for get out the entrance without this "stairs" issue. I've also tried in 2.53 v with no effects

=== @ Tsunami Tommy Reload the Shotty 12/29/2021 22:06

Does that sound like this bug?

https://discord.com/channels/876899628556091432/921537625876217867

Titled:  "‚úÖüîí[2.55 A100] Stairs or Cave warp tile bug "
That last sentence in your paragraph,  "I've also tried in 2.53 v __with no effects__" implies the bug _isn't_ there.  Just making sure.

=== @EmilyV99 (discord: Emily) 12/29/2021 22:09

this sounds like #1098 , yeah. that was fixed.
Try the latest build @ bleugriffon2 , in [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ bleugriffon2 12/29/2021 22:11

(replying to @ Tsunami Tommy Reload the Shotty "Does that sound like this bug‚Ä¶"): yes this is it

=== @ Tsunami Tommy Reload the Shotty 12/29/2021 22:12

Awesome.  Sounds like you'd benefit from upgrading, as Emily said above.
Back up all yer stuff, make a new folder for that build, copy the quest file back in, and see if it works fine for you.  If it does, keep building in that new build, and enjoy!

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:32

(meta) thread name was changed: ‚úÖüîíEntrance BUG 2.55.0.0
## ‚úÖüîíLink holding item sprite resets itself (#1135)
@ tacochopper opened this issue on 01/01/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/926796022963908638



=== @ tacochopper 01/01/2022 11:16

Been noticing this a few times now on the most recent nightly build. I'll set the Link one hand hold up sprite, and then the editor will reset the sprite tile to 000. These two screenshots are roughly 10 minutes apart - the first being the most recent time I reset the sprite, and the second having reset the sprite

![image](https://cdn.discordapp.com/attachments/926796022963908638/926796073924702218/zquest_3rMeN4G0Hc.png)
![image](https://cdn.discordapp.com/attachments/926796022963908638/926796074088275978/zquest_Lb5zaR4pFK.png)

=== @ Moosh 01/01/2022 13:03

Oh shit, this is an actual bug? Here I thought I was just losing it. ZC has been gaslighting the hell out of me

=== @ tacochopper 01/01/2022 13:19

i've noticed it for a few weeks now, thought i was going insane as well honestly
wasn't sure if it was something to do with my LTM setup or what
lol can report that it's happened again

=== @ tacochopper 01/01/2022 13:39

... hm
so i have zquest and classic running at the same time. before i booted up a fresh copy of the quest the hold sprite was still there. when i went back into zquest, and that sprite window, *after* i opened the quest, the hold sprite's reset itself

=== @ tacochopper 01/01/2022 13:43

YEP, can confirm it's happened again

=== @EmilyV99 (discord: Emily) 01/01/2022 19:23

@arceusplayer11 (discord: Deedee)

=== @ tim 01/01/2022 19:40

resurfaced bug it seems

=== @ tacochopper 01/02/2022 03:23

so on further testing, it only happens when both ZC and ZQ are running simultaneously. if the quest is being played without being open in the editor then the sprite works fine

=== @EmilyV99 (discord: Emily) 01/02/2022 03:24

. . . . . WHAT THE FUCK

=== @ tacochopper 01/02/2022 03:25

i was thinking about that this morning, like what's the chances right
so i put it to the test

=== @EmilyV99 (discord: Emily) 01/02/2022 03:25

That should not be possible
having both programs running should have no effect on anything quest data related
at all
not a tiny bit

=== @ tacochopper 01/02/2022 03:27

i'm gonna try and replicate it a few more times with zquest closed, but this makes no fucking sense honestly
just for reference
![image](https://cdn.discordapp.com/attachments/926796022963908638/927040422142943252/VdGHhWva6q.png)
![image](https://cdn.discordapp.com/attachments/926796022963908638/927040422402994236/WNxNwptd6V.png)

=== @ tim 01/02/2022 03:27

does it happen when
autosave happens
<:hmm:671849797119901710>

=== @ tacochopper 01/02/2022 03:28

... possibly
although in that second screenshot
i had zquest open for a minute just to get the bug to appear

=== @ tacochopper 01/02/2022 03:30

interestingly though it's not resetting the hold item sprite like it was last night
wut lol
![image](https://cdn.discordapp.com/attachments/926796022963908638/927041206893043732/zelda_hgaZGGM9dw.png)
nup spoke too soon, it reset it
running moscow modder's gb shield script so i think that may have been the cause for the trap sprite - LTM tiles
![image](https://cdn.discordapp.com/attachments/926796022963908638/927041558342148167/zelda_mqK5vx8aIm.png)

=== @EmilyV99 (discord: Emily) 01/02/2022 03:32

@arceusplayer11 (discord: Deedee) *what the fuck*

=== @arceusplayer11 (discord: Deedee) 01/02/2022 03:33

I don't know?

=== @ tacochopper 01/02/2022 03:33

this is wild
closed zq and did it five times without the bug happening
i've turned off auto-saves in ZQ for the time being so i'll see if it happens with them deactivated in a bit

=== @ tacochopper 01/02/2022 03:35

.... hm
it's not happening after i did a save as in ZQ, put the quest under a different name
and now i can't replicate it in the "new" retitled quest?
both open on ZC and ZQ

=== @ tacochopper 01/02/2022 03:38

ah fuck knows, it's the like like bug all over again
i do wonder if it is related to the autosaves though

=== @arceusplayer11 (discord: Deedee) 01/02/2022 04:32

could you send the non-retitled quest?

=== @ tacochopper 01/02/2022 04:46

just messaged you!

=== @arceusplayer11 (discord: Deedee) 01/02/2022 05:08

ty

=== @ tacochopper 01/02/2022 16:33

lol it happened again. first time since earlier. auto-saves aren't turned on but i've been doing a lot of script compiling?
![image](https://cdn.discordapp.com/attachments/926796022963908638/927238101649227817/zelda_kpKuxDK3BM.png)
![image](https://cdn.discordapp.com/attachments/926796022963908638/927238101858930718/zquest_V01p2WMVNu.png)

=== @ tacochopper 01/02/2022 16:37

and barely minutes after resetting it and having zq and zc idle, it's happened again?? i don't get it

=== @EmilyV99 (discord: Emily) 01/02/2022 16:44

So, you fix it in ZQ, you save in ZQ, you load ZC, and then it works fine in ZC?
but then, without touching ZQ again, after minutes it happens again?

=== @arceusplayer11 (discord: Deedee) 01/02/2022 16:51

(replying to @EmilyV99 (discord: Emily) "So, you fix it in ZQ, you sav‚Ä¶"): If it's breaking in the middle of ZC, that means ZC itself is breaking it

=== @EmilyV99 (discord: Emily) 01/02/2022 17:12

^ But keep in mind it breaking in ZC *cannot* break it in ZQ, as ZC wouldn't write it back to the quest file
so if it ALSO breaks in ZQ
it breaks separately for both
likely in qst.cpp on quest load
but that wouldn't explain it working correctly for any length of time
it should be broken from the moment you load the quest

=== @arceusplayer11 (discord: Deedee) 01/02/2022 20:23

(replying to @EmilyV99 (discord: Emily) "^ But keep in mind it breakin‚Ä¶"): Except, didn't you add something that saves sfx.dat to the quest file on quest load?

=== @EmilyV99 (discord: Emily) 01/02/2022 20:23

shouldn't save anything from zc

=== @arceusplayer11 (discord: Deedee) 01/02/2022 20:23

Oh, it's just a qst loader thing

=== @EmilyV99 (discord: Emily) 01/02/2022 20:23

it loads it from sfx.dat into the `customtunes[]` array
same way every single compat rule or compat change works

=== @arceusplayer11 (discord: Deedee) 01/02/2022 20:24

So yeah, this seems to be a qst.cpp bug

=== @EmilyV99 (discord: Emily) 01/02/2022 20:24

but that wouldn't explain it not happening for a few minutes
the question is
if you load the quest, it's broken
if you fix it, save, and reload the quest in zq, is it broken or fixed?

=== @ tacochopper 01/03/2022 00:32

(replying to @EmilyV99 (discord: Emily) "So, you fix it in ZQ, you sav‚Ä¶"): I think this is about right? Although most of the times the bug‚Äôs been happening I‚Äôve been seeing it in ZC first and then checking ZQ for the hold sprite data
(replying to @EmilyV99 (discord: Emily) "if you fix it, save, and relo‚Ä¶"): I haven‚Äôt tried this yet, I‚Äôll give it an attempt when I get up

=== @ tacochopper 01/03/2022 00:35

Every time I‚Äôve been testing this for the last few days it‚Äôs been on a clean quest save. Not sure if that‚Äôs got anything to do with it but figure that might help regardless

=== @EmilyV99 (discord: Emily) 01/03/2022 00:35

that's always a good thing

=== @arceusplayer11 (discord: Deedee) 01/03/2022 12:58

I am very weirded out
I cannot reproduce this

=== @ tacochopper 01/03/2022 13:27

i reproduced it earlier again with the new quest lol

=== @arceusplayer11 (discord: Deedee) 01/03/2022 13:27

wtf

=== @ tacochopper 01/03/2022 13:27

maybe we see if @ Moosh can make it happen
if it's happened to both of us then there's a solid chance it could be a similar cause, right?

=== @ tim 01/04/2022 00:12

uh
who first reported this

=== @ tim 01/04/2022 00:13

@ FireSeraphim
this is the same thing you had happen a few months back, ye?

=== @ FireSeraphim 01/04/2022 00:15

a similar thing yeah.

=== @arceusplayer11 (discord: Deedee) 01/04/2022 06:22

It isn't the same thing
FS's issue was that the Flip value was being set to an absurdly high number somehow, and my fix for that was to cap the Flip value

=== @arceusplayer11 (discord: Deedee) 01/04/2022 06:24

@ tacochopper could you go to the About page (should be under ZC/ZQ/Etc) in ZQuest and screenshot it?
I need to know what build specifically you are using so I can build a debug build where I can reproduce it

=== @ tacochopper 01/04/2022 09:41

Sure, I‚Äôll get that together after I‚Äôve finished work

=== @ tacochopper 01/04/2022 14:22

@arceusplayer11 (discord: Deedee)
![image](https://cdn.discordapp.com/attachments/926796022963908638/927929972696440872/zquest_bRh86tlEsh.png)

=== @ tacochopper 01/04/2022 14:29

is there a newer nightly out or is that still on the way?

=== @arceusplayer11 (discord: Deedee) 01/04/2022 14:53

still on the way; unsure if P-Tux is done testing or not but there's a few issues I want to iron out

=== @arceusplayer11 (discord: Deedee) 01/04/2022 14:54

I didn't change anything but see if you can reproduce the issue in the latest code
This isn't confirmed stable, but see if this fixes the issue
https://cdn.discordapp.com/attachments/926796022963908638/927938169037541386/buildpack.zip

=== @ tacochopper 01/04/2022 15:07

time to destroy my computer üòÑ i mean what

=== @ tacochopper 01/04/2022 15:19

after a handful of attempts trying to get it reproduced
![image](https://cdn.discordapp.com/attachments/926796022963908638/927944364754354196/zelda_AOEIpWBd6w.png)
wanna say around ten times?
basically just soft resetting until it occurred. initially i was going into the shop and purchasing an item and the hold up sprite was fine. this time it only happened after i put the item on the starting screen for ease of access
and sure enough, the sprite reset
![image](https://cdn.discordapp.com/attachments/926796022963908638/927944749422362695/zquest_gQ59IpuLew.png)

=== @ tacochopper 01/04/2022 15:23

hm, it's only happened once in twenty resets
feels like shiny hunting in pokemon

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:06

*sigh*
Alright, time to go digging again

=== @EmilyV99 (discord: Emily) 01/05/2022 20:07

I'm baffled
If it ***ever*** shows correctly in ZC, it can't be qst.cpp, can it?

=== @ tim 01/05/2022 20:09

help me understand what else even has the power to change that

=== @EmilyV99 (discord: Emily) 01/05/2022 20:09

From everything I can see here
I'd guess that a demon has posessed the program and decided to fuck with us
By far the most likely cause

=== @ tim 01/05/2022 20:12

now here's my question
is it actually setting the tile to zero
or it is being nulled into 0

=== @EmilyV99 (discord: Emily) 01/05/2022 20:12

... what's the difference?
NULL == 0

=== @ tim 01/05/2022 20:13

some code that is overwriting it vs some code that is removing the setting

=== @EmilyV99 (discord: Emily) 01/05/2022 20:13

... what's the difference?

=== @ tim 01/05/2022 20:13

exactly what i just stated

=== @EmilyV99 (discord: Emily) 01/05/2022 20:13

Those both are `= 0;`
There is no difference between "removing" something and "overwriting it to 0"

=== @ tim 01/05/2022 20:14

there 100% is

=== @EmilyV99 (discord: Emily) 01/05/2022 20:14

Then if you could elaborate

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:16

I think tim means if it's writing to something so high that it gets set to 0 for being too high
Which, I don't *think* it's handled that way? I think it'd just overflow and display a garbage value

=== @EmilyV99 (discord: Emily) 01/05/2022 20:16

There shouldn't be a "too high" for tiles anymore
It'd wrap, yeah

=== @ tim 01/05/2022 20:17

so i may have answered my own question
if something is unset, it usually shows a black tile, not even tile 0, right?

=== @EmilyV99 (discord: Emily) 01/05/2022 20:18

Depends on the dialogue
Some dialogs draw tile 0 as tile 0

=== @ tim 01/05/2022 20:18

unless im still thinking in 2004

=== @EmilyV99 (discord: Emily) 01/05/2022 20:19

Others don't draw it if it's 0, thus showing the empty square
Both represent the same exact value

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:21

(replying to @ tim "unless im still thinking in 2‚Ä¶"): If something isn't *initialized*, it will grab random memory
so a random number each time probably
if something is set to NULL, it's just 0.

=== @EmilyV99 (discord: Emily) 01/05/2022 20:22

Here we're getting 0, so something is probably nulling it somewhere
The oddity is that it doesn't break immediately in zc
But, that it doesn't JUST break in ZC, it also affects ZQ
Either there are two very similar but different bugs
Or the laws of physics are breaking down
Because while ZQ can affect ZC (error in the qst file,  for ex)
ZC ***cannot affect ZQ***
ZQ never loads any files that have been touched by ZC
There should be no possible way for that to happen

=== @ tim 01/05/2022 20:24

as the only thing ZC is actually writing is
cfg and sav

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:25

(replying to @EmilyV99 (discord: Emily) "Because while ZQ can affect Z‚Ä¶"): See, here's the thing, ZC loads the entire quest into memory when starting up
So it really shouldn't be ZQuest affecting ZC
you can delete the entire quest file IIRC or save over it IIRC and the changes won't take place until after you go back to the file select

=== @EmilyV99 (discord: Emily) 01/05/2022 20:26

No but, if the error is when saving the quest file...
Then ZQ affects ZC
Nothing to do with them both running at the same time
i.e. if ZQ were saving the tile wrong
But, that doesn't seem to be the case either

=== @ tim 01/05/2022 20:30

so there has to be some missing bracket somewhere
or something is setting this option while another command is being thrown
there has to be some command that is doing it

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:31

Something has to be setting it to 0 in a file that both ZC and ZQuest call

=== @ tim 01/05/2022 20:31

and its only during some other option being set

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:32

And it has to be something that's consistently doing it in both simultaneously

=== @ tim 01/05/2022 20:36

*leers at allegro.log*

=== @ tim 01/05/2022 20:45

just left zq running for the past 20 mins
and box in question just has no image

=== @EmilyV99 (discord: Emily) 01/05/2022 20:46

?
What tile is it set to?

=== @ tim 01/05/2022 20:46

0 with a blank image

=== @EmilyV99 (discord: Emily) 01/05/2022 20:47

Oh?

=== @ tim 01/05/2022 20:47

resetting zq brings it back. let me see if it rots away again in the timeframe

=== @EmilyV99 (discord: Emily) 01/05/2022 20:48

Definitely nothing qst.cpp then

=== @ tim 01/05/2022 20:52

üôÇ
look what the tile was just randomly set to

![image](https://cdn.discordapp.com/attachments/926796022963908638/928390523348213830/unknown.png)

=== @EmilyV99 (discord: Emily) 01/05/2022 20:52

what the fucking hell

=== @ tim 01/05/2022 20:52

lmao

![image](https://cdn.discordapp.com/attachments/926796022963908638/928390631779340359/unknown.png)
this is just zq open

=== @ tim 01/05/2022 20:56

so what is the relevance of this tile besides it being the last tile allowed in pages

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:57

FLIP
of course it's fucking flip
And Tile
retghbsedhysf

=== @EmilyV99 (discord: Emily) 01/05/2022 20:57

`setlinktile()` is one of the only things that modifies those values
and that is ONLY called when you hit OK after having clicked one of those squares in that dialog

=== @EmilyV99 (discord: Emily) 01/05/2022 21:00

`setuplinktiles()` also modifies them, setting them to defaults; but that only occurs in qst.cpp on loading a quest, before it has read the sprites from the quest
the values can also be affected by `moving` tiles
because link sprites are set up (at least old ones, don't know if the new ones were...) to move if you move it's source tile
but that only writes the tile, not the flip

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:03

Okay, see, here's the other thing
SetSprite caps Flip at 3
Which means on being loaded, the sprites should be capped

=== @EmilyV99 (discord: Emily) 01/05/2022 21:04

yeah, that was our attempt at fixing this last time

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:04

it's worth noting that this is probably random memory overflowing from whatever is *before* the 1 handed hold sprite

=== @EmilyV99 (discord: Emily) 01/05/2022 21:05

hmmm
`sideswimcastingspr`

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:05

Given that the value being affected is [0][0][0] of an array

=== @EmilyV99 (discord: Emily) 01/05/2022 21:07

don't see anything immediately
and that's assuming that global variables in memory are guaranteed to be contiguous, which I'm not sure if is true?

=== @EmilyV99 (discord: Emily) 01/05/2022 21:08

...wait a fucking moment
wait a fucking moment
`int32_t holdspr[2][3][3];`
that's `[2][3][3]`
not `[2][2][3]`

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:09

yeah

=== @EmilyV99 (discord: Emily) 01/05/2022 21:09

someone expanded it

=== @ tim 01/05/2022 21:09

<:hmm:671849797119901710>

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:09

Zoria did

=== @EmilyV99 (discord: Emily) 01/05/2022 21:09

in the middle
WHY
WHY
It isn't being cleared or set properly

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:09

He wanted to add a Sword Holding Sprite

=== @EmilyV99 (discord: Emily) 01/05/2022 21:09

it's clearing `2*2*3*sizeof(int32_t)`

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:09

and there's stuff in qst.cpp that sets that
...ah.
I see

=== @ tim 01/05/2022 21:10

i reset and let it rot again

![image](https://cdn.discordapp.com/attachments/926796022963908638/928395037333667880/unknown.png)

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:11

WAIT, wtf
It just happened to me too in P-Tux's quest!
uhirjnskfgdbrfnzkdteshdnytj

=== @ tim 01/05/2022 21:11

and you werent doing
ANYTHING
üôÇ
so the ZC being running thing is just a fluke

=== @EmilyV99 (discord: Emily) 01/05/2022 21:14

but it also has to be *happening* in zc
if it happens to them in ZC without saving the quest again in ZQ

=== @ tim 01/05/2022 21:14

erm

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:14

it means it has to be a shared file
Okay, so I'm gonna break this specific value and let it rot

=== @EmilyV99 (discord: Emily) 01/05/2022 21:15

zoria's added holdspr, you mean?
smart

=== @ tim 01/05/2022 21:15

this time it happened within a minute of loading zq

=== @EmilyV99 (discord: Emily) 01/05/2022 21:15

frankly, tim
I have a feeling it happens when you open the dialog

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:15

(replying to @EmilyV99 (discord: Emily) "zoria's added holdspr, you me‚Ä¶"): nah, the holdspr that's breaking

=== @EmilyV99 (discord: Emily) 01/05/2022 21:15

???

=== @ tim 01/05/2022 21:16

yeah its def

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:16

As in I'm gonna let it sit and it'll alert me when it changes

=== @EmilyV99 (discord: Emily) 01/05/2022 21:16

Just remove something that's been fine for a decade, instead of the new thing that probably broke it?

=== @ tim 01/05/2022 21:16

loading the dia

=== @EmilyV99 (discord: Emily) 01/05/2022 21:16

oh
wait
I see
brain isn't reading what you were saying

=== @ P-Tux7 01/05/2022 21:16

ah good i was about to ping you deedee

=== @EmilyV99 (discord: Emily) 01/05/2022 21:16

hmm

=== @ P-Tux7 01/05/2022 21:16

this is the only nasty bug i know of in this latest build

=== @ tim 01/05/2022 21:17

if i load the dia and hit cancel, then reopen the dia its corrupted. yea

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:17

(replying to @ P-Tux7 "this is the only nasty bug i‚Ä¶"): No crashes or anything?
Okay, then once we fix this issue then we can release Alpha 101

=== @ tim 01/05/2022 21:19

qdbufouwgwg
it only happens when i hit cancel

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:20

IUJNEFRVDNK
That's it
@EmilyV99 (discord: EmilyV) just confirmed it, it's the cancelling

=== @EmilyV99 (discord: Emily) 01/05/2022 21:21

pahahahaha
becuase deedee
it's your memcpy of `oldHoldSpr`
which isn't sized right

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:21

fuck me

=== @EmilyV99 (discord: Emily) 01/05/2022 21:21

because of Zoria's addition

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:21

Ah, cool

=== @EmilyV99 (discord: Emily) 01/05/2022 21:21

like I said, that new sprite was NOT ADDED CORRECTLY

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:21

Lovely

=== @EmilyV99 (discord: Emily) 01/05/2022 21:21

it was not fucking resized anywhere

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:21

Zoria's a dumbass

=== @ tim 01/05/2022 21:21

yay innovation

=== @EmilyV99 (discord: Emily) 01/05/2022 21:22

I have no clue how this would happen in ZC just running, though

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:22

It has to be a similar issue

=== @EmilyV99 (discord: Emily) 01/05/2022 21:22

frankly, patch that, and then we see if the issue even still occurs
should just need to resize your `oldHoldSpr` and the memcpy sizes
also, for fucks sake
`2*2*3*sizeof(int32_t)`?
Pretty sure you can just do `sizeof(holdspr)`
@arceusplayer11 (discord: Deedee)

=== @ tim 01/05/2022 21:23

i love when the quadratic formula explodes

=== @ P-Tux7 01/05/2022 21:26

(replying to @arceusplayer11 (discord: Deedee) "No crashes or anything?"): nope!

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:33

@EmilyV99 (discord: EmilyV) the dumb was me
```memcpy(sideswimholdspr, oldSideSwimHoldSpr, 4 * 3 * sizeof(int32_t));```
...That should be 3\*3, not 4*3

=== @EmilyV99 (discord: Emily) 01/05/2022 21:33

oh
rip
also, again
try `sizeof(sideswimholdpsr)`
that should just
do it for you

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:34

eh, already commit the 3*3

=== @EmilyV99 (discord: Emily) 01/05/2022 21:34

that is, for the record, one of the differences between pointers and arrays
while you can use an array as a pointer in any circumstance
`sizeof()` on an array will give you the full array's size
`sizeof()` on a pointer gives you the size of... the pointer, not what it points to.

=== @EmilyV99 (discord: Emily) 01/05/2022 21:48

(meta) thread name was changed: üíäüîìLink holding item sprite resets itself

=== @arceusplayer11 (discord: Deedee) 01/05/2022 21:49


https://cdn.discordapp.com/attachments/926796022963908638/928404744790237204/zelda.exe
https://cdn.discordapp.com/attachments/926796022963908638/928404745226440704/zquest.exe
@ tacochopper see if you still have the same issue with these

=== @ tim 01/05/2022 21:50

no cancel-break here

=== @ tacochopper 01/05/2022 23:05

(replying to @arceusplayer11 (discord: Deedee) "@ tacochopper see if‚Ä¶"): I will suss shortly and let you know!
also solid work figuring out the bug omg

=== @ tacochopper 01/06/2022 01:54

appears to be all good

=== @arceusplayer11 (discord: Deedee) 01/06/2022 10:16

woo!

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:41

(meta) thread name was changed: ‚úÖüîíLink holding item sprite resets itself
## QR - Increase Maximum Save File Death Count (#1136)
@ P-Tux7 opened this issue on 01/03/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/927446484822155274



=== @ P-Tux7 01/03/2022 06:21

Like the increased maximum save file play time, but for death count.

=== @ SkyLizardGirl 01/04/2022 01:26

My death count in my game is broken. Idk why. I have a custom gameover too.
But yeah, 9999 would be nice
## ‚ùåüîíWeapon Level modification by scripts (#1137)
@ P-Tux7 opened this issue on 01/03/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/927665407760924692



=== @ P-Tux7 01/03/2022 20:51

test

=== @ P-Tux7 01/03/2022 20:54


https://cdn.discordapp.com/attachments/927665407760924692/927666252992901180/eweaponswap.qst
this quest uses the "swap boss and non-boss fireball status" EWeapon script included with 2.55
you start with the mirror shield
screen 1 has a gleeok, screen 2 has an aquamentus, and screen 3 has both
the desired behaviour is that the gleeok's shots should reflect, while the aquamentus' do not
because the script is supposed to swap their boss/non-boss fireball status
oh so let's see here...
the gleeok is working on both screens
however, the aquamentus' fireballs are always reflectable even though they SHOULD be boss fireballs and the mirror shield does not reflect/block those

=== @ P-Tux7 01/03/2022 21:02

ok this is extremely weird

=== @ P-Tux7 01/03/2022 21:03

in THIS quest, i have added a gohma 3 to the 4th screen. its fireballs are swapped. i have changed the mirror shield flags to 8 for both block and reflect - reflect small fireballs ONLY. this still has the issue of the aquamentus fireballs being reflectable
https://cdn.discordapp.com/attachments/927665407760924692/927668487307026482/eweaponswap2.qst
(warning buggy quest)
https://cdn.discordapp.com/attachments/927665407760924692/927668538238447686/typeb2.qst
however in THIS quest, the mirror shield is set to the exact same thing, the gohma is set to the exact same script, yet its fireballs are NOT blockable
(use cheat 4 to give yourself a mirror shield)
i have absolutely no idea what the difference is - i just cloned the gohma 3 enemy in my quest and gave it that eweapon script
should be identical to the gohma 3 in eweaponswap2.qst except for enemy # id

=== @ P-Tux7 01/05/2022 20:29

ok so issue here is that this script turns boss fireballs into normal fireballs (Gohma/Gleeok), but not vice versa (Aquamentus)
maybe i should just have two scripts, one that forces the fireball to be non-boss, and one that forces it to be boss, instead of the singular "toggle" script?
i'd be completely fine with that - no difference in gameplay

=== @EmilyV99 (discord: Emily) 01/05/2022 20:30

The script isn't a toggle
It's based on the initd[0]
... you just left the initd at `0`, didn't you? @ P-Tux7

=== @ P-Tux7 01/05/2022 20:34

Oh god damnit.

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:34

lmfao

=== @EmilyV99 (discord: Emily) 01/05/2022 20:34

It helps to actually look at how the literally 2-line script is set up...
the script is literally this:```cpp
eweapon script toggleBossFireball
{
    void run(bool enable)
    {
        if ( enable ) this->Level |= 1;
        else this->Level &= ~1;
    }
}```

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:35

I mean

=== @ P-Tux7 01/05/2022 20:35

So 0 InitD0 for an enemy = normal fireball, 1 InitD0 for boss?

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:35

That isn't commented
at all

=== @ P-Tux7 01/05/2022 20:35

yeah i am seeing nothing there that refers to the enemy's weapon's InitD0 variable

=== @EmilyV99 (discord: Emily) 01/05/2022 20:35

`void run(bool enable)`??

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:36

And what exactly the level is doing isn't immediately clear unless you're familiar with A: what bitwise looks like in code, and B: whether or not having a Level gives the boss fireball status or not

=== @ P-Tux7 01/05/2022 20:36

Oh I figured the Level set the status.

=== @EmilyV99 (discord: Emily) 01/05/2022 20:36

You have a parameter `bool enable`
If it's true it's enabled
If it's false it's disabled

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:36

what is enabled? boss status being unset is enabled, or boss status being set is enabled?

=== @EmilyV99 (discord: Emily) 01/05/2022 20:36

If you don't set it.....
Boss status enabled

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:37

Like, it's obvious for you

=== @EmilyV99 (discord: Emily) 01/05/2022 20:37

Why would enabled disable the boss fireball?

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:37

because you have the general "oh, this is how it works" figuring out knowledge

=== @ P-Tux7 01/05/2022 20:37

I figured because it was named "Toggle" that it flipped the boss fireball flag. So for Aquamentus it would give him boss fireballs, and for Gohma it would give her normal fireballs.

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:37

The script name is "toggleBossFireball"

=== @EmilyV99 (discord: Emily) 01/05/2022 20:37

Aye, probably a poor name

=== @ P-Tux7 01/05/2022 20:37

Like it would make them the opposite of normal.

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:38

You're trying to argue smarts when most people default to unknowledgeable @EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 01/05/2022 20:38

Zoria doesn't know how to name shit

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:38

Also ^

=== @ P-Tux7 01/05/2022 20:38

And I did read the script

=== @EmilyV99 (discord: Emily) 01/05/2022 20:38

But regardless, the fact that `void run()` has a parameter means you have initd to set up
That's zscript 101

=== @ P-Tux7 01/05/2022 20:39

```if ( enable ) this->Level |= 1;
        else this->Level &= ~1;```
I read "if this weapon's level is unequal to 1 (so a boss fireball), change it to 1 (a normal fireball), and else (meaning it IS 1), add 1 to the weapon's level (to make it 2, a boss fireball)"

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:39

```eweapon script toggleBossFireball
{
    void run()
    {
        this->Level ^= 1;
    }
}```
This would actually toggle it
er
there

=== @EmilyV99 (discord: Emily) 01/05/2022 20:39

Aye

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:39

I might be giving ZScript too much credit to have bitwise Xor

=== @EmilyV99 (discord: Emily) 01/05/2022 20:39

It does

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:40

okay, good

=== @EmilyV99 (discord: Emily) 01/05/2022 20:40

It has *boolean* xor

=== @ P-Tux7 01/05/2022 20:40

(replying to @ P-Tux7 "```if ( enable ) this->Level‚Ä¶"): *fixed

=== @EmilyV99 (discord: Emily) 01/05/2022 20:40

`6 ^^ 0 == true`

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:41

(replying to @ P-Tux7 "```if ( enable ) this->Level‚Ä¶"): A fair accessment; I can't blame you for misreading that "if (enable)" as "if (this->Level)" or something similar

=== @EmilyV99 (discord: Emily) 01/05/2022 20:41

(replying to @ P-Tux7 "```if ( enable ) this->Level‚Ä¶"): The thing here is
The weapons level isn't in the if

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:41

I do shit like that all the time

=== @EmilyV99 (discord: Emily) 01/05/2022 20:41

Its `if(enable)`

=== @ P-Tux7 01/05/2022 20:41

(replying to @arceusplayer11 (discord: Deedee) "```eweapon script toggleBossF‚Ä¶"): Ok so I can use this script as I was misusing the prior script? It just toggles it like a light switch?

=== @EmilyV99 (discord: Emily) 01/05/2022 20:41

So whatever `enable` is (here, InitD[0]) is the condition

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:41

Should be able to, yeah

=== @ P-Tux7 01/05/2022 20:41

Thanks, let me try

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:42

@ P-Tux7 also, helpful trick for future script debugging
``Trace(3);`` or etc
Place that down somewhere and have the zscript debugger open, and it'll print a 3 in the console when it's hit

=== @ P-Tux7 01/05/2022 20:43

Thanks!

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:43

you can put any number in there

=== @EmilyV99 (discord: Emily) 01/05/2022 20:43

Or variable

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:43

There's a string variant but I don't remember offhand what it is
And yeah
could put a variable in there

=== @EmilyV99 (discord: Emily) 01/05/2022 20:43

`Trace(this->Level)`
`TraceB(enable)`
The `B` is for boolean, it'll print `true` or `false`

=== @EmilyV99 (discord: Emily) 01/05/2022 21:48

(meta) thread name was changed: ‚ùåüîíWeapon Level modification by scripts
## ‚úÖüîíKillUnbeatables FFC Script Not Working In Certain Quest (#1138)
@ P-Tux7 opened this issue on 01/03/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/927670380343222322



=== @ P-Tux7 01/03/2022 21:10

test
sorry i do that because you can't upload in the first message
anyways

=== @ P-Tux7 01/03/2022 21:13

okay this is weird
this works like a charm
https://cdn.discordapp.com/attachments/927670380343222322/927671149142376458/killunbeatables.qst
kill the right two aquamentus and the left one dies

=== @ P-Tux7 01/03/2022 21:17

however in this quest it doesn't work
https://cdn.discordapp.com/attachments/927670380343222322/927672065807491142/typebunkillables.qst
(you start in the boss room with a cheat armor ring. kill the top and bottom aquamenti with the reflected fireballs. the middle one SHOULD self-destruct after those two are dead, but it doesn't)

=== @ P-Tux7 01/03/2022 21:20

(meta) thread name was changed: KillUnbeatables FFC Script Not Working In Certain Quest

=== @ P-Tux7 01/05/2022 06:19

oh maybe the type b quest fucked up because i compiled it in the unselectable ffc script build and then imported it to the fixed build? i'll try again tomorrow...

=== @EmilyV99 (discord: Emily) 01/05/2022 06:19

...no
the ffc issue was purely dialog
nothing to do with compiler at all
as related as apples and moon rocks

=== @ P-Tux7 01/05/2022 06:20

(replying to @EmilyV99 (discord: Emily) "nothing to do with compiler a‚Ä¶"): *of course it wasn't.*

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:13

okay wtf
I recompiled on my end and it stopped doing it
...So, either 2 things: script broke and recompiling fixed it (scary), or std.zh on your end doesn't work
@ P-Tux7 could you send me your entire std.zh folder?

=== @ P-Tux7 01/05/2022 20:16

sure

https://cdn.discordapp.com/attachments/927670380343222322/928381494454530048/std_zh.zip
sorry, is mine outdated?
i recall slotting in a new std_zh folder somewhere that emily posted, but i may have put it in ANOTHER build's folder ü§¶‚Äç‚ôÇÔ∏è

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:20

Okay so recompiling with your std still didn't recause the issue
so... wtf.

=== @ P-Tux7 01/05/2022 20:23

oh yeah so let me recompile my script file for the type b quest

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:24

if recompiling fixes it... bleugh.

=== @ P-Tux7 01/05/2022 20:24

let's see...

=== @ P-Tux7 01/05/2022 20:27

YES!
thank you so much!
now only for the boss fireball script thing

=== @EmilyV99 (discord: Emily) 01/05/2022 20:28

. . .
*screams confusedly into the void*

=== @arceusplayer11 (discord: Deedee) 01/05/2022 20:30

@ P-Tux7 what version did you last compile in
if you remember

=== @ P-Tux7 01/05/2022 20:36

no idea sorry
but it worked in the most recent build (emily's ffc script selection fix)

=== @EmilyV99 (discord: Emily) 01/05/2022 20:42

Maybe a cosmic ray hit your computer when you last compiled and flipped just the wrong bit?

=== @EmilyV99 (discord: Emily) 01/05/2022 21:48

(meta) thread name was changed: ‚úÖüîíKillUnbeatables FFC Script Not Working In Certain Quest
## üíäüîìstd_extension (#1139)
@EmilyV99 (discord: Emily) opened this issue on 01/04/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/927845304299032636



=== @EmilyV99 (discord: Emily) 01/04/2022 08:45

https://cdn.discordapp.com/attachments/770281148156215346/927840378462302259/unknown.png
some of the `<` and `>` here seem off
@arceusplayer11 (discord: Deedee)
(received a dm report)

=== @arceusplayer11 (discord: Deedee) 01/04/2022 08:54

Down and Up are incorrect
They should be swapped

=== @ P-Tux7 01/04/2022 15:40

Oh, is this for #1137 ?

=== @EmilyV99 (discord: Emily) 01/04/2022 15:40

Not even remotely related

=== @ P-Tux7 01/04/2022 15:42

Oh, sorry. I saw the EWeapon stuff

=== @ P-Tux7 01/04/2022 15:43

I hope you can get to those soon please - it's the only thing preventing me sending a demo to James24.

=== @ Alucard648 01/04/2022 17:02

Also AdjacentCombo fails on screen edges. Here is the fixed function.
https://cdn.discordapp.com/attachments/927845304299032636/927970292821786624/adjacentcombo.zh

=== @EmilyV99 (discord: Emily) 02/03/2022 03:23

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/14/2022 11:44

Fixed the LinkFacing issue
@ Alucard648 I might be editing that function you sent a little if that's okay

=== @arceusplayer11 (discord: Deedee) 02/14/2022 11:51

(mostly to remove an unnecessary array index and to include DirNormal into the function)
(meta) thread name was changed: üíäüîìstd_extension

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:00

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Subscreen copy + pasting (#1140)
@ tacochopper opened this issue on 01/05/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928160078052327505



=== @ tacochopper 01/05/2022 05:36

Pretty much same as the ability to copy-paste dMaps. That, or being able to use pre-existing subscreens as "templates"
## Combo Editor Additions (#1141)
@ vlamart opened this issue on 01/05/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928380229653762128



=== @ vlamart 01/05/2022 20:11

Such as "Skip Combo Cycle on screen init" flag per individual combo, negative numbers for animations (going backwards in the tileset), and maybe even "Something->Previous" equivalents of "Something->Next" flags and types

=== @ P-Tux7 01/05/2022 20:12

I think Skip Combo Cycle on screen init should be a combo attribute, same for Secrets -> Next. Though of course the combo flag for Secrets -> Next can stay for specific use
We're trying to bake these into the combos for the REDUX and LTTP tilesets so that the user doesn't have to faff about with screen secret tiles for every single screen like they did in 2.50 and below.

=== @ vlamart 01/05/2022 20:14

I agree, it would be much easier to deal with most secrets this way

=== @ vlamart 01/05/2022 20:30

Maybe even moving or adding "generic->next" to an independent per combo "(trigger tab flags)->next" and "->pervious" flag or attribute?

=== @EmilyV99 (discord: Emily) 04/24/2022 22:56

so `->Next`/`->Prev` was done awhile ago
`Secrets->Next` can just be... an inherent flag.
because that's what those are for

=== @ vlamart 04/24/2022 23:05

Yes I saw that a few updates ago, thank you!
## Fairy Additional Counter Refills (#1142)
@ P-Tux7 opened this issue on 01/05/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928416703208128602



=== @ P-Tux7 01/05/2022 22:36

A suggestion for them to have attributes to refill a certain amount of Rupees, Bombs, Super Bombs, and Arrows you set when Link collects them. I actually already thought you could do that, which is why I included winged sprites for said items in Cambria a la Link's Awakening.

=== @EmilyV99 (discord: Emily) 01/05/2022 22:38

err
could you not
use the pickup tab?
if you don't need more than one of those counters filled at once, I would think the pickup tab would just work....

=== @ P-Tux7 01/05/2022 22:40

oh duh that applies to all items...
sorry
though that reminds me
BS Zelda Ancient Stone Tablets had a potion type (gold) that refilled life, magic, bombs, and arrows. So that could still be of use eventually. Though no rush of course

=== @EmilyV99 (discord: Emily) 01/05/2022 22:42

potions in empty bottles can do up to 3 counters
if you absolutely need more, it isn't that difficult of a script, frankly
## ‚úÖüîíEnemies Not Returning After Death (#1143)
@ P-Tux7 opened this issue on 01/06/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/928469846822371348



=== @ P-Tux7 01/06/2022 02:07

so

https://cdn.discordapp.com/attachments/928469846822371348/928469924567982090/typeb2.qst
cheat your way to invincibility
(4)
use the kill all enemies cheat and kill all the enemies in various rooms
for whatever reason, enemies always seem to stay dead, the rooms don't respawn after dying or going through several other rooms or even SAVING AND CONTINUING
none of them are set to stay dead

=== @ P-Tux7 01/06/2022 02:13

ok, so 2nd quest is working normally - enemies respawn in level-1

=== @ P-Tux7 01/06/2022 02:15

@EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 01/06/2022 02:16

@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 01/06/2022 02:26

suspected cause: the dmap being the start dmap (even though it is an nes dungeon)
(mind you, even if that is the cause, still a bug)

=== @ P-Tux7 01/06/2022 12:30

any leads deedee?

=== @ P-Tux7 01/06/2022 12:33

for the time being i'll just make enemies always respawn

=== @arceusplayer11 (discord: Deedee) 01/06/2022 13:32

sorry, just woke up a bit ago

=== @arceusplayer11 (discord: Deedee) 01/06/2022 13:41

@ P-Tux7 it's because the non-beatable enemies, like the statue shooters and zoras, are keeping the enemies dead

=== @arceusplayer11 (discord: Deedee) 01/06/2022 13:47

...goddamnit this is gonna require a new QR ain't  it

=== @ P-Tux7 01/06/2022 17:00

ah mm

=== @arceusplayer11 (discord: Deedee) 01/06/2022 17:20

@ P-Tux7 I think I added 2 QR's that might be of use
would you mind testing them for me and see if they work?

=== @ P-Tux7 01/06/2022 17:28

of course!

=== @arceusplayer11 (discord: Deedee) 01/06/2022 17:30

aight, just give me a few minutes...

=== @arceusplayer11 (discord: Deedee) 01/06/2022 17:46


https://cdn.discordapp.com/attachments/928469846822371348/928706078873636904/zelda.exe
https://cdn.discordapp.com/attachments/928469846822371348/928706079465025606/zquest.exe
@ P-Tux7
Added 2 new QR's:
- Unbeatable enemies don't keep the screen dead
and
- No "Leave One Enemy Alive" Trick

=== @ P-Tux7 01/06/2022 17:47

lmfao the latter

=== @arceusplayer11 (discord: Deedee) 01/06/2022 17:47

James is gonna love that
Also, if you're designing for James, I find from the design of his games that he enjoys a sort of metroidvania progression to his type B quests
(assuming he makes his own games tailor made for his own enjoyment)
You'll want to have the player interweaving in and out of different dungeons instead of having them commit to a single dungeon
But you'll also want to make it abundantly clear; James has NPCs outright tell you when to leave a dungeon and go to another
Or he'll make it clear when he wants you to explore
He doesn't want to be stuck figuring out where to go, but I think he likes doing things in a weird, interconnected way
That's just an assumption thouhg

=== @ P-Tux7 01/06/2022 18:30

you'll also notice something in my upcoming demo that i put in that he also liked
namely you can get a certain thing early with foreknowledge

=== @ P-Tux7 01/06/2022 18:59

this works, thank you so much
6 screens eh?
![image](https://cdn.discordapp.com/attachments/928469846822371348/928724491796906015/unknown.png)
food for thought for a game data setting

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:39

(meta) thread name was changed: ‚úÖüîíEnemies Not Returning After Death
## ‚úÖüîíWrong default quest loading (#1144)
@ P-Tux7 opened this issue on 01/06/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/928473854643413063



=== @ P-Tux7 01/06/2022 02:23

When you play a quest with no custom quest loaded, it says 1st Quest. But this quest is actually the Zelda 1 2nd Quest.

=== @EmilyV99 (discord: Emily) 01/06/2022 02:32

??
It should be 1st
`modules/classic/classic_1st.qst`

=== @ P-Tux7 01/06/2022 22:40

ok so due to me having replaced a lot of builds and all
let's see if this happens in the next freshly packaged alpha

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:38

@ P-Tux7 does it happen in a freshly packed Alpha?
(i forget if we posted 101 after this)

=== @ P-Tux7 01/17/2022 20:50

lemme check later

=== @EmilyV99 (discord: Emily) 02/03/2022 03:23

@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 02/10/2022 16:43

Latest buildpack; still broken

=== @arceusplayer11 (discord: Deedee) 02/10/2022 16:45

shit.

=== @EmilyV99 (discord: Emily) 02/10/2022 22:06

no one reported a fix, so yeah

=== @ P-Tux7 02/10/2022 22:12

i figured it had been enough builds/long enough/important a bug enough that it was worth me checking

=== @EmilyV99 (discord: Emily) 02/11/2022 00:53

hooookay
fun times on this

=== @EmilyV99 (discord: Emily) 02/11/2022 00:57

All module-based quests were being offset by 1
so everything was fucked up
I've done several things here
-Fixed default quest offset
-Fixed skip name offset
-If a module has 0 quests in it, then instead of loading a 1st.qst, no quest will be loaded for that slot upon creation. Trying to load a slot with no quest produces a special error:
![image](https://cdn.discordapp.com/attachments/928473854643413063/941498554491486238/unknown.png)

=== @EmilyV99 (discord: Emily) 02/11/2022 01:05

-Cleaned up the quest load metadata printing a little
![image](https://cdn.discordapp.com/attachments/928473854643413063/941500175338311730/unknown.png)

=== @EmilyV99 (discord: Emily) 02/11/2022 01:15

-Changing modules should no longer change already-loaded default quests

=== @EmilyV99 (discord: Emily) 02/11/2022 01:23

-When you go to select a custom quest, it will start with the info for the default quest displayed
![image](https://cdn.discordapp.com/attachments/928473854643413063/941504802339299338/unknown.png)
....without affecting the default path.
![image](https://cdn.discordapp.com/attachments/928473854643413063/941504874489724978/unknown.png)

=== @EmilyV99 (discord: Emily) 02/11/2022 01:30

Also this?
![image](https://cdn.discordapp.com/attachments/928473854643413063/941506446560993330/unknown.png)
Gone.
![image](https://cdn.discordapp.com/attachments/928473854643413063/941506454962204752/unknown.png)
Now it just always asks you, and isn't hidden in some random menu.

=== @EmilyV99 (discord: Emily) 02/11/2022 01:48

@ P-Tux7
https://cdn.discordapp.com/attachments/928473854643413063/941510972118532166/buildpack.zip
(meta) thread name was changed: ‚úÖüîíWrong default quest loading
## QR - Use absolute coordinates for rotated script drawing. (#1145)
@ Alucard648 opened this issue on 01/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928603876066746368



=== @ Alucard648 01/06/2022 11:00

Because the way ZC determines rotation axis for scripted draws is non-understandable bonkers. People had to resort to use bitmaps to do this.

=== @EmilyV99 (discord: Emily) 01/06/2022 11:00

. . . ?
you provide a center point `cx, cy` to be the center of most draws
I wouldn't THINK it would be that hard to use.... but then again I pretty much never use rotation, so
gonna need to know what it is you want changed here though; which needs to include how it works now vs what is specifically wrong with that

=== @ Alucard648 01/06/2022 11:23

```ffc script RotTest2{
    void run(){
        int origdata = this->Data;
        this->Data = 1;
        int cmb = ComboAt(this->X+8, this->Y+8);
        int w = this->TileWidth;
        int h = this->TileHeight;
        int cx = ComboX(cmb)+8;
        int cy = ComboY(cmb)+8;
        int counter = 0;
        while(true){
            counter++;
            Screen->DrawCombo(2, this->X, this->Y, origdata, w, h, this->CSet, -1, -1, cx, cy, counter, 0, 0, true, OP_OPAQUE);
            Waitframe();
        }
    }
}```

=== @EmilyV99 (discord: Emily) 01/06/2022 11:24

Err, I think you want `this->X+8` not `ComboX(cmb)+8`
Because `this->X` is the draw x
Not `ComboX(cmb)`

=== @ Alucard648 01/06/2022 11:31

This script should cause left FFC to rotate  around solid combo in this test quest. The right FFC is desired result, achieved using bitmaps.
https://cdn.discordapp.com/attachments/928603876066746368/928611653203927050/PillarsRotator.qst

=== @ Alucard648 01/06/2022 11:32

Tried ComboX(cmb) and ComboY(cmb). Results in misplaced FFC, rotating at center point of scripted drawing.

=== @EmilyV99 (discord: Emily) 01/06/2022 11:36

script file?

=== @ Alucard648 01/06/2022 11:36

```ffc script RotTest2{
    void run(){
        int origdata = this->Data;
        this->Data = 1;
        int cmb = ComboAt(this->X+8, this->Y+8);
        int w = this->TileWidth;
        int h = this->TileHeight;
        int cx = ComboX(cmb)+8;
        int cy = ComboY(cmb)+8;
        int counter = 0;
        while(true){
            counter++;
            Screen->DrawCombo(2, ComboX(cmb)+8, ComboY(cmb)+8, origdata, w, h, this->CSet, -1, -1, cx, cy, counter, 0, 0, true, OP_OPAQUE);
            Waitframe();
        }
    }
}```

https://cdn.discordapp.com/attachments/928603876066746368/928613237312868422/rotpillar.z

=== @EmilyV99 (discord: Emily) 01/06/2022 11:47

. . . I really have never touched rotation enough to notice how fucking dogshit this is
my god
@arceusplayer11 (discord: Deedee) adding to thread

=== @EmilyV99 (discord: Emily) 01/06/2022 11:54

Even trying to steal ideas from the `MooshDrawTile` function, I can't quite seem to get it working right for this at all.... so this needs new logic, on a QR.... fun times.

=== @arceusplayer11 (discord: Deedee) 01/06/2022 11:58

The rotation point should be the actual draw location
Which, appears to be right

=== @EmilyV99 (discord: Emily) 01/06/2022 11:59

the script looks like it should be right
yet the draws do not be right
because DrawCombo rotation sucks ass

=== @arceusplayer11 (discord: Deedee) 01/06/2022 11:59

Oh
ohhhh
I see the problem loading the quest
What the actual fuck.
Honestly, this needs new logic yeah
this has always been awful and confusing to work with

=== @EmilyV99 (discord: Emily) 01/06/2022 12:01

UHHHH

![image](https://cdn.discordapp.com/attachments/928603876066746368/928619408992108564/2022-01-06_07-01-36.mp4)

=== @arceusplayer11 (discord: Deedee) 01/06/2022 12:02

We also need a way to have it default to centering on the tile's center if given certain arguments

=== @EmilyV99 (discord: Emily) 01/06/2022 12:02

Letting it run for long enough, THIS happened
which uh
guessing it had fun with a really large (or overflowed to negative?) value of `counter`....

=== @arceusplayer11 (discord: Deedee) 01/06/2022 12:04

@EmilyV99 (discord: EmilyV) Honestly, should we have a new version of DrawCombo that does rotation better?
Cause I imagine having more arguments would be grand
For stuff like different rotation styles

=== @EmilyV99 (discord: Emily) 01/06/2022 12:04

up to you

=== @arceusplayer11 (discord: Deedee) 01/06/2022 12:04

up to you, you mean ;P

=== @EmilyV99 (discord: Emily) 01/06/2022 12:04

nooo, I mean up to you
have fun

=== @arceusplayer11 (discord: Deedee) 01/06/2022 12:05

Fuck

=== @arceusplayer11 (discord: Deedee) 01/06/2022 12:06

@ Alucard648 more of a script error, but you should %= 360 for the counter
cause once it goes negative it freezes

=== @ Alucard648 01/06/2022 12:21

Update tests. Fixed counter overflow.
https://cdn.discordapp.com/attachments/928603876066746368/928624304021729370/rotpillar.z
https://cdn.discordapp.com/attachments/928603876066746368/928624304197881866/PillarsRotator.qst

=== @ Alucard648 01/06/2022 13:10

The same issue applies to DrawTile, Rectangle and Circle.
## QR - Enemy BombsSuper Bombs Explode Upon Hitting Wall (#1146)
@ P-Tux7 opened this issue on 01/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928767084027076618



=== @ P-Tux7 01/06/2022 21:48

Like Rocks
## QR - Enemy Projectiles Trigger Combos And Bombable Walls (#1147)
@ P-Tux7 opened this issue on 01/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928767382472777858



=== @ P-Tux7 01/06/2022 21:50

Lit Bomb explosions trigger Bomb flags, Lit Super Bomb explosions trigger Super Bomb flags. Both trigger bombable dungeon walls obviously
(meta) thread name was changed: QR - Enemy Projectiles Trigger Combos And Bombable Walls
Oh another idea
Enemy fire triggering burn combos or lighting torches
The same would presumably apply to boomerangs, sword beams, and wind, but those are less of a priority
## Signpost Flag - Gossip Stone (#1148)
@ P-Tux7 opened this issue on 01/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/928775021076287569



=== @ P-Tux7 01/06/2022 22:20

If using a Lens of Truth close enough to the signpost and in one of the directions it can be talked to in, the message is displayed. One would presumably set the signpost to accept no buttons for input, or if that's impossible, then the flag would disable button reading of the signpost combo.

If there's any remaining flags for lenses, a "Can Read Gossip Stones" one might be cool too.

=== @ Alucard648 01/07/2022 21:56

```//Gossip stone. Displays message when viewed with Lend of truth
//D0 - string.
ffc script GossipStone{
    void run (int str){
        bool cd = true;
        while (true){
            int vis=0;
            int lens = GetCurrentItem(IC_LENS);
            if (lens>=0){
                itemdata it = Game->LoadItemData(lens);
                vis = it->Attributes[0];
            }
            if (cd){
                if (UsingItem(lens)&& Link->MP>0){
                    int distx = CenterX(this) - CenterLinkX();
                    int disty = CenterY(this) - CenterLinkY();
                    int dis = DistanceSquared( distx, disty );
                    
                    if (dis<=(vis*vis)){
                        Game->PlaySound(32);
                        Screen->Message(str);
                        cd=false;
                    }
                }
            }
            else if (UsingItem(lens)|| Link->MP==0) cd=true;
            Waitframe();
        }
    }
}```
My first 2.55 script...

=== @EmilyV99 (discord: Emily) 01/10/2022 14:11

(replying to @ P-Tux7 "If using a Lens of Truth clos‚Ä¶"): To be frank here, the simplest way to implement this is with string control codes. Just have it jump to the real message if you have the lens, or `mask of truth`, or whatever item you want it to be; and a default message otherwise.
Using the lens to trigger it feels a little jank to me, honestly; I'd want a gossip stone to work just like a sign for triggering
and with SCCs you can already make that work

=== @ P-Tux7 01/10/2022 17:36

mm
## ‚úÖüîí[2.55A101, Tile Editor] Cursor disappears when pressing spacebar to enter shift-select line mode (#1149)
@ 4matsy opened this issue on 01/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/928814708587384873



=== @ 4matsy 01/07/2022 00:58

You know how, at first, the tile editor's mode of using the shift key to select multiple tiles allows you to select a box-shaped formation of tiles?

Well, if you press space to change that to the line-by-line selection mode, the cursor will usually disappear, leaving you to use the tile preview in the bottom left corner to guess where your current position is. üò¨ 

Upon further testing on tile page 0, the cause of the bug might have been found: it seems that the cursor is simply being drawn at position (column number, tile number) instead of (column number, row number). ü§∑‚Äç‚ôÇÔ∏è

=== @ 4matsy 01/07/2022 02:51

(meta) thread name was changed: [2.55A101b61, Tile Editor] Cursor disappears when pressing spacebar to enter shift-select line mode

=== @EmilyV99 (discord: Emily) 02/03/2022 03:23

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 02/08/2022 09:24

....OH
For FUCKS
SAKE
```cpp
#define TILEROW(tile)        (tile/TILES_PER_ROW)```
That's a nice macro, right?
So like, `TILEROW(9)` -> `(9/20)` -> `0`, as tile 9 is in row 0
now like
`TILEROW(i-first)`
-> `(i-first/20)`
-> `i - (first/20)`
wrong fucking maaaath

=== @EmilyV99 (discord: Emily) 02/08/2022 11:40

(meta) thread name was changed: ‚úÖüîí[2.55A101, Tile Editor] Cursor disappears when pressing spacebar to enter shift-select line mode

=== @EmilyV99 (discord: Emily) 02/09/2022 15:18

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ 4matsy 02/12/2022 18:27

This one appears to be fixed in the latest nightly. ^_^
## üíäüîì[2.55A101b61] Red Leevers ignore clocks (#1150)
@ 4matsy opened this issue on 01/07/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/928842784708911184



=== @ 4matsy 01/07/2022 02:49

@ NightmareJames ran into this one during the recent stream of HeroOfFire's 4th quest. I checked ZC's 1st.qst on a hunch, and the bug happens there too.

It's easiest to see on the screens with the red leevers a few screens to the right of the starting point. Get the wooden sword, then head right a few screens until you reach the coast screens with the red leevers. With any luck, one of them - that isn't the last one üòí - will drop a clock, and you can see the bug in action. The leevers just keep right on moving despite the clock being picked up.

=== @EmilyV99 (discord: Emily) 02/03/2022 03:22

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/13/2022 15:57

yeah, just confirmed it's happening

=== @arceusplayer11 (discord: Deedee) 02/14/2022 14:03

Fixed, and also added some new Leever behavior QRs
(meta) thread name was changed: üíäüîì[2.55A101b61] Red Leevers ignore clocks

=== @arceusplayer11 (discord: Deedee) 02/16/2022 03:59

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíSlash Combo Sword Secret Trigger Priority is Backwards (#1151)
@ Moosh opened this issue on 01/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/928902857648930816



=== @ Moosh 01/07/2022 06:48

I feel somewhat silly digging up this discussion again, but I'm still seeing issues that are still breaking quests. When Zoria changed the Slash->Next behavior, it introduced a second bug where slash combo behavior is taking priority over secret triggers. So if I put a sword trigger on a bush combo, it will switch to its slashed combo instead of the one for the secret and will not trigger the secret until you slash it again. This is not the same thing as `Old Slash Combo Secret Flag Behavior`, so please don't dismiss it as such. There's something funky going on here still.

https://cdn.discordapp.com/attachments/928902857648930816/928902965304127518/SlashNextSecretPriority.qst

=== @ Moosh 01/07/2022 06:51

Here's an example quest with two bushes, one using the sword and the other also able to be triggered by the wand. The sword bush works correctly with `Old Slash Combo Secret Flag Behavior` checked but has the double slash issue with it off. Interestingly with the compat flag it appears to use properties of both triggers as it plays the secret sound and uses the secret combo but also produces bush leaves as if it were slashed. Ideal.
On the wand screen, the wand trigger always takes priority over the slash trigger, regardless of if the compat rule is checked or not. That one just works
Interestingly the wand trigger also creates bush leaves but only if the magic weapon was created on top of it.

=== @ Moosh 01/07/2022 06:56

small update also adding a hammer trigger and a strike trigger for reference
https://cdn.discordapp.com/attachments/928902857648930816/928904805097816084/SlashNextSecretPriority.qst
The hammer trigger has the secret take priority when struck. The strike trigger has the bush take priority when hit with the sword

=== @ Moosh 01/07/2022 07:09

Another inconsistency with trigger priority that I'm not sure if can be addressed: A magic wand shot hitting a Block All or Block Magic combo with a magic trigger on it will trigger secrets when hit from the west or north end, but eat the weapon when hit from the south or east. WEW

=== @ Moosh 01/07/2022 07:11

This above interaction may or may not be involved in an emulation setting. I got softlocked in Zelda's Butt due to the above issue and reported it to Zoria multiple times. I have no clue if he ever addressed it, betting no

=== @arceusplayer11 (discord: Deedee) 01/17/2022 20:37

I'll look into it
Sorry for the delay

=== @ Moosh 01/18/2022 00:47

Thanks Deedee.

=== @ Moosh 01/18/2022 00:49

Also since P-Tux pointed out it existed, I checked the quest report and it does seem to report flag 79 as a "bugged" flag placement, so I guess Zoria intended it to work this way. Though it does also report 76 and that one still works the old way

=== @ Moosh 02/03/2022 03:01

bump

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:04

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:17

Nuking the emulation rule entirely
@ Moosh if I post a build, can you test to see if there's any issues?

=== @ Moosh 02/03/2022 03:18

2.55?

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:18

2.53

=== @ Moosh 02/03/2022 03:18

Gotcha. Will give a look

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:20

alright, lemme post one

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:21


https://cdn.discordapp.com/attachments/928902857648930816/938635212122898462/zelda.exe

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:23

@ Moosh pinging just in case

=== @ Moosh 02/03/2022 03:24

Seems to be working

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:24

woo!
Can you check the emulation rule menu as well?
I removed the emulation rule from that menu
I *think* I removed it correctly, but the old GUI system is <:WhenEvanPostsSomething:695894891389255711>

=== @ Moosh 02/03/2022 03:26


![image](https://cdn.discordapp.com/attachments/928902857648930816/938636433864933406/unknown.png)
Seems to be gone

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:26

woo!
and checking those last two don't have any offsets?
They check the correct one?

=== @ Moosh 02/03/2022 03:27

The flag 16-31 behavior is how it used to as well, but I assume this is intended

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:27

yeah

=== @ Moosh 02/03/2022 03:27

How would I test those last two?

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:27

Just check them and make sure the little checkmark is on the thing you just checked

=== @ Moosh 02/03/2022 03:28

Oh yeah, it is

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:28

nice

=== @EmilyV99 (discord: Emily) 02/03/2022 03:28

‚ù§Ô∏è

=== @arceusplayer11 (discord: Deedee) 02/03/2022 03:28

2.55 is going to be more complicated
Cause I need to actually fix the behavior instead of removing it entirely

=== @arceusplayer11 (discord: Deedee) 02/03/2022 04:21

@ Moosh check [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
This has been fixed in 2.55 as well now

=== @arceusplayer11 (discord: Deedee) 02/03/2022 04:27

Still need to change the logic for auto-enabling the QR, cause with it being removed entirely in 2.53 it should probably not enable the rule in newer 2.53 quests

=== @EmilyV99 (discord: Emily) 02/08/2022 13:21

(meta) thread name was changed: üîìSlash Combo Sword Secret Trigger Priority is Backwards

=== @arceusplayer11 (discord: Deedee) 02/08/2022 23:11

(meta) thread name was changed: ‚úÖüîíSlash Combo Sword Secret Trigger Priority is Backwards
## Combo Editor - Double Click On A Combo To Edit It (#1152)
@ P-Tux7 opened this issue on 01/08/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/929478900126466078



=== @ P-Tux7 01/08/2022 20:57

What it says on the tin, much like the tile editor

=== @ Jared 02/12/2022 03:14

This is a really cool idea!
## üíäüîì5th Quest - Traps are bugged out(and wrong quest loaded) (#1153)
@ bigjoe opened this issue on 01/09/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/929579882151825529



=== @ bigjoe 01/09/2022 03:38

In 5th quest, the traps use the "blank" tile, and also using the name JEAN apparently wants to load the 4th.qst

=== @ P-Tux7 01/09/2022 03:40

#1144
also same for that quest incidentally
with the traps

=== @ tim 01/09/2022 03:40

trap tile errors also confirmed in other quests

=== @ P-Tux7 01/09/2022 03:40

i thought i had just messed something up with combining all these builds

=== @EmilyV99 (discord: Emily) 01/09/2022 04:39

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 01/12/2022 03:29

(replying to @ bigjoe "In 5th quest, the traps use t‚Ä¶"): `JEAN` should load `classic_5th.qst`, which is the fourth quest in the module (as 3rd was removed)

=== @ P-Tux7 02/13/2022 06:28

a theory to check tomorrow - traps that don't use New Enemy Tiles not reading the correct tile...?
or perhaps a flaw with the Animation Style they get set to and are using as their "Old Anim. Style" by default in the enemy editor

=== @ P-Tux7 02/13/2022 06:29

though if non-animated Guys still display properly and don't use tile 0, that may not be it, because IIRC them and Traps use the same Old Style animation

=== @arceusplayer11 (discord: Deedee) 02/13/2022 14:41

I think this might actually be fixed, but I need to check

=== @arceusplayer11 (discord: Deedee) 02/13/2022 15:54

The traps issue is fixed, and Jean is *trying* to load the correct quest.
Now to get the stench of 5th quest off of me.
(meta) thread name was changed: üíäüîì5th Quest - Traps are bugged out(and wrong quest loaded)

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ P-Tux7 02/15/2022 05:49

Looks fine if I set a Corner Trap room in 1st and test it. However, I don't know if this accounts for old quests with traps because I'm not even sure where the closest location in Z1 that HAS traps is to test the original old quests
At the very least this confirms that importing and re-saving old quests does not have any issue with trap graphics.

=== @ tim 02/15/2022 05:50

bow room in level 1

=== @ P-Tux7 02/15/2022 22:00

Ok they work perfectly in un-resaved 1st quest too

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:00

confirmed fixed?

=== @ P-Tux7 02/16/2022 04:01

i'll try 5th tomorrow but most likely
if anyone can point me to where a level with traps is in that quest i'd be grateful

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:03

They're in level 1
but uh, my condolences if you play it, I don't think the quest is very good.
## QR Z1 Bosses Spawn At Old Locations Without Enemy Flags (#1154)
@ P-Tux7 opened this issue on 01/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/930046917365342208



=== @ P-Tux7 01/10/2022 10:34

A supplementary QR to the Z1 bosses can spawn anywhere QR where if they are not told to spawn somewhere using an enemy flag, they spawn at their Z1/2.50 location instead of randomly. It's impossible to "manually place" a few enemies in the correct place such as Gleeoks using combo flags
I think this applies to
-Aquamentus left/right
-Manhandla?
-Gleeok
-Gohma
-Ganon
-Zora
-Boulders?
-Moldorm
-Lanmola
-NOT traps because i'm pretty sure their "hardcoded" spawn location would be 0,0

=== @ P-Tux7 03/29/2022 19:45

@ NightmareJames

=== @ NightmareJames 03/29/2022 19:46

Gleeoks you can using the "Center X rule" or whatever it's called, but it needs to be applied on ALL the bosses, not just Gleeoks.  Gohmas are off-center too among other guilty parties

=== @ P-Tux7 03/29/2022 19:47

Aquamentus
I tried to make a setup of three in a stack. Didn't quite work so I asked for this

=== @ NightmareJames 03/29/2022 19:51

This is the rule in question needed to fix the old location spawn points
![image](https://cdn.discordapp.com/attachments/930046917365342208/958453398896771132/bossrule.png)
Needs to be on all bosses, not just Gleeok
As an option
## ‚úÖüîíNormal Freeform Combos Bug out (#1155)
@ SkyLizardGirl opened this issue on 01/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/930183182337318992



=== @ SkyLizardGirl 01/10/2022 19:35

Normal Freeform Combos bug out, by 4 by 4 tiles by default and Not by 1 by 1 in tile size when you try to place a 1 by 1 FFC.   This is in New Alpha 2.55   101

![image](https://cdn.discordapp.com/attachments/930183182337318992/930183208509784104/unknown.png)
I did a test starting a fresh new quest to test this out.
Try placing a single 1 by 1 FFC and see what happens.

=== @ SkyLizardGirl 01/10/2022 19:39

I'm using FFC alot more lately, so i noticed this.

=== @ SkyLizardGirl 01/10/2022 19:40

Again, this happens when you place a fresh FFC.

=== @EmilyV99 (discord: Emily) 01/11/2022 02:42

Yeeep, I see the problem.
Will be fixed in the next build posted
(meta) thread name was changed: üíäüîìNormal Freeform Combos Bug out

=== @EmilyV99 (discord: Emily) 01/12/2022 03:28

(meta) thread name was changed: ‚úÖüîíNormal Freeform Combos Bug out

=== @EmilyV99 (discord: Emily) 01/15/2022 02:24

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚úÖüîíStray Pixels Drawn during First Opening Wipe (#1156)
@ HeroOfFireZC opened this issue on 01/11/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/930538370323578931



=== @ HeroOfFireZC 01/11/2022 19:07

Starting in Alpha 100, during the very first opening wipe after starting ZC some extra pixels are drawn. Upon closer look, they appear to be based off of misc colors. They disappear as soon as the opening wipe ends and will not be drawn again until you close and reopen ZC.

![image](https://cdn.discordapp.com/attachments/930538370323578931/930538396131135558/zc_screen00001.png)
This showcases said lines of pixels. Note there are some in the top left too.

=== @ bigjoe 01/11/2022 19:08

I have noticed these too, but I didn't report them because I thought they were there for some sort of debugging purposes

=== @ HeroOfFireZC 01/11/2022 19:08

Kinda curious if this is a leftover debug thing.
I'm only reporting this here so it doesn't get buried in other channels.

=== @EmilyV99 (discord: Emily) 01/12/2022 02:46

hmmm

=== @EmilyV99 (discord: Emily) 01/12/2022 03:25

this doesn't appear to be from any debug thing

=== @EmilyV99 (discord: Emily) 01/12/2022 03:26

...yep, found it
So, you know how I added light beam puzzles that do stuff with mirrors and stuff?
Well, those have their own global bitmap that is used for them
.....and it, uh, wasn't being cleared soon enough, so during the opening wipe, it was drawing random memory onto the screen

=== @EmilyV99 (discord: Emily) 01/12/2022 03:28

(meta) thread name was changed: ‚úÖüîíStray Pixels Drawn during First Opening Wipe

=== @EmilyV99 (discord: Emily) 01/15/2022 02:24

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ZC Random Hard Crash Entering Cave Combos (#1157)
@ HeroOfFireZC opened this issue on 01/11/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/930540340337848370



=== @ HeroOfFireZC 01/11/2022 19:15

Sadly this seems to be one of those crashes that seems to happen randomly, but it's happened twice in two different recent builds in different quests, but the one thing in common was I touched a Cave (Walk Down) combo when the hard crash occurred.
My guess is this is something position based, or maybe something in the code is reading random memory (which is why it doesn't always crash).

=== @ HeroOfFireZC 01/11/2022 19:16

I have not experienced this crash in older builds (92 and older), and I do recall an earlier build that had other random ZC crashes, so maybe it's related?

=== @ HeroOfFireZC 01/11/2022 19:18

For point of reference, the crash has occurred in 99 and 101.

=== @ P-Tux7 01/11/2022 19:51

@arceusplayer11 (discord: Deedee) these alphas were post entrance warp fix, right?

=== @arceusplayer11 (discord: Deedee) 01/11/2022 20:15

yeah

=== @ HeroOfFireZC 01/11/2022 20:21

Wait, wasn't the broken cave warps 100 though?

=== @ HeroOfFireZC 01/11/2022 20:26

Meanwhile I forget if it was 97 or 99 that had other crashing bugs (I want to say one happened often on screens with Gleeok?), which got fixed by 100.
When it happened in 99, it was pretty early in a quest so I could get back to the specific screen to see if I could reproduce it, but couldn't. Wasn't sure if it then got fixed along with the other crashes.

=== @ HeroOfFireZC 01/11/2022 20:28

If it helps, the crash happens before the first frame of the "going down the cave" effect. The SFX does not get a chance to play, and I don't think Link is even drawn under the cave combo yet.

=== @arceusplayer11 (discord: Deedee) 01/11/2022 22:01

(replying to @ HeroOfFireZC "Wait, wasn't the broken cave‚Ä¶"): 100 was broken caves yeah
101 is post broken caves

=== @ HeroOfFireZC 01/11/2022 22:05

So this crash is unrelated to that bug / fix.

=== @arceusplayer11 (discord: Deedee) 01/11/2022 22:32

Possibly...

=== @EmilyV99 (discord: Emily) 01/12/2022 02:46

I'd put it in the `LinkClass::dowarp()` section as a likely bugged area, though

=== @arceusplayer11 (discord: Deedee) 02/13/2022 14:40

@ HeroOfFireZC could you give me some example quests of where this occurs?

=== @ HeroOfFireZC 02/13/2022 17:36

It's happened in my own quests (I usually play them first in a new build)

=== @ HeroOfFireZC 02/13/2022 17:37

Happened in Mirage Island after an hours, and Turtles Hate Candy after 15 minutes. And if you recall, Mirage Island is a 256 screen overworld with a ton of caves, so the fact it only crashed entering a cave after an hour and not the first 5 or so is annoying to pin down.
On the other hand, has *not* crashed testing DDD, which has *zero* Walk Up/Down caves.

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:38

hmmm
might need to hook up a debugger and play around for a bit until a crash happens
not the *worst*, as long as that crash eventually happens

=== @ HeroOfFireZC 02/13/2022 17:39

Also, this was fairy recent. In a prior build I was playing through some older randos (also cave happy), and had zero crashes there.
Actually, hold on, let me see if I can confirm those versions (though if this is super random, those versions may still have this bug)

=== @ HeroOfFireZC 02/13/2022 17:42

Okay, first off, the first crash was in Alpha 99, Build 61
Oh, that number means nothing for nightlys....
Uh, so, the version with 16+ hours of gameplay an no crashes was Nov 14 build.
Wait....
The first crashing build was Oct 21. *Before* that other build.
And then the 101 build with the other crash Jan 9.
So I guess I got *really* lucky in that Nov 14 build?
Let me glance at one other thing here quick....

=== @ HeroOfFireZC 02/13/2022 17:47

Okay, has nothing to do with the entrance type, both cases were different warp types.
(was wondering if the reason I dodged it in that one version was having a lot of generic screen 80 caves)
(and if both cases were a specific type, like Entrance / Exit or something)
So..... where does this leave this. Seems like something involving random memory, given how inconsistent it is.

=== @arceusplayer11 (discord: Deedee) 02/13/2022 17:49

latest version of mirageisland off Pure?

=== @ HeroOfFireZC 02/13/2022 17:49

Yep.
I think Turtles is the same, that one was the Level 2 entrance, which made be briefly think it had to do with screen secrets spawning the cave hitbox over me, but that does not seem to be the case.
Since that one was so early in the quest, I actually started the run over, saved when I could access that cave entrance, and tried entering it differently several times, no crashes.
But then again, all the caves in Mirage Island are the Z1 style, it's nearly impossible to approach those combos from a weird angle anyways.

=== @ HeroOfFireZC 02/13/2022 17:53

Right now this just appears to be very random chance, I wonder if it can happen in *any* quest or if there is some specific rule tripping it.

=== @ HeroOfFireZC 02/13/2022 18:08

One thing I can think of these quests have in common, both were last saved in 2.52. I doubt that is the cause, but just in case...

=== @arceusplayer11 (discord: Deedee) 02/13/2022 22:19

4 hours and I have yet to crash
I'm hoping I either fixed the bug, or I run into the crash sooner rather than later

=== @arceusplayer11 (discord: Deedee) 02/14/2022 11:03

finished a run, no crash

=== @ HeroOfFireZC 02/14/2022 16:42

Given what was discussed, and how I had about 10+ hours between two randos with plenty of caves with no crashes, yet clearly in a version that exists between the two I have encountered the crash in, it does seem very random.

=== @arceusplayer11 (discord: Deedee) 02/14/2022 16:43

@ HeroOfFireZC if you run into it in the upcoming alpha, let me know

=== @ HeroOfFireZC 02/14/2022 16:43

But looking at the code related to caves, there doesn't seem to be any clear issue?

=== @arceusplayer11 (discord: Deedee) 02/14/2022 16:43

I'll probably start testing in older versions
If I can recreate it there, I might be able to figure out if it's a thing we fixed or not

=== @ HeroOfFireZC 02/14/2022 16:47

Just trying to figure out how to narrow down the issue. It's  Hard Crash, so that should limit it to certain kinds of issues. It's really random, so random memory access seems like the most likely cause.
The last hard crash bad memory access issue was a thing in zQuest where the "hitbox" for color replacing was a bit too large, letting you go out of bounds of an array.
Which meant how consistent it was had to do with a combination of zQuest version and my comp, others could have done the same thing and not seemed to crash.

=== @ HeroOfFireZC 02/14/2022 16:51

I guess one thing to look at. If you have an idea what code is being called the first frame you touch a walk-down cave combo, compare it between current versions and earlier alphas, like 92. See if anything has changed.
(I have used and played on 92 for a *long* time with no crashes, so it seems safe to assume the crash was introduced since then)

=== @arceusplayer11 (discord: Deedee) 02/14/2022 16:53

so it's specifically the first frame that causes the crash?

=== @ HeroOfFireZC 02/14/2022 16:55

It seems to be. I don't hear the stepping SFX or see LInk drawn below the combo, but the crash happened when really close to a cave, most likely when touching it that the next frame would have me performing the cave entering state.

=== @arceusplayer11 (discord: Deedee) 02/16/2022 04:00

@ HeroOfFireZC new alpha is out; please let me know if you run into the crash again in the alpha
## QR Shield BlocksReflects During Player Invincibility Frames (#1158)
@ P-Tux7 opened this issue on 01/13/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/931032697915179008



=== @ P-Tux7 01/13/2022 03:51

This would make Mirror Wizzrobes SO MUCH BETTER
Nothing worse than getting hit, and then you run out of invincibility time while their magic is INSIDE OF YOU
the same applies to a lesser degree to other projectile enemies, obviously

=== @ Tsunami Tommy Reload the Shotty 01/13/2022 10:59

This would be amazing, actually.
## Always Facing Up On Combo (#1159)
@ Jared opened this issue on 01/14/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/931393913565114388



=== @ Jared 01/14/2022 03:46

I'm not sure if this was implemented, as I did ask about it before but lost track of it. Is it possible to add a flag that always makes you face a certain way when on a combo? This would make it so climbing ladders on mountains (etc) would look more accurate.

=== @EmilyV99 (discord: Emily) 01/14/2022 03:51

this'd need to be a new combo type

=== @ Jared 01/14/2022 04:14

Oh okay

=== @ vlamart 01/14/2022 05:32

Idea: combine this with slow walk and use attributes for step speed, direction (0 or something for being not a fixed direction), and LTM (for climbing animation should quest maker choose)

=== @ P-Tux7 01/14/2022 14:09

you mean non sideview right?
there's a QR to make you always face up on sideview ladders
oh yeah both slow walk and sideview ladders would benefit from settable speed
multiplicative of hero step
for all his assholery james24 had a good idea combining floors that made you move fast with just as fast enemies

=== @ vlamart 01/14/2022 14:12

That sounds terrifyingly fun
## InputAxisRight always returns true (#1160)
@ Orithan opened this issue on 01/15/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/931771319291355146



=== @ Orithan 01/15/2022 04:46

``Player/Hero/Link->InputAxisRight`` and ``Input->Button[CB_AXIS_RIGHT]`` always return true even if no directional inputs are made.
This is not an issue with their ``Press`` variants
Version: Alpha 100, Build 61

=== @arceusplayer11 (discord: Deedee) 02/14/2022 18:22

Despite using a controller, the opposite seems true: it's always false for me it seems
all of them are always false
@EmilyV99 (discord: EmilyV) I'm unsure if this even works at all
## ‚úÖüîíEnlarged Enemies drop item at lowest right tile, not Hitbox Offset (#1161)
@ Zaidyer opened this issue on 01/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/932282436858024007



=== @ Zaidyer 01/16/2022 14:37

When an enemy is set to use TileWidth and TileHeight greater than 1, the drop location will always be based on the lowest rightmost tile, not the enemy's actual HitX/HitY location.

=== @ Zaidyer 01/16/2022 16:08

However: "Enemy Carries Item" *does* respect the enemy's actual hitbox and will follow the enemy and drop as expected.
It seems only the spawned-in item drops are affected by this bug.

=== @arceusplayer11 (discord: Deedee) 02/07/2022 00:45

weird...

=== @arceusplayer11 (discord: Deedee) 02/07/2022 00:48

Okay, that's actually really weird
cause for me, the carried item is held at the topleft position
but the spawned item drop is at the center, where it's supposed to be
could you upload a test quest?
(meta) thread name was changed: üîìEnlarged Enemies drop item at lowest right tile, not Hitbox Offset

=== @ Zaidyer 02/07/2022 17:21

(replying to @arceusplayer11 (discord: Deedee) "cause for me, the carried ite‚Ä¶"): Top left of the ‚Äútile‚Äù bounding box. It should be based on the enemy‚Äôs actual hitbox offsets, not its tiles. I have my enemy‚Äôs hitbox unchanged, meaning it‚Äôs in the top left of its tile box. But I adjusted its graphical offsets to center the visible sprite on the hitbox.
Ergo, carried items look correct because the hitbox and topleft of the tilebox agree, but dropped items try to center themselves based on the tile box, which is way past where I have the hitbox.

=== @arceusplayer11 (discord: Deedee) 02/07/2022 21:24

@ Zaidyer okay, to clarify: you want dropped items to be in the center of their hitwidth and hitheight based off hitoffsets?

=== @arceusplayer11 (discord: Deedee) 02/07/2022 21:26

I can make a Quest Rule for this behavior; I don't want to break older quests that might try and move the drops manually

=== @ Zaidyer 02/07/2022 21:53

(replying to @arceusplayer11 (discord: Deedee) "@ Zaidyer okay,‚Ä¶"): yes

=== @arceusplayer11 (discord: Deedee) 02/08/2022 08:55

Okay, added two QR's, one in compat rules for fixing enemies carrying items, and one in enemy rules for making it so dropped items (and carried items if the former is checked) use the hitbox instead of the tile

=== @arceusplayer11 (discord: Deedee) 02/08/2022 08:58

I did some basic testing of them and didn't immediately notice an issue; they should be in the next build/nightly I post. I'll need you to point out if anything's weird.

=== @EmilyV99 (discord: Emily) 02/09/2022 15:17

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Zaidyer 02/09/2022 21:33

The new rules appear to work as intended
üëç

=== @arceusplayer11 (discord: Deedee) 02/09/2022 23:41

(meta) thread name was changed: ‚úÖüîíEnlarged Enemies drop item at lowest right tile, not Hitbox Offset
## ‚úÖüîíWhistle Recorder Tornado Sound Bug Again (#1162)
@ SkyLizardGirl opened this issue on 01/17/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/932475475304005662



=== @ SkyLizardGirl 01/17/2022 03:24

The Whistle Recorder Ocarina Whirlwind tornado sound effect keeps repeating again, just like it used to do last time after link has been transferred to a location, it it does not turn off unless you leave a screen.
It's supposed to play Whirl wind sound effect after you blow whistle and then after you are warped, it is supposed to turn off after link is transfered.
I am using latest alpha release you just released.

=== @ SkyLizardGirl 01/17/2022 03:27

101

=== @ SkyLizardGirl 01/17/2022 03:31

(meta) thread name was changed: Whistle Recorder Tornado Sound Bug Again

=== @arceusplayer11 (discord: Deedee) 02/07/2022 01:55

Fixed again
(meta) thread name was changed: ‚úÖüîíWhistle Recorder Tornado Sound Bug Again
## ‚úÖüîíString bug in 754 & 752 of stings (#1163)
@ SkyLizardGirl opened this issue on 01/17/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/932476968631418940



=== @ SkyLizardGirl 01/17/2022 03:30

There is a string bug in string 754 and also 752 when i pick up random items in my game, it keeps triggering these message strings to show up.

=== @ SkyLizardGirl 01/17/2022 03:57

(meta) thread name was changed: There is a String bug in 754 and 752 of stings
(meta) thread name was changed: String bug in 754 & 752 of stings

=== @EmilyV99 (discord: Emily) 01/18/2022 20:33

is it actually random items, or is it specific items?
Is it the same item, is it items specifically from shops?

=== @ SkyLizardGirl 01/19/2022 11:45

Random items

=== @ SkyLizardGirl 01/19/2022 11:47

All items i am picking up are constantly doing this,  but it's a string thing, i have been having this problem for quite a while now.
There are some other message strings that are showing, i gotta find them and then i will write them here soon.
is my bed time now.

=== @EmilyV99 (discord: Emily) 01/19/2022 15:28

also, what alpha are you using?

=== @ SkyLizardGirl 01/19/2022 22:52

Latest one

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:54

Actually, just to clarify
Do these strings only play on screens that have a "shop cave"?
and if so, what do the items in the shop cost? (specifically the last one)
Do they cost 754 or 752 rupees?

=== @arceusplayer11 (discord: Deedee) 02/01/2022 20:57

@ SkyLizardGirl

=== @ SkyLizardGirl 02/01/2022 21:18

Oh?
Does that affect something?

=== @arceusplayer11 (discord: Deedee) 02/01/2022 22:29

Yeah, it causes a bug similar to what you're describing

=== @ SkyLizardGirl 02/02/2022 06:28

Oh ok
Yeah its those strings so far.
If i find more strings later on i will report them.
But so far it's just those two strings.
i think is what you described also yes.*

=== @EmilyV99 (discord: Emily) 02/02/2022 06:34

no, don't report more
it'll be whatever the rupee count is
every time
it'll be fixed in next build

=== @ SkyLizardGirl 02/02/2022 06:36

Ok
ty.*
i havent really reported anything more than that. \0~0

=== @EmilyV99 (discord: Emily) 02/03/2022 02:48

(meta) thread name was changed: ‚úÖüîíString bug in 754 & 752 of stings

=== @arceusplayer11 (discord: Deedee) 03/02/2022 00:53

@arceusplayer11 (discord: Deedee)
## Flipper Expansion (#1164)
@ P-Tux7 opened this issue on 01/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/932798533155815526



=== @ P-Tux7 01/18/2022 00:48

```Flipper Dive Length of 0 = Infinite or Infinite Diving Flag```
Now that manual dive cancelling is a thing for flippers, this would be a handy upgrade to have. Probably needs to remind you to enable that flag in the tooltip...

=== @ P-Tux7 01/19/2022 08:43

(meta) thread name was changed: Flipper Expansion
Also, itemdata sounds for moving in water and diving
I can't remember if any official Zelda had a diving sound but it seems logical to make a sound, doesn't it?
## Layer Options (#1165)
@ bigjoe opened this issue on 01/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933035377969729638



=== @ bigjoe 01/18/2022 16:29

There should be a list of numbers denoting what layer different objects appear on, including their default. The reason being is that I am faced with the troublesome task of putting "held items" on the highest visible layer available. If there were a list of layers things will generally appear on(in different states, if necessary) I wont have to write such garbagey and hard to maintain scripts. Thank you.

=== @EmilyV99 (discord: Emily) 01/18/2022 16:35


![image](https://cdn.discordapp.com/attachments/933035377969729638/933036851042848829/unknown.png)
Most sprite objects appear between 2 and 3, and most 'overhead' objects appear between 4 and 5, where those categories are split

=== @ bigjoe 01/18/2022 16:40

I have been requested to write a script that moves both the held item and Link to the top layer during his item collection animation. How does one even access the held item information anyway

=== @ bigjoe 01/18/2022 16:43

ill try helditem again

=== @EmilyV99 (discord: Emily) 01/18/2022 16:44

`Hero->HeldItem`
## ‚úÖüîíLens reveals hides layer not working (#1166)
@arceusplayer11 (discord: Deedee) opened this issue on 01/19/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/933160132823646239



=== @arceusplayer11 (discord: Deedee) 01/19/2022 00:45

In Screen flags 1, you can have an option to have the lens either reveal or hide a layer. If set to "reveal" a layer, the layer will be hidden by default and will only be revealed by using the lens. If set to "hide" a layer, the layer will draw *unless* you use the lens, in which case it won't.
For some reason this feature completely broke in 2.55
@EmilyV99 (discord: EmilyV)

=== @arceusplayer11 (discord: Deedee) 01/19/2022 00:51

```if((!type && layer==(int32_t)(basescr->lens_layer&7)) && ((basescr->lens_layer&llLENSSHOWS && !lensclk) || (basescr->lens_layer&llLENSHIDES && lensclk)))``` this line is the culprit; changing ``!type && layer==`` to just ``type==`` fixes it
You're the one who made this change though and I'm not sure what you were trying to do with it

=== @arceusplayer11 (discord: Deedee) 01/19/2022 01:02

...``(basescr->lens_layer&7)`` is equal to 0
so it'd run if type is equal to 0... was this bugged the whole time?

=== @arceusplayer11 (discord: Deedee) 01/19/2022 01:10

oh, no, the old code used type as a layer but with a -1 offset
okay, fixed it

=== @arceusplayer11 (discord: Deedee) 01/19/2022 01:13

(meta) thread name was changed: ‚úÖüîíLens reveals hides layer not working
## QR or Item Flag - Raft Sound Ignores Room Screen Secret Sound (#1167)
@ P-Tux7 opened this issue on 01/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933274900192440350



=== @ P-Tux7 01/19/2022 08:21

Quirkily, if you set the room secret sound to something, the Raft uses it. Needs to be a QR or compat thing because older quests used this on purpose. But it IS admittedly weird to not be able to have burning a tree and rafting on the same screen work right.
## Spin Tile Rise Sound (npcdata) (#1168)
@ P-Tux7 opened this issue on 01/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933279733859360808



=== @ P-Tux7 01/19/2022 08:40

Like LTTP. Already requested the one for the boulder in its own thread as well.
## Room Type - Toll Booth (#1169)
@ P-Tux7 opened this issue on 01/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933283016166477835



=== @ P-Tux7 01/19/2022 08:53

Like Leave Life Or Money except it's centered and it's just money. For when you're feeling vindictive but not possibly-lose-out-on-100%-completion vindictive
(meta) thread name was changed: Room Type - Toll Booth

=== @ Tsunami Tommy Reload the Shotty 01/19/2022 10:33

A good idea, though we at least have a work-around with lockblocks now, coupled with reset room combos.  Lockblocks can accept rupees now, thank goodness.
## Game Over Song selection (#1170)
@ P-Tux7 opened this issue on 01/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933285071027335201



=== @ P-Tux7 01/19/2022 09:01

In Options because it requires a different dialog from SFX. And as music I feel it doesn't really fit in the Misc. SFX dialog even if it could
## Button Uses Item Class Rules (Game Data) (#1171)
@ P-Tux7 opened this issue on 01/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933286514782265424



=== @ P-Tux7 01/19/2022 09:07

Rules for A, B, L, R, EX1-4 to be dedicated to using the highest item of an itemclass, if you own it. The itemclass for each button is set in Game Data
-Z1/Z3 swords
-Jump Button (Roc's Feather) for sideview quests
-Z3 Bracelet, Z3 Pegasus Boots, Run Button, and other scripted items
...this is probably gonna suck but I see people asking for a jump button script all the time.

=== @ P-Tux7 01/19/2022 09:09

So I at least have a better motive for requesting it than some of my silly "why not" ideas
## ‚úÖüîíBox Keeps Popping Up (#1172)
@ SkyLizardGirl opened this issue on 01/19/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/933495454417694840



=== @ SkyLizardGirl 01/19/2022 22:57

Box Keeps popping up, even while i am using latest version for my quest and even saving it in the newest version, this box still keeps popping up, even when i try to play the quest.

![image](https://cdn.discordapp.com/attachments/933495454417694840/933495470033076265/unknown.png)

=== @arceusplayer11 (discord: Deedee) 01/19/2022 22:58

yep, posting a New Nightly that will hopefully fix this

=== @EmilyV99 (discord: Emily) 02/01/2022 20:49

(meta) thread name was changed: ‚úÖüîíBox Keeps Popping Up

=== @ HeroOfFireZC 02/18/2022 17:20

This seems to be happening in the Feb 17th nightly build. In fact, it appears when loading 1st.qst.
![image](https://cdn.discordapp.com/attachments/933495454417694840/944282126042407002/unknown.png)
Notice how it refers to 2.53 legacy release (the prior box was from a quest I last saved in 2.52)
![image](https://cdn.discordapp.com/attachments/933495454417694840/944282319068479539/unknown.png)

=== @ HeroOfFireZC 02/18/2022 17:22

In any case, these boxes should not be true, as my quest file was directly copied from my 2.52 folder, and thus never even opened in a recent zQuest version.

=== @arceusplayer11 (discord: Deedee) 02/18/2022 18:10

@EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 02/18/2022 19:39

For fucks sake
Firstly, the version info being wrong is zoria's doing
(it would have been printing that wrong version info to allegro.log every time you loaded the quest prior...)
but why the FUCK is that box still popping up???

=== @EmilyV99 (discord: Emily) 02/18/2022 19:44

....
are you sure that's last saved in 2.50.2?

![image](https://cdn.discordapp.com/attachments/933495454417694840/944318563869687828/unknown.png)
2.50.2 is `Build 29`
for that to show `2.53.0 Release ??`, it was last saved in `Build 32`
(Keep in mind that 2.50.2 can open/play 2.53 quests just fine)
(replying to @ HeroOfFireZC "This seems to be happening in‚Ä¶"): also, why the fuck is that off-center?

=== @EmilyV99 (discord: Emily) 02/18/2022 19:49

...OH I'm a dumbass
(not the off-center, the still popping up)

=== @ HeroOfFireZC 02/18/2022 19:53

The 2.53.0 release message box shows up once I input a new file name, it appears to be showing up cause it views the default *1st.qst* as saved in a newer build.

=== @EmilyV99 (discord: Emily) 02/18/2022 19:53

aye, yeah
so uhh
It first compares the major version
then the alpha state
then the alpha version

=== @ HeroOfFireZC 02/18/2022 19:54

But yeah, the 2.52 build is indeed 29.

=== @EmilyV99 (discord: Emily) 02/18/2022 19:54

but, you see
the stupid that I did
It was going `oh, 2.53 < 2.55`
but then it was going `Release > Alpha, show warning`
instead of stopping at `2.53 < 2.55`
it should only keep going if the first check gives `==`

=== @EmilyV99 (discord: Emily) 02/18/2022 20:02


https://cdn.discordapp.com/attachments/933495454417694840/944322905456652369/zelda.exe
https://cdn.discordapp.com/attachments/933495454417694840/944322905947394139/zquest.exe
@ HeroOfFireZC

=== @ HeroOfFireZC 02/18/2022 20:08

That seems to have fixed it.

=== @EmilyV99 (discord: Emily) 02/18/2022 20:11

perfect
## ‚úÖüîíSTD Compile Error, latest nightly (#1173)
@ bigjoe opened this issue on 01/20/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/933838352678027305



=== @ bigjoe 01/20/2022 21:40

STD has a warp related compile error, latest nightly, tested on both mine and SLG's computer.

![image](https://cdn.discordapp.com/attachments/933838352678027305/933838401877180576/unknown.png)

=== @EmilyV99 (discord: Emily) 01/20/2022 21:45


https://cdn.discordapp.com/attachments/933838352678027305/933839706976825404/std_constants.zh
whoopsie

=== @arceusplayer11 (discord: Deedee) 02/08/2022 08:59

Guessing this is fixed?

=== @EmilyV99 (discord: Emily) 02/08/2022 08:59

yeah

=== @arceusplayer11 (discord: Deedee) 02/08/2022 08:59

(meta) thread name was changed: ‚úÖüîíSTD Compile Error, latest nightly
## QR - Walking Enemies Halt Before Shooting Boomerangs (#1174)
@ P-Tux7 opened this issue on 01/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/933910802036060190



=== @ P-Tux7 01/21/2022 02:28

Yes, I'm talking about Goriyas. Probably shouldn't apply to the Goriya 3/Rapid-Fire shooting style because it IS rapid-fire and other enemies that use it, such as Death Knights, don't halt
(If added, a row of tiles for halting should be added to both the Goriya 1 and 2 New Enemy Tiles where there was previously a blank row)

=== @ 4matsy 01/21/2022 03:57

The reason the row was removed in the first place is because they don't wait for a short bit after halting before firing in the NES game.
(They don't wait to finish moving onto the next tile like they do in ZC, either - they can fire whenever they feel like it, and even turn in whatever directions they're able to. Normally this just means backwards, but this can include to the sides if they happen to be on a 16x16 grid intersection.)

=== @ P-Tux7 01/21/2022 11:20

That is exactly the opposite of what I want and the reason I'm asking for this
Vile creatures

=== @ 4matsy 01/21/2022 14:07

Yeah, their unpredictability is what makes them the hardest enemy in their dungeon enemy group. üòõ

=== @ P-Tux7 01/21/2022 18:18

Unless you consider Dodongos an enemy due to them respawning, and put 8 of them in a room like Outlands did...

=== @ 4matsy 01/21/2022 20:39

:p

=== @ 4matsy 01/21/2022 20:41

LAAAAAAAAAAAAAAAAAGGGGG
At least ZC doesn't have to deal with the insane slowdown. ^_^

=== @ P-Tux7 01/22/2022 05:17

...oh yeah, I need to test the Dodongo smoke range in Z1 again. It doesn't seem very accurate.
## Writing into Enemy-Original Tile is broken in 2.55 (#1175)
@ Alucard648 opened this issue on 01/21/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/934067094461489202



=== @ Alucard648 01/21/2022 12:49

Some scripts that in 2.53 worked fine, have outright stopped working. I mean ghosted enemy scripts that use writing into NPC->OriginalTile for processing animation. Here are some scripts and the quest for reproducing.

https://cdn.discordapp.com/attachments/934067094461489202/934067154624593930/enemybug.zip

=== @EmilyV99 (discord: Emily) 01/21/2022 20:24


![image](https://cdn.discordapp.com/attachments/934067094461489202/934181714547331112/unknown.png)
Have you tried that?
@ Alucard648

=== @ Alucard648 01/22/2022 00:57

This rule should also affect 2-frame, 3-frame and 4-frame animations.

=== @EmilyV99 (discord: Emily) 01/22/2022 01:34

...those shouldn't need a rule
@arceusplayer11 (discord: Deedee) adding you to this

=== @ Alucard648 01/22/2022 02:05

Thanks. Tested. Works like magic.

=== @arceusplayer11 (discord: Deedee) 01/22/2022 02:58

I just fixed an issue like this like 3 days ago I think
## Combo Data - Cycle Upon Screen Init (#1176)
@ P-Tux7 opened this issue on 01/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/934174251693539428



=== @ P-Tux7 01/21/2022 19:54

Like the screen flag, but for a combo itself. Saves the end user work when using tilesets that have these combos set up properly. I intend to use it in the LTTP tileset for one-time-only animations (opening Misery Mire's main entrance, Skull Woods' final entrance, Ganon's Tower stairs lowering, the lightning bat blocking Hyrule Tower's steeple...) and REDUX tileset will probably appreciate it too for using those same LTTP tiles.

=== @ vlamart 01/21/2022 20:39

#1141
## [ZQ Player] Frame Rest Suggest Dropdown Option (#1177)
@ P-Tux7 opened this issue on 01/22/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/934348759058489395



=== @ P-Tux7 01/22/2022 07:28

This is an obscure way of attempting to fix FPS drops in ZC that is only available by editing the .cfg file or using hotkeys. Having a visual option to point to would help people find it better.

=== @EmilyV99 (discord: Emily) 01/22/2022 07:31

I'll certainly add it to ZCL
## Upgrade Fairy Fountain (#1178)
@ SkyLizardGirl opened this issue on 01/22/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/934581605840859187



=== @ SkyLizardGirl 01/22/2022 22:53

The idea is to have a new fountain function that you can toss item/weapons into a pond and it upgrades them using a fairy in a wiseman room. You have a Text choice selection option, and everything seen in this video, is exactly how it would work but done in Zelda Classic.  It would be a mock-up of this system into ZC engine, but simpler. You have a Upgrade List in - Misc Data>  Weapon Upgrades, where you can set up 'what item' upgrades into what other item manually in the editor.   Video Example is below:  Basically you can make it update up to 9 times at least of an item each. Lastly the Fairy over the fountain does not have to be a giant fairy, just a single tile size NES Fairy.

=== @ SkyLizardGirl 01/22/2022 22:55

https://www.youtube.com/watch?v=_EvcfeFdH9E

=== @ SkyLizardGirl 01/22/2022 22:56

(meta) thread name was changed: Upgrade Fountain Fairy
(meta) thread name was changed: Upgrade Fairy Fountain

=== @ 4matsy 01/22/2022 23:20

Oh right, this is what that unused "Item Pond" room type was originally going to be, if I remember right. üôÇ

=== @ SkyLizardGirl 01/22/2022 23:53

Unused item pond?

=== @ P-Tux7 01/22/2022 23:58

Emily and Deedee have discussed it before

=== @ SkyLizardGirl 01/23/2022 00:24

Oh
i see.*
Part of it would be a wise guy room mechanic.
## 1.90 - Tribbles Should Tribble Into Normal Enemies (#1179)
@ P-Tux7 opened this issue on 01/23/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/934600282640359424



=== @ P-Tux7 01/23/2022 00:07

Okay so you know how nowadays Keese Tribbles tribble into Vire Tribbles and Gel Tribbles tribble into Zol Tribbles. That should not happen in 1.90.
In 1.90, keese tribbles should tribble into regular (blue) vires and gel tribbles should tribble into regular zols. use this quest
https://cdn.discordapp.com/attachments/934600282640359424/934600420649762836/TRIBBLES.QST
if the keese tribble turns into a blue vire, that's good
as for the gel/zol tribbles, since they look identical to normal ones in 1.90 quests, we'll have to do a little detective work
type "zelda" and give yourself the white sword. if the zol that the gel tribble turns into is killable with the white sword, that's good because it is a regular zol as it should be. if it splits again, it's bad because it is a zol tribble as it should not be in 1.90
(this quest was saved in 1.90. use it as a reference for how 1.90 tribbles act when running 1.90 quests in modern zc)
## Start-2.10 - Stunned Dodongos Should Be Killable With Sword Beam (#1180)
@ P-Tux7 opened this issue on 01/23/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/934601591477137469



=== @ P-Tux7 01/23/2022 00:13

Not a big deal, but it was quite possible in all versions of ZC prior to 2.50. I'm not sure which 2.50 beta changed this, sorry, but I can confirm it happens in 2.10.

=== @ NightmareJames 02/07/2022 17:30

Can you make a video showing this?  According to LoZ canon, this should not be possible.

=== @ Saffith 03/07/2022 04:42

I can verify: ```
    case wSword:
    case wBeam:
      if(stunclk)
      {
        sfx(WAV_EHIT,pan(int(x)));
        hp=0;
        item_set = (misc==wSBomb) ? isSBOMB100 : isBOMB100;
        fading=0;                                           // don't flash
        return 1;
      }
```
The first public build in which it was fixed was 1425 (just after 2.50 RC2).

=== @ NightmareJames 03/08/2022 15:00

Thank you @ Saffith
## 2.10 - Standalone Digdogger Kids and Gohma 3 and 4s Should Respawn (#1181)
@ P-Tux7 opened this issue on 01/23/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/934605649562710056



=== @ P-Tux7 01/23/2022 00:29

By standalone I mean Digdogger Kids 1-4 that you place in the room. And Gohmas 3 and 4 only, not Red and Blue. This is also in reference to the normal enemy respawn system - they will not respawn if they are in a boss room, of course. But if you place them outside of one, they will respawn.

https://cdn.discordapp.com/attachments/934605649562710056/934605675265417266/enemyrespawn.qst
(Ignore the Patras - they should not respawn in either version, I was just checking them)
I know this behaviour dates back to 1.92 as well, but I wonder if more enemies respawn in that version so I will have to check. I recall that Patra 3s were not on the Do Not Respawn list in the B114 source code.
## ‚úÖüîíTest Play Mode (#1182)
@ Moosh opened this issue on 01/24/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/935279555994869832



=== @ Moosh 01/24/2022 21:07

I've got no idea how remotely feasible this is, but I had a dream it got added in a new build and it was really cool. The idea would be an option in ZQuest that launches ZC in a special test play mode where:
-The title screen and file select are skipped
-All forms of saving do nothing and retry closes the program. Nothing writes to zc.sav
-Level 4 cheat is on by default
-Link spawns on the current screen viewed in ZQuest, either using a Test Play DMap specified in init data or the first valid DMap using the current map and palette
This would be invaluable for both testing individual screen setups in dungeons and making small script test quests that don't need long term saves

=== @EmilyV99 (discord: Emily) 01/24/2022 21:08

This.... sounds fancy as shit
There are other fancy things higher than this on the list, though
....perhaps when I have time to look into it....

=== @ Moosh 01/24/2022 21:08

Fair enough. I think the new launcher followed me into my dreams xD

=== @EmilyV99 (discord: Emily) 01/24/2022 21:09

One of the big things is, anything to do with how the new launcher creates processes, won't work at all on linux, I'm pretty sure
. . . actually looking at getting a linux VM set up now....

=== @ cbailey78 01/25/2022 02:19

I remember way back in 2003 or 2004 that it had a "Test" in the file menu at one time but crashed the program and didn't work, so it got taken out.

=== @ mitchfork 01/25/2022 03:20

yeah this would be excellent
even if it didn't start you on the current screen and just quick launched the quest w/ no save file that would be huge for script testing

=== @ cbailey78 01/25/2022 04:58

I would recommend it to start you on the screen zquest is on or give you an option to start at the Dmap continue point.

=== @ bigjoe 01/26/2022 10:55

this was actually a feature that Dark Nation(third ZC Dev)  wanted to add at some point, but never got around to.

=== @ bigjoe 01/26/2022 11:27

either way, this idea reeks of perfection. please consider. Constantly opening ZC and skipping the title is getting old

=== @ cbailey78 01/26/2022 17:56

(replying to @ bigjoe "either way, this idea reeks o‚Ä¶"): Ditto!  Especially making large quests involving scripting debugging if an issue arises causing you to go back and forth testing.

=== @EmilyV99 (discord: Emily) 02/09/2022 11:07


![image](https://cdn.discordapp.com/attachments/935279555994869832/940926953848987689/unknown.png)
Appear to have this much working
So, command-line setup for `-test "quest_file" start_dmap start_screen`

=== @EmilyV99 (discord: Emily) 02/09/2022 11:10

if you ever try to exit to the title screen, it just reloads the quest
if you save, it *does* save, but not to any file
after saving, any 'reload' of the quest will load that save, until you exit the program, at which point the save data is discarded
cheat level 4 is automatically enabled
@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/09/2022 11:11

ooooh

=== @EmilyV99 (discord: Emily) 02/09/2022 11:12

Now I need to hook this to a process call in ZQ
and all of this gets added to the pile of *eventually need to rewrite all of it for linux*
...well, any of the process-management stuff, specifically
I can add more parameters easily, if needed for anything

=== @EmilyV99 (discord: Emily) 02/09/2022 12:11


![image](https://cdn.discordapp.com/attachments/935279555994869832/940942904300539935/unknown.png)

![image](https://cdn.discordapp.com/attachments/935279555994869832/940942939511726140/unknown.png)
It pre-fills `Start Screen` with the current screen, and `Start DMap` with the first dmap that matches the current map (going to make it tiebreak with palette next)

=== @EmilyV99 (discord: Emily) 02/09/2022 12:16

k, now it should prioritize a dmap that has the correct palette and map over just the first to match the map
but of course you can override it to whatever dmap you want in the dialog

=== @EmilyV99 (discord: Emily) 02/09/2022 12:19

also adding favorite command `Test Quest`
also, if you try to test when you have unsaved changes....
![image](https://cdn.discordapp.com/attachments/935279555994869832/940944977482108948/unknown.png)
And if you try to test on a quest that has *never* been saved, it does yet another different thing; in that case, it just opens the `Save As` dialog. If you don't save, it won't let you test, as there's no quest file *to* open.

=== @arceusplayer11 (discord: Deedee) 02/09/2022 12:23

fancy!

=== @EmilyV99 (discord: Emily) 02/09/2022 12:25

For the record, basically what it does
is the same as when you make a new save file for the quest
except, it overrides the zinit continue dmap / screen

=== @EmilyV99 (discord: Emily) 02/09/2022 12:33

Also, if you try to run a test while a previous test is open, it will kill the old test process (though it won't kill any console attached to the test process, and not much I can do about that)

=== @EmilyV99 (discord: Emily) 02/09/2022 12:41

@arceusplayer11 (discord: Deedee) pushed
(meta) thread name was changed: ‚úÖüîíTest Play Mode

=== @EmilyV99 (discord: Emily) 02/09/2022 12:47

@ Moosh
https://cdn.discordapp.com/attachments/935279555994869832/940951959127605248/buildpack.zip

=== @ Moosh 02/09/2022 12:51

Already? Goddamn
I'm hyped to check this out

=== @ Moosh 02/09/2022 12:53

Does it have a boolean for reading if it's in test play mode in ZScript? Forget if I mentioned that idea but sounds like it'd be simple. And remove the need for `const bool DEBUG` üòÑ

=== @EmilyV99 (discord: Emily) 02/09/2022 12:56

...that would be smart. Frankly adding a new bool to zscript is far more tedious than the work to get this working, lol XD

=== @ Moosh 02/09/2022 12:58

Okay, trying out the test play on my existing quest appears to have given the global script a stroke. It did a bunch of messed up stuff seemingly indicating a corrupted global array

=== @ Moosh 02/09/2022 12:59

running it by launching ZC the old way still works though, seemingly

=== @EmilyV99 (discord: Emily) 02/09/2022 13:00

Oh?
hmmm
guessing something's wrong with the `global script Init`

=== @ Moosh 02/09/2022 13:00

As does launching from the blank save slot that was apparently generated by the test play session (that one sounds like a bug)

=== @EmilyV99 (discord: Emily) 02/09/2022 13:01

Oh???? It modified the save file?
Uhhh
WTF

=== @ Moosh 02/09/2022 13:02

Created one to be precise. I ran it on a fresh install, gonna test if it can overwrite existing saves

=== @EmilyV99 (discord: Emily) 02/09/2022 13:02

It shouldn't create or write anything
it should never reach save writing code

=== @ Moosh 02/09/2022 13:03

Oh yup, it's just completely overwriting zc.sav
good thing I checked D:

=== @EmilyV99 (discord: Emily) 02/09/2022 13:04

....oh fek I'm a dumbass.

=== @EmilyV99 (discord: Emily) 02/09/2022 13:07


https://cdn.discordapp.com/attachments/935279555994869832/940957107660947486/zquest.exe
https://cdn.discordapp.com/attachments/935279555994869832/940957108185202698/zelda.exe
@ Moosh does this fix the save issues?

=== @EmilyV99 (discord: Emily) 02/09/2022 13:09

(replying to @ Moosh "Okay, trying out the test pla‚Ä¶"): gonna need more details on this, as the init script is most definitely running...

=== @ Moosh 02/09/2022 13:09

Seems to open zelda.exe then immediately close it

=== @EmilyV99 (discord: Emily) 02/09/2022 13:10

Anything in the zelda.exe log?

=== @ Moosh 02/09/2022 13:10

Until I opened it once normally and now it's working

=== @EmilyV99 (discord: Emily) 02/09/2022 13:10

(If it doesn't open one, you might need to open zc, and open the zscript debugger from the menu, so it opens on launch each time)
hmm?
odd

=== @ Moosh 02/09/2022 13:11

Guessing it needed some setting I had to run the program normally to set

=== @EmilyV99 (discord: Emily) 02/09/2022 13:12

it should be doing literally everything that it does normally
except checking for a save file
because it doesn't use one

=== @ Moosh 02/09/2022 13:13

No idea what that was then, but that part is working consistently now

=== @EmilyV99 (discord: Emily) 02/09/2022 13:13

Still having global script issues?

![image](https://cdn.discordapp.com/attachments/935279555994869832/940958671171629086/unknown.png)

=== @ Moosh 02/09/2022 13:13

Yeah, those are tricky given that it's not working at all

=== @EmilyV99 (discord: Emily) 02/09/2022 13:13

basic tests give me no issues whatsoever

=== @ Moosh 02/09/2022 13:14

`Invalid pointer (0) passed to array (don't change the values of your array pointers)`
Getting a lot of this

=== @EmilyV99 (discord: Emily) 02/09/2022 13:15

nothing should be different literally at all
so this is kinda baffling

=== @ Moosh 02/09/2022 13:15

Active effects going awry seem to be tied to detecting when the current screen changes

=== @EmilyV99 (discord: Emily) 02/09/2022 13:15

????

=== @ Moosh 02/09/2022 13:16

Which I guess if my global array is invalid would check out. It's doing this
`if(G[G_LASTSCREEN]!=Game->GetCurScreen()||G[G_LASTDMAP]!=Game->GetCurDMap()){`
So it thinks the screen is changing every frame presumably because G doesn't exist

=== @EmilyV99 (discord: Emily) 02/09/2022 13:17

gah
but why would your array be invalid?
the init script should be running fine

=== @ Moosh 02/09/2022 13:17

indeed

=== @EmilyV99 (discord: Emily) 02/09/2022 13:18

Can you get it to bug out with a simpler test?

=== @ Moosh 02/09/2022 13:19

trying that now
ah yes. trivially simple to trigger it would seem

=== @EmilyV99 (discord: Emily) 02/09/2022 13:20

Oh? What's the trigger?

=== @ Moosh 02/09/2022 13:20


https://cdn.discordapp.com/attachments/935279555994869832/940960263346225242/MissingArray.qst

![image](https://cdn.discordapp.com/attachments/935279555994869832/940960307306717214/unknown.png)
Whole lotta -1, whole lotta error

=== @EmilyV99 (discord: Emily) 02/09/2022 13:20


![image](https://cdn.discordapp.com/attachments/935279555994869832/940960472662941696/unknown.png)
Whole lotta not a single error

=== @ Moosh 02/09/2022 13:21

So it's working for you? Uhhhhhhhh

=== @EmilyV99 (discord: Emily) 02/09/2022 13:21

When you updated to the buildpack, did you update the whole thing, or only copy some files?
If so, which files?

=== @ Moosh 02/09/2022 13:21

Copied the whole zip

=== @EmilyV99 (discord: Emily) 02/09/2022 13:21

....hmmm
I figured you might have missed `zscript.exe`
but no, that would have given you far more errors

=== @ Moosh 02/09/2022 13:22

Can try doing it again

=== @EmilyV99 (discord: Emily) 02/09/2022 13:22

might as well
Also, for the record, `ClearTrace()` now clears the console as well

=== @ Moosh 02/09/2022 13:23

Oh! dope

=== @ Moosh 02/09/2022 13:25

Yeah same results :/

=== @EmilyV99 (discord: Emily) 02/09/2022 13:25

What the fuck?

=== @ Moosh 02/09/2022 13:29

Just to be sure we're talking the same thing, these traces you did were in test play mode on the quest file I sent?

=== @EmilyV99 (discord: Emily) 02/09/2022 13:29

yes

=== @ Moosh 02/09/2022 13:29

spooky
And it works as intended when running the file normally, same as my quest

=== @EmilyV99 (discord: Emily) 02/09/2022 13:30


![image](https://cdn.discordapp.com/attachments/935279555994869832/940962838996992041/2022-02-09_08-29-49.mp4)
let me rebuild from clean
also, new build will have `bool Debug->Testing;` available to zscript, read-only

=== @ Moosh 02/09/2022 13:31

alright. sorry for all the trouble. feels like I had to have done something wrong here :/
And excellent

=== @EmilyV99 (discord: Emily) 02/09/2022 13:35

@ Moosh

https://cdn.discordapp.com/attachments/935279555994869832/940964186832396348/buildpack.zip

=== @EmilyV99 (discord: Emily) 02/09/2022 13:36

Still no issues in your test
Adding `if(Debug->Testing) ClearTrace();` above the `while(true)` indeed clears the console on the global script starting, only if launched in testing mode

=== @ Moosh 02/09/2022 13:38

ffffuck, still broken on my end
gonna try one more thing

=== @EmilyV99 (discord: Emily) 02/09/2022 13:42

Odd question, but what is the full path of your ZC folder?

=== @ Moosh 02/09/2022 13:42

`C:\Users\64pok\Desktop\Zelda Classic Dev Env\_TESTS`
Tried making a fully new folder as well, clean install, recompile scripts, same as before
Might need some additional input on this one. It's seeming my computer may be haunted

=== @EmilyV99 (discord: Emily) 02/09/2022 13:44

51 character path
so nowhere near the 512 it would need to buffer overflow

=== @EmilyV99 (discord: Emily) 02/09/2022 13:45

oh
hmmmmmm
I'm very confused
because I just replicated it
and I'm not sure what is different

=== @ Moosh 02/09/2022 13:46

Well that's reassuringly worrying

=== @EmilyV99 (discord: Emily) 02/09/2022 13:49

. . . yeah, the init script is not running
what the fuck

=== @EmilyV99 (discord: Emily) 02/09/2022 13:51

....it's a config of some sort
what the FUCK
Now I have it where it isn't launching
like you did before

=== @EmilyV99 (discord: Emily) 02/09/2022 14:00

OK
So
The reason it was only broken in some cases was some sort of random memory
think it's fixed

https://cdn.discordapp.com/attachments/935279555994869832/940970734677786704/zelda.exe
@ Moosh hopefully?

=== @ Moosh 02/09/2022 14:03

It's working!

=== @EmilyV99 (discord: Emily) 02/09/2022 14:04

So, the global `Quit` value was fucked
and depending on config files (because random memory happened to overlap with something config related)
it had an error quitstate during init
thus, `run_script`?
```cpp
int32_t run_script(const byte type, const word script, const int32_t i)
{
    if(Quit==qRESET || Quit==qEXIT) // In case an earlier script hung
        return RUNSCRIPT_ERROR;```
well, that was instantly returning
because it happened to be one of those two values
so the init script never ran
but THEN `Quit` was cleared, and the rest of everything proceeded normally
just had to clear it a tad earlier

=== @ Moosh 02/09/2022 14:06

I see

=== @EmilyV99 (discord: Emily) 02/09/2022 14:06

oh
actually
it had to be `qRESET` specifically
it was probably `qEXIT` before, when it was opening and instantly exiting
because that would skip the main loop *entirely*
and when you launched it normally, it wrote something to a config file
which changed the random memory
thus changing the value to `qRESET`
which, now could launch, but still broke the init script
fucks sake memory issues are terrible

=== @ Moosh 02/09/2022 14:12

This is actual magic playing around with this thing. Just picking out random screens in the quest and going there instantly

=== @EmilyV99 (discord: Emily) 02/09/2022 14:12

also, the save now is named `Hero`
(it was blank before, as you noted when it was overwriting zc.sav)

=== @ Moosh 02/09/2022 14:13

For quests that access the filename for strings I assume. That's pretty smart

=== @EmilyV99 (discord: Emily) 02/09/2022 14:14

Scripts can overwrite it custom easily enough, too
```cpp
global script Init
{
    void run()
    {
        if(Debug->Testing) Game->SetName("FooBar");
    }
}```

=== @ Moosh 02/09/2022 14:16

I'm one of the few people who's done this I figure. For the Bananas name entry gag üòÑ

=== @EmilyV99 (discord: Emily) 02/09/2022 14:16

Yuurand uses it for automatic character selection
MM2D used it to enable debug mode
(Or rather, *disable* debug mode)
(any file named `Link` started with only the basic inventory, while any other file started with everything)

=== @ Moosh 02/09/2022 14:17

Nah, I mean _writing_ to the name. Plenty of quests read it

=== @EmilyV99 (discord: Emily) 02/09/2022 14:18

oh, duh
`THIEF`
most classic example

=== @ Moosh 02/09/2022 14:18

Tis where I got the idea
## Limited directional statue shooters. (#1183)
@ Tsunami Tommy Reload the Shotty opened this issue on 01/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/935843502477160468



=== @ Tsunami Tommy Reload the Shotty 01/26/2022 10:27

An ability to limit the direction that statue shooters of any sort can actually detect the player.  I.e.  if Right-facing statues have an invisible internal line passing through that statue dividing the screen up and down where it can only detect the player if it's to the right of that line. 

Perhaps the new green "Effect" clickable quadrant squares can determine where that is?  So a full green square will detect the player anywhere, but a green square with only its bottom half green will detect the player only anywhere below it?

=== @ P-Tux7 01/26/2022 14:08

I think this should be enemy settings and you can just define an enemy for the statue to spawn

=== @ Tsunami Tommy Reload the Shotty 01/26/2022 14:48

Even in a room where all ten enemy slots are occupied by other non-shooter enemies?
Where defeating the enemies could possibly turn off those statues via a flag of some sort?

=== @ P-Tux7 01/26/2022 23:05

(replying to @ Tsunami Tommy Reload the Shotty "Even in a room where all ten‚Ä¶"): Yeah, the *combo* would spawn the enemy as it does with normal shooting statues, it wouldn't be in an enemy slot
(replying to @ Tsunami Tommy Reload the Shotty "Where defeating the enemies c‚Ä¶"): And I have actually requested this too as a screen flag
## Secrets - Shutters Screen Flag (#1184)
@ P-Tux7 opened this issue on 01/28/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/936461431241597008



=== @ P-Tux7 01/28/2022 03:23

For NES dungeons. Someone I know is using a script for this but wonders why it isn't a screen flag.
Also I can't make an arrow in the name so
Triggering Secrets Opens Shutters
y'know?
## Shutter Combo (#1185)
@ vlamart opened this issue on 01/28/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/936464784897998899



=== @ vlamart 01/28/2022 03:36

A combo that starts walkable and pushes player off (speed fixed to walkspeed and dir in attributes), then takes A.Frame and pauses on the last frame and become fully solid. Reacts to either secrets or screen states (flagged, specified by attributes, marking neither flag makes it a permanent shutter), by reversing the animation and becoming walkable with no push. Additional flag for if the push closing and opening animation replays everytime you reenter or just once

=== @ vlamart 01/28/2022 03:42

Another flag for if screen freezes during opening/closing animations
## 1.92-2.10 Non-Flashing Rope 2s Should Be CSet 9 (#1186)
@ P-Tux7 opened this issue on 01/29/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/936821220387749918



=== @ P-Tux7 01/29/2022 03:13

In 1.92 and 2.10 quests that have the quest rule "Rope 2s Don't Flash" enabled, the Rope 2s should use CSet 9 instead of 8. A few graphical problems with them due to this in Dreams of Yesterday, and in The Islands of Zelda, it's impossible to tell them apart from Rope 1s due to this. I think To the Top has the same issue?
## ‚úÖüîíFile - Recent Quests menu (#1187)
@ Alucard648 opened this issue on 01/30/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/937377244224057414



=== @ Alucard648 01/30/2022 16:02

Good, if you are working on multple quests simultaneously.

=== @EmilyV99 (discord: Emily) 01/30/2022 19:08

That... makes a lot of sense, though probably not as simple as one might think.

=== @EmilyV99 (discord: Emily) 02/03/2022 02:38

@arceusplayer11 (discord: Deedee) adding you to this
just so you can see

![image](https://cdn.discordapp.com/attachments/937377244224057414/938624378055323678/unknown.png)
I AM A GODDESS

=== @EmilyV99 (discord: Emily) 02/03/2022 02:46

(meta) thread name was changed: ‚úÖüîíFile - Recent Quests menu
## Ability to preview NSF file tracks (#1188)
@ cbailey78 opened this issue on 01/31/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/937549631624216607



=== @ cbailey78 01/31/2022 03:27

I think it is essential when setting up Dmap music. Have the ability to preview track numbers, so quest makers will know what music it is in each track number and select the music they want in the Dmap

=== @EmilyV99 (discord: Emily) 01/31/2022 03:40

Pahahhahahaha
adding new things to music
that sounds absolutely horrifying
@arceusplayer11 (discord: Deedee) any chance this is easy? Or is it horrendously ungodly on the level of eldritch abominations?

=== @arceusplayer11 (discord: Deedee) 01/31/2022 09:39

I'm clueless when it comes to music
so... idk?
could be easy, could not be

=== @EmilyV99 (discord: Emily) 01/31/2022 13:40

You know far more about music than I do

=== @arceusplayer11 (discord: Deedee) 01/31/2022 13:51

I know very little lmao

=== @EmilyV99 (discord: Emily) 01/31/2022 13:51

Still far more than my none

=== @ cbailey78 01/31/2022 22:50

I'm saying, have a play/preview track button in the Dmap music tab.

=== @EmilyV99 (discord: Emily) 02/01/2022 05:07

anything touching music is horrendous

=== @arceusplayer11 (discord: Deedee) 02/01/2022 13:49

(replying to @ cbailey78 "I'm saying, have a play/previ‚Ä¶"): I don't think that'd be too hard...
@EmilyV99 (discord: EmilyV) we'd just be copying how ZC handles playing those tracks
## ‚ùåüîíIgnoring Custom Game Icons (#1189)
@ SkyLizardGirl opened this issue on 02/03/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/938665545312657448



=== @ SkyLizardGirl 02/03/2022 05:21

The latest Alpha 2.55 i just updated to 103 is now ignoring Custom Quest Save File Icons.

![image](https://cdn.discordapp.com/attachments/938665545312657448/938665563931160576/unknown.png)
The top is supposed to show My Mermaid sprite Icon instead.*

=== @ SkyLizardGirl 02/03/2022 05:35

Oh wait ..
It's only doing this if a file is created before ever updating to the next version 2.55 Alpha up

=== @ P-Tux7 02/03/2022 08:34

You have to make a new save file for the quest icons to change. They don't change even when you change them in the quest they are permanently loaded in ZC for that one save file. If you make a new save file and cheat to give yourself a ring and then save, that save file will show the updated icon because it was created after you changed it in the quest.

=== @ SkyLizardGirl 02/03/2022 22:10

Oh ok
ty

=== @arceusplayer11 (discord: Deedee) 02/07/2022 09:35

(meta) thread name was changed: ‚ùåüîíIgnoring Custom Game Icons
## ‚ùåüîíZCplayer Fullscreen glitch-out (#1190)
@ SkyLizardGirl opened this issue on 02/04/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/938988476257402941



=== @ SkyLizardGirl 02/04/2022 02:44

Something weird has been happening to the Zelda Classic game player. When i leave it open for a while and try to go back to it, it's displaying just like this.

![image](https://cdn.discordapp.com/attachments/938988476257402941/938988699880919060/unknown.png)

![image](https://cdn.discordapp.com/attachments/938988476257402941/938988840645955594/unknown.png)
Full screen acts bugged.
And it only stops doing this if i close the player and start it back up again.
.
But eventually does this again if i minimize it and do full screen again.

![image](https://cdn.discordapp.com/attachments/938988476257402941/938989307555885056/unknown.png)
Note:   is absolute Full screen mode by the way ^^

=== @EmilyV99 (discord: Emily) 02/13/2022 05:16

Rainbow death crash.
This has been a bug in ZC for literally *decades*, it's a video driver issue that we can't fix.
(meta) thread name was changed: ‚ùåüîíZCplayer Fullscreen glitch-out
## Z3 Animation Expansiom (#1191)
@ P-Tux7 opened this issue on 02/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/941227995845230624



=== @ P-Tux7 02/10/2022 07:04

placeholder to describe later basically but the additional animations from Z3 that make sense in ZC's context

-death faceplant
-hurt
-boomerang toss
-pound animation for wands and staves (neither of these had melee damage in Z3 if that simplifies things)

todo: port over frame data from bug thread and elaborate on/research relative positions of boomerang and death bonk, as well as spinning bug net frame data

=== @ P-Tux7 02/10/2022 07:06

these animations also make sense in a ZC context, but have their own cans of worms
-push: some things in LTTP don't show the push animation (so it's FAR more than just a combo type+solidity check and would likely need to be an all-combos flag a la hookability), and the pushing scripts that are on the database look silly while letting you move while pushing
-sword tap - same animation concept. you couldn't move while doing it in LTTP. though this may prove to be easier due to no combo fuckery involved

=== @ P-Tux7 02/10/2022 07:09

admittedly the sword tap is also a big priority (see: deafness improvements thread)
## Boomerang Class Expansion (#1192)
@ P-Tux7 opened this issue on 02/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/941374540544614450



=== @ P-Tux7 02/10/2022 16:46

Attribute: Step Speed

Flag: Re-Use Boomerang To Summon It Back (that is, if a boomerang exists on-screen, you have the boomerang currently on a button, and press that button, the boomerang currently on-screen will return back). Useful for if you miss your target with a Magic/Fire Boomerang, and can be used for trigger/crystal switch puzzles.

=== @ P-Tux7 02/10/2022 16:50

The fuck? I thought I sent a message. How do you create a thread without a message?
So anyways...

=== @ P-Tux7 02/10/2022 16:52

Attribute: Step Speed

Flag: Re-Use Boomerang To Recall It
(If you have the Boomerang currently equipped to a button, re-using the Boomerang will recall it as though it had hit something. Does nothing if Boomerang is already returning. Useful if you miss your target with the Magic/Fire Boomerangs, and also comes in handy for trigger/crystal switch puzzles.)
## ‚úÖüîíSyntax error causing the new parser to close unexpectedly (#1193)
@ Moosh opened this issue on 02/11/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/941660157186813952



=== @ Moosh 02/11/2022 11:41

Unsure if this is a crash or what, but I left an unfinished block of code lying around and it caused ZScript.exe to close without giving me an error. The offending line was
```(timer[0]%8<4)?66821:66822```
Just that. Any syntax error seems to do it though.

=== @ Moosh 02/11/2022 11:43

Okay, I can see red text for a fraction of a second before it closes. So it is at least reporting something. Just no way to read it

=== @ Moosh 02/11/2022 16:06

I'm also noticing these errors don't have line and column numbers any more. Even if I take a frame perfect screen grab before it closes, the error isn't all that helpful
![image](https://cdn.discordapp.com/attachments/941660157186813952/941726982704627723/unknown.png)

=== @ Moosh 02/11/2022 16:07

hell it doesn't even report which _file_ it's coming from
I could've typo'd anywhere in this project and if I don't remember every thing I changed since last compile, I'm shit outta luck

=== @EmilyV99 (discord: Emily) 02/12/2022 23:32

hmm
(For the record, nothing *should* have changed...)
(so, fun times!)

=== @EmilyV99 (discord: Emily) 02/12/2022 23:34

...Oh.
Fuck me, I'm a dumbass!
flex/bison shit is bleeehg

=== @EmilyV99 (discord: Emily) 02/13/2022 00:33

oookay

![image](https://cdn.discordapp.com/attachments/941660157186813952/942216930822086656/unknown.png)
Got things compiled, fixed the syntax error issue
but I had noticed that one of my example quests for a script didn't compile or give any errors
Fun times
I added a config (not in any gui, but in zquest.cfg) that allows you to force the console not to close
which is useful for debugging, here....

=== @EmilyV99 (discord: Emily) 02/13/2022 00:35

Ah, beautiful fix

![image](https://cdn.discordapp.com/attachments/941660157186813952/942217489381752892/unknown.png)
It was not printing errors for files not being found

=== @EmilyV99 (discord: Emily) 02/13/2022 00:52

So, this SHOULD all be fixed?

=== @EmilyV99 (discord: Emily) 02/13/2022 04:55

(meta) thread name was changed: ‚úÖüîíSyntax error causing the new parser to close unexpectedly
## ‚ùåCreate SpriteItemEnemy (#1194)
@ vlamart opened this issue on 02/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/941758959109423185



=== @ vlamart 02/11/2022 18:13

Right clicking on tile page, similar to Create Combos, but for Sprites, Items, or Enemies too

=== @EmilyV99 (discord: Emily) 02/13/2022 05:51

Uhhhh
Gonna go with a big fat nope on that one
that sounds absolutely horrific to attempt
Create Combos is painful enough
(meta) thread name was changed: ‚ùåCreate SpriteItemEnemy
## ‚úÖüîíSprite above Link with NPCs, chests etc (#1195)
@ Jared opened this issue on 02/12/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/941895976661184553



=== @ Jared 02/12/2022 03:18

Just thought I'd throw this here. Basically a sprite (maybe in misc) that would show above Link if he's in front of a chest, NPC, signpost etc.

=== @EmilyV99 (discord: Emily) 04/24/2022 22:54

#1351
(meta) thread name was changed: ‚úÖüîíSprite above Link with NPCs, chests etc
## Liftable Combos (#1196)
@ Jared opened this issue on 02/12/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/941896848078176277



=== @ Jared 02/12/2022 03:21

Not sure if this has been implemented yet, but I'd like to see a system for liftable pots, bushes, etc. Maybe it can work with different levels of bracelets too? Maybe the sprite setup could be in `Player`?

=== @EmilyV99 (discord: Emily) 02/12/2022 04:11

#deleted-channel
## ‚úÖüîíNew FFC Editor Script Arguments convert incorrectly (#1197)
@ Russ opened this issue on 02/13/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/942257589767520289



=== @ Russ 02/13/2022 03:15

Rather than try to explain this, let me just show it with screenshots

![image](https://cdn.discordapp.com/attachments/942257589767520289/942257630733279252/unknown.png)

![image](https://cdn.discordapp.com/attachments/942257589767520289/942257654607253544/unknown.png)

![image](https://cdn.discordapp.com/attachments/942257589767520289/942257678703554701/unknown.png)

![image](https://cdn.discordapp.com/attachments/942257589767520289/942257701839306772/unknown.png)

![image](https://cdn.discordapp.com/attachments/942257589767520289/942257729861455982/unknown.png)
Just pressing the button to tab through the different ways of displaying the number causes its value to change

=== @ Moosh 02/13/2022 03:26

we all float down here

=== @EmilyV99 (discord: Emily) 02/13/2022 03:27

hmm
that's quite odd
all of the values are correct
except for the final one which is obviously wrong
so it's converting back from LH to D that has a problem?

=== @EmilyV99 (discord: Emily) 02/13/2022 04:34

Pffft
the `zc_xtoi64` function, made to handle 64-bit hex numbers, had a couple extra parentheses, which made it read hex digits wrong. Fun.
(It uses 64-bit so it can tell if it's overflowed, and bound it back down)
It thought the `D` meant `9` instead of `14`

=== @EmilyV99 (discord: Emily) 02/13/2022 04:37

should be fixed
(meta) thread name was changed: ‚úÖüîíNew FFC Editor Script Arguments convert incorrectly
## ‚úÖüîíDisable 0-9 switching palettes (#1198)
@ Russ opened this issue on 02/13/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/942457446738325554



=== @ Russ 02/13/2022 16:29

Please. PLEASE. I'm begging you. These buttons are next to useless in sets with lots of palettes, and I just lost 15 minutes of work accidentally hitting 0, then slipping and clicking paste screen instead of paste palette to fix it. It's the single biggest time waster in the program. I'm begging you, please, add an option to disable these god forsaken buttons.

=== @EmilyV99 (discord: Emily) 02/13/2022 16:36

That is a BIG oof
should be dead-simple

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:39

@EmilyV99 (discord: EmilyV) how should I be adding options to the options enum?
Should I put new ones right before the last one, or can I stuff one in the middle?

=== @EmilyV99 (discord: Emily) 02/13/2022 16:39

shouldn't make any difference
but don't try touching this
considering I've just added it

=== @ Russ 02/13/2022 16:39

... that was fast

=== @EmilyV99 (discord: Emily) 02/13/2022 16:40

....only added the checkbox to zcl though, need to add it to the zq options menu
I mean
russ

=== @ Russ 02/13/2022 16:40

I guess I'm just used to the old way of doing things
Which is to say

=== @EmilyV99 (discord: Emily) 02/13/2022 16:40

it's literally `if(!DisableLPalShortcuts)`

=== @ Russ 02/13/2022 16:40

I've argued with Zoria about this like 3 separate times
And each time failed to convince him it would be worthwhile
Devs listening to the userbase is still a new and strange thing
:P

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:42

(replying to @EmilyV99 (discord: Emily) "but don't try touching this"): fuck off I wanted to do the cool thing üò≠

=== @EmilyV99 (discord: Emily) 02/13/2022 16:42

I already had pushed by the time you were asking questions
lol

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:43

(replying to @ Russ "And each time failed to convi‚Ä¶"): wow really? what a shock

=== @EmilyV99 (discord: Emily) 02/13/2022 16:44

(meta) thread name was changed: ‚úÖüîíDisable 0-9 switching palettes

=== @EmilyV99 (discord: Emily) 02/13/2022 16:48

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) @ Russ

=== @ Russ 02/13/2022 16:51

Okay so
It works great... except 0 still switches the palette
And 0 is the one I hit by far the most trying to reach for F11

=== @EmilyV99 (discord: Emily) 02/13/2022 16:51

oh fek

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:52

brb stealing emily's thunder

=== @ Russ 02/13/2022 16:52

lol

=== @EmilyV99 (discord: Emily) 02/13/2022 16:52

....I was about to say `thought I tested pretty thoroughly`
but it occurs to me
that if I'm on palette 0
I wouldn't notice the 0 key changing it
<:nkoFacepalm:697173951465521152>

=== @ Russ 02/13/2022 16:52

lol
I figured it was something like that

=== @arceusplayer11 (discord: Deedee) 02/13/2022 16:54

Fixed

=== @EmilyV99 (discord: Emily) 02/13/2022 16:54

now watch this fancy trick
the magical `nothing to see here`
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @ Russ 02/13/2022 16:57

Confirmed working now
Thanks
## üíäüîìQR - Manhandla Core Makes Block Sound Instead of Damage Sound (#1199)
@ P-Tux7 opened this issue on 02/14/2022

Status: needs-testing

Labels: ['feature', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/942895425831178261



=== @ P-Tux7 02/14/2022 21:29

What it says on the tin really. Similar to the Darknut "NES Fix", this is to stop the illusion that one is doing anything effective when hitting the core. Though as it is audio-only instead of visual as well, this is low-priority IMO.

=== @EmilyV99 (discord: Emily) 02/17/2022 16:17

@arceusplayer11 (discord: Deedee) didn't you do this?

=== @arceusplayer11 (discord: Deedee) 02/17/2022 16:23

Yeah, I did
Forgot that there was a thread made
(meta) thread name was changed: üíäüîìQR - Manhandla Core Makes Block Sound Instead of Damage Sound
@ P-Tux7 [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## ‚ùåüîíPossible Mouse Shortcuts (#1200)
@ SkyLizardGirl opened this issue on 02/15/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/943024571316047922



=== @ SkyLizardGirl 02/15/2022 06:02

I was thinking there needs to be Keyboard Key shortcuts for certain mouse features in 2.55 Alpha, such as -Select Combo needs a Letter Key shortcut, Scroll to combo, Edit Combo and Replace All need single Key Shortcuts.

![image](https://cdn.discordapp.com/attachments/943024571316047922/943024588890177536/unknown.png)
These choices appear when you Press the right mouse button.
It would make work faster if those commands had keys.
I do alot of Select Combo and Replace all - is why i am looking at this specifically when making ZC games.
it can be very tiring to the fingers is why.*

=== @EmilyV99 (discord: Emily) 02/15/2022 06:05

you can `Alt+Click` to select combo
`Alt+Shift+Click` to select cset

=== @ SkyLizardGirl 02/15/2022 06:05

What about replace All?

=== @EmilyV99 (discord: Emily) 02/15/2022 06:05

`Ctrl+Click` to floodfill
not quite replace all, but still useful
Replace all is only in the menu
`Shift+Click` places only cset, not combo

=== @ SkyLizardGirl 02/15/2022 06:06

Oh

=== @EmilyV99 (discord: Emily) 02/15/2022 06:06

`Ctrl+Shift+Click` then, floodfills only cset
but, there are a lot of things and only so many keys

=== @ SkyLizardGirl 02/15/2022 06:06

Ok

=== @EmilyV99 (discord: Emily) 02/15/2022 06:06

right-click menus exist for a reason

=== @ SkyLizardGirl 02/15/2022 06:07

I just use replace all alot
For certain tiles.

=== @EmilyV99 (discord: Emily) 02/15/2022 06:07

(meta) thread name was changed: ‚ùåüîíPossible Mouse Shortcuts
## ‚úÖüîíA way to turn off cheats (#1201)
@ Moosh opened this issue on 02/15/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/943174637116850216



=== @ Moosh 02/15/2022 15:59

Once cheats are on, you can decrease the cheat level by entering a lower level cheat, but there's afaik no way to go from cheat level 1 to 0, barring scripts. Would be neat if entering an invalid code did it, or an option in the dropdown

=== @EmilyV99 (discord: Emily) 02/15/2022 15:59

Pfft
The dev menu actually can do this already
(Because you just enter any number 0-4 to force cheat level)
I could probably make a menu that let's you do the same, up to the max level code you've entered?
Or, better yet, revamp the cheat dialog entirely

=== @ Moosh 02/15/2022 16:02

Could be cool. So long as hotkeys remain the same. F11, H, G, and the layer disabling ones are my lifeblood
But a lot of the time I'll use cheats to give myself some items and the only way to turn it off again is to F6 save, which isn't always ideal
hence the request

=== @EmilyV99 (discord: Emily) 02/15/2022 16:05

I'm thinking, a box to type code in, with a check button
And a radiolist of 0,1,2,3,4
Grey out the radio buttons higher than the highest code checked
Give ZScript access as `Game->MaxCheat`, probably?

=== @ Moosh 02/15/2022 16:07

This makes sense, though I wonder if quests would use it
back in the day when quests occasionally gave out lower level cheats I wondered why it wasn't more customizable. Now it seems to be L4, quest password, or nothing

=== @EmilyV99 (discord: Emily) 02/15/2022 16:08

<:nekoshrug:869489800271503400>

=== @EmilyV99 (discord: Emily) 02/15/2022 21:00

so uhh
I may have gone slightly overboard with helpfulness
https://youtu.be/I9wK03woqls

=== @ Moosh 02/16/2022 00:09

Looking good

=== @ Moosh 02/16/2022 00:10

How does it function with reading/setting cheats via script? Returns the currently selected radio button?
Would writing cheat level 4 also update the max cheat?

=== @EmilyV99 (discord: Emily) 02/16/2022 00:11

Reading `Game->Cheat` gives the selected
If you write it higher than max cheat, max cheat matches
If you write max cheat under cheat, it pulls cheat down

=== @ Moosh 02/16/2022 00:12

eeexcellent

=== @EmilyV99 (discord: Emily) 02/16/2022 00:13

The "cheats used" state of the save file is set as soon as Cheat is >0
Max cheat does *not* affect this
So even if you enter a cheat code, as long as you leave it on level 0, it won't mark you as having used cheats.

=== @EmilyV99 (discord: Emily) 02/17/2022 16:17

(meta) thread name was changed: ‚úÖüîíA way to turn off cheats
## ‚ùóüîì[1.90] Ladder Not Working Over (Solid?) Water in 2.55 (#1202)
@ P-Tux7 opened this issue on 02/15/2022

Status: open

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/943287134423511050



=== @ P-Tux7 02/15/2022 23:26

https://www.purezc.net/index.php?page=quests&id=9
See one screen below of start. Use cheat
pleasetellmethecheat to give yourself the candle and ladder
The ladder just plain ain't doing nothing.

=== @ P-Tux7 02/16/2022 01:34

(meta) thread name was changed: [1.90] Ladder Not Working Over (Solid?) Water in 2.55
(2.55 meaning latest buildpack, btw)

=== @ P-Tux7 02/17/2022 02:56

and it did in 2.50.2

=== @ P-Tux7 02/19/2022 05:56

Bumping this because it breaks possibly all 1.90 quests and maybe even other version quests that use the ladder over solid water

=== @connorjclark (discord: connorclark) 09/04/2022 03:29

Still an issue? Sounds important.
(meta) thread name was changed: ‚ùóüîì[1.90] Ladder Not Working Over (Solid?) Water in 2.55
## Start-2.10 - One of a Ringleader Enemy's Children Inherits Ringleader Status (#1203)
@ P-Tux7 opened this issue on 02/16/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/943319376420012092



=== @ P-Tux7 02/16/2022 01:34

Reported by obake-san for Splitting Darknuts in 2.10, but I imagine it extends to other splitting enemies. 

What SHOULD happen: One of the Blue Darknuts inherits the Ringleader status. When killed, all other enemies die.
What happens currently: Neither Blue Darknut inherits it and when killed, all other enemies do NOT die

Was used in a similar situation as the Armageddon Quest room with a Lanmola and Phantom Ghinis where you had to kill the Splitting Darknut to kill all the Ghinis.

Bizarrely, I could have sworn that splitting a Splitting Darknut in 2.50 counts as killing it for ringleader purposes...? I have a lot to check...
## ‚ùåüîíLevel 5 Cheat or Debug mode (#1204)
@ bigjoe opened this issue on 02/16/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/943321032486428743



=== @ bigjoe 02/16/2022 01:41

Basically, this would be a fifth cheat level that tracks whatever items you have when you first enter a dmap. Then, when you use the Goto menu box, you can select a checkbox "Reacquire Entry Items" or "Reacquire Exit Items". The data for this would be saved in a file alongside the quest. The reason for this is that some quests offer complex possibilities as to what you can have upon entering/exiting a dmap, and resetting this via the player data menu over and over can get tedious. This would be the next good step to streamlined debugging after Test Screen.

=== @EmilyV99 (discord: Emily) 02/16/2022 01:41

This is a bit complex for engine cheats
you could do this with a script, though

=== @ P-Tux7 02/16/2022 02:24

yeah easy
have a global variable that detects if you have a dummy item (or level item)
if so, give the items, if not, subtract them

=== @EmilyV99 (discord: Emily) 02/17/2022 16:17

(meta) thread name was changed: ‚ùåüîíLevel 5 Cheat or Debug mode
## üíäüîìstd.zh compile error (#1205)
@ Moosh opened this issue on 02/16/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/943428039386214421



=== @ Moosh 02/16/2022 08:46

```[Error] include\std_zh\std_extension.zh Line 13 @ Columns 27-39 - Error T017: Cannot cast from bool to float.
[Error] include\std_zh\std_extension.zh Line 13 @ Columns 27-39 - Error T017: Cannot cast from bool to float.```
Seems someone added more sanity checks to AdjacentCombo() and returned a bool instead of an int

=== @EmilyV99 (discord: Emily) 02/16/2022 09:31

@arceusplayer11 (discord: Deedee)
#1139

=== @arceusplayer11 (discord: Deedee) 02/16/2022 15:50

...yeah im dumb lmao

=== @arceusplayer11 (discord: Deedee) 02/16/2022 15:58

(meta) thread name was changed: üíäüîìstd.zh compile error
Fixed
## ‚úÖüîíPopup for keyboard controls not visible (#1206)
@ Moosh opened this issue on 02/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/943429372499603496



=== @ Moosh 02/16/2022 08:51

When entering new keyboard controls, the menu appears unresponsive. On further inspection the buttons still work as intended, it just isn't showing the prompt to press a key, or depressing the button until the invisible prompt is closed

=== @EmilyV99 (discord: Emily) 02/16/2022 09:31

ah fek
was afraid something would be missing a call
it's updating the temp bitmap, but not getting written to the video memory because it doesn't have that call in some function
shouldn't be hard to fix, but not coding right now

=== @EmilyV99 (discord: Emily) 02/16/2022 09:38

ehh, or maybe I am dammit

=== @EmilyV99 (discord: Emily) 02/16/2022 09:52

@ Moosh
https://cdn.discordapp.com/attachments/943429372499603496/943444726605045781/zelda.exe
(meta) thread name was changed: ‚úÖüîíPopup for keyboard controls not visible

=== @ Moosh 02/16/2022 09:56

Seems to work, though the build crashes if I leave the title screen
Assume there's some WIP stuff leftover in there
But yeah, popup thing's fixed

=== @EmilyV99 (discord: Emily) 02/16/2022 10:01

what?
the FUCK
gah

=== @EmilyV99 (discord: Emily) 02/16/2022 10:22

TIL
`sprintf(buf, buf, ...);`, while it works perfectly fine in zscript, crashes in c++

=== @EmilyV99 (discord: Emily) 02/16/2022 10:23


https://cdn.discordapp.com/attachments/943429372499603496/943452578086281226/zelda.exe
## Save File expansion and discussion (#1207)
@ NightmareJames opened this issue on 02/16/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/943605535196999690



=== @ NightmareJames 02/16/2022 20:31

Per @EmilyV99 (discord: EmilyV) 's directive, we will discuss the functionality here or if it's possible

=== @EmilyV99 (discord: Emily) 02/16/2022 20:32

> Deedee
> ...You know, bumping up the number of save slots would be neat
> Emily
> Rewriting saves completely would be far better

=== @arceusplayer11 (discord: Deedee) 02/16/2022 20:39

Basically it comes down to "do I feel like taking a swing at it"
It's not out of the question, given that I did something kinda similar with palette expansion

=== @ NightmareJames 02/16/2022 20:40

@EmilyV99 (discord: EmilyV) , what exactly is the issue exactly expanding save file slots?  RAM usage?  Crashes?  All of the above?

=== @EmilyV99 (discord: Emily) 02/16/2022 20:40

It's file stream stuff
You fuck up one tiny thing
You corrupt everything and everything crashes and nuke explodes and volcano erupt

=== @ NightmareJames 02/16/2022 20:41

Hrmmmmmmm

=== @ NightmareJames 02/16/2022 20:43

This is a known feature request and should be physically possible, if there any way it can be started with one addition then move on, or am I completely wrong on that?
I certainly know file stream stuff can be very tricky

=== @EmilyV99 (discord: Emily) 02/16/2022 20:44

Like
This needs a full rewrite of how saves work
Which also, if you think about it
Means a rewrite of how the *save select* works
So, uh, it'll require a LOT of work
And it all has to be done at once
Because if you were to do any part of it without finishing, then well, you wouldn't be able to play any quests at all

=== @ NightmareJames 02/16/2022 20:45

We do have stopgaps with ZCL and the test feature being done, so this doesn't have to be like tomorrow's thing

=== @EmilyV99 (discord: Emily) 02/16/2022 20:46

The test feature, for reference, was 100x easier than save expansion will be

=== @ NightmareJames 02/16/2022 20:46

It's also very much appreciated

=== @arceusplayer11 (discord: Deedee) 02/16/2022 20:46

the big thing is rewriting save selection

=== @EmilyV99 (discord: Emily) 02/16/2022 20:47

This is a huge overhaul, which needs to be done slowly and carefully, by someone insane enough

=== @arceusplayer11 (discord: Deedee) 02/16/2022 20:47

that's a bunch of tedious gui work

=== @EmilyV99 (discord: Emily) 02/16/2022 20:47

@arceusplayer11 (discord: Deedee) my idea would be dialog loader
So just a new gui system popup for save selection

=== @arceusplayer11 (discord: Deedee) 02/16/2022 20:47

I mean I've been considering doing it anyways because the 8 character limit on save names bugs me so much

=== @ NightmareJames 02/16/2022 20:48

If I were to ask you to do this on behalf of the community, what would be your ETA or version to do it?

=== @EmilyV99 (discord: Emily) 02/16/2022 20:48

No ETA

=== @ NightmareJames 02/16/2022 20:48

Without stressing you

=== @EmilyV99 (discord: Emily) 02/16/2022 20:48

It'll happen if/when it happens
Too complex to make any estimate

=== @EmilyV99 (discord: Emily) 02/16/2022 20:49

Literally one typo could cost days of debugging with something like this
So

=== @arceusplayer11 (discord: Deedee) 02/16/2022 20:50

ETA implies a linear production
more likely it'll be "oh hey I'm bored with nothing to do and I feel like doing something magical" one morning and it'd be out in a day or two

=== @EmilyV99 (discord: Emily) 02/16/2022 20:50

I tried exactly that already, but it burned through all my energy
And just didn't work at all

=== @ NightmareJames 02/16/2022 20:51

@ HeroOfFireZC @<role: Tester> Please input on this thread your views but just to reiterate, this is not a "do it now" priority.  I'd like to see this done eventually
This RN is more of a roundtable discussion

=== @EmilyV99 (discord: Emily) 02/16/2022 20:55

My basic hope would be:
`saves/` folder to hold all save files
Dialog loader system, allowing loading any save file or making a new one
Save *file* name and character name separate, enter both on create new file.

Due to file system, it might take longer to load each save (as it would load from file each time you load, instead of only on launch). However, this would also mean crashing would no longer lose progress saved once you return to the menu, as it would write the data to file then.

=== @ NightmareJames 02/16/2022 20:56

Sounds reasonable
See how the general testing group feels about it, as I don't want to speak for everyone

=== @EmilyV99 (discord: Emily) 02/16/2022 20:57

This requires:
-rewriting a lot of save file code
- completely replacing the save select screen with a completely new dialog
Which, while only 2 bullet points, is a fucking lot

=== @ NightmareJames 02/16/2022 20:58

Keep us informed @EmilyV99 (discord: EmilyV)

=== @arceusplayer11 (discord: Deedee) 02/16/2022 20:59

(replying to @ NightmareJames "See how the general testing g‚Ä¶"): I mean, whether or not it gets done is ultimately up to the two people capable of doing it

=== @ NightmareJames 02/16/2022 20:59

As I said, absolutely no rush

=== @ NightmareJames 02/16/2022 21:01

ZCL and the new testing feature should provide people with 99+ save slots for now

=== @ HeroOfFireZC 02/16/2022 21:04

Can you clarify what you mean by "load every time you load instead of launch"? What would this effect, and what would remain unchanged load-time wise. I assume it just means the file select menu and loading the quest is slower, so F6->Retry would be a bit slower, anything else?

=== @ HeroOfFireZC 02/16/2022 21:06

Depending on the scope of this rewrite, this might not make sense a 2.55 feature. The question is, how much effort would a smaller improvement be? Namely number of save slots increased, and size of save file name increased?

=== @EmilyV99 (discord: Emily) 02/16/2022 21:06

(replying to @ HeroOfFireZC "Can you clarify what you mean‚Ä¶"): Yes
(replying to @ HeroOfFireZC "Depending on the scope of thi‚Ä¶"): You can already use multiple `.sav`s with zcl
Save name length will require the title screen rewrite

=== @ HeroOfFireZC 02/16/2022 21:11

Hmm... I'd say set this idea aside for now (or play around with it in a side build), and maybe consider attempting it when the 2.55 to-do list is smaller. This re-write sounds like a big commitment, and better focused on if there was a "stable" 2.55 build that didn't need updates for a good while.

=== @EmilyV99 (discord: Emily) 02/16/2022 21:15

To be fair, we've done some fairly extensive rewrites of systems already
it just takes one of us having enough energy in a burst to plow through it

=== @ NightmareJames 02/16/2022 21:18

I'm in agreement, I'll just make a video on how to manip save files
We can do this at a better time

=== @ NightmareJames 02/16/2022 21:20

I don't think we're that computer illiterate as a community where we can't use Windows copy and paste.  ü§£

=== @ HeroOfFireZC 02/16/2022 21:39

I don't recall where I've last seen this done, but I know there have been games with "experimental builds" that are dedicated to massive changes like this. That is one way I could see this happening "short term". I'm just concerned that working on it now could derail other development. This does not sound like a change you put into a nightly build and call it done, there will likely be weeks of testing.

=== @ HeroOfFireZC 02/16/2022 21:42

It does sound worth doing at some point though, the question is when is a good time to put all the development and testing focus on it.

=== @ NightmareJames 02/16/2022 23:43

Yeah, this might need a side/experimental build
## üíäüîìPalette Editor doesn't fit in small mode (#1208)
@ Russ opened this issue on 02/17/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/943667124071710741



=== @ Russ 02/17/2022 00:36

Exactly what it says on the tin

![image](https://cdn.discordapp.com/attachments/943667124071710741/943667140899258378/unknown.png)

=== @ Russ 02/17/2022 00:40

Additionally, grabbing palettes is more annoying. Previously, when you grabbed a cset, pressing down would move down to the next line, letting you hold your mouse over grab to efficiently pull them in
Now, pressing down just scrolls between done and preview in cs 9

=== @EmilyV99 (discord: Emily) 02/17/2022 01:48

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 02/17/2022 01:55

damn

=== @EmilyV99 (discord: Emily) 02/17/2022 01:55

always check guis in small mode before committing

=== @arceusplayer11 (discord: Deedee) 02/17/2022 14:42

@ Russ
![image](https://cdn.discordapp.com/attachments/943667124071710741/943880078855634944/unknown.png)
Hows this
(this is in small mode)

=== @arceusplayer11 (discord: Deedee) 02/17/2022 14:45

(meta) thread name was changed: üíäüîìPalette Editor doesn't fit in small mode

=== @arceusplayer11 (discord: Deedee) 02/17/2022 14:49

(replying to @ Russ "Additionally, grabbing palett‚Ä¶"): Apparently this isn't something that can be reasonably added
But you can press G and that will do what you want just fine
## üíäüîìRecolor tool is broken. (#1209)
@ Russ opened this issue on 02/17/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/943671598467129375



=== @ Russ 02/17/2022 00:54

The non-8-bit recolor tool is completely broken as of the newest alpha. Using it converts the entire image into color 0.

=== @EmilyV99 (discord: Emily) 02/17/2022 01:49

w-w-w-whaaaaa

=== @ Russ 02/17/2022 01:50

Moosh brought up an idea regarding this and the other tile editor bug that's stupid enough to probably be the reason
[8:46 PM] Moosh: I think what's happened is anything involving bitmaps in the editor is broken, because of that speed fix with drawing directly to the screen.

=== @EmilyV99 (discord: Emily) 02/17/2022 01:53

. . . no
because that fix was in ZC
not ZQ

=== @ Russ 02/17/2022 01:53

Huh...

=== @EmilyV99 (discord: Emily) 02/17/2022 01:53

ZQ already had the intermediate bitmap, since 2.50.2 at least
I copied it *from* ZQ

=== @ Russ 02/17/2022 01:53

Well whatever the issue, it wasn't there in November, and it's here now

=== @EmilyV99 (discord: Emily) 02/17/2022 01:53

quite a few changes in that period

=== @EmilyV99 (discord: Emily) 02/17/2022 02:09

(replying to @ Russ "The non-8-bit recolor tool is‚Ä¶"): uhhh

![image](https://cdn.discordapp.com/attachments/943671598467129375/943690587167678484/unknown.png)

![image](https://cdn.discordapp.com/attachments/943671598467129375/943690615248519218/unknown.png)

![image](https://cdn.discordapp.com/attachments/943671598467129375/943690641211269200/unknown.png)

=== @ Russ 02/17/2022 02:12

Sorry, I mean when grabbing tiles
And pressing R
Only now occurring to me that we have two different functions with the same name in the tile editor

=== @EmilyV99 (discord: Emily) 02/17/2022 02:13

oh

=== @ Moosh 02/17/2022 02:13

Grab recolor tool appears to be working for me as well
both 4-bit and 8-bit

=== @EmilyV99 (discord: Emily) 02/17/2022 02:14

I frankly never knew how to use the grab tools
other than 8-bit recolor to rip stuff
never fucked with anything else
but uh, it definitely doesn't look like I get color 0

=== @ Moosh 02/17/2022 02:15

Is it maybe a specific image format that broke?

=== @EmilyV99 (discord: Emily) 02/17/2022 02:15

@ Russ ?

=== @ Russ 02/17/2022 02:16

Let's see
Isn't working with pngs or gifs
Is it possible it's only in small mode. Ugh, lemme test
No, same deal in large mode

=== @ Moosh 02/17/2022 02:18

Oh

=== @ Russ 02/17/2022 02:18

... this has reminded me how much I dislike large mode but that is beside the point

=== @ Moosh 02/17/2022 02:18

I'm seeing the issue but only in certain csets

=== @ Russ 02/17/2022 02:18

Oh!

=== @ Moosh 02/17/2022 02:18

2 and 9 specifically

=== @ Russ 02/17/2022 02:18

It's in 2-4 and 9 for me

=== @EmilyV99 (discord: Emily) 02/17/2022 02:19

@arceusplayer11 (discord: Deedee)

=== @ Russ 02/17/2022 02:19

Those particular numbers feel uh... unlikely to be coincidence

=== @EmilyV99 (discord: Emily) 02/17/2022 02:19

sounds level palette update related
same as #1208

=== @arceusplayer11 (discord: Deedee) 02/17/2022 02:20

uhhhhh
I'll check in a bit

=== @arceusplayer11 (discord: Deedee) 02/17/2022 12:58

I'm seeing something that might potentially be wrong, but I'm confused as to why it didn't break before

=== @arceusplayer11 (discord: Deedee) 02/17/2022 13:11

oh
I'm really hoping that I'm just misunderstanding the code and that the people before me weren't huge idiots

=== @arceusplayer11 (discord: Deedee) 02/17/2022 13:23

https://tenor.com/view/the-simpsons-principal-skinner-skinner-children-out-of-touch-gif-4463952
Okay so the problem was that the old devs hardcoded something really stupid that I didn't catch when I updated the palette to have new stuff
So the main palette was sized 15 and level palettes sized 13 before
but this is all stored in one big array and there's no difference

=== @arceusplayer11 (discord: Deedee) 02/17/2022 13:26

The old devs didn't offset by the main palette to access the level palettes; they just added 1 to the level palette you were accessing (adding another 13), then added 2 to every level specific cset
obviously this kinda breaks when you bump up level palettes from 13 to 17

=== @EmilyV99 (discord: Emily) 02/17/2022 13:27

pffffffffffffffffffft
what the fuck

=== @arceusplayer11 (discord: Deedee) 02/17/2022 14:44

(meta) thread name was changed: üíäüîìRecolor tool is broken.

=== @ Russ 02/18/2022 00:01

This... sounds about what I'd expect
## ‚ùåüîíScreenshotting tile pages is broken (#1210)
@ Russ opened this issue on 02/17/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/943684875792310343



=== @ Russ 02/17/2022 01:46

Previously, pressing F12 or Z would take a screenshot of the tile page. This function no longer works
What the heck happened with the tile editor? Feels like several bugs have been introduced but there's no new features.

=== @ Russ 02/17/2022 02:00

Okay so I tested more
Screenshotting in ZQuest is broken, period

=== @EmilyV99 (discord: Emily) 02/17/2022 02:00

hmm
Try this for me

=== @ Russ 02/17/2022 02:00

Er
No, wait, nevermind

=== @EmilyV99 (discord: Emily) 02/17/2022 02:00

create a folder named `snapshots`

=== @ Russ 02/17/2022 02:00

They got in a screenshots folder now

=== @EmilyV99 (discord: Emily) 02/17/2022 02:00

oh
you just didn't see it
yeah
that'd be it
Deedee just had so much clutter in her folder when screensharing
and I just needed to do something about it

=== @ Russ 02/17/2022 02:01

lol
I... have mixed feelings on this, but whatever
"Bug" fixed

=== @EmilyV99 (discord: Emily) 02/17/2022 02:04

(meta) thread name was changed: ‚ùåüîíScreenshotting tile pages is broken
to be fair, it looks like I forgot to note it in the changelog post
## ‚úÖüîíA103 - Crashes (ZC Player using Launcher) Slow (Test Mode) Setting Controller Buttons (#1211)
@ NightmareJames opened this issue on 02/17/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/943692118575157269



=== @ NightmareJames 02/17/2022 02:15

A 103 seemed to break the code that was used to set controller abilities.  It outright crashes using ZC Launcher to ZC player and while it works on the Test Mode, it is very slow.  Using an XBox One Controller to test

=== @EmilyV99 (discord: Emily) 02/17/2022 02:16

*crashes*?
For FUCKS SAKE
why can't anything fucking work

=== @ NightmareJames 02/17/2022 02:17

Yes, basically just click it and it hangs there infinitely and you can't get out of it

=== @EmilyV99 (discord: Emily) 02/17/2022 02:17

I don't have any form of controller to test with
Also
james
hanging and crashing
are *entirely different*

=== @ NightmareJames 02/17/2022 02:17

Edit the title if you want, but it just stays there infinitely
Either way, it disables ZC

=== @EmilyV99 (discord: Emily) 02/17/2022 02:18

no buttons do anything?
either controller or keyboard?

=== @ NightmareJames 02/17/2022 02:18

Yes ma'am
And I have to force close it in task manager

=== @EmilyV99 (discord: Emily) 02/17/2022 02:20


https://cdn.discordapp.com/attachments/943692118575157269/943693260055003186/zelda.exe
try this just to be sure
(I didn't do anything just now, but, just would be good to see if I already somehow fixed it, because I did change stuff around there)

=== @EmilyV99 (discord: Emily) 02/17/2022 02:23

@ NightmareJames

=== @ NightmareJames 02/17/2022 02:24

That one works

=== @EmilyV99 (discord: Emily) 02/17/2022 02:25

oh
I'm surprised it wasn't accepting input
the keyboard dialog had the same issue
except, it just, wasn't drawing the prompt visually
and you could just press a key
and it worked

=== @ NightmareJames 02/17/2022 02:25

Hrmmmmmmmmm

=== @EmilyV99 (discord: Emily) 02/17/2022 02:25

curious that the controller one would be different

=== @ NightmareJames 02/17/2022 02:28

It could be invisible too, causing to act like a hang and lock out all inputs

=== @EmilyV99 (discord: Emily) 02/17/2022 02:29

it shouldn't lock out inputs

=== @ NightmareJames 02/17/2022 02:29

What should I do for a test case?

=== @EmilyV99 (discord: Emily) 02/17/2022 02:31

I mean, if it's fixed in the build I posted it shouldn't matter

=== @ NightmareJames 02/17/2022 02:32

OK, fair
I'll get to ZX testing after sets tomorrow then
TY

=== @EmilyV99 (discord: Emily) 02/17/2022 11:36

(meta) thread name was changed: ‚úÖüîíA103 - Crashes (ZC Player using Launcher) Slow (Test Mode) Setting Controller Buttons
## Re-saving a 2.50 quest in 2.55 fixes Boss Hurt Sound glitch (#1212)
@ P-Tux7 opened this issue on 02/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/943736861271150604



=== @ P-Tux7 02/17/2022 05:13

Ok so I noticed the 2.50 quest when played in 2.55 has the whole "hitting a boss makes the normal AND boss hurt sounds" thingy. This is not supposed to happen in Z1 and got corrected for 2.55 by default. However, for playing a 2.50 quest in 2.55, it's supposed to happen and is happening. Works great! 
However, re-saving a 2.50 quest in 2.55, it "fixes" that issue. Is that intentional...?

=== @EmilyV99 (discord: Emily) 02/17/2022 05:20

@arceusplayer11 (discord: Deedee) (version check error somewhere)
## HomingPointX and HomingPointY for NPCs (#1213)
@ bigjoe opened this issue on 02/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/943983514699829328



=== @ bigjoe 02/17/2022 21:33

These set the homing point of the NPC. By default these will be set to -1 which is Link's location. If these are set to anything else, the NPC will change its homing target to that location. Is this doable?

=== @EmilyV99 (discord: Emily) 02/17/2022 21:34

@arceusplayer11 (discord: Deedee) does enemy stuff

=== @ Alucard648 02/17/2022 21:51

Oh yes, custom baits. üçó
## ‚úÖüîíInit Data menu crash (#1214)
@ vlamart opened this issue on 02/18/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/944047278027604038



=== @ vlamart 02/18/2022 01:46

Creator crashes everytime I attempt to open Quest->Init Data

=== @ vlamart 02/18/2022 01:48

Actually just tested it on a new quest and works fine. It seems to crash when there are absolutely no items (makes sense)

=== @EmilyV99 (discord: Emily) 02/18/2022 01:48

Oh
That
That would be an odd edge-case

=== @ vlamart 02/18/2022 01:51

Very much so, for personal experimentation and organisation purposes, I was trying to make myself a completely blank of data templet. No items, enemies, sprites, etc., pure scratch

=== @EmilyV99 (discord: Emily) 02/18/2022 01:51

Guessing it'll be a quick fix
Once I get upstairs

=== @ vlamart 02/18/2022 01:52

üéâ

=== @EmilyV99 (discord: Emily) 02/18/2022 02:32

So, because testing this requires deleting a bunch of items
I uh, got very tired very quickly of doing `rclick->paste` repeatedly
so, now, `Ctrl+C`, `Ctrl+V`, `Ctrl+S`, `Ctrl+L` activate the `Copy`, `Paste`, `Save` and `Load` options from the rclick menu
(needs the Ctrl because typing normally searches)

![image](https://cdn.discordapp.com/attachments/944047278027604038/944059193512587304/unknown.png)
Special handling case now displays this if no items are found
as, both the lister and the switcher full of checkboxes were *empty*
and thus when they reference their default option of `[0]`, they are uh, nullpo
so now, those gui objects just... don't exist at all if you don't have items

https://cdn.discordapp.com/attachments/944047278027604038/944059623760085002/zquest.exe

https://cdn.discordapp.com/attachments/944047278027604038/944059654336577536/zelda.exe

=== @ vlamart 02/18/2022 02:36

Thank you, I literally did it one by one, even with enemies and sprites, even though sprites was nice enough to copy the name too, so it was easier to sift through a bunch of "zz000"

=== @EmilyV99 (discord: Emily) 02/18/2022 02:43

I only added it to items there, adding to the others is separate work unfortunately

=== @EmilyV99 (discord: Emily) 02/18/2022 03:18


https://cdn.discordapp.com/attachments/944047278027604038/944070418774491206/zquest.exe
https://cdn.discordapp.com/attachments/944047278027604038/944070419378499654/zelda.exe
Should have copy+paste+save+load with `Ctrl` for Items, Enemies, and Sprites

=== @EmilyV99 (discord: Emily) 02/18/2022 03:35

(meta) thread name was changed: ‚úÖüîíInit Data menu crash
## ‚úÖüîíSave to Test Error (#1215)
@ Jared opened this issue on 02/18/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/944064540688130108



=== @ Jared 02/18/2022 02:55

I found a small error where when you go to Test in ZQ, and it prompts you to save, but it keeps bringing you back to the save screen instead of the screen where you pick your location for testing.

![image](https://cdn.discordapp.com/attachments/944064540688130108/944064568546713640/unknown.png)

![image](https://cdn.discordapp.com/attachments/944064540688130108/944064604508672020/unknown.png)
You can press test but I think it should bring you to the actual screen, right?

=== @ Russ 02/18/2022 03:01

Can confirm. Saving the quest via this window does not actually appear to set whatever flag ZQuest uses to determine if it should display the prompt or not
Cancelling and re-selecting Test seems to fix it

=== @EmilyV99 (discord: Emily) 02/18/2022 03:04

Not an error
this is a function-panel dialog
it, by design, presents you with multiple buttons, most of which run a function without closing the dialog

=== @ Jared 02/18/2022 03:05

Ohhh okay. I kind of thought that

=== @EmilyV99 (discord: Emily) 02/18/2022 03:05

(and, I can construct them with an arbitrary number of buttons, with arbitrary text, running arbitrary functions, so it's very easy to make dialogs with it)
This also occurs in at least one other place....
I think it's the popup when your global init script changes after a compile?

![image](https://cdn.discordapp.com/attachments/944064540688130108/944067321079668747/unknown.png)
Aye, this is the same underlying code
`Header` shortcuts to `Quest->Options->Header`
and then `OK` closes
(meta) thread name was changed: ‚ùåüîíSave to Test Error

=== @ Russ 02/18/2022 03:11

... not an error?
Eh?
It seems very clearly an error
Once you've saved, it should no longer be displaying a warning

=== @EmilyV99 (discord: Emily) 02/18/2022 03:12

Once you've exited the popup, it won't pop back up
but, saving doesn't exit it
it just saves

=== @ Russ 02/18/2022 03:12

Right... but it should
That's how basically every other program out there works

=== @EmilyV99 (discord: Emily) 02/18/2022 03:13

well, because of the way the gui system works
I can have it close the popup
but it won't go to the test button
you'd have to go back to `Quest->Test`
it either closes the popup or doesn't, it won't trigger a different button

=== @ Russ 02/18/2022 03:14

... there's no way to have it launch the test function after saving?

=== @EmilyV99 (discord: Emily) 02/18/2022 03:14

not cleanly

=== @ Jared 02/18/2022 03:28

Good to know. Nbd imo

=== @ Russ 02/18/2022 03:28

Is it possible for it to open a different dialogue after saving?

=== @EmilyV99 (discord: Emily) 02/18/2022 03:34


https://cdn.discordapp.com/attachments/944064540688130108/944074371113287741/zquest.exe
https://cdn.discordapp.com/attachments/944064540688130108/944074371679531018/zelda.exe
Blehg, that was painful, and crashed multiple times getting it working
but there
(meta) thread name was changed: ‚úÖüîíSave to Test Error

=== @ Russ 02/18/2022 03:35

ooh, grazie

=== @ Jared 02/18/2022 03:37

Will it be included in the next build/nightly build?

=== @EmilyV99 (discord: Emily) 02/18/2022 03:39

that should never really need to be a question except for major giant rewrites of half the engine
any small fix that's added is *automatically* in the next build

=== @ Jared 02/18/2022 03:43

Good to know üôÇ
## üíäüîìBottle Discrepancy (#1216)
@ Jared opened this issue on 02/18/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/944066621067132940



=== @ Jared 02/18/2022 03:03

I found a discrepancy with the bottle system. When Link fills up my bottle (4), it shows a different sprite than it should.

![image](https://cdn.discordapp.com/attachments/944066621067132940/944066644991430656/unknown.png)
This is after catching the fairy

=== @ Jared 02/18/2022 03:05

Come to think of it, where does it even get the sprite from??

=== @EmilyV99 (discord: Emily) 02/18/2022 03:08

My guess is you didn't read the setup instructions in the `?` on the bottle item
it changes the tile based on what its' filled with
...oh
or there's some info that isn't in the right place
not your fault if the instructions were literally missing

=== @ Jared 02/18/2022 03:09

this is all i see lol
![image](https://cdn.discordapp.com/attachments/944066621067132940/944068142567661588/unknown.png)
LOL

=== @EmilyV99 (discord: Emily) 02/18/2022 03:09

So uhhh
If you do `File->New`
and go to tile page 90

![image](https://cdn.discordapp.com/attachments/944066621067132940/944068267184652298/unknown.png)

=== @ Jared 02/18/2022 03:10

I already got it open üôÇ
Ohhhhh okay

=== @EmilyV99 (discord: Emily) 02/18/2022 03:10


![image](https://cdn.discordapp.com/attachments/944066621067132940/944068338898833418/unknown.png)
The AFrames set on the bottle item determine how many frames each is

=== @ Jared 02/18/2022 03:10

Ah, so you CAN do half potions.

=== @EmilyV99 (discord: Emily) 02/18/2022 03:11


![image](https://cdn.discordapp.com/attachments/944066621067132940/944068471501754388/unknown.png)
`When used, becomes type: 6`

=== @ Jared 02/18/2022 03:11

Yeah, I have those set up

=== @EmilyV99 (discord: Emily) 02/18/2022 03:11

perfect way to create however much a chain of potions you want

=== @ Jared 02/18/2022 03:14

So I should just set it to 1 then
The AFrames

=== @EmilyV99 (discord: Emily) 02/18/2022 03:14

if you want non-animated bottles, then aye

=== @ Jared 02/18/2022 03:14

Hm, still giving me the weird sprite
Also, shouldn't it show the name of the new item on the subscreen?
Like Red Potion or whatever?

=== @EmilyV99 (discord: Emily) 02/18/2022 03:17

(replying to @ Jared "Also, shouldn't it show the n‚Ä¶"): ....I thought I added that, but I don't see it anywhere, so clearly I forgot
(replying to @ Jared "Hm, still giving me the weird‚Ä¶"): Screenshot your tile setup and item editor setup?

=== @ Jared 02/18/2022 03:18

(ignore the net above the name I /think/ that's a tile error
![image](https://cdn.discordapp.com/attachments/944066621067132940/944070388684558417/unknown.png)
I got the fairy to work now though

=== @EmilyV99 (discord: Emily) 02/18/2022 03:35

(replying to @ Jared "Hm, still giving me the weird‚Ä¶"): ?

=== @ Jared 02/18/2022 03:43

I got it to work fine lol
Just the whole name thing is odd

=== @EmilyV99 (discord: Emily) 02/18/2022 03:48

also it's displaying the net there
what's up with that? Is that a setup error on your part, or is something wrong?

=== @ Jared 02/18/2022 03:58

Yeah, that was a weird error on the subscreen
I think it was showing current item or something

=== @EmilyV99 (discord: Emily) 02/18/2022 04:00

what is placed there on the subscreen, exactly?

=== @ Jared 02/18/2022 04:42

I think it was current item

=== @EmilyV99 (discord: Emily) 02/18/2022 04:47

with what settings

=== @EmilyV99 (discord: Emily) 02/18/2022 05:01

(replying to @ Jared "Just the whole name thing is‚Ä¶"): 
![image](https://cdn.discordapp.com/attachments/944066621067132940/944096349408858132/unknown.png)
got that working now

=== @ Jared 02/18/2022 05:02

Sweet!
Magic dev

=== @EmilyV99 (discord: Emily) 02/18/2022 05:02


https://cdn.discordapp.com/attachments/944066621067132940/944096606343528448/zquest.exe
https://cdn.discordapp.com/attachments/944066621067132940/944096607023022120/zelda.exe

=== @EmilyV99 (discord: Emily) 02/18/2022 05:04

(meta) thread name was changed: üíäüîìBottle Discrepancy
## Tall Grass - No separate SFX for grass and slash (#1217)
@ Jared opened this issue on 02/18/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/944103350524342292



=== @ Jared 02/18/2022 05:29

Right in the title. I could have sworn it was there before, but now it only shows a cutting sfx slot.

=== @EmilyV99 (discord: Emily) 02/18/2022 05:33

<:nekoshrug:869489800271503400>
@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 02/18/2022 06:30

Were you looking in the Generic Combo before?

=== @ Jared 02/18/2022 06:45

I don't believe so

=== @arceusplayer11 (discord: Deedee) 02/19/2022 22:48

need a bit more info cause I'm not understanding what you mean
do you mean that Grass and Slash combos don't have a cutting sfx?

=== @ Jared 02/20/2022 03:06

The tall grass has the same walking sfx and slashing sfx

=== @arceusplayer11 (discord: Deedee) 02/20/2022 03:25

tall grass has walking sfx?

=== @EmilyV99 (discord: Emily) 02/20/2022 03:29

...ZORIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

=== @ P-Tux7 02/20/2022 03:40

(replying to @arceusplayer11 (discord: Deedee) "tall grass has walking sfx?"): In his mild defense, it really ought to have the capability

=== @ Jared 02/20/2022 03:41

(replying to @EmilyV99 (discord: Emily) "...ZORIAAAAAAAAAAAAAAAAAAAAAA‚Ä¶"): üò©

=== @EmilyV99 (discord: Emily) 02/20/2022 03:42

(replying to @ P-Tux7 "In his mild defense, it reall‚Ä¶"): no but
the combo editor field `Slash SFX`
is what sets it
which is blatantly dumbassed

=== @ P-Tux7 02/20/2022 03:42

wtf
it clearly is not like that in LTTP
walking: "pfft"
slashing: "shr-r-r-ip"

=== @arceusplayer11 (discord: Deedee) 02/20/2022 03:48

Fixed, I think

=== @ Jared 02/20/2022 03:59

Yay
## ‚úÖüîí[Combo Flag or Combo Attr] Switch Hook-Only Pushblock (#1218)
@ P-Tux7 opened this issue on 02/18/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/944374819296788532



=== @ P-Tux7 02/18/2022 23:28

A combo flag or a flag on the Switch Block combo that makes it "count" as a pushable block for block trigger purposes, but is un*push*able. It only serves to be swapped with and depress a block trigger.

=== @ Moosh 02/18/2022 23:32

So a Push (No Way) flag?

=== @ P-Tux7 02/18/2022 23:33

Basically

=== @EmilyV99 (discord: Emily) 02/18/2022 23:50

I... was about to say `doesn't this exist?`
but then I looked
and, it very clearly doesn't
I certainly *INTENDED* to have something for this....
A placeable flag is a fair bit of work to add
but, adding a flag on the SwitchHook Block combo type, should be easy enough

=== @ P-Tux7 02/19/2022 00:03

oh and please test to make sure that they can't be fail-hooked when on a block trigger
said friend was complaining about that when switch blocks were used with a pushblock flag
is that even a bug to report or intended?
i admittedly haven't used the real switch hook because i haven't played oracle of ages

=== @EmilyV99 (discord: Emily) 02/19/2022 00:06

That's intended
The combo is hookable, but it's locked in place

=== @ P-Tux7 02/19/2022 00:18

Makes sense
They called it ugly and I kind of agree but I AM having trouble thinking of a better way to communicate it

=== @EmilyV99 (discord: Emily) 02/19/2022 02:51


![image](https://cdn.discordapp.com/attachments/944374819296788532/944425998504583198/unknown.png)
(meta) thread name was changed: ‚úÖüîí[Combo Flag or Combo Attr] Switch Hook-Only Pushblock

=== @ P-Tux7 02/19/2022 03:43

Thanks!
## ‚úÖüîíBlocks Only Lock Into Trigger Once Secrets Activate (#1219)
@ P-Tux7 opened this issue on 02/19/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/944388267099447327



=== @ P-Tux7 02/19/2022 00:21

AKA after you've pushed them on all the triggers. Didn't categorize this one as while it may be technically more useful as a screen flag, that might be a waste and it could also be a QR
So basically you can keep pushing blocks over triggers until you've got all triggers covered.
Though if pushing a pushblock onto it "erases" the trigger like I heard it does... uh oh
Sorry this is just another friend request

=== @EmilyV99 (discord: Emily) 02/19/2022 01:32

It would erase the trigger if the block is on the same layer
Because, the block... is a combo
And the trigger... is a combo
So you can't have 2 combos on the same layer in the same position

=== @ P-Tux7 02/19/2022 01:56

Layered, at least?

=== @EmilyV99 (discord: Emily) 02/19/2022 03:48

@ P-Tux7

![image](https://cdn.discordapp.com/attachments/944388267099447327/944440242138673193/unknown.png)

![image](https://cdn.discordapp.com/attachments/944388267099447327/944440290528342116/unknown.png)
(meta) thread name was changed: ‚úÖüîíBlocks Only Lock Into Trigger Once Secrets Activate
Enabled by default for Modern ruleset
## ‚úÖüîí'Triggers Secrets' issues (#1220)
@EmilyV99 (discord: Emily) opened this issue on 02/19/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/944422153804210196



=== @EmilyV99 (discord: Emily) 02/19/2022 02:36

1. Appears not to work on `Switch` combos
2. Does not trigger secret sfx?
@arceusplayer11 (discord: Deedee) @ DeletedUser

=== @ P-Tux7 02/19/2022 03:44

Oh check #1037
i was under the impression it was a "feature" that needed to be added instead of something being broken, hence the category
sorry

=== @ Alucard648 02/19/2022 06:16

I think, sound play on Screen->TriggerSecrets() call is excessive. Sometimes, you need silent secret triggering.

=== @EmilyV99 (discord: Emily) 02/19/2022 06:32

Does that play the SFX itself?
I thought it didn't

=== @ P-Tux7 03/03/2022 01:12

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 03/09/2022 04:46

(replying to @ Alucard648 "I think, sound play on Screen‚Ä¶"): I have just brained and realized what you meant here
but this thread is about the combo flag `Triggers Secrets`, not `Screen->TriggerSecrets()`

=== @EmilyV99 (discord: Emily) 03/10/2022 00:56

Oh, forgot to update this thread
It now works fine on any combo type
and plays the screen secret sfx
and, unless the `Secrets are Temporary` flag is set, they are perm (as normal screen secrets usually do)
(meta) thread name was changed: ‚úÖüîí'Triggers Secrets' issues

=== @ P-Tux7 03/10/2022 02:23

thank you!!!
## Item - Subscreen Tile (#1221)
@ P-Tux7 opened this issue on 02/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/944476212468785192



=== @ P-Tux7 02/19/2022 06:11

For the LTTP tileset. A tile that you can set to be the item's representation on the active and passive subscreen instead of the tile of the sprite that you pick up/get from a chest.
Nothing fancy - just hijack the subscreen item draws with a non-animated tile. Doesn't even touch the subscreen editor.

=== @ P-Tux7 02/19/2022 06:13

(Okay, that code might need some updates to preview the item subscreen tiles... but that's all rendering. No new/modified subscreen elements or anything)
## üíäüîìChanges to a tempscreen for an invalid layer don't respect combo properties (#1222)
@ Moosh opened this issue on 02/19/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/944575063808688148



=== @ Moosh 02/19/2022 12:44

This happens when writing to a tempscreen for an invalid layer, as in one not assigned via the editor. A previous report saw this fixed so graphics get updated on the layer, but the combos still don't seem fully functional. If the combo I'm changing is solid, it doesn't behave as such on layers 1&2. And if it has extra properties such as a damage combo or warp it doesn't obey those either.

=== @ Moosh 02/19/2022 12:45

https://discord.com/channels/876899628556091432/896799972845056040/896954453037576212
Here's a link to that report. Initial subject of the report was not a bug, but the tempscreen behavior got changed here

=== @EmilyV99 (discord: Emily) 02/19/2022 12:46

@arceusplayer11 (discord: Deedee) I pray you can fix this for me
I'm almost certain the issue is
something checking `mapscr.layermap[ind] != 0`, that needs to instead check `layerscr->valid`

=== @ Moosh 02/19/2022 12:47

Sorry for always being the bear of bad news. Bright side for me, this one's super workaroundable

=== @EmilyV99 (discord: Emily) 03/10/2022 01:04


![image](https://cdn.discordapp.com/attachments/944575063808688148/951284406419603466/unknown.png)

=== @EmilyV99 (discord: Emily) 03/10/2022 01:11

blehg
about 20 instances of that code block
now all

![image](https://cdn.discordapp.com/attachments/944575063808688148/951286250214674532/unknown.png)
blehg

=== @EmilyV99 (discord: Emily) 03/10/2022 01:13

@ Moosh uploading a nightly soon, if you want to test if this fixes everything. Should definitely fix solidity, and I hope it fixes any other issues too....

=== @EmilyV99 (discord: Emily) 03/10/2022 01:23

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)

=== @EmilyV99 (discord: Emily) 03/10/2022 01:29

(meta) thread name was changed: üíäüîìChanges to a tempscreen for an invalid layer don't respect combo properties
## Importing 2.50-3 Quest Into 2.55 Fixes Boss Sound Issue (#1223)
@ P-Tux7 opened this issue on 02/20/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/944759507404333087



=== @ P-Tux7 02/20/2022 00:56

So you know how 2.55 fixed that thing in 2.50 where an Aquamentus etc. would make BOTH the enemy hurt and boss hurt sound when hurt? If you save a 2.50 quest in 2.55, it fixes that whether you want it to or not.

Luckily, this does not apply to PLAYING quests, as the old behaviour works for 2.50/3 quests in the Player, only SAVING them in ZQuest.
## Candle pays cost and runs action script multiple times per button press. (#1224)
@ Alucard648 opened this issue on 02/20/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/944776039735914527



=== @ Alucard648 02/20/2022 02:02

This does not happen with other items, like hammer, whistle, hookshot etc.

=== @ Alucard648 02/20/2022 02:04


https://cdn.discordapp.com/attachments/944776039735914527/944776379055083600/TimeLimItem.qst
https://cdn.discordapp.com/attachments/944776039735914527/944776379419992154/itemlimit.z

=== @EmilyV99 (discord: Emily) 02/20/2022 02:15

@arceusplayer11 (discord: Deedee)
## Piece of Heart- Separate strings for each (#1225)
@ Jared opened this issue on 02/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/944792610218844170



=== @ Jared 02/20/2022 03:08

Right in the title. I know there's a script to have each string be different, but it'd be nice if it was built in! Doesn't seem too complicated.

=== @EmilyV99 (discord: Emily) 02/20/2022 03:20

I mean
it would require adding multiple pickup strings to EVERY ITEM
so, kinda wasting space for bloat

=== @ P-Tux7 02/20/2022 03:41

Can SCCs check how many POHs you have and branch to a suitable string accordingly?

=== @ P-Tux7 02/20/2022 03:42

With the new character limits, I'd imagine that "If POH = 0 go to string A, else if POH = 3 go to string B, else if POH = 2 go to string C, else if POH = 1 go to string D" would be very feasible

=== @EmilyV99 (discord: Emily) 02/20/2022 03:42

. . . . no, thanks for adding another idea to my plate XD

=== @ P-Tux7 02/20/2022 03:42

Sorry, but luckily that should make this possible without any bloat

=== @ Jared 02/20/2022 04:31

I figured it‚Äôd be easier lol. Why not just add it to heart piece items?
I mean I‚Äôm 100% okay with using the script in the database, even though it does a weird thing with the sfx

=== @EmilyV99 (discord: Emily) 02/20/2022 04:39

(replying to @ Jared "I figured it‚Äôd be easier lol.‚Ä¶"): that's.... not a thing that CAN be done
unless it used one of the *attributes*
which, eh
I guess that could work
but blehg
having something not use it's pickup string in one specific edge case seems kinda janky
#1226 is far cleaner
## SCC - check current number of Heart Pieces (#1226)
@ P-Tux7 opened this issue on 02/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/944802010409078865



=== @ P-Tux7 02/20/2022 03:45

for #1225

=== @EmilyV99 (discord: Emily) 02/20/2022 03:51

It'll be "check Game->Generic[] index"
Covers hcps, half magic,  etc
## ‚ùìüîíSignposts don't work with Cant Use from X Side Flags (#1227)
@ Orithan opened this issue on 02/20/2022

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/944896850589278258



=== @ Orithan 02/20/2022 10:02

Version: Alpha 103, Nightly 18/2/22
Operating system: Windows 10

Checking "Cannot use from X Side" stops you from using the signpost.

![image](https://cdn.discordapp.com/attachments/944896850589278258/944896903143911474/Untitled.png)
The top one says "Cannot be activated standing to the right if checked."

=== @ Orithan 02/20/2022 10:05

Which appears to be at least a mismatch from what listed in the combo editor

=== @EmilyV99 (discord: Emily) 02/20/2022 10:06

...the help text is definitely typoed

![image](https://cdn.discordapp.com/attachments/944896850589278258/944897914654847006/unknown.png)
that uh
is definitely setting index 8 4 times
instead of index 8 through 11
oh, that's on chests
...probably copy+pasted
aye
but, that'd only be visual

=== @EmilyV99 (discord: Emily) 02/20/2022 10:09

Checking only `Can't use from top`, I can use it except from the top
Adding `Can't use from left` disables just the left

=== @ Orithan 02/20/2022 10:10

Something else is going on

=== @EmilyV99 (discord: Emily) 02/20/2022 10:10

...and then adding `Can't use from right` disables just the right.
so, can't recreate any mechanical issue
What is `Button` attribute set to?
And what is `String` attribute set to?

=== @ Orithan 02/20/2022 10:12

Button is set to 1
String is set to 1

=== @EmilyV99 (discord: Emily) 02/20/2022 10:12

and you're using `A` to try to read it, I presume?

=== @ Orithan 02/20/2022 10:12

Yes

=== @EmilyV99 (discord: Emily) 02/20/2022 10:12

that's literally exactly what I just set up
and it works fine
Compat QRs?
I wouldn't think any should affect this

=== @ Orithan 02/20/2022 10:13

Other signposts I have are working

=== @EmilyV99 (discord: Emily) 02/20/2022 10:13

hmm
Any scripts running on the screen?
Is large link hitbox enabled/disabled?

=== @ Orithan 02/20/2022 10:14

Disabled

=== @EmilyV99 (discord: Emily) 02/20/2022 10:14

hmm
is the combo accidentally cycling to something else
that looks the same
but isn't a sign?
(at the point of stupid ideas)

=== @ Orithan 02/20/2022 10:14

Is not cycling

=== @EmilyV99 (discord: Emily) 02/20/2022 10:15

If you set your ruleset to `Modern`, does it start working?

=== @ Orithan 02/20/2022 10:16

No

=== @EmilyV99 (discord: Emily) 02/20/2022 10:18

I, uh
have no idea
no problem on my end, so I can't exactly debug it
Is a message already on screen, or is `Hero->Z > 0`?
Are there bridge combos at all involved?

=== @ Orithan 02/20/2022 10:20

No
If I copy the data from a signpost combo that worked, it actually works

=== @EmilyV99 (discord: Emily) 02/20/2022 10:20

. . . wHAT
Screenshot every tab of your nonworking combo for me, if you could?
because that indicates that you've definitely done SOMETHING wrong in setting it up
but your attributes sound fine

=== @ Orithan 02/20/2022 10:31


![image](https://cdn.discordapp.com/attachments/944896850589278258/944904014007525456/Untitled.png)

=== @EmilyV99 (discord: Emily) 02/20/2022 10:31

ah
that'd do it
the green effect square is completely empty on the first tab

=== @ Orithan 02/20/2022 10:32

...

=== @EmilyV99 (discord: Emily) 02/20/2022 10:32

so, all 4 corners of the combo are acting as `(None)` type

=== @ Orithan 02/20/2022 10:32

That didn't cause issues when I first made the combo

=== @EmilyV99 (discord: Emily) 02/20/2022 10:32

That certainly should have
any area that is not green acts as `(None)` instead of the combos type
been like that for, like, gotta be at least a year by now?

=== @ Orithan 02/20/2022 10:34

It was working when I first worked on the quest.

=== @EmilyV99 (discord: Emily) 02/20/2022 10:35

Did you set the green square off accidentally at some point after?
Also, what's the state of `Quest->Compat->4->Old Bridge Combo Behavior`?
that fucks with green square stuff, though I wouldn't expect it to make a difference without bridge combos involved...

=== @ Orithan 02/20/2022 10:36

It's turned on

=== @EmilyV99 (discord: Emily) 02/20/2022 10:43

Same as mine
So,  <:nkoShrug:585925548245647420>
It working with the green square OFF would definitely be a bug
As is the help text being fucked up, but that was an easy fix at least

=== @ Orithan 02/20/2022 11:22

Effect squares turned on, same result

=== @EmilyV99 (discord: Emily) 02/20/2022 11:22

??
Immediate question, reload the quest in ZQ; did the effect square uncheck itself?

=== @ Orithan 02/20/2022 11:29

Nope

=== @EmilyV99 (discord: Emily) 02/20/2022 11:31

what the fuck
what you have screenshotted
plus green square
should display string 41
from any side
on pressing A

=== @ Orithan 02/20/2022 11:35

The only way I can explain this is if there is random data corruption

=== @EmilyV99 (discord: Emily) 02/20/2022 11:36

I would immediately be very scared that it's the string stuff
but that isn't posted anywhere yet

=== @ Orithan 02/20/2022 11:36

This was before the string stuff was a thing

=== @EmilyV99 (discord: Emily) 02/20/2022 11:36

exactly

=== @ Orithan 02/20/2022 11:36

I was having this issue in a100

=== @EmilyV99 (discord: Emily) 02/20/2022 11:36

and I have no clue what else would have done data corruption

=== @ Orithan 02/20/2022 11:41

I'll send you the file

=== @ Orithan 02/20/2022 11:57

I reverted to an earlier QB and it somehow now all worked
Some spooky gremlins were at work

=== @EmilyV99 (discord: Emily) 02/20/2022 12:04

(meta) thread name was changed: ‚ùìüîíSignposts don't work with Cant Use from X Side Flags
## ‚úÖüîíMap exports don't save to the snapshot folder (#1228)
@ Russ opened this issue on 02/20/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/945036344357449768



=== @ Russ 02/20/2022 19:17

They still are dumped straight into the main folder, where screenshots used to go

=== @EmilyV99 (discord: Emily) 02/21/2022 13:52

ah crap
knew I'd have missed something

=== @EmilyV99 (discord: Emily) 02/21/2022 14:07


![image](https://cdn.discordapp.com/attachments/945036344357449768/945320943415328828/unknown.png)
yeeeep

=== @EmilyV99 (discord: Emily) 02/21/2022 14:09


![image](https://cdn.discordapp.com/attachments/945036344357449768/945321213423657030/unknown.png)
should be fixed for next build

=== @EmilyV99 (discord: Emily) 02/21/2022 14:10

(meta) thread name was changed: ‚úÖüîíMap exports don't save to the snapshot folder
## ‚úÖüîíbinary formatting alternative (#1229)
@ Mani Kanina opened this issue on 02/21/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/945135735592329256



=== @ Mani Kanina 02/21/2022 01:51

Adding extra formatting options for zscript to read values as binary
Basically, adding
```0b```
to go with the hexadecimal formatting of
```0x```
Similar for Octs could also be good?
so
```0b100```
would compile as binary 4, or whatnot.

=== @EmilyV99 (discord: Emily) 02/21/2022 13:52

interestingly, `0b` is what C++ uses
not sure why ZC didn't follow that
should be doable, but, probably gonna wait until I'm done with all the current string editor shite

=== @ Mani Kanina 02/21/2022 14:12

that's fine
it's not exactly a priority
but it did trip me up

=== @EmilyV99 (discord: Emily) 04/24/2022 10:49

should be added
(meta) thread name was changed: ‚úÖüîíbinary formatting alternative

=== @EmilyV99 (discord: Emily) 04/24/2022 10:53

and `0o` prefix for octal as well
## List search by ID (#1230)
@ Moosh opened this issue on 02/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/945440879190093854



=== @ Moosh 02/21/2022 22:04

Currently the search feature in lists works by string comparison. This is handy provided one knows the names of things in the list and the list is actually sorted alphabetically. At some point the combo flag list changed from numerical listing to alphabetical. Handy for new users maybe, but I know a lot of these flags by their numbers first. And there's a somewhat different issue with the item, enemy, and sprite lists where sometimes I'll forget what I named something, but know the ID

=== @ Moosh 02/21/2022 22:05

So what would be real nice would be if a search starting with 0-9 assumed I'm searching by ID and everytging else used string comparison

=== @EmilyV99 (discord: Emily) 02/21/2022 22:06

Hmm
That should be easy enough

=== @ Moosh 02/21/2022 22:07

Excellent. :D

=== @EmilyV99 (discord: Emily) 02/21/2022 22:08

Everything from me is paused until the new string GUI is done, so might be a week or so until I get around to it

=== @ Moosh 02/21/2022 22:08

Of course, take your time
Thanks for all the work you've been putting into new features, optimizations,  and QoL stuff

=== @ Moosh 02/21/2022 22:11

Also wonder if the inverse of this request might also be possible. If the leading character in the search is a letter, ignore leading IDs. Would allow searching some lists like palettes

=== @EmilyV99 (discord: Emily) 02/21/2022 22:12

Harder
And only works if the list is alphabetized
If it's in numerical order then you'd need to type a lot before it gets you close to the right match
That's why flags were changed

=== @ Moosh 02/21/2022 22:12

Dang. Well at least that one comes up a lot less

=== @ P-Tux7 02/22/2022 01:42

Whoa... the combo flag list is alphabetized? I didn't recall so last I checked a month or two ago

=== @EmilyV99 (discord: Emily) 02/22/2022 01:42

Is it not?
If so it should be

=== @ Moosh 02/22/2022 01:47

Oh it might still be ordered by ID
yeah it is
But it no longer lists the number first, so I can't just type 16 and immediately hop to secret flags or 98 an immediately hop to script ones

=== @ Moosh 02/22/2022 01:49

And that was really the final straw because `General Purpose 1 (Scripts)` is kinda an awkward name to adapt to

=== @EmilyV99 (discord: Emily) 02/22/2022 01:50

Oh god ü§¢
Something else to add to the pile

=== @ Moosh 02/22/2022 01:50

...or maybe it was always called that
I've always just called it Script 1

=== @EmilyV99 (discord: Emily) 02/22/2022 01:51

The constant in std
Is `CT_SCRIPT1`
But that's always been the editor name

=== @ Moosh 02/22/2022 01:52

Yeah for once the constant is the simpler name.

=== @EmilyV99 (discord: Emily) 04/24/2022 11:57

The ID search thing is still not done, but, flags now should be alphabetized
## ‚úÖüîíAlphabetized Combo Flag List (#1231)
@ P-Tux7 opened this issue on 02/22/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/945575890476224562



=== @ P-Tux7 02/22/2022 07:01

#1230

=== @EmilyV99 (discord: Emily) 04/24/2022 22:50

(meta) thread name was changed: ‚úÖüîíAlphabetized Combo Flag List
## üíäüîì2.55 alpha 103 - overhead combos on spacebar map (#1232)
@ TwilightKnight opened this issue on 02/22/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/945780591364816906



=== @ TwilightKnight 02/22/2022 20:34

Overhead combos on layer 0 appear under layer 1 on the spacebar map.

=== @EmilyV99 (discord: Emily) 02/22/2022 21:07

oh for fucks
blleeeehg

=== @ TwilightKnight 02/25/2022 22:14

Hehe, I'm sorry üòù

=== @EmilyV99 (discord: Emily) 02/26/2022 11:50

Should be fixed
THAT was a pain I wasn't expecting

=== @ TwilightKnight 02/26/2022 17:57

Awesome, thanks a lot! I will be sure to check it out with the next build

=== @ TwilightKnight 02/26/2022 18:00

Though looking at the timing I should check it in the forthcoming build, not the ones released yesterday

=== @EmilyV99 (discord: Emily) 03/02/2022 18:05

(meta) thread name was changed: üíäüîì2.55 alpha 103 - overhead combos on spacebar map
## üíäüîì2.55 a103 - enhanced music doesn't play after dying in test mode (#1233)
@ tacochopper opened this issue on 02/23/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/945993708216680519



=== @ tacochopper 02/23/2022 10:41

very, very minor bug. when the player respawns, the dmap's enhanced music doesn't play. however, moving to another dmap resolves this issue, and music plays as normal

=== @ tacochopper 02/23/2022 10:46

(meta) thread name was changed: 2.55 a103 - enhanced music doesn't play after dying in test mode

=== @EmilyV99 (discord: Emily) 02/23/2022 14:35

...oddd

=== @ tacochopper 02/23/2022 21:45

haven‚Äôt tested it with midis so I‚Äôm unsure if they‚Äôre affected

=== @EmilyV99 (discord: Emily) 02/26/2022 01:32

I see what's wrong... bleh
I'm a dumbass
this is definitely test-mode specific.

=== @EmilyV99 (discord: Emily) 02/26/2022 01:34


https://cdn.discordapp.com/attachments/945993708216680519/946943166953689088/zelda.exe
https://cdn.discordapp.com/attachments/945993708216680519/946943167549308938/zquest.exe
should fix
(meta) thread name was changed: üíäüîì2.55 a103 - enhanced music doesn't play after dying in test mode
## ‚úÖüîíMake combo alias Org Source field default to the current alias (#1234)
@ Moosh opened this issue on 02/23/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946020597136253008



=== @ Moosh 02/23/2022 12:28

Last time I messed with this garbage I made a rather unreasonable request but looking at it again I notice something simple I don't think I pointed out before. Every time you use the organize menu, it defaults the source and dest to 0 and 0. For dest there's not much can be done, the editor isn't a mind reader. But for the source in nearly every instance you'd want to use this menu, it's just the currently selected alias. Like I dunno why source is even a field, it makes you do this one alias at a time and type in the ID every time. ü§¶

=== @ Tsunami Tommy Reload the Shotty 02/23/2022 14:02

It's true.  This would be Christmas in a can right here. 

Heck, even a button that would fill the Destination field with the next Alias would be fun,  or a button to fill the one four slots down for a vertical destination.

=== @EmilyV99 (discord: Emily) 02/26/2022 11:26


![image](https://cdn.discordapp.com/attachments/946020597136253008/947092145968386119/unknown.png)
fills both in with the current value

![image](https://cdn.discordapp.com/attachments/946020597136253008/947092218299166750/unknown.png)
gives that unless you change one, obviously
(meta) thread name was changed: ‚úÖüîíMake combo alias Org Source field default to the current alias
## QR - Solid combos Telefrag Enemies (#1235)
@ Alucard648 opened this issue on 02/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946183224151932988



=== @ Alucard648 02/23/2022 23:14

For instance, if non-solid combo underneath enemy changes into a solid combo, the enemy is insta-killed, like switch blocks in Mario Maker 2 and dwarven bridge in Dwarf Fortress. And specific enemies that can move through solid combos are immune to it.

=== @EmilyV99 (discord: Emily) 02/24/2022 01:03

This would take quite a bit of coding, and would likely be related to solid ffc stuff (i.e. crushing/pushing for moving ffcs)
So, good idea, but don't expect soon
@arceusplayer11 (discord: Deedee)

=== @ TwilightKnight 02/25/2022 22:21

You might be able to accomplish this with a script and inherit combo flags

=== @EmilyV99 (discord: Emily) 02/25/2022 22:22

I mean

=== @ TwilightKnight 02/25/2022 22:24

It could even be a combo script üòé

=== @EmilyV99 (discord: Emily) 02/25/2022 22:24

```cpp
npc script telefrag
{
    void run()
    {
        while(true)
        {
            if(Screen->isSolid(this->X+8,this->Y+8))
                this->HP = 0;
            Waitframe();
        }
    }
}```
You'd just do that a an npc script

=== @ TwilightKnight 02/25/2022 22:24

üöÄ

=== @EmilyV99 (discord: Emily) 02/25/2022 22:25

You'd probably want to account for offsets and size stuff
But, on mobile, so fuck that right now

=== @ TwilightKnight 02/25/2022 22:26

Pro mobile coding right here
## üíäüîìmore weird test-only bugs (#1236)
@ tacochopper opened this issue on 02/24/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/946212531595251732



=== @ tacochopper 02/24/2022 01:10

noticed both of these last night - same build as the music bug (2.55 a103)
first one is the link holding item sprite.
second is that link can't walk out of the room after entering it. i've tried to replicate these in a normal instance of ZC, but they only seem to happen in test mode.

![image](https://cdn.discordapp.com/attachments/946212531595251732/946212614680231966/zelda_mYfjAzIZB6.png)

![image](https://cdn.discordapp.com/attachments/946212531595251732/946212632589893662/zelda_eDxwU5VD9J.gif)
unlike the previous link holding an item bug, the sprites are unchanged in ZQ:
![image](https://cdn.discordapp.com/attachments/946212531595251732/946212724248039464/zquest_U2ejoouHYH.png)

=== @EmilyV99 (discord: Emily) 02/24/2022 01:15

???
Test mode only skips the damn file select
it shouldn't affect anything else
the music on respawn touches code in the same area as the code to return to file select and such
so that one at least makes some sense
but.... hold sprites, and not being able to walk out of a room??

=== @ tacochopper 02/24/2022 01:17

i did notice the invisible wall thing last week too, but it isn't occurring in the same places anymore. updated to this new build yesterday

=== @EmilyV99 (discord: Emily) 02/24/2022 01:17

@arceusplayer11 (discord: Deedee)

=== @ tacochopper 02/24/2022 01:17

i'd thought it was something to do with FFCs at first cos it was happening in rooms where i'd had moosh's GB shutters

=== @ tacochopper 02/24/2022 02:01

well
i stand corrected about the item hold bug being just test mode

![image](https://cdn.discordapp.com/attachments/946212531595251732/946225269583249459/zelda_loGFV1dIap.png)
could this be an LTM thing on my end?

=== @EmilyV99 (discord: Emily) 02/24/2022 02:02

uhh
it could be
though we were having some issues with that sprite recently, so could be something else
but I'd double check your ltms

=== @ tacochopper 02/24/2022 02:02

yeah, it was fine until i updated
hmmm

=== @ tacochopper 02/24/2022 02:04

looks all ok to me

=== @EmilyV99 (discord: Emily) 02/24/2022 02:06

what version did you update from?

=== @ tacochopper 02/24/2022 02:06

only looks like it's doing it to the two hands hold
uhhh relatively recent, i think like 102

=== @EmilyV99 (discord: Emily) 02/24/2022 02:06

hmm
we've been having these issues longer than that
also, is it only broken in ZC, or is it un-setting the tile in ZQ?

=== @ tacochopper 02/24/2022 02:06

i also haven't been using zc that much the past month or so
only zc, it isn't un-setting the tile like that old bug

=== @EmilyV99 (discord: Emily) 02/24/2022 02:06

ok
<:nekoshrug:869489800271503400>
this is weird

=== @ tacochopper 02/24/2022 02:07

the old bug would reset it to the heart + x sprites too iirc right

=== @ tacochopper 02/24/2022 02:10

just for reference for one hand
![image](https://cdn.discordapp.com/attachments/946212531595251732/946227464139591690/zelda_0sMP0Xazbk.png)

=== @ tacochopper 02/25/2022 14:35

happening again lol
![image](https://cdn.discordapp.com/attachments/946212531595251732/946777421661736980/zelda_CFY2ZrS1tg.gif)

=== @EmilyV99 (discord: Emily) 02/26/2022 01:13

...are you on the right dmap?
@ tacochopper

=== @EmilyV99 (discord: Emily) 02/26/2022 01:14

that feels to me like something that would happen due to an improper dmap offset
i.e. you're trying to walk off the edge of the dmap, so it becomes a wall

=== @ tacochopper 02/26/2022 01:34

actually, could be dmap 2
uh
the b-2 dmap

=== @EmilyV99 (discord: Emily) 02/26/2022 01:34

(replying to @ tacochopper ""): if you could split this into a separate report, that'd be good, since it isn't test-related

=== @ tacochopper 02/26/2022 01:34

oh that was test related
but i'll split it if you want

=== @EmilyV99 (discord: Emily) 02/26/2022 01:35

did you actually look at what I replied to?

=== @ tacochopper 02/26/2022 01:35

oh no lol sorry

=== @EmilyV99 (discord: Emily) 02/26/2022 01:35

lol

=== @ tacochopper 02/26/2022 01:35

speed reading and not checking properly oops
30 years of SHIT habits I tell you

=== @EmilyV99 (discord: Emily) 02/26/2022 01:36

As for the screen thing, make sure you're on the right dmap and see if it still happens
because that's exactly what dmap shenanigans would cause

=== @arceusplayer11 (discord: Deedee) 02/26/2022 07:11

(replying to @ tacochopper ""): @EmilyV99 (discord: EmilyV) I think they said this specific instance happens in test mode, but not ZQ
which is important cause they go into a cave, which would change the dmap and thus set it's offsets

=== @EmilyV99 (discord: Emily) 02/26/2022 11:30

@ tacochopper test again with the build in #1233
see if that fix magically fixes this too

=== @EmilyV99 (discord: Emily) 03/02/2022 18:06

(replying to @ tacochopper ""): might have a fix for this?
And at that, a fix coded by neither myself nor deedee

=== @EmilyV99 (discord: Emily) 03/02/2022 19:04

@ tacochopper
https://cdn.discordapp.com/attachments/946212531595251732/948657129215127642/buildpack.zip

=== @EmilyV99 (discord: Emily) 03/19/2022 04:52

(meta) thread name was changed: üíäüîìmore weird test-only bugs
## Use Green Arrival Square For Test Mode Editor Checkbox (#1237)
@ bigjoe opened this issue on 02/24/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946271989763559455



=== @ bigjoe 02/24/2022 05:07

Hey, since its deprecated but its still there, why not repurpose it?

=== @ bigjoe 02/24/2022 11:27

or maybe instead a dropdown in the test menu that says "Arrival, Warp A, Warp B, Warp C, and Warp D. Depending on what you select thats where you start when testing.

=== @EmilyV99 (discord: Emily) 02/26/2022 11:27

So I mean
you'd need to reset it every time you opened the test window, as it wouldn't be able to auto-populate it smartly
so I'm not really sure how useful this would be
## Item Class - Enemy Spawner (#1238)
@ P-Tux7 opened this issue on 02/24/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946278265801310229



=== @ P-Tux7 02/24/2022 05:31

A simple item class that's meant for bush and grass dropsets a la LTTP so that you can randomly have enemies drop from these combos.

This class instantly spawns an NPC and kills itself off; it cannot be physically collected via touch or weapon, and giving it to the player via SCC or script does nothing without scripts except for SCCs that check to see if you own it, as with all items.

Attributes:
-Enemy ID(s?)
-Spawn Type (instant, puff, Armos/Ghini [Blink])
## ‚úÖüîíCheat menu convenience (#1239)
@ Mani Kanina opened this issue on 02/24/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946429256429367326



=== @ Mani Kanina 02/24/2022 15:31

On the new cheat menu, it would be convenient if a successful cheat was entered, that the selection on the right automatically sets that level.

=== @ Mani Kanina 02/24/2022 15:36

if the typing field was select/in focus as soon as you opened the cheats menu, that would also be swell

=== @EmilyV99 (discord: Emily) 02/26/2022 11:18

Done and done
(meta) thread name was changed: ‚úÖüîíCheat menu convenience
## ‚ùåüîíCheat Modifier Keys are broken (#1240)
@ Orithan opened this issue on 02/24/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/946554336052391946



=== @ Orithan 02/24/2022 23:49

The cheat modifier keys do not function properly. They did not seem to work and, after trying to play around with their bindings, I found a way to hang ZC

=== @ Orithan 02/24/2022 23:51

Alpha 103 Nightly February 18th 2022

=== @ Orithan 02/24/2022 23:52

I cannot unset the secondary cheat modifier keys

=== @ Orithan 02/24/2022 23:54

So it appears you have to hit all Cheat Modifier keys for it to work instead of needing to hit just one side of them like I was able to do before

=== @EmilyV99 (discord: Emily) 02/25/2022 02:58

Screenshot the config?
I know it was bugged before and we fixed something (though that was a while back)
But I also know it's a confusing mess

=== @ Orithan 02/25/2022 03:14


![image](https://cdn.discordapp.com/attachments/946554336052391946/946606053922050059/Untitled.png)

=== @EmilyV99 (discord: Emily) 02/25/2022 03:29

Should be either control + either shift
`Ctrl+Shift+key`

=== @EmilyV99 (discord: Emily) 02/25/2022 03:31

if that works, that's the correct behavior
(replying to @ Orithan "I cannot unset the secondary‚Ä¶"): this I'll look into
(replying to @ Orithan "The cheat modifier keys do no‚Ä¶"): how did you hang ZC?

=== @EmilyV99 (discord: Emily) 02/25/2022 03:33

(replying to @ Orithan "I cannot unset the secondary‚Ä¶"): I have no issue unsetting them

=== @ Orithan 02/25/2022 03:33

(replying to @EmilyV99 (discord: Emily) "how did you hang ZC?"): By changing them repeatedly

=== @EmilyV99 (discord: Emily) 02/25/2022 03:34

....how would that hang?

=== @ Orithan 02/25/2022 03:34

(replying to @EmilyV99 (discord: Emily) "I have no issue unsetting them"): Can you also unset the primary modifier keys

=== @EmilyV99 (discord: Emily) 02/25/2022 03:34

aye
you just click clear
and then press anything but esc

=== @ Orithan 02/25/2022 03:36

I did that a few times

=== @EmilyV99 (discord: Emily) 02/25/2022 03:38

(replying to @ Orithan "Alpha 103 Nightly February 18‚Ä¶"): ...18th?
screenshot the about for me
latest in [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) is 17th

=== @ Orithan 02/25/2022 03:39


![image](https://cdn.discordapp.com/attachments/946554336052391946/946612325174116372/Untitled.png)
Used my time for the date of the alpha

=== @EmilyV99 (discord: Emily) 02/25/2022 03:39

ah

=== @EmilyV99 (discord: Emily) 02/25/2022 03:41

Is it just a visual issue, perhaps?
If you try to clear it, then hit OK and re-open the dialog, is it cleared?
or, even maybe just change tabs back and forth?

=== @EmilyV99 (discord: Emily) 02/25/2022 03:43

If not, you can manually clear them in zc.cfg (while zc isn't running)

=== @EmilyV99 (discord: Emily) 02/25/2022 03:44

I downloaded that nightly again through discord
and, have no issues whatsoever
so shouldn't even be a build error thing
Maybe reboot your pc?
(or reboot zc if you didn't already try that, though, that seems a bit obvious)

=== @ Orithan 02/25/2022 03:54

(replying to @EmilyV99 (discord: Emily) "If you try to clear it, then‚Ä¶"): Once, after assigning buttons
Idk the exact proceedure

=== @EmilyV99 (discord: Emily) 02/26/2022 01:27

No issues replicable. Closing unless further info can be provided.
(meta) thread name was changed: ‚ùåüîíCheat Modifier Keys are broken
## Sprite Data Preview (#1241)
@ Jared opened this issue on 02/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946622084627447818



=== @ Jared 02/25/2022 04:18

Can we please get a preview box for `Sprite Data`? Living without this is annoying lol. Gotta go back into ZC every time to test if it works correctly

=== @ bigjoe 02/25/2022 10:54

I second this suggestion. It is much needed.

=== @ TwilightKnight 02/25/2022 22:20

I'd also like this feature.
A workaround I use is making a combo to test the animation, but it's a hassle

=== @EmilyV99 (discord: Emily) 02/25/2022 22:20

The only thing here is, gotta rewrite that dialog in the new system
But, once that's done, adding a preview is trivial

=== @ TwilightKnight 02/25/2022 22:23

Sweet!

=== @ Jared 02/25/2022 22:28

Oh sweet üôÇ
## üíäüîìBottle Combos don't stay the same when inserting combos (#1242)
@ Jared opened this issue on 02/25/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/946624067077828648



=== @ Jared 02/25/2022 04:26

Not sure if this can be fixed, but when inserting combos, it changes the bottle combos and thus "breaks" the bottle shop items

![image](https://cdn.discordapp.com/attachments/946624067077828648/946624075277697035/unknown.png)

![image](https://cdn.discordapp.com/attachments/946624067077828648/946624119133331497/unknown.png)
Not a huge problem, but was just wondering it could save a headache for someone later

=== @EmilyV99 (discord: Emily) 02/25/2022 05:16

oh fek

=== @ Jared 02/25/2022 05:18

:p
I take it that it can be fixed lol

=== @EmilyV99 (discord: Emily) 02/25/2022 05:23

yeah
not sure how easily though
might be a bit

=== @EmilyV99 (discord: Emily) 02/26/2022 01:23

@ Jared should fix?
https://cdn.discordapp.com/attachments/946624067077828648/946940487644905482/zquest.exe

=== @ Jared 02/26/2022 01:23

You're so quick
I'll try it when I change combos again

=== @EmilyV99 (discord: Emily) 02/26/2022 01:23

```cpp
for(auto q = 0; q < 256; ++q)
{
    for(auto p = 0; p < 3; ++p)
    {
        if(misc.bottle_shop_types[q].comb[p] >= copy && misc.bottle_shop_types[q].comb[p] < copy+copycnt)
            misc.bottle_shop_types[q].comb[p] += tile-copy;
    }
}
```
that's all I had to add

=== @ Jared 02/26/2022 01:23

Nice

=== @EmilyV99 (discord: Emily) 02/26/2022 01:24

```
for(each bottleshop)
  for(each combo in each bottleshop)
    if(combo is in the changed range)
      move combo```
this should affect both `insert` and `move`
(it looks like `insert` just.... calls a giant `move`)

=== @EmilyV99 (discord: Emily) 02/26/2022 01:26

(meta) thread name was changed: üíäüîìBottle Combos don't stay the same when inserting combos
## ‚ùåüîíCombo brush height skips 4 rows (#1243)
@ TwilightKnight opened this issue on 02/25/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/946893886213742643



=== @ TwilightKnight 02/25/2022 22:18

See my screenshots for reference. The combo brush height doesn't work properly
![image](https://cdn.discordapp.com/attachments/946893886213742643/946893888302485554/zquest_screen00001.png)
![image](https://cdn.discordapp.com/attachments/946893886213742643/946893888596111410/zquest_screen00002.png)

=== @EmilyV99 (discord: Emily) 02/25/2022 22:37

uhhhhh
@arceusplayer11 (discord: Deedee) did you touch anything related to this?
Because I don't think I did
OH
Wait
@ TwilightKnight I don't think this is a bug
Open the combo page

![image](https://cdn.discordapp.com/attachments/946893886213742643/946899090766168094/unknown.png)
Press `Space`

![image](https://cdn.discordapp.com/attachments/946893886213742643/946899117794275399/unknown.png)
and it re-organizes the combos to go across the top, instead of in columns
The brush respects how *this* is displaying

![image](https://cdn.discordapp.com/attachments/946893886213742643/946899342483157002/unknown.png)

=== @arceusplayer11 (discord: Deedee) 02/26/2022 07:06

Huh, so it does
You can press space at any time to swap between the two modes
so if it does that, you should hit space and try again cause you're in the wrong mode
a bit confusing and should probably have an indicator that you're in a different mode

=== @ TwilightKnight 02/26/2022 17:56

Yup, you are right. Pressing space fixed it and I indeed notice it coheres with the combo page

Thank you!

=== @EmilyV99 (discord: Emily) 02/26/2022 23:25

(meta) thread name was changed: ‚ùåüîíCombo brush height skips 4 rows
## ‚úÖüîíString Bug? (#1244)
@ Jared opened this issue on 02/25/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/946908380075786270



=== @ Jared 02/25/2022 23:15

I think I found a bug. Supposed to give Link an item. Not sure if it's na error in game, I will try it
![image](https://cdn.discordapp.com/attachments/946908380075786270/946908381556391936/unknown.png)

![image](https://cdn.discordapp.com/attachments/946908380075786270/946908522669551686/unknown.png)

=== @EmilyV99 (discord: Emily) 02/25/2022 23:16

god dammit
I can tell you why it's an `A`, that has ascii code `64`
why the fuck it's doing THAT I have no clue

=== @ Jared 02/25/2022 23:19

üôÉ

=== @EmilyV99 (discord: Emily) 02/25/2022 23:19

it's also changing the color???
GAAAH

=== @ Jared 02/25/2022 23:20

Yes üò¶

=== @EmilyV99 (discord: Emily) 02/25/2022 23:24


![image](https://cdn.discordapp.com/attachments/946908380075786270/946910492566388806/unknown.png)
that's definitely parsing something wrong....

=== @EmilyV99 (discord: Emily) 02/25/2022 23:28

OH
Fuck
blehg

![image](https://cdn.discordapp.com/attachments/946908380075786270/946911885876408340/unknown.png)
fixed

=== @EmilyV99 (discord: Emily) 02/25/2022 23:34

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) @ Jared
What it was doing
well, I had something inside a loop
that was supposed to be AFTER the loop
so when it read `\16`
It was accidentally parsing that as `\1\16`
thus `\16\64` became `\1\16\6\64`
which is `change color to cset 16, color 6` followed by `insert capital A`
cset 16 wrapped to 0, it seems, as that yellow is cs0 color 6
(meta) thread name was changed: ‚úÖüîíString Bug?
## ‚úÖüîíSoliditiy button (#1245)
@ Jared opened this issue on 02/26/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946927434199081020



=== @ Jared 02/26/2022 00:31

Is it possible to get a button that solidifies an entire combo, and when you press it again it unsolidifies the whole thing?

=== @ Tsunami Tommy Reload the Shotty 02/26/2022 00:43

I wonder if it would be as simple as shift-clicking  the solidity / effect square it to either fill or empty the entire square.

=== @ Jared 02/26/2022 00:47

That could work too!

=== @ Jared 02/26/2022 00:50

Love that typo in the title. ü§¶

=== @EmilyV99 (discord: Emily) 02/26/2022 00:53

(replying to @ Jared "Is it possible to get a butto‚Ä¶"): This would be a no, just because of gui clutter....
(replying to @ Tsunami Tommy Reload the Shotty "I wonder if it would be as si‚Ä¶"): ....but this would work.

=== @ Jared 02/26/2022 00:54

üòÆ

=== @EmilyV99 (discord: Emily) 02/26/2022 01:07

So, `Shift+Click` on a corner will set the entire square to the OPPOSITE of the corner you clicked
(so, it toggles it, then sets everything to the new value)
but `Ctrl+Click` will just toggle all 4 corners (inverting)

=== @ Tsunami Tommy Reload the Shotty 02/26/2022 01:09

That's amazing.  The perfect solution.  Thanks! ‚ù§Ô∏è

=== @EmilyV99 (discord: Emily) 02/26/2022 01:09


https://cdn.discordapp.com/attachments/946927434199081020/946936942224896050/zelda.exe
https://cdn.discordapp.com/attachments/946927434199081020/946936942866599946/zquest.exe

=== @ Tsunami Tommy Reload the Shotty 02/26/2022 01:09

Geezus that was quick.  You rock.  o.o

=== @EmilyV99 (discord: Emily) 02/26/2022 01:10

It checks for shift/ctrl when you press *down* the mouse
even though it waits for you to release to toggle

=== @ Tsunami Tommy Reload the Shotty 02/26/2022 01:16

It's flawless.  <:NPCNurseThumbsUp:573570441697034281>  Works great on all the squares.  Thanks!

=== @EmilyV99 (discord: Emily) 02/26/2022 01:16

(meta) thread name was changed: ‚úÖüîíSoliditiy button

=== @ Jared 02/26/2022 01:20

Wow
## üíäüîìKeybind Screen Issue (#1246)
@ Jared opened this issue on 02/26/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/946928417981485096



=== @ Jared 02/26/2022 00:35

For some reason, at random times the keybind screen doesn't work with the mouse buttons. You can "fix" it by moving with the arrow keys.
![image](https://cdn.discordapp.com/attachments/946928417981485096/946928419357212693/unknown.png)

=== @EmilyV99 (discord: Emily) 02/26/2022 00:52

?

=== @EmilyV99 (discord: Emily) 02/26/2022 00:54

hmm

=== @EmilyV99 (discord: Emily) 02/26/2022 01:05

k, I see what's wrong
calling the screen update function only actually updates the screen 60 times a second, no matter how often it's called
but, that's not a LOOP
it calls it once, then hangs until you press a key
so if that call doesn't hit the 60/th of a second, it doesn't draw the prompt to press any key to the screen
need to add a way to FORCE update regardless of the vsync

=== @EmilyV99 (discord: Emily) 02/26/2022 01:09


https://cdn.discordapp.com/attachments/946928417981485096/946936902685163520/zelda.exe
https://cdn.discordapp.com/attachments/946928417981485096/946936903251402852/zquest.exe
should fix

=== @EmilyV99 (discord: Emily) 02/26/2022 01:10

(meta) thread name was changed: üíäüîìKeybind Screen Issue
## Way to remove the -2 Pixel Y offset on sprites. (#1247)
@ Orithan opened this issue on 02/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/946993716072153128



=== @ Orithan 02/26/2022 04:54

Most sprites, including enemies, have an innate -2 Y offset, which throws things off when scripting. Can we have a way to remove that?

=== @ Moosh 02/26/2022 05:40

I think there's already a rule for this. It's just named something goofy like BS Animation or something

=== @ Orithan 02/26/2022 06:25

Huh?
I did not know this

=== @arceusplayer11 (discord: Deedee) 02/26/2022 07:14

Yeah, BS Animation Quirks
first rule in the animations tab

=== @ Orithan 02/26/2022 12:22

I take it this is not in 2.53

=== @ Moosh 02/26/2022 12:37

It had a different name in 2.53. BS-Zelda Animation

=== @arceusplayer11 (discord: Deedee) 02/26/2022 12:49

Still first rule of the animations tab

=== @ Orithan 02/26/2022 22:17

(replying to @ Moosh "It had a different name in 2.‚Ä¶"): That doesn't remove it

=== @arceusplayer11 (discord: Deedee) 02/26/2022 22:29

no, having it checked causes it
unchecking it removes it but causes other jank to happen

=== @ Orithan 02/26/2022 22:51

Unchecked it. It still persisted

=== @arceusplayer11 (discord: Deedee) 02/26/2022 22:54

Okay, is this offset applying to Link, and are you in a dungeon?

=== @ Orithan 02/27/2022 00:36

No and in Interior

=== @arceusplayer11 (discord: Deedee) 02/27/2022 11:40

weird.
## Blanked Quest (#1248)
@ bigjoe opened this issue on 02/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/947030717882306561



=== @ bigjoe 02/26/2022 07:21

A way to start with an entirely blanked quest. For Ultimate purists. Everything is blank down to the bone.

=== @ P-Tux7 02/26/2022 08:11

You really don't want to... It's an absolute pain in the ass to test it without placeholder sprites or knowing what sound isn't playing/what tile is missing

=== @ P-Tux7 02/26/2022 08:13

Let me put it this way; I've been one of the biggest, loudest proponents of non-ripped-asset quests in ZC history, am currently making one, and there is no way in hell I wouldn't at least use the default tileset as structural support.

=== @ vlamart 02/26/2022 18:29

@ bigjoe
https://cdn.discordapp.com/attachments/947030717882306561/947198680212078663/blank.qst
## ‚ùåüîíMouse Over X and Y in String Preview (#1249)
@ bigjoe opened this issue on 02/26/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/947073473942028298



=== @ bigjoe 02/26/2022 10:11

Really , Really needed for making menus!!

=== @EmilyV99 (discord: Emily) 02/26/2022 10:16

?

=== @EmilyV99 (discord: Emily) 02/26/2022 10:17

@ bigjoe the title does not give anywhere near enough detail for me to understand what you want

=== @ bigjoe 02/26/2022 10:19

I apologize. The request is so that, when you mouse over the string menu, it displays the x and y of that mouse position, in order to make setting up menus with SCCs easier
i mean
the string preview
not the menu

=== @EmilyV99 (discord: Emily) 02/26/2022 10:19

... how would that help with menus?

=== @ bigjoe 02/26/2022 10:21

I guess it should say the 'position' then

=== @EmilyV99 (discord: Emily) 02/26/2022 10:21

?

=== @ bigjoe 02/26/2022 10:21

whatever position your mouse is hovering over should be displayed below the preview somewhere

=== @EmilyV99 (discord: Emily) 02/26/2022 10:22

.... 'position' has NOTHING to do with x/y

=== @ bigjoe 02/26/2022 10:22

yeah, i misread the string control code text file earlier
i thought it wanted an x and y position, my bad

=== @EmilyV99 (discord: Emily) 02/26/2022 10:22

It works the same way position works on the engine subscreen

=== @ bigjoe 02/26/2022 10:23

like say you wanted to know what that boxes position was... youd have to count up each time, yes?
![image](https://cdn.discordapp.com/attachments/947073473942028298/947076495979974706/unknown.png)
oh
i see now
apologies
it works as though

=== @EmilyV99 (discord: Emily) 02/26/2022 10:24

You'd use 0 for the first choice
Then 1 for the second choice
Or 1 first 2 second, it doesn't actually matter

=== @EmilyV99 (discord: Emily) 02/26/2022 10:26

(Realistically, you could use 42 first and 69 second, it's entirely arbitrary)

=== @EmilyV99 (discord: Emily) 02/26/2022 10:27

So, if you wanted up/down to swap between the 2 choices, and left/ right to do nothing
You'd use `\129\0\1\1\0\0` and `\129\1\0\0\1\1`
Placed where,  *in the string*, you want them to appear
Be sure to do the `\128` code with whatever args you want *before* the `\129`s
And, it should show the menu cursor in the preview window

=== @EmilyV99 (discord: Emily) 02/26/2022 10:30

Let me know if you need any help

=== @EmilyV99 (discord: Emily) 02/26/2022 10:48


![image](https://cdn.discordapp.com/attachments/947073473942028298/947082586503663626/unknown.png)
here's a simple example
the menu cursor here is tile `52000` in cset `0`
if you select `yes`, it goes to string `3`, selecting `no` goes to string `4`
so
`\128\52000\0\6\6\0` = `Set the menu cursor to tile 52000, cset 0, 6x6 pixels, not flipped`
`\25` = `line break`
`\129\0\1\1\0\0` = `This is cursor position 0. Pressing Up or Down goes to position 1. Pressing Left or Right goes to... position 0, which is this position, so they do nothing.`
`\129\1\0\0\1\1` = ...same as above, but flip the 0s and 1s
`\130` = `make the player choose`
`\131\0\3` = `if position 0 was chose, goto string 3`
`\131\1\4` = `if position 1 was chose, goto string 4`

=== @EmilyV99 (discord: Emily) 02/26/2022 10:56

(meta) thread name was changed: ‚ùåüîíMouse Over X and Y in String Preview

![image](https://cdn.discordapp.com/attachments/947073473942028298/947084838765228062/unknown.png)
This on the engine subscreen for item selection
is basically what the `\129` code does
except, if any of the directions is equal to `position`, it does *nothing*
## Pushblock Combo Type (#1250)
@ vlamart opened this issue on 02/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/947166986872422431



=== @ vlamart 02/26/2022 16:23

Might be as crazy and ambitious as Generic, but a general pushblock type that puts all block properties in one place. Such as flags for: wait, heavy (attribute - level), once, 4-way or specific direction (attribute - directions); if it can be pushed into liquid/pits (falling sprite), over liquid/pits (draws undercombo over liquid/pits), or no pushing (this could also be conditions for an "ice block" flag (attribute - accel/step)); use screen undercombo or specific (attribute) undercombo flag, and a block trigger/hole on all layers or same layer flag
Ooooh, if it can hurt enemies too!

=== @ vlamart 02/26/2022 16:37

If shutter is a state, then a block->state attribute (would be neat for multiple blocks on the same screen open a specific shutter)
## ‚ùåüîíSave game limit increase (#1251)
@ Erdrick opened this issue on 02/27/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/947321103582375996



=== @ Erdrick 02/27/2022 02:35

Is it possible for ZC to have increase how many quests can be played on one save file? I feel 15 is too meager of a limit. Maybe 60 would work?

=== @EmilyV99 (discord: Emily) 02/27/2022 02:38

no
eventually we hope to do away with the shared save file system entirely
so that, like, each save slot, is its' own save file
(meta) thread name was changed: ‚ùåüîíSave game limit increase
## Tall Grass & Shallow Water Per-Combo Misc. Sprite (#1252)
@ vlamart opened this issue on 02/27/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/947626548012392530



=== @ vlamart 02/27/2022 22:49

Add tall grass and shallow water sprites to either Misc. Sprites or their respective combos

=== @ vlamart 02/27/2022 22:59

Better idea: move these to a Misc. tab in Player Sprites, a long with the death blink, and if not too much, flash cset options such as what/how many csets to cycle through, or null them out if you set a flash flag to blink

=== @ 4matsy 02/27/2022 23:03

...I thought tall grass and shallow water were *already in* Misc. Sprites. When were they removed? o_O

=== @ 4matsy 02/27/2022 23:04

(Said graphics for said sprites are still in the default tileset on page 101, btw.)

=== @ P-Tux7 02/28/2022 01:47

Yeah they should be labelled MISC: blablabla

=== @ vlamart 02/28/2022 03:09

It's not in Quest->Graphics->Sprites->Misc Sprites to assign it, but at least you can edit Sprite 55 and 56

=== @ P-Tux7 03/03/2022 01:20

(meta) thread name was changed: Tall GrassShallow Water Per-Combo Misc. Sprite
(meta) thread name was changed: Tall Grass & Shallow Water Per-Combo Misc. Sprite
renamed for better explanation, especially now that the original misconception of thinking they had no misc. sprites at all is resolved

=== @ vlamart 03/06/2022 05:19

If per combo, would be neat to also have a "match cset" flag to force the sprite cset to match the combo placed's cset
## ‚úÖüîíPlayer Data cheat rounding Link's health down (#1253)
@ Moosh opened this issue on 02/28/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/947828610608291870



=== @ Moosh 02/28/2022 12:12

If you drop yourself to <1 heart and open the Player Data cheat menu, it just kills you. ü§£

=== @EmilyV99 (discord: Emily) 03/15/2022 10:19

...welp
setting your health in that menu now gives a min of 1 heart

=== @EmilyV99 (discord: Emily) 03/15/2022 10:25

(meta) thread name was changed: ‚úÖüîíPlayer Data cheat rounding Link's health down
## Player SFX for spin attack, hurt, drowning and falling (#1254)
@ Jared opened this issue on 03/01/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/948361857062805525



=== @ Jared 03/01/2022 23:31

Right in the title. Similar to the hurt SFX script in the database, but also for other player actions. I can see many others using this feature if it's made!

=== @ P-Tux7 03/02/2022 00:11

this
#deleted-channel
wait, is the spin attack sound not in the item itself?
that would be more logical
a la the swords
i might as well request item flags for them then, they don't have much else to use them for

=== @ P-Tux7 03/02/2022 00:18

also hrm i think drowning sound should be a liquid attribute (i.e. water vs. lava). i'll check to see if we have any to spare

=== @ Jared 03/02/2022 00:22

I agree!!

=== @ Jared 03/06/2022 22:28

@EmilyV99 (discord: EmilyV) have you seen this yet?

=== @arceusplayer11 (discord: Deedee) 03/08/2022 00:54

ability to customize player sounds?

=== @EmilyV99 (discord: Emily) 03/08/2022 00:55

it would be a single sound for each action
so @ Jared if you were thinking of the like, varied hurt sounds thing, then no
...but adding a single sound for the actions would allow scripts to do that type of thing
My question is, what does the SFX field on the spin scroll do, if anything?

=== @ Jared 03/08/2022 00:56

You know, I haven't actually tried

=== @EmilyV99 (discord: Emily) 03/08/2022 00:56

because, that's where I'd expect to set a sound for the spin attack
with a potential separate one for a hurricane spin

=== @ Jared 03/08/2022 00:57

It has a spin sound sfx

![image](https://cdn.discordapp.com/attachments/948361857062805525/950557787862233129/unknown.png)

=== @ P-Tux7 03/08/2022 00:57

oughta do it then

=== @EmilyV99 (discord: Emily) 03/08/2022 00:57

that should be all you need then

=== @ Jared 03/08/2022 00:57

Too bad the spin sfx's are broken on the noproblo website

=== @EmilyV99 (discord: Emily) 03/08/2022 00:58


![image](https://cdn.discordapp.com/attachments/948361857062805525/950558133103763496/unknown.png)
pits have a fall sfx
...though, I don't see a drown sfx on water @arceusplayer11 (discord: Deedee) ?

=== @ Jared 03/08/2022 00:58

Is that for enemies AND Link tho?

=== @EmilyV99 (discord: Emily) 03/08/2022 00:59

yes, though we intended to add a separate one for enemies
I think

=== @ Jared 03/08/2022 00:59

I wanted ones for Link and a separate one for enemies in general
We don't need Link shouting every time an enemy falls in a hole lol

=== @EmilyV99 (discord: Emily) 03/08/2022 00:59

hmm, but that one is also items
so
yeah
having one for each enemy customizable
and one for link
would be smart
and if the link/enemy one is set to 0, use the one on the combo instead

=== @arceusplayer11 (discord: Deedee) 03/08/2022 01:00

(replying to @EmilyV99 (discord: Emily) "...though, I don't see a drow‚Ä¶"): Should be combo attributes for liquid?
I *know* it's a thing

=== @EmilyV99 (discord: Emily) 03/08/2022 01:00

it has an sfx for the hp mod
from like, healing/damaging liquid

=== @ Jared 03/08/2022 01:00

Only attribute is drown damage

=== @EmilyV99 (discord: Emily) 03/08/2022 01:00

but not one for drowning
(replying to @ Jared "Only attribute is drown damage"): flags change attributes
based on what flags are checked

=== @ Jared 03/08/2022 01:01

???

=== @EmilyV99 (discord: Emily) 03/08/2022 01:01


![image](https://cdn.discordapp.com/attachments/948361857062805525/950558840825454673/unknown.png)

![image](https://cdn.discordapp.com/attachments/948361857062805525/950558864284188772/unknown.png)

![image](https://cdn.discordapp.com/attachments/948361857062805525/950558883733200896/unknown.png)

=== @ Jared 03/08/2022 01:01

Ohhhh

=== @EmilyV99 (discord: Emily) 03/08/2022 01:01

the only attribute is most certainly not drown damage
but, that sfx there is for the `Modify HP (Passive)` effect
not for drowning

=== @ Jared 03/08/2022 01:02

was looking at this lol
![image](https://cdn.discordapp.com/attachments/948361857062805525/950559081528168569/unknown.png)

=== @EmilyV99 (discord: Emily) 03/08/2022 01:02

yeah, gotta look at all the flags and stuff to actually see everything
some attributes will have different names depending on what flags are set, because they do different things

=== @EmilyV99 (discord: Emily) 03/08/2022 01:04

...though I can't actually find a good example of one that doesn't just swap between named and blank
might not actually have any right now?
but, in theory, we can

=== @arceusplayer11 (discord: Deedee) 03/08/2022 01:04

uhhh
Does Link even have a drowning sfx?

=== @ Jared 03/08/2022 01:04

Nope

=== @EmilyV99 (discord: Emily) 03/08/2022 01:05

...oh
fun
so, default value is 0
makes it much easier, frankly
no need to attach a flag to it
can just be an attribyte directly

=== @EmilyV99 (discord: Emily) 03/08/2022 01:06

@arceusplayer11 (discord: Deedee) you should be able to add any global sounds for link here

![image](https://cdn.discordapp.com/attachments/948361857062805525/950560137913958420/unknown.png)
which, should be extremely easy to expand
the gui side works just like adding QRs
auto-formatted, auto-new-tabs, etc

=== @ Jared 03/08/2022 01:09

Oh cool!

=== @ Jared 03/08/2022 01:13

That's one thing out of the way. Now I just need a script/scripts for three random sfx of spin attack and hurt sounds

=== @ P-Tux7 03/08/2022 01:48

yeah um
#deleted-channel
check pins for all we need
also, "error"?

=== @EmilyV99 (discord: Emily) 03/08/2022 01:50

(replying to @ P-Tux7 "also, "error"?"): Try the ? Buttons

=== @ P-Tux7 03/08/2022 01:50

oh right
btw grass slash and pound pounded definitely sound like they need to be transferred to said combos

=== @EmilyV99 (discord: Emily) 03/08/2022 01:51

Why don't you look at said combos before saying that

=== @ P-Tux7 03/08/2022 01:54

because i have a migraine and am going to bed at 8 PM and i don't want to get light blasted by my laptop screen right now

=== @EmilyV99 (discord: Emily) 03/08/2022 01:54

Fair
(It already is, at least on bushes; idr if pound does)
## Items shown on passive subscreen maker (#1255)
@ Jared opened this issue on 03/01/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/948362366163247145



=== @ Jared 03/01/2022 23:33

For some reason, it's showing din's fire on the B button, and custom item (the lift sprite) on my Y button. If I play with the din's fire sprite, it changes to whatever I pick. Idk why it's showing it
![image](https://cdn.discordapp.com/attachments/948362366163247145/948362367828369448/unknown.png)

![image](https://cdn.discordapp.com/attachments/948362366163247145/948362419992948796/unknown.png)

![image](https://cdn.discordapp.com/attachments/948362366163247145/948362670275432478/unknown.png)
(Turns out I don't need the din's fire dummy)
this is all I need
![image](https://cdn.discordapp.com/attachments/948362366163247145/948362855802077214/unknown.png)
And no, Link doesn't start with this item
It does this with the item on and off in init data

=== @EmilyV99 (discord: Emily) 03/15/2022 09:32

I'll need the quest file
## Spin Attack and Hurricane Spin Use SFX flag (#1256)
@ P-Tux7 opened this issue on 03/02/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/948373073634131998



=== @ P-Tux7 03/02/2022 00:16

A flag on these items where, instead of using the current sword sound (or a volley of current sword sounds) when a spin attack or hurricane spin is executed, they use the sound set in the scroll item's itemdata. This does NOT make the hurricane spin play the sound repeatedly, to allow for better customization and coordination to the hurricane spin's user-set length, so users would have to loop it themselves if they desired that.
## ‚úÖüîíTorch Previewing (#1257)
@ Majora opened this issue on 03/02/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/948445288169881670



=== @ Majora 03/02/2022 05:02

So when you press the L key in ZQuest the room goes dark to preview what it would look like. Torch combos should also activate in this preview.

=== @arceusplayer11 (discord: Deedee) 03/08/2022 00:53

@EmilyV99 (discord: EmilyV) feel like doing fancy shit?

=== @EmilyV99 (discord: Emily) 03/08/2022 00:53

it needs to basically just run the new darkroom code there on the qr
but like
only in preview mode

=== @EmilyV99 (discord: Emily) 03/14/2022 05:58

...this
this fucking
oh my
this is going to be a LOT more work than expected
pretty much ALL of the new darkroom code is in ZC-only areas
and won't work in ZQ with a copy-paste

=== @arceusplayer11 (discord: Deedee) 03/14/2022 06:21

ooof v.v

=== @EmilyV99 (discord: Emily) 03/15/2022 04:25

@ Majora
![image](https://cdn.discordapp.com/attachments/948445288169881670/953147026261032990/unknown.png)

=== @ Majora 03/15/2022 04:27

fantastic! sorry it was a lot of work.

=== @EmilyV99 (discord: Emily) 03/15/2022 04:58


![image](https://cdn.discordapp.com/attachments/948445288169881670/953155198149341204/2022-03-15_00-57-32.mp4)

=== @EmilyV99 (discord: Emily) 03/15/2022 05:00

getting that to respect preview mode was an extra step
but that certainly seems to work

=== @EmilyV99 (discord: Emily) 03/15/2022 05:43


![image](https://cdn.discordapp.com/attachments/948445288169881670/953166571847680031/unknown.png)

=== @EmilyV99 (discord: Emily) 03/15/2022 05:50

(meta) thread name was changed: ‚úÖüîíTorch Previewing
## Additional MirrorSpotlight Flags (#1258)
@ vlamart opened this issue on 03/02/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/948723812822822972



=== @ vlamart 03/02/2022 23:29

For the magic mirrors, flags to switch between reflecting one side, the other, or both (no flags, acts as normal, both sides. And combined directions for the spotlight Attribyte[0] (like UD, LR, UL, UR, etc.)

=== @EmilyV99 (discord: Emily) 03/03/2022 00:26

?
Magic mirrors and spotlights don't interact
Or, the combo
Duh

=== @ vlamart 03/03/2022 00:27

I know, I guess I should've split this into two different requests

=== @EmilyV99 (discord: Emily) 03/03/2022 00:27

Umm
So, for spotlights, you can just layer multiple
With different dir

=== @ vlamart 03/03/2022 00:27

Oh dope

=== @EmilyV99 (discord: Emily) 03/03/2022 00:28

They should work on all 7 layers
## ‚úÖüîíTrigger-Next flag (#1259)
@ vlamart opened this issue on 03/03/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/948747308437213234



=== @ vlamart 03/03/2022 01:03

In the Triggers tab of the Combo editor, a "Trigger->Next" flag (at the bottom with the other two trigger flags)

=== @EmilyV99 (discord: Emily) 03/03/2022 01:05

@arceusplayer11 (discord: Deedee)

=== @ vlamart 03/07/2022 15:36

Also maybe a Trigger->Previous flag too (that greys out ->Next so you can't choose both)

=== @EmilyV99 (discord: Emily) 03/10/2022 01:29

(meta) thread name was changed: ‚úÖüîíTrigger-Next flag
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) (has ->Next and ->Prev)
(if both are checked, it just does `->Next`, ignoring `->Prev`)
## Feature to place random combos with the combo brush. (#1260)
@ Tsunami Tommy Reload the Shotty opened this issue on 03/05/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/949757024244219954



=== @ Tsunami Tommy Reload the Shotty 03/05/2022 19:55

EDIT:  Thread name changed in accordance to later discussion tidbits.

This is a completely stupid idea and I have no idea how well it would work within ZQuest.

The concept is, there's a combo type, just like any other, that wouldn't do anything _on its own._  The only thing you can do with it is list as its Attribute 1 and Attribute 2 a beginning and end range of combos, respectively.  That's literally all that you'd do with it.

What that would do is immediately replace the combo you just placed on the map with one of the combos from within the range of that combo's attributes.

This would be used to put down random combos that are just floor decorations.  If you have ten different piles of bones or forest floor leaf arrangements, and don't want to be bothered to have to place them one at a time in random locations, all you'd have to do is define your range as the ten combos of bones or leaves, and just put down that random combo that you made that represents that range of bones over and over and over again all over the screen where you want random leaves or bones.

=== @EmilyV99 (discord: Emily) 03/05/2022 19:59

....then they would change every time you re-enter the screen
that'd look really weird

=== @ Tsunami Tommy Reload the Shotty 03/05/2022 20:01

Well, it would be a ZQuest-internal thing that the combo you put down wouldn't remain there.  It would immediately be replaced by one of the combos in the range that was defined.  You'd never actually see the "Random" combo in-game, or even on the map in ZQuest.

But I don't know if that's even remotely possible in ZQuest, to replace a combo with another.

=== @EmilyV99 (discord: Emily) 03/05/2022 20:01

that isn't how combo types work
if it were a combo type, it gets handled in ZC

=== @ Tsunami Tommy Reload the Shotty 03/05/2022 20:01

I figured.  Thanks anyway!

=== @EmilyV99 (discord: Emily) 03/05/2022 20:01

to add some sort of ZQuest *tool* might be possible
but definitely not a combo type
because like, a script can change a combo's type
so scripts could place them mid-gameplay
and that... obviously wouldn't do what you want

=== @ Tsunami Tommy Reload the Shotty 03/05/2022 20:02

Mm, as long as people are interested in such a tool.   It needn't be a script for anything mid-game.

=== @EmilyV99 (discord: Emily) 03/05/2022 20:03

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 03/05/2022 20:11

something like an alias
basically

=== @ P-Tux7 03/05/2022 20:11

yeah i think a right click to enable random combo mode and also in the right click menu you can enter what range of random combos (contiguous in the combo table) you want would be neato
like if you wanted one of 10 combos
you'd click the first combo
set random combo range to 10
enable random combo mode
and start drawing (using the first combo to draw being the key thing here so zquest knows where you want it to select from)

=== @ Tsunami Tommy Reload the Shotty 03/05/2022 20:12

I can see that being functional in terms of GUI access, yes.
(meta) thread name was changed: Feature to place random combos with the combo brush.

=== @ P-Tux7 03/05/2022 20:13

so you don't have to enter a combo range or anything it just works if you have the table set up right

=== @EmilyV99 (discord: Emily) 03/05/2022 20:14

eh
or it could be a field on aliases
so you can save an alias to be a random range of combos
which would also allow 2x2 and such

=== @arceusplayer11 (discord: Deedee) 03/05/2022 20:29

(replying to @EmilyV99 (discord: Emily) "@arceusplayer11 (discord: Deedee)"): hmmmm
Having it as a combo type *could* work, if it's just "this turns into another combo automatically"
Use a noise pattern combined with X, Y, screen pos, and map number to get a unique pattern per screen that's consistent

=== @EmilyV99 (discord: Emily) 03/05/2022 20:33

Eww
Far more complicated than it needs to be

=== @ P-Tux7 03/05/2022 20:33

yeah yuck no

=== @EmilyV99 (discord: Emily) 03/05/2022 20:33

I think adding it to aliases would be better

=== @ P-Tux7 03/05/2022 20:34

i think it should be baked into the quest file instead of using an algorithm
that way, you can manually tweak it too

=== @EmilyV99 (discord: Emily) 03/05/2022 20:34

It shouldn't be a combo type
Period
It shouldn't have anything to do with ZC
Only ZQ

=== @ P-Tux7 03/05/2022 20:34

^

=== @EmilyV99 (discord: Emily) 03/05/2022 20:34

Which means it can't be a combo type
But aliases are perfect

=== @ P-Tux7 03/05/2022 20:35

also making it not a combo type allows it to be used with anything

=== @EmilyV99 (discord: Emily) 03/05/2022 20:35

?
The way it was suggested as a combo type wouldn't have had issues like that

=== @ P-Tux7 03/05/2022 20:35

oh whoops

=== @EmilyV99 (discord: Emily) 03/05/2022 20:36

But, it would change every time you reenter the screen
Or be algorithmically hardcoded
Both of which are blatantly bad

=== @ P-Tux7 03/05/2022 20:36

(replying to @EmilyV99 (discord: Emily) "But, it would change every ti‚Ä¶"): deedee said it wouldn't because it would be seeded the same every time
which is bad yeah

=== @EmilyV99 (discord: Emily) 03/05/2022 20:37

(replying to @EmilyV99 (discord: Emily) "Or be algorithmically hardcod‚Ä¶"): ^
You're really good at just missing half of my text

=== @ P-Tux7 03/05/2022 20:38

sorry i was typing while you were and we posted it at the same time

=== @EmilyV99 (discord: Emily) 03/05/2022 20:38

Oh, that must be some serious lag
You posted almost a full minute after I did

=== @ Tsunami Tommy Reload the Shotty 03/05/2022 20:42

That lag has happened to me before.  I don't even question it anymore.  üò¥

=== @arceusplayer11 (discord: Deedee) 03/05/2022 22:18

(replying to @EmilyV99 (discord: Emily) "Or be algorithmically hardcod‚Ä¶"): having a noise seed in the combo type would fix it, but that's still overly complicated and doesn't need to be like that

=== @EmilyV99 (discord: Emily) 03/05/2022 22:20

it shouldn't need to be in zc at all
it should be entirely handled in zq

=== @arceusplayer11 (discord: Deedee) 03/05/2022 22:24

okay

=== @EmilyV99 (discord: Emily) 03/05/2022 22:24

frankly having it be part of aliases makes a lot of sense
as that allows larger than 1x1 effects of this
and, it would choose which random combo to place when you place the alias
so if you want to change it you can just place it multiple times to cycle through
## ‚ùåüîíBuilt in trading sequence 2.55 Alpha (#1261)
@ SkyLizardGirl opened this issue on 03/07/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/950247856063787058



=== @ SkyLizardGirl 03/07/2022 04:25

This would make one new item type, which uses a trigger to trade that one item type over and over, while changing its image up a tile and item Level also each time it's traded.  The item level is to mark if an NPC can accept the item or not depending on what level the item has become.  You would also need to line up item tiles to the right of the first item, depending how many tiles the trading sequences changes to, the trading sequence can be as long as programed until max level also.  NPC sprite tiles would need a command to check for trading item level. It plays another string if it detects the trading item level at an NPC. The NPC then gives you the next upgraded item level item.

=== @arceusplayer11 (discord: Deedee) 03/07/2022 04:34

You can already do this with SCCs

=== @ SkyLizardGirl 03/07/2022 04:34

Huh?
How?

=== @arceusplayer11 (discord: Deedee) 03/07/2022 04:35

Have the string goto another string if you have an item

=== @ SkyLizardGirl 03/07/2022 04:35

But how would it trade the item? 0_0

=== @arceusplayer11 (discord: Deedee) 03/07/2022 04:35

have that new string give you a new item and take away the old

=== @ SkyLizardGirl 03/07/2022 04:38

the thing is

i want to use a single item for this sequence and just
switch the item image alone, and its level changes also.
kinda like how the jars you use to catch fairies in change item image

=== @ SkyLizardGirl 03/07/2022 04:40

.
I dont want to use 12 different item slots for a trading sequence is why.

=== @EmilyV99 (discord: Emily) 03/07/2022 05:07

then use a script
that's not something an item will ever be able to do in engine
it would require too many attributes to be done in one item slot

=== @EmilyV99 (discord: Emily) 03/07/2022 05:12

(meta) thread name was changed: ‚ùåüîíBuilt in trading sequence 2.55 Alpha
## ‚ùìüîì[CRASH] New compiler hanging ZQ after failed compile attempt. (#1262)
@ Orithan opened this issue on 03/07/2022

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/950367620249567302



=== @ Orithan 03/07/2022 12:21

The new compiler hangs ZQ if you attempt to compile again after a failed compile attempt, if you attempt to recompile if the compiler is still up.

![image](https://cdn.discordapp.com/attachments/950367620249567302/950367723781771324/Untitled.png)

=== @EmilyV99 (discord: Emily) 03/07/2022 20:35

....whaaat
I definitely have done this without issue

=== @ Orithan 03/07/2022 22:36

It somehow skipped the phase where the compile error window came up in ZQ

=== @EmilyV99 (discord: Emily) 03/07/2022 22:37

...that uh, shouldn't be possible
can you recreate this or did it just happen the once?
because, if just the once, there isn't much that can be done to debug it
```cpp

bool cancel = code;
if(code)
    InfoDialog("ZScript Parser", buf).show();
else AlertDialog("ZScript Parser", buf,
        [&](bool ret)
        {
            cancel = !ret;
        }, "Continue", "Cancel").show();
```
`if() do_popup_1()`
`else do_popup_2()`
one of the two should pop up
and if there's an error, it should be the `if`

=== @ Orithan 03/07/2022 23:08

Happened once

=== @EmilyV99 (discord: Emily) 03/10/2022 01:30

(meta) thread name was changed: ‚ùìüîì[CRASH] New compiler hanging ZQ after failed compile attempt.

=== @ Orithan 03/25/2022 00:59

And again it happened
This was in Alpha 104
There might be something short-circuiting the code that is normally supposed to handle this.

=== @EmilyV99 (discord: Emily) 03/25/2022 01:56

if there's any way to figure out how to reproduce it I can work at it
but if it's just occurring randomly, it could be something like rainbow death crash that isn't fixable

=== @ Orithan 03/30/2022 04:05

I'm doing work on One Screen Gollab in the newest nightly and ZQ is crashing for me every single time on a failed compile now
## ‚úÖüîíString Inconsistencies (#1263)
@ Jared opened this issue on 03/08/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/950569156091203594



=== @ Jared 03/08/2022 01:42

There seem to be string inconsistencies between in-game and ZQ

![image](https://cdn.discordapp.com/attachments/950569156091203594/950569163330568282/unknown.png)
Just an example
![image](https://cdn.discordapp.com/attachments/950569156091203594/950569216912818186/unknown.png)

=== @EmilyV99 (discord: Emily) 03/08/2022 02:00

That's odd...

=== @EmilyV99 (discord: Emily) 03/08/2022 02:03

Do you have any compat rules related to strings enabled?
@ Jared

=== @ Jared 03/08/2022 02:03

I don't believe so

=== @EmilyV99 (discord: Emily) 03/10/2022 00:09

(replying to @ Jared "Just an example"): example isn't helpful if I don't know the settings of the string
what font is that? what are your margins? etc

![image](https://cdn.discordapp.com/attachments/950569156091203594/951270718857969755/unknown.png)
because just typing that doesn't appear to remotely look like how yours fits

=== @ Jared 03/10/2022 00:10


![image](https://cdn.discordapp.com/attachments/950569156091203594/951270844833890354/unknown.png)

![image](https://cdn.discordapp.com/attachments/950569156091203594/951270919593152522/unknown.png)
Acorn font

=== @EmilyV99 (discord: Emily) 03/10/2022 00:13

hmm
odd

=== @ Jared 03/10/2022 00:13

Yeah, I didn't change much

=== @EmilyV99 (discord: Emily) 03/10/2022 00:40


![image](https://cdn.discordapp.com/attachments/950569156091203594/951278458544214066/unknown.png)
pfffffffffffffffffft
spot the typo

![image](https://cdn.discordapp.com/attachments/950569156091203594/951278662081187890/unknown.png)
that certainly fixes it

=== @ Jared 03/10/2022 00:41

omg lol
well yay

=== @EmilyV99 (discord: Emily) 03/10/2022 00:42

(it was using the `Top Margin` for all 4 margins in the preview)

=== @ Jared 03/10/2022 00:42

i found a bugggg
lol
Ah okay

=== @EmilyV99 (discord: Emily) 03/10/2022 00:42

(so, your right margin (which is 0) was being treated as 8)
(thus cutting the word off 8 pixels sooner)

=== @ Jared 03/10/2022 00:42

Ahhhhh makes sense

=== @EmilyV99 (discord: Emily) 03/10/2022 00:44

(meta) thread name was changed: ‚úÖüîíString Inconsistencies
## ‚ùåüîíCopy Palette (#1264)
@ Jared opened this issue on 03/08/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/950570193069953084



=== @ Jared 03/08/2022 01:46

Can we PLEASE get a way to copy and paste the current palette of an in-ZQ screen to another screen? üòÇ

=== @ Russ 03/08/2022 01:46

This already exists
Edit->Paste Special->Palette

=== @ Jared 03/08/2022 01:48

WHATTTT
Epic
Thank you
Although I feel it could be done a bit faster

=== @EmilyV99 (discord: Emily) 03/08/2022 02:28

You can put `Paste Palette` as a favorite command @ Jared
Then you just press C to copy a screen, and click the favorite command button to paste the palette

=== @ Jared 03/08/2022 02:29

Thank you!

=== @EmilyV99 (discord: Emily) 03/08/2022 02:30

(meta) thread name was changed: ‚ùåüîíCopy Palette
## ‚úÖüîíChoose warp point when testing (#1265)
@ Jared opened this issue on 03/09/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/950917519705776128



=== @ Jared 03/09/2022 00:46

Can we get a dropdown box or something to choose where Link starts when testing a quest?

=== @ Jared 03/10/2022 00:14

(As in warp A, B, C D)

=== @EmilyV99 (discord: Emily) 03/14/2022 05:46


![image](https://cdn.discordapp.com/attachments/950917519705776128/952804821436629082/unknown.png)
@ Jared
(meta) thread name was changed: ‚úÖüîíChoose warp point when testing
## Subscreen CopyPaste (#1266)
@ vlamart opened this issue on 03/09/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/950956539915690065



=== @ vlamart 03/09/2022 03:21

A way to copy and paste subscreens in the Select Subscreen menu via right click and ctrl+c/v

=== @EmilyV99 (discord: Emily) 03/09/2022 03:22

...blehg
shouldn't be difficult *in theory*
but anything involving subscreens automatically sucks
@arceusplayer11 (discord: Deedee)

=== @ vlamart 03/09/2022 03:24

Motivational confetti üéâ
## Triggerflags upgrade crash (#1267)
@EmilyV99 (discord: Emily) opened this issue on 03/09/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/951013800558100520



=== @EmilyV99 (discord: Emily) 03/09/2022 07:09

sooo
@ Saffith think I need your help here
branch `2.55-combostuff-crashy`
ZQuest, small mode, combo editor
`Triggers` tab
upon selecting that tab, it crashes immediately
When attached to the debugger, it *does not break at the crash point*
I have no fucking clue what is wrong
```cpp
TabRef(name = "Triggers", ScrollingPane(
    Column(
        margins = DEFAULT_PADDING,
        Column(framed = true,
            padding = DEFAULT_PADDING+2_px,
            Row(
                padding = 0_px,
                Label(text = "Min Level (Applies to all):"),
                TextField(
                    fitParent = true,
                    type = GUI::TextField::type::INT_DECIMAL,
                    low = 0, high = 214748, val = local_comboref.triggerlevel,
                    onValChangedFunc = [&](GUI::TextField::type,std::string_view,int32_t val)
                    {
                        local_comboref.triggerlevel = val;
                    })
            ),
            Rows<3>(
                padding = 0_px,
                TRIGFLAG(0,"Sword"),
                TRIGFLAG(1,"Sword Beam"),
                TRIGFLAG(2,"Boomerang"),
                TRIGFLAG(3,"Bomb"),
                TRIGFLAG(4,"Super Bomb"),
                TRIGFLAG(5,"Lit Bomb"),
                TRIGFLAG(6,"Lit Super Bomb"),
                TRIGFLAG(7,"Arrow"),
                TRIGFLAG(8,"Fire"),
                TRIGFLAG(9,"Whistle"),
                TRIGFLAG(10,"Bait"),
                TRIGFLAG(11,"Wand"),
                TRIGFLAG(12,"Magic"),
                TRIGFLAG(13,"Wind"),
                TRIGFLAG(14,"Refl. Magic"),
                TRIGFLAG(15,"Refl. Fireball"),
                TRIGFLAG(16,"Refl. Rock"),
                TRIGFLAG(17,"Hammer"),
                TRIGFLAG(32,"Hookshot"),
                TRIGFLAG(33,"Sparkle"),
                TRIGFLAG(34,"Byrna"),
                TRIGFLAG(35,"Refl. Beam"),
                TRIGFLAG(36,"Stomp"),
                DummyWidget(),
                TRIGFLAG(37,"C. Weapon 1"),
                TRIGFLAG(38,"C. Weapon 2"),
                TRIGFLAG(39,"C. Weapon 3"),
                TRIGFLAG(40,"C. Weapon 4"),
                TRIGFLAG(41,"C. Weapon 5"),
                TRIGFLAG(42,"C. Weapon 6"),
                TRIGFLAG(43,"C. Weapon 7"),
                TRIGFLAG(44,"C. Weapon 8"),
                TRIGFLAG(45,"C. Weapon 9"),
                TRIGFLAG(46,"C. Weapon 10")
            )
        ),
        Row(framed = true,
            padding = DEFAULT_PADDING+2_px,
            Row(padding = 0_px,
                Label(text = "Buttons:"),
                TextField(
                    fitParent = true,
                    vPadding = 0_px,
                    type = GUI::TextField::type::INT_DECIMAL,
                    low = 0, high = 255, val = local_comboref.triggerbtn,
                    onValChangedFunc = [&](GUI::TextField::type,std::string_view,int32_t val)
                    {
                        local_comboref.triggerbtn = val;
                    }),
                Button(
                    width = 1.5_em, padding = 0_px, forceFitH = true,
                    text = "?", hAlign = 1.0, onPressFunc = [&]()
                    {
                        InfoDialog("Button Triggers","Sum all the buttons you want to be usable:\n"
                            "(A=1, B=2, L=4, R=8, Ex1=16, Ex2=32, Ex3=64, Ex4=128)\n"
                            "Buttons used while standing against the combo from a direction"
                            " with the 'Btn: [dir]' flag checked for that side"
                            " will trigger the combo.").show();
                    }
                )
            ),
            Rows<4>(padding = 0_px,
                TRIGFLAG(20,"Btn: Top"),
                TRIGFLAG(21,"Btn: Bottom"),
                TRIGFLAG(22,"Btn: Left"),
                TRIGFLAG(23,"Btn: Right"),
                TRIGFLAG(47,"Always Triggered")
            )
        ),
        Row(
            framed = true,
            padding = DEFAULT_PADDING+2_px,
            TRIGFLAG(48,"Triggers Secrets"),
            TRIGFLAG(18,"->Next"),
            TRIGFLAG(19,"->Prev")
        )
    )
)),```
where
```cpp
#define TRIGFLAG(ind, str) \
Checkbox( \
    text = str, hAlign = 0.0, \
    checked = (local_comboref.triggerflags[ind/32] & (1<<(ind%32))), \
    fitParent = true, \
    onToggleFunc = [&](bool state) \
    { \
        SETFLAG(local_comboref.triggerflags[ind/32],(1<<(ind%32)),state); \
    } \
)```
```cpp
#define DEFAULT_PADDING       sized(1_px,3_px)```

=== @EmilyV99 (discord: Emily) 03/09/2022 07:15

The prior (working) version of this block is ```cpp
TabRef(name = "Triggers", ScrollingPane(
    Column(
        margins = DEFAULT_PADDING,
        Row(
            Label(text = "Min Level (Applies to all):"),
            TextField(
                fitParent = true,
                type = GUI::TextField::type::INT_DECIMAL,
                low = 0, high = 214748, val = local_comboref.triggerlevel,
                onValChangedFunc = [&](GUI::TextField::type,std::string_view,int32_t val)
                {
                    local_comboref.triggerlevel = val;
                })
        ),
        Rows<3>(
            framed = true,
            padding = DEFAULT_PADDING+2_px,
            TRIGFLAG(0,"Sword"),
            TRIGFLAG(1,"Sword Beam"),
            TRIGFLAG(2,"Boomerang"),
            TRIGFLAG(3,"Bomb"),
            TRIGFLAG(4,"Super Bomb"),
            TRIGFLAG(5,"Lit Bomb"),
            TRIGFLAG(6,"Lit Super Bomb"),
            TRIGFLAG(7,"Arrow"),
            TRIGFLAG(8,"Fire"),
            TRIGFLAG(9,"Whistle"),
            TRIGFLAG(10,"Bait"),
            TRIGFLAG(11,"Wand"),
            TRIGFLAG(12,"Magic"),
            TRIGFLAG(13,"Wind"),
            TRIGFLAG(14,"Refl. Magic"),
            TRIGFLAG(15,"Refl. Fireball"),
            TRIGFLAG(16,"Refl. Rock"),
            TRIGFLAG(17,"Hammer"),
            TRIGFLAG(32,"Hookshot"),
            TRIGFLAG(33,"Sparkle"),
            TRIGFLAG(34,"Byrna"),
            TRIGFLAG(35,"Refl. Beam"),
            TRIGFLAG(36,"Stomp"),
            DummyWidget(),
            TRIGFLAG(37,"C. Weapon 1"),
            TRIGFLAG(38,"C. Weapon 2"),
            TRIGFLAG(39,"C. Weapon 3"),
            TRIGFLAG(40,"C. Weapon 4"),
            TRIGFLAG(41,"C. Weapon 5"),
            TRIGFLAG(42,"C. Weapon 6"),
            TRIGFLAG(43,"C. Weapon 7"),
            TRIGFLAG(44,"C. Weapon 8"),
            TRIGFLAG(45,"C. Weapon 9"),
            TRIGFLAG(46,"C. Weapon 10")
        ),
        Rows<3>(
            framed = true,
            padding = DEFAULT_PADDING+2_px,
            TRIGFLAG(47,"Always Triggered"),
            TRIGFLAG(48,"Triggers Secrets")
        )
    )
)),
```
but, while that version does not crash... well, it doesn't have the new fields I was adding.
This is the first time I'm having a problem like this expanding a gui with your system
and I see nothing that would obviously be the culprit

=== @EmilyV99 (discord: Emily) 03/09/2022 07:20

In debug, it gives only this as an error:
![image](https://cdn.discordapp.com/attachments/951013800558100520/951016554915586048/unknown.png)
no further information while attached to debugger
I'm probably off for the night now... hope you can spare the time to figure something out here, because I'm baffled.
My only guess is that it is in some way related to `ScrollingPane`, since large mode doesn't use a scrolling pane for this, and the large mode version works fine...

=== @EmilyV99 (discord: Emily) 03/09/2022 23:50

....ok, I seem to have fixed it
by just
reverting the entire ScrollingPane to what it was before
and doing it over again, slowly, testing after each step
...didn't crash once this time.
so, uh, I have no clue what caused this issue, but it's probably still lurking somewhere.

=== @ Saffith 03/10/2022 05:01

Huh. That's fun.
ScrollingPane does some weird stuff, so there may well be an issue with it...
I'll need to get stuff updated and rebuilt, and then I can poke around a bit.

=== @EmilyV99 (discord: Emily) 03/10/2022 05:03

I thought it might be something with the content being too wide
but, then I specifically made something too wide to see
and, there was an issue there; it drew over the scrollbar.
but, not the source of the crash.
(I fixed the scrollbar thing, now if it has a scrollbar, it accounts for that in the `arrange()` call)

=== @ Saffith 03/10/2022 05:04

All right. Hopefully Valgrind can pick something up.
## Make Items Out of Layer (#1268)
@ bigjoe opened this issue on 03/09/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/951176523644280852



=== @ bigjoe 03/09/2022 17:55

This one is a bit farfetched and complicated, but i just want to put it out there: A setting that makes items out of a specific layer. While matching that layer, the combo brush becomes an item brush, and you can place items down like you would tiles. I imagine this is scriptable somehow, but doing it via script would complicate the process of previewing it. I imagine this will get turned down quickly, but i thought it a neat idea anyway. also, with careful planning it MIGHT be able to be done with scripts too.

=== @arceusplayer11 (discord: Deedee) 03/09/2022 18:55

more than one item per screen is something I want, but something that isn't likely feasible
Any additions to screendata is an exponential increase, cause max maps is 256
## üîìSubscreen editor dialog font changes (#1269)
@ vlamart opened this issue on 03/09/2022

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/951182968762814464



=== @ vlamart 03/09/2022 18:21

In large mode, most of the subscreen editor drop downs and text boxes switch from their normal font and size (when not edited) to the small mode font and size (if edited)

=== @EmilyV99 (discord: Emily) 03/19/2022 04:47

(meta) thread name was changed: üîìSubscreen editor dialog font changes
## ‚ùåüîíBomb Bag Shenanigans (#1270)
@ vlamart opened this issue on 03/09/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/951255392590127155



=== @ vlamart 03/09/2022 23:09

I was trying to item bundle a bomb bag (with all the increase settings correct, correct counter setup in the subscreen, etc.) and the bomb item itself. However, it will not let me access it in the subscreen unless I also bundle at least 1 Bomb Ammo. This is the same with Super Bombs, but does not occur with Arrows and Quivers

=== @EmilyV99 (discord: Emily) 03/09/2022 23:22

Bombs don't appear on the subscreen when you have 0 bomb ammo
that has been a standard thing
for a long time
and is not a bug

=== @ vlamart 03/09/2022 23:24

It still appears on the subscreen, just can't select it

=== @EmilyV99 (discord: Emily) 03/09/2022 23:24


![image](https://cdn.discordapp.com/attachments/951255392590127155/951259146957783040/unknown.png)
oh?
What?
That's.... odd
Is that rule on or off?

=== @ vlamart 03/09/2022 23:25

On, so it makes sense on paper at least
But also, I set the bomb bag to increase ammo with the max. Counter on the subscreen says I have more than 0 bombs

=== @EmilyV99 (discord: Emily) 03/09/2022 23:27

Oh????
wtf
@arceusplayer11 (discord: Deedee) haaaaaalp

=== @ vlamart 03/09/2022 23:32

I even set the bomb item itself to increase ammo by at least 1, and still not working unless also bundled specifically with at least 1 bomb ammo item (the test I'm doing sets ammo and max to 15, but no higher than 60, the last level bag quantity)

=== @EmilyV99 (discord: Emily) 03/09/2022 23:32

wtf
this is very weird
I'd love to look into it now, though I left some stuff in a crashy state last night that I need to finish up first

=== @ vlamart 03/09/2022 23:36


https://cdn.discordapp.com/attachments/951255392590127155/951262175471747102/CamOrg.qst

=== @ vlamart 03/09/2022 23:38

In that demo, the item bundle is "Adventure Bag" and the "bomb ammo (1)" is the 10th item

=== @EmilyV99 (discord: Emily) 03/10/2022 00:46

...it lets me select it just fine?
changing item 10 to `-1` (no item), it lets me select it

=== @ vlamart 03/10/2022 00:48

Huh...

=== @EmilyV99 (discord: Emily) 03/10/2022 00:49

and just to poke around, I just removed the Bomb item and Bomb Bags from Init Data
starting without any of those, it still allows me to select it after grabbing the adventure bag
What version are you using?
(specific build date if nightly)

=== @ vlamart 03/10/2022 00:50

Latest nightly Feb 25 "immediate SCC fix"

=== @EmilyV99 (discord: Emily) 03/10/2022 00:50

hmm
nothing should have changed since that
nothing anywhere near items has been touched at all
so, uhhh
<:nekoshrug:869489800271503400>

=== @ vlamart 03/10/2022 00:52

I'll play around with it again, if I accidentally fixed it, go me I guess

=== @EmilyV99 (discord: Emily) 03/10/2022 00:52

oh, though hmm
the super bomb is *visible* but not *selectable* as well
but you have no ammo for it
...seems like that might be intentional behavior for being out of ammo for them
but, if I have >0 bomb counter, I can select it on the subscreen
also tried removing the `1 bomb` that the `Bomb (Normal)` item adds to the counter
still works fine
even with the bomb bag being the only thing giving bombs
so, yeah. I'll close this thread (without locking); feel free to reopen it if you find an actual issue with this
(meta) thread name was changed: ‚ùåüîíBomb Bag Shenanigans

=== @ vlamart 03/10/2022 04:01

So it worked for like a second, then I unchecked all the items from Init Data and tried again, and it still doesn't work, now neither does the arrow

=== @EmilyV99 (discord: Emily) 03/10/2022 04:08

???

=== @ vlamart 03/10/2022 04:12

I even downloaded the quest file I posted up there, tested it there (on newest nightly posted tonight) and still not able to select them on the active subscreen. Here is the quest after some more fiddling
https://cdn.discordapp.com/attachments/951255392590127155/951331760547983380/CamOrg.qst
(Given I know the arrow doesn't shoot without the bow, I was still able to at least select the arrow before)

=== @EmilyV99 (discord: Emily) 03/10/2022 04:17

I don't think you are meant to select an arrow without a bow?
adding a bow I am able to select both
I have a feeling your subscreen isn't set correctly
Notably, do you understand how subscreens handle items that you don't have?
It acts as if you kept going in the direction you pressed
so, with how you have it set up, if you have only boomerang and bombs
you have no way to change your selection
as going straight up, down, left, and right will never lead to bombs from boomerang
Going left from the far-left column should go to the end of the *previous* row
and going right from the far-right column should go to the start of the *next* row
never the *same* row
Also, quickswap with L/R act as pressing left/right, so the way you have it set up, you can only quickswap within the same row

=== @ vlamart 03/10/2022 04:21

This was all very helpful, because what you described was wrong is exactly what I did üòù
## Use ZScript to check if NPCT_WALK is halting (#1271)
@ Mitsukara opened this issue on 03/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/951292865542250556



=== @ Mitsukara 03/10/2022 01:38

When a Walking Enemy halts (stops between bursts of movement), I don't think it's been possible to check exactly when they were stopped via zscript.

Obviously, there'd be a lot of uses for this- a vanilla NPCT_WALK tends to fire weapons when halted, for one thing, so it'd be good to be able to check that. Also if you could check this, you could also do neat things like changing their defenses (a la Eyegore from LTTP being vulnerable only while moving), and you could check it to know when to draw something on the enemy while they're hatled, (like the turning heads on LTTP guards), or you could use it to make some sort of teleporting walking enemy that gets moved only when it halts, etc.

So if there isn't already a way to check this via zscript in 2.55, that'd be neat.

=== @ P-Tux7 03/10/2022 02:24

Make sure to check zscript_additions.txt

=== @EmilyV99 (discord: Emily) 03/10/2022 02:44

@arceusplayer11 (discord: Deedee) enemy shit is yours

=== @arceusplayer11 (discord: Deedee) 03/10/2022 09:22

okay, stop me if you heard this one before...
"I think Zoria added this at one point and I'm pretty sure it's bad quality"
## üíäüîìConveyer Additions (#1272)
@ vlamart opened this issue on 03/11/2022

Status: needs-testing

Labels: ['feature', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/951637747859325009



=== @ vlamart 03/11/2022 00:28

This is mostly an idea related to freeform shutters, but maybe a flag (a whole new combo seems like much) and attribytes to the Conveyer type combos that instead of just push you, it does "no action" (forced no button presses) and forces the player to walk off the combo in that type's direction (speed is player speed or maybe customisable)

=== @ Jennette ‚ù£ 03/17/2022 17:37

I presume you mean conveyors that disable Link movement? (i.e you're pushed until you reach a non-conveyor combo)

=== @ vlamart 03/17/2022 17:37

Yes!!

=== @ Jennette ‚ù£ 03/17/2022 17:37

I would also like to see the same thing

=== @ vlamart 03/17/2022 17:41

(replying to @ Jennette ‚ù£ "I presume you mean conveyors‚Ä¶"): Would also need an option for whether there is walking animation or not

=== @EmilyV99 (discord: Emily) 03/17/2022 17:43

And if it forces facing dir

=== @ vlamart 03/17/2022 17:46

Oh this would be cute for a conveyer that spins you, but at this point, it just sounds like ice floors

=== @EmilyV99 (discord: Emily) 03/17/2022 17:47

Yeah, it would kinda work for ice floors...

=== @ vlamart 03/17/2022 17:48

Can ice combo stuff be next big feature endeavour? üòù

=== @EmilyV99 (discord: Emily) 03/28/2022 03:59

@arceusplayer11 (discord: Deedee)
https://discord.com/channels/129399825342005250/297553638925008896/957833762283089983
Link to a discussion on this that occured in pzc server

=== @EmilyV99 (discord: Emily) 04/05/2022 06:51

@ P-Tux7

https://cdn.discordapp.com/attachments/951637747859325009/960793844016885780/zquest.exe
https://cdn.discordapp.com/attachments/951637747859325009/960793844658602024/zelda.exe

https://cdn.discordapp.com/attachments/951637747859325009/960793894595997726/conv.qst
@ vlamart
This is NOT necessarily final
feedback would be appreciated

=== @ P-Tux7 04/05/2022 06:53

can this be applied on top of latest nightly?

=== @EmilyV99 (discord: Emily) 04/05/2022 06:55

aye, it should be

=== @ P-Tux7 04/05/2022 06:58

Great!

=== @EmilyV99 (discord: Emily) 04/05/2022 06:58


![image](https://cdn.discordapp.com/attachments/951637747859325009/960795634305232907/unknown.png)
it's just 2 new flags here
the problem comes when doing corner conveyors
which the test quest shows
if you get caught on a wall, you regain control

=== @ P-Tux7 04/05/2022 07:00

*choke*

=== @EmilyV99 (discord: Emily) 04/05/2022 07:03

otherwise you would just get softlocked
so
Now, you COULD try making conveyors that are diagonal for corners
which would likely alleviate issues
and, if deedee ever gets around to making it so you can be on multiple conveyors at once, that should solve corners being weird

=== @EmilyV99 (discord: Emily) 04/05/2022 07:05

@arceusplayer11 (discord: Deedee)
Oh, wait, I have an idea
that should also help

=== @EmilyV99 (discord: Emily) 04/05/2022 07:23

@ P-Tux7 @ vlamart @arceusplayer11 (discord: Deedee) YO!
![image](https://cdn.discordapp.com/attachments/951637747859325009/960801794110410792/Smarter_Conveyors.mp4)

=== @EmilyV99 (discord: Emily) 04/05/2022 07:41

(meta) thread name was changed: üíäüîìConveyer Additions

https://cdn.discordapp.com/attachments/951637747859325009/960806333119070228/zquest.exe
https://cdn.discordapp.com/attachments/951637747859325009/960806333727272990/zelda.exe

=== @ vlamart 04/05/2022 12:26

I went and chased waterfalls instead of sticking to the lakes and rivers I'm used to.  Anyways I love the new additions! I appreciate that a spiraling conveyer won't force Link into pits. Neatly, though unsure how others will take advantage of it, but if a "stun" conveyer shoves Link into a pit, he falls (as expected) and if isn't a warp pit, will repeatedly push him in. However, you can save him by finessing the controls until he barely clings to the nearest few pixels to the edge

=== @EmilyV99 (discord: Emily) 04/05/2022 12:27

Oh, duh
Conveyors need to not count as "safe ground" for respawning

=== @ vlamart 04/05/2022 12:31

I tried making a waterfall too, same with swimming, where he'll just stand on the edge instead of back to swimming

=== @EmilyV99 (discord: Emily) 04/05/2022 12:33

It isn't the pit/water that's the problem, it's that it respawns you on a conveyor

=== @ vlamart 04/05/2022 12:45

Oh yeah, that's probs

=== @ vlamart 04/05/2022 12:49

I also had the idea of a shooting gallery mini game, and was hoping "force direction" had attribytes for specific direction, and was wondering if there is a way to "stun" while still being able to use weapons?

=== @EmilyV99 (discord: Emily) 04/05/2022 12:56

To allow using weapons would require more complex stunning code
And the direction forced is the primary movement direction, where X wins ties with Y on diagonals

=== @ vlamart 04/05/2022 13:01

Fair enough, just spit balling ideas
Haven't tested it yet, but also are lit bombs or enemies effected by it?

=== @ vlamart 04/05/2022 13:16

Oooo, also, a flag for boots to cancel conveyer effects?

=== @ vlamart 04/05/2022 13:21

(I had the idea of using layers to make like "wind tunnels", "Iron Boots" would be neat for this, with a flag on the combo itself to check for the Boots, so that the boots don't effect all conveyers)

=== @ vlamart 04/05/2022 13:24

Sorry for idea dumping, just stoned and feeling inspired. If conveyers effected items and enemies too, you could use them in conjunction with switches to make a conveyer mini game! You could also do that with yourself as a puzzle in a dungeon as is now
## Drag subscreen objects in subscreen editor (#1273)
@ cbailey78 opened this issue on 03/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/951645220888531034



=== @ cbailey78 03/11/2022 00:58

We should add the ability to drag subscreen items like you can with freeform combos, so you don't have to mash the mouse button to get it where you want it.

=== @ Moosh 03/11/2022 01:23

While this makes sense, it also sounds like a nightmare with how cluttered subscreens get and how basic ZC's handing of dragging things tends to be. I already drag FFCs off grid by accident  all the time üò©
## FFC - Run script at screen init fails to run before opening wipe. (#1274)
@ Alucard648 opened this issue on 03/12/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/952297703218511992



=== @ Alucard648 03/12/2022 20:11

1. Place FFC with a script and "Run script at screen Init" flag.
2. Make sure that screen is starting screen in the quest.

=== @ Alucard648 03/12/2022 20:13

That is it. The script starts running only after opening wipe even if "Run script at screen init" flag is set on.

https://cdn.discordapp.com/attachments/952297703218511992/952298325393170572/PuzzlePicture2.qst

=== @ Alucard648 03/12/2022 20:15


https://cdn.discordapp.com/attachments/952297703218511992/952298723738779738/pushblock2_3.z
https://cdn.discordapp.com/attachments/952297703218511992/952298723940134962/matrix31.z

=== @EmilyV99 (discord: Emily) 03/12/2022 23:52

Did this exist in 2.50.2? 2.53?

=== @ Alucard648 03/13/2022 11:04

The bug exists in 2.53, then tested in latest 2.55 nightly. Same problem.
## ‚úÖüîíCheat Menu - Enter activates cheats, rather than closing the dialog. (#1275)
@ Tsunami Tommy Reload the Shotty opened this issue on 03/13/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/952517025979322371



=== @ Tsunami Tommy Reload the Shotty 03/13/2022 10:42

This is a very minor change.  In the very latest build (I got it March/11/22.) if you enter the cheat menu in ZC Player, type a cheat code, and then press enter, instead of activating the cheat level, it just closes the cheat menu without activating the cheat as if the "Cancel" button was highlighted.

Naturally, this isn't the desired behavior of hitting enter after typing in the cheat code. üòõ
(meta) thread name was changed: Cheat Menu - Enter activates cheats, rather than closing the dialog.

=== @EmilyV99 (discord: Emily) 03/13/2022 11:16

It doesn't press `Cancel`, it presses `OK`
which is the function of the enter button in most dialogs

=== @EmilyV99 (discord: Emily) 03/13/2022 11:21

...but easy enough to change.

=== @EmilyV99 (discord: Emily) 03/13/2022 11:34

(meta) thread name was changed: ‚úÖüîíCheat Menu - Enter activates cheats, rather than closing the dialog.
## ‚úÖüîíConstant Item Script bugs and oddities (#1276)
@ Orithan opened this issue on 03/13/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/952708437677060148



=== @ Orithan 03/13/2022 23:23

I have reported the following bugs and oddities with Constant Item Scripts:
-> If an item running a Constant Item script is removed, the script is not terminated. Emily confirms this is a bug here: https://discord.com/channels/876899628556091432/878114935396257852/952594737771204690
-> Related to the above, if a Constant Item script is terminated and the item is removed and acquired again, the Constant Item script does not run again. Also feels buggy.
-> Constant Item scripts play even if the player has acquired a higher level version of the same item running the same script. Doesn't seem buggy but it feels odd.

=== @ Alucard648 03/14/2022 13:33

The third one is fine, if acquired level version of the same item has "Keep lower level items" option turned on.

=== @EmilyV99 (discord: Emily) 03/15/2022 09:25

(replying to @ Alucard648 "The third one is fine, if acq‚Ä¶"): So, uhh, "Keep Lower Level Items" has been broken since the item editor was added
it *always* acted like it was on, even when it was off
Bug 1 was a Zoria bug in the implementation of them running
Bug 2 was not as stated; the issue was that gaining items via Cheats or SCCs was not initializing the passive item script
'Bug' 3 is a bit odd, so there's now a new QR for that.
(meta) thread name was changed: ‚úÖüîíConstant Item Script bugs and oddities
## ‚úÖüîí[CRASH] Accessing TriggerFlags[TRIGFLAG_TRIG_SECRETS] crashes ZC (#1277)
@ Orithan opened this issue on 03/14/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/952929834168885248



=== @ Orithan 03/14/2022 14:02

Accessing ``combodata->TriggerFlags[TRIGFLAG_TRIG_SECRETS]``  via script crashes ZC.
I really hope this is not a problem with the other trigger flags

=== @EmilyV99 (discord: Emily) 03/14/2022 15:43

uhh, `TriggerFlags[]`?
it's `TrigFlags[]`
`TriggerFlags[]` is the old bitwise deprecated way that is only size `[3]` and definitely is very out of bounds with that constant

=== @ Orithan 03/14/2022 21:38

So it is
I feel like that shouldn't crash though
Or at the very least give documentation on what it is and that its continued usage should not be supported.

=== @EmilyV99 (discord: Emily) 03/14/2022 22:58

As a lot of deprecated commands have been, the documentation on its' existence was intentionally removed
mostly because it *does not work fully*
because its' bitwise, it can only hold 18 flags per index
but, internally, there are 32 flags per index
so it can't read half of the flags
....but old scripts could rely on it, so it still compiles.
And aye, shouldn't crash... but Zoria doesn't know how to code.

=== @ Orithan 03/14/2022 23:00

Perhaps we could have something which points out depreciated functions in the event someone wants to modernize their scripts
It doesn't have to be in ZQ at all either

=== @EmilyV99 (discord: Emily) 03/14/2022 23:05

(replying to @ Orithan "I feel like that shouldn't cr‚Ä¶"): ....It very much shouldn't crash
it should print `Invalid Array Index passed to 'combodata->TriggerFlags[]: `

=== @EmilyV99 (discord: Emily) 03/14/2022 23:06

I see absolutely no reason for it to crash
...oh, wait
I see one reason for it to crash
if you access [TRIGFLAG_BOMB]
but not any other one

=== @ Orithan 03/14/2022 23:09

Why?

=== @EmilyV99 (discord: Emily) 03/14/2022 23:09

because it was doing `>` not `>=` on an index bound check
so despite the array being size 3
`[3]` would pass the bounds check
and out-of-bounds an internal array
but `[4]` or higher would be caught by the bounds check and print an error
and `[0]`,`[1]`,`[2]` would all be in-bounds
so yeah
`[3]` would probably do weird stuff
which happens to be `[TRIGFLAG_BOMB]`
but anything higher or lower should either error message or work

=== @EmilyV99 (discord: Emily) 03/15/2022 09:30

Apparently fixed by something I didn't think would fix it at all
(meta) thread name was changed: ‚úÖüîí[CRASH] Accessing TriggerFlags[TRIGFLAG_TRIG_SECRETS] crashes ZC
## Funky Spin Attack Behavior (#1278)
@ Haylee opened this issue on 03/15/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/953187475541610516



=== @ Haylee 03/15/2022 07:06

While charging spin attack with magic cost, there's very strange behaviors that can occur:

=== @ Haylee 03/15/2022 07:11

(Note that the intended behavior is that running out of magic cuts you out of the spin attack when charged)
1) When poking walls with the charge, it skips the spin charge effect and allows you to skip the Magic cost. (Note: This is inconsistent)
2) The exception to this is when poking specifically left for whatever reason. Magic cost is still there, but the spin attack cancelling the charge is seemingly cancelled as well in favor of the poking ability and keeps you in the sword charge state. (Update: This works with any wall. As long as the other bug doesn't occur, this one always occurs)

=== @ Haylee 03/15/2022 07:20

Okay so it seems like you can do the wall poke cancelling spin attack animation in any direction

=== @ Haylee 03/15/2022 07:27

After more testing, it seems like both bugs are connected to the Poking animation cancelling either the mana cost or the forced spin attack itself, because it seems like it only cancels magic cost if you poke a wall on the same frame the magic cost happens.

=== @EmilyV99 (discord: Emily) 03/15/2022 09:30

@arceusplayer11 (discord: Deedee)
## ‚úÖüîíOpening a chest while also touching an Armos statue spawns multiple Armos. (#1279)
@ Orithan opened this issue on 03/15/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/953238852749918219



=== @ Orithan 03/15/2022 10:30

If you open a chest while also touching an Armos statue, you spawn multiple Armos instead of one.

![image](https://cdn.discordapp.com/attachments/953238852749918219/953238949587996742/zc_screen00001.png)
![image](https://cdn.discordapp.com/attachments/953238852749918219/953238949864824832/zc_screen00002.png)

=== @EmilyV99 (discord: Emily) 03/15/2022 11:00

(meta) thread name was changed: ‚úÖüîíOpening a chest while also touching an Armos statue spawns multiple Armos.
## Buttons setup for controller stuck (#1280)
@ SkyLizardGirl opened this issue on 03/15/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/953384875543629825



=== @ SkyLizardGirl 03/15/2022 20:11

The setup for setting up controller joypad, the button assignments are always stuck. When you click them with a mouse they always get stuck and it is difficult to set up your controllers buttons.
This does not happen with Keyboard setup.

=== @arceusplayer11 (discord: Deedee) 03/15/2022 21:15

can you set your controller inputs at all?
is your controller plugged in before starting ZC?

=== @ SkyLizardGirl 03/16/2022 02:52

Yes i can but buttons are always stuck oddly
for controller setup
Yes it is always plugged in

=== @ SkyLizardGirl 03/16/2022 02:53

my controller is always.
## ‚úÖüîíGeneric combo decoration sprites are broken [2.55 a104] (#1281)
@ TwilightKnight opened this issue on 03/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/953662401247604797



=== @ TwilightKnight 03/16/2022 14:33

They do not spawn after triggering the combo. I can give a test file if that is necessary

=== @ Tsunami Tommy Reload the Shotty 03/16/2022 14:38

What do you mean "Decoration" here?
Is this specifically something tied to the combo type "Generic Combo" ?

=== @ TwilightKnight 03/16/2022 14:59

The clippings, the flag has been renamed to "Decorations"
And I'm not certain about it being only for the generic combo yet

=== @ Tsunami Tommy Reload the Shotty 03/16/2022 15:14

For tall grasses, flower combos, and shallow water and such.

=== @ TwilightKnight 03/16/2022 15:24

The clippings do work for tall grass

=== @EmilyV99 (discord: Emily) 03/16/2022 15:28

blehg
I see what's wrong
an `else` was attached to the wrong `if`

=== @ TwilightKnight 03/16/2022 15:29

Shit happens
Thanks for fixing it üòÑ

=== @EmilyV99 (discord: Emily) 03/16/2022 15:30

Funnily enough, right now, UNchecking `Decoration Sprite` would make it display....
Also, `Clippings` != `Decoration`
Clippings refers to using the hardcoded slash sprites like bushes/flowers normally use
decoration uses any misc sprite
...but you need to have decoration checked to check clippings
naming conventions were... uh... not followed before, so things were renamed to fix things.
because, you know, Zoria not the best at the whole dev work thing

=== @ TwilightKnight 03/16/2022 15:31

Hmmz
Could be worth it as I want to release my demo with a104 (I'm busy testing it now)
But on the other hand it wouldn't work for future builds, so I think I'll stick with it

And I named it clippings just to make it clear to Cakes

=== @ TwilightKnight 03/16/2022 15:33

I think `decoration` is a good name for it

=== @EmilyV99 (discord: Emily) 03/16/2022 15:34


https://cdn.discordapp.com/attachments/953662401247604797/953677536481661039/zelda.exe
(meta) thread name was changed: ‚úÖüîíGeneric combo decoration sprites are broken [2.55 a104]
(meta) thread name was changed: üíäüîìGeneric combo decoration sprites are broken [2.55 a104]

=== @ TwilightKnight 03/16/2022 15:35

Should I test it with the version you sent?

=== @EmilyV99 (discord: Emily) 03/16/2022 15:35

aye, should fix it

=== @ TwilightKnight 03/16/2022 15:36

It indeed does, thanks üëå

=== @EmilyV99 (discord: Emily) 03/16/2022 15:39


![image](https://cdn.discordapp.com/attachments/953662401247604797/953678857536413746/unknown.png)
blehg
Out of curiosity, traced back the bug.... and it be mine.
That brace needed to be 2 lines lower, and the indenting was wrong

=== @ TwilightKnight 03/16/2022 15:39

Ouch, it happens to the best of us

=== @EmilyV99 (discord: Emily) 03/16/2022 15:39

or rather, that else needed to be on the new brace
(meta) thread name was changed: ‚úÖüîíGeneric combo decoration sprites are broken [2.55 a104]

=== @ cbailey78 03/17/2022 01:54

I was about to report this until TwilightKnight had the same issue!  Thanks for fixing it Emily!
## ‚ùåüîíPutting Player Defenses Options on Shield Items (#1282)
@ NightmareJames opened this issue on 03/17/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/953819654932033556



=== @ NightmareJames 03/17/2022 00:58

Since Shields are the de facto way of making/printing characters, why don't we put player defenses right on them?  Is this possible, or are player defenses hardcoded right into the player class?  Let me know.

=== @EmilyV99 (discord: Emily) 03/17/2022 02:03

The problem is, this means we would need to add a ton more to the itemdata struct
which bloats EVERY SINGLE ITEM
there isn't a way to add something 'just to shields'
other than the 10 misc attributes, which is nowhere near enough for defenses, and half of which are already in use for block flags
(meta) thread name was changed: ‚ùåüîíPutting Player Defenses Options on Shield Items

=== @ P-Tux7 03/17/2022 03:18

(replying to @ NightmareJames "Since Shields are the de fact‚Ä¶"): making characters?
you can put an LTM on any item
they stack
you can have a Link with a separate tunic, gloves, and boots if you're willing to set up all the combinations
(heck that's how Bunny Link works)

=== @ P-Tux7 03/17/2022 03:20

you can even have separate characters each able to buy/use shields using non-shield items. Do you need me to tell you how?

=== @ NightmareJames 03/17/2022 07:02

Fair

=== @ P-Tux7 03/17/2022 07:10

Yeah you're really crippling yourself if you tie character appearance to shields
Because that means you cannot find shields, buy shields, or use Like Likes
I'll write up a quick tutorial for multi-LTM stacking tomorrow

=== @ NightmareJames 03/17/2022 07:20

I don't think many people would mind not having Shield Eater Like-Likes (one of the most hated enemies)

=== @ P-Tux7 03/18/2022 03:20

Sorry haven't got on my computer the whole day

=== @ P-Tux7 03/18/2022 03:21

So here's how you do it
In this example we have three character states (Link, Zelda, James) and four shield states (Shieldless, Wooden Shield, Magic Shield, Hylian Shield)
Shieldless Link is the initial state, so we only have to make two character items (any item that you permanently own, basically) and three shield items (as you already know from ZC)

=== @ P-Tux7 03/18/2022 03:24

For convenience, you want it so that each pose is X amount of pages away. A tile page in ZQ is 260 tiles, so entering a Link Tile Modifier of 260 makes him use tiles 1 page down after you get that item, like a shield.

=== @ P-Tux7 03/18/2022 03:29

So what does this mean? Because each player needs four pages for their four shield states, you have to set up the costume items and shield items in such a way:
-There is no Link item - he's default
-Zelda Costume: 1040 (260 * 4)
-James Costume: 2080 (260 * 8)
-There is no No Shield item - it's default
-Small Shield: 260 (260 * 1)
-Magic Shield: 520 (260 * 2)
-Hylian Shield: 780 (260 *3)

=== @ P-Tux7 03/18/2022 03:33

So the pages are set up in this way, then (They can be ANYWHERE in the quest. LTMs just add on to WHATEVER current tile Link has that you set where it is in the player animation editor):
Shieldless Link (0)
Small Shield Link (260)
Magic Shield Link (520)
Hylian Shield Link (780)
Shieldless Zelda (1040)
Small Shield Zelda (1300)
Magic Shield Zelda (1560)
Hylian Shield Zelda (1820)
Shieldless James (2080)
Small Shield James (2340)
Magic Shield James (2600)
Hylian Shield James (2860)

=== @ P-Tux7 03/18/2022 03:34

Those tiles are the amount that the LTM is set to when you have that combination of costume-items and shield items. So let's check the Zelda costume item LTM (1040), then add the Magic Shield LTM (520)... and we get 1560 as the total amount of tiles it's skipping ahead from the initial Link tile, tile 0.
(I'm speaking of "tile 0" relatively - as again, you can set it to be anywhere, and 1560 just means 1560 tiles ahead of whatever you set as Link's tiles in the Player Animation Editor. Notice how the default quest has his tiles on page 70-something and they work perfectly)

=== @ P-Tux7 03/18/2022 03:37

Now, all you'd do to switch characters is use SCCs or scripts that remove the Zelda or James costume items. Storing their shield status would be trickier, but it can be done by setting three sets of shield variables (LinkShield, ZeldaShield, and JamesShield) all to 0 at the beginning of the quest, storing/setting their current level of Shield item to that variable when swapping, and when you swap, it loads the value of whichever other character and sets your shield level to the value of that variable.
Though if you're okay with them sharing shields, that doesn't have to happen

=== @ NightmareJames 03/18/2022 06:46

Hold up, I might make a whole new thread to discuss mechanics

=== @ NightmareJames 03/18/2022 17:21

Let me know

=== @ NightmareJames 03/18/2022 17:48

We'll discuss this more in [#zc-scripting](https://discord.com/channels/876899628556091432/878114935396257852) as per Emily's request.  I have a lot of questions on what your wrote P-Tux, but I need to lock this before it derails the purpose.
## Turn combo attributes type in fields into dropdown menus (#1283)
@ cbailey78 opened this issue on 03/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/953832376633524264



=== @ cbailey78 03/17/2022 01:49

I don't know if this is possible or difficult for devs to turn most combo attribute type in fields into drop down menus.  It would make it alot easier for questmakers to set attributes to the values they want.  SFX data, Sprite Decoration, etc. Dropset for example where you can see the name of the value right away rather than having to close the combo editor dialog and go into the SFX or sprite data to find the number what slot you want and go back into the combo editor dialog remembering what slot number to type in the attribute field.  in a nutshell, it's like the palette dropdown in the Dmap editor where you can see the palette names in the dropdown menu.

=== @EmilyV99 (discord: Emily) 03/17/2022 02:05

Not easy
definitely on the list of things to do
but, not happening any time *soon*
## Conversion of Most Enemy Spawn Flags into GameData (#1284)
@ P-Tux7 opened this issue on 03/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/954227197378428978



=== @ P-Tux7 03/18/2022 03:58

ZC only uses the first enemy in the list (#-wise?) when checking what enemy to spawn in X Room Type. Having this as a flag for all 512 enemies is useless and takes away from more valuable flags.
Therefore, I propose this be set to miscQData a la Misc. Audio or Misc. Sprites with a dropdown like those, and whenever loading a quest in the player or editor, the first enemy to bear a specific flag is set as the requisite enemy for that Room Type, and all other enemies with that flag are discarded.
Everything squared in this image

![image](https://cdn.discordapp.com/attachments/954227197378428978/954227209638391808/unknown.png)

=== @ P-Tux7 03/18/2022 03:59

Probably make it a dialog accessed from the Misc. Data menu or something that re-uses the same template as the Misc. SFX/Misc. Sprites dialogs.

=== @arceusplayer11 (discord: Deedee) 03/18/2022 04:00

not a bad idea

=== @ P-Tux7 03/18/2022 04:01

the only issue i can foresee is if these properties of an enemy are somehow checkable by scripts, and mitsukara et al used them as "free custom flags" for every enemy past the first (the actual used roomtype one)
god bless her she's done that that if it was allowed, i'm sure of it

=== @EmilyV99 (discord: Emily) 03/18/2022 04:48

Of note for the record
script changes to `miscQdata` do not save between save/quit
script changes to `gamedata` *do*
as `gamedata` literally *is* the save file

=== @ P-Tux7 03/18/2022 06:28

Hmm
Does it increase the save file size even when unchanged by scripts?

=== @ P-Tux7 03/18/2022 06:30

If so, I think it should be left as miscQdata so it doesn't. If a permanent change to it in the save file is needed (a difficulty mode where all Zoras change to something else et al), it can merely be one saved variable that triggers the miscQdata change upon loading the game

=== @EmilyV99 (discord: Emily) 03/18/2022 06:35

I mean
it would increase the size by 2 bytes per enemy type
absolutely negligible
it would take 500 enemy types to convert to take 1kb
and there's, what? Zora, Rocks, Ghini, Armos?
oh, no, the different trap types
I see
there's 13
so 26 bytes
...that's literally nothing.

=== @ P-Tux7 03/18/2022 06:39

Well then
(meta) thread name was changed: Conversion of Most Enemy Spawn Flags into GameData
## üíäüîì1st.qst missing Init script (#1285)
@ Moosh opened this issue on 03/19/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/954662750070669333



=== @ Moosh 03/19/2022 08:48

Was helping Nightmare combine a global script with a file forked from 1st.qst. In the process I found an issue where none of my global arrays were initializing properly. The cause seems likely to be related to the script assignment dialog reporting that ~Init is _missing_

![image](https://cdn.discordapp.com/attachments/954662750070669333/954662773567139901/unknown.png)

=== @ Moosh 03/19/2022 08:51

Normally that says ~Init but here it has the same -- as a script that was previously in the file but later removed from the buffer. Adding an init script to the quest did not fix the global array issue though, so I suspect something got broken by the slot's name changing at all. And the user isn't able to fix it in any way as the slot is reserved

=== @ Moosh 03/19/2022 08:52

It's possible this issue could affect more older quests than just the pack-in ones, Nightmare reported it was happening on his New Quest file as well

=== @EmilyV99 (discord: Emily) 03/19/2022 14:37

wtf

=== @ NightmareJames 03/19/2022 15:01

Do you need any test files @EmilyV99 (discord: EmilyV) ?
(like quests, zs files, etc.)?

=== @ NightmareJames 03/19/2022 15:14

Just FYI, this is also a problem with the packaged-in quest as well, not just my variant
![image](https://cdn.discordapp.com/attachments/954662750070669333/954759764930342992/unknown.png)
If you need anything more let me know

=== @ NightmareJames 03/19/2022 20:41

For comparisons:
2nd Quest:

![image](https://cdn.discordapp.com/attachments/954662750070669333/954842035813249104/unknown.png)
3rd Quest
![image](https://cdn.discordapp.com/attachments/954662750070669333/954842272179044352/unknown.png)

=== @ NightmareJames 03/19/2022 20:43

And New "2022":

![image](https://cdn.discordapp.com/attachments/954662750070669333/954842630825574471/unknown.png)

=== @ Moosh 03/19/2022 21:09

Oh, so new quest _doesn't_ have the issue then?

=== @EmilyV99 (discord: Emily) 03/19/2022 21:26


![image](https://cdn.discordapp.com/attachments/954662750070669333/954853452222193674/unknown.png)
new quests appear to be fine
gotta be a versioning issue of some sort

=== @ Moosh 03/19/2022 21:35

New Quest as in the one by Nightmare. From forever ago. If it was version based I'd expect that one to be broken

=== @ NightmareJames 03/19/2022 21:45

(replying to @ Moosh "Oh, so new quest _doesn't_ ha‚Ä¶"): Apparently not, but 1st and 2nd sure do

=== @EmilyV99 (discord: Emily) 03/19/2022 21:47

that's... confusing

=== @ NightmareJames 03/19/2022 21:48

I'll check Demo Jer/PM when I wake later

=== @ NightmareJames 03/19/2022 21:49

As 1st, 2nd, DemoJer, 3rdEX (not publically available), and New are the oldest quests in existance
In that order

=== @ NightmareJames 03/20/2022 01:19

Demo Jer/PM V 2.55:  (anything else you want me to look up besides 3rdEX please let me know)
![image](https://cdn.discordapp.com/attachments/954662750070669333/954912053007618099/unknown.png)

=== @EmilyV99 (discord: Emily) 03/26/2022 19:27

Can you find the last build that this was not an issue in?
because I have no fucking idea what is wrong here

=== @ NightmareJames 03/26/2022 19:38

OK, might be a while though

=== @EmilyV99 (discord: Emily) 03/26/2022 19:38

I might have a band-aid fix
but, it likely just masks a deeper problem
(band-aid fix being... just force the name to `~Init` every single compile)

https://cdn.discordapp.com/attachments/954662750070669333/957363336511635496/zquest.exe
https://cdn.discordapp.com/attachments/954662750070669333/957363337056882708/zelda.exe
this will hopefully band-aid it

=== @ NightmareJames 03/28/2022 11:01

Definitely band aids it:  I'll further test it at a later date for complications
Mark this as sick please

=== @EmilyV99 (discord: Emily) 03/28/2022 17:58

(meta) thread name was changed: üíäüîì1st.qst missing Init script
## üíäüîìSecrets--Next On Layers (#1286)
@ vlamart opened this issue on 03/21/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/955328752261410866



=== @ vlamart 03/21/2022 04:55

Secrets->Next flag doesn't seem to work on layers other than 0 anymore (it used to work on all layers for a single screen)

https://cdn.discordapp.com/attachments/955328752261410866/955328873648775198/tester.qst

=== @ vlamart 03/21/2022 12:46

Idea: maybe add a Secrets, and specific secret types (like candle, arrow, etc.) flags to the list of weapons in the Triggers tab of all combos. So that any combo could potentially be Secrets->Next or ->Previous, etc.

=== @EmilyV99 (discord: Emily) 03/21/2022 13:01

(replying to @ vlamart "Secrets->Next flag doesn't se‚Ä¶"): @arceusplayer11 (discord: Deedee) ?

=== @arceusplayer11 (discord: Deedee) 03/21/2022 13:15

uhhh

=== @EmilyV99 (discord: Emily) 03/21/2022 13:19

I don't recall touching anything with this recently

=== @ Orithan 03/24/2022 12:57

This is also happening with the ``Step->Secrets`` combos

=== @EmilyV99 (discord: Emily) 03/25/2022 13:18

...you sure it used to work?
also, `Step->Secrets` has NOTHING to do with this @ Orithan ; separate report please

=== @EmilyV99 (discord: Emily) 03/25/2022 13:20

@ vlamart should fix
https://cdn.discordapp.com/attachments/955328752261410866/956905352341889095/zquest.exe
https://cdn.discordapp.com/attachments/955328752261410866/956905352841031690/zelda.exe

=== @EmilyV99 (discord: Emily) 03/25/2022 15:47

(meta) thread name was changed: üíäüîìSecrets--Next On Layers
## Screen Data - Killing All Beatable Enemies Kills.. (#1287)
@ P-Tux7 opened this issue on 03/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/955391244341768292



=== @ P-Tux7 03/21/2022 09:03

2 flags
1. All unbeatable enemies
2. All EWeapons
## Grave Combo Expansion (#1288)
@ P-Tux7 opened this issue on 03/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/955392955269664808



=== @ P-Tux7 03/21/2022 09:10

I understand these aren't a big deal, but I might as well write it up.

Attributes:
-Enemy: What enemy ID to spawn
-Spawn Type (dropdown): Flicker, Puff, or Instant
-Enemy Max (If x enemies exist, do not spawn an NPC)

Flags:
-Use New Behaviour (a la the merging of the four Conveyor Belt types)
-Touched -> Next Combo (AKA BS Graves, but as a combodata flag). Goes to Next Combo even if touched when the combo cannot produce enemies as the enemy count is above its max
-Touch -> Next Does Not Apply When Grave's Enemy Limit Reached - Graves with the above checked that are touched when at their per-combo enemy limit do NOT go to the next combo if they can't spawn an enemy. They stay as they are and do nothing. If the extant enemies are killed, one may spawn an enemy from the combo THEN and only then may it go to the next combo. This means that you cannot purposefully touch BS-Esque Graves while their enemy cap is reached to "use them up" and invalidate their enemy spawning
Yes, I realize Use New Behaviour enables exactly two other flags - one quite estoteric. Though it leaves room for expansion
(FWIW, both LTTP and LA set precedent for multiple grave combos that spawn different enemies - the former with the Light World/Dark World Poes, and the latter with some graves that release Giant Ghinis. So this is actually a thing real Zeldas do.)

=== @ Tsunami Tommy Reload the Shotty 03/21/2022 09:40

Maybe some flags, "Can only be triggered from /top/down/left/right side."
## Random Tile Noise (#1289)
@ Phosphor opened this issue on 03/22/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/955887554861875331



=== @ Phosphor 03/22/2022 17:55

Basically just a quality of life tool for when you're working with more detailed tilesets. The user defines in a combo's properties that when being placed in the editor, there is a chance it will be replaced by one of 15 other defined combos. The frequency at which any detail tile appears can be manipulated by the user with a simple percentage value.

Under the hood, ZQ generates a random 11x16 matrix for every screen with values ranging from 0 to 15 across all entries.  Each value corresponds to one of the defined replacement tiles, with 0 being the parent tile and the modal value across all entries in the matrix.

What this feature can be used for is for detailing things like grass tiles. It can save time since the user doesn't have to go back and manually sprinkle in stuff like flowers or grass tufts onto every screen. The feature can be toggled on or off in the same way as relational and dungeon carver modes are.

=== @ Tsunami Tommy Reload the Shotty 03/22/2022 18:45

A very similar discussion took place on March 5th regarding this.  It's a great concept, really.  I'm glad it's so popular.

"Random Combo type Combo - For placing doodads.."

https://discord.com/channels/876899628556091432/949757024244219954
It won't be a combo of course; it'll be an Alias, at least.

=== @ Phosphor 03/22/2022 18:59

Oh neat. Hopefully it'll be implemented at some point.
## FFC Editor next and previous ffc button (#1290)
@arceusplayer11 (discord: Deedee) opened this issue on 03/22/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/955905147458965504



=== @arceusplayer11 (discord: Deedee) 03/22/2022 19:05

Just some buttons that let you cycle to the previous or next FFC in the list while editing. Would speed up the process of setting up scripts a lot when you need to change multiple arguments.

=== @ Tsunami Tommy Reload the Shotty 03/22/2022 19:12

Yep.  Agreed.

Heck, somehow, I think a text box to accept a number and a "go" button next to it would be LESS productive because who memorizes what data is in what FFC slot?  So those next/prev buttons would indeed be far more valuable.  Probably the most valuable thing.

=== @arceusplayer11 (discord: Deedee) 03/22/2022 19:17

Mostly it's annoying having to click okay, click the dropdown list, click on the next or previous number, then click edit

=== @ Moosh 03/22/2022 19:35

Can I request that these buttons also be on the script tab. Because the dropdown being moved to that tab mildly inconveniences me sometimes when looking for an FFC carrying a script

=== @arceusplayer11 (discord: Deedee) 03/22/2022 19:36

I can have them be on all tabs

=== @EmilyV99 (discord: Emily) 03/22/2022 19:50

@arceusplayer11 (discord: Deedee) you can reference what itemeditor.cpp does for `_reset_default`
## Sword Beam Scroll and Sword Flag - Can Shoot Beams (#1291)
@ P-Tux7 opened this issue on 03/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/955989836672663622



=== @ P-Tux7 03/23/2022 00:42

A la the Slash ability and Can Slash flag dynamic. This turns shooting sowrd beams into a learnable ability. Swords that CAN shoot beams won't shoot beams even if other requirements are met unless you can shoot sword beams
## üîíList for ConnorClark (#1292)
@ NightmareJames opened this issue on 03/23/2022

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/956076257697759242



=== @ NightmareJames 03/23/2022 06:25

@connorjclark (discord: connorclark) 
1.  ZCLauncher outright crashes, can't get it to load
2.  X-Box controller bottom triggers still don't work

Unfortunately work has sapped my dexterity tonight, will continue tomorrow

=== @ NightmareJames 03/23/2022 16:35

OK, new bug, the music stopped playing in Level 2, generally with the heart beep, not exactly sure why
It should have looped, and the changed musics did not play
Video shortly

=== @ NightmareJames 03/23/2022 16:51

Timestamp:  9:13 where it started

=== @ NightmareJames 03/23/2022 16:55


![image](https://cdn.discordapp.com/attachments/956076257697759242/956234783569109032/unknown.png)
Looks like it's definitely related to conflicting music/SFX

=== @connorjclark (discord: connorclark) 03/24/2022 00:52

> still don't work

do they work in nightly/latest alpha?
just updated the Release zip, should fix the launcher issue
same link but here it is again
https://drive.google.com/file/d/1J9RYIfILsqpLF6uFy_L-bIVLkjxpPLJb/view?usp=sharing

=== @ cbailey78 03/24/2022 00:58

Level Palette editor flickers for a few seconds and crashes ZQuest.  The main palette editor works fine.

=== @ NightmareJames 03/24/2022 06:24

(replying to @connorjclark (discord: connorclark) "> still don't work

do they w‚Ä¶"): No they did not, but I think that was an Allegro thing
Not sure 100% though

=== @ NightmareJames 03/24/2022 12:59

How we doing with the music bug @connorjclark (discord: connorclark) ?

=== @connorjclark (discord: connorclark) 03/24/2022 15:59

I haven't reproduced it myself.

=== @connorjclark (discord: connorclark) 03/24/2022 16:12

(replying to @ cbailey78 "Level Palette editor flickers‚Ä¶"): See the same, confirmed it doesn't happen in latest nightly. will work on this next

=== @ NightmareJames 03/24/2022 16:15

Will continue testing then when I get home

=== @connorjclark (discord: connorclark) 03/24/2022 16:23

can you send the allegro.log after each session? maybe the sound issue is logged there

=== @ NightmareJames 03/24/2022 16:48

As requested
https://cdn.discordapp.com/attachments/956076257697759242/956595456127942726/allegro.log

=== @ NightmareJames 03/24/2022 17:58

Music bug showed its ugly head in the Lv. 5 Aquamentus room again, otherwise clean finish to Tiny Quest:  Gold
Build generally passes the basics, we're moving onto Demo ZX

=== @ NightmareJames 03/24/2022 18:01

Build also seems to handle reasonable (and somewhat unreasonable) enemy limits just fine

=== @ NightmareJames 03/24/2022 18:19

Timestamp 40:00:  The Aquamentus room.  The music bug will repeat itself under different conditions
As requested
https://cdn.discordapp.com/attachments/956076257697759242/956618273888292884/allegro.log

=== @ NightmareJames 03/24/2022 18:25

Now that I've seen this twice, definitely throwing this back at you.  You should probably default this to the directory you're in, maybe even the module directory
![image](https://cdn.discordapp.com/attachments/956076257697759242/956619662114832434/unknown.png)

=== @EmilyV99 (discord: Emily) 03/24/2022 18:38

That's set in the config file
Guessing the configs packaged werent default?

=== @ NightmareJames 03/24/2022 18:45

I guess so, the controller keys were mapped too (similar to mine, but a little different)
I usually don't touch configs unless I absolutely have to
(outside of controller mapping)

=== @EmilyV99 (discord: Emily) 03/24/2022 18:55

So, yeah, that's not a build issue, Connor just didn't post a clean package
@connorjclark (discord: connorclark) `output/_auto/buildpack.bat` should be of assistance for that

=== @connorjclark (discord: connorclark) 03/24/2022 18:58

I'm putting the output of that script in the release folders, so there probably is a real bug here
(otherwise nothing would run iirc)

=== @EmilyV99 (discord: Emily) 03/24/2022 18:58

The output of that script is a full build package with all files
It copies the files from `Release` to its' output, along with all the config files and such
If you have 7zip installed, the script should even zip it up for you

=== @connorjclark (discord: connorclark) 03/24/2022 19:01

Im just copying it somewhere else where my build artifacts go, it's all the same. Idk if that extra step I did was necessary tho. Is the file not in my release zip??
the config file
afk can't check

=== @EmilyV99 (discord: Emily) 03/24/2022 19:01

If you launch the program even once from the folder
It changes some of the configs
You don't want to post it with changed configs

=== @connorjclark (discord: connorclark) 03/24/2022 19:02

ah, well I'm definitely running the program first before I distribute to verify haha
good to know

=== @EmilyV99 (discord: Emily) 03/24/2022 19:02

So should post it *directly* from the script output
For instance, your path was saved in the config file as the default path
(replying to @ NightmareJames "Now that I've seen this twice‚Ä¶"): ^

=== @connorjclark (discord: connorclark) 03/24/2022 19:02

Cool, I'll change my process to accommodate, thanks

=== @EmilyV99 (discord: Emily) 03/24/2022 19:03

üëç

=== @connorjclark (discord: connorclark) 03/24/2022 19:03

Doh, now I see the image has my local path, haha yeah obviously I see that's an issue now
My b

=== @ NightmareJames 03/24/2022 23:27

White Sword Room in Demo ZX:  Music bug for the 3rd time
As Requested
https://cdn.discordapp.com/attachments/956076257697759242/956695899071987722/allegro.log

=== @connorjclark (discord: connorclark) 03/25/2022 01:30

and the music bug doesnt happen for you on nightly?
been reviewing the new sound code and it looks pretty similar to old allegro, still looking around for what it could be

=== @ NightmareJames 03/25/2022 02:20

I haven't had it happen on nightly

=== @ cbailey78 03/25/2022 05:43

The new allegro sure seem to open up a can of worms.  first, the file browser bug, then some editor dialog crashing ZQ and who knows what other bugs are hidden, so I'm sticking to the nightly builds for now.

=== @connorjclark (discord: connorclark) 03/25/2022 07:07

(replying to @ cbailey78 "Level Palette editor flickers‚Ä¶"): Been looking at this bug today. Very nice that it happens for Levels (new gui), but not Main (old gui), which gave me something to compare against while debugging. It _seems_ only the new gui system will modify the hardware screen while the a5 rendering thread is trying to read from it (crash!), and the old gui doesn't, but I wasn't able to fully figure out why.

One thing I did notice is that the new gui will send a MSG_DRAW event a lot more than the old one, which results in `draw_cset_proc` being called every frame vs just once. Perhaps the issue exists with the old gui too, but with this excessive re-rendering it's far more likely to happen in the new gui (without locks).

I added a lock for the screen around the drawing in `dialog_proc` and it fixed the crash and flickering. but it'll still flicker when the mouse is held down (lol) and it is noticeable laggier than the old gui. Still needs more work, but at least it shouldn't crash now. Hopefully we can figure out a way to avoid all those extra MSG_DRAWs?

latest version https://drive.google.com/file/d/1J9RYIfILsqpLF6uFy_L-bIVLkjxpPLJb/view?usp=sharing
@ cbailey78 for sure don't use this build as a daily driver, that'd be ill-advised üôÇ I appreciate you giving it a spin and reporting issues so far

=== @ NightmareJames 03/26/2022 16:12

Launcher seems cleaned up.  üëç
Waiting for my stream to end so you don't get background noise

=== @ NightmareJames 03/28/2022 11:30

Music bug something to do with the looping code
Timestamp:  8:00

=== @ NightmareJames 06/27/2022 04:45

X-Box secondary triggers (the bottom triggers) still not working in Allegro 5
@connorjclark (discord: connorclark)

=== @connorjclark (discord: connorclark) 06/27/2022 04:46

does it work here https://gamepad-tester.com/
also share the version that page says your gamepad is

=== @ NightmareJames 06/27/2022 04:50

OK, does work here, where do I find the version?

=== @ NightmareJames 06/27/2022 04:53

Basically says "xinput" and nothing else

=== @connorjclark (discord: connorclark) 06/27/2022 04:56

Just screenshot the entire page. I don't have a controller on hand so I can't see.
I'm looking for a controller name or version number or somethiung

=== @ NightmareJames 06/27/2022 05:02


![image](https://cdn.discordapp.com/attachments/956076257697759242/990844462806761502/unknown.png)

=== @connorjclark (discord: connorclark) 09/04/2022 03:22

(meta) thread name was changed: üîíList for ConnorClark
## Magic Divisor Ring (#1293)
@ P-Tux7 opened this issue on 03/24/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/956417481730310164



=== @ P-Tux7 03/24/2022 05:01

Does what the Z1 Ring (Health Divisor Ring) does but for magic.
Flags:
-Use Fractional Divisor
-Divides Non-Item Magic Drains (i.e. Magic Drain touch effects on enemies. Draining 64 MP Effect Strength would now only drain 32 if you had a 1/2 magic ring with this checked, like a Z1 Ring with hearts.)

=== @ bigjoe 03/24/2022 05:30

what about any counter divisor rings

=== @EmilyV99 (discord: Emily) 03/24/2022 05:55

doing generic things for counter doesn't really work for items
because of the way items work
only the highest level counter ring would work
so if you gave multiple for different counters
only one would work
unless we implemented it in an entirely different way to other items

=== @ Orithan 03/24/2022 08:07

Do I sense like 30 different itemclasses for counter rings coming?

=== @ P-Tux7 03/24/2022 08:48

ehh
if you're using the Custom counters, you're likely using scripts anyways
so that leaves us with Magic, Bombs, Super Bombs, Arrows, Anywhere Keys, Level Keys, and Rupees/Health (when used to fuel an item). many of which are... incredibly niche either don't often use more than one at a time (so a divisor is useless) or are barely used as costs at all
and because magic is a much more versatile counter than the others it obviously should get first dibs

=== @ P-Tux7 03/24/2022 08:52

i can name one quest where hearts are used as ammo, one where multiple rupees fuel the goddess spells, and *none* where the "multiple key cost" feature added to lockblocks is used
compare that to magic
## ‚úÖüîíZScript syntax highlighting for Notepad++ (2.55) (#1294)
@ Alucard648 opened this issue on 03/24/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/956486198073909260



=== @ Alucard648 03/24/2022 09:34

Folding and auto indent fails to work for scopes in Notepad++ 8.3.3
https://cdn.discordapp.com/attachments/956486198073909260/956486200527581195/ZSCR_17JUN2021_DARK.xml

![image](https://cdn.discordapp.com/attachments/956486198073909260/956486288519860274/n.png)

=== @EmilyV99 (discord: Emily) 03/24/2022 14:23

folding might be fixable
auto-indent I don't think is a thing

=== @EmilyV99 (discord: Emily) 03/26/2022 19:20

[#tools-and-misc](https://discord.com/channels/876899628556091432/953456840845426748) @ Alucard648

=== @ Alucard648 03/26/2022 23:13

Thanks.

=== @EmilyV99 (discord: Emily) 03/26/2022 23:48

(meta) thread name was changed: ‚úÖüîíZScript syntax highlighting for Notepad++ (2.55)
## ‚úÖüîíCan't seem to fix Made By Field in 104 Nightlies (#1295)
@ NightmareJames opened this issue on 03/24/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/956560349992206416



=== @ NightmareJames 03/24/2022 14:29

Pic incoming

![image](https://cdn.discordapp.com/attachments/956560349992206416/956560412374102106/unknown.png)
When I press "OK" it seems to stay static

=== @EmilyV99 (discord: Emily) 03/24/2022 14:36

oh *fek*
`&` is a special character in text procs
that creates an underline
and I didn't handle that case for this...blehg

=== @EmilyV99 (discord: Emily) 03/25/2022 13:02

@ NightmareJames
https://cdn.discordapp.com/attachments/956560349992206416/956900944858193950/zquest.exe
https://cdn.discordapp.com/attachments/956560349992206416/956900945424429116/zelda.exe
(meta) thread name was changed: ‚úÖüîíCan't seem to fix Made By Field in 104 Nightlies

=== @ NightmareJames 03/25/2022 16:02

Did not fix it.  The author field is still busted

=== @EmilyV99 (discord: Emily) 03/25/2022 16:09

??
Screenshot?

=== @ NightmareJames 03/25/2022 16:26


![image](https://cdn.discordapp.com/attachments/956560349992206416/956952332208308244/unknown.png)
![image](https://cdn.discordapp.com/attachments/956560349992206416/956952332409667634/unknown.png)
![image](https://cdn.discordapp.com/attachments/956560349992206416/956952332690673714/unknown.png)

=== @EmilyV99 (discord: Emily) 03/25/2022 16:29

. . . hmm, I see what's happening

=== @EmilyV99 (discord: Emily) 03/25/2022 16:32

@ NightmareJames
https://cdn.discordapp.com/attachments/956560349992206416/956953844670164992/zelda.exe
https://cdn.discordapp.com/attachments/956560349992206416/956953845253177354/zquest.exe

=== @ NightmareJames 03/25/2022 16:37

Dead this time
## ‚ùåüîíAutomatic ZC updating utility (#1296)
@ Alucard648 opened this issue on 03/25/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957033450165133372



=== @ Alucard648 03/25/2022 21:49

So anyone can keep up with latest ZC development updates without having ether multiple ZC folders, or issues caused by overwriting ZC internal files.

=== @EmilyV99 (discord: Emily) 03/25/2022 22:14

The easiest way to do this
is to keep all of YOUR files outside the ZC folder
so like, make `ZC Stuff` as a folder
and in that folder, have `ZC` which is the ZC folder
and `Quests`, `Scripts`, etc as separate folders
outside the ZC folder
then you don't need to ever touch any of your files when updating
the only thing you would need to do is update your controls (unless you copy your old config, which is *usually* ok, though can very occasionally cause issues)
and copy your save file, if you care to keep it

=== @EmilyV99 (discord: Emily) 03/28/2022 01:49

(meta) thread name was changed: ‚ùåüîíAutomatic ZC updating utility
## Misc Colors Transparency (#1297)
@ vlamart opened this issue on 03/26/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/957102804466552873



=== @ vlamart 03/26/2022 02:24

Setting some Misc. Color options as 0x00 does not make that option transparent (BS Minimap Dark is an example)

=== @ P-Tux7 03/26/2022 02:47

Is this SUPPOSED to happen?
Like, either being transparent or black
Which is "on-spec" here, developers?

=== @ vlamart 03/26/2022 02:50

I'm not sure if it is supposed, either way it is inconsistent between the options whether it is black or transparent. It would at least be nice to specify which ones with a "?" or something if it can't be streamlined

=== @ cbailey78 03/26/2022 04:35

What I understand from an NES standpoint, the 0x00 in the background would be black wheras 0x00 would be transparent in the sprite layer.  The minimap rectangle is in a background layer and te minimap marker would be in a sprite layer.
## mapdata drawscreen (#1298)
@arceusplayer11 (discord: Deedee) opened this issue on 03/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957238628839481414



=== @arceusplayer11 (discord: Deedee) 03/26/2022 11:24

Despite there being a way to read and write to temporary layers, there's no way to actually draw those layers in their entirety. As far as I know, the only way to draw an accurate Layer 0 (including changes made by Screen->ComboD) is to raw all 176 combos manually, per layer that might be different.

=== @EmilyV99 (discord: Emily) 04/28/2022 10:20

@arceusplayer11 (discord: Deedee) you're the one who made the damn thread for this

=== @arceusplayer11 (discord: Deedee) 04/28/2022 10:21

of course lmao
## Aquamentus Class Expansion (BS Aquamentus) (#1299)
@ P-Tux7 opened this issue on 03/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957366672472309800



=== @ P-Tux7 03/26/2022 19:53

I think I've hit on how to make BS Aquamenti possible without tons of hardcoding.

Add Firing Styles: 1 Shot, 1 Shot Fast, 3 Shots Fast, 5 Shots, and 5 Shots Fast

Flag: Morphs

Attribute: Morph Into (0-511)

The Morph Into attribute is different from the Transform attribute which every enemy has. Upon dying, the Aquamentus enemy, should it have the Morph flag, will spawn a new enemy (INTENDED to be used with the Aquamentus class) at its exact coordinates, and that new enemy will start out invincibly-flashing (CSet or flicker depending on the QR). That way, three things happen:
1. It appears to be the same enemy, but you can change its graphics and...
2. Its firing style can be different (as in BS Aquamentus' 2nd (3 Shots Fast) and 3rd phases (5 Shots (Fast?)))
3. Its defenses can be different (as seen in BS Aquamentus' acquired immunity to everything but sword(?) in the second and third phases, but NOT the first)

In essence, a way of linking three Aquamentus enemies to look like they're three phases of one enemy.

=== @EmilyV99 (discord: Emily) 03/28/2022 01:48

why just aquamentus, why not just make this an enemy thing
and since its one-to-one, it should be able to work with standard room spawning mechanics, unlike splitting/tribbling enemies

=== @ P-Tux7 03/28/2022 03:49

Sure if you want to

=== @EmilyV99 (discord: Emily) 03/28/2022 03:58

@arceusplayer11 (discord: Deedee)
## Ganon Enemy Type on Ganon Room seems Hardcoded (#1300)
@ NightmareJames opened this issue on 03/26/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/957395001816518656



=== @ NightmareJames 03/26/2022 21:45

Was doing my redo of 3rdEX, made two enemies, the traditional Ganon, and a copy called "True Ganon", which is powered up.  Took off the spawn Ganon rooms for default Ganon, this worked fine for Level 9.  Then did the "real" Level 9, and Ganon showed up, not True Ganon.  Mind you this was in test mode, not in a real quest

=== @ P-Tux7 03/26/2022 23:08

1. Make both rooms NOT Ganon rooms
2. Select each enemy in the room enemy list

=== @ P-Tux7 03/26/2022 23:09

If you want True Ganon to be in a Ganon room, edit the ORIGINAL Ganon, which is the one that shows up in Ganon rooms. This is what 4th Quest did. His enemy # is currently hardcoded. And make the "Z1" Ganon that precedes him in the quest the copy
I'm not sure if this will be solved in the future by selecting which enemy # spawns in Ganon rooms, or just by letting you set Ganon enemies in the enemy editor to do the Ganon room stuff. But not right now.

=== @EmilyV99 (discord: Emily) 03/26/2022 23:49

Ganon is fucking weird
and is easily one of the buggiest and most spaghetti bullshit things
in all of zc

=== @ NightmareJames 03/26/2022 23:58

Needs more testing

=== @ P-Tux7 03/27/2022 00:06

direct all ganon inquiries and complaints to deedee

=== @ NightmareJames 03/27/2022 00:13

Nvm, I fixed it
Plus gave "fake" Ganon a different palette
I switched endgame Ganon to the hardcode as instructed and made Ganon Z1 a copy and a different number and enabled the rule
Took some work but it worked
Fake Ganon throws fireballs, Real Ganon throws bats
(which real Ganon's do a lot more)

=== @ P-Tux7 03/27/2022 00:20

Ganons can summon?!?
You're AWFUL

=== @ NightmareJames 03/27/2022 00:26

No, just a sprite replacement
So he acts like LTTP

=== @ P-Tux7 03/27/2022 00:27

Hmm... would be a nice EWeapon script
The phase 3 circling ones
## ‚ùåüîíD-Map Rule for Classic Lv. 3 coloring on any level (#1301)
@ NightmareJames opened this issue on 03/26/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957395483653996554



=== @ NightmareJames 03/26/2022 21:47

Right now it seems restricted to Level 3 on classic quests and can only be turned off by compat rules.  What if you had the burning desire to use it on a different colored level somewhere else?

=== @EmilyV99 (discord: Emily) 03/26/2022 22:37

what does this even do
and why is it worth the amount of effort it would take

=== @ P-Tux7 03/26/2022 23:14

Replaces indexed colour #XXX (one of the CSet 6 ones) with a hardcoded colour (it's not even a Misc. Colour IIRC) if the current DMap's Level is 3 *and* the Level 3 CSet 6 Fix is off
Under NESFix
Though yeah like, I think that's a waste of a flag

=== @ P-Tux7 03/26/2022 23:16

I can see an argument for per-DMap atmospheric Link palettes but just making his skin lighter - and a hardcoded colour at that - is NOT the way to do it.

=== @ P-Tux7 03/26/2022 23:19

(And due to Ring palettes would be a headache to implement)

=== @EmilyV99 (discord: Emily) 03/26/2022 23:47

ah, it is an NES fixes.
So, general rule of thumb
NES fixes stuff are fixing NES bugs
and, that's all there is to them
nothing else will be added for them
(meta) thread name was changed: ‚ùåüîíD-Map Rule for Classic Lv. 3 coloring on any level
## ‚úÖüîíInit Data crashes ZQuest with large item counts (#1302)
@ Russ opened this issue on 03/27/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/957652082310131734



=== @ Russ 03/27/2022 14:47

As discussed here: https://discord.com/channels/876899628556091432/876908472728453161/957650832302673930
Trying to look at an item class with too many items to be displayed in the items window will crash ZQuest. This is easier to see in small mode, as fewer items can be displayed there.

=== @EmilyV99 (discord: Emily) 03/28/2022 17:53

K, so
for a test, I just made a fuckton of things into amulets

![image](https://cdn.discordapp.com/attachments/957652082310131734/958061395704967228/unknown.png)
and voila
and large
![image](https://cdn.discordapp.com/attachments/957652082310131734/958061602383491182/unknown.png)

=== @EmilyV99 (discord: Emily) 03/28/2022 17:58

@ Russ

https://cdn.discordapp.com/attachments/957652082310131734/958062548601679982/zelda.exe
https://cdn.discordapp.com/attachments/957652082310131734/958062549323096174/zquest.exe
(meta) thread name was changed: ‚úÖüîíInit Data crashes ZQuest with large item counts

=== @ Russ 03/28/2022 18:01

Yup, working perfectly now. Thanks!
## ‚úÖüîíJumbled string sorting in the latest build (#1303)
@ FireSeraphim opened this issue on 03/27/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/957670584555302952



=== @ FireSeraphim 03/27/2022 16:01

I can't pinpoint which build broke the string organization in my quest on the editor side but it's kinda distressing. The following screenshot explains it all. I had my strings organized by category and now it's a gibbering mess.

![image](https://cdn.discordapp.com/attachments/957670584555302952/957670624556355664/Screen_Shot_015.PNG)

=== @ FireSeraphim 03/27/2022 19:48

So I went to re-sort my strings out, I saved, took a break then went to resume my sorting efforts and now the sorting order is even more messed up!
![image](https://cdn.discordapp.com/attachments/957670584555302952/957727950185320468/Screen_Shot_016.PNG)

=== @EmilyV99 (discord: Emily) 03/28/2022 02:12

It looks like it's just putting them numerically
weird

=== @EmilyV99 (discord: Emily) 03/28/2022 02:17

Did you get a popup with something like this?
![image](https://cdn.discordapp.com/attachments/957670584555302952/957825856280088616/unknown.png)
because if not, I have no idea what would be causing this

=== @ FireSeraphim 03/28/2022 20:31

I didn't see that

=== @EmilyV99 (discord: Emily) 03/28/2022 20:35

oh, fek
I see what's wrong
I'm a dumbass

=== @EmilyV99 (discord: Emily) 03/28/2022 20:41


https://cdn.discordapp.com/attachments/957670584555302952/958103661651849286/zquest.exe
https://cdn.discordapp.com/attachments/957670584555302952/958103662331310150/zelda.exe
this should fix @ FireSeraphim, though you either will need to load a backup from before it broke or re-order them again, as the issue did affect saving the quest file.
(meta) thread name was changed: üíäüîìJumbled string sorting in the latest build

=== @ FireSeraphim 03/28/2022 23:40

Thank You. I'll let you know how it turns out

=== @ FireSeraphim 03/30/2022 18:43

Sorry Emily, we're not quite out of the woods yet

=== @ FireSeraphim 03/30/2022 18:45

I think your fix is kinda incomplete because there's a desync in what the editor displays and what the actual game displays
![image](https://cdn.discordapp.com/attachments/957670584555302952/958799103062589510/Screen_Shot_017.PNG)

=== @ FireSeraphim 03/30/2022 18:48

In this example string number 13 is supposed to goto string 14 but the editor says it's going to string 4
![image](https://cdn.discordapp.com/attachments/957670584555302952/958799778769174568/Screen_Shot_010.PNG)
![image](https://cdn.discordapp.com/attachments/957670584555302952/958799779004022834/Screen_Shot_012.PNG)

=== @EmilyV99 (discord: Emily) 03/30/2022 18:49

that's
not a bug
I don't think?
or
hmm
the `-->` thing is fucking weird
but, uh, this is not related at all
to the previous bug

=== @ FireSeraphim 03/30/2022 18:51

would it help if I just send you my quest's latest build so you can poke at it?

=== @EmilyV99 (discord: Emily) 03/30/2022 18:51

might

=== @ FireSeraphim 03/30/2022 18:52

gimme a few seconds

=== @EmilyV99 (discord: Emily) 03/30/2022 19:10

. . .

![image](https://cdn.discordapp.com/attachments/957670584555302952/958805514433740860/unknown.png)

![image](https://cdn.discordapp.com/attachments/957670584555302952/958805556049637496/unknown.png)
So, `The 7th thing in the list is Message String 13`
`The current thing is Message String 14`, and `the thing before this is the 7th thing in the list`, and `the thing before this is Message String 13`
all of that seems right
and then `The nextstring of MessageString 13 is 14`
. . . wtf

=== @ FireSeraphim 03/30/2022 19:13

I know, right?

=== @EmilyV99 (discord: Emily) 03/30/2022 19:14


![image](https://cdn.discordapp.com/attachments/957670584555302952/958806435733585940/unknown.png)
what the fuck

=== @ FireSeraphim 03/30/2022 19:16

I think I may have exposed a serious festering rathole of a problem

=== @EmilyV99 (discord: Emily) 03/30/2022 19:17

question; does it display correctly *in ZC*
because, methinks I just noticed something
...I think `nextstring` isn't the `index`, but the `listpos`
so, the question is, was that fucked up during string editor stuff (i.e. fucked up in zc too)
or is the indent here the thing that is fucked up
....Oh, fun, and I just found another unrelated bug

=== @ FireSeraphim 03/30/2022 19:35

It displays correctly in ZC
I actually tested that a few minutes ago

=== @EmilyV99 (discord: Emily) 03/30/2022 19:59

ahk
should be fixed
as should the other bug I ran into, which frankly was far worse

https://cdn.discordapp.com/attachments/957670584555302952/958818002223124490/zquest.exe
https://cdn.discordapp.com/attachments/957670584555302952/958818002827112598/zelda.exe

=== @ FireSeraphim 03/30/2022 21:34

I'll let you know how it pans out

=== @ FireSeraphim 03/30/2022 22:40

Tested your newest build. It seems like there's no winnin' for losing here. The text displays like it should ingame but the editor is still being wonky on the next string box
![image](https://cdn.discordapp.com/attachments/957670584555302952/958858270733369364/Screen_Shot_001.PNG)
![image](https://cdn.discordapp.com/attachments/957670584555302952/958858270922133514/Screen_Shot_002.PNG)
On the editor side of things it's still showing the next string as 4 instead of 14 but it goes to 14 like it should ingame

=== @EmilyV99 (discord: Emily) 03/30/2022 22:47

oh wait
I see
I had this backwards

=== @EmilyV99 (discord: Emily) 03/30/2022 22:59

building now

=== @EmilyV99 (discord: Emily) 03/30/2022 23:07

@ FireSeraphim
https://cdn.discordapp.com/attachments/957670584555302952/958865204068876298/zquest.exe
https://cdn.discordapp.com/attachments/957670584555302952/958865204618350672/zelda.exe

=== @ FireSeraphim 03/30/2022 23:08

Thank you, I'll take these for a spin and let you know how it turns out

=== @ FireSeraphim 03/30/2022 23:11

Not quite there yet, No I did not tamper with the strings
![image](https://cdn.discordapp.com/attachments/957670584555302952/958866051389587496/Screen_Shot_004.PNG)

=== @EmilyV99 (discord: Emily) 03/30/2022 23:14

wtf
11?

=== @ FireSeraphim 03/30/2022 23:15

yep. But you are close though

=== @EmilyV99 (discord: Emily) 03/30/2022 23:23

@ FireSeraphim HERE

https://cdn.discordapp.com/attachments/957670584555302952/958868983677857792/zelda.exe
https://cdn.discordapp.com/attachments/957670584555302952/958868984181190666/zquest.exe
please fucking work

=== @ FireSeraphim 03/30/2022 23:24

You got it!
I can say that the problem has been fully quashed on the editor side

![image](https://cdn.discordapp.com/attachments/957670584555302952/958869497039695879/Screen_Shot.PNG)

=== @ FireSeraphim 03/30/2022 23:26

Consider this bug done and dusted, I also just tested it in game and the strings are fine.

=== @EmilyV99 (discord: Emily) 03/30/2022 23:26

thank god

=== @EmilyV99 (discord: Emily) 03/30/2022 23:37

(meta) thread name was changed: ‚úÖüîíJumbled string sorting in the latest build
## Whistle draining lake palette editor (#1304)
@ cbailey78 opened this issue on 03/27/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957700341950971924



=== @ cbailey78 03/27/2022 17:59

I think we should have the ability to edit the draining lake palette in the misc data.
## ‚ùåüîíDrop items and set custom drop set when triggering combo flag (#1305)
@ Phosphor opened this issue on 03/28/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957799624343699496



=== @ Phosphor 03/28/2022 00:33

The idea is that in addition to being able to use the trigger tab in the combo editor to set different item triggers, you can set whether or not triggering this combo has a chance for items to drop, similar to tall grass or bushes. Enabling item drops also allows the user to specify what item drop set the combo will reference when triggered, with tall grass (12) being the default value.

An additional idea is that the user can specify if the combo spawns sprites and their visual behaviors when triggered like cut tall grass or leaves from cut bushes, flower pedals, or entirely custom sprites that behave like cut bush leaves.

This can make it possible to have pots in boss rooms guarantee heart/ammo drops, like in the mainline Zelda games or bombable rocks that happen to also drop items, as a ZC approximation to something like the ore veins in Breath of the Wild.

=== @EmilyV99 (discord: Emily) 03/28/2022 01:46

there are enough combos that have this capability
if we keep adding everything like this, we'll end up where you can have any combo be doing any thing, which will both be an absolute mess of code, as well as a lot of redundancies
(meta) thread name was changed: ‚ùåüîíDrop items and set custom drop set when triggering combo flag

=== @ Phosphor 03/28/2022 02:02

Even just the ability to change what item drop set a slashable combo uses? I can't think of many redundancies arising from that, at least visible on the user's end.

=== @EmilyV99 (discord: Emily) 03/28/2022 02:03

you already can do that on bush and such combos

![image](https://cdn.discordapp.com/attachments/957799624343699496/957822453818736670/unknown.png)

=== @ Phosphor 03/28/2022 03:12

huh TIL
I'm not used to a lot of the new features in 2.55 since the majority of my experience has been with 2.10 and 2.50

=== @EmilyV99 (discord: Emily) 03/28/2022 03:14

it is best to poke at the editor to see if something exists before requesting it

=== @ Phosphor 03/28/2022 16:00

I did and didn't notice that specifically for whatever reason
## Enemy Defense types - Bypass Shield,   Break Shield & Repair Shield (#1306)
@ Alucard648 opened this issue on 03/28/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/957970271619391528



=== @ Alucard648 03/28/2022 11:51

Title says all.
## [A104 Nightly] Digdogger Kids Making Boss Noise When Stunned (#1307)
@ P-Tux7 opened this issue on 03/28/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/958070922202464276



=== @ P-Tux7 03/28/2022 18:31

Shouldn't it be the normal stun noise?

=== @ P-Tux7 03/28/2022 18:36

(meta) thread name was changed: [A104 Nightly] Digdogger Kids Making Boss Noise When Stunned

=== @ NightmareJames 03/28/2022 18:37

That's quest specific
I set it when doing it.  Might fix it at a later time

=== @ Alucard648 03/29/2022 10:32

It think, it should be generalized, as flag "Keep emitting ambient sound, when stunned".

=== @ P-Tux7 03/29/2022 19:46

No I meant it made the "boss hurt" sound when stunned

=== @ NightmareJames 03/29/2022 19:47

I manually set that
I know that you're talking about

=== @ P-Tux7 03/29/2022 19:47

So maybe it's not a bug after all. Though this is a good idea Alucard
## Bomb + Super Bomb Radius size (#1308)
@ Lost Attempt opened this issue on 03/29/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/958170301160632400



=== @ Lost Attempt 03/29/2022 01:06

being able to have a flag that affects bomb blast size for both bombs and super bombs. so that a bomb can have super bomb blast size and a super bomb can have bomb blast size.
## üíäüîìUndoing moved tiles doesn't update combos (#1309)
@ Russ opened this issue on 03/29/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/958193068853575684



=== @ Russ 03/29/2022 02:37

Copying a tile, moving to a different tile, and pressing M will move the tile. Pressing U will undo it. Previously, this worked fine. Now, even if you press undo, any combos that pointed to that tile keep pointing to the new, undone tile location. Horridly inconvenient, given that the only time I use the move function is when trying to highlight tiles to make into combos with M and forgetting I still have tiles on the clipboard.

=== @EmilyV99 (discord: Emily) 03/29/2022 02:40

aye
this is how it's always worked
because undoing isn't smart
it literally just copies the old tile buffer

=== @ Russ 03/29/2022 02:40

... Are you positive?
I'm almost certain it didn't have this buggy behaviour before

=== @EmilyV99 (discord: Emily) 03/29/2022 02:40

it always has
because
it literally just stores a copy of all the tile data
and it just restores that
it does not store any information about what you last did
so, since it has no idea that you 'moved' tiles, it can't very well undo the side-effects of that
this has been known about for quite a while
but, requires literally rewriting a new `undo` from scratch to fix

=== @ Russ 03/29/2022 02:43

Can we at least get a way to disable the move command if that's not going to happen, then?

=== @EmilyV99 (discord: Emily) 03/29/2022 02:44

it is planned to happen

=== @arceusplayer11 (discord: Deedee) 03/29/2022 03:39

This bugged the shit out of me in 2.53
and still bugs the shit out of me now
so, uh, good luck Emily!
(I'd offer to do it but I have a to-do list and I'm already far behind)

=== @EmilyV99 (discord: Emily) 03/31/2022 20:34

https://discord.com/channels/876899628556091432/876908472728453161/959181521997144135
This is now MOSTLY working
There is one slight edge-case that isn't going to be fixable without a hell of a lot larger of a rewrite
If you move a combo or tile, and that move *OVERWRITES* a combo/tile used by something else, then when you undo, it will revert everything that moved originally.... AND everything that you overwrite will be dragged with it.
i.e., it basically just does `move` in the reverse direction
but, with the standard undo behavior of restoring the combos/tiles that the move overwrote originally
just, anything USING those combos/tiles won't be anymore
...if you `Move` into empty/unused space, it should work *perfectly* to undo.

https://cdn.discordapp.com/attachments/958193068853575684/959189870339817532/zquest.exe
https://cdn.discordapp.com/attachments/958193068853575684/959189870956396554/zelda.exe
@ Russ feel free to try it out
(meta) thread name was changed: üíäüîìUndoing moved tiles doesn't update combos

=== @EmilyV99 (discord: Emily) 03/31/2022 20:39

The only way to get around the one edge case, would be to literally make gigantic arrays of every enemy/combo/item/etc in the game that uses a tile, and store a copy of their tiles; which, uh, is a lot of extra memory to be eating, and a lot of work to maintain. Probably worth doing at some point (which is why I'm marking this sick instead of complete), but, fuck if I'm touching that any time soon

=== @arceusplayer11 (discord: Deedee) 03/31/2022 21:37

Need to make it so Move is Ctrl + M
accidentally moving when you meant to make a combo is annoying

=== @EmilyV99 (discord: Emily) 03/31/2022 21:37

I'd change make, not move
Move/copy/paste are all basic operations, shouldn't require keys
Also, beware; some modifier keys already do stuff
I think alt and shift already do something when pasting/moving?

=== @ Russ 03/31/2022 21:38

I can't speak for everyone, but I use Make daily and have never once used Move
I'd make the less frequently used shortcut require the modifier

=== @EmilyV99 (discord: Emily) 03/31/2022 21:39

I have used make once and move dozens of times
So...

=== @arceusplayer11 (discord: Deedee) 03/31/2022 21:39

Mostly, accidentally doing a move is more annoying than accidentally doing a make, so move should require you to hold down a key (so if you forget to hold it or it doesn't register, it does a make), instead of the inverse

=== @EmilyV99 (discord: Emily) 03/31/2022 21:40

Eh, that's a fair point... though I can tell you right now it would annoy the crap out of me as a user
If you're going to do it, make a config to swap it

=== @arceusplayer11 (discord: Deedee) 03/31/2022 21:41

yeah sure

=== @EmilyV99 (discord: Emily) 03/31/2022 21:41

That way everyone can be happy

=== @ Russ 03/31/2022 21:41

I'm always on board for more configuration options

=== @arceusplayer11 (discord: Deedee) 03/31/2022 21:42

you don't get them, filthy small mode user üò†

=== @EmilyV99 (discord: Emily) 03/31/2022 21:43

Paste and move make use of Alt and Shift already
Overlay uses Ctrl already
So beware overlapping those
(It looks like Alt hflips the paste, and Shift vflips it? )
Overlay uses all 3 actually
Alt and Shift are same as paste
And ctrl makes it not remove from the clipboard
## ‚úÖüîíRuleset option - All ZScript fixes (#1310)
@ Orithan opened this issue on 03/29/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/958216922397278248



=== @ Orithan 03/29/2022 04:11

This ruleset can used to just apply all rules relating to ZScript fixes to your quest.
There are a lot of tiny rules which relate to small ZScript fixes being added by 2.55, which can be difficult to keep track of. This aims to standardize script settings for modern quests to reduce the likelihood of running into snags caused by the odd fix or two not being set or unset correctly in scripts.

=== @EmilyV99 (discord: Emily) 03/29/2022 04:12

`Modern` should do this

=== @ Moosh 03/29/2022 04:15

The issue there is that it sets _all_ rules, when the script and bugfix ones are continuing to expand with the editor and quests made in older builds might want to standardize them
While still keeping gameplay rules unchanged

=== @ Moosh 03/29/2022 04:21

Like say I boot up New BS 3.1, looking to make an old school quest with mostly Zelda 1 rules. But I also want to write scripts without emulating bugs that have long since been fixed. I'd be greeted with with this:
![image](https://cdn.discordapp.com/attachments/958216922397278248/958219255462109204/unknown.png)
And then a bunch more in the script rules menu
![image](https://cdn.discordapp.com/attachments/958216922397278248/958219472676737054/unknown.png)

=== @ Moosh 03/29/2022 04:23

As someone who's stumbled into the issue before already I'll usually know which rules I have to check or uncheck to fix things that break. But new scripters will have to contend with things like...item scripts just not working at all because they're emulating 2.5 where they only ran for one frame. Ew.

=== @ Moosh 03/29/2022 04:27

So what I think would be nice would be a button above Pick Ruleset called "Standardize Bugfixes" or something of the sort, and it sets all of these save for maybe NES fixes (those are their own category because of some people's nostalgia after all) to what they should be

=== @EmilyV99 (discord: Emily) 04/01/2022 01:01

For the record, all `compat` tab rules should be cleared by ANY ruleset

=== @EmilyV99 (discord: Emily) 04/01/2022 01:30

OK so

![image](https://cdn.discordapp.com/attachments/958216922397278248/959263503053623376/unknown.png)

![image](https://cdn.discordapp.com/attachments/958216922397278248/959263543272824852/unknown.png)
Rulesets will set *every single rule*
Rule *TEMPLATES* will specifically set/unset some rules, while leaving all other rules alone
Check multiple to apply multiple
`Bugfix` unchecks everything in the `Compat` tab
`ZScript Bugfix` sets script-related rules

=== @EmilyV99 (discord: Emily) 04/01/2022 01:34

This includes quest-based compiler settings, but will NOT modify config compiler settings (still need to set those yourself)

=== @EmilyV99 (discord: Emily) 04/01/2022 01:36

@ Moosh @ Orithan
https://cdn.discordapp.com/attachments/958216922397278248/959264842533978112/zquest.exe
https://cdn.discordapp.com/attachments/958216922397278248/959264843171500082/zelda.exe
@arceusplayer11 (discord: Deedee)

=== @ Moosh 04/01/2022 01:37

üëè  Splendid

=== @EmilyV99 (discord: Emily) 04/01/2022 01:37

if you find any rules are missing, or can think of any other templates to add, feel free to mention that

=== @EmilyV99 (discord: Emily) 04/01/2022 01:38

for the record, it's this simple:
![image](https://cdn.discordapp.com/attachments/958216922397278248/959265559785123860/unknown.png)

=== @EmilyV99 (discord: Emily) 04/01/2022 04:55

(meta) thread name was changed: ‚úÖüîíRuleset option - All ZScript fixes
## Player - X and Y Offsets of Held-Up Items (#1311)
@ P-Tux7 opened this issue on 03/29/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/958221912419471390



=== @ P-Tux7 03/29/2022 04:31

Fields in the player menu (and ZScript variables) to determine where item sprites are displayed when held up in the two holding styles.

The item starts at 0,0 of the player by default. So it would overlap a 16x16 Link by default. The default quest (AKA Zelda 1) will have values of 0, -16, -8, and -16 for these to keep it "normal".

-2Hand Held Item X Offset
-2Hand Held Item Y Offset
-1Hand Held Item X Offset
-1Hand Held Item Y Offset

-256 to 255 should be good enough, if not smaller.

Might need a rule allowing the four separate values if the current 1Hand x-offset is just "2Hand x-offset minus 8" or some junk like that.
(meta) thread name was changed: Player - X and Y Offsets of Held-Up Items
## Number keys switch current layer (ZQ) (#1312)
@ Jennette ‚ù£ opened this issue on 03/29/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/958287266445418516



=== @ Jennette ‚ù£ 03/29/2022 08:51

nobody ever uses the number keys to switch palettes (what it currently does) as its pretty useless for most tilesets. i think itd be awesome to have a much quicker way of changing what layer you're working on in ZQ instead by making numbers 0-6 change you to the appropriate layer

=== @ Tsunami Tommy Reload the Shotty 03/29/2022 12:48

This is true.  The only time I ever use the number keys to change palettes (Which doesn't even affect what they look like in-game, because that's handled in the Dmap Editor!) is when I want to make a visual map of the screens I have that are used as layers, and the screens that are existing in-game.  

Otherwise there's not much of a point to these number keys.  They're a relic of the olden days.  Freeing them up for other things would be interesting.

So being able to switch the working layer with 0, 1, 2, 3, 4, 5, and 6 would be really handy.

=== @ Tsunami Tommy Reload the Shotty 03/29/2022 12:49

Which would also beg the question what 7 through 9 would do.
... as well as holding shift and pressing a number.  THAT could probably change the palette at that point.

=== @ Alucard648 03/31/2022 11:56

Shift+number -> change palette, Shift+* -> Next palette, Shift+/ -> Previous palette.
## Use Old Itemdata Script TIming inverted (#1313)
@arceusplayer11 (discord: Deedee) opened this issue on 03/30/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/958628093705224222



=== @arceusplayer11 (discord: Deedee) 03/30/2022 07:25

Either I fucked up the help text for this, or the QR for this is fucked. If checked, it runs immediately before Link's code. if unchecked, it runs after. Unsure whether the help text or the behavior is correct, need to look into this.
## ‚úÖüîíTest Mode - Items of Itemclass 255 are removed immediately (#1314)
@ Orithan opened this issue on 03/30/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/958708170379919380



=== @ Orithan 03/30/2022 12:44

ZC version: Current Nightly (3/24/22)
Items of Itemclass 255 are removed from the player's inventory immediately if running in test mode. If set via the cheat menu the item is removed right after exiting the cheat menu.

=== @EmilyV99 (discord: Emily) 03/30/2022 17:27

. . . how the actual fuck
all test mode does is SKIP the fucking title screen
most of the test-mode bugs have been things that are handled in the titlescreen function NOT happening

=== @EmilyV99 (discord: Emily) 03/30/2022 17:32

OK, thought so
it has nothing to do with test mode
....this is happening in normal mode too.

![image](https://cdn.discordapp.com/attachments/958708170379919380/958780937578086431/unknown.png)
I just cheated in both `Amulet 1` and `Amulet 2`
but `Amulet 1` is itemclass 255
...it didn't even print the `Gained item` message
OH

![image](https://cdn.discordapp.com/attachments/958708170379919380/958781215345893446/unknown.png)
that uhh
sure is checking if the itemclass is NOT 255

=== @EmilyV99 (discord: Emily) 03/30/2022 17:38

....OH
FFS
Which traces back to 1.92 compat bullshit
BUT new compat shit was added
to make it use `itype_misc` instead of `0xFF`
and that was never updated

=== @EmilyV99 (discord: Emily) 03/30/2022 17:49

@ Orithan
https://cdn.discordapp.com/attachments/958708170379919380/958785143517102100/zquest.exe
https://cdn.discordapp.com/attachments/958708170379919380/958785144116903956/zelda.exe

=== @EmilyV99 (discord: Emily) 03/30/2022 17:51

(meta) thread name was changed: ‚úÖüîíTest Mode - Items of Itemclass 255 are removed immediately
## ‚ùåüîícustom pallete CSET 3 desync issues (#1315)
@ FireSeraphim opened this issue on 03/31/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/958955786833387570



=== @ FireSeraphim 03/31/2022 05:07

I've ran into a curious new bug and it doesn't make sense to me. Basically a portion of CSET 3 is not being rendered on a custom palette I made and the strange thing it that it otherwise shows up just fine in the palette editor

=== @ FireSeraphim 03/31/2022 05:09

CSET3 in Palette Editor and CSET 2 in action
![image](https://cdn.discordapp.com/attachments/958955786833387570/958956208088301588/Screen_Shot_003.PNG)
![image](https://cdn.discordapp.com/attachments/958955786833387570/958956208281247764/Screen_Shot_001.PNG)
Missing colours when I swap to CSET 3
![image](https://cdn.discordapp.com/attachments/958955786833387570/958956293207511061/Screen_Shot_002.PNG)

=== @EmilyV99 (discord: Emily) 03/31/2022 05:19

@arceusplayer11 (discord: Deedee) ?

=== @arceusplayer11 (discord: Deedee) 03/31/2022 05:23

uhhh

=== @ FireSeraphim 03/31/2022 05:30

A minor dumb thing on my part
but one that also doesn't make sense because it technically started out as a blank palette, how in the frick did it even have cycle data in it already?

=== @EmilyV99 (discord: Emily) 03/31/2022 05:32

oh fun
what number palette is it

=== @ FireSeraphim 03/31/2022 05:32

level palette number 32

=== @EmilyV99 (discord: Emily) 03/31/2022 05:33

...part of the tileset?
<:nekoshrug:869489800271503400>
perhaps it wasn't actually saved blank
maybe there WAS a palette there
and they blanked it
but didn't blank the cycle data
that's the only type of thing I can think of

=== @ FireSeraphim 03/31/2022 05:34

That might be the case

=== @EmilyV99 (discord: Emily) 03/31/2022 05:34

(meta) thread name was changed: ‚ùåüîícustom pallete CSET 3 desync issues
## [1.90 and less] Invisible Enemies Should Be Invisible, Not Cloaked (#1316)
@ P-Tux7 opened this issue on 04/01/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/959557401130963044



=== @ P-Tux7 04/01/2022 20:58

In ZC 1.90 (not sure if the amulet worked in 1.84 but it couldn't hurt to enable this for those quests too), enemies in rooms flagged with Invisible Enemies did not render/be "cloaked" like they are in later versions. They were fully invisible. I will test soon if their projectiles were visible or not.

=== @ P-Tux7 04/22/2022 08:43

(meta) thread name was changed: [1.90 and less] Invisible Enemies Should Be Invisible, Not Cloaked
## Grabbing held item from enemy without killing it (#1317)
@connorjclark (discord: connorclark) opened this issue on 04/02/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/959920667246071859



=== @connorjclark (discord: connorclark) 04/02/2022 21:02

Should that be possible? I was just able to do that in a playthrough, wondering if it was a bug.

=== @ Russ 04/02/2022 21:08

Yeah, this has been a thing since forever and I'm pretty sure if Zelda 1 behaviour

=== @arceusplayer11 (discord: Deedee) 04/02/2022 21:24

Yeah, there's a QR to disable it

=== @connorjclark (discord: connorclark) 04/02/2022 21:58

Interesting, seemed like odd behavior but thanks for the confirmation that it's expected
## ‚úÖüîírandgen SRand() sets the whole program's RNG seed, not just the randgen pointer's (#1318)
@ Orithan opened this issue on 04/04/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/960330783107711046



=== @ Orithan 04/04/2022 00:11

```
randgen lightning = Game->LoadRNG();
lightning->SRand(seed); //Sets the seed
Trace(Rand(MAX_INT));
```
``randgen->SRand();`` is setting the whole program's seed to the value that is input, not just setting the seed of the randgen pointer.
The trace spits out the same number based off the seed that is input into ``lightning->SRand(seed);``.

=== @EmilyV99 (discord: Emily) 04/04/2022 00:24

What's the output of `Trace(lightning);`?

=== @ Orithan 04/04/2022 00:26

``0.0001``
Surely ``randgen lightning = Game->LoadRNG()`` initializes the ``randgen`` pointer

=== @EmilyV99 (discord: Emily) 04/04/2022 00:29

yeah, that's giving you the rand generator with index 1
If it were `0` that would be intended to affect engine rng

=== @ Orithan 04/04/2022 00:31

The other things I do with the pointer are simple ``lightning->Rand()`` calls
And of course ``lightning->Free()`` after I am done with it

=== @EmilyV99 (discord: Emily) 04/04/2022 00:33


https://cdn.discordapp.com/attachments/960330783107711046/960336153138049034/zquest.exe
https://cdn.discordapp.com/attachments/960330783107711046/960336153737855116/zelda.exe
check what the console outputs

=== @ Orithan 04/04/2022 00:35

``Seeding RNG 1``

=== @EmilyV99 (discord: Emily) 04/04/2022 00:43


![image](https://cdn.discordapp.com/attachments/960330783107711046/960338782182338560/unknown.png)
well, there's certainly a problem there....

=== @EmilyV99 (discord: Emily) 04/04/2022 00:46

. . . PFFFFFFFFFFFFFFFFFFFFFT

![image](https://cdn.discordapp.com/attachments/960330783107711046/960339636394266654/unknown.png)
This function is declared and never fucking called

=== @EmilyV99 (discord: Emily) 04/04/2022 00:50


https://cdn.discordapp.com/attachments/960330783107711046/960340612362694706/zelda.exe
https://cdn.discordapp.com/attachments/960330783107711046/960340612899545140/zquest.exe

=== @EmilyV99 (discord: Emily) 04/04/2022 00:54


![image](https://cdn.discordapp.com/attachments/960330783107711046/960341577690153020/unknown.png)

=== @ Orithan 04/04/2022 01:02

```
void DrawSRandLightning(int layer, int x1, int y1, int x2, int y2, int width, int colour, int minpoints, int maxpoints, float draws, float drawe, long seed)
{
    CONFIGF JUMPMOD = 0.2; //Percentage of which can be added or removed from any given jump
    randgen lightning = Game->LoadRNG();
    lightning->SRand(seed); //Sets the seed
    Trace(lightning->Rand(MAX_INT));
    //Sets variables
    int x = x1; int nx;
    int y = y1; int ny;
    int ang = Angle(x1, y1, x2, y2);
    float len = Distance(x1, y1, x2, y2);
    int points = Max(lightning->Rand(minpoints, maxpoints), 1); //Randomize the number of points
    //First and last lengths to actually draw 
    draws = Round(draws*points);
    drawe = Round(drawe*points);
    float jump = len/points; //Save on some calculations
    for(int point = 1; point <= points; ++point)
    {
        //Add variance to the connecting positions.
        float jumpmod = jump*lightning->Rand(JUMPMOD*-1, JUMPMOD);
        int sidemod = Rand(width*-1, width);
        //Plot the next destination.
        if(point == points) //Final loop, instead jump to the destination
        {
            nx = x2;
            ny = y2;
        }
        else
        {
            nx = x1+VectorX(sidemod, ang+90)+VectorX(jump*point+jumpmod, ang);
            ny = y1+VectorY(sidemod, ang+90)+VectorY(jump*point+jumpmod, ang);
        }
        //Point within the draw boundaries
        if(point >= draws && point <= drawe)
            Screen->Line(layer, x, y, nx, ny, colour, 1, 0, 0, 0, OP_OPAQUE); //Draw the connecting line
        //Update the current position
        x = nx;
        y = ny;
    }
    //Frees the randgen lightning pointer
    lightning->Free();
}
```

=== @ Orithan 04/04/2022 01:04

```
//DEBUG. Used for testing the Lightning code.
ffc script LightningIsFun
{
    void run(int samplefreq)
    {
        int colours[] = {
        0x9C, 0x91, 0x92
        };
        long sample[5];
        int counter = 0;
        while(true)
        {
            for(int samp = 0; samp < 5; samp ++)
            {
                if(counter == 0)
                    sample[samp] = Rand(MAX_FLOAT);
                int curpos = 1/(samplefreq/3*2)*counter;
                DrawSRandLightning(3, CenterX(this), CenterY(this), CenterLinkX(), CenterLinkY(), 10, colours[Rand(0, 2)], 3, 4, curpos-0.5, curpos, sample[samp]);
            }
            if(counter == 0)
            {
                counter = samplefreq;
            }
            counter --;
            Waitframe();
        }
    }
}
```

=== @EmilyV99 (discord: Emily) 04/04/2022 01:35

(meta) thread name was changed: ‚úÖüîírandgen SRand() sets the whole program's RNG seed, not just the randgen pointer's
## Convenience shortcuts with new cheat menu (#1319)
@ Russ opened this issue on 04/04/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/960371898481532978



=== @ Russ 04/04/2022 02:55

Previously, upon entering a cheat code, you could press enter twice, then escape, to resume playing. Pressing enter twice no longer exits the cheat menu, due to the new option to select a cheat level, and pressing escape seems to close the menu and default it to level 0, even if option for 4 is selected. Could we make it easier to dismiss this dialogue without using the mouse? Like, pressing enter if there's no text in the cheat field is equivalent to ok?
This, as an aside, is a common trend with the new GUI stuff. A lot of previously convenient keyboard shortcuts don't work anymore, adding more time spent mousing to click on options

=== @EmilyV99 (discord: Emily) 04/04/2022 03:19

It was just requested to have enter do the cheat code confirmation
because otherwise pressing enter to confirm the code would close the dialog by clicking OK without confirming the code
escape clicks the `X` in the corner
which, rightfully cancels any changes made
I'm not sure what the best way to handle this is
and how to get whatever it is to *work*
## Din's Fire - Stand Here combo flag (#1320)
@ P-Tux7 opened this issue on 04/04/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/960436335938772992



=== @ P-Tux7 04/04/2022 07:11

A la the places you have to stand on and use medallions to open Misery Mire and Turtle Rock in LTTP. Using Din's Fire while on a combo with this flag triggers secrets the frame after the LWeapons disappear. It's a really cool cutscene that I'd appreciate being possible in ZC
## ‚ùåüîíOnly Highest Level of Sword Used Despite Weapon Being Set To Lower (#1321)
@ bigjoe opened this issue on 04/04/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/960610553770950807



=== @ bigjoe 04/04/2022 18:43

In Mystical Harps, despite the fact that the weapon is set to something lower, Link uses the highest level weapon. (Which in this case is the Trident). No script changes were made that should have caused this.

![image](https://cdn.discordapp.com/attachments/960610553770950807/960610735426240562/zc_screen00004.png)

=== @ bigjoe 04/04/2022 19:11

Mystical Harps has a script that disables Items when either Link or the Mermaid are in use. No changes to the script were made, which is why I think this is a ZC internal bug. Link just happens to be using the highest level sword regardless of which sword is in use. It has worked properly over many , many , versions. This anomaly in behavior is very recent.

=== @EmilyV99 (discord: Emily) 04/04/2022 21:06

@arceusplayer11 (discord: Deedee) ?

=== @ bigjoe 04/05/2022 19:10

This can be disregarded, as it simply required a very slight script reworking to fix

=== @EmilyV99 (discord: Emily) 04/05/2022 23:01

(meta) thread name was changed: ‚ùåüîíOnly Highest Level of Sword Used Despite Weapon Being Set To Lower
## DMap Disabled Items Aren't Being Disabled. (#1322)
@ bigjoe opened this issue on 04/04/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/960611193888866394



=== @ bigjoe 04/04/2022 18:45

Another bug noticed from testing Mystical Harps. During the opening fade, where all items should be disabled, items such as the sword can still be used.

=== @EmilyV99 (discord: Emily) 04/04/2022 21:06

@arceusplayer11 (discord: Deedee) ?
## 'Empty' Guy triggers an enemy death. (#1323)
@ bigjoe opened this issue on 04/04/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/960618379394285588



=== @ bigjoe 04/04/2022 19:14

This is also new. When an Empty Guy is spawned, it triggers an enemy death, which, depending on the quest has side effects, such as in a quest where extra items are spawned, they may spawn over where the guy is placed.

=== @EmilyV99 (discord: Emily) 04/04/2022 21:06

@arceusplayer11 (discord: Deedee) ?

=== @EmilyV99 (discord: Emily) 04/04/2022 21:08

(replying to @ bigjoe "This is also new. When an Emp‚Ä¶"): I thought room guys always counted as a death when they disappeared?
that's how feed the goriya rooms open shutters, by 'killing' the goriya

=== @ bigjoe 04/04/2022 21:10

i can fix this with a simple check, just need to know an identifiable factor of the "Empty" guy. and it wasn't doing this before

=== @ SkyLizardGirl 04/09/2022 17:52

Also, when you walk over the area where an Empty room guy would sit in the middle, Link takes damage.
## Dark room script draw access (#1324)
@EmilyV99 (discord: Emily) opened this issue on 04/04/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/960650585248522250



=== @EmilyV99 (discord: Emily) 04/04/2022 21:22

Allow loading a `bitmap` pointer to the main and transparency darkroom bitmaps (using special bitmap ID like the system bitmaps do)

This would allow custom draws to the darkroom (though keep in mind they will need to be drawn every frame)

@ Russ adding to thread
## üíäüîìnpc isDead() behaves weirdly if read multiple times (#1325)
@ Orithan opened this issue on 04/05/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/960694525435719740



=== @ Orithan 04/05/2022 00:17

``npc->isDead()`` works fine if it is checked on a given enemy once per frame. It bugs the enemy's death animation out if it is checked multiple times a frame by different instances of a script.

=== @ Orithan 04/05/2022 00:18

If checked twice on a frame the enemy's death animation is blanked out entirely.

=== @ Orithan 04/05/2022 00:20

There were three LWeapons running scripts that check ``npc->isDead()`` on the NPC before death. There are now two and the enemy's death animation continues running ad infinitum
![image](https://cdn.discordapp.com/attachments/960694525435719740/960695347674505256/zc_screen00001.png)

=== @EmilyV99 (discord: Emily) 04/05/2022 00:36

What the fuck did zoria doooo

=== @EmilyV99 (discord: Emily) 04/07/2022 13:30

. . .
. . .
. . . . . .
The `Dead()` function is a function that runs to check internally if an enemy is dead
This function *RUNS THE FUCKING DEATH ANIMATION WHEN CALLED*
It handles actually killing the enemy
the death sfx
the enemy never return flag
and a lot of things that are not just checking if the enemy is dead

=== @ Orithan 04/07/2022 13:31

Aka Zoria is an idiot

=== @EmilyV99 (discord: Emily) 04/07/2022 13:31

Very very very much so

=== @EmilyV99 (discord: Emily) 04/07/2022 13:33

So, uh, the fun fix is
it's really simple
instead of returning a call to `Dead()`
...just return the fucking `dying` bool

=== @EmilyV99 (discord: Emily) 04/07/2022 14:14

(meta) thread name was changed: üíäüîìnpc isDead() behaves weirdly if read multiple times
#1328 build posted in that thread contains this

=== @ Orithan 04/16/2022 10:34

Late, but confirmed fixed
## Enemy Shield Mix Up (#1326)
@ Lost Attempt opened this issue on 04/06/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/961299729604575303



=== @ Lost Attempt 04/06/2022 16:21

shield on left is on the right side of the enemy when facing left or right
and shield on right is on the left side of the enemy when facing left or right

=== @EmilyV99 (discord: Emily) 04/08/2022 03:08

@arceusplayer11 (discord: Deedee)
## Copying copies the layer you're on rather than layer 0 (#1327)
@ Jennette ‚ù£ opened this issue on 04/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/961367032287354920



=== @ Jennette ‚ù£ 04/06/2022 20:49

If you're on layer 1 and you copy the screen it should copy layer 1 rather than layer 0.

=== @EmilyV99 (discord: Emily) 04/06/2022 23:06

ü§¢ why?
Frankly, if I were a regular user, and I noticed that this was added, I would probably think it's a huge bug that needed to be reported

=== @arceusplayer11 (discord: Deedee) 04/08/2022 12:04

there does need to be a way to move a screen easily without needing to go to each layer screen individually and copy and paste it
(a better "paste all")
(cause the current one just sets the layers on the pasted screen to the old screen's layers, instead of copying to that screen's layers (like in the case of autolayered maps)
## ‚úÖüîíLoading items also affects the next item down (#1328)
@ Orithan opened this issue on 04/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/961475284463403080



=== @ Orithan 04/07/2022 03:59

Using the Item->Load function in the item selector in the item editor dialogue also copies the item's data to the next item in the list.

=== @EmilyV99 (discord: Emily) 04/07/2022 04:01

uhg ZORIA
@arceusplayer11 (discord: Deedee)

=== @ Orithan 04/07/2022 04:15

This doesn't seem to be consistient across all items

=== @ Orithan 04/07/2022 04:16

Copied Ring data over Item 18, which was a zz item in this quest. Didn't affect anything later on in the item list
Which probably means it has to do with itemclasses, as the items affected were the next ID down in the same itemclass

=== @ Orithan 04/07/2022 04:18

Okay, it does affect things of different itemclasses
Had it copy over the Peril Beam scroll instead of the Bracelet when I copied over Item 17

=== @ Orithan 04/07/2022 04:20

It also copied the Magic Wallet when I copied over Item 18

=== @ Orithan 04/07/2022 04:23

So it went from Item 17 (Ring) to Item 103 (Peril Beam) and from Item 18 (Itemclass 67) to Item 104 (Wallet).

=== @ Orithan 04/07/2022 04:24

The other items affected went from Item 144 to Item 145 (both Itemclass 255) and Item 150 (itemclass 255) to Item 151 (Rupee)

=== @EmilyV99 (discord: Emily) 04/07/2022 04:30

Is it setting both, or is it only setting the 'wrong' one?

=== @ Orithan 04/07/2022 05:41

Both the intended item and the "wrong" item

=== @EmilyV99 (discord: Emily) 04/07/2022 13:35


![image](https://cdn.discordapp.com/attachments/961475284463403080/961620283586904084/unknown.png)
This
I fucking swear
Zoria
why are you fucking
copying the data of the item to one place
and assigning it to a fucking other place as well
When you copy it, is the name being changed for the correct or incorrect item?
It should, if I'm right, only be being loaded to one of them
given that commented out line
@ Orithan

=== @EmilyV99 (discord: Emily) 04/07/2022 14:14


https://cdn.discordapp.com/attachments/961475284463403080/961630033028476958/zquest.exe
https://cdn.discordapp.com/attachments/961475284463403080/961630033603072090/zelda.exe
(meta) thread name was changed: üíäüîìLoading items also affects the next item down

=== @ Orithan 04/08/2022 01:30

Can confirm this bug is fixed

=== @EmilyV99 (discord: Emily) 04/08/2022 01:33

(meta) thread name was changed: ‚úÖüîíLoading items also affects the next item down
## ‚úÖüîíString editor issues (#1329)
@ Orithan opened this issue on 04/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/961592870505160724



=== @ Orithan 04/07/2022 11:46

``\19\dmap\screen\register\value``: The ``value`` arg sets that corresponding register to ``value/10000``. SCCs cannot pick up floating point values, which makes you have to put in the numbers in increments of 10000 to make SCCs check it.

=== @ Orithan 04/07/2022 12:34

Apparently it magically fixed itself?

=== @ Orithan 04/07/2022 12:36

Regardless I found some spooky gremlins in SCCs
If you type in letters as part of the arg in the middle of an SCC by error, ZQ will corrupt the SCC
``\19\10\2C\0\1`` became ``\19\10\2\66\0\1\83\103`` when reloaded
This is in the current Nightly

=== @EmilyV99 (discord: Emily) 04/07/2022 12:49

well, yeah
that's since 2.50.2
because of how sccs work
not fixable
`C` is `66`

=== @ Orithan 04/07/2022 12:50

So accidentally typing letters into SCCs leads to SCC corruption and it cannot be fixed?

=== @EmilyV99 (discord: Emily) 04/07/2022 12:50

so `\19\10\2\66` is literally the same string as `\19\10\2C`
It's not any weird corruption
it's just doing what you type
when you enter a number after a slash
it's entering a direct ascii value
but any ascii values that are outside the range of normal text characters
are treated as sccs

=== @ Orithan 04/07/2022 12:51

``\23\61\0\0\1\90`` is switching to String 31

=== @EmilyV99 (discord: Emily) 04/07/2022 12:51

and after it starts an scc, it looks for that sccs parameters

=== @ Orithan 04/07/2022 12:51

Instead of String 90 as per the arg

=== @EmilyV99 (discord: Emily) 04/07/2022 12:51

??
fun

=== @ Orithan 04/07/2022 12:52

Replicated it?

=== @EmilyV99 (discord: Emily) 04/07/2022 12:52

no, I'm not on my desktop
so I can't touch anything right now
which code is `\23`?

=== @ Orithan 04/07/2022 12:54

``\23\dmap\screen\register\value\newstring - same as \3, but for a remote dmap/screen``

=== @EmilyV99 (discord: Emily) 04/07/2022 12:54

yay zoria
that'll be fun to look into
@arceusplayer11 (discord: Deedee) adding you to this thread

=== @ Orithan 04/07/2022 12:55


![image](https://cdn.discordapp.com/attachments/961592870505160724/961610059777966110/2022-04-07_22-52-36.mp4)

![image](https://cdn.discordapp.com/attachments/961592870505160724/961610236949577728/Untitled.png)

=== @arceusplayer11 (discord: Deedee) 04/07/2022 12:56

ughh.

=== @EmilyV99 (discord: Emily) 04/07/2022 12:56


![image](https://cdn.discordapp.com/attachments/961592870505160724/961610396521885716/unknown.png)
what are all of these?
(don't have the reference on hand)

=== @ Orithan 04/07/2022 12:58

```
\2\newspeed - Text Speed. Changes the length of the delay between text characters appearing. 
If 0, text appears instantaneously. Argument 1 is the speed.
```
```
\19\dmap\screen\register\value - Sets Screen->D[reg] for dmap, screen, to value.
```
```
\29 - Immediately exits the current string. If there is a 'next string', it will begin immediately.
      The prompt to press 'A' to continue will be skipped.
```
```
\30 - Pauses the string and prompts the player to press A to continue
      (as normally occurs at the end of a string)
```
I noticed that \29 was not taking effect
So yay. I ended up playing with Zoria's janky stuff

=== @EmilyV99 (discord: Emily) 04/07/2022 12:59

(replying to @ Orithan "I noticed that \29 was not ta‚Ä¶"): oh?
You are having to press A twice to advance to string 90?

=== @ Orithan 04/07/2022 13:00

If you watch the video closely, you can see that I had to press A twice to advance to String 90 on the first read

=== @EmilyV99 (discord: Emily) 04/07/2022 13:00

that's odd
that's my recent addition
and it was working fine last I checked
So, do you use the manual re-ordering the strings much?
If so, does string 31 it's sending you to happen to be near the 90th position?

=== @ Orithan 04/07/2022 13:01

Okay I didn't have to
But the String->Next icon appeared afterwards
(replying to @EmilyV99 (discord: Emily) "So, do you use the manual re-‚Ä¶"): No
89 and 90 are back to back in the string editor

=== @EmilyV99 (discord: Emily) 04/07/2022 13:02

oh
zoria
you dumbass
It's eating one too many parameters
32 is the ascii value for spacebar
and sccs are stored at their value + 1 to avoid null char issues
so an ascii 32 (spacebar) is being read as `string 31`
fucking beautiful zoria

=== @ Orithan 04/07/2022 13:05

So I guess I'm waiting for the next nightly to use this SCC
AFIAK SCCs need a non-Null character afterwards to work

=== @EmilyV99 (discord: Emily) 04/07/2022 13:06

no, they don't
that one does
because of the bug
(replying to @ Orithan "But the String->Next icon app‚Ä¶"): How long does it appear for? Is it 1 frame?

=== @ Orithan 04/07/2022 13:08

No I have to press it again

=== @EmilyV99 (discord: Emily) 04/07/2022 13:08

...oh, wait, and is it NOT appearing when you have the `\30` active?

=== @ Orithan 04/07/2022 13:08

Did frame advance, confirmed it was not showing up for just one frame
It the icon appeared once when the ``\30`` is called and then I had to press the button again at the end of the string
It will also advance if the button is held

=== @arceusplayer11 (discord: Deedee) 04/07/2022 13:18

@EmilyV99 (discord: EmilyV) have moral support! <a:bunluv:876927395402223616>

=== @EmilyV99 (discord: Emily) 04/07/2022 13:22

<a:hugheart:884673091878391828>

=== @EmilyV99 (discord: Emily) 04/07/2022 13:37

so
(replying to @ Orithan "``\19\dmap\screen\register\va‚Ä¶"): this....
(replying to @ Orithan "Apparently it magically fixed‚Ä¶"): magically fixed itself
(replying to @ Orithan "If you type in letters as par‚Ä¶"): This is just how SCCs work, no bug to be had
(replying to @ Orithan "AFIAK SCCs need a non-Null ch‚Ä¶"): Turns out this was fucking true due to weird, should be fixed
(replying to @ Orithan "But the String->Next icon app‚Ä¶"): This should no longer appear when terminating a string with `\29`
(replying to @ Orithan "``\23\61\0\0\1\90`` is switch‚Ä¶"): and this should be fixed

=== @EmilyV99 (discord: Emily) 04/07/2022 13:39


https://cdn.discordapp.com/attachments/961592870505160724/961621321945587782/zquest.exe
https://cdn.discordapp.com/attachments/961592870505160724/961621322620862464/zelda.exe

=== @ Orithan 04/07/2022 13:39

(replying to @EmilyV99 (discord: Emily) "magically fixed itself"): I recalled it only working if I check for 10000 until I did other things and then it works when I check for 1

=== @EmilyV99 (discord: Emily) 04/07/2022 13:41


![image](https://cdn.discordapp.com/attachments/961592870505160724/961621659851325530/unknown.png)
seems to use a raw value there

=== @ Orithan 04/07/2022 13:42

(replying to @EmilyV99 (discord: Emily) "This should no longer appear‚Ä¶"): This persists
(replying to @EmilyV99 (discord: Emily) "and this should be fixed"): This is fixed

=== @EmilyV99 (discord: Emily) 04/07/2022 13:43

(replying to @ Orithan "This persists"): Can't replicate
So, the screen->d
I think it may be /10000
which, is the only way it can ever possibly interact with decimal values
but uhhh
oh, I was gonna say the mapdata access looks fucked up
but that's fucked anyway because it needs to be dmap based
so nevermind
It does appear that `10000` in scc would be `1` in zscript
but, if that weren't how it worked, you would never be able to check anything decimal

=== @ Orithan 04/07/2022 13:47

(replying to @EmilyV99 (discord: Emily) "Can't replicate"): Even with the exact string and next string?

=== @EmilyV99 (discord: Emily) 04/07/2022 13:47

no, I didn't type everything out
but doing a `\30` to pause

=== @ Orithan 04/07/2022 13:47

Gonna try a few things

=== @EmilyV99 (discord: Emily) 04/07/2022 13:47

and then a `\29` to quit
frame advance shows no nextstring icon
and it definitely shouldn't
because I took the book that's set when `\29` is read
and made it so that if that's true, the draw call does not occur
it should be FORCIBLY skipping that draw

=== @ Orithan 04/07/2022 13:49

It's not running at all on my string

=== @EmilyV99 (discord: Emily) 04/07/2022 13:49

that's confusing

https://cdn.discordapp.com/attachments/961592870505160724/961623980396118047/str.qst

=== @ Orithan 04/07/2022 13:55

It works on your file

=== @EmilyV99 (discord: Emily) 04/07/2022 14:03

can you at all figure out what's making it work vs not?

=== @ Orithan 04/07/2022 14:05

The first place I'd look is quest rules

=== @EmilyV99 (discord: Emily) 04/07/2022 14:14

(meta) thread name was changed: üíäüîìString Control Code 19 (Set Screen D[] register) does not set right value.

=== @ Orithan 04/07/2022 14:17

String Control Code 29 is doing some reeeal cursed stuff on this quest
Did another string
Or was

=== @EmilyV99 (discord: Emily) 04/07/2022 14:20

oh hmm, could it be message speed 0?
it's probably message speed 0

=== @ Orithan 04/07/2022 14:23

Removed that and it still did not work

=== @EmilyV99 (discord: Emily) 04/07/2022 14:25


https://cdn.discordapp.com/attachments/961592870505160724/961632906898473010/zquest.exe
https://cdn.discordapp.com/attachments/961592870505160724/961632907552780318/zelda.exe
How about this?
Added several safeguards to the function
it shouldn't be able to do anything funky now

=== @ Orithan 04/07/2022 15:18

I just loaded and the strings with SCCs right before the Null string all became garbled
Geezus this is cursed...

=== @EmilyV99 (discord: Emily) 04/07/2022 15:19

? Garbled how?

=== @ Orithan 04/07/2022 15:20

And the garbling went away when I reloaded the file from jumping from another

=== @EmilyV99 (discord: Emily) 04/07/2022 15:20

????????????????????????????

=== @ Orithan 04/07/2022 15:20

The string table is cursed

=== @EmilyV99 (discord: Emily) 04/07/2022 15:20

Clearly

=== @EmilyV99 (discord: Emily) 04/07/2022 15:24

nice recording of ZCL

=== @ Orithan 04/07/2022 15:27


![image](https://cdn.discordapp.com/attachments/961592870505160724/961648468131201044/2022-04-08_01-24-42.compressed.mp4)
It's random values every time

=== @ Orithan 04/07/2022 15:29

And it's the same story when playing in ZC. First load its garbled, after reload its not

=== @EmilyV99 (discord: Emily) 04/07/2022 15:29

wh-what
@arceusplayer11 (discord: Deedee)
DEEDEE GET IN HERE
For the record, literally nothing I changed in this thread was in ZQuest

=== @ Orithan 04/07/2022 15:30

Like I said, this quest was made during alphas where the string table corruption issue was a thing
This might be a relic of that

=== @EmilyV99 (discord: Emily) 04/07/2022 15:31

well, it was last saved in a current build, yes?
if so, then it should *NEVER CHANGE ON RELOAD*

=== @ Orithan 04/07/2022 15:31

In an older build

=== @EmilyV99 (discord: Emily) 04/07/2022 15:31

ok
resave it in this build then?

=== @ Orithan 04/07/2022 15:31

The build it was last saved in was the build before the one you just sent

=== @EmilyV99 (discord: Emily) 04/07/2022 15:31

like
was it last saved today
or in a build when the string table stuff
if it was last saved in any build today

=== @ Orithan 04/07/2022 15:32

(replying to @EmilyV99 (discord: Emily) "was it last saved today"): Today

=== @EmilyV99 (discord: Emily) 04/07/2022 15:32

then yeah
that's a current build
so

=== @arceusplayer11 (discord: Deedee) 04/07/2022 15:32

wtf

=== @EmilyV99 (discord: Emily) 04/07/2022 15:32

that's REALLY not good
my fixes today aren't even in ZQ, so nothing should have changed
well, except the fix for #1328
but that is entirely unrelated to strings

=== @ Orithan 04/07/2022 15:33

Saving is not fixing it.

=== @EmilyV99 (discord: Emily) 04/07/2022 15:33

yeah, if you last saved today
then that wouldn't
thus the problem
the point was, had you last saved before or after deedee supposedly fixed corruption
if before, well, resave
if after, well, PANIC BUTTON WHAT THE FUCK

=== @ Orithan 04/07/2022 15:34

It first cropped up in the build you posted here right before this one

=== @EmilyV99 (discord: Emily) 04/07/2022 15:34

???

=== @ Orithan 04/07/2022 15:34

Its notable that it's not affecting the test quest you sent me
Its anything that has the /29

=== @EmilyV99 (discord: Emily) 04/07/2022 15:34


![image](https://cdn.discordapp.com/attachments/961592870505160724/961650268741722122/unknown.png)
these are my changes to ZQuest today
so
nothing new would be occurring in zquest from my builds today
other than the item loading thing being fixed

=== @arceusplayer11 (discord: Deedee) 04/07/2022 15:35

String stuff isn't my forte

=== @EmilyV99 (discord: Emily) 04/07/2022 15:35

(replying to @ Orithan "Its anything that has the /29"): What the fuck, why that specifically?

![image](https://cdn.discordapp.com/attachments/961592870505160724/961650516264374282/unknown.png)
it's a 0 arg control code
it literally does nothing but exist as a single character

=== @ Orithan 04/07/2022 15:36

No it's not just the /29
It's specifically this string and one other
I am thinking this is a string table corruption error stemming from the builds where that was a problem

=== @EmilyV99 (discord: Emily) 04/07/2022 15:37

but that shouldn't change on reloading

=== @ Orithan 04/07/2022 15:38

Then ZQ must not be initializing the string table correctly on first load or something?

=== @EmilyV99 (discord: Emily) 04/07/2022 15:38

and if it did, it would be an issue fixable by resaving
"first load"
there is no difference
between a first or second load
if you load once then load again
they run identically

=== @ Orithan 04/07/2022 15:39

Then why is it garbling the strings on the first time I open ZQ on it?

=== @EmilyV99 (discord: Emily) 04/07/2022 15:39

That is a GREAT fucking question

=== @ Orithan 04/07/2022 15:39

It goes away when I reload the quest with that instance

=== @EmilyV99 (discord: Emily) 04/07/2022 15:39

What happens if you first load a different quest, then that quest?

=== @arceusplayer11 (discord: Deedee) 04/07/2022 15:39

if you re-save the quest (as a duplicate, just in case), and re-open that saved quest, does it still corrupt on opening

=== @ Orithan 04/07/2022 15:40

Yes.
Did that

=== @EmilyV99 (discord: Emily) 04/07/2022 15:40

Here's the thing
if it looks right in the editor
and you click save

=== @ Orithan 04/07/2022 15:40

(replying to @EmilyV99 (discord: Emily) "What happens if you first loa‚Ä¶"): The first time I load the quest on that instance it corrupts

=== @EmilyV99 (discord: Emily) 04/07/2022 15:40

it should not be ABLE to fucking garble it again

=== @ Orithan 04/07/2022 15:40

(replying to @EmilyV99 (discord: Emily) "it should not be ABLE to fuck‚Ä¶"): It does

=== @EmilyV99 (discord: Emily) 04/07/2022 15:40

So wait
If you load the quest
then load a completely different quest
then load the quest again
it still works?
(Even if the different quest also has strings with those IDs that have content?)

=== @ Orithan 04/07/2022 15:41

(replying to @EmilyV99 (discord: Emily) "it still works?"): It still works

=== @EmilyV99 (discord: Emily) 04/07/2022 15:41

(replying to @EmilyV99 (discord: Emily) "(Even if the different quest‚Ä¶"): ?

=== @ Orithan 04/07/2022 15:43

Loaded up an older version, still problems

=== @ Orithan 04/07/2022 15:44

Loaded up another quest, no problems on those string IDs

=== @EmilyV99 (discord: Emily) 04/07/2022 15:44

but like
load problem quest
load other quest with those string IDs
load problem quest
Does problem quest still load correctly as it's the second load?
or does it have garbled parts of the strings from the other quest?

=== @ Orithan 04/07/2022 15:47

What happened:
Started instance on other quest, no apparent issues
Loaded problem quest, no apparent issues
Loaded other quest again, no apparent issues

=== @EmilyV99 (discord: Emily) 04/07/2022 15:48

...it must be something to do with initializing the string table then, yeah
but that doesn't make any fucking sense
and like
that hasn't changed in a fair while

=== @ Orithan 04/07/2022 15:48

This time:
Started instance on problem quest, problems
Loaded other quest, no apparent issue
Loaded problem quest again, no apparent issues
I'm going to go with my gut feelings and think one of the builds you just posted broke this

=== @EmilyV99 (discord: Emily) 04/07/2022 15:50

I literally did not modify zquest
it literally cannot be
everything I modified about SCCs was 100% ZC-side

=== @ Orithan 04/07/2022 15:50

No it is not one of your builds
Which means I am going to get this file done and ship it off to Dimi to claim

=== @EmilyV99 (discord: Emily) 04/07/2022 15:51

give me one minute
I have one idea

=== @EmilyV99 (discord: Emily) 04/07/2022 15:53


https://cdn.discordapp.com/attachments/961592870505160724/961654991284731974/zquest.exe
https://cdn.discordapp.com/attachments/961592870505160724/961654991867764756/zelda.exe
I swear to fuck if this fixes it
I am gonna be so pissed at C++

=== @ Orithan 04/07/2022 15:54

Nope, doesn't fix

=== @EmilyV99 (discord: Emily) 04/07/2022 15:55

uhg
ok
then I have literally no clue

=== @ Orithan 04/07/2022 15:56

I swear to god if this is what kills 1 Screen Gollab...

=== @EmilyV99 (discord: Emily) 04/07/2022 15:57

Here's the thing
which is good news
if it's loading correctly, just not on the first time
that means the correct data is indeed stored in the .qst
uncorrupted
it just isn't loading right on the first load due to a current bug
so, something is wrong which COULD cause corruption, if you saved after a first load
but if you load twice so that the values are right, then you should be fine to do whatever and re-save
just, don't save while the values are garbled

=== @EmilyV99 (discord: Emily) 04/07/2022 15:59

Question, do you have more or less than 4096 strings in the string table?

=== @EmilyV99 (discord: Emily) 04/07/2022 16:01

@arceusplayer11 (discord: Deedee) definitely gonna need your help to look into this, because I have NO damned clue

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:02

@EmilyV99 (discord: EmilyV) I'll only look at it if you co-pilot/watch me stream and offer solutions
Last time I looked at it I had no fucking clue lmao

=== @EmilyV99 (discord: Emily) 04/07/2022 16:03

Frankly deedee, the problem here is that I know what I'm doing
and NOTHING IS WRONG

=== @ Orithan 04/07/2022 16:03

(replying to @EmilyV99 (discord: Emily) "Question, do you have more or‚Ä¶"): Less

=== @EmilyV99 (discord: Emily) 04/07/2022 16:03

(replying to @EmilyV99 (discord: Emily) "and NOTHING IS WRONG"): having someone who DOESN'T know how it works poke at it is probably the better way to get something done
because, fresh eyes, and all that
@ Orithan we're gonna need the quest file

=== @ Orithan 04/07/2022 16:04

Am gonna package it soon
It will have to be over Google Docs because its over my upload filesize limit (THANKS DISCORD)

=== @ Orithan 04/07/2022 16:06

It's now affecting more strings

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:06

okay, so just to recap
when you open the quest once, it garbles up the string editor
but if you reopen it a *second* time, it's fixed?

=== @ Orithan 04/07/2022 16:07

On a couple of strings

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:07

What happens if you reopen it a third time?

=== @EmilyV99 (discord: Emily) 04/07/2022 16:07

opening a different quest first then the problem quest also works
it has nothing to do with opening the quest twice, and everything to do with it being the first thing ZQ loads on launch
that's basically everything I can gather from this
but
that would imply to me
that `MsgStrings[]` is being initialized wrong
but
it
it just
it isn't
so I have no clue

=== @ Orithan 04/07/2022 16:13

This problem also extends to ZC as well

=== @EmilyV99 (discord: Emily) 04/07/2022 16:14

That actually makes sense
all the allocation code is shared
as is quest loader code

=== @ Orithan 04/07/2022 16:19

File:
https://drive.google.com/file/d/1bJWgqx9zor7pjahVeCr65WTmSwXo_Gvw/view?usp=sharing
Its very late on my end and I need sleep. Nini

=== @EmilyV99 (discord: Emily) 04/07/2022 16:20

my sleep cycle matches yours lol
struggling to stay awake as long as I have

=== @ Orithan 04/07/2022 16:21

I stayed up a couple hours longer than I should have trying to pinpoint these issues

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:23

(replying to @EmilyV99 (discord: Emily) "struggling to stay awake as l‚Ä¶"): go to bed

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:45

@EmilyV99 (discord: EmilyV) live update; it's reading the string fine in qst.cpp readstring
so it's breaking somewhere else

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:48

Saving it while it's garbled does save the garbled mess as well

=== @arceusplayer11 (discord: Deedee) 04/07/2022 16:55

@EmilyV99 (discord: EmilyV) you still there?
the copyText function in zdefs.h, line 3639 is where the data is getting jumbled
```void copyText(MsgStr const& other)
    {
        s = other.s;
        s.shrink_to_fit();
        nextstring=other.nextstring;
    }```
`other.s` is the correct string when debugging
but `s` is corrupted immediately after the assign; debugger seems to think it's even happening before the shrink_to_fit
so immediate thought is the way it's assigning is wrong

=== @arceusplayer11 (discord: Deedee) 04/07/2022 17:00

I don't see why it'd be wrong though

=== @arceusplayer11 (discord: Deedee) 04/07/2022 17:06

This function is definitely where things are getting fucked up though; why it's doing it here and whether or not it's being caused by something elsewhere I don't know
It's certainly setting the size right and setting the right amount of characters

=== @arceusplayer11 (discord: Deedee) 04/07/2022 17:07

I think, anyways.
is it?
I think that's one character too many, fuck.
But either way, I breakpointed it and stuff; the value of s doesn't change at all after that *until* I change the string in the editor afterwards, so it's not getting corrupted any further after this function
I'm rambling, but that's cause I don't know how C++ strings work or where to begin looking for the root cause

=== @arceusplayer11 (discord: Deedee) 04/07/2022 20:00

in any case Emily, whenever you get up, I haven't touched it at all. You'd know more about C++ than me, you're more likely to think of some dumb reason why this wouldn't work than I would

=== @EmilyV99 (discord: Emily) 04/08/2022 00:14

(replying to @arceusplayer11 (discord: Deedee) "so immediate thought is the w‚Ä¶"): What the FUCK?

=== @ Orithan 04/08/2022 00:51

If this is of any help, string 107 in the quest file was behaving fine until I changed some String->Next things in the editor.
After then I wrote it as [TBD], saved and quit ZQ
I returned to ZQ to find that it was bugging out and kept bugging out since

=== @ Orithan 04/08/2022 00:54

I highly suspect something is going wrong with the saving process that is corrupting data when I reload with ZQ

=== @EmilyV99 (discord: Emily) 04/08/2022 00:55

No, or else it wouldn't ever load back correctly
If it were an issue in saving, it wouldn't be random at all, it would be broken every load

=== @ Orithan 04/08/2022 00:55

Explain how String 107 was behaving correctly until I did what I did?

=== @EmilyV99 (discord: Emily) 04/08/2022 00:55

It could be an issue with some character specifically
Deedee found where it is breaking already

=== @ Orithan 04/08/2022 00:56

The other string that was bugging out was a string of ellipses.

=== @EmilyV99 (discord: Emily) 04/08/2022 00:56

It just.... is breaking inside a standard C++ function, not a ZC function

=== @ Orithan 04/08/2022 00:56

105 just contained ellipses and an SCC.

=== @EmilyV99 (discord: Emily) 04/08/2022 00:56

Which scc

=== @ Orithan 04/08/2022 00:57

``\3\0\1\106``
Its not in the file anymore because I removed it
107 never contained SCCs

=== @EmilyV99 (discord: Emily) 04/08/2022 00:57

Huh
Odd
I have one idea to try to fix it, which I'll check when my pizza gets here

=== @ Orithan 04/08/2022 00:58

String 112, which isn't in this file, bugged out and it had the ``\30`` and ``\29`` sccs, notably with the ``\29`` being at the very end
String 105 bugged out and the scc was the end of the string

=== @ Orithan 04/08/2022 01:01

I'm going to see if I can replicate this behaviour in new strings on a test branch of this file

=== @ Orithan 04/08/2022 01:20


![image](https://cdn.discordapp.com/attachments/961592870505160724/961797652817793084/2022-04-08_11-18-25.mp4)
This happens after I clear the strings while they loaded the correct stuff and saved

=== @ Orithan 04/08/2022 01:21

Tl;dr: It garbles the strings into random SCCs after the first time I type stuff into the string and exit back to the string editor after clearing it.

=== @EmilyV99 (discord: Emily) 04/08/2022 01:28

what the fuck

https://cdn.discordapp.com/attachments/961592870505160724/961799823449817118/zquest.exe
https://cdn.discordapp.com/attachments/961592870505160724/961799824053784596/zelda.exe
does this do anything?

=== @ Orithan 04/08/2022 01:31

Does nothing

=== @EmilyV99 (discord: Emily) 04/08/2022 01:34

I'm SO fucking confused
2+2=71 would be less confusing than this

=== @ Orithan 04/08/2022 01:35

I'm going to see if I can pinpoint what things I type that cause this issue

=== @ Orithan 04/08/2022 02:24

I've been able to reliably replicate this bug in new strings

=== @ Orithan 04/08/2022 02:26

It appears putting certain characters or SCCs at the end of a string causes problems
Putting a ``.`` at the end of the string causes that string to bug out like this

=== @ Orithan 04/08/2022 02:30

Now any new string I am adding is bugging out

=== @ Orithan 04/08/2022 02:32

I am really scared now that the string table as a whole has become corrupted
I don't care if the strings themselves are not actually corrupted, there is some corruption going on here
And its affecting _every_ new string I make

=== @EmilyV99 (discord: Emily) 04/08/2022 02:34

but reloading twice still fixes it?

=== @ Orithan 04/08/2022 02:34

Yes

=== @EmilyV99 (discord: Emily) 04/08/2022 02:34

the actual .qst file is not corrupted then

=== @ Orithan 04/08/2022 02:34

The strings are being stored correctly, but there must be some sort of corruption going on.

=== @EmilyV99 (discord: Emily) 04/08/2022 02:35

something is wrong in loading them

=== @ Orithan 04/08/2022 02:35

(replying to @EmilyV99 (discord: Emily) "the actual .qst file is not c‚Ä¶"): How come it's happening with only strings from this quest?

=== @EmilyV99 (discord: Emily) 04/08/2022 02:35

I have no fucking clue
It has to be something specific to replicate

=== @ Orithan 04/08/2022 02:36

When was the new string editor added?

=== @EmilyV99 (discord: Emily) 04/08/2022 02:36

feb 25th nightly
alpha is 104

=== @ Orithan 04/08/2022 02:38

So right after Alpha 103's release

=== @ Orithan 04/08/2022 02:39

I'm gonna do some digging to see if this is related to the String Editor corruption

=== @EmilyV99 (discord: Emily) 04/08/2022 02:40

oh of course it is
that should be obvious

=== @ Orithan 04/08/2022 03:12

(replying to @EmilyV99 (discord: Emily) "something is wrong in loading‚Ä¶"): This has to be specifically because its running into corrupted data from the quest file

=== @EmilyV99 (discord: Emily) 04/08/2022 03:13

but then it couldn't load properly the second time
if the .qst is corrupted it is unreadable

=== @ Orithan 04/08/2022 03:13

Why is it quest file specific?

=== @EmilyV99 (discord: Emily) 04/08/2022 03:14

it probably isn't
it probabably requires some specific weird thing in order to trigger

=== @EmilyV99 (discord: Emily) 04/08/2022 03:17

(meta) thread name was changed: üíäüîìString editor issues

=== @EmilyV99 (discord: Emily) 04/08/2022 03:32


https://cdn.discordapp.com/attachments/961592870505160724/961830863518191636/zquest.exe

=== @ Orithan 04/08/2022 03:32

As it turns out, it _isn't_ related to string data corruption.

=== @EmilyV99 (discord: Emily) 04/08/2022 03:32

Oh? Have you found something?

=== @ Orithan 04/08/2022 03:33

I grabbed a version of 1 Screen Gollab dating from prior to Alpha 103. Made a bunch of strings and saved it in this version
The majority of them are garbled

=== @EmilyV99 (discord: Emily) 04/08/2022 03:33

fun
good to have that confirmed at least

=== @ Orithan 04/08/2022 03:33

None of these have SCCs

=== @EmilyV99 (discord: Emily) 04/08/2022 03:33

open the zquest I posted above
but
delete allegro.log first
load the quest once, garbled
send me allegro.log
delete allegro.log
load the quest again fixed
and send allegro.log again
it should be printing like 20 lines per message string, so it should be a fair bit of output
I just added a fuckton of traces

=== @ Orithan 04/08/2022 03:37

For the garbled load
https://cdn.discordapp.com/attachments/961592870505160724/961832120790179870/allegro.log
For the fixed load
https://cdn.discordapp.com/attachments/961592870505160724/961832257356714005/allegro.log

=== @EmilyV99 (discord: Emily) 04/08/2022 03:39

which string indexes are garbled?

=== @ Orithan 04/08/2022 03:40

I'll record a video

=== @EmilyV99 (discord: Emily) 04/08/2022 03:41

oh
well I see a printout

![image](https://cdn.discordapp.com/attachments/961592870505160724/961833159425667112/unknown.png)
the `buffer` val has overrun from the previous string
...which, where I'm printing that, makes sense
that is corrected before the `stringval` printout
....and then the `copied string` is just fucking wrong
for a string of `"Last test"`
like
there aren't even any fucking special characters in that

![image](https://cdn.discordapp.com/attachments/961592870505160724/961833642324279296/unknown.png)
this shows the same buffer issue, which is expected, but corrects it
and then *works* for the copy
like
what
the actual fuck

=== @ Orithan 04/08/2022 03:43


![image](https://cdn.discordapp.com/attachments/961592870505160724/961833730241073183/2022-04-08_13-40-13.compressed.mp4)

=== @EmilyV99 (discord: Emily) 04/08/2022 03:44

For the record, the problem here
seems to be that doing `string var = otherstr` is just not working
which
is internal c++ code
and not anything of ours
so how the fuck is it broken

=== @ Orithan 04/08/2022 03:45

I'm gonna do the same in a build prior to the March 25th nightly

=== @EmilyV99 (discord: Emily) 04/08/2022 03:47

are the test strings the same in the drive file you posted earlier?

=== @ Orithan 04/08/2022 03:47

No

=== @EmilyV99 (discord: Emily) 04/08/2022 03:47

mind posting it again then

=== @ Orithan 04/08/2022 03:47

The Drive file?

=== @EmilyV99 (discord: Emily) 04/08/2022 03:47

whatever you just sent allegro.log output from

=== @ Orithan 04/08/2022 03:47


https://cdn.discordapp.com/attachments/961592870505160724/961834766309666866/GGG_Unjoker1.qst
This is the test file I did the Allegro.log output from

=== @EmilyV99 (discord: Emily) 04/08/2022 03:48

k

=== @ Orithan 04/08/2022 03:49

The test strings are random nonsense that spilled from my mind

=== @EmilyV99 (discord: Emily) 04/08/2022 03:51

I'm trying something stupid
let's hope it works

=== @EmilyV99 (discord: Emily) 04/08/2022 03:53

changing fucking zdefs.h makes it take FOREVER to fucking compile uhhhhg

=== @EmilyV99 (discord: Emily) 04/08/2022 03:54

what the fuck
it didn't work
gaaah

=== @ Orithan 04/08/2022 04:16

Tried to replicate this issue in Alpha 103. This is absent from Alpha 103
Gonna try Alpha 104 now

=== @EmilyV99 (discord: Emily) 04/08/2022 04:17

it would be absent in A103, no new string stuff

=== @ Orithan 04/08/2022 04:28

This issue is absent from the Feburary 25th Nightly which introduced the new string editor

=== @EmilyV99 (discord: Emily) 04/08/2022 04:37

I
I think I fixed it?
What the fuck

=== @EmilyV99 (discord: Emily) 04/08/2022 04:40


![image](https://cdn.discordapp.com/attachments/961592870505160724/961847989008220200/unknown.png)
So, this used to be `s = other.s;`
which is a string assignment
which.... is basic C++, and should work without problems
thus the confusion as to why it wasn't working
Upon trying `s.assign(other.s)` it also didn't work
same with `s.assign(other.s.c_str())`, which uses a null-terminated ("C-style") string for the assignment
Doing `s.resize(0)` in an effort to clear the string first did nothing
...adding a trace revealed that it was, in fact, already cleared properly!
On a whim, I asked `What if I resize it to the size it needs to be? The assign should do that for me, but, why not try it?`
and fucking suddenly
I don't see the issue anymore

=== @ Orithan 04/08/2022 04:42

The issue can be traced back as far as the 4/4/2022 Nightly

=== @EmilyV99 (discord: Emily) 04/08/2022 04:42


https://cdn.discordapp.com/attachments/961592870505160724/961848544824803368/zquest.exe
https://cdn.discordapp.com/attachments/961592870505160724/961848545449750529/zelda.exe

=== @ Orithan 04/08/2022 04:42

I suspect the fix Dimi made somehow broke this

=== @EmilyV99 (discord: Emily) 04/08/2022 04:43

yeah, I would guess
but it definitely isn't her fault
because like

=== @ Orithan 04/08/2022 04:43

Oh totally

=== @EmilyV99 (discord: Emily) 04/08/2022 04:43

whatever this is, should not be possible

=== @ Orithan 04/08/2022 04:43

I don't fault her for this

=== @EmilyV99 (discord: Emily) 04/08/2022 04:43

I fixed it with a workaround hack
and the core problem
just
should not be possible
this is cursed bullshit

=== @ Orithan 04/08/2022 04:43

Methinks its Black Box Windows shenanigans
But how?

=== @EmilyV99 (discord: Emily) 04/08/2022 04:44

<:nekoshrug:869489800271503400>
(meta, MessageType.pins_add) 
anyway, if you can just confirm that it isn't fixed ONLY for me or some shit
that would be wonderful
because at this level of cursed bullshit, I think we just have to excpect everything to go wrong
Also, curious if @connorjclark (discord: connorclark) or @ Saffith have any ideas about this
because like
I have no idea why assigning an std::string to another std::string would fail
but work if you add a manual resize call first

=== @ Orithan 04/08/2022 04:46

It's fixed on my end

=== @EmilyV99 (discord: Emily) 04/08/2022 04:46

For reference,
`s = other.s;` -> garbled garbage character values
```s.resize(other.s.size());
s.assign(other.s.c_str());```->works
where `s` and `other.s` are strings
curious if resizing before a standard `=` assignment would work
or if the `.c_str()` is necessary
but frankly don't care enough

![image](https://cdn.discordapp.com/attachments/961592870505160724/961849889174728724/unknown.png)
(meta) thread name was changed: ‚úÖüîíString editor issues

=== @ Orithan 04/08/2022 04:49

Uhh... BitDefender is registering ZC and ZQ as infected

=== @ NightmareJames 04/08/2022 04:49

Hello

=== @ Orithan 04/08/2022 04:49

This specific build

=== @EmilyV99 (discord: Emily) 04/08/2022 04:50

(replying to @ Orithan "Uhh... BitDefender is registe‚Ä¶"): fun!
<:nkoSigh:585926650273988632>

=== @ Orithan 04/08/2022 04:50

...It hit ZLauncher and ZQ

=== @EmilyV99 (discord: Emily) 04/08/2022 04:50

pfffft fun
ZC?

=== @ Orithan 04/08/2022 04:51

Wasn't touched

=== @EmilyV99 (discord: Emily) 04/08/2022 04:51

wait, I didn't give you a new zlauncher

=== @ Orithan 04/08/2022 04:51

Nope.

=== @EmilyV99 (discord: Emily) 04/08/2022 04:51

wtf

=== @ Orithan 04/08/2022 04:51

It registered as a threat the moment I clicked Test Quest

=== @EmilyV99 (discord: Emily) 04/08/2022 04:51

oh
that uhh
makes some sense
it isn't liking ZCL/ZQ trying to launch processes

=== @ Orithan 04/08/2022 04:52

What prevented previous builds from getting flagged?

=== @EmilyV99 (discord: Emily) 04/08/2022 04:52

not a clue, nothing's changed there
perhaps something changed on BitDefender's end
or perhaps some random bit of the binary in the code changed in a way that happens to be creating a false flag

=== @ Orithan 04/08/2022 04:53

It's not affecting the previous nightly

=== @EmilyV99 (discord: Emily) 04/08/2022 04:53

because, all a .exe is is a ton of binary numbers
I have no idea what else would cause a new flagging

=== @connorjclark (discord: connorclark) 04/08/2022 04:55

@EmilyV99 (discord: EmilyV) how was MsgStr made? I think using malloc to instate a std::string member is a bug b/c std::string sets up some memory in its ctor, which malloc approach skips
this seems to corroborate https://stackoverflow.com/a/33210759/2788187

=== @EmilyV99 (discord: Emily) 04/08/2022 04:55

(replying to @connorjclark (discord: connorclark) "@EmilyV99 (discord: EmilyV) how was‚Ä¶"): yes, but it is nulled after that

=== @ Orithan 04/08/2022 04:55

It's telling me I need permission to move anything to the current folder

=== @EmilyV99 (discord: Emily) 04/08/2022 04:55

???

=== @ Orithan 04/08/2022 04:55

I try doing this as Administrator and am denied

=== @EmilyV99 (discord: Emily) 04/08/2022 04:55

uhhh
that sounds like BitDefender itself is being a virus

=== @connorjclark (discord: connorclark) 04/08/2022 04:55

and I see some calls to malloc for this class so I think thats the problem. the resize is fixing it because std::string is then owning its own memory again as it expects

=== @EmilyV99 (discord: Emily) 04/08/2022 04:56

(replying to @connorjclark (discord: connorclark) "and I see some calls to mallo‚Ä¶"): `resize(0)` did not fix it

=== @connorjclark (discord: connorclark) 04/08/2022 04:56

(just a guess)
huh idk then

=== @EmilyV99 (discord: Emily) 04/08/2022 04:56

and, printing the string before resize
it was printing `\"%s\"` -> `""`
so, size 0, just an empty string
but then upon assigning to it
it suddenly was garbled as hell
I removed all `memset` calls clearing the `MsgStr` class
replacing them with a `.clear()` call, which did `s = "";`
because, I figured memset/malloc might be an issue
but once `s = "";` ran and it printed as `""`, I figure that wouldn't be the issue anymore
even if it were, I would think `resize(0)` would fix it

=== @ Orithan 04/08/2022 04:58

It's also killed my Firefox stuff

=== @connorjclark (discord: connorclark) 04/08/2022 04:58

but still, a class with std::string fields shouldnt be made with malloc. if you do `new` then std::string ctors gets called as expected. otherwise malloc is just zeroes and who knows what setup std::string ctor does is missing. my assumption is that some ammount of .resize or .assign triggers the same setup code its `ctor` would

i'm just regurgiated shit i googled here's my source https://stackoverflow.com/a/3411902/2788187

=== @ Orithan 04/08/2022 04:58

Nothing loads on Firefox

=== @EmilyV99 (discord: Emily) 04/08/2022 04:59

uhhhh
I have no clue @ Orithan
Pretty sure the cleanly build exe isn't infected
so I'd suspect BitDefender itself to be an issue

=== @ Orithan 04/08/2022 04:59

It isn't I am positive it is a false flag

=== @EmilyV99 (discord: Emily) 04/08/2022 05:00

when an antivirus decides to become a virus itself, always fun

=== @EmilyV99 (discord: Emily) 04/08/2022 05:03

(replying to @connorjclark (discord: connorclark) "but still, a class with std::‚Ä¶"): eh, weird
at least this seems to work now

=== @ Orithan 04/08/2022 05:07

(replying to @EmilyV99 (discord: Emily) "when an antivirus decides to‚Ä¶"): It outright nuked my Firefox because it thought it was part of the supposed attack
My Firefox just won't do anything now

=== @EmilyV99 (discord: Emily) 04/08/2022 05:16

Wow

=== @ Orithan 04/08/2022 05:18

Trying to search up this issue
It is also noted that I had the whole Zelda Classic folder whitelisted from the antivirus

=== @ Orithan 04/08/2022 05:21

The culprit appears to be Advanced Threat Defense but then it's not giving me access to whitelisting stuff from it
https://www.reddit.com/r/BitDefender/comments/phkyml/atc4detection_is_terrible_and_ignores_the/

=== @EmilyV99 (discord: Emily) 04/08/2022 05:23

Sounds like time for a new antivirus to me

=== @ Orithan 04/08/2022 05:23

It's not the first time it's gone scorched earth on me over a download

=== @ Orithan 04/08/2022 05:24

The first time it happened it was an exe that was designed to get around Windows' forcing of Edge to be default browser when that was stealthily added to Windows 10, except it didn't cause any collateral damage.
(replying to @EmilyV99 (discord: Emily) "Sounds like time for a new an‚Ä¶"): What other antiviruses are good?

=== @EmilyV99 (discord: Emily) 04/08/2022 05:25

Uhh
This is a good question
Norton hasn't served me wrong, though I never have had to actually pay for it

=== @ Orithan 04/08/2022 05:26

Norton is one of the worst

=== @EmilyV99 (discord: Emily) 04/08/2022 05:27

Given your current predicament, it clearly is better than BitDefender

=== @ Orithan 04/08/2022 05:27

I was recommended BitDefender because it was the best antivirus but now I question that after it nuked my Firefox because I downloaded ZC stuff with it.

=== @ Orithan 04/08/2022 05:35

https://www.d7xtech.com/bad-av/
```
The first type:  ‚ÄúInfected‚Äù

Often these ‚Äòfalse positives‚Äô directly state the file is infected, typically with something ‚Äògeneric‚Äô in the name.  Many times this is due to the software compression applied to the executable (program) file, in order to reduce file size and perhaps to help make the software ‚Äúportable‚Äù (meaning it doesn‚Äôt require ‚Äòinstallation‚Äô on a PC, but can run from wherever you downloaded it to.)

Tools used to compress executable files (aka ‚Äòexe packers‚Äô or similar) can greatly reduce file size, saving space but also internet bandwidth in distribution efforts, ultimately reducing overhead costs.  They can also obscure source code that is visible (using the right tools) inside the program, providing protection against decompilation and other techniques of ‚Äòreverse-engineering‚Äô the software, which software crackers would use in theft of the product, such as ‚Äòpiracy‚Äô (through usage and/or distribution) but also with theft of the intellectual property itself by direct source code reproduction.

Of course, the above also makes it more difficult for an Anti-whatever vendor to make a determination about the software‚Äôs intent ‚Äì more often than not they don‚Äôt care to properly unpack and examine the executable, but rather mark it as malicious simply because that type of compression is detected.
```

=== @EmilyV99 (discord: Emily) 04/08/2022 05:37

Pffffft
That's fun
That's like just saying "All zip files are malicious because they are compressed"
To be fair, GDrive basically does exactly that
But it's error isn't that the zip is infected, rather it specifically says `yeah we can't scan this, so, no idea if it's good or bad`

=== @ Orithan 04/08/2022 07:00

(replying to @EmilyV99 (discord: Emily) "Norton hasn't served me wrong‚Ä¶"): Have you ever noticed your computer throttling with Norton?

=== @EmilyV99 (discord: Emily) 04/08/2022 07:11

no

=== @ Orithan 04/08/2022 07:14

Well there are reports of Norton using your system resources to mine bitcoin

=== @EmilyV99 (discord: Emily) 04/08/2022 07:26

oh that's fun

=== @ Saffith 04/10/2022 03:22

I didn't get around to committing it, but I tried changing MsgStrings to a vector so it would initialize strings properly, and it seemed to work without issues. Didn't take much work, either.
But I still want to test it a little more.

=== @EmilyV99 (discord: Emily) 04/10/2022 05:37

currently it's set up using `new[]` and `delete[]`
## üíäüîìGame Time (Quest Rule) object not on passive subscreen (#1330)
@ 4matsy opened this issue on 04/07/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/961592895482249246



=== @ 4matsy 04/07/2022 11:46

So @ NightmareJames just ran a stream earlier this morning on Prototype 6F to test out the new DoS party system on 1st Quest one more time. It was a relatively bug-free run, but I made a suggestion after the run that maybe the quest timer on the passive subscreen should be made visible at all times, so that no one needs to pull down the subscreen just to see their time, which itself wastes time. üòõ

Problem is, James had difficulty getting it to work, which I found odd, as I remember experimenting around with it in the past and successfully doing it.

After some experimentation with an old quest file of mine which *did* have it visible, I found the issue: there's a bug in ZC. üòÆ

So, in the subscreen editor, both the "Game Time" and the "Game Time (Quest Rule)" objects have three checkboxes in the Location tab of their properties: "Active Up", "Active Down", and "Active Scrolling", which respectively control whether the timer in question is visible when the active subscreen is up, down, or in the process of scrolling. The bug is that the (Quest Rule) variant actually disregards the "Active Down" checkbox, rendering said timer invisible on passive subscreens when the active subscreen is hidden from view.

=== @ NightmareJames 04/07/2022 11:57

I'm out now, will post verification when I get home

=== @EmilyV99 (discord: Emily) 04/07/2022 13:28

(replying to @ 4matsy "So @ NightmareJames just‚Ä¶"): Would "Active Down" not be the active subscreen being OPEN, as in, dropped down?
sounds like "Active Up" is the one you want

=== @ 4matsy 04/07/2022 13:55

It might actually be that way around, I haven't been able to check how the code goes.
ü§î

=== @ NightmareJames 04/07/2022 15:07


![image](https://cdn.discordapp.com/attachments/961592895482249246/961643491610492928/unknown.png)
@here

=== @EmilyV99 (discord: Emily) 04/08/2022 03:10

. . . what the fuck
is this
oh
god dammit
fucking
dumbasses

=== @ NightmareJames 04/08/2022 03:13

:: sigh ::

=== @EmilyV99 (discord: Emily) 04/08/2022 03:17

should be fixed, though not gonna post a build yet because we are currently having worrying issues (re: #1329)

=== @EmilyV99 (discord: Emily) 04/08/2022 03:18

(meta) thread name was changed: üíäüîìGame Time (Quest Rule) object not on passive subscreen
also, just for the record
it has nothing to do with the active checkboxes

=== @ NightmareJames 04/08/2022 03:19

Do we need to talk over voice chat?

=== @EmilyV99 (discord: Emily) 04/08/2022 03:19

no it's fixed
(replying to @EmilyV99 (discord: Emily) "should be fixed, though not g‚Ä¶"): ^

=== @ NightmareJames 04/08/2022 03:19

The worrying issues

=== @EmilyV99 (discord: Emily) 04/08/2022 03:19

oh
I don't know what voice chat with you would help
unless you have something to input about c++ std::strings behaving oddly

=== @ NightmareJames 04/08/2022 03:20

Well, wish you luck
TY again

=== @EmilyV99 (discord: Emily) 04/08/2022 04:48

@ NightmareJames #1329 has a pinned build that you can test this fix in

=== @ NightmareJames 04/09/2022 12:33

It's working, but maybe not in the way I'd prefer it to or expect it to
Address this later
Got bigger things on the table ATM

=== @EmilyV99 (discord: Emily) 04/09/2022 13:00

??
It was not visible, now it should be visible
confused as to how it would be working `not in the way you'd prefer it to or expect it to`

=== @ NightmareJames 04/09/2022 13:25

It's like blinking when you transistion screens and not otherwise visible
It is there, but I don't think it's working "properly"
Videos and timestamps later, I am out

=== @ NightmareJames 04/09/2022 18:05

https://youtu.be/vLYV5dpgKQc  0:38 to 1:00, best example, all the way through though

=== @EmilyV99 (discord: Emily) 04/09/2022 18:10

wtf????????

=== @ NightmareJames 04/09/2022 18:16

I know, I'm like the same thing

=== @ NightmareJames 04/09/2022 18:18

Just for verification, if you need anything else let me know
![image](https://cdn.discordapp.com/attachments/961592895482249246/962416105773760612/unknown.png)

=== @ HeroOfFireZC 04/10/2022 03:12

Can confirm, the Game Time (Quest Rule version) is visible during screen transitions and otherwise hidden. The other Game Time subscreen object appears to function fine.

=== @EmilyV99 (discord: Emily) 04/10/2022 05:37

I don't even know why the quest rule version exists
until I just did something, it didn't appear AT ALL
now it is just not appearing during screens
like wtf

=== @ P-Tux7 04/11/2022 19:21

it also appears during death

=== @EmilyV99 (discord: Emily) 04/11/2022 19:24

Is it appearing a problem, or not appearing a problem @ P-Tux7

=== @ P-Tux7 04/11/2022 20:19

It SHOULD be appearing all the time, not just while scrolling or dying

=== @EmilyV99 (discord: Emily) 04/11/2022 20:24

Aye, ok, that's what we were working on here
It wasn't appearing AT ALL before my attempted fix
## ‚ùåüîíTeleport option for Combo Locations (#1331)
@ Chadward Chaddington the 143rd opened this issue on 04/08/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/961914800064036924



=== @ Chadward Chaddington the 143rd 04/08/2022 09:06

I'm getting confused a bit and it'd be faster to have a button to teleport to next combo location, but it'd have to be accessable somewhere on the UI for fast references

=== @EmilyV99 (discord: Emily) 04/08/2022 11:04

?
Like, to scroll automatically to a combo in ZQ?
You, uh, can do that
Right click->Scroll to combo
Or like, do you mean cycling?
Needs more details for me to even understand what you're asking for

=== @ Chadward Chaddington the 143rd 04/08/2022 12:05

Uhh like you know when you right click on a combo and search up combo location
it'd be nice to have a quick jump button to shoot to the tiles with a outline

=== @EmilyV99 (discord: Emily) 04/08/2022 12:07


![image](https://cdn.discordapp.com/attachments/961914800064036924/961960479037722624/unknown.png)
you can open the tile or combo page from this menu

=== @ Chadward Chaddington the 143rd 04/08/2022 12:08

not those
combo locations
right under where u like circled XD

=== @EmilyV99 (discord: Emily) 04/08/2022 12:08


![image](https://cdn.discordapp.com/attachments/961914800064036924/961960792671023174/unknown.png)
...this is a quest report text.
To add that to this would be a major major overhaul

=== @ Chadward Chaddington the 143rd 04/08/2022 12:09

Ah okay XD sorry i just wanted to make things more efficient
still takes me a while to find things

=== @EmilyV99 (discord: Emily) 04/08/2022 12:09

it gives you the map and screen, and you can `goto map`
![image](https://cdn.discordapp.com/attachments/961914800064036924/961960967909015552/unknown.png)
so, it shouldn't be that bad to navigate to it
(meta) thread name was changed: ‚ùåüîíTeleport option for Combo Locations
## ‚úÖüîíTest Mode Not Loading (Alpha 105) (#1332)
@ NightmareJames opened this issue on 04/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/962413496782426152



=== @ NightmareJames 04/09/2022 18:07

Just doesn't seem to be loading when I press the test option.  HELP!

=== @ Moosh 04/09/2022 18:10

Have you launched ZC on its own in this build? If you close ZQuest and ZC and then open ZQuest again, does it work?

=== @EmilyV99 (discord: Emily) 04/09/2022 18:10

https://discord.com/channels/876899628556091432/876954819305275433/962017638186381342

=== @ NightmareJames 04/09/2022 18:12

Thank you.  Will get on it after I'm done setting up this subscreen

=== @arceusplayer11 (discord: Deedee) 04/09/2022 18:16

I'll be posting an update to the alpha soon-ish

=== @ NightmareJames 04/10/2022 00:14

Works now, had to flush out memory.

=== @arceusplayer11 (discord: Deedee) 04/10/2022 23:50

(meta) thread name was changed: ‚úÖüîíTest Mode Not Loading (Alpha 105)

=== @ cbailey78 05/02/2022 17:58

ZC is crashing right after the quest starts. I'm using the latest nightly build anyway.

=== @EmilyV99 (discord: Emily) 05/02/2022 17:58

Allegro.log?

=== @ cbailey78 05/02/2022 18:01

I'll look for it...

=== @ cbailey78 05/02/2022 18:03

Here you go.
https://cdn.discordapp.com/attachments/962413496782426152/970747437041999982/allegro.log

=== @EmilyV99 (discord: Emily) 05/02/2022 18:07

~~Err, you sure you're on the latest nightly? That indicates an almost month-old build....~~ @ cbailey78
Or is that the previous info? Not sure, as the log file has q lot in it....
Make sure the quest is saved in the new build
Then delete allegro.log
*then* launch test mode and send the new log
That'll clear it up

=== @EmilyV99 (discord: Emily) 05/02/2022 18:11

...hmm, also simple question, when you try to launch test mode, do you already have ZC open?

=== @ cbailey78 05/02/2022 18:15

Nope. ZC is not open before testing my quest.

=== @EmilyV99 (discord: Emily) 05/02/2022 18:16

Well, test mode can't launch an instance of ZC if one is already open

=== @ cbailey78 05/02/2022 18:17


https://cdn.discordapp.com/attachments/962413496782426152/970750921950765136/allegro.log

=== @EmilyV99 (discord: Emily) 05/02/2022 18:18

Did you remove a `zelda.nsf` file?

=== @ cbailey78 05/02/2022 18:19

Nope, It's there in the same directory as ZC.

=== @EmilyV99 (discord: Emily) 05/02/2022 18:20

```
Trying to load C:\Users\Acer\Desktop\ZC\2.55\zelda.nsf
nsf file 'C:\Users\Acer\Desktop\ZC\2.55\zelda.nsf' not found.
Trying to load c:\Users\Acer\Desktop\ZC\zelda.nsf```
It appears to be in neither of those locations
Unless it is in the second one and it's just crashing immediately from something else....
But that's the last entry in the log

=== @ cbailey78 05/02/2022 18:39

I have zelda.nsf in both locations and it's still crashing.

=== @EmilyV99 (discord: Emily) 05/02/2022 18:40

Not sure then. Gonna need the quest file.
Does this only crash in test mode, though?

=== @ cbailey78 05/02/2022 18:41

It does it to all quests, so it's not the quest file.

=== @EmilyV99 (discord: Emily) 05/02/2022 18:41

Oh???
@arceusplayer11 (discord: Deedee) ?
(Not at my pc to test)

=== @ cbailey78 05/02/2022 18:42

It both crashes in test mode and regular ZC.

=== @EmilyV99 (discord: Emily) 05/02/2022 18:42

(replying to @ cbailey78 "It both crashes in test mode‚Ä¶"): ... then why is this in this thread?

=== @ cbailey78 05/02/2022 18:43

Oops, I forgot to start a new thread to report a bug, sorry about that.
I already created a thread anyways to #1395
## ‚úÖüîíChanging the cset of an FFC changes the current cset for the screen editor (#1333)
@ Russ opened this issue on 04/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/962433553969340496



=== @ Russ 04/09/2022 19:27

Exactly as it says on the tin. Open the FFC menu, edit an FFC, and set its combo. When you close out of the FFC editor, the currently selected cset will change to whatever the last FFC edited's cset is.
With 2.55 alpha 105, to clarify
I certainly don't recall this behaviour occurring with alpha 104

=== @EmilyV99 (discord: Emily) 04/09/2022 19:57

Wouldn't be new to 105

=== @EmilyV99 (discord: Emily) 07/08/2022 20:25

fixed
(meta) thread name was changed: ‚úÖüîíChanging the cset of an FFC changes the current cset for the screen editor
## Enemy Flag-Not affected by clock (#1334)
@ Lost Attempt opened this issue on 04/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/962606697220816957



=== @ Lost Attempt 04/10/2022 06:55

have a flag in the enemy editor that doesn't make the enemy affected when a clock is active.

=== @EmilyV99 (discord: Emily) 04/10/2022 06:58

@arceusplayer11 (discord: Deedee)
## ‚úÖüîízelda.exe now refuses to run on my computer (#1335)
@ FireSeraphim opened this issue on 04/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/962627463312183306



=== @ FireSeraphim 04/10/2022 08:17

As of the latest bleeding edge build, zelda.exe now refuses to run. It brief shows up in task manager before self-terminating and it didn't use to do this
the computer I'm using is a x64 bit Windows 7 PC

=== @EmilyV99 (discord: Emily) 04/10/2022 09:12

try this? https://discord.com/channels/876899628556091432/876954819305275433/962017638186381342
we need to post a nightly soon

=== @ FireSeraphim 04/13/2022 00:38

The new build fixed it, thank you

=== @connorjclark (discord: connorclark) 09/04/2022 03:24

(meta) thread name was changed: ‚úÖüîízelda.exe now refuses to run on my computer
## Stomping Two Enemies At Once Hurts Player (#1336)
@ P-Tux7 opened this issue on 04/10/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/962634220172361808



=== @ P-Tux7 04/10/2022 08:44

Stomping two enemies at once hurts the player. I presume that this is because of the stomp weapon being "used up" on one of the enemies. Perhaps a QR should be made to let the weapon unconditionally exist for a frame or two when landing instead of dying upon collision with an enemy? Granted, I'm not sure how this would interact with enemies that "block" (and presumably kill) the stomp weapon, but it's at least better.

=== @EmilyV99 (discord: Emily) 04/10/2022 09:12

@arceusplayer11 (discord: Deedee)
## ‚úÖüîíCan no longer scroll off of partially solid combos (#1337)
@ Russ opened this issue on 04/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/962716826133999726



=== @ Russ 04/10/2022 14:12

A bug that seems to have popped up in newer alphas
Basically

![image](https://cdn.discordapp.com/attachments/962716826133999726/962716899148464139/zquest_screen00772.png)
Say we have a situation like this. There's a cliff corner piece at the edge of a screen
In 2.53 and in older alphas of 2.55, if you walked off the screen and landed on this cliff tile, you could turn back to the  right and scroll back to the previous screen
As of alpha 105, you no longer can, creating soft locks in a crapton of older quests

https://cdn.discordapp.com/attachments/962716826133999726/962717180145852466/CornerTest.qst
This test was saved in 2.53. You can play it in 2.53 and in 2.55 alpha 105 to see for yourself

=== @arceusplayer11 (discord: Deedee) 04/10/2022 14:22

damnit, I thought I fixed that üò©

=== @arceusplayer11 (discord: Deedee) 04/10/2022 14:23

either it got reintroduced or I'm a moron who didn't push; probably the latter

=== @arceusplayer11 (discord: Deedee) 04/10/2022 23:49

I probably pushed the fix to the enemy editor branch cause I'm stupid
either way, fixed
(meta) thread name was changed: üíäüîìCan no longer scroll off of partially solid combos

=== @ Russ 04/11/2022 15:41

Can confirm this is fixed

=== @arceusplayer11 (discord: Deedee) 04/11/2022 15:58

also woo!
(meta) thread name was changed: ‚úÖüîíCan no longer scroll off of partially solid combos
## ‚úÖüîíChanging DMap enhanced music breaks tile warps (#1338)
@ Russ opened this issue on 04/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/962721013651636344



=== @ Russ 04/10/2022 14:29

I've brought this up in the past, but it's still an issue and I'm really getting tired of working around what is likely a one line fix. If you change the enhanced music for a dmap via script, tile warps within the dmap, or between the dmap and another that shares the same music, cause the music to reset. This does not happen for side warps. It only occurs with tile warps. Could someone _please_ take a look at what is different in the music handling code in the two warp types and fix this. It's getting rather annoying rescripting tile warps to use side warps.

=== @arceusplayer11 (discord: Deedee) 04/10/2022 14:46

Emily's out for the day I think, so you're gonna have to wait until I'm done with what I'm working on

=== @arceusplayer11 (discord: Deedee) 04/10/2022 23:36

Fixed, it was stupid.
(meta) thread name was changed: üíäüîìChanging DMap enhanced music breaks tile warps

=== @ Orithan 04/11/2022 11:10

Seems like another ancient 2.50 bug bites the dust

=== @ Russ 04/11/2022 15:41

Can confirm this is fixed

=== @arceusplayer11 (discord: Deedee) 04/11/2022 15:58

woo!
(meta) thread name was changed: ‚úÖüîíChanging DMap enhanced music breaks tile warps
## ‚úÖüîíTileModifier for Hero (#1339)
@ bigjoe opened this issue on 04/11/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/962970003601227786



=== @ bigjoe 04/11/2022 06:59

We have TileModifier for Items, but it would be nice if we could get the total TileModifier number for the player. This would make setting up new animations for tile shifted characters a breeze.

=== @EmilyV99 (discord: Emily) 04/11/2022 10:46

like, via script?

=== @ bigjoe 04/11/2022 21:03

yeah

=== @EmilyV99 (discord: Emily) 04/24/2022 09:35

`Hero->TileMod`
```
int TileMod;
 * Read-only
 * The current *total* Player Tile Modifier.```
(meta) thread name was changed: ‚úÖüîíTileModifier for Hero

=== @ bigjoe 04/24/2022 19:15

Thanks! üëç this will make a whole lot of things a lot easier

=== @EmilyV99 (discord: Emily) 04/24/2022 22:29

Notably,this includes not only items, but also the 'bunny' modifier if bunnied
## Editor setting to preserve layer data when deleting screens (#1340)
@ Moosh opened this issue on 04/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/963034434062413824



=== @ Moosh 04/11/2022 11:15

When you delete a screen in ZQuest, currently it also clears its layer data. When using autolayer, this can prove a minor inconvenience as we need to either reassign the autolayer or manually reassign layers for the deleted screens

=== @EmilyV99 (discord: Emily) 04/11/2022 11:15

Hmm
Similar idea to deedee's suggestion in #1327
Which was a version of paste all that copies not the layer reference, but instead copies the layer data to the layer already set on the dest screen
So like, we have special pasting options

=== @ Moosh 04/11/2022 11:17

Interesting. That'd be welcome as well

=== @EmilyV99 (discord: Emily) 04/11/2022 11:17

Adding similar for clearing data shouldn't be that bad?
`Clear All`, `Clear All but Layer Data`
And anything else that would seem useful

=== @ Moosh 04/11/2022 11:19

I figured it could be a ZQuest wide setting. Because users are typically either using autolayer and want to preserve layer data when deleting, or aren't and would likely prefer the old way

=== @ Moosh 04/11/2022 11:20

But I wouldn't be opposed if it were a dropdown with an easy enough shortcut, like palette pasting

=== @EmilyV99 (discord: Emily) 04/11/2022 11:24

Favorite commands are always nice
and, what I could do
is make it so that it's all in a new gui?
You could like, check which things you want deleted?
probably as an *in addition* to a menu with all the individual options
so you won't need to uncheck everything to check one thing, and then re-check the rest

=== @ Moosh 04/11/2022 11:25

Like a popup? Seems like it might add more hassle than it solves

=== @EmilyV99 (discord: Emily) 04/11/2022 11:25

(though I'd have a Un/Check All buttons)
I would think that would be useful because it could get a keybind
like, Shift+Del or something
and that's the easiest way to delete everything EXCEPT one thing
instead of needing to add that option for like, each possible thing

=== @ Moosh 04/11/2022 11:27

Yeah that makes sense

=== @ Moosh 04/11/2022 11:29

So like Shift+Del opens a special delete window, you select your options, enter confirms, and it remembers your settings from the last time the window was opened?

=== @EmilyV99 (discord: Emily) 04/11/2022 11:39

yeah, that's the idea
not sure when I'll get around to this, gotta have the energy for gui work and shit
but, definitely a good idea on the table

=== @ vlamart 04/11/2022 18:24

I think shortcut and QOL options should also be in the launcher like the number pad shortcut option. So users can have their preferences before even opening the editor
## Manhandlas Hands Hardcoded in Old Animation (#1341)
@ NightmareJames opened this issue on 04/11/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963112815613345822



=== @ NightmareJames 04/11/2022 16:26

Confirmed

![image](https://cdn.discordapp.com/attachments/963112815613345822/963112920668057630/unknown.png)
'
![image](https://cdn.discordapp.com/attachments/963112815613345822/963113003459411978/unknown.png)

![image](https://cdn.discordapp.com/attachments/963112815613345822/963113154701852682/unknown.png)

=== @ P-Tux7 04/11/2022 16:28

It might be a problem even if you select that as the New animation, come to think of it

=== @ NightmareJames 04/11/2022 16:29

@ Moosh

=== @ P-Tux7 04/11/2022 16:29

If you're uninterested in waiting for a bugfix I can copy them to the New Enemy Tiles Manhandla format when I do the Super Manhandla
This is more @arceusplayer11 (discord: Deedee) thing

=== @ NightmareJames 04/11/2022 16:30

Discuss New Tile stuff in the 3rdEX thread please (sorry, bad mod here, but this is only for the bug)

=== @arceusplayer11 (discord: Deedee) 04/11/2022 16:32

ooof

=== @ NightmareJames 04/11/2022 16:34

Bug or no bug DeeDee?

=== @arceusplayer11 (discord: Deedee) 04/11/2022 16:36

unsure; the whole point of old animation style is to replicate NES-quests, but uh;
I guess I could make a new QR for it

=== @ NightmareJames 04/11/2022 16:37

Would Enemy Flag be better?

=== @ P-Tux7 04/11/2022 16:38

enemy flags are limited; QRs are not
also generally the questmaker would want this bug fixed for all Manhandlas so it being a per-Manhandla flag would be pointless

=== @ P-Tux7 04/11/2022 16:45

oh turns out this isn't quite a bug
"Manhandla" is the same animation style for both Old and New enemy tiles; it all depends on the QR
so unless you want to go through the undertaking of doing that for EVERY hardcoded animation (Moldorm, Aquamentus, Gleeok, Digdogger, Manhandla) I think I'll just convert 3rdEX to New Enemy Tiles
i guess you COULD call that a bug but like... blegh

=== @ NightmareJames 04/11/2022 16:46

Yeah, I just think we're just going to convert and save the devs some work and add this to documentation

=== @ P-Tux7 04/13/2022 03:55

i do think this counts as a bug though, the hands not using the four tiles before the core
@ vlamart word of warning for your "blank quest" thing

=== @ vlamart 04/13/2022 04:02

(replying to @ P-Tux7 "@ vlamart word of‚Ä¶"): Thank you! The "blank quest" was mostly to help find all these hardcoded things anyways. Though I've taken a break from that for now to work on my own quest, which this is still helpful
## Subscreen Timer Displaying While Scrolling (#1342)
@ P-Tux7 opened this issue on 04/11/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963155248250249266



=== @ P-Tux7 04/11/2022 19:15

@ NightmareJames check out Tiny Quest Gold

=== @EmilyV99 (discord: Emily) 04/11/2022 19:19

#1330
## A106 - Credits Triforce Uses CSet 7-8 from Quest (#1343)
@ P-Tux7 opened this issue on 04/11/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963171935502610452



=== @ P-Tux7 04/11/2022 20:21

Ordinarily, the Triforce displayed on Ganon's ashes uses hardcoded CSets from Zelda 1. But after finishing Tiny Quest Gold in A106, I noticed it used the CSets from the quest.
The CSet of the ashes appears to be correct, though.
This ain't right.
![image](https://cdn.discordapp.com/attachments/963171935502610452/963172030134517921/zc_screen00001.png)
## ‚ùåüîíMovement input gets stuck (#1344)
@connorjclark (discord: connorclark) opened this issue on 04/13/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963656515129081876



=== @connorjclark (discord: connorclark) 04/13/2022 04:26

In "In the Lost Kingdom of the Banana Blood God" as soon as the intro ends and you can move, you can only move in straight lines until you hit a wall

At first I thought it was a joke but... seems like it isn't?

=== @ 4matsy 04/13/2022 04:27

That's actually part of the quest.
Keep playing until you regain normal movement. :p

=== @connorjclark (discord: connorclark) 04/13/2022 04:28

lmao
that's hilarious
the name entry part was really clever too.

thanks!

=== @EmilyV99 (discord: Emily) 04/13/2022 12:01

(meta) thread name was changed: ‚ùåüîíMovement input gets stuck
## Palette Editor Missing Old Hot Keys (#1345)
@ Anthus opened this issue on 04/13/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963664368648740884



=== @ Anthus 04/13/2022 04:58

- In alpha 106, pressing the Delete key in the palette editor no longer deletes the selected c-set.
- Pressing 'T' in the combo editor no longer opens the Tile page.
- You can also no longer hold Shift + Arrow Up/ Down to select multiple c-sets in the palette editor.

=== @ Anthus 04/13/2022 05:01

(I'm not sure if these are bugs tbh, but they seem like handy features that may have been removed at some point. They are in alpha 96, but I have not used any alphas between 96 and 106)

=== @EmilyV99 (discord: Emily) 04/13/2022 12:01

@arceusplayer11 (discord: Deedee)
## ‚úÖüîíLarge Bottle Items are not using the correct tiles for filling (#1346)
@ Orithan opened this issue on 04/13/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963773794831446018



=== @ Orithan 04/13/2022 12:12

It appears the Bottle itemclass does not account for large item tiles.

![image](https://cdn.discordapp.com/attachments/963773794831446018/963773902453112832/zc_screen00002.png)
It is a fixed +AFrames tile, regardless of the item's Tile size

=== @ Orithan 04/13/2022 12:24

Also bonus oddity (unsure if this is a bug):
Only the tile of the first item ID of a given level of bottle is shown on the active subscreen. If you have multiple of the same level the second bottle tile is not shown on the active subscreen.
They display on the Passive subscreen when selected.
![image](https://cdn.discordapp.com/attachments/963773794831446018/963776808694714378/zc_screen00003.png)

=== @EmilyV99 (discord: Emily) 04/13/2022 12:44

blehg
large items are... blehg
and, technically you are not supposed to have more than one of the same level of an item as far as ZC is concerned

=== @ Orithan 04/13/2022 12:45

Mhm

=== @EmilyV99 (discord: Emily) 04/13/2022 12:45

so I'm guessing that is subscreen-fucky
generally, you'd solve this by... making them not the same level
the whole idea of bottles means they should all basically be set up identically, so, just making their level be which bottle they are in order is simple enough

=== @ Orithan 04/13/2022 12:46

Their slot is set independently
This oddity persists through Item Override

=== @EmilyV99 (discord: Emily) 05/07/2022 15:51

OK so
(replying to @ Orithan "It appears the Bottle itemcla‚Ä¶"): fixed

=== @EmilyV99 (discord: Emily) 05/07/2022 15:52

(replying to @ Orithan "Also bonus oddity (unsure if‚Ä¶"): This isn't what's happening for me, at least not quite
what seems to be happening is, if you own either item, it thinks you own both
it's displaying the right tiles for each, though

=== @EmilyV99 (discord: Emily) 05/07/2022 15:54

(replying to @EmilyV99 (discord: Emily) "what seems to be happening is‚Ä¶"): err, if you own the lower item ID number item
not either
Also, that issue doesn't look like it's related to bottles, that's just something broken outright. And the correct code is there, but commented out. I feel like someone fucked something up here

=== @EmilyV99 (discord: Emily) 05/07/2022 16:45


![image](https://cdn.discordapp.com/attachments/963773794831446018/972539747140513852/unknown.png)
OK
Fixed, and did some more
There's now a compat rule for 'old selectors'
and with that unchecked, it will attempt to stretch the selector to the item size
uses the hitwidth/height/offsets for precise pixel measurements, respects size on both the selector and the selected item

=== @EmilyV99 (discord: Emily) 05/07/2022 16:52

Oh, also

![image](https://cdn.discordapp.com/attachments/963773794831446018/972541463038656632/unknown.png)
Preview in the item editor now accounts for size
If you change the size, you need to click `Refresh Preview` to reload it; size information needs to be known when creating the dialog, so it needs a manual reload to resize it.

=== @EmilyV99 (discord: Emily) 05/07/2022 17:47

aaaand

![image](https://cdn.discordapp.com/attachments/963773794831446018/972555216937443348/unknown.png)
You can now select what contents to preview, if the itemclass is set to Bottles

=== @EmilyV99 (discord: Emily) 05/07/2022 18:24

(meta) thread name was changed: ‚úÖüîíLarge Bottle Items are not using the correct tiles for filling
## ‚úÖüîí[Alpha 106]Selecting Brush Width 8 at combo 65252 makes ZQuest crash (#1347)
@ Majora opened this issue on 04/13/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963885339884269618



=== @ Majora 04/13/2022 19:36

I am a weirdo and decided to use the very end of the combo list for title screen stuff. 

Brush width 7 is fine at 65252, but changing it to 8 regardless of order to selecting combo 65252 makes ZQuest immediately crash.
https://cdn.discordapp.com/attachments/963885339884269618/963885344435097740/StarOath.qst

=== @ Majora 04/13/2022 19:46

actually I checked and it happens starting at brush width 5, and at combo 65252 (65251 is fine at brush width 5)

=== @EmilyV99 (discord: Emily) 04/14/2022 01:15

Uhg
Ffs
@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 05/07/2022 14:29

Oh, fun
So, if you use the option `Combo Brush`, it actually previews the combos on the screen before you place them
and it has very poor sanity bounding

=== @EmilyV99 (discord: Emily) 05/07/2022 14:50

fixed
(meta) thread name was changed: ‚úÖüîí[Alpha 106]Selecting Brush Width 8 at combo 65252 makes ZQuest crash
## Combo edit dialog scrolling weirdness (#1348)
@EmilyV99 (discord: Emily) opened this issue on 04/14/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/963985688720719902



=== @EmilyV99 (discord: Emily) 04/14/2022 02:14

If you open the combo pages, then edit a combo, then SCROLLWHEEL while in the edit combo dialog, it will scroll to the next combo page when you exit the dialog
@arceusplayer11 (discord: Deedee)
Pretty sure it's caching the mouse's Z position
needs to reset the cache when the dialog closes

=== @EmilyV99 (discord: Emily) 04/14/2022 02:18

....it doesn't just do this in the combo pages
it does this in the main fucking window as well
if you rclick->edit combo
## What even is this Gleeock 2 animation structure? (#1349)
@ FireSeraphim opened this issue on 04/15/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/964350310896255068



=== @ FireSeraphim 04/15/2022 02:23

I'm sorta running into a issue where the fire gleeock's animation is borked in my untitled project. admittedly it could be something to do with quest rules but the Gleeock 1 animate just fine. I have tried completely moving Gleeock 2's tiles elsewhere and I end up having to fix it up like so.

![image](https://cdn.discordapp.com/attachments/964350310896255068/964350441548828752/zquest_screen00003.png)
![image](https://cdn.discordapp.com/attachments/964350310896255068/964350441737568277/zquest_screen00004.png)

=== @ FireSeraphim 04/15/2022 02:25

I'm still having lingering animation issues with Gleeock 2's with it's neck segments not showing up ingame as seen here
![image](https://cdn.discordapp.com/attachments/964350310896255068/964350695123857448/zc_screen00001.png)
![image](https://cdn.discordapp.com/attachments/964350310896255068/964350695320997998/zc_screen00002.png)

=== @ FireSeraphim 04/15/2022 02:26

If you wish, I could DM you my quest file so you can take a closer look.

=== @EmilyV99 (discord: Emily) 04/15/2022 02:29

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 04/16/2022 11:42

@ FireSeraphim Check Data 2. Neck offset 1 is the tile offset from the main gleeok's tile (what you have selected as the gleeok's tile) that the Neck's tiles start at. Neck tiles use 4 frames of animation. Neck offset 2 is the offset from *that* that each subsequent neck tile uses (allowing you to have a unique tile per neck). For example, a Neck Offset 2 of 20 would mean each neck segment would use the tile one row down from the last.
I want to say you want a neck offset 1 of 40, and a neck offset 2 of 20 (or 0 if you are fine with the necks being all the same tile)

=== @ FireSeraphim 04/18/2022 02:18

is that segment near the body supposed to have such a high render priority? I mean I appreciate your help and it has helped to fix gleeock 2 so that it renders properly in my side project but I can't help but to pin some question marks on that neck segment near the body in both cases
![image](https://cdn.discordapp.com/attachments/964350310896255068/965436037209915472/zc_screen00003.png)
![image](https://cdn.discordapp.com/attachments/964350310896255068/965436037415452712/zc_screen00002.png)
## Random Scripting Error Changing Type of Enemies (#1350)
@ NightmareJames opened this issue on 04/15/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/964632872793292821



=== @ NightmareJames 04/15/2022 21:06

Posting pictures in a minute
Original room
![image](https://cdn.discordapp.com/attachments/964632872793292821/964632962886938634/unknown.png)
Changed room, it is one short
![image](https://cdn.discordapp.com/attachments/964632872793292821/964633102188163082/unknown.png)
Emily, please post the fix here and mark it sick.  It was working, but I need to change it for the entire build of New Quest  and verify just to make sure though

=== @ P-Tux7 04/16/2022 00:15

the heck is that sword

=== @ NightmareJames 04/16/2022 00:17

New Quest had some weird swords, but that is the Lv. 4 Sword from Lv. 11

=== @EmilyV99 (discord: Emily) 04/16/2022 02:31

Why did you even make a report if that fixed it

=== @ NightmareJames 04/16/2022 02:50

Documentation purposes and I wasn't done going through it, but I am now and it is indeed fixed
## ‚úÖüîíSignposts draw prompts when player can read them. (#1351)
@ Orithan opened this issue on 04/16/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/964680542308143155



=== @ Orithan 04/16/2022 00:16

Can we have a way to have signpost combos draw input prompts when the player can read them? This makes it easier to read when they can be talked to, especially when used in tandem with NPC scripts like Moosh NPC.

=== @EmilyV99 (discord: Emily) 04/24/2022 10:29

@ Orithan
![image](https://cdn.discordapp.com/attachments/964680542308143155/967734073554534430/2022-04-24_06-27-55.mp4)
(meta) thread name was changed: ‚úÖüîíSignposts draw prompts when player can read them.
prompt is drawn *EXACTLY* above the player, as part of the player's draw
combo, cset, xoffset, yoffset configurable per-combo
and a generic version to use with whatever you'd like

=== @ Orithan 04/24/2022 10:33

Oooh nice

=== @EmilyV99 (discord: Emily) 04/24/2022 10:34

A combo of `0` will be ignored, as usual

=== @EmilyV99 (discord: Emily) 04/24/2022 10:35

The prompt on the right blinks in the video when I press the button; you could set that combo to do `->Next`, or trigger secrets, etc on that buttonpress as well, in which case the prompt would not re-appear after disappearing
## npc Knockback() can knock NPCs into edges of solid combos (#1352)
@ Orithan opened this issue on 04/16/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/964847088225648650



=== @ Orithan 04/16/2022 11:17

``npc->Knockback()`` can knock NPCs into the edges of solid combos

![image](https://cdn.discordapp.com/attachments/964847088225648650/964847131724775464/zc_screen00010.png)
![image](https://cdn.discordapp.com/attachments/964847088225648650/964847131947061278/zc_screen00011.png)

=== @EmilyV99 (discord: Emily) 04/16/2022 14:39

what
the fuck

=== @EmilyV99 (discord: Emily) 04/17/2022 00:40

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 04/30/2022 05:02

@ Orithan @EmilyV99 (discord: EmilyV) it appears to be tied to the offgrid enemy flag for some reason

=== @arceusplayer11 (discord: Deedee) 04/30/2022 05:06

if it isn't checked, then the canwalk function it uses skips the 15 pixels that aren't the leftmost or topmost side that's being checked
if offgrid is enabled... it only skips 7 pixels instead of 15
yeah I think I'm just gonna replace the canwalk function it's checking with the ghosted one.
## Change the default tile warp type to insta-warp (#1353)
@ Chadward Chaddington the 143rd opened this issue on 04/16/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/964872755487064074



=== @ Chadward Chaddington the 143rd 04/16/2022 12:59

I feel like this would be a quality of life change seeing as how cave/item cellar is rarely used and mostly everyone i talked too said to use insta-warp, but it would really make the process streamlined

=== @EmilyV99 (discord: Emily) 04/16/2022 14:40

the thing is
the default warp
is the warp type which has the value `0`
because.... everything gets zeroed out

=== @ Chadward Chaddington the 143rd 04/16/2022 19:30

o: well if it'd be too hard to implement i'd understand XD i just thought that'd be a decent idea especially for newcomers who don't fully understand to make it easier!
## Un-Hardcode Arrow+Boomerang Impact Sprite (#1354)
@ Majora opened this issue on 04/16/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/964949007191396372



=== @ Majora 04/16/2022 18:02

It seems Tile 54 is the defacto tile for the little impact blip from arrows/boomerangs. How about making that just a category in the sprite list (so that say, different arrows can have different impact sprites)

=== @EmilyV99 (discord: Emily) 04/16/2022 18:04

@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 04/16/2022 22:10

#deleted-channel
full list
## lweapon Weapon does target bomb defense (#1355)
@ Orithan opened this issue on 04/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965199165325971456



=== @ Orithan 04/17/2022 10:36

```
int Weapon;
 * The UseWeapon property for this weapon. 
 * If set to a value greater than 0, all collisions with npcs
 * will use this as if it was the weapon's ID for calculating
 * the defence value for it. 
 * e.g., if a LW_MAGIC weapon is set to a Weapon of LW_BRANG, when it
 * collides with an npc, the npc will use Defence[LW_BRANG] to resolve 
 * its effects.
 *
 * Some weapons will also trigger map flags, and screen combos as
 * if the natural weapon was the value set as ->Weapon.,
 * e.g. If you set a LW_BRANG weapon to a ->Weapon of LW_SWORD,
 * it will cut bushes. 
```

Weapons changed to ``LW_BOMB`` do not use the bomb defense. Instead they use the defense of the weapon it was created as.

=== @EmilyV99 (discord: Emily) 04/17/2022 11:34

`LW_BOMB` is the physical placed bomb
did you try `LW_BOMBBLAST`?

=== @ Orithan 04/17/2022 11:37

Oh derp
We tried ``LW_BOMBBLAST``
This happened
## npc HitBy[] not registering swords created when player Step is over 150 (#1356)
@ Orithan opened this issue on 04/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965203880881311744



=== @ Orithan 04/17/2022 10:55

Setting ``Player->Step`` to ``> 150`` causes issues with Sword LWeapons not registering in ``this->HitBy[2]`` most of the time

=== @EmilyV99 (discord: Emily) 04/17/2022 11:36

We really just need to rewrite HitBy from scratch to fix Zoria's jank ass shit, don't we @arceusplayer11 (discord: Deedee) ?\

=== @arceusplayer11 (discord: Deedee) 04/17/2022 11:36

yeah v.v
I don't have the energy currently or probably for the next few days
## Enable Filtering by PNG (#1357)
@ Majora opened this issue on 04/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/965276450599084114



=== @ Majora 04/17/2022 15:44

When loading a file to grab tiles, the display options are: 
BMP 
GIF 
JP(E)G 
ZC formats
some ROM-related formats for NES, SNES, GB and GBA

PNG: crying in corner
## Water Jumping (#1358)
@ Majora opened this issue on 04/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965350885842624562



=== @ Majora 04/17/2022 20:39

Sorry if reported already
![image](https://cdn.discordapp.com/attachments/965350885842624562/965350890519298058/Move_Over_Jesus.mp4)
If needed
https://cdn.discordapp.com/attachments/965350885842624562/965351071952281630/StarOath.qst

=== @EmilyV99 (discord: Emily) 04/17/2022 20:49

@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 04/17/2022 21:09

note to self: check if it's a 2.50 thing
## No push block doesn't work with layer 1 and 2 toggle in combo options (#1359)
@ Chadward Chaddington the 143rd opened this issue on 04/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965362726375391232



=== @ Chadward Chaddington the 143rd 04/17/2022 21:26

title

=== @EmilyV99 (discord: Emily) 05/07/2022 14:19

It should work
but the no push flag needs to be on the same layer as the block
## ‚úÖüîíMouse wheel scrolls down the combo list while editing the attribs for combos (#1360)
@ Chadward Chaddington the 143rd opened this issue on 04/17/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965363758975320124



=== @ Chadward Chaddington the 143rd 04/17/2022 21:30

title

=== @EmilyV99 (discord: Emily) 04/24/2022 14:47

fixed
(meta) thread name was changed: ‚úÖüîíMouse wheel scrolls down the combo list while editing the attribs for combos
## Export All MIDIs in a Quest (#1361)
@ Majora opened this issue on 04/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/965464998237319218



=== @ Majora 04/18/2022 04:13

Mostly asking under the assumption it'd be like a two minute job, but yeah it just seems odd not being able to. Ideally to a ZC/questnameMIDIs/ subfolder if possible.

=== @ NightmareJames 04/18/2022 07:56

I second this

=== @connorjclark (discord: connorclark) 04/19/2022 13:39

This won't be a usable method for most, but I have a CLI tool that does this.

https://github.com/connorjclark/zquest-data

Pass  `--save-midis` as a flag
If it'd be useful I could (later this week)  run a script that extracts _all_ the midis on purezc and  upload  them somewhere üòõ

=== @ Majora 04/22/2022 23:13

Well I got as far as installing docker but as usual computers are so wonderful and intuitive.

=== @ Majora 04/22/2022 23:24

oh I think I got it
after installing docker I had to do "docker build https://github.com/connorjclark/zquest-data.git " and now its goin'

=== @connorjclark (discord: connorclark) 04/22/2022 23:25

Iirc you'll need to make a folder called quests too and put your quest in there
(or you can run that download quests script, which takes a bit and scrapes purezc)

=== @ Majora 04/22/2022 23:26

gotcha, ty. nah I just wanna yank the MIDIs out of my own/one quest

=== @connorjclark (discord: connorclark) 04/22/2022 23:27

wtf I did this 3 years ago? Seemed more recent

=== @ Majora 04/23/2022 00:02

I get "invalid reference format" which assumedly is because you build on Mac and I'm on Windows.
after doing docker run ./docker_run.sh "test_data/bs/2.5/NewBS 3.1 - 1st Quest.qst"

(I was trying to see if literally anything would happen)

=== @connorjclark (discord: connorclark) 04/23/2022 01:56

Try running from a bash terminal? Instead of cmd or PowerShell

=== @connorjclark (discord: connorclark) 04/23/2022 01:57

Otherwise read the docker run shell script and rewrite for windows terminal, it's just one line
also I'm happy to grab these midis for ya

=== @connorjclark (discord: connorclark) 04/23/2022 01:58

Docker works regardless of the host machine, but I did wrap kicking it off in a simple bash script.

=== @ Majora 04/23/2022 02:04

https://www.dropbox.com/s/gyu342mhwfncr0f/Resurgence255.qst?dl=0

Yes please

=== @connorjclark (discord: connorclark) 04/23/2022 05:41

I'll hook you up tmrw

=== @connorjclark (discord: connorclark) 04/24/2022 01:56

had to fix a bug to handle random garbage bytes between sections, but i got your midis now
![image](https://cdn.discordapp.com/attachments/965464998237319218/967604828547186718/unknown.png)
https://cdn.discordapp.com/attachments/965464998237319218/967604828782075964/output.zip

=== @ Majora 04/24/2022 01:59

Thanks!
## ‚úÖüîíOld Respawn Points wrong warp? (#1362)
@ Moosh opened this issue on 04/18/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965612813785653268



=== @ Moosh 04/18/2022 14:00

So two things, for starters, I believe this rule is incorrectly categorized. It's listed as a bug fix when it should be a combo rule. This has way more gameplay repercussions than a simple bugfix should. Secondly, on attempting to check how it handles cycling pits, it dumped me at dmap 0, screen 0. Could be a quirk of test play mode, but I made certain to take multiple warps and step over several valid respawn points first.

=== @EmilyV99 (discord: Emily) 04/18/2022 17:57

that is extremely odd
test quest to replicate @ Moosh ?

=== @ Moosh 04/18/2022 18:07

I sure do not. God this thing is being a pain to figure out :/

=== @ Moosh 04/18/2022 18:09

Oh ffs, I see what happened

=== @ Moosh 04/18/2022 18:11

There's a script in my quest that predates the rule that does pretty much the same thing, recording a safe spawn point and warping Link there. And having the new behavior enabled broke it apparently

=== @EmilyV99 (discord: Emily) 04/18/2022 18:11

ah, so script error
any idea what specifically broke?

=== @ Moosh 04/18/2022 18:11

Still think you should move it to a different rule category though. This is _not_ a bugfix in my books

=== @EmilyV99 (discord: Emily) 04/18/2022 18:12

ahk

=== @EmilyV99 (discord: Emily) 04/18/2022 18:13

recatigorization, thankfully, takes exactly one copy+paste, within one file

=== @ Moosh 04/18/2022 18:17

Okay script bug seems to be a test play thing. I was not expecting me to spawn in on the screen I did and so the respawn point wasn't getting set. This script is kinda jank and in need of a rewrite tbh
Apologies for the false alarm on this one

=== @EmilyV99 (discord: Emily) 04/18/2022 18:31


https://cdn.discordapp.com/attachments/965612813785653268/965680878086918184/zquest.exe
rule moved
(meta) thread name was changed: ‚úÖüîíOld Respawn Points wrong warp?
## F4 frame advance during onDeath script? (#1363)
@ Moosh opened this issue on 04/19/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/965822897937604628



=== @ Moosh 04/19/2022 03:55

Little quirk of onDeath scripts that I assume is because they run over the regular game over sequence: you can't use F4 to frame advance through them. While it's not super critical, F4 is a very helpful debugging tool when making complex animations and can catch issues that only show up for a split second. It would be nice if there were either a quest rule or even just a change to frame advance being limited during game over and credits overall. I don't think anyone's gaining an unfair advantage by TASing the death animation.

=== @EmilyV99 (discord: Emily) 04/19/2022 04:11

Sooo disabling F6 and disabling F4 are tied to the same thing
one moment

=== @EmilyV99 (discord: Emily) 04/19/2022 04:25


https://cdn.discordapp.com/attachments/965822897937604628/965830592048529428/zquest.exe
https://cdn.discordapp.com/attachments/965822897937604628/965830592572846101/zscript.exe
https://cdn.discordapp.com/attachments/965822897937604628/965830594514788412/zelda.exe

=== @ Moosh 04/19/2022 04:41

Seems to be pausing properly though the script ran after the vanilla game over. Is this normal?
Rule related somehow I assume

=== @EmilyV99 (discord: Emily) 04/19/2022 04:41

rule chooses when the script runs
zscript settings somewhere

=== @ Moosh 04/19/2022 04:42

That's really nice actually

=== @ Moosh 04/19/2022 04:46

Okay question now, how do I end the ondeath script?
Assumed set Link's HP and quit out to resume normal gameplay, but that just causes him to die again

=== @EmilyV99 (discord: Emily) 04/19/2022 04:47

You cannot revive him
onDeath runs after he is already dead and gone
the only way to avoid 'engine death' running is to `Game->Continue()` or `Game->SaveAndQuit()`, etc

=== @ Moosh 04/19/2022 04:49

Ah, so if I want to do a quick wipe transition this isn't the way to go about that.

=== @ Moosh 04/19/2022 04:50

Is there a hack I could use to still get the handy screen freeze effect but run the script sooner? Like calling a subscreen script?

=== @ Moosh 04/19/2022 04:52

Or I suppose I could do a big wacky suspend setup the old fashioned way. I'm just spoiled by the convenience of how the subscreen script freezes everything

=== @EmilyV99 (discord: Emily) 04/19/2022 04:57

You could use a subscreen script, by setting the current dmap's active subscreen script and then pressing start... but that's a little janky

=== @ Moosh 04/19/2022 04:58

Yeah if it weren't for the then pressing start thing that'd be ideal.

=== @EmilyV99 (discord: Emily) 04/19/2022 04:58

feature request "generic scripts", I'm gonna need to make a new script type

=== @ Moosh 04/19/2022 04:59

Why's it need a new type?

=== @EmilyV99 (discord: Emily) 04/19/2022 04:59

a slot that does nothing unless you launch it from another script
and you can either set them to run passively, or to run freezing everything
but they won't have a `this->` as they won't have an object
things that freeze things now are all built into specific types that work specific ways

=== @ Moosh 04/19/2022 05:00

Gotcha sounds exciting. So it could work kinda sorta asynchronously?

=== @EmilyV99 (discord: Emily) 04/19/2022 05:00

yeah, kinda
think passive item scripts
but without needing to be tied to an item
and, with the *option* to make it freeze everything until script is done

=== @EmilyV99 (discord: Emily) 04/19/2022 05:03

Also, how do you like the idea of `break 2;`
## Subscreen scripts don't reset enemy SFX on closing (#1364)
@ Moosh opened this issue on 04/20/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/966290018643619840



=== @ Moosh 04/20/2022 10:51

Pretty straightforward. If there's an enemy with SFX on the screen, it stays silent after the subscreen is closed. If a new instance is spawned afterwards, it starts up again. Similar thing happened with potions in 7th so hopefully the same fix can be applied here

=== @ Moosh 04/20/2022 10:52

Convenient time for me to catch this as generic scripts may have the same issue

=== @ Alucard648 04/21/2022 01:09

Does this issue happen with screen`s ambient SFX (that ocean ambience in official quests)?

=== @ Moosh 04/21/2022 04:14

(replying to @ Alucard648 "Does this issue happen with s‚Ä¶"): Yes it does.

=== @ Moosh 04/21/2022 04:29

Generic scripts don't seem to kill the sounds at all. Tried doing it myself, but n->StopBGSFX() doesn't stop it. Neither does n->Remove()

=== @ Alucard648 04/21/2022 15:17

Does writing 0 into Screen->OceanSFX terminate ambient sound immediately, if preceeded by Game->EndSound(Screen->OceanSFX)?
## Quest rule to keep the warning with onF6 script? (#1365)
@ Moosh opened this issue on 04/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/966299482947985408



=== @ Moosh 04/20/2022 11:29

Currently the script runs immediately rather than running the warning dialog. I guess the user could write their own warning dialog, but...That's dumb. I just wanted to standardize the visuals on my F6 menu to fit with my game over menu, for consistency. Seems right now this comes at the cost of user experience as feather fingering the F6 key will result in lost level progress

=== @EmilyV99 (discord: Emily) 04/24/2022 08:56

realistically, the best way to handle this is to add a `cancel` option to the menu
that exits the script without calling a continue option
Unlike the `onDeath` slot, wherein you cannot 'undo' the death
you *can* just exit the onF6 script to resume exactly where you were before pressing F6
## Sparkle weapons repeat animation early if created after waitdraw. (#1366)
@arceusplayer11 (discord: Deedee) opened this issue on 04/21/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/966529600568053790



=== @arceusplayer11 (discord: Deedee) 04/21/2022 02:43

Weird one. Presumably DeadState isn't set correctly after waitdraw.
## Can ONLY Walk on Liquid enemy flag doesn't work on layers (#1367)
@ Moosh opened this issue on 04/21/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/966646681603027004



=== @ Moosh 04/21/2022 10:28

Don't even ask me the about this screen layout, I dun wanna talk about it üò≠ 

Anyways, wrote up some basic enemies that I wanted to be constrained to water and the water on my screen is layered. I realized ghost.zh doesn't respect layered water, turned to npcscript, npcscript doesn't respect it either ü§£

=== @EmilyV99 (discord: Emily) 04/21/2022 18:24

pffft fun
@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 04/21/2022 18:26

wooooo
probably easy to fix
I made the thing that checks water for all layers a function
## HitBy[] should have constants (#1368)
@ Moosh opened this issue on 04/22/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/967013838287417377



=== @ Moosh 04/22/2022 10:47

I know you guys have expressed intent to rewrite Zoria's jank entirely but for now it's here and it's mostly working, but the constants he gave in the docs aren't actually in std. Seems like it should be trivial to add those.

It feels dirty every time I enter in a magic number while using these

=== @arceusplayer11 (discord: Deedee) 04/22/2022 14:01

I don't think the HitBy system is actually terrible an idea; so the implementation will likely remain the same
but yeah, Zoria was terrible with constants
we need to add that
(also I need to add a version for weapons so weapons can detect when they've hit something without looping through every enemy)

=== @ Moosh 04/22/2022 14:04

Would be neat. Although it's not hard to do that as is. I have a system for my quest
Checks HitBy on enemies in the existing global enemy loop and stuffs the enemy's pointer in one of the weapon's Misc indices
I guess that's technically still looping through enemies, but it was something I'd already be doing to begin with
## ‚úÖüîíLink Immortal (#1369)
@ Moosh opened this issue on 04/22/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/967036821999611905



=== @ Moosh 04/22/2022 12:19

Have I never requested this one before? Currently Link's HP hitting 0 is guaranteed fatal, meaning there's no way to draw his health meter at 0 HP without rescripting it. Also I don't think immortal is listed in the docs? Weird.

=== @ Tsunami Tommy Reload the Shotty 04/22/2022 13:42

Huh.  I remember Zoria implementing what may have been a single frame when the Hero health reached zero to run a script, but I guess that never happened?  I remember that I was the one that suggested it even for this reason, or to give the game a chance to bring him above 0 health somehow if it went below 1.
Even Alucard648's suggestion adjacent to this one ("Hero - Instant Kill") suggests that there is such a frame.

=== @ Moosh 04/22/2022 13:46

I thought that was weapons but it could just be a rule I'm unaware of
Seems like a rather messy way to fix things

=== @arceusplayer11 (discord: Deedee) 04/22/2022 14:00

I know NPCs Immortal exists, but it's not in the docs, because why would it be? üòÑ

=== @ Moosh 04/22/2022 14:04

Yeah I made sure to check first, both trying to compile and in the docs. As far as I know, Link doesn't have it

=== @ Tsunami Tommy Reload the Shotty 04/22/2022 15:22

(replying to @arceusplayer11 (discord: Deedee) "I know NPCs Immortal exists,‚Ä¶"): Oh?  What does it exist as?  Some checkbox somewhere?  A script line?

=== @arceusplayer11 (discord: Deedee) 04/22/2022 15:31

script

=== @ P-Tux7 04/22/2022 16:11

(replying to @arceusplayer11 (discord: Deedee) "I know NPCs Immortal exists,‚Ä¶"): "Check ZScript_Additions.txt"
"This isn't in ZScript_Additions.txt"

=== @arceusplayer11 (discord: Deedee) 04/22/2022 16:12

lmfao
In fairness, this one slipped through the cracks

=== @EmilyV99 (discord: Emily) 04/24/2022 09:00

.

=== @EmilyV99 (discord: Emily) 04/24/2022 09:34

`Hero->Immortal`
```int Immortal;
 * If non-zero, the player will not die, even if their HP drops to 0.
 * This will prevent effects such as bottled fairies from being triggered.
 * If greater than 0, decrements by 1 each frame.
 * If it becomes 0 while the player has 0 hp, it will act as though their HP just dropped
 *     to 0 that frame, and normal effects such as fairies will trigger.```
`npc->Immortal`
```
bool Immortal;
 * If true, the enemy will not 'die' even if it has 0hp or is too far off-screen.
 * '->Remove()' will still delete the npc.```

=== @EmilyV99 (discord: Emily) 04/24/2022 09:36

(meta) thread name was changed: ‚úÖüîíLink Immortal
## ‚úÖüîíHero - Instant Kill (#1370)
@ Alucard648 opened this issue on 04/22/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/967048321875210240



=== @ Alucard648 04/22/2022 13:04

Hero->InstantKill() script command that instantly kills hero without that "last chance frame" period, leaving no chance for things, like bottled fairies.

=== @EmilyV99 (discord: Emily) 04/24/2022 09:00

.

=== @EmilyV99 (discord: Emily) 04/24/2022 09:35

`Hero->Kill();`
```
void Kill(bool bypass_revive);
 * Kills the player. Their HP will be set to 0, and 'Immortal' will be bypassed.
 * If 'bypass_revive' is true, bottles will not be checked for revival items,
 *     and the normal single frame delay before death that is used for script-revival
 *     will also be skipped.
 * Otherwise, revival processes will occur as normal.```
(meta) thread name was changed: ‚úÖüîíHero - Instant Kill
## -Sprite emits light option- for Weapon projectile sprites (#1371)
@ FireSeraphim opened this issue on 04/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/967390387289358336



=== @ FireSeraphim 04/23/2022 11:44

I'm loving the new darkness system so far but I'm running into a jarring inconsistancy/oversight where fireball and the like don't emit their own light sources and in the immortal words of Dell Cognagher "That ain't right"

=== @ FireSeraphim 04/23/2022 11:46

This room is a fine example because there's two fireball shooters but their fireballs don't emit any light. What I would like to recommend is the addition of a "Emits Light" checkbox and a light radius box in the sprite data editor
![image](https://cdn.discordapp.com/attachments/967390387289358336/967391079773126726/zc_screen00001.png)

=== @EmilyV99 (discord: Emily) 04/23/2022 12:46

eh, adding that to the sprite data feels a bit weird
though it does make sense to have a way to set it
you CAN set it via scripts

=== @ Moosh 04/23/2022 13:03

Agreed that there should be a way to do this without scripts, _however_ if all you need is the weapons to emit light, the script to do so is so simple even you could write it:
```eweapon script EmitLight{
    void run(int radius){
        this->LightRadius = radius;
    }
}```
Since fireball shooters are just an enemy, you can give that enemy a weapon script
## ‚ùåüîíTextboxes being obscured by the new room darkness system (#1372)
@ FireSeraphim opened this issue on 04/23/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/967463770098122813



=== @ FireSeraphim 04/23/2022 16:35

I think the following snapshot speaks for itself.
![image](https://cdn.discordapp.com/attachments/967463770098122813/967463774695092235/zc_screen00002.png)

=== @ vlamart 04/23/2022 16:46

There is a QR for this, something about drawing new darkness on layer 7 I think

=== @EmilyV99 (discord: Emily) 04/23/2022 16:53

^

=== @EmilyV99 (discord: Emily) 04/24/2022 09:37


![image](https://cdn.discordapp.com/attachments/967463770098122813/967720853926182912/unknown.png)
Do you have `New Darkness Draws Under Layer 7` checked?
that's in `Options->Misc->2`
@ FireSeraphim

=== @ FireSeraphim 04/24/2022 18:56

I checkboxed that and it fixed it.

=== @EmilyV99 (discord: Emily) 04/24/2022 22:26

checked, or unchecked?

=== @ FireSeraphim 04/25/2022 04:25

checked

=== @EmilyV99 (discord: Emily) 04/25/2022 04:41

my brain is yelling at me that that was backwards for some reason
but no, that's exactly correct
(meta) thread name was changed: ‚ùåüîíTextboxes being obscured by the new room darkness system
## ‚úÖüîíComboData this--CSet returning wrong value? (#1373)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 04/24/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/967583360153190400



=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 00:30

This is my script:
```// NOTE: You'll need to set ZScript->Quest Script Settings->Script->Combos Run Scripts on Layer ... (whatever layer you want these combos to run on)

@Author("TheBlueTophat")
combodata script dynamic_overhead
{
    void run()
    {
        while(true)
        {
            if(Player->Y <= this->Y && Player->Y > (this->Y - this->InitD[0]))
            {
                Screen->FastCombo(3, this->X, this->Y, this->ID, this->CSet, OP_OPAQUE);
            }
            
            Waitframe();
        }
    }
}```
Seems that this->CSet is returning 0 rather than 2. Note: I found this in A104.
![image](https://cdn.discordapp.com/attachments/967583360153190400/967583365920325713/unknown.png)
![image](https://cdn.discordapp.com/attachments/967583360153190400/967583367610654730/unknown.png)

=== @EmilyV99 (discord: Emily) 04/24/2022 01:09

oh for fucks sake
zoria doesn't know how to implement anything

=== @EmilyV99 (discord: Emily) 04/24/2022 01:13

err
so @TheBlueTophat (discord: Coolgamer012345)
that's cset2
the cset the combo is placed in isn't part of combodata, it's part of the *screen*
given, it's also returning the cset2 with the wrong bitwise shit, so it's still broken, but it isn't even what you want to begin with

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:16

Oh strange
Assuming the bitwise shift was proper, what is it actually supposed to return then?

=== @EmilyV99 (discord: Emily) 04/24/2022 01:18

err, well, for a combo with nothing set it should return 0
the problem is that the 4 bits for the 4 selected corners are also part of what's returned

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:20

Wait, so `this->CSet` returns the `CSet2` box information???
<:orangebruh:783600717247283232>

=== @EmilyV99 (discord: Emily) 04/24/2022 01:20

the cset2 field and the cset2 box

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:20

That seems so counter intuitive, especially since the position part worked fine and is analogous to what I would expect to be returned

=== @EmilyV99 (discord: Emily) 04/24/2022 01:21


![image](https://cdn.discordapp.com/attachments/967583360153190400/967596000753631282/unknown.png)
The `CSet` was added before combodata scripts were even thought of
and again, Zoria has no sense for common sense
keep in mind though that `Pos` ONLY works for `this->` in combodata scripts
and does not work for any combodata that is not `this->`
or in any other script type

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:23

(replying to @EmilyV99 (discord: Emily) "keep in mind though that `Pos‚Ä¶"): can you elaborate what you mean
so if I did something like, `combodata combo = Game->LoadComboData(blah blah blah);` I wouldn't be able to get the `combo->Pos` of that?
only from within the combodata script itself when using the `this->` pointer
?

=== @EmilyV99 (discord: Emily) 04/24/2022 01:24

correct
because if I load combo 52
....that combo could be placed in 50 different positions on the same screen
so how the hell would it know what to return?
Combodata *SCRIPTS* run with a specific position, so they can return that value

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:26

Okay, noted

=== @EmilyV99 (discord: Emily) 04/24/2022 01:26

same for `Layer`
and `X`/`Y`
```
int Layer();
int Layer;
 * Returns the layer the combo is on in a combodata script, from the 'this->' pointer as 'this->Layer()'
 * Using this from any other combodata variable is illegal and undefined.

int Pos();
int Pos;
 * Returns the combo screen index of a combo from a combodata script, from the 'this->'
 * pointer as 'this->Pos()'.
 * Using this from any other combodata variable is illegal and undefined.
 * Read-only

int PosX();
int X;
 * Returns the X-coordinate of a combo from a combodata script, from the 'this->'
 * pointer as 'this->PosX()'.
 * Using this from any other combodata variable is illegal and undefined.
 * Read-only

int PosY();
int Y;
 * Returns the Y-coordinate of a combo from a combodata script, from the 'this->'
 * pointer as 'this->PosY()'.
 * Using this from any other combodata variable is illegal and undefined.
 * Read-only```
it does specify this in all of their docs
and if it seems odd, blame Zoria.

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:29

what do you think would be the cleanest way to go about doing what I'm trying to do then from within the combodata script?

=== @EmilyV99 (discord: Emily) 04/24/2022 01:29

```cpp
mapdata tmpdata = Game->LoadTempScreen(this->Layer);
int cs = tmpdata->ComboC[this->Pos];```

=== @EmilyV99 (discord: Emily) 04/24/2022 01:31

the placed flag would be `tmpdata->ComboF[this->Pos]`

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:32

Awesome, thanks.

=== @EmilyV99 (discord: Emily) 04/24/2022 01:32

fun thing is, `LoadTempScreen(0)` gives you a mapdata pointer that works just like `Screen->`
so, for any layer 0-6 that gives you a direct temp pointer

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:38

That's nice. That would be useful for looping through each layer to do stuff.

=== @EmilyV99 (discord: Emily) 05/07/2022 14:17

(meta) thread name was changed: ‚úÖüîíComboData this--CSet returning wrong value?
## Favorite Command - Set Brush Width (#1374)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 04/24/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/967588992730144858



=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 00:53

I feel like favorite commands for setting the brush width like in the right click menu would be handy for going back and forth between regular brush width and a more convenient brush width for larger sprites (e.g. toggling between 1x1 and 2x2 for regular combos and, say, trees).

=== @EmilyV99 (discord: Emily) 04/24/2022 01:09

err, you'd need like 20 favorite commands to cover each width/height
sorry, 27

=== @TheBlueTophat (discord: Coolgamer012345) 04/24/2022 01:50

oh er, actually yeah that would be a lot wouldn't it
I was thinking of the draw block dialog which is only like 8 options

=== @EmilyV99 (discord: Emily) 04/24/2022 02:03

Something like a brush panel would make sense in the rewrite
which, is gonna be entirely new main gui system
## Retro USB NESSNES Adaptor not.recognized (#1375)
@ Deleted User opened this issue on 04/24/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/967868611278544976



=== @ Deleted User 04/24/2022 19:24

No detection of input from these devices. Have to use joy2key.

=== @ Zeo 05/04/2022 09:41

Confirm on second device
## Combo Data Oversight involving Water vs Shallow Water Combos I noticed (#1376)
@ Haylee opened this issue on 04/25/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/967969941666021446



=== @ Haylee 04/25/2022 02:06

So I noticed that because water combos and shallow water combos use the first attribyte slot, there's an issue where when walking over water combos, it will play the shallow water sound relative to the flipper level, since there are instances where water acts like shallow water. Earlier the water combo I had before required flipper level 2 and as a result, it was playing the second sfx instead of no sfx.
![image](https://cdn.discordapp.com/attachments/967969941666021446/967969947953279086/unknown.png)
![image](https://cdn.discordapp.com/attachments/967969941666021446/967969948146225162/unknown.png)
(meta) thread name was changed: Combo Data Oversight involving Water vs Shallow Water Combos I noticed

=== @EmilyV99 (discord: Emily) 04/25/2022 02:18

@arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 04/25/2022 03:19

goddamnit
## ZQ - Keyboard Key to Advance|Devance Currently Selected Combo (#1377)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 04/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968016604585680906



=== @TheBlueTophat (discord: Coolgamer012345) 04/25/2022 05:12

It would be nice if there was a keyboard key which could advance your currently selected combo +/- 1 combo in the combo page, since sometimes related combos are laid out in series and it would be a lot easier to just press a key to advance to them than go back and forth between the combos with the mouse. I suggest the `[` and `]` keys for this, since I think those aren't already occupied by a shortcut, but I'm not very picky about which keys could be used for this.

=== @TheBlueTophat (discord: Coolgamer012345) 04/25/2022 05:14

(meta) thread name was changed: ZQ - Keyboard Key to Advance|Devance Currently Selected Combo
## Modify Invulnerability Flicker Rate (#1378)
@ Orithan opened this issue on 04/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968028973244227584



=== @ Orithan 04/25/2022 06:01

Can we set the flicker rate of sprites when invulnerable with the quest rules that cause invincible sprites to flicker? This is to make it so quest makers who use the rule don't have to deal with framerate issues causing problems with visibility?

=== @ Moosh 04/25/2022 06:03

Oh hell yeah, seconding this idea

=== @EmilyV99 (discord: Emily) 04/25/2022 06:18

@arceusplayer11 (discord: Deedee)

=== @ Orithan 04/25/2022 06:36

This could also influence CSet flash rate while invunerable too

=== @TheBlueTophat (discord: Coolgamer012345) 04/25/2022 10:47

might be worth making it a player option too?
for the same reason, in case someone recording zc needs to tweak the flicker rate so it shows up nicely

=== @ Russ 04/25/2022 14:09

It being a player option could be handy. Unfortunately, that wouldn't fix the many issues of scripts making stuff flicker at 30 FPS but it'd go a long way to making the problem better.
## SetEquipment() Not setting B button item correctly (#1379)
@ Bagel Meister opened this issue on 04/25/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/968197673607888967



=== @ Bagel Meister 04/25/2022 17:11

If I set A button to sword and B button to the hookshot for example, then this is what happens when I press B.
![image](https://cdn.discordapp.com/attachments/968197673607888967/968197680985669682/bug.mp4)

=== @ Bagel Meister 04/25/2022 17:18

Also, if i swap it so that the sword is on B and the hookshot is on A, then pressing A uses the hookshot as normal and pressing B does nothing at all

=== @EmilyV99 (discord: Emily) 04/25/2022 21:10

uhh
try `Hero->ItemA`/`Hero->ItemB` instead of janky old `SetEquipment`

=== @ Bagel Meister 04/25/2022 21:22

Well, that just fixed it immediately! Thank you
## ‚úÖüîíSettable SFX for opening a chest (#1380)
@ Jennette ‚ù£ opened this issue on 04/25/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968236234281480304



=== @ Jennette ‚ù£ 04/25/2022 19:45

itd be cool if you could set a sound effect for when you open a chest methinks

=== @EmilyV99 (discord: Emily) 04/28/2022 05:09


![image](https://cdn.discordapp.com/attachments/968236234281480304/969103079234474044/unknown.png)
should be done
(meta) thread name was changed: ‚úÖüîíSettable SFX for opening a chest
## ‚úÖüîíUseable pickup items (#1381)
@ Mitsukara opened this issue on 04/26/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968315085510545438



=== @ Mitsukara 04/26/2022 00:58

Silly feature request, but, it'd be neat if, in zquest, if you set an item that's usually only a pickup item to be an equipment item, then when the player uses it as a button item, it activates the effect it would normally have when you pick it up.

For example, if you go in the item editor and make a Clock an Equipment Item, and put it on the subscreen, then when the player uses that Clock item, it acts exactly as if they'd picked up the Clock.

The two Items this could make the most sense for are:
- Clock
- Kill All Enemies

But it might be neat for other pickup items such as hearts, magic, or maybe some kind of generic "increase counter when used" type effect.

I realize this is all dead easy to do with zscript, but it might be a neat ease-of-access thing for non-scripters to be able to do this, like having a clock item that costs magic (or is removed after use like a potion, since the item editor already has that option too), etc.
Also, I realize this is a bit of a different idea maybe, but, requiring/spending from an arbitrary counter instead of just from magic/rupees would be nice, if that's not already a feature.

=== @EmilyV99 (discord: Emily) 04/26/2022 00:59

that already is

=== @EmilyV99 (discord: Emily) 04/26/2022 01:05

(replying to @ Mitsukara "Silly feature request, but, i‚Ä¶"): that... shouldn't be that bad. It'll need an extra flag checked, though

=== @ vlamart 04/26/2022 02:52

This could also make shields active too!

=== @EmilyV99 (discord: Emily) 04/27/2022 03:18


![image](https://cdn.discordapp.com/attachments/968315085510545438/968712719962365952/unknown.png)

![image](https://cdn.discordapp.com/attachments/968315085510545438/968712779450163310/unknown.png)
Also both have an SFX now, which plays when the effect activates

=== @EmilyV99 (discord: Emily) 04/27/2022 03:23

If `Active Use` is checked, they do... well, that. And they DON'T activate on pickup in that case.

=== @EmilyV99 (discord: Emily) 04/27/2022 03:42


![image](https://cdn.discordapp.com/attachments/968315085510545438/968718725819801670/2022-04-26_23-39-48.mp4)
@ Mitsukara
@ vlamart #1384

=== @EmilyV99 (discord: Emily) 04/27/2022 03:53

Also added:
-Kill all enemies will not allow you to use it if there's nothing for it to kill (thus NOT charging you, and playing the 'error' sfx if one is set)
-Checkbox for clock to prevent activating it while another clock is active already

=== @EmilyV99 (discord: Emily) 04/27/2022 04:19


![image](https://cdn.discordapp.com/attachments/968315085510545438/968728184663183360/unknown.png)
The refiller class can refill up to 5 different counters, and optionally cure sword jinxes, when used
If it cannot do anything (i.e. every counter it fills is full and no sword jinx to cure) it will NOT charge its' cost, and will play the 'error' sound to indicate being unable to use it

=== @EmilyV99 (discord: Emily) 04/27/2022 04:22

(meta) thread name was changed: ‚úÖüîíUseable pickup items

=== @ Mitsukara 04/29/2022 22:43

(replying to @EmilyV99 (discord: Emily) ""): Nice! Thank you (Sorry for the late response)

=== @ Mitsukara 04/29/2022 22:45

(replying to @ vlamart "This could also make shields‚Ä¶"): sidenote about my own opinions on the active shield thing: it'd be neat, but it also raise the implication of like, the other behaviors Zelda shields typically have such as prevent contact damage from enemies /pushing certain enemies away (or being able to slowly push urchins like pushblocks, etc) which is probably beyond the scope of new items I think Emily would want to add to pre-rewrite ZC?
although a compromise in between somewhere could still be a neat thing.

=== @EmilyV99 (discord: Emily) 04/29/2022 22:45

I added active shields
But it just toggles the shield

=== @ Mitsukara 04/29/2022 22:46

oh, neat
it's something at least

=== @EmilyV99 (discord: Emily) 04/29/2022 22:46

It does also toggle the LTM
Which is all it does for visual
It also has a sound for when you press the button to pull it out

=== @ Mitsukara 04/29/2022 22:47

hmm... if it only has one LTM, I guess that means the shield just kinda disappears when not in use, rather than being carried around on Link's side like the gameboy games

=== @EmilyV99 (discord: Emily) 04/29/2022 22:47

Yeah

=== @ Mitsukara 04/29/2022 22:47

I always liked the idea of like, scripting a shield that would actually work on Link's side, like when you're charging the sword in LTTP, but that gets a bit complex
or more generally of being able to put the shield on any of Link's sides
like wearing a shield on his back for instance, and it blocks projectiles from the back

=== @EmilyV99 (discord: Emily) 04/29/2022 22:48

So, a second ltm, and an altered step speed while holding it, are both good ideas on the table
Shield sidedness sounds like a nightmare

=== @ Mitsukara 04/29/2022 22:48

Yeah, probably a bit much to ask

=== @EmilyV99 (discord: Emily) 04/29/2022 22:49

Pushing 'urchins'.... would require enemy solidity.
Which, IS still on the todo

=== @ Mitsukara 04/29/2022 22:49

I'm surprised Darknuts even have it, though it's cool they do

=== @EmilyV99 (discord: Emily) 04/29/2022 22:49

The problem is,  making the shield affect multiple sides is easy
Making it affect front in use, side otherwise is a bit odd

=== @ Mitsukara 04/29/2022 22:50

(replying to @EmilyV99 (discord: Emily) "The problem is,  making the s‚Ä¶"): huh. Silly suggestion, but, would it be hard to add an option for a multi-sided shield as a form of shield upgrade, then?
I'm not sure how much sense that would make though
(replying to @EmilyV99 (discord: Emily) "Making it affect front in use‚Ä¶"): not sure I parse this, either, sorry

=== @EmilyV99 (discord: Emily) 04/29/2022 22:51

I mean, if you sprited it as Link glowing with an energy shield or something...
(replying to @ Mitsukara "I always liked the idea of li‚Ä¶"): ^

=== @ Mitsukara 04/29/2022 22:52

oh you mean like, front when used, side when not used. That's not really how it works outside of LTTP though (and then it's only "not in use" when charging the sword)
I was thinking more like.... let's say Link has an item that's a "back shield", it works just like a regular shield, but only on the back. Like as a seperate shield item altogether

=== @EmilyV99 (discord: Emily) 04/29/2022 22:53

Yeah, exactly why it'd be "a bit odd" to try to get anything working
And ehh
Separate item for the back... would need to be an entire dupe itemclass

=== @ Mitsukara 04/29/2022 22:54

basically I'm thinking of the thing where Darknuts have the "Shielded in front" "shielded on left" etc options

=== @EmilyV99 (discord: Emily) 04/29/2022 22:55

As flags on an existing shield, it might work
But a separate item specifically for the back is not sane

=== @ Mitsukara 04/29/2022 22:55

So for instance you could make like, a regular shield itemclass item (if that'd be easier), but check a box for saying which sides it covers (multiple sides would be neat though)
so it's like, you upgrade from a level 1 shield item that's just a front shield, to a level 2 shield item that's a front and back shield

=== @EmilyV99 (discord: Emily) 04/29/2022 22:56

That could be doable

=== @ Mitsukara 04/29/2022 22:56

and that would also allow someone to use zscript to toggle it to different sides if they wanted to, without having to like, recreate the entire shield behavior in zscript
so if they wanted the thing where the shield is only covering one side, but it can be moved from  just Link's front to just Link's right side during charging or something, they could script that by toggling between which shield item Link has. (...except I think maybe charging disables shield blocking altogether, which is a seperate problem)

=== @ Mitsukara 04/29/2022 22:59

plus it could just be a fun silly thing to have like, a quest where shields are only on Link's back. So you gotta learn to look away from projectiles
or maybe let's say a quest has multiple characters, they could each wear the shield differently (by using a different shield item)

=== @ Mitsukara 04/29/2022 23:02

sorry this mutated into an entirely different, more complex feature request. I could make a new thread if you'd like? I wasn't even sure how viable this idea was so I didn't think to ask for it more directly

=== @EmilyV99 (discord: Emily) 04/29/2022 23:03

It's fine

=== @ Mitsukara 04/29/2022 23:03

Although I can say if I do get the quest made in 2.55 that I eventually want to (Memory of Koholint), I would definitely use it

=== @ vlamart 04/29/2022 23:08

(replying to @EmilyV99 (discord: Emily) "I mean, if you sprited it as‚Ä¶"): Actually I was thinking of doing that like in Wind Waker üòù

=== @ Mitsukara 04/29/2022 23:09

I had these silly Darknut enemies that just... plopped shields onto extra sides. So Link could do that too, just inexplicably wearing extra shields affixed to his sides XD

=== @ Mitsukara 04/29/2022 23:11


![image](https://cdn.discordapp.com/attachments/968315085510545438/969737799429419108/unknown.png)

![image](https://cdn.discordapp.com/attachments/968315085510545438/969737866634723358/unknown.png)

=== @ vlamart 04/29/2022 23:12

Scripting enemies intimidates me. At first Ghost 3.0 looked promising, but I haven't anything about ghost at all lately

=== @EmilyV99 (discord: Emily) 04/29/2022 23:12

Yeah work on that died

=== @ Mitsukara 04/29/2022 23:12

(the different darknut shield sides thing is an old enemy editor feature that was already in 2.50, no scripts needed)

=== @EmilyV99 (discord: Emily) 04/29/2022 23:12

Npc scripts are a thing though
And can do a lot, without needing any header

=== @ Mitsukara 04/29/2022 23:13

I never actually learned ghost, although most of my extensive work was in 2.50.2 which didn't have the NPC script slots yet. I had my own janky system where I had the global script (and sometimes, manually placed FFCs) controlling enemies
I would've totally been using NPC script slots if they were a thing yet though
I liked to do a lot of like, simple tricks for existing enemies. Like making a regular aquamentus move up and down, or making a walking enemy jump at random times
it was often a little janky but it got some neat effects

=== @ Mitsukara 04/29/2022 23:16

when learning, it's also good to draw inspiration from really simplistic stuff, like some of the Zelda II enemies or Super Mario Land or games like that, where enemies have extremely simple behaviors- like there's these birds in ZII, Mobys, that just appear at the top of the screen at random horizontal positions, move down until they're aligned with Link, and then move switch to moving left (or right, depending on whether Link is to their left or their right)
dead simple to script those little guys, so it's a good one to learn with

=== @ Mitsukara 04/29/2022 23:17

They also don't have many animation frames XD
![image](https://cdn.discordapp.com/attachments/968315085510545438/969739229951324160/unknown.png)

=== @ vlamart 04/29/2022 23:34

I'm also gonna practice by trying to recreate some of the Z3 ghost enemies as npc scripts, especially Eyegore. I used to like to make them trees or statues in 2.8

=== @EmilyV99 (discord: Emily) 04/30/2022 01:20

@ Mitsukara
SOOOOOOOOOOOOOOOOO

![image](https://cdn.discordapp.com/attachments/968315085510545438/969770278244712508/unknown.png)
`Protects [dir]` are for all shields, and tell it what sides to protect. For active shields, those are only protected when the button is held.
`Inactive [dir]` is only for active shields, and tell it what sides to *still protect even when you aren't holding the button*

![image](https://cdn.discordapp.com/attachments/968315085510545438/969770500278599680/unknown.png)
and you can set an inactive tile modifier for active shields to use when not held

=== @ vlamart 04/30/2022 01:23

LOVE IT

=== @ Mitsukara 04/30/2022 04:16

(replying to @EmilyV99 (discord: Emily) "`Protects [dir]` are for all‚Ä¶"): That is super cool! And also was super fast, wow
that's awesome, thank you so much

=== @ Mitsukara 04/30/2022 04:17

man, between that, bottles, bug net, double jump, and _switch hook_, there's some killer new items built into 2.55 now
and the lantern too
## Test Quest hotkey (#1382)
@ aslion opened this issue on 04/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968336870083801128



=== @ aslion 04/26/2022 02:25

Would it be possible to get a universal Test Quest hotkey? Possibly F1 or something (would probably be way more useful than the shortcut to the user reference doc)

=== @EmilyV99 (discord: Emily) 04/26/2022 02:55

you can put it as a favorite command
or press `Alt+Q, T`

=== @ aslion 04/26/2022 02:58

small mode tho
just would be nice as a one button command for such a useful feature

=== @EmilyV99 (discord: Emily) 04/26/2022 03:07

if `T` were available I'd give it that, but that's tile editor
every F key is taken

=== @ Alucard648 04/26/2022 04:00

Shift+F5

=== @EmilyV99 (discord: Emily) 04/26/2022 04:06

frankly, why is `Alt+Q, T` a problem?

=== @ aslion 04/26/2022 17:11

I mean I wouldn't say it's a *problem*

=== @ aslion 04/26/2022 17:13

It's just like, comparatively complicated in relation to how often it's used

=== @ aslion 04/26/2022 17:18

Like I probably use it on average 3-4 times per screen if not way more yet it's as "hard" to get to as the Enemy Editor or something that's less frequently used

=== @ aslion 04/26/2022 17:19

And all F1 does is like, bring up a help doc for 2.50 that you'd be better off reading in a text editor anyway
and probably used like, exclusively on accident
It's not a huge deal or anything, just would be a nice QoL feature
but really not a pressing issue

=== @EmilyV99 (discord: Emily) 04/26/2022 20:57

F1 is a standardized hotkey, though
you can press it in Discord, Chrome, MS Word, etc to always get a help doc
and, frankly, as a large mode user
I have `Test Quest` on my favorite commands....
but I still press `Alt+Q, T` most of the time because it's fatser

=== @ aslion 04/27/2022 04:04

I mean who cares about if it's standardized it sucks

=== @TheBlueTophat (discord: Coolgamer012345) 04/27/2022 04:09

well what about the keyboard key j?
thats unused
?
alternatively having hotkeys for every favorite command (alt + number or something) could alleviate the issue

=== @EmilyV99 (discord: Emily) 04/27/2022 04:11

you can't even assign favorite commands in small mode though

=== @TheBlueTophat (discord: Coolgamer012345) 04/27/2022 04:40

Couldn't you still technically set them in the config file though?

=== @EmilyV99 (discord: Emily) 04/27/2022 04:43

yes, technically
## Additional Attack Ring Flags (#1383)
@ vlamart opened this issue on 04/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968344481730551848



=== @ vlamart 04/26/2022 02:55

I noticed the help text of the Attack Ring and other similar items specify they only effect swords, wands, and hammers. Would it be possible to add a flag for flames, arrows, and bombs, etc. too?

=== @EmilyV99 (discord: Emily) 04/26/2022 02:56

possibly
but it isn't that they specifically exclude other types arbitrarily
it's that each type is implemented in a completely different block of code
so, it's not a simple addition

=== @ vlamart 04/27/2022 14:50

If I wanted to script this, would I change the player damage or enemy damage multi in Init Data? Or would it still only apply to melee weapons?

=== @EmilyV99 (discord: Emily) 04/27/2022 20:33

umm
I would have changed the item power for the items you want to effect
but increasing the player damage mult might work just fine too
## ‚úÖüîíA Simple RPG Item (#1384)
@ vlamart opened this issue on 04/26/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968348368856309843



=== @ vlamart 04/26/2022 03:10

Would be neat to have an in-engine counter cost & effect item. Such that, when used, you can spend MP for HP, or vise-versa, or whatever you decide to set the counters to

=== @EmilyV99 (discord: Emily) 04/26/2022 03:11

You can kinda do this with bottles

=== @ vlamart 04/26/2022 03:11

Actually, this could also be achieved with #1381

=== @EmilyV99 (discord: Emily) 04/26/2022 03:11

or that
I would probably make a new itemclass specifically for it if it were going to be done that way
though you can do this with bottles right now
except, I still haven't added bottle starting contents to Init Data, so technically you need a script for it still... should fix that.
but basically, if you make an empty bottle for, lets say `slot 26`
and you make slot 26 start with a particular potion inside it
that refills a counter by some amount
but, when used, becomes itself, so it never depletes
and you give that bottle a cost
so that using it costs mp or whatever
viola

=== @ vlamart 04/26/2022 03:13

Cello, that's dope

=== @EmilyV99 (discord: Emily) 04/26/2022 03:14

....though a new itemclass along the idea of #1381 would be a lot simpler to set up, so probably a good idea too.

=== @ P-Tux7 04/26/2022 03:32

you can do this with notes

=== @EmilyV99 (discord: Emily) 04/26/2022 03:33

oh, eww, true you can

=== @EmilyV99 (discord: Emily) 04/27/2022 04:22

#1381 closed
(meta) thread name was changed: ‚úÖüîíA Simple RPG Item
## Spin Attack+Hurricane Spin Damage Flag (#1385)
@ Lost Attempt opened this issue on 04/27/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/968782414702858250



=== @ Lost Attempt 04/27/2022 07:55

A flag that makes it so that it adds the power value to the damage instead of a multipler/another attribute where you can add damage to the spin attack along with the damage multiplier similar to how the attack ring works.
## ‚úÖüîíbool InvFlicker for npcs (#1386)
@ Moosh opened this issue on 04/28/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/969086259794440242



=== @ Moosh 04/28/2022 04:02

Was looking for a way to prevent enemies from flashing CSets in NPC script. Unless I'm overlooking something there isn't one without turning off the enemy's iframes. Apparently Link has a bool InvFlicker that turns off just the animation. Maybe enemies could have the same?

=== @EmilyV99 (discord: Emily) 04/28/2022 04:49

@ Moosh
https://cdn.discordapp.com/attachments/969086259794440242/969098061844447232/zscript.exe
https://cdn.discordapp.com/attachments/969086259794440242/969098062385524766/zelda.exe
https://cdn.discordapp.com/attachments/969086259794440242/969098062914023464/zquest.exe

=== @ Moosh 04/28/2022 04:54

Works like a charm!

=== @EmilyV99 (discord: Emily) 04/28/2022 04:55

wonderful
(meta) thread name was changed: ‚úÖüîíbool InvFlicker for npcs
## Custom Roomtype -Leave Money and or Item- (#1387)
@ FireSeraphim opened this issue on 04/28/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/969117307534196756



=== @ FireSeraphim 04/28/2022 06:06

I would like to request a roomtype that basically a more modifiable version of the "Leave Money or Life" roomtype (infact it might need to be split into two roomtypes for a variant that only cost money) that allows for the shop type item list to be used to determine what Link will have to give up to unblock the way forward.

=== @EmilyV99 (discord: Emily) 04/28/2022 06:07

you....could do this with lockblocks
place 3 (or however many) lockblocks
that eat a specific item to open
or eat an amount of a counter to open
resprite them as the item you want them to look like

=== @ FireSeraphim 04/28/2022 06:07

That is kinda jank when I fully want the npc, string and all

=== @EmilyV99 (discord: Emily) 04/28/2022 06:07

eh, fair
(you have no idea how hard new roomtypes and shit are, they are JANK as FUCK)
(anything that has to do with screen 80 or roomdata is just, like, AWFUL and SUPER JANK)

=== @ FireSeraphim 04/28/2022 06:09

Nothing that worth doing is ever easy. That's something I've learnt over the years I've been alive.

=== @EmilyV99 (discord: Emily) 04/28/2022 06:10

if @arceusplayer11 (discord: Deedee) feels like adding new roomtypes, she can feel free
## npc ScriptFlip is broken in new sprite drawing. (#1388)
@ Moosh opened this issue on 04/28/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/969172408672092161



=== @ Moosh 04/28/2022 09:45

Doing this every frame on an NPC script ```this->ScriptFlip = (this->X<Link->X)?1:-1;```
Works with the old behavior, doesn't with the new. Enemy goes invisible

=== @arceusplayer11 (discord: Deedee) 04/28/2022 09:45

@EmilyV99 (discord: EmilyV)

=== @EmilyV99 (discord: Emily) 04/28/2022 10:04

....uhhhhhhhhhhhhh
wtf
I have no fucking clue @arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 04/28/2022 10:10

<:sigh:238773150651777024>

=== @EmilyV99 (discord: Emily) 04/28/2022 10:13

I just
tried to peek at it
and was reminded of this
![image](https://cdn.discordapp.com/attachments/969172408672092161/969179494520868874/unknown.png)
## DrawTile() breaks if both Scale and Rotation args are used. (#1389)
@ Orithan opened this issue on 04/28/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/969186875447332884



=== @ Orithan 04/28/2022 10:42

If you call ``DrawTile()``, either the Screen or Bitmap variants, and set both the scale (``xscale`` or ``yscale`` not being ``-1``) and the rotation (``rangle != 0``) args, you get real funky results.

=== @EmilyV99 (discord: Emily) 04/28/2022 10:56

```cpp
if(canscale) //scale first
{
    //damnit all, .. fixme.
    BITMAP* tempbit = create_bitmap_ex(8, xscale>512?512:xscale, yscale>512?512:yscale);
    clear_bitmap(tempbit);
    
    stretch_sprite(tempbit, pbitty, 0, 0, xscale, yscale);
    
    if(opacity < 128)
    {
        clear_bitmap(prim_bmp);
        rotate_sprite(prim_bmp, tempbit, 0, 0, degrees_to_fixed(rotation));
        draw_trans_sprite(bmp, prim_bmp, x1+xoffset, y1+yoffset);
    }
    else
    {
        rotate_sprite(bmp, tempbit, x1+xoffset, y1+yoffset, degrees_to_fixed(rotation));
    }
    
    destroy_bitmap(tempbit);
}
else //no scale
{
    if(opacity < 128)
    {
        clear_bitmap(prim_bmp);
        rotate_sprite(prim_bmp, pbitty, 0, 0, degrees_to_fixed(rotation));
        draw_trans_sprite(bmp, prim_bmp, x1+xoffset, y1+yoffset);
    }
    else
    {
        rotate_sprite(bmp, pbitty, x1+xoffset, y1+yoffset, degrees_to_fixed(rotation));
    }
}
```
The `if` block here fails, while the `else` (no scale) succeeds

=== @EmilyV99 (discord: Emily) 04/29/2022 04:52

@ Orithan does it do this with `rx <= -777` and `ry <= -777`?

=== @ Orithan 04/29/2022 04:53

It functions properly with ``rx <= -777`` and ``ry <= -777``

=== @EmilyV99 (discord: Emily) 04/29/2022 04:54

ahk
that..... tells me SOMETHING
it has to be related to the rx/ry point
....but nothing in those formulas relate to scale at all.....

=== @EmilyV99 (discord: Emily) 04/29/2022 05:02

@ Orithan what does this do differently?
https://cdn.discordapp.com/attachments/969186875447332884/969463646646317076/zelda.exe

=== @EmilyV99 (discord: Emily) 04/29/2022 05:03

(complete random stab at a math thing)
## ‚úÖüîíActive Shield (#1390)
@ vlamart opened this issue on 04/28/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/969251052207624262



=== @ vlamart 04/28/2022 14:57

I was thinking with the current shield, maybe a flag to make it active, then attributes and such for changing step speed (where 0 is standing still) and one for an extra PTM for the holding shield sprites (that way, to stack with the item's inherent PTM)

=== @EmilyV99 (discord: Emily) 04/28/2022 15:28

I...
You already posted this in another thread didn't you?
And uh, I already added it

=== @ vlamart 04/28/2022 15:56

Oh, I was just spit balling how it could work. Didn't know it was already done, dope!

=== @EmilyV99 (discord: Emily) 04/28/2022 16:18

didn't include a step speed thing, not sure how hard that would be

=== @ P-Tux7 04/28/2022 17:07

now that would be a neat script at least

=== @ Lost Attempt 04/30/2022 02:37

that's what my shield script does actually

=== @ P-Tux7 05/03/2022 21:04

so how do these work in the newest alpha?
specifically regarding player speed while the shield is out
also, is there script access to the shield out state for things like the LA urchins?

=== @ vlamart 05/03/2022 21:06

(replying to @ P-Tux7 "specifically regarding player‚Ä¶"): I don't think it does that yet
(replying to @ P-Tux7 "also, is there script access‚Ä¶"): And I don't believe so. I had to use UsingItem(this->ID) recently

=== @ P-Tux7 05/03/2022 21:08

oh, at least that exists, good

=== @EmilyV99 (discord: Emily) 05/03/2022 21:08

I didn't add a step speed thing yet
and yeah, you just check if the button with the shield on it is being held

=== @EmilyV99 (discord: Emily) 05/07/2022 14:09

Sooooooooooooooooo
![image](https://cdn.discordapp.com/attachments/969251052207624262/972500306741055488/ActiveShieldSpeedDir.mp4)
@arceusplayer11 (discord: Deedee)

=== @ vlamart 05/07/2022 14:10

Smooth criminal

=== @EmilyV99 (discord: Emily) 05/07/2022 14:10

Of note: I also cleaned up some things that weren't quite polished with it
notably, I had set it so you can't attack while using the shield... but not that you can't use the shield while attacking?
so, uh, now it cares about `Action` for whether or not you can shield
`none`, `walking`, and `rafting` are valid
if rafting, it ignores the `Lock direction` flag, as that would prevent the raft from turning and get you stuck on every corner.
and raft speed is not affected either

=== @EmilyV99 (discord: Emily) 05/07/2022 14:13

(meta) thread name was changed: ‚úÖüîíActive Shield

=== @ vlamart 05/07/2022 14:33

Can't tell if bug, but if you keep multiple level active shields, the lower level shield (or maybe the shield with the lowest block value because I also tried this with two level 1 shields) doesn't work

=== @EmilyV99 (discord: Emily) 05/07/2022 14:36

hmm
So, this doesn't really work like other active items do
shields are generally passive items, so a lot of their checks use the passive item check code
which uses the highest level shield
Gonna have to say 'not a bug, just a limitation'

=== @ vlamart 05/07/2022 14:56

That makes sense, because a similar thing happens with scripts. I used UsingItem() to draw something over Link when using the shield, the script works on the lower level shield, even though the shield item itself doesn't activate. And the script doesn't work on the higher level shield, even though the item does

=== @EmilyV99 (discord: Emily) 05/07/2022 15:03

aye, because the `UsingItem()` is getting the ID on the button, while the engine is getting the highest level shield
definitely feels like something I need to patch, but it will take a bit of rewriting to fix that

=== @arceusplayer11 (discord: Deedee) 05/07/2022 17:35

ooh, fancy
"speed: a negative amount will do that much more damage"

=== @EmilyV99 (discord: Emily) 05/07/2022 17:37

ah, crap, copypaste

=== @ P-Tux7 05/07/2022 19:07

(replying to @EmilyV99 (discord: Emily) "`none`, `walking`, and `rafti‚Ä¶"): rafting is currently pointless for shielding outside of the mirror shield; you can't take damage while rafting so you have no need for shielding
at least last i checked

=== @ vlamart 05/07/2022 19:19

(replying to @EmilyV99 (discord: Emily) "which uses the highest level‚Ä¶"): Will you look at this too for keeping multiple active shields?

=== @EmilyV99 (discord: Emily) 05/07/2022 19:20

(replying to @ vlamart "Will you look at this too for‚Ä¶"): working right now
on that problem

=== @ vlamart 05/07/2022 19:23

Dope üç™

=== @EmilyV99 (discord: Emily) 05/07/2022 19:43

Boom, it works
If you use the 'inactive' feature of it, it will only use the highest level for that
but using the active, whatever one you are holding down is the one that it uses
(replying to @ P-Tux7 "rafting is currently pointles‚Ä¶"): so, what if someone wants to make a reason to use a mirror shield on a raft? <:nekoshrug:869489800271503400>

=== @arceusplayer11 (discord: Deedee) 05/07/2022 21:15

a rule to make you not invincible on the raft ü§î

=== @ vlamart 05/07/2022 21:20

(replying to @arceusplayer11 (discord: Deedee) "a rule to make you not invinc‚Ä¶"): Raft item flag instead? (So say a L1 raft that hurts on lava, and L2 with invincibility as to not hurt when going on lava)

=== @ P-Tux7 05/07/2022 21:38

(replying to @arceusplayer11 (discord: Deedee) "a rule to make you not invinc‚Ä¶"): i'd definitely have to suggest an option for better raft controls before that ever happens
## Stomp Boots Features (#1391)
@ Mitsukara opened this issue on 04/30/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/970063520936890478



=== @ Mitsukara 04/30/2022 20:46

Some  suggestion for Stomp Boots items, basically to make it work more like the Downward Thrust attack (and Upward Thrust?) in Zelda II:

------ Multiple enemies fix:

0. Make the boots able to land on 2+ enemies at once without the player getting hurt. (QR or flag?)

------ Bounce:

1. "Bounce on enemies' heads" flag. When you land on an enemy, in addition to damaging them, Link gets a very small amount of jump (should prevent Link from getting hit, too). Maybe about jump = 1?

- 1b. As above, but also add a "bounce on enemies that block stomp boots" flag; bounce off an enemy which blocks stomp boots, without taking damage.

- 1c. As above, but "bounce on enemies that ignore stomp boots".

------ Mario-esque high bounce:

2. "Higher bounce when holding jump"; if you're holding the button for a roc item as you land on the enemy, you bounce higher. Maybe jump = 2? A settable number might be good if that's not a massive pain, but it sounds like a massive pain because GUI implementation.

------ Sword:

3. "Draw current sword when falling" flag. Link's current level of sword weapon is drawn, facing down, in front of Link as he falls (for up and down, it should overlap the Link sprite / the Link sprite should overlap it). No extra animation for Link is needed here unless you really want to get super fancy with it.

- 3b. "Require sword to use". If Link has no swords, these stomp boots won't work. 

- 3c. "Use sword defense type". The stomp boots check an enemy's sword vulnerability instead of stomp type.

------ Upward version:

4. "Stomp boots hit enemies above Link" flag. Enemies above Link's Z (and possibly like, Peahats?) take damage from these stomp boots. This would happen while jumping, instead of while falling. 

- 4b. "Stomp boots don't hit enemies below Link" flag. (If this flag is off, and the one from Suggestion 4 is on, then Link hits above while jumping, and below while falling)

- 4c. "Draw current sword when jumping" flag. This sword draw points up.

=== @ Moosh 04/30/2022 20:53

That first one sounds like a no brainer suggestion. Instantly gives the item better feedback overall

=== @ Mitsukara 04/30/2022 20:54

(meta) thread name was changed: Stomp Boots Features
(..."stop boots" lol)

=== @ Moosh 04/30/2022 20:54

I'm also not sure, does the item still have the janky property where you can stomp one enemy and get hit by another the same frame because it only puts the first into iframes? I recall that being a thing in older versions

=== @ Mitsukara 04/30/2022 20:55

Good question

=== @ Moosh 04/30/2022 20:55

It was very easy to just trade hits when using the item in ways that felt "correct"

=== @ Moosh 04/30/2022 20:57

The bounce property on enemies that block the boots would also really improve on this

=== @ Mitsukara 04/30/2022 20:59

Overall, the vanilla stomp boots are very much a "ooh, this sounds cool!" and then you try it and it's disappointing, kind of item. The ones in Legacy of the Wizard at least reliably hit the enemies and not the player, generally

=== @ Moosh 04/30/2022 21:00

(replying to @ Moosh "I'm also not sure, does the i‚Ä¶"): Survey says: Yes. They do still do this. A rule for that would be welcome
Maybe tack that onto the list

=== @ Mitsukara 04/30/2022 21:00

For good measure I will, yeah

=== @ Mitsukara 04/30/2022 21:04

(also, I'll understand if any of my convoluted suggestions don't work out / whatever the easiest way to implement any of it is.)

=== @arceusplayer11 (discord: Deedee) 05/01/2022 03:18

I have no idea why it works the way it does currently

=== @arceusplayer11 (discord: Deedee) 05/01/2022 03:19

weapons in engine have specific kill/remove cases per weapon type

=== @ Mitsukara 05/01/2022 03:19

I don't suppose stomp boots just like, secretly make a not-properly-classed lweapon under link that dies after hitting one enemy

=== @arceusplayer11 (discord: Deedee) 05/01/2022 03:20

(replying to @ Mitsukara "I don't suppose stomp boots j‚Ä¶"): you'd think if they did that, they'd make the weapon not something that hitting an enemy could remove

=== @ Mitsukara 05/01/2022 03:20

you'd think.... if you expected competence <:nekosip:876927395666477086>

=== @arceusplayer11 (discord: Deedee) 05/01/2022 03:21

<:nekosip:876927395666477086>

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:01

oh, no, it's worse
it's part of the damage link code
which... only checks one enemy per frame

=== @ Moosh 05/01/2022 04:02

ech
So it can't be like apply damage > continue instead of apply damage > break?

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:04

```int32_t hit2 = diagonalMovement?GuyHit(x+4,y+4,z,8,8,hzsz):GuyHit(x+7,y+7,z,2,2,hzsz);
    
    
    
    if(hit2!=-1)
    {
        hithero(hit2);
        return;
    }```
```void HeroClass::hithero(int32_t hit2)
{
    //printf("Stomp check: %d <= 12, %d < %d\n", int32_t((y+16)-(((enemy*)guys.spr(hit2))->y)), (int32_t)falling_oldy, (int32_t)y);
    int32_t stompid = current_item_id(itype_stompboots);
    if(current_item(itype_stompboots) && checkbunny(stompid) && checkmagiccost(stompid) && (stomping ||
            (z > (((enemy*)guys.spr(hit2))->z)) ||
            ((isSideViewHero() && (y+16)-(((enemy*)guys.spr(hit2))->y)<=14) && falling_oldy<y)))
    {
        paymagiccost(stompid);
        hit_enemy(hit2,wStomp,itemsbuf[stompid].power*game->get_hero_dmgmult(),x,y,0,stompid);```

=== @ Moosh 05/01/2022 04:10

So if hithero returns a value based on the type of hit it can use that to cancel out of the return? Or could that have catastrophic results due to some c++ thing I'm not aware of?

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:12

well I'd need to change hithero from a void to an int
also the return is there to prevent it going to weapon code
if the return isn't hit, it still wouldn't check another enemy

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:14

So it'd need to loop through more than the first enemy, which means changing GuyHit to not just return the first enemy, but return the first enemy from a starting point

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:37

So probably poor form but I'm unsure if I want to make fixing this qr-based or not
I... don't see how anyone could rely on the old behavior of stomp boots

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:54

oh. Stomp Boots don't work if Link is invincible
lmfao

=== @arceusplayer11 (discord: Deedee) 05/01/2022 04:58

or if the enemy is stunned

=== @arceusplayer11 (discord: Deedee) 05/01/2022 05:03

what a good item

=== @arceusplayer11 (discord: Deedee) 05/01/2022 05:16

Okay, I think I fixed it

=== @arceusplayer11 (discord: Deedee) 05/01/2022 05:19


![image](https://cdn.discordapp.com/attachments/970063520936890478/970192598654414858/2022-05-01_01-17-28.mp4)
wow cool they aren't a bad item anymore

=== @ Moosh 05/01/2022 05:19

squishy

=== @arceusplayer11 (discord: Deedee) 05/01/2022 05:21

am squishy

=== @ Mitsukara 05/03/2022 00:37

Thanks! If nothing else, having them work in the first place is nice.

Although, I am curious, how feasible are any of those other ideas I brought up originally? (No obligation to do any of that stuff obviously, but it could be neat to have some of it)

=== @arceusplayer11 (discord: Deedee) 05/03/2022 01:31

jumping would be really easy

=== @ P-Tux7 05/03/2022 21:00

(replying to @arceusplayer11 (discord: Deedee) "which... only checks one enem‚Ä¶"): good ordinarily
i guess that's how the "prioritize higher damage combos" rule works

=== @ P-Tux7 05/03/2022 21:02

also "falling" player sprites might be nice, i always found the LA jump animation kind of awkward
though i wonder how one would enable them aside from a rule for every newly added animation
## Writing Link CSet does not affect Link's draw at all (#1392)
@ Moosh opened this issue on 05/01/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/970127983828406303



=== @ Moosh 05/01/2022 01:02

I'm reporting this as a bug though it may be intentional. Traces show the value can be written to, but don't seem to have any effect. Thought maybe it was a script timing issue, but I ran it off a generic script and that made no difference.

=== @EmilyV99 (discord: Emily) 05/01/2022 08:59

@arceusplayer11 (discord: Deedee)
## Hero immutable pos (#1393)
@ Mani Kanina opened this issue on 05/01/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/970139259233251378



=== @ Mani Kanina 05/01/2022 01:47

Dumb idea I have for a script addition. (I dunno if it already exists)
But something like
Hero->ImmutableX
Hero->ImmutableY
returns link/hero's X/Y pixel position based on the entire map, rather than a given screens.
I know this is technically already achievable with basic math, but being able to *set* these values too could potentially be useful.

This is mostly good for things that don't use traditional screen based gameplay or need to do jank things, but I figured I'd suggest it.

=== @ Mitsukara 05/01/2022 02:20

That definitely sounds useful, yeah. Thinking of that drawn mode 7-ish ocean sailing thing I did that tracked screen positions based on the whole map doing the math- not completely sure if I'd have used ->ImmutableX/Y for that, but it's very close to what I was doing, conceptually

=== @arceusplayer11 (discord: Deedee) 05/06/2022 21:56

what exactly would setting these do?

=== @EmilyV99 (discord: Emily) 05/06/2022 21:59

I would presume read only

=== @arceusplayer11 (discord: Deedee) 05/06/2022 22:01

``` but being able to set these values too could potentially be useful.```

=== @EmilyV99 (discord: Emily) 05/06/2022 22:05

Oh, that seems insane
That wouldn't work

=== @arceusplayer11 (discord: Deedee) 05/06/2022 22:14

the screen checks to scroll you if you're a pixel outside the screen range

=== @ Mani Kanina 05/07/2022 17:38

ah
and you can't disable that?

=== @EmilyV99 (discord: Emily) 05/07/2022 17:38

that's how scrolling works

=== @ Mani Kanina 05/07/2022 17:38

yeah, fair enough
this is not very useful then
## ‚úÖüîí[a106] subscreen editor's current item properties doesn't display custom item class names (#1394)
@ tacochopper opened this issue on 05/01/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/970312328857931846



=== @ tacochopper 05/01/2022 13:14

pretty much what the title says. custom class titles appear everywhere else bar the subscreen's current item properties

![image](https://cdn.discordapp.com/attachments/970312328857931846/970312369559437372/zquest_VH5uf0Cafk.png)

![image](https://cdn.discordapp.com/attachments/970312328857931846/970312391545983027/zquest_bR1XrgOP8O.png)

=== @ tacochopper 05/01/2022 13:16

(meta) thread name was changed: [a106] subscreen editor's current item properties doesn't display custom item class names

=== @EmilyV99 (discord: Emily) 05/01/2022 13:18

wait *WTF*
how the fuck is that getting not the right name?

=== @ tacochopper 05/01/2022 13:18

yeah big meme, and it's doing it for all the custom classes
thought "oh i mustn't have updated them properly" originally and... nup

=== @EmilyV99 (discord: Emily) 05/01/2022 13:19

...oh
so fun time
save, close zq, reopen zq
and it will work

![image](https://cdn.discordapp.com/attachments/970312328857931846/970313706397372417/unknown.png)

=== @ tacochopper 05/01/2022 13:20

oh fuck off actual haha

=== @EmilyV99 (discord: Emily) 05/01/2022 13:20

It's storing it in a list
and it only builds the list *once*
not again if it was already built

=== @ tacochopper 05/01/2022 13:20

.... more u know

=== @EmilyV99 (discord: Emily) 05/01/2022 13:20

....it needs to do it EVERY time now, because it can change while ZQ is running.

=== @ tacochopper 05/01/2022 13:21

well the reset worked at least

=== @EmilyV99 (discord: Emily) 05/01/2022 13:21

should be fixed for next build

=== @ tacochopper 05/01/2022 13:21

yeehaw, v good

=== @EmilyV99 (discord: Emily) 05/01/2022 13:34

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
(meta) thread name was changed: ‚úÖüîí[a106] subscreen editor's current item properties doesn't display custom item class names
## ‚úÖüîíZC crashes after starting your quest (#1395)
@ cbailey78 opened this issue on 05/02/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/970746757657010206



=== @ cbailey78 05/02/2022 18:01

ZC is crashing again when I go to start my quest after finishing opening screen wipe.

=== @EmilyV99 (discord: Emily) 05/02/2022 18:44

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 05/02/2022 18:51

> Emily ‚Äî Today at 2:40 PM
> Not sure then. Gonna need the quest file.
> Does this only crash in test mode, though?
> cbailey78 ‚Äî Today at 2:41 PM
> It does it to all quests, so it's not the quest file.
@ cbailey78 it most certainly does not do this to me

=== @EmilyV99 (discord: Emily) 05/02/2022 18:53

including in a freshly-extracted separate folder of the build zip
so, it must be something you have done, or specific to your computer
or something is corrupt with some file
the only thing I can suggest is to redownload the build

=== @ NightmareJames 05/02/2022 20:24

Happening to me too

=== @ NightmareJames 05/02/2022 20:27


https://cdn.discordapp.com/attachments/970746757657010206/970783554390880286/allegro.log
https://cdn.discordapp.com/attachments/970746757657010206/970783554600570971/new2022.qst
Happened after I added some of my tried and true scripts and updated the version of my quest

=== @ NightmareJames 05/02/2022 20:31

It happened both in regular and test mode as well

=== @EmilyV99 (discord: Emily) 05/02/2022 20:39

Happens in that quest for me, yep

=== @EmilyV99 (discord: Emily) 05/02/2022 20:44


![image](https://cdn.discordapp.com/attachments/970746757657010206/970787948104675328/unknown.png)
wtf

=== @arceusplayer11 (discord: Deedee) 05/02/2022 20:45

uhh
wait did I fuck something up there

=== @EmilyV99 (discord: Emily) 05/02/2022 20:46

it's clearly calling that on enemies before they have spawned
and getting null enemy pointers
with no sanity check

=== @ NightmareJames 05/02/2022 20:46

Is that my script, or is that the engine?

=== @EmilyV99 (discord: Emily) 05/02/2022 20:46

I don't know what you did here or what this is part of @arceusplayer11 (discord: Deedee) so this is yours to fix
that's engine
I don't know how that looks at all like zscript
especially with the MSVC live debugger throwing an exception

=== @EmilyV99 (discord: Emily) 05/02/2022 20:48

I have absolutely no clue what's up with this code
there's a verison of the function that is NEVER CALLED? @arceusplayer11 (discord: Deedee)

=== @arceusplayer11 (discord: Deedee) 05/02/2022 20:49

wait, no, I didn't touch this function; what
I made a new version called GuyHitFrom and used that, but I didn't touch the original GuyHit IIRC

=== @EmilyV99 (discord: Emily) 05/02/2022 20:51

err
this function was last modified by me 2 years ago
when I retabbed it
so the function itself hasn't changed, what calls it must have

=== @EmilyV99 (discord: Emily) 05/02/2022 20:53

this is the only recent change, and it's by you

![image](https://cdn.discordapp.com/attachments/970746757657010206/970790180753645668/unknown.png)

=== @EmilyV99 (discord: Emily) 05/02/2022 20:54

....dammit deedee
there is a very important difference between `do {} while()` and `while ()`
```cpp
int32_t hit2 = -1;
do
{
    hit2 = diagonalMovement?GuyHitFrom(hit2+1,x+4,y+4,z,8,8,hzsz):GuyHit(hit2+1,x+7,y+7,z,2,2,hzsz);
    
    if(hit2!=-1)
    {
        if (hithero(hit2) == 0) return;
    }
} while (hit2 != -1);
```
So, what does this code do?
It sets `hit2` to `-1`
then it calls `GuyHit(0)`
err, hmm, well no, this needs to be a do-while.....
but
I see
you changed it from `GuyHit` with 6 params
which loops through every enemy and then does stuff with one when it finds it
to `GuyHit` with 7 params
which ASSUMES that the indexed enemy exists
and if no enemy exists, it... grabs the null pointer from `guys.spr(0)`
and derefs null
your `GuyHitFrom` also has this issue
both functions need to have a null check added
err, wait, no
your GuyHitFrom's for loop uses `guys.Count()`
so it should be fine
but
```cpp
int32_t GuyHit(int32_t index,int32_t tx,int32_t ty,int32_t tz,int32_t txsz,int32_t tysz,int32_t tzsz)
{
    enemy *e = (enemy*)guys.spr(index);
    
    if(e->hp > 0)
        return -1;
        
    bool d = e->dying;
    int32_t hc = e->hclk;
    e->dying = false;
    e->hclk = 0;
    bool hit = e->hit(tx,ty,tz,txsz,tysz,tzsz);
    e->dying = d;
    e->hclk = hc;
    
    return hit ? index : -1;
}```
that has no sanity check
it assumes the enemy must exist for the function to be being called
and you called it in an instance where that is unknown
(shall I fix it, or you got it?)
though err
this function doesn't seem AT ALL similar to `GuyHitFrom`
and it's called in 4-way movement
(which, yep, that's the thing; only 4-way movement quests will crash)
Did you test this at all to make sure the stomp boots actually work right in 4-way? @arceusplayer11 (discord: Deedee)
because you're calling an entirely separate function for 4-way

=== @EmilyV99 (discord: Emily) 05/02/2022 21:03

I can fix the crash, but I have no clue if the stomp boots will work at all with that fix
so

=== @EmilyV99 (discord: Emily) 05/02/2022 21:04

or, wait
is the second function call just meant to be GuyHitFrom?
is that just the issue?
that's probably just the issue
should have it fixed
gotta love 4-letter typos

=== @EmilyV99 (discord: Emily) 05/02/2022 21:09

@ NightmareJames @ cbailey78
https://cdn.discordapp.com/attachments/970746757657010206/970794232216432720/zelda.exe

=== @arceusplayer11 (discord: Deedee) 05/02/2022 21:17

(replying to @EmilyV99 (discord: Emily) "to `GuyHit` with 7 params"): OH FUCK, that second GuyHit needs to be a GuyHitFrom

=== @EmilyV99 (discord: Emily) 05/02/2022 21:18

Yeeep
That's what I did

=== @arceusplayer11 (discord: Deedee) 05/02/2022 21:19

(replying to @EmilyV99 (discord: Emily) "Did you test this at all to m‚Ä¶"): uh, no I did not, because I am a moron (actually I didn't realize that was a diagonal movement only block <:facepalm:790712840683520050> )

=== @EmilyV99 (discord: Emily) 05/02/2022 21:20

It uses diagonalMovement in the same line you call the functions lol

=== @ cbailey78 05/02/2022 21:25

ZC works now! Thank you very much!

=== @EmilyV99 (discord: Emily) 05/02/2022 21:41

(meta) thread name was changed: ‚úÖüîíZC crashes after starting your quest

=== @ NightmareJames 05/02/2022 21:42

Looks fixed
## Per-Shield and Per-Flippers Speed Multiplier (#1396)
@ P-Tux7 opened this issue on 05/03/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/971157029441908756



=== @ P-Tux7 05/03/2022 21:11

A multiplier of the player's base walk speed. Should probably be stored as a numerator/denominator

Might be neat as well to add an itemclass that allows you to change the speed multiplier while it's equipped. That would go well with the planned "active" passive items a la rings.

=== @EmilyV99 (discord: Emily) 05/07/2022 14:14

per-shield done

=== @ P-Tux7 05/07/2022 19:07

ooh
so um does it only apply while you have the shield up

=== @EmilyV99 (discord: Emily) 05/07/2022 19:20

yes
## [1.90] Screen flags being read incorrectly by the player (#1397)
@ Moosh opened this issue on 05/03/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/971197668506357860



=== @ Moosh 05/03/2022 23:52

This was reported by JulianVerse in the PureZC server. We did some testing and I think have narrowed the issue to screen flags. Both Zoras and ladder screens in the quest Return to Hyrule aren't working at all. Resaving the quest in 2.53 fixed the issue. So my hypothesis is the editor is able to see what the flags should be set to, but the player is reading them incorrectly.
Here's the quest file demonstrating the issue. Just right of the start there should be a zora.
https://cdn.discordapp.com/attachments/971197668506357860/971197918319099945/rth.qst
This may be the same bug as https://discord.com/channels/876899628556091432/943287134423511050
Just with broader effects than we thought

=== @arceusplayer11 (discord: Deedee) 05/05/2022 15:27

hmm...
## If the sword is held out, Link re-slashes when entering a screen (#1398)
@ tacochopper opened this issue on 05/04/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/971382100227919972



=== @ tacochopper 05/04/2022 12:05

this is a funny one tbh
![image](https://cdn.discordapp.com/attachments/971382100227919972/971382105684721684/zelda_D2gdDod2EZ.gif)
also the moonwalk is kind of neat

=== @ vlamart 05/04/2022 14:00

Love it
## SCC -Goto if Current Screen equals- (#1399)
@ FireSeraphim opened this issue on 05/04/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/971460848470077552



=== @ FireSeraphim 05/04/2022 17:18

I know this is an odd one but I have a very good reason for it. In my current quest I have a room where you're awarded a Lv. 1 Wealth Medal after rescuing a prisoner, and the wealth medal comes with a letter (not the actual letter item mind you) attached it to. Now here's the underlying problem: I want to take advantage of the progressive item feature so that if you got the Lv. 1 Wealth Medal elsewhere then it will give you the Lv. 2 Wealth Medal for rescuing the prisoner and the SCC codes don't have one for only playing a follow up string if you're in a certain screen

=== @ FireSeraphim 05/04/2022 17:20

I don't want to have to resort to a jank-ass solution when a better, less janky one can be added.

=== @ FireSeraphim 05/04/2022 18:13

A screenshot of the situation in question where having "Goto if Current Screen Equals" would be a major godsend
![image](https://cdn.discordapp.com/attachments/971460848470077552/971474618579836938/zc_screen00003.png)
## ‚ùåüîí[Low priority] The ability to import image files (#1400)
@ Majora opened this issue on 05/05/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/971616604595036250



=== @ Majora 05/05/2022 03:37

at least (non animated) GIF, and bonus for PNG. The purpose would be to be able to have crude/basic cutscenes and other visual flair. For instance, a "splash screen" when you enter a new area. This could work like enhanced music, but if possible within a subfolder. if not integrated into the quest file itself like a MIDI.

Even though ZC has generous tile space, in my opinion making cutscenes/etc. out of tiles is hideously inefficient. I make this suggestion with the assumption that it would be slightly less work in the long run to implement image importing

I know doing anything with the GUI immediately saps the will to live, so the compromise would be that images can only be displayed/manipulated via scripting. The slightly less compromise would be adding a tab to Screen Data that just asks what image to display (and the pixel coordinates of the image's top-leftmost pixel that defaults to 0,0) , and things like scrolling/rotation/whatever are left to scripting. The image would just be a simple object that draws under the hero on layer 0. bonuses include being able to have it be on other layers the way you'd do so for normal tiles. 

Image dimensions could be capped at some multiple of 256x176. Probably 3x, both for file size reasons (maybe GIF can be larger than PNG) but also not to upset allegro 4 or the ZC engine code too much. 

and uhhhh that's all I got. I can't think of other considerations but the overall point is just to have one GIF/PNG exist on a screen as a simple object.

=== @ Moosh 05/05/2022 03:52

https://www.mediafire.com/file/nvbitd1hafxod89/CutsceneExample.qst/file
You mean something like this?

=== @ Moosh 05/05/2022 03:54

https://www.youtube.com/watch?v=_BdSpBcFBg8
Or this newer video of it implemented in an actual quest

=== @ Majora 05/05/2022 03:59

nah I mean cinematic shots. You know how in A Link to the Past in the intro, it just shows you the overworld map and then zooms into hyrule castle? if they wanted to say, show a frontal angle of the castle they'd need to draw the tiles for it instead of just being able to zoom in. that kinda thing, if that makes sense.
(also 10/10 on the oblivion guard dialog lmao)

=== @ Moosh 05/05/2022 04:00

But yeah, ZScript can import images last I checked. They have to be indexed still but you don't need to eat up tile pages to do cutscene images at least

=== @ Majora 05/05/2022 04:01

oh shit really? I had no idea.
hell yeah

=== @ Moosh 05/05/2022 04:02

I'm pretty sure that's how I did that second one. The first one I manually ripped like 200+ images into ZQuest and it was _pain_
FMV is still not a good idea in the slightest. It's painful and wasteful no matter which way you slice it

=== @ Majora 05/05/2022 04:04

oh yeah no I don't mean full motion videos. videos are ass. just y'know the occasional uniquely/artistically drawn shot once in a while with maybe some basic "animation" like panning/scrolling or parallax
also forgive me I switched back to discord halfway through your video because I thought it was a tile-based cutscene and did not see the actual punchline, holy fuck i'm dying.

=== @ Moosh 05/05/2022 04:04

lmao
I thought it was weird you didn't react to the punchline

=== @ Majora 05/05/2022 04:05

ITS SO SMOOTH
i'm like "wait a minute 200 images??? [immediately resumes the video]"
just gonna add that to the ol' youtube downloader to preserve for posterity

=== @ Majora 05/05/2022 05:26

addendum to original post: apparently what i'm requesting already exists so unless my original post mentioned anything that doesn't exist, it is entirely redundant.

=== @EmilyV99 (discord: Emily) 05/05/2022 09:04

Can't do animated gifs
but any other basic image type should indeed be loadable
(meta) thread name was changed: ‚ùåüîí[Low priority] The ability to import image files
## ‚úÖüîíTile Editor Region Select - Pressing Delete Sets Selection to Color 0 (#1401)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 05/05/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/971704349698981918



=== @TheBlueTophat (discord: Coolgamer012345) 05/05/2022 09:26

Title. Would speed up tile editing.

=== @ Moosh 05/05/2022 09:35

As in when in the tile editor but only when selecting a region with the hookshot tool? Could be good
If it's always active, maybe a bit far fetched but I could see myself fat finger it when changing CSets

=== @TheBlueTophat (discord: Coolgamer012345) 05/05/2022 09:37

Hookshot tool or the magic wand tool

=== @ Tsunami Tommy Reload the Shotty 05/05/2022 13:26

Heck, in fact, are the number keys even used for anything while editing a tile?  If not, they may as well select a color.  Shift + 1-5 would select the rest or so.

=== @TheBlueTophat (discord: Coolgamer012345) 05/05/2022 13:56

that would also be extremely nice
It'd be funky with 8-bit mode, bvut at the same time 8-bit mode is kind of a niche case

=== @EmilyV99 (discord: Emily) 05/11/2022 13:16

Adding stuff to the tile editor isn't 'easy' by any stretch
but delete is simple enough, and it's done.
(meta) thread name was changed: ‚úÖüîíTile Editor Region Select - Pressing Delete Sets Selection to Color 0

=== @EmilyV99 (discord: Emily) 05/11/2022 15:32

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## Enemies with -Tektile- movement hopping out of existence in interior roomtypes (#1402)
@ FireSeraphim opened this issue on 05/05/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/971819638356869120



=== @ FireSeraphim 05/05/2022 17:04

I'm merely bringing this over to a formal bug report 
`Speaking of which, I been wondering when you guys would take notice of a glitch that easily demonstrable in the intro dungeon of my side project. Enemies with the Tektike property eventually hopping upwards out of existence after a minute or two in interior dmaps (I have to think that might also apply to dungeon d-maps)

The Bit and Bot enemies in my quest kinda use Tektike behavior and it's the same behavior they have in the FYS tileset
Bit has random rate of 0, halt rate of 16, homing factor of 0, step speed of 25
Bot has random rate of 0, halt rate of 0, homing factor of 0, step speed of 50`
## ‚úÖüîíTile Editor - Move Button when hookshot has selected pixels only moves those pixels. (#1403)
@ Tsunami Tommy Reload the Shotty opened this issue on 05/07/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/972463578324008990



=== @ Tsunami Tommy Reload the Shotty 05/07/2022 11:43

When Editing a tile, and having used the Hookshot tool to select a rectangle of pixels, is there a way to have the "Move" gauntlet button slide only those highlighted pixels rather than the entire tile?  

They could just leave a transparent pixel in their wake after being moved.

Or is there a way to do this now, and I'm just bumbleducking my way around in a way that's not finding it?

=== @ Tsunami Tommy Reload the Shotty 05/07/2022 11:44


![image](https://cdn.discordapp.com/attachments/972463578324008990/972463937943642132/unknown.png)
For example, the red box on the right is what I've selected with the hookshot. I want to move it one pixel to the left, all at once.  

Instead of the "Move" button moving only the selected rectangle, it currently slides the entire tile around.

=== @TheBlueTophat (discord: Coolgamer012345) 05/07/2022 15:19

this would also be insanely helpful for the tile editor

=== @EmilyV99 (discord: Emily) 05/11/2022 15:05

I
I hope you appreciate
what the fuck it is you've asked for here
This
Is NOT REMOTELY an easy task
And required a fair bit of rewriting how the tile editor works
to account for this
....but do note that I used the past tense `required` there, for, I do believe it has been completed.

=== @EmilyV99 (discord: Emily) 05/11/2022 15:23

So, one note:
-By default, it leaves the second selected color (the one placed with right-clicking) behind
-If you hold shift when you move it, it instead leaves behind color 0

=== @ Tsunami Tommy Reload the Shotty 05/11/2022 15:23

I appreciate the notes.  To be fair on my part, any request I make is more of a "putting out of feelers" to see if it's even remotely feasible.  I really don't want anything to be too strenuous or time-consuming on the part of the devs.  Thank you anyway!

=== @ Tsunami Tommy Reload the Shotty 05/11/2022 15:25

` I do believe it has been completed.`  When?  In the distant past?  Just recently?  I should probably know how to phrase any form of gratitude to match.
Those two bullet points are a great way to go about doing it in any case.  Absolutely well thought-out.  ^-^

=== @EmilyV99 (discord: Emily) 05/11/2022 15:27

well
#1401
I finished that...
![image](https://cdn.discordapp.com/attachments/972463578324008990/973969692802830356/unknown.png)
9:16, so about 2 hours ago
so about 2 hours of work to complete it

=== @EmilyV99 (discord: Emily) 05/11/2022 15:30

(meta) thread name was changed: ‚úÖüîíTile Editor - Move Button when hookshot has selected pixels only moves those pixels.

=== @ Tsunami Tommy Reload the Shotty 05/11/2022 15:30

You are an angel.  <:dashomg:906116397992665090>

=== @EmilyV99 (discord: Emily) 05/11/2022 15:31

```
Add floating selection to tile editor
    -A 'selected' area can now be moved
    -Moving the selected area causes it to "float" above the rest of the tile
    -While floating, it does not overwrite the pixels 'below' it
    -Upon changing the selection or saving, it 'falls', merging back into the tile.
    ( EmilyV, 11th May, 2022 )```
For a program that doesn't have any form of 'layers' to it's pixel editing, adding this was quite mindbending, and frankly I am completely surprised that I managed to finish it so quickly
[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
## QR or Item Setting - Potions and Bottles Can Be Used While Item Jinxed (#1404)
@ P-Tux7 opened this issue on 05/07/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/972600411586453565



=== @ P-Tux7 05/07/2022 20:46

Yeah

=== @ NightmareJames 05/07/2022 23:35

Might not be a bad idea
## Swimming when shouldn't be possible (#1405)
@ aslion opened this issue on 05/08/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/972743676914728990



=== @ aslion 05/08/2022 06:16

https://i.imgur.com/xKAFn7Y.gif
gif of the bug

These combos are set up as Liquid combos that require Flipper level 2 (not in quest, meant to always drown)
The top halves are solid with the Solid Is Shallow flag set.
Transitioning between screens while halfway down the combo onto the same combo will cause Link to start swimming even though he should be on the shallow part, and not be able to swim in the water regardless.

=== @EmilyV99 (discord: Emily) 05/08/2022 11:28

@arceusplayer11 (discord: Deedee) scrolling nextscreen shit
## New ZQuest Option -Replace Applies to Whole Map- (#1406)
@ bigjoe opened this issue on 05/08/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/972792031581716500



=== @ bigjoe 05/08/2022 09:28

This option would allow right click replace to apply to the entire current map. It would save TONS of individual screen work if you were converting tilesets!

=== @ Tsunami Tommy Reload the Shotty 05/08/2022 09:59

Replace _what_ specifically?  Can you give an example, @ bigjoe ?  Curiosity.

=== @ bigjoe 05/08/2022 10:01

just individual tiles. if you have a large tileset with differing tiles that need to be laid out first on a screen by screen basis, you could instead do the entire map by tiles you replace, not just the current screen. it would save... i dunno, about 7E screens worth of replacing? just do it once and the whole map has its tiles replaced. Then you can move on to secondary work like adding edges and stuff

=== @ bigjoe 05/08/2022 10:04

alternately it could just be a 'Replace on All' button
## ‚úÖüîíArrows Cost Rupees  Misc SFX don't work (#1407)
@ NightmareJames opened this issue on 05/08/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/972862918460858409



=== @ NightmareJames 05/08/2022 14:09

Uploading files including a save file

=== @ NightmareJames 05/08/2022 14:11


https://cdn.discordapp.com/attachments/972862918460858409/972863257725521970/ac-new2022beta1.sav
https://cdn.discordapp.com/attachments/972862918460858409/972863258174324786/new2022.qst
https://cdn.discordapp.com/attachments/972862918460858409/972863258665033778/allegro.log

=== @EmilyV99 (discord: Emily) 05/08/2022 14:13

shouldn't need all that

=== @ NightmareJames 05/08/2022 14:14

OK, just wanted to be complete

=== @EmilyV99 (discord: Emily) 05/11/2022 15:35

should be fixed [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
(meta) thread name was changed: ‚úÖüîíArrows Cost Rupees  Misc SFX don't work
## QR - Disable active subscreen entirely (#1408)
@ Alucard648 opened this issue on 05/09/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/973187390913003522



=== @ Alucard648 05/09/2022 11:39

Some quests don`t need subscreen at all. Hitting Enter should count as Pause.

=== @TheBlueTophat (discord: Coolgamer012345) 05/10/2022 00:19

I feel like this would be easy enough to script that adding it as a quest rule would be weird

=== @EmilyV99 (discord: Emily) 05/11/2022 19:41

An active subscreen script as follows would do this:```cpp
dmapdata script PauseSubscreen
{
    void run()
    {
        do Waitframe(); until(Hero->PressStart);
    }
}```
## ‚úÖ106 - Item Flag Ring Affects Damage Combos not changing Combo Damage (#1409)
@ HeroOfFireZC opened this issue on 05/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/973314463455387730



=== @ HeroOfFireZC 05/09/2022 20:04

Just ran into this one, I had damage combo FFCs still doing base damage to Blue Ring. This quest originated in 2.52 with the global rule for Rings affecting Damage Combos toggled, and the Item Flags for all Rings are properly set.
Also, saving the quest to see if it was the old QR not working right in ZC did not change anything. Despite the flag being set, Damage Combos were still doing their base damage through Blue Ring.

=== @EmilyV99 (discord: Emily) 05/09/2022 20:54

@arceusplayer11 (discord: Deedee)

=== @ HeroOfFireZC 05/25/2022 18:31

Just confirming this is happening in the "latest" nightly too. Also happens through %based Rings.

=== @ HeroOfFireZC 05/25/2022 23:00

On the other hand, it appears the same item flag*does* work properly with a Peril Ring. So it's specific to the standard Defense Rings.

=== @ HeroOfFireZC 05/30/2022 17:40

Still in the latest nightly.

=== @EmilyV99 (discord: Emily) 08/15/2022 21:36

(meta) thread name was changed: ‚úÖ106 - Item Flag Ring Affects Damage Combos not changing Combo Damage
## Combo Rule For Conveyors To Work Layers 1 and 2 (#1410)
@ bigjoe opened this issue on 05/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/973402114569154590



=== @ bigjoe 05/10/2022 01:52

Thread name is descriptive enough, I think.
## ‚úÖüîíMoving enemies far offscreen no longer kills them silently (#1411)
@ Russ opened this issue on 05/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/973556546292305960



=== @ Russ 05/10/2022 12:06

Previously, you could kill an enemy without them making the death SFX by moving them _far_ offscreen (such as Y = -1000) or setting their HP to very large negative numbers. Neither of these seem to work anymore; the enemy will still make the death SFX. This was working fairly recently, but seems have to broken in one of the newer alphas, though I'm not sure exactly which.

=== @EmilyV99 (discord: Emily) 05/10/2022 12:11

"Very large negative numbers" does not do it
it specifically needs to be `HP_SILENT` from std_constants
```cpp

//NPC hit point values. Use with npc->HP to make the enemy die in a special manner.
const int HP_SILENT = -1000;  // The enemy will die without their Death Sound playing.
const int HP_GLEEOKHEAD = 1000; //Floating Gleeok heads have this as their HP value. ```

=== @EmilyV99 (discord: Emily) 05/10/2022 12:14

oh, wait, no, looks like lower negative vals might also work

=== @EmilyV99 (discord: Emily) 05/10/2022 12:15

....hmmm

=== @EmilyV99 (discord: Emily) 05/10/2022 12:16


https://cdn.discordapp.com/attachments/973556546292305960/973559162585886720/zquest.exe
https://cdn.discordapp.com/attachments/973556546292305960/973559163256983634/zscript.exe
https://cdn.discordapp.com/attachments/973556546292305960/973559163894521906/zelda.exe
Does that fix?

=== @TheBlueTophat (discord: Coolgamer012345) 05/10/2022 12:23

Is this a hardcoded constant or one set somewhere in the std files? I ask since it may be helpful for quest makers to be able to disable that and just kill their enemies in other ways via script if they prefer.

=== @EmilyV99 (discord: Emily) 05/10/2022 12:48

...?
that sentence does not make much sense

=== @TheBlueTophat (discord: Coolgamer012345) 05/10/2022 13:18

emily I'm asking can I turn off killing enemies automatically if I move them far offscreen
for example z3 scrolling shenanigans
not that I necessarily _need_ that right now but I am wondering for future use.

=== @EmilyV99 (discord: Emily) 05/10/2022 13:20

ahk, that has nothing to do with those constants
`npc->Immortal` is a thing to stop enemies from dying

=== @TheBlueTophat (discord: Coolgamer012345) 05/10/2022 13:22

fair enough
also I just realized the constants related to HP not x/y position (which was the first thing Russ mentioned)

=== @arceusplayer11 (discord: Deedee) 05/10/2022 16:57

(replying to @TheBlueTophat (discord: Coolgamer012345) "emily I'm asking can I turn o‚Ä¶"): There is an enemy flag for allowing them to move offscreen

=== @EmilyV99 (discord: Emily) 05/10/2022 16:59

Does it *work*?

=== @arceusplayer11 (discord: Deedee) 05/10/2022 16:59

good question! no clue.
actually, why am I saying that
I know it works cause I had an offscreen enemy using that

=== @ Russ 05/10/2022 20:41

That build fixes it, yes
It also seems to run slower. I'm assuming some debug stuff left on?

=== @EmilyV99 (discord: Emily) 05/10/2022 21:23

Not that I'm aware of...

=== @ Russ 05/10/2022 21:37

And now I'm testing again and no difference... guess my computer was acting up

=== @EmilyV99 (discord: Emily) 05/10/2022 21:58

Fun

=== @EmilyV99 (discord: Emily) 05/11/2022 12:45

(meta) thread name was changed: ‚úÖüîíMoving enemies far offscreen no longer kills them silently
## ZScript - Access Header Data. (#1412)
@ Orithan opened this issue on 05/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/973602653701558272



=== @ Orithan 05/10/2022 15:09

Can we have a way to read a quest's header data within ZScript?

=== @EmilyV99 (discord: Emily) 05/11/2022 12:52

Like, title, author, version, minversion?

=== @ Orithan 05/11/2022 14:02

Yes
Though, what could we do with things like reading title, author and minversion?

=== @EmilyV99 (discord: Emily) 05/11/2022 14:04

<:nekoshrug:869489800271503400>

=== @ Orithan 05/11/2022 14:04

As it stands the only real value I can see is reading the current version of the quest
So when you do a version change you can do stuff when loading a newer version of a quest.
Min Version seems redundant because its most relevant uses, ZC does for you.

=== @ Orithan 05/11/2022 14:06

Title and Author could be fun things to use in strings so you don't have to update any ZScript strings its used in later down the track if need be
These are generally speaking very niche applications and I would not complain if they weren't added
## Show shallow water with W (#1413)
@ aslion opened this issue on 05/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/973767049086140496



=== @ aslion 05/11/2022 02:02

Could a color be added in the Show Walkability feature for showing shallow water?
## ZQuest and ZC solidity view not representing bridge combos properly (#1414)
@ Moosh opened this issue on 05/11/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/973818704901075014



=== @ Moosh 05/11/2022 05:27

When Deedee updated bridge combos to respect solidity map + effect square, it doesn't seem that change was reflected in the solidity preview draws. If I have a bridge that's half solid with a full effect square, it will draw as if it's fully walkable. Not a super big deal but makes testing setups a bit more awkward as I've got to walk around in the player to ensure I got it right. 

Also I'd assume this should keep the current behavior when the Old Bridge Combo Behavior rule is on. If such a thing is possible

=== @EmilyV99 (discord: Emily) 05/11/2022 10:58

@arceusplayer11 (discord: Deedee)
## ‚ùåüîíSensitive and Stair Warps no longer work under layer 1 (#1415)
@ FireSeraphim opened this issue on 05/12/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/974127861768269894



=== @ FireSeraphim 05/12/2022 01:56

As of the latest nightly I've ran into a problem where sensitive and stair warps placed under a layer 1 ground tile no longer teleports the player like it should. I use this particular trick for the world gates in my side project and I have reasons to think this might also affect trigger combos concealed under layer 1

=== @ Moosh 05/12/2022 02:05

None of your combos layered over the stairs would happen to be bridge combos, would they? because that sounds like bridge combo

=== @ FireSeraphim 05/12/2022 03:51

No, they are not bridge comboes

=== @EmilyV99 (discord: Emily) 05/13/2022 18:33

Is there an FFC over the warp?
@ FireSeraphim

=== @ FireSeraphim 05/13/2022 18:33

No

=== @ FireSeraphim 05/13/2022 18:34

I think I ought to DM you my current dev build

=== @EmilyV99 (discord: Emily) 05/13/2022 18:36

that would probably be good
because I can't replicate the issue
so

https://cdn.discordapp.com/attachments/974127861768269894/974742164296843394/warptest.qst
layering a ground tile over a warp combo doesn't stop the warp from working

=== @EmilyV99 (discord: Emily) 05/13/2022 23:06

Actual bug
the qr swapping wavy and cancel warps (compat for 1.92) was checked
so it was doing a cancel warp

=== @EmilyV99 (discord: Emily) 05/13/2022 23:10

as this is, here, the intended behavior, no bug found. Gotta check your compat rules!
(meta) thread name was changed: ‚ùåüîíSensitive and Stair Warps no longer work under layer 1
## Single Tiles - Invert O and Shift + O Functionality (#1416)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 05/12/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/974412210828898364



=== @TheBlueTophat (discord: Coolgamer012345) 05/12/2022 20:46

I wasn't sure if I should put this in a new thread or just revive the old one, but to be safe I just made a new thread. I feel like it would be better if the overlay functionality was more consistent with the usage of `Shift + o` for single tile regions and large tile blocks.

I think it would make more sense for a copied 1x1 tile to be pasted into all the tiles of a selected region with `o`, and `shift + o` would only paste a single tile into the region. This would be opposite of how it works currently.

I think multi-tile copied sections should stay the same, with `o` overlaying the whole copied section, and `shift + o` only overlaying a single tile.

Of course this should extrapolate to under-laying as well but I left those key combinations out for simplicity's sake. I'm not sure how difficult this would be but assuming it is just swapping a couple of conditions around, I think it would make more sense to function this way.
## Warp Combos on Layers (#1417)
@ vlamart opened this issue on 05/13/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/974682378318540831



=== @ vlamart 05/13/2022 14:39

A combo QR for all warp combo types to work on Layers 1 and 2

=== @EmilyV99 (discord: Emily) 05/13/2022 14:55

Do they not already?
huh
they work on *ffcs*

=== @ vlamart 05/13/2022 15:02

Huh, interesting. Is there a comprehensive list of what works on what layers and as ffcs? Should everything be able to work as such?

=== @EmilyV99 (discord: Emily) 05/13/2022 15:02

hahahhahaa
a 'comprehensive list'
who do we look like, real game devs?

=== @ vlamart 05/13/2022 15:03

Okay, I'll test it out and slow try to make one üòù
Probably won't even be started today though

=== @ vlamart 05/14/2022 01:51

Hopefully this is of some useful information. I also went hubris and put a few feature requests at the end (the most ambitious being the last two). @EmilyV99 (discord: EmilyV)
https://cdn.discordapp.com/attachments/974682378318540831/974851467259297802/CmbLayerFFCnotes.txt

=== @EmilyV99 (discord: Emily) 05/16/2022 23:13

So, actually looking through this now

=== @EmilyV99 (discord: Emily) 05/16/2022 23:15

oh god
despite being totally visible in discord
downloading the file, the columns of `x`s are completely misaligned
fun
ok, so
....I could have sworn conveyors were done for 1&2, but nope
@arceusplayer11 (discord: Deedee) weren't you doing that?
Armos/Grave/BS Grave I can see the reasoning for keeping those only on layer 0
because I.... do not want to imagine the enemy code changes involved in changing armos shit.
Block [weapon] combos should be simple enough to add @EmilyV99 (discord: EmilyV)
Light Triggers on FFC won't work at all, because everything about the light system is grid based
....which makes me VERY confused @ vlamart that Glass works on ffc???
Slow Walk needs some improvements in general, similar to conveyors

=== @EmilyV99 (discord: Emily) 05/16/2022 23:21

Warps definitely make sense, though if you tried to put multiple warps in the same spot on different layers it would be wacky
(probably sanest to just make it use the top-layered warp it finds and ignore any under that)
`Step` shit is in the same block as warps, I think? Not sure how easy that'll be...
Docks could probably be done, but it doesn't seem particularly urgently useful to do, so probably not a priority

=== @ vlamart 05/16/2022 23:23

(replying to @EmilyV99 (discord: Emily) "....which makes me VERY confu‚Ä¶"): Well technically, the solidity doesn't work, but light still passes through. I guess that technically means it doesn't work, but doesn't matter because that's what the glass does anyways, just solid? (which is yet to be implemented)

=== @EmilyV99 (discord: Emily) 05/16/2022 23:23

...oh, duh
yeah, all glass does is make it NOT count as solid
but ffcs don't count anyway
so, that makes sense

=== @ vlamart 05/16/2022 23:24

Yes yes

=== @EmilyV99 (discord: Emily) 05/16/2022 23:24

light does just pass through any ffc
The entire light puzzle system
is ENTIRELY combogrid based
so making it work with things that aren't locked to the grid.... would be a not-so-fun endeavor

=== @EmilyV99 (discord: Emily) 05/16/2022 23:25

@arceusplayer11 (discord: Deedee) any chance you want to make weapons handle mirrors on layers 1&2?

=== @ vlamart 05/16/2022 23:26

Please don't ffc mirros anyways, it would probably look weird üòù Though diagonals might be "meeting in the middle", I'll have to play with light puzzles more

=== @ vlamart 05/16/2022 23:27

Is there a way to access all the light puzzle stuff via scripting if anyone wanted to do diagonals or animated light beams or other wacky stuff on their own?

=== @EmilyV99 (discord: Emily) 05/16/2022 23:28

nope!
I hacked it all together in, like, an hour or something
and it hasn't been touched since

=== @ vlamart 05/16/2022 23:30

Well, I guess throw that in the gross feature request list at the bottom üòù

=== @EmilyV99 (discord: Emily) 05/16/2022 23:31

Also, nothing is actually stored long-term about it
other than the drawn bitmap

=== @ vlamart 05/16/2022 23:31

(replying to @EmilyV99 (discord: Emily) "(probably sanest to just make‚Ä¶"): This can be specified in the combo type's "?"

=== @EmilyV99 (discord: Emily) 05/16/2022 23:31

it just runs a calculation based on each spotlight, and draws everything to a bitmap, triggering the light triggers

=== @EmilyV99 (discord: Emily) 05/16/2022 23:35

also gonna paste these separately
```
Feature Requests:
    Armos - Touch->Next (instead of undercombo) flag, proximity trigger flag and attribs (change if closer than x pixels; works in correlation with Touch->Next flag)
    Grave/BS Grave - attribs for specified enemy, quantity, and spawn rate if quantity > 0
    Block Weapons - similar to Block All/Arrow/etc., but uses the Trigger flags as what to block
    Bush/Flower/Tall Grass - match sprite CSet flag, as to not have green clippings or rustles on brown grass
    Shallow Water - match sprite CSet flag
    Slow Walk - custom speed flag/attribs
    Chests - specific item flag and attribs (to work around room type and screen flag), item rises from chest flag
    Generic Pushblock - flags for pushable directions (udlr, can combine), flag for Wait (enemies), flag and attribs for specific level push, flag and attribs for "pushing animation" combo (like if you make a push block that "rolls"), frictionless flag (after pushing, moves until hits solid, liquid, pit, no push blocks, block trigger, and block hole); once solid ffc's are ready, maybe also a flag for "no gridlock", then this can be the blueprint for an in-engine Cane of Somaria```
```
Armos:
'Next Combo' flag (next instead of undercombo) [easy]
'Proximity' flag/attrib (activate within range) [not easy]```
the Block Weapons via trigger flags is something I already had floated as an idea, never got around to it

=== @EmilyV99 (discord: Emily) 05/16/2022 23:40

`item rises from chest` seems like a no

=== @ vlamart 05/16/2022 23:40

Generic Combos, when using it to spawn an enemy, does it spawn as soon as the combo appears? If so, just a new "Proximity->Next" combo type might be a good work around for the armos, just have the next combo be generic and spawn armos

=== @EmilyV99 (discord: Emily) 05/16/2022 23:41

generic pushblock seems interesting, but would be quite a bit of work, as the entire pushing mechanic is very flag based rather than type based.
Not sure about generics, might be when triggered?
but you can set `automatically triggered` to make it trigger as soon as it appears, sooo

=== @arceusplayer11 (discord: Deedee) 05/17/2022 00:35

(replying to @EmilyV99 (discord: Emily) "@arceusplayer11 (discord: Deedee) weren't‚Ä¶"): yeah, I was intending to do that...

=== @ vlamart 05/22/2022 17:46

(replying to @ vlamart "Hopefully this is of some use‚Ä¶"): @TheBlueTophat (discord: Coolgamer012345)

=== @TheBlueTophat (discord: Coolgamer012345) 05/22/2022 17:49

Ahh I see

=== @ vlamart 07/09/2022 02:29

(replying to @ vlamart "Hopefully this is of some use‚Ä¶"): @EmilyV99 (discord: EmilyV) @ P-Tux7  This

=== @ P-Tux7 07/09/2022 02:53

thanks!
## New Item -Scroll; Tornado Spin - (#1418)
@ FireSeraphim opened this issue on 05/14/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/974826352257691748



=== @ FireSeraphim 05/14/2022 00:11

This is a minor thing but I think having an inbetween of the spin attack and hurricane spin would be kinda nifty, hence the tornado spin item concept. With it being quicker to charge up than the hurricane spin but only have like maybe 5 or so spins in comparison to the Hurricane Spin's 20 spins

=== @arceusplayer11 (discord: Deedee) 05/14/2022 00:30

I suppose a 3rd level of charge could be doable

=== @ P-Tux7 05/14/2022 01:57

the things i'd really like to see improved in charged attacks is
1. flash cset for the colourblind
2. a rule or item setting to make it not use the cost until you actually release the button (aka you can't get hit and lose the cost before you've actually let the attack rip)
## ‚úÖüîíEnemies-Secrets no longer works (#1419)
@ Russ opened this issue on 05/14/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/975132144139632670



=== @ Russ 05/14/2022 20:27

If you use the Enemies->Secrets flag WITHOUT using Enemies->Secrets is Permanent, secrets no longer trigger. The secret sfx will play, but no combos flagged with secret flags actually change. It works correctly when Enemies->Secrets is Permanent is checked.
Not sure how this one happened, but it renders many quests unplayable and probably warrants a pretty quick fix

=== @EmilyV99 (discord: Emily) 05/14/2022 20:42

err, what??

![image](https://cdn.discordapp.com/attachments/975132144139632670/975136236438163516/unknown.png)
what's the state of the flag at the bottom here?

=== @ Russ 05/14/2022 20:44

Unchecked

=== @EmilyV99 (discord: Emily) 05/14/2022 20:45

And, without the 'enemies->secret is perm' it doesn't trigger anything at all?

=== @ Russ 05/14/2022 20:45

Checking it fixes it
Correct
It will play the secret sound effect, but it doesn't actually trigger flags 16-31

=== @EmilyV99 (discord: Emily) 05/14/2022 20:45


![image](https://cdn.discordapp.com/attachments/975132144139632670/975136867626410084/unknown.png)
so, `hidden_entrace()` here is the 'secret triggering function'
clearly something is wrong when `only16_31` is false.... but this was definitely working before...
Setting it to perm makes it trigger immediately, though?
because perm shouldn't affect that function at all....

=== @ Russ 05/14/2022 20:47

Setting "enemies->secret is permanent" causes secrets to correctly trigger when enemies die, yeah

=== @EmilyV99 (discord: Emily) 05/14/2022 20:47

that's weird as fuck
do you have a basic test quest?

=== @ Russ 05/14/2022 20:48

I can put one together real fast

=== @ Russ 05/14/2022 20:49


https://cdn.discordapp.com/attachments/975132144139632670/975137807993557022/SecretTest.qst

=== @EmilyV99 (discord: Emily) 05/14/2022 20:52

oh ffs
I see
there's another hardcoded check of those vars
that doesn't have the qr check

=== @ Russ 05/14/2022 20:52

Wonderful

=== @EmilyV99 (discord: Emily) 05/14/2022 20:54

nice catch
my tests missed this
It also specifically affects flags 16-31
other flags would trigger properly

=== @ Russ 05/14/2022 20:55

Welp...
Glad I caught it
Was going mad looking at this screen that I _knew_ was working right
And it had some combo cycling shenanigans so I _thought_ I must've broken something there

=== @EmilyV99 (discord: Emily) 05/14/2022 20:55


https://cdn.discordapp.com/attachments/975132144139632670/975139382359117824/zquest.exe
https://cdn.discordapp.com/attachments/975132144139632670/975139383026016276/zscript.exe
https://cdn.discordapp.com/attachments/975132144139632670/975139383520940063/zelda.exe
fixed, hopefully?

=== @ Russ 05/14/2022 20:57

Fixed indeed

=== @EmilyV99 (discord: Emily) 05/14/2022 21:03

(meta) thread name was changed: ‚úÖüîíEnemies-Secrets no longer works
## Quest rule to split visited state from spacebar map (#1420)
@ Moosh opened this issue on 05/15/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/975354554432512060



=== @ Moosh 05/15/2022 11:10

Currently only DMaps with the spacebar map enabled have functioning ST_VISITED. This is dumb and arbitrary. This was always dumb and arbitrary. Can there be a behavior change + compat rule for this?

=== @ Moosh 05/15/2022 11:12

Technically this might be a bug report, I'm giving whoever coded spacebar map too much credit in thinking they did this on purpose. But yeah
## üíäüîìSoft lock with switch blocks (#1421)
@ Russ opened this issue on 05/15/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/975417968060137502



=== @ Russ 05/15/2022 15:22

Basically, if you set up switch blocks in just the right way, you can soft lock yourself by walking off them

https://cdn.discordapp.com/attachments/975417968060137502/975418011517325322/SwitchTest.qst
Here's an exampl quest to show it
Walk directly upright from the start and you'll see what I mean
Essentially, the bug happens when you have switch blocks you can walk on top of set up in an upside down L formation
If you start on the bottom block, four pixels up from the grid, and walk up right, when you fall off, you'll be stuck
In the example linked, the block Link starts on is at position 64, 96
Link begins at position 64, 92
Walking up and right, he'll fall off and become trapped at 72, 84 and forced to F6
I'm sure that anything that gets him at position 72, 84 would do it. This was just the easiest way I could find to replicate it
The magic value here appears to be four pixels above the central positioning of the L

=== @EmilyV99 (discord: Emily) 05/17/2022 00:37

Thiiis.... is annoying as hell
since you don't have large hitbox on, it's checking y+12
as link's `center of collision`
which... happens to be 96, inside the next combo down, which isn't a switchblock
so it has you 'fall'
...but standard solidity code won't let you slip out of that corner.
Fucking FUN

=== @EmilyV99 (discord: Emily) 05/17/2022 00:40

@ Russ
https://cdn.discordapp.com/attachments/975417968060137502/975920660964605962/zelda.exe
This seems to fix it, not sure how it changes the general behavior though
(I'm just using y+8 regardless of bighitbox)
(meta) thread name was changed: üíäüîìSoft lock with switch blocks
## Tall Grass (Continuous) uses Undercombos instead of next combo in list. (#1422)
@ Orithan opened this issue on 05/16/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/975612097394257960



=== @ Orithan 05/16/2022 04:14

```
Tall Grass (Continuous)
Identical to Tall Grass, but if slashing this combo changes it to another slash-affected combo, then that combo will also change.
```
Instead it uses the screen's undercombo and does not apply the Continuous property to it.

=== @EmilyV99 (discord: Emily) 05/17/2022 00:43

...is this a new bug, or?
Technically, in that is says `Identical to Tall Grass`, that does use undercombo, and things that use undercombo.... can't really be continuous as they would be infinite loops of instant crash, this is behaving exactly as that documentation says it should
but, obviously that isn't what's intended....

=== @EmilyV99 (discord: Emily) 05/17/2022 00:48

Gonna need to know how old this bug is in order to fix it
because if it was in 2.50.2 it definitely will need a qr
## Enemy Editor Rewrite - Sounds Tab (#1423)
@ P-Tux7 opened this issue on 05/16/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/975617210074673183



=== @ P-Tux7 05/16/2022 04:34

A tab in the Enemy Editor for the various sounds the enemy makes

The essentials:
-Ambient sound (Z1 bosses)
-Shooting sound
-Hit sound
-Death sound

Nice to have but unessential:
-Weapon sound B (used for blocking weapons in most cases, or for the explosion in the case of Lit Bomb/Lit Super Bomb)
-Reflected weapon sound
-Split sound
-Break shield sound
-Blocked weapon sound
-Heal sound (for the "Heal" weapon defense)
-Transform sound
-Stun sound
-Spawn sound

=== @EmilyV99 (discord: Emily) 05/16/2022 04:59

@arceusplayer11 (discord: Deedee)

=== @ tacochopper 05/16/2022 15:56

Enemy falling sound wouldn't be a bad one to add either - although would it be easy to implement, or is that dependent on the pitfall combo type itself?

=== @ FireSeraphim 05/16/2022 20:41

Can I refer back to my earlier thread on this same exact subject? https://discord.com/channels/876899628556091432/900577849281503292
## ‚úÖüîí[ZQ] Item override blank on subscreen (#1424)
@ NightmareJames opened this issue on 05/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/975718062319890442



=== @ NightmareJames 05/16/2022 11:15

Also confirmed on Demo ZX
![image](https://cdn.discordapp.com/attachments/975718062319890442/975718065906020393/unknown.png)
![image](https://cdn.discordapp.com/attachments/975718062319890442/975718066207981598/unknown.png)

=== @EmilyV99 (discord: Emily) 05/17/2022 00:50

Would be good if you didn't say extra things
because, uh, being the same family does not seem to be part of the bug at all

=== @ NightmareJames 05/17/2022 01:02

I got the bug testing both the Whistle here and the Boomerang in Demo ZX, I guess it goes further than that

=== @EmilyV99 (discord: Emily) 05/17/2022 01:05

I have a very good idea where this broke
however NO idea WHY it broke

=== @EmilyV99 (discord: Emily) 05/17/2022 01:28

...OH
BLEH

=== @EmilyV99 (discord: Emily) 05/17/2022 01:30

So, usually
the expression `!game` is always true in zquest
because the `game` object does not exist
....and I made use of this in updating the subscreen code recently.
Fun fact, `game` object exists during subscreen code! So that doesn't work at all!
so, uh, that just completely broke overrides
should fix
https://cdn.discordapp.com/attachments/975718062319890442/975933594163875910/zelda.exe
https://cdn.discordapp.com/attachments/975718062319890442/975933594860138526/zquest.exe
(meta) thread name was changed: ‚úÖüîí[ZQuest Only] When you set an item to override and same family, shows blank on subscreen
(meta) thread name was changed: ‚úÖüîí[ZQ] Item override blank on subscreen
## ‚ùåüîíCombo data - start animation on random frame (#1425)
@ Alucard648 opened this issue on 05/16/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/975794010218192976



=== @ Alucard648 05/16/2022 16:17

For animated decorations so they don`t sync up.

=== @EmilyV99 (discord: Emily) 05/16/2022 16:22

Well, the same combo ID will always be synced
no matter what
Separate combos on the screen.... don't actually animate
how combos work is
each COMBO ID in the WHOLE QUEST animates
multiple combos of the same ID makes no difference, they reference the same timer and frame info as each other

=== @ cbailey78 05/16/2022 16:56

I think it should be to animate at random frames within a specified number of frames.  Have it a checkbox option in the combo editor.

=== @EmilyV99 (discord: Emily) 05/16/2022 17:01

care to actually elaborate on that?

=== @ vlamart 05/16/2022 18:56

I'm assuming like a "Randomize Start Frame" flag (not start tile) and/or being able to specifically set which frame the animation starts on (again, not starting tile). I'm guessing the general idea is to make different variations of a 4 frame animation, without having to setup every variation in the tile page. I had a similar request with using negative numbers in the A.frames as to move backwards in the tile page (like for opening and closing door animations)

=== @ vlamart 05/16/2022 18:58

A.Delay like in items would be neat for combos too

=== @ Tsunami Tommy Reload the Shotty 05/16/2022 20:44

Personally, to emulate this randomized behavior, I just relegate my animation data to combo cycling pairs of identical animation sets. 

I.e. if you have a torch with four frames of animation, I'd copy each of those four tiles next to itself to go from 1234 to 11223344, and make the "1" tiles animate for two frames then cycle into the "2" combo, which is two frames, etc. 

 So I'd have four combos
instead of just one combo, and I can put down any of the four combos I want, wherever I want.
And they'd all animate separately but similarly.

=== @EmilyV99 (discord: Emily) 05/16/2022 20:52

^
Do you even need the duplicate tiles?
Does a 1-frame animation not work?

=== @ Tsunami Tommy Reload the Shotty 05/16/2022 20:56

I can try that real quick, probably.

=== @ vlamart 05/16/2022 21:05

(replying to @EmilyV99 (discord: Emily) "Does a 1-frame animation not‚Ä¶"): For combo cycling, yes, or at least should. The default tileset uses 1 frame animation for cycling a "weapon cooldown (block all)" in the crystal switches

=== @EmilyV99 (discord: Emily) 05/16/2022 21:07

(replying to @ vlamart "For combo cycling, yes, or at‚Ä¶"): Ah, good job past me!

=== @ Tsunami Tommy Reload the Shotty 05/16/2022 21:10

Yep, one-combo animation including a "Next" combo transition doesn't crash the quest or not animate.  Good good.  üëç

=== @ vlamart 05/16/2022 21:28

(replying to @ Tsunami Tommy Reload the Shotty "Personally, to emulate this r‚Ä¶"): I like this now that there is 1 frame animation, dope!!

=== @ Tsunami Tommy Reload the Shotty 05/16/2022 21:29

The thanks will go to Emily, yes.  GG, past Emily.  <a:thumbsup:819342605665566822>

=== @EmilyV99 (discord: Emily) 05/22/2022 18:52

(meta) thread name was changed: ‚ùåüîíCombo data - start animation on random frame
## ‚úÖüîíLoading First Quest cannot find the quest file (#1426)
@ Deathrider opened this issue on 05/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/975907103887724545



=== @ Deathrider 05/16/2022 23:46

With Alpha 106/107 Build 61 on a fresh launch attempting to create a new safe file and launch the first quest, it gives a "file not found" error

Issue demonstrated here: https://youtu.be/1zGVd65vfPg?t=675

=== @EmilyV99 (discord: Emily) 05/17/2022 00:29

....doesn't happen to me
enter name, hit OK without selecting anything, it works

=== @EmilyV99 (discord: Emily) 05/17/2022 00:30

OH
It only happens if you hit browse then cancel
first
...pfft, I see what I fixed wrong last time
should be fixed
(meta) thread name was changed: ‚úÖüîíLoading First Quest cannot find the quest file
The problem here is mostly because of one thing
Normally, the custom quest dialog doesn't do 1st.qst for you
it would have a blank box, and to do 1st you'd just cancel
I wanted to have it autofill the quest there
...but if I just filled it normally, then hitting "browse" would start in the modules folder instead of in the main zc folder. So I had to do a bit of *magic*, which I clearly didn't quite have right

=== @ Deathrider 05/17/2022 00:46

ahh
## Enemy Flag - Swap Weapon Levels (#1427)
@ P-Tux7 opened this issue on 05/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/975968586357166080



=== @ P-Tux7 05/17/2022 03:50

i.e. swap an Aquamentus' fireballs to Boss or a Manhandla's fireballs to Blockable. Highly versatile and allows for buffing Walking Enemies, Wizzrobes, and Aquamentus, while nerfing the other Z1 bosses. Also great for statue shooters (which would go great with custom enemy-spawner combos)

=== @ P-Tux7 05/17/2022 03:52

Tomorrow I'll upload the 1 dungeon example quest I made for James24 that features Emily's EWeapon script she made for it. The balance is a little out of whack but if you cheat in a Gold Ring it shows the potential of this request to make enemies a lot more versatile, and that demo doesn't even get into most of the nerfing potential yet
## Enemy flag - EWeapon can break Link`s shield or items. (#1428)
@ Alucard648 opened this issue on 05/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/976075977941741618



=== @ Alucard648 05/17/2022 10:57

Title says all.

=== @ vlamart 05/17/2022 11:00

Neato, burning deku shield

=== @ P-Tux7 05/17/2022 14:25

aren't there also burning keese that can break it by touch?

=== @ vlamart 05/17/2022 14:37

Oh that's neat, I didn't know that. Is that just the enemy touch-eat effect? Also, I'm guess this request is specifically for things like enemy projectiles and such
## ‚úÖüîíZCL - Option to have it not ask if we're sure we want to quit. (#1429)
@ Tsunami Tommy Reload the Shotty opened this issue on 05/17/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/976179277219393626



=== @ Tsunami Tommy Reload the Shotty 05/17/2022 17:47

Because I'm always sure that I want to close ZCL.  I really don't just sit there having second thoughts.  I promise.

If I do accidentally close ZCL and I still wanted to use it, I can just reopen it again.  Due to some fantastic coding, it opens -very- quickly.  Hat's off on that one.  Seriously.  

.. and if I can't reopen it, then that's a bug and a separate issue.  

I love the protectiveness that the new ZCL offers, but I'm just not sure if it really needs to ask us if we're sure if we want to close ZCL.

=== @TheBlueTophat (discord: Coolgamer012345) 05/17/2022 17:49

I agree.

=== @ tim 05/17/2022 17:57

ZCL doesnt really have that crucial of data to need a sanity check

=== @TheBlueTophat (discord: Coolgamer012345) 05/17/2022 17:59

I will say, it might be odd for it to close immediately if you use `esc`
w/o a sanity check
but if it's that big of a deal, being able to use esc to close it couldbe its own option

=== @ Tsunami Tommy Reload the Shotty 05/17/2022 18:00

Both Alt+F4 and Escape currently still ask if it's okay to exit.  

I feel so darn _protected_ right now.
I just had to check because I never really tried them in a way that I would remember what they did, specifically.
I have ZC 2.55 Alpha 106 on my office workstation.  _Don't tell anyone._

=== @TheBlueTophat (discord: Coolgamer012345) 05/17/2022 18:01

If I had ZC on my work computer I wouldn't tell anyone either

=== @ tim 05/17/2022 18:03

hes the tech guy :p

=== @ Tsunami Tommy Reload the Shotty 05/17/2022 18:04

We're all the tech guys back here.
In 2022, everyone is a tech guy.

=== @ cbailey78 05/19/2022 02:58

"Really want to quit" Yes "Are you sure?" Yes "Are you absolutely positive you wanna quit this program?" Yes "So, you're bored already with this wonderful program and just wanna quit?" Yes "You wanna quit and go back to your sorry boring everyday life" Yes *finally exits*

=== @EmilyV99 (discord: Emily) 05/22/2022 18:51

removed warning
(meta) thread name was changed: ‚úÖüîíZCL - Option to have it not ask if we're sure we want to quit.
## ‚ùåüîíplayer and creator taskbar icons collapse under pinned zlauncher (#1430)
@ tim opened this issue on 05/18/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/976301749847597096



=== @ tim 05/18/2022 01:54

title
only happens for me if i load them through zlaunch - does not happen if loaded outside
windows 11
confirmed in w10 also

=== @EmilyV99 (discord: Emily) 05/18/2022 03:36

Not a chance anything can be done about this on the zc side, it's windows shit
(meta) thread name was changed: ‚ùåüîíplayer and creator taskbar icons collapse under pinned zlauncher
(Keep in mind that you can make threads in, like, [#dev-discussion](https://discord.com/channels/876899628556091432/876908472728453161) for things that aren't zc bugs)
## lweapon-Level not affecting enemy damage taken (#1431)
@ Moosh opened this issue on 05/19/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/976695187076165632



=== @ Moosh 05/19/2022 03:57

When writing to lweapon->Level with a script, enemies damaged by power 0 weapons do not take damage equal to `Level * 2` like I would expect. Instead they take 1 damage. I'm able to write to the value and read the correct result, so it's not read only, the damage calculations just don't seem to care.

https://cdn.discordapp.com/attachments/976695187076165632/976695271041929286/WeaponLevel.qst

=== @ Moosh 05/19/2022 04:01

Same deal if I modify level on an instance of an existing item such as magic boomerang, it will continue to deal whatever damage it's set to in the editor.

=== @EmilyV99 (discord: Emily) 05/22/2022 18:46

@arceusplayer11 (discord: Deedee)
## Re-Used Bush FFC's Don't Respond to Scripted Swords (#1432)
@ mitchfork opened this issue on 05/19/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/976887183518625883



=== @ mitchfork 05/19/2022 16:40

This is an unhinged bug unearthed by doing some frankly irresponsible shit but I do think it's a real bug

If you have a "Bush->Next" FFC on the screen, it reacts to scripted weapons with "lweapon->Weapon = LW_SWORD" and goes to the next combo normally

If you then reset the FFC->Data to the bush combo, it will NOT react to scripted weapons with "lweapon->Weapon = LW_SWORD" but WILL react to a normal sword item
Can provide a test quest if needed

=== @ aslion 05/19/2022 16:53

I wanna pop in and add that FFC Bush->Next combos seem to have weird behavior in general, sometimes the dropped items and leaf animations will spawn up to a tile over from where the bush was cut. Can create a separate bug report if needed

=== @ aslion 05/20/2022 12:54

also fwiw Tall Grass->Next & Slash->Next combos have the same issue as what mitch described

=== @ aslion 05/20/2022 12:58

also tested regular Bush and Flower, same

=== @ aslion 05/20/2022 13:00

Same thing with Pound combos too changing the scripted weapon to LW_HAMMER

=== @EmilyV99 (discord: Emily) 05/22/2022 18:44

@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 05/22/2022 18:45

`ffcgrid`
## Bigger Screenshot Options (#1433)
@ Majora opened this issue on 05/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/977503193690955786



=== @ Majora 05/21/2022 09:28

Dropdown box listing numbers 1 through like 4 (or up to 9 for giggles) for the scale of screenshots. 

Located under Etc. -> Options -> Tab 2

Or tab 4, now that I look at it. 

I know GUI stuff is ass so a .cfg field would also work.
## More level-specific items. (#1434)
@ Alucard648 opened this issue on 05/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/977644862239281182



=== @ Alucard648 05/21/2022 18:51

Title says all. Stone beaks, L2 maps, custom level specific items and more.
https://www.purezc.net/index.php?page=scripts&id=416

=== @EmilyV99 (discord: Emily) 05/22/2022 19:01

....
Sooo
init data does not store level items the same way
and doesn't HAVE that extra space to be used
.....so it would need to be added. BLEHG.
## ‚úÖüîíHolding z in tile page screen does a weird re-render (#1435)
@connorjclark (discord: connorclark) opened this issue on 05/21/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/977668082036252682



=== @connorjclark (discord: connorclark) 05/21/2022 20:23

.

=== @connorjclark (discord: connorclark) 05/21/2022 20:26


![image](https://cdn.discordapp.com/attachments/977668082036252682/977668683986010162/ezgif-3-3ed26d3278.gif)

=== @EmilyV99 (discord: Emily) 05/21/2022 20:32


![image](https://cdn.discordapp.com/attachments/977668082036252682/977670279662829628/unknown.png)
it also takes screenshots

=== @connorjclark (discord: connorclark) 05/21/2022 20:36

lol

=== @EmilyV99 (discord: Emily) 05/22/2022 18:39


https://cdn.discordapp.com/attachments/977668082036252682/978004268680347698/zquest.exe
https://cdn.discordapp.com/attachments/977668082036252682/978004271775776818/zscript.exe
https://cdn.discordapp.com/attachments/977668082036252682/978004272283283566/zelda.exe
@connorjclark (discord: connorclark) Seems to be fixed, and it ALSO won't take a fuckton of screenshots when you hold down the button anymore (it should take only 1, MAYBE sometimes 2, but not 50)
(meta) thread name was changed: ‚úÖüîíHolding z in tile page screen does a weird re-render

=== @connorjclark (discord: connorclark) 05/22/2022 20:10

Yup looks good now, thanks
## ‚úÖüîí(Trivial) - Change string to strings in the strings editor. (#1436)
@ Tsunami Tommy Reload the Shotty opened this issue on 05/21/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/977687184834449498



=== @ Tsunami Tommy Reload the Shotty 05/21/2022 21:39

I was just trying to set up a Signpost that uses the room's String as its string.  I hit 's' to set the room's string to string #1, then hit "done."  But it didn't work in-game.

Then I went into the Room Data pane and was able to set the string there, and that worked fine.

This isn't a bug.  This is just idiot-proofing the Strings pane to not look like we're setting the **room's** string rather than editing any string. 

This would only affect the "s" window's header bar that says "Edit Message string"  to turn it into "Edit Message strings"  That's all.

=== @ Tsunami Tommy Reload the Shotty 05/21/2022 21:41

---
The only reason this is happening is because we used to assign strings to a room with "s" but now it brings up the Strings editor, which is good.

=== @EmilyV99 (discord: Emily) 05/21/2022 21:42

I... am confused as to how you thought the string editor was assigning a single room's string, and doubt a single `s` in a title would make that much of a difference....
but, on the other hand, changing 1 letter is such a small level of work, that there's no reason NOT to do it....

=== @ Tsunami Tommy Reload the Shotty 05/21/2022 21:42

Like I said:  It's just idiot-proofing it.  I volunteered to be that idiot when I started using the program.
If there's an idiot trap I can fall into, I'm pretty good at finding them.
Thanks for the change.  üëç

=== @EmilyV99 (discord: Emily) 05/21/2022 21:43

(meta) thread name was changed: ‚úÖüîí(Trivial) - Change string to strings in the strings editor.
## Init Data tooltips (#1437)
@ P-Tux7 opened this issue on 05/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/977688995473539092



=== @ P-Tux7 05/21/2022 21:47

Because it might be confusing to new users as to what M/C/B/Key means. I also would suggest to change Key to Keys to emphasize that it's the multiple level-specific keys and not the single boss key.

=== @ vlamart 05/22/2022 02:32

Also adding "?" to the variables (mostly just for the dither types)
## ‚ùåüîíAnimation Bug -Link's Falling down a hole anim. plays twice- (#1438)
@ FireSeraphim opened this issue on 05/21/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/977720139321589781



=== @ FireSeraphim 05/21/2022 23:50

I'm surprised this hasn't been reported yet but I've been running into a peculiar bug where link's falling down a hole animation plays twice when falling down a hole.

=== @EmilyV99 (discord: Emily) 05/22/2022 01:04

....what??

=== @ FireSeraphim 05/22/2022 01:36

Yeah. I've been noticing it on my end especially when falling down bottomless pits from certain directions

=== @EmilyV99 (discord: Emily) 05/22/2022 01:36

What animation style (can you test them all?)

=== @ FireSeraphim 05/22/2022 01:49

I'm using the BS Animation Style for my link and I have just finished flighing myself into a hole in multiple directions, it plays fine when you're falling into a hole from the west (right) but plays twice when falling into a hole from the east (left), north (down) and south (up)

=== @ FireSeraphim 05/22/2022 01:51

curiously enough, this glitch actually also shows up in the player sprite editor as well.

=== @ Moosh 05/22/2022 02:54

Falling down pits has an unusual number of frames across all animation styles. So could it be that instead of a 7(?) frame animation you're playing a 4 frame animation multiple times or something?

=== @ Moosh 05/22/2022 02:57

Which could also explain it being different for different directions because some directions would hit blank tiles

=== @EmilyV99 (discord: Emily) 05/22/2022 03:20

@ Moosh that, in fact, would be exactly the issue
@ FireSeraphim you have the tiles set up wrong
falling is 7 frames

=== @EmilyV99 (discord: Emily) 05/22/2022 03:21

it's "playing twice" because it's doing the 4 tiles for that dir, then 3 tiles from the next dir

=== @ FireSeraphim 05/22/2022 03:21

Strange, I was under the impression it was 3-frames since the right facing one seems to play correctly. I think an option to force a 3-frame falling animation for link would be ideal.

=== @EmilyV99 (discord: Emily) 05/22/2022 03:21

and facing right doesn't play twice, because there isn't another dir after right, so those are blank tiles

![image](https://cdn.discordapp.com/attachments/977720139321589781/977773316163141642/unknown.png)
Right is playing those 7 tiles

=== @ Moosh 05/22/2022 03:22

So the way to do 3 frames is...yeah that

=== @EmilyV99 (discord: Emily) 05/22/2022 03:22

Now, since you don't actually have any difference between different directions here, you could just set all 4 dirs to use the one set of 7 tiles

![image](https://cdn.discordapp.com/attachments/977720139321589781/977773730052841493/unknown.png)
these are what it's playing for each dir
clearly, overlapping
(meta) thread name was changed: ‚ùåüîíAnimation Bug -Link's Falling down a hole anim. plays twice-

=== @ FireSeraphim 05/22/2022 03:24

I see.

=== @EmilyV99 (discord: Emily) 05/22/2022 03:25


![image](https://cdn.discordapp.com/attachments/977720139321589781/977774118604783677/unknown.png)
this would fix it, where all 4 dirs are set to the same tile
or, you could add more frames to the animation to stretch it out
Falling takes 70 frames, with aspeed of 10
thus 7 tiles
## Custom Speed Slowwalk Combos (#1439)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 05/22/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/977971750782517388



=== @TheBlueTophat (discord: Coolgamer012345) 05/22/2022 16:30

Would be cool if there was an option to specify the speed of slow walk combos, or alternatively a new combo type that does that. I see the benefits of both having the speed change be multiplicative versus a specific value, so it may be worth having both be an option. This would also allow for "fast-walk" combos, which might have utility in puzzles or combat.

=== @ vlamart 05/22/2022 17:39

This is in that layered combo test .txt file I whipped up, should I make all the requests in there separate feature-requests too, @EmilyV99 (discord: EmilyV)?

=== @TheBlueTophat (discord: Coolgamer012345) 05/22/2022 17:41

What are you referrin to out of curiosity? I'm not familiar with the doc

=== @ vlamart 05/22/2022 17:48

I just did a little test to see what combo types work on the first 3 layers and ffcs, that doc is the results, and includes some feature requests at the end, mostly QOL stuff

=== @EmilyV99 (discord: Emily) 05/22/2022 18:59

I'll probably add `Custom Slow` flag for new behavior
and an `Additive` and `Percent Multiplier` value
....movement shit is not a fun time though, so will need the energy to do that shit

=== @ P-Tux7 05/25/2022 20:49

i agree with this suggestion

=== @ Moosh 08/13/2022 08:21

@arceusplayer11 (discord: Deedee) told me to bump this
## ‚úÖüîíGrabbing Tiles from Another Quest Copies Over it's ZInfo (#1440)
@ HeroOfFireZC opened this issue on 05/22/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/977977549223231548



=== @ HeroOfFireZC 05/22/2022 16:53

If you use the tile grabbing function to grab tiles from another quest, it sets the zInfo (or at least the Itemclass Names) to those of the quest grabbed from.

=== @EmilyV99 (discord: Emily) 05/22/2022 16:58

So what baffles me here
most of this type of thing uses `keepdata` bool
to determine if it needs to just skip data or actually keep it
....buuuut
zinfo is based on the quest header
.....which ALWAYS has keepdata to true?
Which confuses me, as how the fuck does that not also overwrite your header info when grabbing tiles?
...oh, wait, I see
fek
....that isn't getting to the actual global header, but a local copy
which copies to the main one conditionally, much later in the function

=== @EmilyV99 (discord: Emily) 05/22/2022 17:57

@ HeroOfFireZC
https://cdn.discordapp.com/attachments/977977549223231548/977993565630259250/zquest.exe
https://cdn.discordapp.com/attachments/977977549223231548/977993566251012176/zscript.exe
https://cdn.discordapp.com/attachments/977977549223231548/977993566846611526/zelda.exe

=== @ HeroOfFireZC 05/22/2022 18:04

Not fixed.

=== @ HeroOfFireZC 05/22/2022 18:05

(can confirm they are different exes, as a different bug was fixed)

=== @EmilyV99 (discord: Emily) 05/22/2022 18:12

....oh, ffs, I see
blehg
this is a tangled mess
a complete tangled bullshit mess

=== @EmilyV99 (discord: Emily) 05/22/2022 18:15

....and that should be a very clean solution to the tangled mess?
if it ever finishes building
@ HeroOfFireZC
https://cdn.discordapp.com/attachments/977977549223231548/977998138952531978/zquest.exe

=== @ HeroOfFireZC 05/22/2022 18:25

Okay, now it seems fixed.

=== @EmilyV99 (discord: Emily) 05/22/2022 18:26

Turns out, the `header` info is read when you grab
but it reads only into a temp thing, apparently, instead of the actual main header object
zinfo was lumped in with header, but, it read to the main thing, as no temp was passed
adding a separate skip flag... allows it to grab the header but NOT zinfo
(meta) thread name was changed: ‚úÖüîíGrabbing Tiles from Another Quest Copies Over it's ZInfo
## Infinite Arrows glitch in AltrusW0nder's Myst Isle (#1441)
@ FireSeraphim opened this issue on 05/22/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/978074610941689897



=== @ FireSeraphim 05/22/2022 23:19

So I was replaying Myst Isle in the latest build of ZC and for some reason I have infinite arrows, which technically shouldn't be happening. Although to be fair it's probably because it's an earlier 2.50 quest

=== @EmilyV99 (discord: Emily) 05/23/2022 00:45

Qst?

=== @ FireSeraphim 05/23/2022 01:28

https://www.purezc.net/index.php?page=quests&id=368
This one, exactly

=== @ FireSeraphim 05/23/2022 01:56

also discovered another glitch in this quest.
![image](https://cdn.discordapp.com/attachments/978074610941689897/978114075856879626/zc_screen00002.png)

=== @EmilyV99 (discord: Emily) 05/23/2022 02:02

@arceusplayer11 (discord: Deedee)

=== @ Moosh 05/23/2022 03:18

If this is the quest I'm thinking of, the creator may have loaded it in a wrong version at some point. I recall encountering some weird bugs in 2.50 as well and that was ultimately the cause, the file was a wee bit corrupted. Dunno if it was ever fixed

=== @EmilyV99 (discord: Emily) 05/23/2022 03:23

If it does this in 2.50.2, nothing to be done here

=== @ FireSeraphim 05/23/2022 08:21

I recall this quest working just fine in 2.53
## occasionally pressing use item (A, B, X, Y) button crashes Zelda.exe (#1442)
@ FireSeraphim opened this issue on 05/22/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/978079742718795816



=== @ FireSeraphim 05/22/2022 23:39

I think it's a bit of a lingering glitch honestly, sometime when I go to bomb a wall in my quest it causes ZC to crash. I also notice this happening occasionally when I go to use the sword outside of the A button. I think it's a bit of lingering hardcoded behavior issues.

=== @ FireSeraphim 05/22/2022 23:40

I am not going to be available for an hour or two due to some housework I need to do.

=== @EmilyV99 (discord: Emily) 05/23/2022 00:46

....the fuck
@arceusplayer11 (discord: Deedee)

=== @ P-Tux7 05/23/2022 02:54

Can you please DM your quest to the developers so they can look at it and the crash

=== @ FireSeraphim 05/23/2022 09:29

I think I found a way to somewhat consistently trigger the crash, you need to create a save file and make sure A, B, and Y are enabled as re-assignable item buttons (basically the same setup as my wip) and make sure to have a few inventory items in your inventory before making a save, then restart ZC and load the save file. Then press a after loading the file.

=== @connorjclark (discord: connorclark) 09/04/2022 03:13

Can you do that setup again with a recent nightly? So it'll be sent to our crash reporting.
## (Tile Editor) - Drag Fill bucket across pixels just like sword tool. (#1443)
@ Tsunami Tommy Reload the Shotty opened this issue on 05/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/978228197290287155



=== @ Tsunami Tommy Reload the Shotty 05/23/2022 09:29

I have no idea how processor-intensive this will be, so definitely feel free to disregard if it's outlandish or difficult!

Currently, in the tile editor, we can click and drag the sword cursor to place/edit individual pixels as we move the mouse over them.  

Imagine if we could do the same with the fill bucket tool.  We could bulk erase so many things at once.  But this would probably be very cpu-intensive or something.

Would it be possible to just cut the amount of frames it "checks" for that tool in half to save resources or something?

I just figure this ability would make it so much faster to modify tiles or erase large portions of a tile without needing to switch tools to the Hookshot to select a rectangle, then switch to the red wand tool.

=== @EmilyV99 (discord: Emily) 05/23/2022 10:52

....attempting this would probably instantly make you hit one frame per hour or something stupid
unless you were to cut frames for checking, yeah
but that's also not really an easy thing to do
and have it like
still work the way you'd want

=== @ Tsunami Tommy Reload the Shotty 05/23/2022 13:25

As expected.  And there's no way to make it perform one action per 5 frames or something instead of checking every proverbial frame, right?   Still, I appreciate the feedback.

=== @TheBlueTophat (discord: Coolgamer012345) 05/23/2022 17:23

Why would this hurt performance to any significant degree?

=== @ Tsunami Tommy Reload the Shotty 05/23/2022 18:15

Not that I'd know or anything, but common sense dictates that with every click, it's checking for every pixel-block next to the current clicked one, and every one next to that, and next to that, and that, and that, and so on.  A flood operation must be quite a significant one.  Now imagine holding in the button, doing that operation every proverbial frame.

=== @TheBlueTophat (discord: Coolgamer012345) 05/23/2022 18:24

256 checks a second for a program that runs capped at 60 fps
in a program made in C++(?)
not to mention the fact that the fill tool already works as-is, it would just have to not stop filling once you touched a new color

=== @TheBlueTophat (discord: Coolgamer012345) 05/23/2022 18:26

if efficiency was such a big concern it could keep a cache of the previous color the mouse was over and only do the fill operation if the color the mouse is currently over is different to that as well as the currently selected mouse color

=== @EmilyV99 (discord: Emily) 05/23/2022 21:20

... That makes too much sense to think of!
## View - Hide FFCs in ZQuest (#1444)
@ Alucard648 opened this issue on 05/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/978397816399491173



=== @ Alucard648 05/23/2022 20:43

Title says all, drawing on layer 0 under precisely placed FFCs is frustrating.

=== @TheBlueTophat (discord: Coolgamer012345) 05/23/2022 20:49

AGREED

=== @ Tsunami Tommy Reload the Shotty 05/23/2022 20:52

I wonder if a hotkey could be [Shift]+[F7]
## Hookshot Enhancements (#1445)
@ Majora opened this issue on 05/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/978822636563992586



=== @ Majora 05/25/2022 00:51

Nothing too big hopefully but imma split each thing into its own message on this thread:

=== @ Majora 05/25/2022 00:53

1) An extra SFX slot for when the hook hits a hookshot combo (THUNK!) <https://noproblo.dayjo.org/ZeldaSounds/OOT/OOT_Hookshot_Target.wav>
2) An extra SFX slot for when it hits a combo that isn't a hookshot combo (clonk!) <https://noproblo.dayjo.org/ZeldaSounds/OOT/OOT_Sword_Clang2.wav>

=== @ Majora 05/25/2022 00:57

3) Strafing with the hookshot, which happens by pressing and holding the hookshot button. Behaves similarly to charging your sword and you can't turn around until releasing the button and the hookshot fires. This behavior toggled by item editor checkbox (or attribyte if there's no spare unused checkboxes)
(alright maybe I lied a little bit and that's a big one, but mostly I want the THUNK! and CLONK!)

=== @ Majora 05/25/2022 01:00

3a) An attribyte field to specify frame delay of hookshot button holding before arming hookshot and going into strafing mode (turbo optional; a delay of 30-45 frames internally otherwise)

=== @ Majora 05/25/2022 01:01

4) an extra SFX slot for the arming sound that signifies strafing mode is a-go <https://noproblo.dayjo.org/ZeldaSounds/OOT/OOT_Hookshot_Set.wav>
and that's it I promise. gonna attach links to the specific SFX I mean to maybe illustrate things better.

=== @ Alucard648 05/25/2022 03:15

5) Hookshot swinging in sideview areas, ala Indiana Jones and Super Castlevania 4.

=== @ Majora 05/25/2022 03:50

wouldn't that just be the grappling hook from Wind Waker. and something like swinging in ZC seems herculean

=== @ Majora 07/19/2022 01:21

bumping this just in the hopes that at least some part of this is at all doable. at least the extra SFX slots! <:utterdismay:947060167227342888>

=== @EmilyV99 (discord: Emily) 07/19/2022 01:21

items have 2 sfx slots, so more than 2 sfx on items would require an expansion
and strafing shit sounds like a nightmare
hookshots, in general, are a tangled mess of spaghetti bullshit that should never be touched

=== @ Majora 07/19/2022 01:23

Fair enough
<:sadge:811695648063357028>
## ‚ùåMaking the ``hold up item`` sound item specific instead of room specific (#1446)
@ FireSeraphim opened this issue on 05/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/978830772817526814



=== @ FireSeraphim 05/25/2022 01:24

It's a simple thing but one I feel would be more convenient for quest maker, especially if they don't want to keep editing the "hold up item" sound in certain rooms when the item is not a major item. I have a seperate minor hold item sound I've been using specifically for heart container pieces and magic containers

=== @ FireSeraphim 07/22/2022 09:43

bump

=== @EmilyV99 (discord: Emily) 07/22/2022 09:51

(meta) thread name was changed: ‚ùåMaking the ``hold up item`` sound item specific instead of room specific
## Default module item palettes (#1447)
@ Moosh opened this issue on 05/26/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/979173842759061544



=== @ Moosh 05/26/2022 00:07

I know modules are kinda trash and mostly unsupported, but somebody was asking about changing the title screen graphics and so I took a look at the "default" one for reference on what modules can actually change. There's some quirks with the title screen fadeout but far more noticeable, all the items in the intro scroll draw in the wrong palette. They appear to be using the Zelda 1 palette instead of Koten. Unsure if this is a case of Zoria fucked up and forgot to assign the right palette or Zoria _really_ fucked up and didn't remove some hardcodes.

=== @EmilyV99 (discord: Emily) 05/26/2022 00:58

Is koten loaded into the qst.dat the module uses?

=== @ Moosh 05/26/2022 01:00

yeah
## View - Translucent Combo Flags in ZQuest (#1448)
@ Alucard648 opened this issue on 05/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/979181590334816256



=== @ Alucard648 05/26/2022 00:38

Not being able to see what lies underneath flags during flag placement is very annoying.
## Upgraded Magic Books display wrong sprite (latest nightly) (#1449)
@ NightmareJames opened this issue on 05/26/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/979340841321648218



=== @ NightmareJames 05/26/2022 11:10

They seem to display the original Magic Book sprite instead of the upgraded, in both Prototype 8 and Demo ZX, they should display a blue flame after collecting them, instead they show red.

![image](https://cdn.discordapp.com/attachments/979340841321648218/979340941498384414/zc_screen00011.png)

=== @ P-Tux7 05/26/2022 12:58

Are they still making a second wand sound when the flame happens?

=== @ NightmareJames 05/26/2022 13:10

Yes, that is fortunately still OK

=== @connorjclark (discord: connorclark) 09/04/2022 03:11

What map/screen is this, and any idea what alpha this started? (this information will help me debug when I have time to look here)
## ‚ùåüîíUse palletes per screen function - for map maker (#1450)
@ bigjoe opened this issue on 05/26/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/979350730106351666



=== @ bigjoe 05/26/2022 11:50

How hard would it be to have the internal map maker change palletes to the ZQ editor pallete setting per screen? It would be great for speeding up the process of putting together a preview map.

=== @EmilyV99 (discord: Emily) 05/26/2022 15:51

100% impossible
>256 colors at once is completely impossible
(meta) thread name was changed: ‚ùåüîíUse palletes per screen function - for map maker

=== @ P-Tux7 05/27/2022 05:04

can zq output .bmps that are over 256 colours, though?

=== @EmilyV99 (discord: Emily) 05/27/2022 05:07

Not that I'm aware, no
Allegro limitations

=== @ P-Tux7 05/27/2022 05:08

ah dang

=== @EmilyV99 (discord: Emily) 05/27/2022 05:08

Theoretically it could if we completely went around allegro, but that would be such an absurd amount of work that it isn't remotely worth it

=== @ P-Tux7 05/27/2022 05:09

yeah i was thinking that maybe it could spit out like uh... an image of all the screens on a particular map with X screen palette, with the other screens being filled with transparency, do this with a new image for every screen palette on the map, and then overlay them to produce the full map image
it's just that that last step does require at least some level of truecolour processing capability

=== @EmilyV99 (discord: Emily) 05/27/2022 05:10

Exactly
That's the impossible part
...I wrote a script (posted it somewhere) that basically does the whole first part by teleporting you and screenshotting every screen
## GetPixel() not *10000 (#1451)
@ Moosh opened this issue on 05/26/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/979363852334555136



=== @ Moosh 05/26/2022 12:42

Okay so...Zoria wrote several scripts when he added this feature making use of it and demonstrating its potential for Z3 scrolling collisions, yeah? Ergo he used the feature. Ergo he knew he forgot the *10000 and just didn't give a shit. Really gets your noggin a joggin
(meta) thread name was changed: GetPixel() not *10000

=== @connorjclark (discord: connorclark) 09/04/2022 03:00

Is this still an issue?
## ‚úÖüîíWriting to Dir every frame resets walking animation (#1452)
@ Majora opened this issue on 05/26/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/979457861073649756



=== @ Majora 05/26/2022 18:55

https://discord.com/channels/876899628556091432/878114935396257852/979456579336282123 

May 9th according to my ZQuest->About

Using 32x32 Hero Sprite mode
Using Z3 (Slow Walk) Animation mode
![image](https://cdn.discordapp.com/attachments/979457861073649756/979457866543014018/2022-05-26_11-48-57.mp4)
``combodata script faceDir
{
    void run(int dir)
    {
        while(true)
        {
            Waitdraw();
            if(Hero->Dir != dir && ComboAt(Hero->X+8, Hero->Y+8) == this->Pos)
                Hero->Dir = dir;
            Waitframe();
        }
    }
}``
This is the only script being used.

=== @ Majora 05/26/2022 18:59

here's my quest too, might as well
https://cdn.discordapp.com/attachments/979457861073649756/979458773817131019/StarOath_PR.qst
Map 2 - Screen 0x1E (30)

=== @EmilyV99 (discord: Emily) 05/26/2022 19:21

....for fucks
Writing dir
calls `reset_hookshot();`
which sets action to `none`

=== @ Majora 05/26/2022 19:22

incredible, lmao

=== @EmilyV99 (discord: Emily) 05/26/2022 19:41

try this? @ Majora

https://cdn.discordapp.com/attachments/979457861073649756/979469475181129798/zelda.exe
https://cdn.discordapp.com/attachments/979457861073649756/979469475655073862/zquest.exe

=== @ Majora 05/26/2022 19:49

on it

=== @ Majora 05/26/2022 19:53

it works properly now!
![image](https://cdn.discordapp.com/attachments/979457861073649756/979472330445168691/2022-05-26_12-51-35.mp4)

=== @EmilyV99 (discord: Emily) 05/26/2022 19:59

I just made it so that it doesn't set action to none if it's already walking
glad that worked

=== @EmilyV99 (discord: Emily) 05/26/2022 20:14

(meta) thread name was changed: ‚úÖüîíWriting to Dir every frame resets walking animation

=== @ bigjoe 05/26/2022 21:27

this gives me Graal vibes for some reason
## Eweapon Triggers Combo (#1453)
@ vlamart opened this issue on 05/27/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/979579213814325268



=== @ vlamart 05/27/2022 02:58

Adding the list of eweapons to the Triggers tab of the Combo editor (my idea is so that enemy fires, etc., also trigger certain combos instead of just Link's)

=== @EmilyV99 (discord: Emily) 06/10/2022 20:42

this makes sense
not that simple to add though

=== @ vlamart 07/17/2022 18:59

Bump
## Whimsical and Attack Ring Expansion (#1454)
@ P-Tux7 opened this issue on 05/27/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/979768137559986276



=== @ P-Tux7 05/27/2022 15:28

Flags for the Whimsical Ring to work for
-Swords
-Hammers
-Wand Melee
(When importing previous quests, all three flags are checked)

=== @ P-Tux7 05/27/2022 15:30

In Myst Isle the hammer's supposed to have boomerang-level power but the Critical Ring messes that up.

=== @ vlamart 05/27/2022 17:09

I remember requesting something like this for attack rings, it would be neato if all "stat rings" had flags for specific items

=== @ vlamart 05/27/2022 17:12

Or an attrib similar to the shield and blocking where only the sum of lweapons are affected

=== @ P-Tux7 05/27/2022 17:28

Attack Rings might be problematic - what items' attack do they increase? Critical Ring per-ring items only work because Critical Rings only affect three items to begin with, so there's enough flags to handle each one

=== @ vlamart 05/27/2022 17:30

You're right, I'm confusing lweapons with item classes

=== @EmilyV99 (discord: Emily) 05/27/2022 18:44

(replying to @ P-Tux7 "Attack Rings might be problem‚Ä¶"): the attack ring is literally a copy of the crit ring
they affect the same things

=== @ P-Tux7 05/27/2022 18:44

ah good
so it can apply to that then
(meta) thread name was changed: Whimsical and Attack Ring Expansion
## Leaving then re-entering NES dungeon unlocks doors (#1455)
@connorjclark (discord: connorclark) opened this issue on 05/29/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/980269477214171136



=== @connorjclark (discord: connorclark) 05/29/2022 00:40

quick test link: https://hoten.cc/zc/play/?quest=classic/1st.qst&dmap=0&screen=55 enter LVL1, exit, enter again
is this maybe b/c of cheat level 4?

=== @ Russ 05/29/2022 00:42

No, this is an intentional thing to recreate a Zelda 1 bug

=== @connorjclark (discord: connorclark) 05/29/2022 00:45

üòÆ

=== @connorjclark (discord: connorclark) 05/29/2022 00:47

weird https://gamefaqs.gamespot.com/boards/563433-the-legend-of-zelda/63821853

=== @ Russ 05/29/2022 00:48

Yeah. The mechanics are odd
Moosh recreated them for 7th... for some reason

=== @ tim 05/29/2022 00:52

yes this is an NES consistency

=== @EmilyV99 (discord: Emily) 05/29/2022 01:01

(replying to @connorjclark (discord: connorclark) "quick test link: https://hote‚Ä¶"): There is a script running that does this
IIRC
## ‚ùóüîìStrings in old quests not showing in ZQuest (#1456)
@connorjclark (discord: connorclark) opened this issue on 05/30/2022

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/980981288834048020



=== @connorjclark (discord: connorclark) 05/30/2022 23:49

Ex: when I load Hero of Dreams, the strings menu is just (None). When playing the quest, all the strings are present, so just a bug in the editor.

Saving/reloading in latest nightly doesn't change anything.

https://hoten.cc/zc/create/?quest=139/HeroOfDreams.qst

![image](https://cdn.discordapp.com/attachments/980981288834048020/980981363891118150/unknown.png)

=== @connorjclark (discord: connorclark) 05/30/2022 23:50

that qst file is from 2.10 build 1

=== @arceusplayer11 (discord: Deedee) 05/30/2022 23:51

@EmilyV99 (discord: EmilyV) I can't deal with any more string bullshit I'm sorry

=== @EmilyV99 (discord: Emily) 05/31/2022 05:04

what
the
FUUUUUUCK
(replying to @arceusplayer11 (discord: Deedee) "@EmilyV99 (discord: EmilyV) I can't‚Ä¶"): neither the fuck can i

=== @connorjclark (discord: connorclark) 06/14/2022 03:24

will look into this eventually

=== @connorjclark (discord: connorclark) 09/04/2022 03:15

(meta) thread name was changed: ‚ùóüîìStrings in old quests not showing in ZQuest
## Reflected Rock LWeapons do not run scripts (#1457)
@ Orithan opened this issue on 05/31/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/981049243877924934



=== @ Orithan 05/31/2022 04:19

Reflected Rock LWeapons (``LW_REFROCK``)  do not run scripts. They can be assigned a script but it won't run.

=== @ Orithan 05/31/2022 05:09

Other reflected LWeapons run scripts. This is specifically an issue with Reflected Rock.

=== @EmilyV99 (discord: Emily) 06/04/2022 20:20

fek
## ‚ùåüîí(QR) Improved Enemy Knockback (#1458)
@ P-Tux7 opened this issue on 05/31/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/981066560498192484



=== @ P-Tux7 05/31/2022 05:28

At the very least being able to hit Walking/Leever enemies at a perpendicular angle to their travel direction and they get knocked that way, like in BS Zelda. Would also make knocking enemies into water/pits more of a strategy, as well as a possible flag for the Active Shield

=== @EmilyV99 (discord: Emily) 05/31/2022 05:38

perpendicular knockback with engine enemies will make them able to clip into walls
unless we entirely rewrite all enemies
nothing to be done
(meta) thread name was changed: ‚ùåüîí(QR) Improved Enemy Knockback

=== @ P-Tux7 05/31/2022 16:54

I thought they had collision detection with solid combos though? When you knock them back normally

=== @ P-Tux7 05/31/2022 16:56

Also, all enemies have collision detection with "no enemies"-flagged combos, even diagonally-moving enemies

=== @EmilyV99 (discord: Emily) 05/31/2022 16:58

the problem is
if they start moving left
then they won't do another solidity check until they are one whole tile left
so
if you hit it PERPENDICULAR
you can hit it right next to a solid wall
in a direction it is moving
and it can walk right through it
because it already checked solidity before the knockback

=== @ P-Tux7 05/31/2022 17:00

Wait, how does the quarter-tile enemy solidity check bugfix work then?

=== @ P-Tux7 05/31/2022 17:01

Is it that they can only walk onto a combo whose ENTIRE bottom half is walkable? A combo with the left or right side being walkable but not the other would be counted as fully solid by them, even if they were knocked back into the walkable portion they wouldn't actually touch that part and act as though the whole thing was a wall?

=== @EmilyV99 (discord: Emily) 05/31/2022 17:04

it used to only check half the combo
not the whole combo
for some reason

=== @ P-Tux7 05/31/2022 17:04

yknow i'll check this in a little while and report back

=== @ P-Tux7 07/16/2022 05:26

@arceusplayer11 (discord: Deedee) would you be capable of doing this?

=== @arceusplayer11 (discord: Deedee) 07/16/2022 05:30

my solution to this is to just make afreeform walking enemy

=== @arceusplayer11 (discord: Deedee) 07/16/2022 05:32

the big thing is figuring out what values would be useful; random rate and etc don't really work as 16 big values when it's being checked every frame, and LttP enemies seem to instead move in ranges of frames before turning as opposed to tile-based movement

=== @ P-Tux7 07/16/2022 06:07

this would also entail either making a second leever class as well or putting leevers in that freeform walking enemy class
the thing is i don't mind the enemies being on the 16x16 grid... just that you can't knock them sideways (and then they auto snap back to the grid)
BS Zelda has this and it's very nice

=== @ P-Tux7 07/16/2022 06:09

still, thanks a ton for considering it
should make scriptless enemies a whole lot more fun to use
(i.e. most people aren't gonna make their own fun enemies like crucible quest lol)
## Need to Press Both Shifts, Controls, and Letter to Cheat (#1459)
@ P-Tux7 opened this issue on 05/31/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/981244891201949796



=== @ P-Tux7 05/31/2022 17:16

Supposedly you have to press one Shift, one Control, and the cheat hotkey at the same time to cheat. However, both me and another user have found that we have to press both Shifts and both Controls and the cheat hotkey at the same time. I didn't report it before because I thought it was a quirk with my keyboard (it's a laptop) but now I can see it's more wide-ranging.

=== @EmilyV99 (discord: Emily) 05/31/2022 17:39

?????
@ P-Tux7 screenshot your setup, please?
because, uhh, this does not occur for me
oh
wait
hmmm
only because I don't use the default
fun
fek

=== @EmilyV99 (discord: Emily) 05/31/2022 17:42

oh
who the fuck edited this last
there's a blatantly obvious typo
easy as hell fix
one `&&` becomes a `||`

=== @EmilyV99 (discord: Emily) 05/31/2022 17:44


![image](https://cdn.discordapp.com/attachments/981244891201949796/981251912550715462/unknown.png)
I was hoping to blame Zoria
but nope
@arceusplayer11 (discord: Deedee) get your ass in here

=== @EmilyV99 (discord: Emily) 05/31/2022 17:46


https://cdn.discordapp.com/attachments/981244891201949796/981252244081082438/zelda.exe
https://cdn.discordapp.com/attachments/981244891201949796/981252244588617748/zquest.exe
https://cdn.discordapp.com/attachments/981244891201949796/981252245276491826/zscript.exe
should be fixed
@ P-Tux7
also, it was only both shifts, not both controls
which is why I didn't notice it
as I have mine set to only use ctrl, not shift
as lshift is my start button

=== @ P-Tux7 05/31/2022 18:44

this sounds rather harsh and for what it's worth wouldn't make me want to get out of my zc coding slump if i was deedee
maybe she was tired after all that work or was distracted by offline stuff
and for this bug especially it's barely an issue

=== @EmilyV99 (discord: Emily) 05/31/2022 18:48

oof
thank you for pointing that out
stoned me is not very articulate
or good at tone
<a:hugheart:884673091878391828>  <a:hugheart:884673091878391828>  nothing bad meant deedee
[deleted some messages]

=== @arceusplayer11 (discord: Deedee) 05/31/2022 19:21

(replying to @EmilyV99 (discord: Emily) "@arceusplayer11 (discord: Deedee) get you‚Ä¶"): Look, it was complex code ok

=== @EmilyV99 (discord: Emily) 05/31/2022 19:22

‚ù§Ô∏è

=== @arceusplayer11 (discord: Deedee) 05/31/2022 19:22

my brain was very much not on
## Add every available option in cfg files to ZCL (#1460)
@ Majora opened this issue on 06/02/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/981810426482413568



=== @ Majora 06/02/2022 06:44

Although there don't seem to be too many missing, but yeah something like "use_dwm_flush" isn't in ZCL and its one (if not the only) option that fixed a graphical anomaly for me.

=== @connorjclark (discord: connorclark) 06/03/2022 01:17

oooh i'll do this

=== @ NightmareJames 06/03/2022 01:48

Definitely a plus
## ‚úÖüîíMinor Graphical issue with Dungeon Minimaps (#1461)
@ InfinityD4 opened this issue on 06/02/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/981968307374686239



=== @ InfinityD4 06/02/2022 17:11

Dungeon Minimaps are offset 1 pixel to the left between the Dmap Editor and the Subscreen. It's been this way for a while. I suggest changing it everywhere else to make it consistent with the tiles used for overworld maps

=== @TheBlueTophat (discord: Coolgamer012345) 06/02/2022 17:20

could you post a screenshot

=== @ InfinityD4 06/02/2022 17:25


![image](https://cdn.discordapp.com/attachments/981968307374686239/981971895614320660/zquest_screen00001.png)
![image](https://cdn.discordapp.com/attachments/981968307374686239/981971895840809030/zc_screen00002.png)
![image](https://cdn.discordapp.com/attachments/981968307374686239/981971896054726676/glitch1.png)

=== @ InfinityD4 06/02/2022 17:27

and for my whole consistency thing
![image](https://cdn.discordapp.com/attachments/981968307374686239/981972433399607326/glitch2.png)

=== @EmilyV99 (discord: Emily) 06/09/2022 09:10

huh
odd

=== @EmilyV99 (discord: Emily) 06/09/2022 09:26

@ InfinityD4 should fix it
https://cdn.discordapp.com/attachments/981968307374686239/984387975066570783/zscript.exe
https://cdn.discordapp.com/attachments/981968307374686239/984387975603429386/zelda.exe
https://cdn.discordapp.com/attachments/981968307374686239/984387976274522142/zquest.exe
(meta) thread name was changed: ‚úÖüîíMinor Graphical issue with Dungeon Minimaps
## ‚úÖüîíMaskedBlit and MaskedDraw expansion (#1462)
@ Moosh opened this issue on 06/03/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/982138836320682054



=== @ Moosh 06/03/2022 04:29

Quoting from another channel:
```So a bit of an optimization question. Say I have three bitmaps: two textures A and B, and an output bitmap.
Image
I want to fill in the green color of bitmap B with the texture of bitmap A and then put the output in bitmap C. I also don't want to overwrite any of the data in A and B in the process
Is there a way to do with without introducing a fourth bitmap?
Also the pink in this case is color 0```
![image](https://cdn.discordapp.com/attachments/982138836320682054/982138838321336360/Sprite-0003.png)

=== @ Moosh 06/03/2022 04:31

This would be made easier with a version of MaskedDraw that uses a second bitmap as a texture instead of drawing a fixed color. It would also be nice to have some finer control over which colors are masked if possible. Right now it's anything that isn't color 0, but in the example case the optimal use would be a single color or the inverse of that color's space. Dunno how doable that is. MaskedBlit is the main request here.

=== @EmilyV99 (discord: Emily) 06/10/2022 10:32

```cpp
void MaskedDraw( int layer, bitmap mask, int color );
 * Draws 'color' to the bitmap, on any pixels that are non-color-0 on the mask.
 * The mask's `0,0` is overlayed at `0,0` of the destination.
void MaskedDraw( int layer, bitmap mask, int color, int maskColor );
 * Same as above, but instead of any non-0 pixels, pixels that match 'maskColor' are used
void MaskedDraw( int layer, bitmap mask, int color, int startMaskColor, int endMaskColor );
 * Same as above, but colors c such that 'startMaskColor <= c <= endMaskColor' will be used
 *  as the mask.

void MaskedBlit( int layer, bitmap mask, bitmap pattern, bool repeatPattern );
void MaskedBlit( int layer, bitmap mask, bitmap pattern, bool repeatPattern, int maskColor );
void MaskedBlit( int layer, bitmap mask, bitmap pattern, bool repeatPattern, int startMaskColor, int endMaskColor );
 * Same as 'MaskedDraw', but instead of drawing a color to the masked portions, draws from
 * a supplied 'pattern' bitmap.
 * If 'repeatPattern' is false, the pattern will be drawn at `0,0` with the width/height of the
 *     pattern bitmap, and nowhere else.
 * If 'repeatPattern' is true, the pattern will repeat in a tiled manner, starting from `0,0`,
 *     up to the width/height of the destination bitmap.
 * 'repeatPattern' does not affect the mask bitmap.```

=== @EmilyV99 (discord: Emily) 06/10/2022 10:38

@ Moosh would love a test on these
https://cdn.discordapp.com/attachments/982138836320682054/984768450478088242/buildpack.zip

=== @EmilyV99 (discord: Emily) 06/10/2022 10:39

Also, curious if using a bitmap as a mask for itself would work
i.e.
`foo->MaskedBlit(0, foo, pattern, false, 0x52);`

=== @ Moosh 06/10/2022 10:40

I'd be happy to do some tests but it'll have to be later tonight. Don't let me forget. Drag my ass in there ü§£

=== @EmilyV99 (discord: Emily) 06/10/2022 10:41

if `foo` here were your face with the green, and `pattern` were your left bitmap, this should create your right bitmap, if I am correct
though, if you don't want to modify the green face one, you'd first want to just standard blit that to a copy

=== @EmilyV99 (discord: Emily) 06/10/2022 11:00

well
I went to test it myself some
and everything crashes
so fun!

=== @EmilyV99 (discord: Emily) 06/10/2022 11:30

@ Moosh

![image](https://cdn.discordapp.com/attachments/982138836320682054/984781535402143794/unknown.png)

![image](https://cdn.discordapp.com/attachments/982138836320682054/984781571930353734/unknown.png)

=== @ Moosh 06/10/2022 11:30

Splendid

=== @EmilyV99 (discord: Emily) 06/10/2022 11:31

so here I have a pattern (actually an array of patterns)
I have `bitmap face` which is the middle one
and then `bitmap foo` which is the bottom
```cpp
if(Hero->PressA)
{
    foo->Clear(0);
    face->Blit(0, foo, 0, 0, 16, 16, 0, 0, 16, 16, 0, 0, 0, 0, 0, false);
    pat = RandGen->Rand(NUM_TILES-1);
    foo->MaskedBlit(1, foo, patterns[pat], true, MASK_COLOR);
}
```
On pressing A, it clears foo, copies face to foo, picks a random pattern, and masks it

=== @ Moosh 06/10/2022 11:31

Does Screen have these functions as well?

=== @EmilyV99 (discord: Emily) 06/10/2022 11:31

no, screen does not

=== @ Moosh 06/10/2022 11:32

k

=== @EmilyV99 (discord: Emily) 06/10/2022 11:32

which, given that these don't have any `x/y`, would be difficult to make useful

=== @ Moosh 06/10/2022 11:32

Ohhh that's true

=== @EmilyV99 (discord: Emily) 06/10/2022 11:32

It uses whichever is smaller of the target bitmap and the mask bitmap (smaller width and smaller height)

=== @ Moosh 06/10/2022 11:32

Was thinking ways to remove one more bitmap, but that'd complicate things some

=== @EmilyV99 (discord: Emily) 06/10/2022 11:33

If the `bool repeats` is false, it also will limit to the pattern bitmap's size
otherwise it tiles the destination with the pattern
here it specifies a singular `MASK_COLOR`, so only that color is replaced
seems to all work pretty nicely
also, I'm not adding a 'patterned' version of `Dither()`
you can basically do that yourself just by using `Dither` with a special color (one not used in the tile), and then `MaskedBlit`'ing that color

=== @ Moosh 06/10/2022 11:35

Yeah that's sensible

=== @EmilyV99 (discord: Emily) 06/10/2022 11:36

The fun thing is, I set these up to avoid a lot of duplicate code

=== @ Moosh 06/10/2022 11:36

If I wanted to do that even without MaskedBlit, dither can do color 0 as well right?

=== @EmilyV99 (discord: Emily) 06/10/2022 11:36

Yes, you can dither color 0 onto things
Keep in mind that color 0 being transparent
....is a version of masking.
so, it's the same basic logic as MaskedBlit

=== @ Moosh 06/10/2022 11:37

Yeah, same idea

=== @EmilyV99 (discord: Emily) 06/10/2022 11:38

Now for the neat thing
Script draw commands
How do they handle their arguments?
Well, they store all of their arguments in an array
so what do I do here that's fancy?
```cpp
case BMPMASKBLIT:
{
    set_user_bitmap_command_args(j, 4);
    script_drawing_commands[j][5] = 0x01 * 10000L;
    script_drawing_commands[j][6] = 0xFF * 10000L;
    script_drawing_commands[j][17] = SH::read_stack(ri->sp+4);
    break;
}
case BMPMASKBLIT2:
{
    set_user_bitmap_command_args(j, 5);
    script_drawing_commands[j][6] = script_drawing_commands[j][5];
    script_drawing_commands[j][0] = BMPMASKBLIT;
    script_drawing_commands[j][17] = SH::read_stack(ri->sp+5);
    break;
}
case BMPMASKBLIT3:
{
    set_user_bitmap_command_args(j, 6);
    script_drawing_commands[j][0] = BMPMASKBLIT;
    script_drawing_commands[j][17] = SH::read_stack(ri->sp+6);
    break;
}
```
So, if you call `MaskBlit()` with 4 params,
it basically just calls the 6 param version
with `0x01, 0xFF`
The 5 param version, calls the 6 param version by duplicating the parameter, so it has a range of just the one color

=== @ Moosh 06/10/2022 11:40

Nice

=== @EmilyV99 (discord: Emily) 06/10/2022 11:40

and they all set their 'command' back to `BMPMASKBLIT`, so the code in `script_drawing.cpp` doesn't even know which one it's running
they all work identically
Same effect for `BMPMASKDRAW`
(meta) thread name was changed: ‚úÖüîíMaskedBlit and MaskedDraw expansion

https://cdn.discordapp.com/attachments/982138836320682054/984784613933215764/zquest.exe
https://cdn.discordapp.com/attachments/982138836320682054/984784614788837437/zscript.exe
https://cdn.discordapp.com/attachments/982138836320682054/984784615246028810/zelda.exe
there's the build in case you want to play with it before I post a proper build
(trying to finish up a bunch of stuff to get an alpha done soonish)
## Readable Quake Offset (#1463)
@ Moosh opened this issue on 06/03/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/982159934047268894



=== @ Moosh 06/03/2022 05:52

The offset from Screen->Quake screws up draws sometimes. Good example being scripted subscreens. Since they freeze the screen, all draws are offset by whatever the quake offset was for that frame, which is really noticeable and awkward. It'd be nice if we could read the current offset in ZScript to counteract the effect
## Trigger Self + Hit all Triggers odd behaviour (#1464)
@ Mani Kanina opened this issue on 06/03/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/982270143281393664



=== @ Mani Kanina 06/03/2022 13:10

Trigger self flag works fine, but the intended conjoint with the screen flags Hit All Triggers -> Perm Secret / 16-31 does not
I was confused why it did not act as expected
-> Perm Secret works
it sets the secret state, so if you leave and re-enter the screen the secret is triggered
16-31 *does not* proceed
...unless Enemies->Secret is Permanenet is also checked
which seems like it should have absolutely nothing to do with it.
This has been the behaviour in ZC for a while, I believe. Since I recall it being a pain to set up before.
But it *feels* like it's unintended to work like this.

=== @EmilyV99 (discord: Emily) 06/03/2022 13:42

fucks sake
@arceusplayer11 (discord: Deedee) any chance you have magic to work here?

=== @arceusplayer11 (discord: Deedee) 06/03/2022 13:45

I'm guessing some dumbass typo'd the wrong QR somewhere
it'd be an easy fix

=== @EmilyV99 (discord: Emily) 06/03/2022 13:48

prooobably my fault somewhere
but I have no energy at all after having my blood drawn this morning

=== @ Mani Kanina 06/03/2022 13:50

I don't think this is high priority, few people use this setting.
I just wanted to fill a report

=== @EmilyV99 (discord: Emily) 06/03/2022 13:50

‚ù§Ô∏è

=== @arceusplayer11 (discord: Deedee) 06/04/2022 03:39

(replying to @EmilyV99 (discord: Emily) "prooobably my fault somewhere"): No, this is like... ancient

=== @ Mani Kanina 06/06/2022 01:48

haha, guess what though
trigger self 2: electric bogaloo is about to happen
## ‚úÖüîíGrabbing keys across pitfalls (#1465)
@EmilyV99 (discord: Emily) opened this issue on 06/04/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/982444565271314472



=== @EmilyV99 (discord: Emily) 06/04/2022 00:57

separate reports for separate bugs, please

=== @ P-Tux7 06/04/2022 01:06

"block combo" - "block all" flag?

=== @ InfinityD4 06/04/2022 04:31

(meta) thread name was changed: Grabbing items across pitfalls
(meta) thread name was changed: Grabbing keys across pitfalls

=== @ InfinityD4 06/04/2022 04:33

When using a Boomerang or Hookshot to grab a key, if that key crosses a Pitfall Combo, it becomes the deafult wooden sword sprite as it 'falls' into the pit but is still pulled all the way to the player

=== @EmilyV99 (discord: Emily) 06/04/2022 04:34

Guessing that your `Quest->Graphics->Sprites->Misc Sprites` has the falling sprite set to the wooden sword sprite?
Dragged items shouldn't fall though, definitely a bug there

=== @EmilyV99 (discord: Emily) 06/09/2022 09:00

@ InfinityD4 should be fixed
https://cdn.discordapp.com/attachments/982444565271314472/984381581361815562/zquest.exe
https://cdn.discordapp.com/attachments/982444565271314472/984381582133575750/zscript.exe
https://cdn.discordapp.com/attachments/982444565271314472/984381582594932736/zelda.exe
(meta) thread name was changed: ‚úÖüîíGrabbing keys across pitfalls
## ‚úÖüîíArrow and Block Combo Bug (#1466)
@ InfinityD4 opened this issue on 06/04/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/982503009344950282



=== @ InfinityD4 06/04/2022 04:36

When an Arrow hits a Combo that blocks it(Tested with Wooden arrows and the Block All and Block L1 Arrow Types), the projectile doesn't properly end, leaving the impact sprite flashing in place. This also disables firing any further arrows until you leave the screen.

=== @EmilyV99 (discord: Emily) 06/04/2022 04:36

That's weird AF.... @arceusplayer11 (discord: Deedee) ?

=== @ P-Tux7 06/04/2022 04:49

Block L1 Arrow?

=== @ InfinityD4 06/04/2022 05:05

Block Arrow(L1). There's a similar combo type for the Boomerang.

=== @ P-Tux7 06/04/2022 05:14

Huh, must have missed it, thanks
You know, I may as well request a Blocker combo type, thanks for the idea

=== @EmilyV99 (discord: Emily) 06/09/2022 09:06

*sigh*
So weapons live an extra frame after "death" for scripts to be able to do 'on death' effects, or revive the weapon
arrows apparently are, in that extra frame, resetting their death animation timer
so needs a special check...
should be fixed

https://cdn.discordapp.com/attachments/982503009344950282/984383542744203305/zelda.exe
https://cdn.discordapp.com/attachments/982503009344950282/984383543343980565/zquest.exe
https://cdn.discordapp.com/attachments/982503009344950282/984383543973117962/zscript.exe
(meta) thread name was changed: ‚úÖüîíArrow and Block Combo Bug
## ‚úÖüîíBarrier Combo Type (#1467)
@ P-Tux7 opened this issue on 06/04/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/982513233258754080



=== @ P-Tux7 06/04/2022 05:16

A combo type whose selected "triggers" instead block/kill said LWeapons. Highly recommended to work on layers so we can make it invisible and put it on top of other combo types/in aliases. This would also allow it to be used in conjunction with the combo on the layer below it, to have that combo be triggerable by some things, then have this combo above it blocking others. And once that combo is triggered, secrets can be used to make the blocker combo disappear. A possible neat thing would be to make Self-Triggering combos also trigger the Barrier combo above them, making it go to the Next combo without needing Screen Secrets.
(meta) thread name was changed: Blocker (AKA Barrier) Combo Type

=== @ P-Tux7 06/04/2022 05:19

(meta) thread name was changed: Barrier Combo Type

=== @ P-Tux7 06/04/2022 05:21

Games like LTTP have certain weapons (boomerang, arrows, magic) killed by ordinary solid walls, and I think with the use of aliases this would be the most elegant way to let the user customize with what weapons that sort of thing happens, and determine what combos count as "solid" enough to block weapons as well. (For example, bushes, small rocks, and signs didn't)

=== @ P-Tux7 06/04/2022 05:22

(I mean, we COULD add a Blocks tab to each individual combo, but y'know, yuck.)

=== @EmilyV99 (discord: Emily) 06/04/2022 13:58

I.... could swear you already made a thread for this
but I can't find it

=== @ P-Tux7 06/04/2022 18:23

Okay so, after finding out the LWeapons tab needs 3 ints, I wonder if maybe a Blocks tab COULD be done...?

=== @EmilyV99 (discord: Emily) 06/04/2022 18:54

No
... Could be, yes, but blehg
Block combo type as requested is far cleaner

=== @EmilyV99 (discord: Emily) 06/09/2022 23:27

@ P-Tux7
![image](https://cdn.discordapp.com/attachments/982513233258754080/984599652244533348/unknown.png)

![image](https://cdn.discordapp.com/attachments/982513233258754080/984599695487815730/unknown.png)

![image](https://cdn.discordapp.com/attachments/982513233258754080/984599740559785994/unknown.png)
You can now make `Min level` for triggers instead act as `Max level` (changes the text when you toggle the checkbox)
the new combo type blocks weapons that match the triggers
So, a `Max Level 2` block with arrows checked will stop silver arrows but not gold arrows
Also, this combo type has an Attribyte `Block SFX`, which allows setting a sound to play when a weapon is blocked.
If `Triggers Secrets`, `->Next`, or `->Prev` are checked, they should trigger when a weapon is blocked, as per normal triggerflag rules that work on all combotypes.

=== @EmilyV99 (discord: Emily) 06/09/2022 23:36

I'm adding a QR that is blatantly missing
`"Custom Combos Work On All Layers"`, as a better version of `"Custom Combos Work On Layers 1 And 2"`

=== @EmilyV99 (discord: Emily) 06/09/2022 23:37

@arceusplayer11 (discord: Deedee) should see this thread

=== @arceusplayer11 (discord: Deedee) 06/09/2022 23:40

ooooh

=== @EmilyV99 (discord: Emily) 06/09/2022 23:41

and just tested
with new qr on
block combos do indeed work on layer 6
(the new custom ones, specifically, nothing done for the old ones)
The thing is, trigger flags work for every combo type
The `automatic trigger` and `button trigger` both run through one function, while the `weapon triggers` run through another
because the weapon ones need the `weapon *w`
so, this just adds in the weapon trigger function, and if it triggers, it kills the weapon, playing the sfx from attribyte 0, and continues through any other trigger effects set for the combo.
If you trigger one of these via a buttonpush or autotrigger, it will *not* play the blocking sfx, as it didn't block a weapon specifically

=== @EmilyV99 (discord: Emily) 06/09/2022 23:49

@ P-Tux7
> This would also allow it to be used in conjunction with the combo on the layer below it, to have that combo be triggerable by some things, then have this combo above it blocking others. And once that combo is triggered, secrets can be used to make the blocker combo disappear. A possible neat thing would be to make Self-Triggering combos also trigger the Barrier combo above them, making it go to the Next combo without needing Screen Secrets. 
This part is just not happening though
A weapon hits every combo it touches, regardless of if any of them kill it, in a frame
and to make it not do that would require much reworking

=== @EmilyV99 (discord: Emily) 06/09/2022 23:53

(meta) thread name was changed: ‚úÖüîíBarrier Combo Type

=== @ P-Tux7 06/10/2022 01:28

(replying to @EmilyV99 (discord: Emily) "@ P-Tux7
> This‚Ä¶"): What part do you mean? That paragraph had two things in it:

1. Layering a Block Weapon combo over a triggerable combo to create the appearance of a single tile that blocks magic but is triggered by arrows. Seems perfectly possible with this new QR, great job

2. Having the self-triggered combo on Layer 0 "tell" combos above it to self-trigger as well. Is this not possible to write?

=== @ P-Tux7 06/10/2022 01:29

Either way, thanks a ton for this. Not only does it add versimilitude by making combos feel more solid, but it also adds puzzle opportunities by making specific projectiles blocked and having to get rid of the blocking combo or push the block out of the way.

=== @EmilyV99 (discord: Emily) 06/10/2022 08:21

OK, not sure I entirely understood everything you're asking
`1.` should be good, yeah
Keep in mind that if the triggerable combo is set to be triggered by magic, and the block also blocks magic, that the magic will then be blocked AND trigger the combo below; the block does not prevent the trigger
`2.` is a nope (not because it's "impossible", but because there's no clean / "non-jank" way to set that up)

=== @ P-Tux7 06/10/2022 19:13

So the only way to change the Block Weapon combo after you trigger the combo below it is screen secrets?
I wonder how you're supposed to do things like bush combos that can also block other weapons.
(replying to @EmilyV99 (discord: Emily) "Keep in mind that if the trig‚Ä¶"): I don't plan to do anything like this because it wouldn't make sense

=== @EmilyV99 (discord: Emily) 06/10/2022 20:21

(replying to @ P-Tux7 "So the only way to change the‚Ä¶"): or if the combo below it is a crystal switch, using the switch blocks ability to modify other layers

=== @ P-Tux7 06/10/2022 20:27

i think that isn't really efficient for single instances like bushes is it

=== @EmilyV99 (discord: Emily) 06/10/2022 20:28

no
hmm
the thing is, it isn't like bushes `trigger` in the same sense as triggerflags, so hooking into that is a pain

=== @ P-Tux7 06/10/2022 20:33

ohh sorry
err wait i meant generic combos that act like bushes, y'know? (goes to next combo after triggering, doesn't trigger screen stuff)
or is that what you meant

=== @EmilyV99 (discord: Emily) 06/10/2022 20:34

bleh, I hate generic combos
they are a mess
even so, the question is how to tell it what to do
because, if you just want to say `triggering this combo also triggers the combo on layer x`
that won't work the way you expect
because then you're using the `->Next` flag on the barrier combo
and doing that means it will go to the next thing when it is triggered... including by a weapon it blocks

=== @ P-Tux7 06/10/2022 20:36

oh

=== @EmilyV99 (discord: Emily) 06/10/2022 20:36

so you'd instead need some arbitrary way to have triggering a combo edit another layer

=== @arceusplayer11 (discord: Deedee) 06/10/2022 20:36

Generic Combos need an overhaul tbh

=== @EmilyV99 (discord: Emily) 06/10/2022 20:36

and that sounds way to complicated to be at all intuitive to use

=== @ P-Tux7 06/10/2022 20:36

wait how would it trigger if the barrier combo blocks it, and the combo on the layer below isn't triggered by it?

=== @arceusplayer11 (discord: Deedee) 06/10/2022 20:36

But I don't know what that overhaul would look like

=== @EmilyV99 (discord: Emily) 06/10/2022 20:37

In this situation, that wouldn't remove the combo below, but it WOULD remove the barrier
which would then not work as expected
so regardless, it isn't easy to do
HOWEVER
```cpp
combodata script alterLayer
{
    void run(int layer, int offset)
    {
        mapdata md = Game->LoadTempScreen(layer);
        md->ComboD[this->Pos] += offset;
    }
}```
2 line script solves your problem
put that on the "stump" combo that appears after the bush is cut
with the layer the barrier is on as the `layer` parameter
and, an offset of `1` to make the barrier go to `next`
or, instead
```cpp
combodata script setLayer
{
    void run(int layer, int comboid)
    {
        mapdata md = Game->LoadTempScreen(layer);
        md->ComboD[this->Pos] = comboid;
    }
}```
just replace it with a specific combo, like say, combo 0
combo scripts are really useful for this stuff

=== @ P-Tux7 06/10/2022 20:55

thank you so much!
## ‚úÖüîíLong values in text fields break GUI layout (#1468)
@connorjclark (discord: connorclark) opened this issue on 06/05/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/983149496424874016



=== @connorjclark (discord: connorclark) 06/05/2022 23:25


![image](https://cdn.discordapp.com/attachments/983149496424874016/983149499272790036/unknown.png)

=== @EmilyV99 (discord: Emily) 06/05/2022 23:59

...oh.
that....would happen if that was large, wouldn't it?
it should just need a `maxwidth` property added to the textfields
if you'd want to add that

=== @EmilyV99 (discord: Emily) 06/09/2022 08:38

@connorjclark (discord: connorclark) how does this do?
https://cdn.discordapp.com/attachments/983149496424874016/984375855088271400/zlauncher.exe
(meta) thread name was changed: üíäüîìLong values in text fields break GUI layout

=== @connorjclark (discord: connorclark) 06/09/2022 23:55

seems good
![image](https://cdn.discordapp.com/attachments/983149496424874016/984606600549498910/unknown.png)

=== @EmilyV99 (discord: Emily) 06/09/2022 23:55

I just set `forceFitW = true` for both of them
so, their width is not accounted for in calculating the column's width, and their width is then forced to the column's calculated width.
The problem being, the default width of a textfield, is based on it's starting value
so without that to override the width, it scaled with the input
(meta) thread name was changed: ‚úÖüîíLong values in text fields break GUI layout

=== @connorjclark (discord: connorclark) 06/10/2022 00:00

hehe you won't like this tho
![image](https://cdn.discordapp.com/attachments/983149496424874016/984607928797519882/unknown.png)
I sometimes get garbage data here

=== @connorjclark (discord: connorclark) 06/10/2022 00:03

only when I get to this str length
![image](https://cdn.discordapp.com/attachments/983149496424874016/984608729133633607/unknown.png)
probably reading the code wrong, maybe not relevant
but only happens when I make the path a bit longer than normal

=== @EmilyV99 (discord: Emily) 06/10/2022 00:06

GAH

=== @connorjclark (discord: connorclark) 06/10/2022 00:06

(replying to @connorjclark (discord: connorclark) "but only happens when I make‚Ä¶"): nvm i think it may just be random

=== @EmilyV99 (discord: Emily) 06/10/2022 00:06

Any chance you can figure out what's wrong there??

=== @connorjclark (discord: connorclark) 06/10/2022 00:06

i'll look a bit

=== @EmilyV99 (discord: Emily) 06/10/2022 00:07

I have no clue how string_view stuff works and everywhere I've had to fuck with it has been absolutely confusing

=== @connorjclark (discord: connorclark) 06/10/2022 02:16

started looking. consistent repro but string has to be at least 60 characters
![image](https://cdn.discordapp.com/attachments/983149496424874016/984642058411200574/unknown.png)

=== @connorjclark (discord: connorclark) 06/10/2022 02:18

idk what this function is doing but, maxLength is smaller than the string I'm passing in...
![image](https://cdn.discordapp.com/attachments/983149496424874016/984642652383350814/unknown.png)
Can't textfeld just use a std::string as a member var? why the dance with `std::unique_ptr<char[]>` ??

=== @connorjclark (discord: connorclark) 06/10/2022 02:23

std::string doesn't seem like it'd be an awful choice, but better than a pointer to char[]* might be std::array<char>

way too much on the topic here, I just scanned it https://stackoverflow.com/questions/56422913/are-there-downsides-to-using-stdstring-as-a-buffer

=== @connorjclark (discord: connorclark) 06/10/2022 03:39

found the issue. although the string buffer stuff is probably more complicated than it needs to be, it isn't the bug here.

![image](https://cdn.discordapp.com/attachments/983149496424874016/984663126953848832/unknown.png)
In `realize` these dialog objects are made only at initialization
but they are given references to the raw buffer pointer
which is invalidated whenever the text field buffer is resized.

=== @EmilyV99 (discord: Emily) 06/10/2022 08:23

(replying to @connorjclark (discord: connorclark) "Can't textfeld just use a std‚Ä¶"): Ask @ Saffith

=== @EmilyV99 (discord: Emily) 06/10/2022 08:42

@connorjclark (discord: connorclark) should fix it, I hope?
https://cdn.discordapp.com/attachments/983149496424874016/984739328959864852/buildpack.zip

![image](https://cdn.discordapp.com/attachments/983149496424874016/984739353068707880/unknown.png)
It should properly update the reference there
## ‚ùåüîíCombo editor Triggers does not respect Trigger-Self Only flag (#1469)
@ Mani Kanina opened this issue on 06/06/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/983186078401970196



=== @ Mani Kanina 06/06/2022 01:50

You can make unique triggers in the combo editor now, which is convenient. But they do not respect the Trigger->Self Only flag.
Unless I completely misunderstood how this feature works and set it up wrong, that is
Hitting them also does not play the screen's Secret Sound

=== @EmilyV99 (discord: Emily) 06/06/2022 09:35

uh, it isn't designed to
at all
you can have customly triggering it cause it to `->Next` or `->Previous`
....the screen secret sound is a bit more of an issue, though I could SWEAR we specifically already fixed that?

=== @ Mani Kanina 06/06/2022 11:30

my build is not the most recent
so that might very well be the case

=== @EmilyV99 (discord: Emily) 06/09/2022 09:28


![image](https://cdn.discordapp.com/attachments/983186078401970196/984388507659276319/unknown.png)
that definitely is calling to play the secret sfx
(meta) thread name was changed: ‚ùåüîíCombo editor Triggers does not respect Trigger-Self Only flag
## Implementation of flag 134-143 (Trigger LW_SCRIPT) (#1470)
@ Mani Kanina opened this issue on 06/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/983193456325300244



=== @ Mani Kanina 06/06/2022 02:19

What it says on the tin. I think this was something planned that was never made. You can of course just script triggers, but since the LW_SCRIPT weapon pointers are now used kinda dynamically for custom stuff, this being in-engine and functional as expected would be nice.

You can make individual combos trigger screen secrets with these weapon types now, but it kind creates this weird separate environment where the trigger is on the combo, not the flag.

=== @EmilyV99 (discord: Emily) 06/06/2022 09:39

yeah, this probably should be implemented
@arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 06/10/2022 14:28

the main thing that makes this annoying is that it needs more secret combos too
which needs more gui work

=== @EmilyV99 (discord: Emily) 06/10/2022 14:30

....which, means the entire secret combos gui needs to be upgraded.......

=== @ Mani Kanina 06/11/2022 02:21

oof
## Enemy Shields On Left and Right Are Wrong (#1471)
@ P-Tux7 opened this issue on 06/06/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/983208486924083301



=== @ P-Tux7 06/06/2022 03:19

What ZC currently does:
![image](https://cdn.discordapp.com/attachments/983208486924083301/983208489113518140/shield.png)
How ZC should be:
![image](https://cdn.discordapp.com/attachments/983208486924083301/983208523649409034/unknown-1517.png)
The shield is not correctly held relative to the left or right of the enemy in all four directions, as can be seen in the top picture.

=== @ Lost Attempt 06/06/2022 06:38

this meme better represents this more clearly
this is both for the enemy flags "shield is on left" and "shield is on right" where both flip sides against their relative rotation when they face left and right
![image](https://cdn.discordapp.com/attachments/983208486924083301/983258607653109800/Meme.png)

=== @EmilyV99 (discord: Emily) 06/06/2022 09:38

(replying to @ P-Tux7 "What ZC currently does:"): ...what the FUCK???
@arceusplayer11 (discord: Deedee)
## ‚ùåüîíBug Net or Empty Bottle QR (#1472)
@ vlamart opened this issue on 06/06/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/983489075359145994



=== @ vlamart 06/06/2022 21:54

A quest rule for whether the bottle requires the bug net, or if each empty bottle uses its own swing sprite. Also script access for those "weapons" (to hypothetically make the net or bottle reflective for silly dead man's volley)

=== @EmilyV99 (discord: Emily) 06/06/2022 22:06

ü§¢
swinging empty bottles sounds painful
very painful
there's a reason I didn't add it like that in the first place

=== @ vlamart 06/06/2022 22:07

Fair, totally fair üòù

=== @ vlamart 06/06/2022 22:24

I was just thinking since the pieces were there, it could be something like "if bottle state 0, then swing bug net (that doesn't need to be equipt or on the subscreen)". I'm sure scripting a wand or a sword to fill up a bottle is easy though, and make them interactive with stuff that way, just spit-balling now

=== @EmilyV99 (discord: Emily) 06/09/2022 09:41

(meta) thread name was changed: ‚ùåüîíBug Net or Empty Bottle QR
## ‚ùåüîíBasic Counter Divisor Item (#1473)
@ vlamart opened this issue on 06/06/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/983497589729136672



=== @ vlamart 06/06/2022 22:28

An item that let's you sets the divisor of any counter (including customs). With item bundles, there's no worrying about if a single item could effect multiple counters at once, just put different divisor items in an item bundle

=== @EmilyV99 (discord: Emily) 06/06/2022 22:32

With the way this works, it would require 30 different item classes
because every counter
needs to be a separate class
for it to work
this has been discussed before and shot down for this exact reason

=== @ vlamart 06/06/2022 22:34

Should we, in the future, start a feature request channel for rewrite to organise all current turn-downs?

=== @EmilyV99 (discord: Emily) 06/06/2022 22:38

I mean
the theoretical thing to do is to check if it's been requested before
though that's not exactly easy
though to be fair
if you search for `in: feature-requests counter`
there are only like 38 results
and on the first page of those results is a duplicate of this request
so, mayhaps try using discord's search tools before making a request?

=== @ vlamart 06/06/2022 22:43

Thanks, the inner workings of discord still elude me üòù

=== @EmilyV99 (discord: Emily) 06/06/2022 22:45

discord's search tools are REALLY nice
and searching in a channel includes that channel's threads
which I actually hadn't tested until just now

=== @ vlamart 06/06/2022 22:46

Doprah

=== @ P-Tux7 06/07/2022 01:21

(replying to @EmilyV99 (discord: Emily) "With the way this works, it w‚Ä¶"): wait, how many counters are there?!?

=== @ P-Tux7 06/07/2022 01:22

lessee...
‚úÖ damage taken
magic used
‚úÖ rupee cost
arrow cost
bomb cost
super bomb cost
key cost
current level key cost?
and however many custom/generic/bonus/script/whatever you call it counters there are
i think i've requested a magic divisor ring already, that would be the big useful one imo

=== @EmilyV99 (discord: Emily) 06/09/2022 09:41

(meta) thread name was changed: ‚ùåüîíBasic Counter Divisor Item

=== @EmilyV99 (discord: Emily) 06/09/2022 09:42

(replying to @ P-Tux7 "i think i've requested a magi‚Ä¶"): The problem is, dividing your magic use isn't even. If you use the drain rate multiplier properly (which is what half magic uses), you can create whatever divisors you want, with scripts; allowing half, quarter, eighth, etc magic
that's the best way to handle it
You can do it without any scripts if you use "Learn Half Magic" rooms, which, with compat qrs off, will halve the drain rate each time
with scripts you can do much more
## New Combo  - Steps (#1474)
@ Tsunami Tommy Reload the Shotty opened this issue on 06/06/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/983505753107230750



=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:00

I'm only suggesting this because conveyors exist at the moment. (So something _similar_ can kind of be done maybe.)  

A "Steps" Combo  (Rather than a Step->Next Combo.)  is a combo that adjusts the player's position based on the direction they're moving.

For example, if I have a Steps combo shaped like ``` / ``` I would set its offset to `y = -1` for every pixel to the right I moved, which would move them upward by the same amount.  Or if it was a shallow step, I'd set it to  `y = -.5` for a half step up.

The combo would require customizable options rather than be something hardcoded because of the following:

1)  Its uses are flexible.  There are 8 directions steps could go in.  Wind could push someone in a specific direction.  They could walk into or against the wind and have different movement effects based on it.
2)  It could have the ability to lock certain cardinal directions from being moved in while on a particular stair combo.
3)  It differs from a conveyor in that when the player isn't moving, nothing is happening. They just stand still.  Even conveyors can't do that.
## ‚úÖüîíWeird Typo in Chest (Basic)  Combo Help Text. (#1475)
@ Tsunami Tommy Reload the Shotty opened this issue on 06/06/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/983506007542087710



=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:01

In the "Chest (Basic) Combo, click the Help Button to the right of the Combo Type pulldown.  Read the first word.  That's in Alpha 106.
![image](https://cdn.discordapp.com/attachments/983506007542087710/983506010780078100/unknown.png)

=== @EmilyV99 (discord: Emily) 06/06/2022 23:03

ack
that's definitely not a standard typo, it's a string format error

=== @EmilyV99 (discord: Emily) 06/06/2022 23:04

hmmmmm

=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:04

I figured.  I just didn't know what to call it.  It just looks like Cthulhu had sneezed on it or something.

=== @EmilyV99 (discord: Emily) 06/06/2022 23:04

```cpp
case cCHEST: case cLOCKEDCHEST: case cBOSSCHEST:
    typehelp = "If no button is assigned, the chest opens when pushed against from a valid side. If buttons are assigned,"
        " then when the button is pressed while facing the chest from a valid side.\n"
        "When the chest is opened, if it has the 'Armos/Chest->Item' combo flag, the player will recieve the item set in the screen's catchall value, and the combo will advance to the next combo.";
    if(id==cLOCKEDCHEST)
        typehelp += "\nRequires a key to open.";
    else if(id==cBOSSCHEST)
        typehelp += "\nRequires the Boss Key to open.";
    break;
```
that.... is a basic string assignment
no form of formatting happening there

=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:05

Does it look like that on your end? üòÆ
I mean in regular ZQuest on your PC?

=== @EmilyV99 (discord: Emily) 06/06/2022 23:05

...OH MY
This is a random memory error
because I am stupid

=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:06

I dunno.  Seem to be pretty smart to be able to determine that in the first place.
I was about to refresh my RAM.

=== @EmilyV99 (discord: Emily) 06/06/2022 23:08

oh well you see
it's returning the string from one function
then it stores that in a *local variable*
and then it returns a *pointer to the content of the local variable*
....returning a pointer to anything to do with a local variable means you're pointing to memory that no longer is controlled, and is thus random
and uh, this isn't just chests or anything

=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:09

Ah.  I appreciate the explanation and the education.  Very interesting! üòÆ

=== @EmilyV99 (discord: Emily) 06/06/2022 23:09

this issue is with every combo
but, random memory be random

=== @EmilyV99 (discord: Emily) 06/06/2022 23:11


https://cdn.discordapp.com/attachments/983506007542087710/983508379249021048/zquest.exe
https://cdn.discordapp.com/attachments/983506007542087710/983508379920105513/zscript.exe
https://cdn.discordapp.com/attachments/983506007542087710/983508380368924762/zelda.exe
should fix

=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:12

Thanks, I'll try that.

=== @ Tsunami Tommy Reload the Shotty 06/06/2022 23:13

Yep, no weird text in the description of the same combo type help.  Thanks!

=== @EmilyV99 (discord: Emily) 06/09/2022 08:34

(meta) thread name was changed: ‚úÖüîíWeird Typo in Chest (Basic)  Combo Help Text.
## ‚úÖüîíCombo Advanced Paste has no checkbox for script? (#1476)
@ Moosh opened this issue on 06/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/984277846132404275



=== @ Moosh 06/09/2022 02:08

Is this lumped in with one of the other checkboxes? Or just not there at all? Real annoying for setting up large numbers of combo scripts

=== @EmilyV99 (discord: Emily) 06/09/2022 08:28

oh? crap
wait
yeah it has a script checkbox
...hmm
wait
OH
dammit
The `Effect` checkbox
is ON TOP of the `Script` checkbox
hiding it
@ Moosh

![image](https://cdn.discordapp.com/attachments/984277846132404275/984373883400491028/unknown.png)
someone forgot to increment the y value when they added a new box

=== @ Moosh 06/09/2022 08:30

haha, nice

=== @EmilyV99 (discord: Emily) 06/09/2022 08:34

@ Moosh this should fix
https://cdn.discordapp.com/attachments/984277846132404275/984374841580855297/zquest.exe
https://cdn.discordapp.com/attachments/984277846132404275/984374842239385650/zscript.exe
https://cdn.discordapp.com/attachments/984277846132404275/984374842696536064/zelda.exe
(meta) thread name was changed: ‚úÖüîíCombo Advanced Paste has no checkbox for script?
## Subscreen Counter - Only Selected Button Assignment (#1477)
@ InfinityD4 opened this issue on 06/09/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/984509509361885206



=== @ InfinityD4 06/09/2022 17:29

Especially now that we have X and Y buttons to work with, it would be nice to be able to have "Only Selected" counters that only show up when the item is assigned to the appropriate button.

=== @ Tsunami Tommy Reload the Shotty 06/09/2022 17:34

I.e  for bombs and arrows.   Useful.
## ZQuest - Select CSet from screen (#1478)
@ Alucard648 opened this issue on 06/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/984751075787690025



=== @ Alucard648 06/10/2022 09:29

Context menu command in ZQuest that selects CSet from screen ala Eyedropper from Paint.

=== @EmilyV99 (discord: Emily) 06/10/2022 09:41

`Alt+Shift+Click` does this already, for the record

=== @ Alucard648 06/10/2022 09:51

Thanks.

=== @ Alucard648 06/10/2022 09:52

But what about picking combo and Cset from placed FFC?

=== @EmilyV99 (discord: Emily) 06/10/2022 09:55

...fairly niche case, no way to do that now
## Hidden Bomb Item Unslectable With Delay (#1479)
@ HeroOfFireZC opened this issue on 06/10/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/984875140997316608



=== @ HeroOfFireZC 06/10/2022 17:42

The title isn't even close to the full story. The bug is that if the Bomb Item is hidden in the Subscreen, and then the Player gets Bomb Capacity and Ammo from an Item and the now should be revealed Bomb Item would occupy an empty subscreen button... it doesn't, until some sort of game update (like changing screens)

=== @ HeroOfFireZC 06/10/2022 17:43

By Hidden, I mean the QR `No Ammo Required to Display Subscreen Items` is toggled off, but the player also starts with the Bomb Item (set to give the player no Ammo or Capacity), and the Game Init has Bomb Ammo Capacity start at 0.

=== @ HeroOfFireZC 06/10/2022 17:45

If the player then picks up an item that increases Bomb Capacity over 0 (and also gives ammo), like a Bomb Bag, and the player has an empty button slot in their subscreen, the Bomb Item does not occupy the empty button slot, *and* does not appear in the Active Subscreen.
Upon changing screens, the game updates, and the Bomb Item will appear in the Button Slot and the Active Inventory now.
I put together a test quest to demonstrate this.

https://cdn.discordapp.com/attachments/984875140997316608/984876293009047633/SpawnChanger.qst
So, if you just go one screen north and get the Bomb bag, you'll see this bug in action.
If you grab the Wand first, which goes into Slot B, then go for the Bomb Bag, the bug does not occur.
## Specify Command Category in Docs (#1480)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 06/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/984896883115819008



=== @TheBlueTophat (discord: Coolgamer012345) 06/10/2022 19:08

Bit of a weird request, but it would be helpful if in the docs they specified which category (namespace?) functions were in, e.g. `Game`, `Screen`, etc. Sometimes I forget whether a specific function falls under a specific category and I have to scroll back up to where that section is defined. If each function just listed what type it was it would be helpful. For example, instead of:
```npc CreateNPC(int id);            ZASM Instruction: 
                    CREATENPCR
                    CREATENPCV

/**
* Creates an npc of the given type at (0,0). Use the NPC_ constants in
* std.zh to pass into this method. The return value is a pointer to the
* new NPC.
* The maximum number of NPCs on any given screen is 255. ZC will report an
* error to allegro.log if you try to create NPCs after reaching that maximum.
*
*/ Example Use: !#!```

It was something like:
```namespace: Screen
npc CreateNPC(int id);            ZASM Instruction: 
                    CREATENPCR
                    CREATENPCV

/**
* Creates an npc of the given type at (0,0). Use the NPC_ constants in
* std.zh to pass into this method. The return value is a pointer to the
* new NPC.
* The maximum number of NPCs on any given screen is 255. ZC will report an
* error to allegro.log if you try to create NPCs after reaching that maximum.
*
*/ Example Use: !#!```
(Note the extra line of text at the top. If not `namespace`, whatever the appropriate term would be).

I'm not sure how difficult this would be to add, I'm hoping it would be a fairly easy thing to automate but I don't know how the docs are made so I realize how it may be more tedium than is a priority.

=== @EmilyV99 (discord: Emily) 06/10/2022 19:12

The web docs are a better solution to this problem
they aren't complete, and haven't been worked on in a while though\

=== @TheBlueTophat (discord: Coolgamer012345) 06/10/2022 19:12

Oh yeah, didn't consider those since I forgot about them
## üíäüîìlweapon--weapon pointer not taken in account enemy vurnability pointers (#1481)
@ Mani Kanina opened this issue on 06/11/2022

Status: needs-testing

Labels: ['bug', 'needs-testing']

Source: https://discord.com/channels/876899628556091432/985006192764014652



=== @ Mani Kanina 06/11/2022 02:22

Essentially:
lweapons->Weapon pointer is ignored by enemies.
Enemies still check lweapon->ID when determining damage taken / effect taken
an lweapon->ID = LW_ARROW
when compared to an enemy with [Ignore] for arrow defence will just ignore the projectile, regardless of what lweapon->weapon is set to

=== @EmilyV99 (discord: Emily) 06/11/2022 02:26

???? ffs

=== @arceusplayer11 (discord: Deedee) 06/11/2022 03:02

shields however, *do* ignore ->Weapon == LW_FIRE
as in fire weapons will piece/ignore enemy shields presumably as "intended"

=== @EmilyV99 (discord: Emily) 06/26/2022 20:56

Oh for fucks sake
@ Lunaria is the arrow in this case created via script, rather than an engine item?
PFFFT ZORIA
YOU FUCKING

![image](https://cdn.discordapp.com/attachments/985006192764014652/990722396908556398/unknown.png)
here's a wonderful set of if checks
Note that the first one, if `w->parentitem` is `<0`, instantly RETURNS FROM THE FUNCTION.
So the `w->parentitem == -1 && w->ScriptGenerated`.... can never run.
this is SUUUUPER broken, and has been since Zoria added it. Time for a fix....

=== @EmilyV99 (discord: Emily) 06/26/2022 21:18

@ Lunaria see if this works?
https://cdn.discordapp.com/attachments/985006192764014652/990727675192688720/buildpack.zip

=== @EmilyV99 (discord: Emily) 06/28/2022 04:47

(meta) thread name was changed: üíäüîìlweapon--weapon pointer not taken in account enemy vurnability pointers
## New Dark Room Cone offset (#1482)
@arceusplayer11 (discord: Deedee) opened this issue on 06/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/985012748050128906



=== @arceusplayer11 (discord: Deedee) 06/11/2022 02:49

The LttP dark room cone doesn't extend behind Link much. I imagine it's to mimic LttP, but it's caused some nausea for me and others given how much is revealed. It might be less nausea inducing if there was a way to move the cone backwards slightly so that Link is more in the light.
## ZScript.exe crashing hangs ZQ (#1483)
@EmilyV99 (discord: Emily) opened this issue on 06/12/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/985630222785314876



=== @EmilyV99 (discord: Emily) 06/12/2022 19:42

@arceusplayer11 (discord: Deedee)
if the external parser crashes, ZQ hangs waiting on a termination signal for the console stuff that it will never get
if you can find a way to make it like, pop up an error and let you exit instead of hardlocking that would be nice
## subscreen editor script crashes zc? (#1484)
@EmilyV99 (discord: Emily) opened this issue on 06/12/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/985692884776923167



=== @EmilyV99 (discord: Emily) 06/12/2022 23:51

My fancy subscreen editor script is causing a ZC crash when interacting with the file menus. Need to get the debugger involved to see what's actually crashing.....

=== @EmilyV99 (discord: Emily) 06/13/2022 18:50

oh fun, the debugger has nothing to tell.

=== @connorjclark (discord: connorclark) 09/04/2022 03:26

Still crashing?
## Correct decoration sprite offset (#1485)
@ cbailey78 opened this issue on 06/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/987145652414869534



=== @ cbailey78 06/17/2022 00:04

When I use the decoration sprite in Generic combo type e.g. for making breaking blocks in Zelda 2, It is couple pixels higher.  Is it possible for devs to correct the offset so it's right on the grid?

=== @EmilyV99 (discord: Emily) 06/17/2022 05:11

@arceusplayer11 (discord: Deedee) ?
## Random Side Warp (#1486)
@ cbailey78 opened this issue on 06/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/987198914799230977



=== @ cbailey78 06/17/2022 03:36

I think we should have a random side warp like the random tile warp.

=== @EmilyV99 (discord: Emily) 06/24/2022 10:24

This would be cool
but
it would NOT be easy to implement
sidewarps have 4 states now, which is an even spacing of 2 bits, and they are packed in tightly
so it would require adding more memory to screen, and re-organizing the bit storage of the sidewarp/tilewarp data
...and making sure that gives the proper values to zscript still
Technically doable, but, a lot of work
## Alternate Save menu on Death and F6 (#1487)
@ Moosh opened this issue on 06/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/988766565740732437



=== @ Moosh 06/21/2022 11:25

Currently the only available Game Over/F6 screen uses some mildly esoteric terminology to anybody who isn't accustomed to Zelda 1. There's an alt Save screen accessible to ZScript with `ShowSaveScreen()` that has more descriptive labels and a warning prompt when quitting out. I figure it'd be nice for new users (and hopefully easy) to have a quest rule that swaps out the standard F6 menu for one of these.

=== @ P-Tux7 06/21/2022 18:25

My vote is for allowing the strings to be replaced (not actual strings just words) in Game Data or whatever because that would also help with translating quests

=== @EmilyV99 (discord: Emily) 06/21/2022 18:55

`ShowSaveScreen()` is from save point combos

=== @EmilyV99 (discord: Emily) 06/21/2022 18:56

and is completely different code to the normal save menu
and all of this stuff
is super janky
and frankly, F6 scripts exist for fully-customizable scripted F6 menus

=== @ Moosh 06/22/2022 00:49

The thought was for the (alarmingly high) number of people who can't manage even just compiling database scripts

=== @ Moosh 06/22/2022 00:51

But if it wasn't as smartly coded as it should be, that's fine. I assumed if the menu could be called up via a single function in ZScript it must be just as simple internally. Evidently not
## ‚úÖüîíAlt shortcuts broken (#1488)
@EmilyV99 (discord: Emily) opened this issue on 06/24/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/989697670769684560



=== @EmilyV99 (discord: Emily) 06/24/2022 01:05

@connorjclark (discord: connorclark) re: allegro 5

![image](https://cdn.discordapp.com/attachments/989697670769684560/989697698972192808/unknown.png)

=== @EmilyV99 (discord: Emily) 06/24/2022 01:06

Pressing `Alt+Q` is supposed to drop the `Quest` menu, but this no longer works (it instead behaves the same as just pressing `Q`).
Noticed this because `Alt+Q -> T` is my keyboard sequence for opening test mode
none of the menu options drop with alt

=== @connorjclark (discord: connorclark) 06/24/2022 18:00

Gonna debug this Saturday FYI. Its likely something in a5_keyboard.c

=== @connorjclark (discord: connorclark) 06/25/2022 20:26

ALT+ENTER works (see `onEnter`). Where is the code that handles the menu bar shortcuts?

=== @connorjclark (discord: connorclark) 06/25/2022 20:29

gui.c menu_alt_key

=== @connorjclark (discord: connorclark) 06/25/2022 21:02

...oh. this is in jwin.cpp :/

=== @connorjclark (discord: connorclark) 06/25/2022 21:23

got a lead. allegro legacy is emulating key events wrong: https://www.allegro.cc/manual/4/api/keyboard-routines/readkey#:~:text=Pressing%20alt%2Bkey%20returns%20only%20the%20scancode%2C%20with%20a%20zero%20ASCII%20code%20in%20the%20low%20byte.

=== @connorjclark (discord: connorclark) 06/25/2022 21:33

pushed a fix. also filed an issue upstream https://github.com/NewCreature/Allegro-Legacy/issues/27

=== @EmilyV99 (discord: Emily) 06/26/2022 20:36

confirmed fixed, nice
(meta) thread name was changed: ‚úÖüîíAlt shortcuts broken
## ‚úÖüîíSprite animation bug (#1489)
@ Majora opened this issue on 06/24/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/989803500907139102



=== @ Majora 06/24/2022 08:05

I set up generic combo and then I set up a sprite (under Sprite Data) of a poof animation. 

The animation seems to loop and show the beginning frame for a split second before properly vanishing. Shouldn't it just vanish after showing the last frame

Latest Nightly, allegro 5 debut build. 

Also don't mind my protagonist's true form (a frankenstein of several souls from several heroes) when she stabs.
![image](https://cdn.discordapp.com/attachments/989803500907139102/989803506389123092/2022-06-24_01-02-12.mp4)

=== @EmilyV99 (discord: Emily) 06/24/2022 08:14

(replying to @ Majora "I set up generic combo and th‚Ä¶"): what are the values of the poof animation?

=== @ Majora 06/24/2022 08:15

one moment

![image](https://cdn.discordapp.com/attachments/989803500907139102/989806043775250452/Screenshot_60.png)
this seems to happen with faster speed, I just made it slow to make it easier for me to see

=== @EmilyV99 (discord: Emily) 06/24/2022 08:19

Set the speed to be faster, where it still happens

https://cdn.discordapp.com/attachments/989803500907139102/989807068385013780/zelda.exe
and then run it in this exe
and give me the allegro.log after you watch the sprite do it once
err, and delete your allegro.log file before you cut the pot
(should make the pot print be at the top of the new file)

=== @ Majora 06/24/2022 08:21

gotcha, I will ping you with the info/stuff

=== @ Majora 06/24/2022 08:23

Update: Old Exe: seems to happen semi randomly (or maybe the frame isn't appearing because of allergro/windows display bullshit) EDIT: Based on the log definitely some windows display bullshit. the sprite is animating identically regardless of what I see.
speed 4

=== @ Majora 06/24/2022 08:26

@EmilyV99 (discord: EmilyV) Made from your .exe
https://cdn.discordapp.com/attachments/989803500907139102/989808802318671882/allegro.log

=== @ Majora 06/24/2022 08:31

I have two pots on screen, if its weird that the log has it twice

=== @EmilyV99 (discord: Emily) 06/24/2022 09:46

I see the issue, I think?

=== @ Majora 06/24/2022 09:47

yeah its like misaligned or something

=== @EmilyV99 (discord: Emily) 06/24/2022 09:47


https://cdn.discordapp.com/attachments/989803500907139102/989829140796567602/zelda.exe
Does that fix it?

=== @ Majora 06/24/2022 09:53

Looks like it!
![image](https://cdn.discordapp.com/attachments/989803500907139102/989830596249391114/2022-06-24_02-52-15.mp4)

https://cdn.discordapp.com/attachments/989803500907139102/989830611411808256/allegro.log
the first frame no longer appears and the numbers line up in the log.

=== @EmilyV99 (discord: Emily) 06/24/2022 10:18

(meta) thread name was changed: ‚úÖüîíSprite animation bug
## ‚úÖüîíZScript buffer editing broken (#1490)
@EmilyV99 (discord: Emily) opened this issue on 06/24/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/989986660085289000



=== @EmilyV99 (discord: Emily) 06/24/2022 20:13

@connorjclark (discord: connorclark)
![image](https://cdn.discordapp.com/attachments/989986660085289000/989986662627045476/unknown.png)
Program is hardlocked
`ZScript->Compile ZScript...->Edit`
definitely more urgent than #1488

=== @EmilyV99 (discord: Emily) 06/25/2022 00:25

`EditBoxView.cpp` line `364`: `vsync();` @connorjclark (discord: connorclark)

=== @EmilyV99 (discord: Emily) 06/25/2022 00:27


![image](https://cdn.discordapp.com/attachments/989986660085289000/990050489141968896/unknown.png)

=== @EmilyV99 (discord: Emily) 06/25/2022 00:28

Traces back to `a5_display.c`, `static void a5_display_vsync(void)`

=== @EmilyV99 (discord: Emily) 06/25/2022 00:30


![image](https://cdn.discordapp.com/attachments/989986660085289000/990051324064321556/unknown.png)
It goes here
finishes that `while` loop
and then hardlocks on the call right after

=== @EmilyV99 (discord: Emily) 06/25/2022 00:39

....just commenting out the `vsync` call seems to work OK, though not sure if it looks worse framerate wise as a result or not

=== @connorjclark (discord: connorclark) 06/25/2022 00:42

yeah just delete it
or maybe use custom_vsync??

=== @EmilyV99 (discord: Emily) 06/25/2022 00:43

It already has a call to `update_hw_screen()`
hmm
yeah, that does a similar effect as `custom_vsync`
I'm going to just abstract it out for now, incase we care later
because there are a fair few `vsync` calls
I'm not sure if they are all broken, though
which is
bleh
need to actually find where in the GUI they occur to check

=== @EmilyV99 (discord: Emily) 06/25/2022 00:46

hmm, they don't all seem to hang

=== @connorjclark (discord: connorclark) 06/25/2022 00:46

yeah I'd just fix this one place, I havent' seen an issue with any other places. not sure if that's b/c it's not used often (maybe custom_vsync is more common)? 

looks like it's used more often in gui code?

=== @EmilyV99 (discord: Emily) 06/25/2022 00:46

there are calls in scrollbars
and those work fine
so I'm now just very confused

=== @connorjclark (discord: connorclark) 06/25/2022 00:47

i'll look more into this (before the alt stuff) saturday
for now deleting just the one in zscriipt buffer gui seems good

=== @EmilyV99 (discord: Emily) 06/26/2022 20:37

fixed, as far as I can see, soo
(meta) thread name was changed: ‚úÖüîíZScript buffer editing broken
## ‚úÖüîíWarnings do not display console (#1491)
@EmilyV99 (discord: Emily) opened this issue on 06/25/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/990148940097802311



=== @EmilyV99 (discord: Emily) 06/25/2022 06:58

@arceusplayer11 (discord: Deedee) you broke a thing

![image](https://cdn.discordapp.com/attachments/990148940097802311/990148957659332628/unknown.png)
when you changed this
`zscript_had_warn_err` is not being read at all
it is intended to tell it to hold the console open due to *warnings OR errors*
right now, the console only holds open for errors
so you could be getting 5000 compile warnings.... and be entirely unable to read them at all because the compile window instantly closes!

=== @EmilyV99 (discord: Emily) 06/25/2022 07:01

....I'm probably just gonna rough patch it, feel free to change how I fix it

=== @arceusplayer11 (discord: Deedee) 06/25/2022 10:49

oops

=== @EmilyV99 (discord: Emily) 06/26/2022 20:37

(meta) thread name was changed: ‚úÖüîíWarnings do not display console
marking fixed as I patched it. Feel free to change how its' done if you want it any different, but, it works now, so.
## ‚ùåüîíffcscript.zh now bundled in std is broken (#1492)
@ Russ opened this issue on 06/25/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/990268971238445137



=== @ Russ 06/25/2022 14:55

In particular, ffcscript.zh 2.0.1 had two versions of CountFFCsRunning, one that took "char32 ptr" as an argument, another that took "int scriptnum" as an argument. 2.0.2 only has the latter function. Scripts will still compile fine, but any call of CountFFCsRunning that uses a string will simply fail to function. This appears to be the case for most functions in the header.
This feels particularly bad as it doesn't throw any error messages, so users would be none the wiser. Scripts that used the old functions that took a string as an argument simply stop functioning

=== @EmilyV99 (discord: Emily) 06/26/2022 20:43

Which scripts used that version?
It really isn't efficient to be using a string literal every time anyway
but, they were removed due to a separate issue
Also, the version with strings was NEVER posted anywhere, it was only included in the ZC package, hidden in a damn folder. I literally didn't know it existed until it caused compile errors with something else for Moosh.
There is a new function at the top, which takes the string, and returns the script ID. Using that is far preferred, as it also has an included error message indicating that the script was not assigned to a slot, which is much MORE user friendly for people setting up database scripts.
So, intentional update, of a header that was never posted in the DB, because Zoria wrote his update to it poorly.
(meta) thread name was changed: ‚ùåüîíffcscript.zh now bundled in std is broken

=== @EmilyV99 (discord: Emily) 06/26/2022 21:21

```cpp
if(int scr = CheckFFCScript("ScriptName"))
{
    ffc f = RunFFCScript(scr);
}```
## Item Pickup flags being not being readable or writable (#1493)
@ Russ opened this issue on 06/25/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/990301515853996062



=== @ Russ 06/25/2022 17:04

In 2.53, Zoria made certain Item->Pickup flags (most notably IP_FADE) read/writeable by script. This change does not appear to have made its way to 2.55, leading to inconsistent behaviour. It would be great if they could once again be made accessible by scripts

=== @EmilyV99 (discord: Emily) 06/26/2022 20:49

Err @ Russ
the code blocks I'm seeing in 2.53 and 2.55 for `itemsprite->Pickup` are identical

=== @EmilyV99 (discord: Emily) 06/26/2022 20:52

https://pastebin.com/xpAr9yCK (2.53)
https://pastebin.com/PzMkdheR (2.55)
my only guess would be this:```cpp
        if (( FFCore.GetQuestVersion() == 0x250 && FFCore.GetQuestBuild() < 33 ) //this ishowit looks in 2.53.1, Beta 25
            || ( FFCore.GetQuestVersion() < 0x250  ))
        {
            newpickup &= ~(ipBIGRANGE | ipCHECK | ipMONEY | ipBIGTRI | ipNODRAW | ipFADE);
        }```
which means, notably, that older quests need to be re-saved in a newer version in order to allow these to be writable

=== @EmilyV99 (discord: Emily) 06/26/2022 21:06

So, the question here is, what's actually wrong here? It looks all right...

=== @ Russ 06/26/2022 21:22

```item1->Pickup |= 64;```
This is what is set in my 2.53 quest

=== @EmilyV99 (discord: Emily) 06/26/2022 22:38

So yeah, this is janky as absolute shit and Zoria has no clue what he's doing
and needs to be re-written at some point....
## ‚úÖüîíCombo Editor Shortcut Not Working (#1494)
@ vlamart opened this issue on 06/26/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/990671778877669450



=== @ vlamart 06/26/2022 17:35

The shift and alt clicks on the effect and solid boxes don't do their respective shortcuts

=== @EmilyV99 (discord: Emily) 06/26/2022 20:07

have you tried this build? https://github.com/ArmageddonGames/ZeldaClassic/releases/tag/nightly-2022-06-25
connor just fixed something keyboardy there
#1488

=== @ vlamart 06/26/2022 20:21

Okay, just tested. Not working

=== @EmilyV99 (discord: Emily) 06/26/2022 20:36

@connorjclark (discord: connorclark) `src/gui/cornerselect.cpp`,
`int32_t newg_cornersel_proc(int32_t msg,DIALOG *d,int32_t)` ```cpp
bool shift = (key_shifts & KB_SHIFT_FLAG);
bool ctrl = (key_shifts & KB_CTRL_FLAG);```This is not reading these flags properly, it seems?

=== @connorjclark (discord: connorclark) 06/27/2022 00:31

Similar bug as with alt, fixed.
thanks @ vlamart

=== @EmilyV99 (discord: Emily) 06/27/2022 00:43


https://cdn.discordapp.com/attachments/990671778877669450/990779298493394964/alleg44.dll
that should be all that's needed to grab the fix @ vlamart
(meta) thread name was changed: ‚úÖüîíCombo Editor Shortcut Not Working

=== @connorjclark (discord: connorclark) 06/27/2022 01:13

I think you'd need to distribute the allegro-5.2 dll
uhhh
nvm

=== @EmilyV99 (discord: Emily) 06/27/2022 01:13

that's the only thing that changed according to msvc

=== @connorjclark (discord: connorclark) 06/27/2022 01:13

yeah that should be right.
nvm!
allegro legacy = basically a4, but with some tweaks on top. so dll still calls itself alleg44
I had made changes to its `a5` folder hence I thought it'd be in the a5 dll but.. nah
## ‚úÖüîíDialog redraws are visible (#1495)
@EmilyV99 (discord: Emily) opened this issue on 06/26/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/990718383941103667



=== @EmilyV99 (discord: Emily) 06/26/2022 20:41

When interacting with a dialog in a way that causes it to call for a redraw, you are able to see as each individual proc refreshes.

Realistically, it should not be drawing anything to the actual screen until `update_hw_screen()` is next called, which SHOULD prevent this flickering as everything redraws; blaming A5 upgrade for this, not sure what the hell is the specific cause though. @connorjclark (discord: connorclark)

![image](https://cdn.discordapp.com/attachments/990718383941103667/990718632394911864/2022-06-26_16-41-47.mp4)

=== @ vlamart 06/26/2022 22:54

Okay, I'm not crazy

=== @connorjclark (discord: connorclark) 06/27/2022 01:06

Fixed

=== @EmilyV99 (discord: Emily) 06/27/2022 01:08


![image](https://cdn.discordapp.com/attachments/990718383941103667/990785591329316884/unknown.png)
2 insertions, huh?
what was wrong?

=== @connorjclark (discord: connorclark) 06/27/2022 01:08

BTW, the issue was this:

Allegro legacy a5_display is now what draws to the actual screen, in its own thread. call it the display thread.

update_hw_screen blits the main screen to the bitmap that the display thread draws from. This only happens on the main thread

Notice there is a thread contention issue here, two threads can't access this bitmap at the same time

The gui code already resolved that by doing acquire_screen / release_screen in the gui code, within each components handling the for MSG_DRAW event.

However, it wasn't wrapping the entire check_for_redraw logic in a similar lock/release, which meant that the display thread would very likely do a redraw while the gui code was only partially done doing its thing

=== @EmilyV99 (discord: Emily) 06/27/2022 01:09

aaaah
makes sense
thread shenanigans are always troublesome

=== @EmilyV99 (discord: Emily) 06/27/2022 01:10

for anyone who cares to get the fix immediately
https://cdn.discordapp.com/attachments/990718383941103667/990786205140549682/alleg44.dll
(meta) thread name was changed: ‚úÖüîíDialog redraws are visible

=== @connorjclark (discord: connorclark) 06/27/2022 01:13

yes that should work

=== @ vlamart 06/27/2022 14:26

Not sure if same problem or just similar, but the mouse flashes on the tile and combo pages
## Palette Editor Copy & Paste colors between CSets (#1496)
@ Alucard648 opened this issue on 06/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/990735785017876610



=== @ Alucard648 06/26/2022 21:50

Title says all.

=== @EmilyV99 (discord: Emily) 06/26/2022 21:53

ctrl+click+drag from one to another
has existed for quite a while

=== @ Alucard648 06/26/2022 22:37

Aww.... Thnaks a lot for telling me. It`s never late to learn.

=== @ Alucard648 06/26/2022 22:55

Forgot to mention that most of these cool hotkey operated functions are undocumented inofficial documentation.
## ‚úÖüîíReassessing the sideview solid spike collision situation (#1497)
@ Moosh opened this issue on 06/28/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/991186907318997012



=== @ Moosh 06/28/2022 03:42

So this is an old argument I had with Zoria where I reported the same bug to him in three different circumstances and couldn't get him to budge on the current sideview damage combo collision code being broken and unacceptable. Best I could do at the time was talk him into adding the `Sideview Spike Detection Prior to 2.50.1RC1` compat rule. Emily asked about this in another channel though, so I figured it'd a good time to re-evaluate the behavior and talk about changing it again (FIXED fixed sideview damage combo collision, hooray)

=== @ Moosh 06/28/2022 03:45

So Exhibit A: Link will take damage stepping just one toe out onto this platform when a spiked combo is next to it. The combo does not to be solid flush with the platform, it just needs to be there at all. This is absolutely garbage for gameplay reasons but I can at least see Zoria's argument for the behavior being correct. There is a spike there and Link is touching it. Okay fine.
![image](https://cdn.discordapp.com/attachments/991186907318997012/991187450946928740/zc_screen00181.png)
Exhibit B: I have now moved the platform up half a tile. Link still takes damage while walking out over the spike. Absolute madman shit here, it's not even remotely colliding
![image](https://cdn.discordapp.com/attachments/991186907318997012/991187698993872976/zc_screen00182.png)

=== @ Moosh 06/28/2022 03:47

Exhibit C: Same as above, but this time the spike is an FFC moving upwards. Here it hits me once again a full half a tile below me
![image](https://cdn.discordapp.com/attachments/991186907318997012/991187969656504371/zc_screen00183.png)

=== @EmilyV99 (discord: Emily) 06/28/2022 03:47

oh fun
So is that with or without the current QR checked?
And what does the other state DO?

=== @ Moosh 06/28/2022 03:48

This is with the compat rule unchecked. With it checked none of this happens but solid damage combos don't work in sideview at all

=== @EmilyV99 (discord: Emily) 06/28/2022 03:48

oh
fun

=== @ Moosh 06/28/2022 03:49

Zoria insisted at the time that extending Link's hitbox down a full half tile in sideview was just the only reasonable way to do it. I can't say I don't believe him that rewriting this collision would be a lot of work but he had to be smashed out of his mind to think this was a good look for the engine

=== @ tim 06/28/2022 03:50

i cant even begin to wrap my head around that
totally disagree with that

=== @ Moosh 06/28/2022 03:50

Incidentally this discussion I believe was what drove me to write this script: https://www.purezc.net/index.php?page=scripts&id=354

=== @ tim 06/28/2022 03:51

ideally damage combos in sideview should have some leeway
stuff like screen A and B should never hurt

=== @ Moosh 06/28/2022 03:52

I would agree. I'd say half of Link's sprite should be standing on the solid damage before it can hurt

=== @EmilyV99 (discord: Emily) 06/28/2022 03:52

yeah, this is.... bleh
I can see why zoria did what he did

=== @ tim 06/28/2022 03:53

ideally some kind of falling should contribute to actually hitting the spikes

=== @ Moosh 06/28/2022 03:53

I don't think the fix itself was his doing at least. This was added before he came on as dev, he just refused to fix it

=== @EmilyV99 (discord: Emily) 06/28/2022 03:53

(Keeping in mind, afaik, what he did was not make it hit you lower- I don't think he was responsible for that, it's old?)
yeah
he just gave no fix, which is understandable
because
this
is a fucking MESS

=== @ Moosh 06/28/2022 03:54

I haven't made a sideview quest in a long while and the compat rule does work for my purposes. So no rush here
Just thought this was worth bringing up again

=== @EmilyV99 (discord: Emily) 06/28/2022 03:55

I feel like the answer
would be to add `x+8,y+16` as an exact pixel check
and nothing else

=== @ Moosh 06/28/2022 03:57

That makes sense. Though I'd do different pixel checks depending on Link's direction since +8 isn't centered
+7 for left, +8 for right, +7&+8 for up/down

=== @ Moosh 06/28/2022 04:00

The other thing is that solid and nonsolid damage combos are using the same collision code right now I think. Ideally Link should be doing one pass for nonsolid combos using his full combo collision rect and then a second pass for solid using reasonable points along the edges of his hitbox

=== @EmilyV99 (discord: Emily) 06/28/2022 04:09

errr
check combo rules for `"Better Sideview Damage Combo Detection"`
and tell me if that does anything
because I think that's a deedee addition

=== @EmilyV99 (discord: Emily) 06/28/2022 04:12

@ Moosh

=== @ Moosh 06/28/2022 04:12

Oh!
be funny if I just goldfish brained and Deedee already fixed this one

=== @EmilyV99 (discord: Emily) 06/28/2022 04:13

and I don't know how it works at all, because it isn't in the function I was just trying to edit to add this
so if that like, works
```cpp
{ "Better Sideview Damage Combo Detection", qr_LESS_AWFUL_SIDESPIKES, 
    "When enabled, damage combos in sideview will only do their"
    " check if the Player is standing on solid ground and is"
    " mostly on the damage combo. This does not affect the"
    " check for bonking your head on a damaging ceiling; see"
    " 'Sideview Spike Detection Prior to 2.50.1RC3' for that."},
```

=== @ Moosh 06/28/2022 04:15

That seems to break solid spike top surfaces altogether?
never mind I'm a dumbass, was messing with effect squares ü§¶

=== @EmilyV99 (discord: Emily) 06/28/2022 04:16

pffft
effect squares would do that

=== @ Moosh 06/28/2022 04:17

Yeah this is basically exactly the behavior I wanted. I guess the only bug here is when I went to make a test quest to confirm the bug was still there, this rule wasn't on by default

=== @EmilyV99 (discord: Emily) 06/28/2022 04:19

haha

=== @ Moosh 06/28/2022 04:19

Sorry for taking your time on a bug that was already solved. Maybe check that rule on like every preset that exists

=== @EmilyV99 (discord: Emily) 06/28/2022 04:19

*holds CTRL+Z to undo 10 minutes of coding*
There's literally a function `alwaysOnRules()` for things like this

=== @EmilyV99 (discord: Emily) 06/28/2022 04:22

I literally had a fix ready to test
it was jank as fuck and probably awful
but ready to test
and I went to find the other spike QR's description to copy it
and when I ctrl+F'd for `SPIKE`, I found the OTHER one
and just went `oh. Deedee was here already. Bleh.`

=== @ Moosh 06/28/2022 04:23

Feature Request: Teach the end user to read

=== @EmilyV99 (discord: Emily) 06/28/2022 04:24

XD
Just pushed a change
so, uh, now the rule should be on, by default

=== @EmilyV99 (discord: Emily) 06/28/2022 04:46

(meta) thread name was changed: ‚úÖüîíReassessing the sideview solid spike collision situation
## ‚úÖüîíZquest crashes after making 4095th string. (#1498)
@ Tabletpillow opened this issue on 07/03/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/992984989073416242



=== @ Tabletpillow 07/03/2022 02:47

Name says it all.
My quest is big on story and intractable npcs so I naturally came across it when I'm making new strings.
Idk if it just be my quest that is having the problem but I can send it over if needed.
The bug is present as of alpha 107.

=== @ Tabletpillow 07/03/2022 18:44

Bump

=== @ Tabletpillow 07/04/2022 00:27

The quest in question:https://github.com/Tabletpillowlamp/ZC-Rosemaster
Open the quest on zquest and create a new string, Zquest will lag for a few seconds before it crashes.

=== @connorjclark (discord: connorclark) 07/04/2022 00:45

Me or someone else would look at this eventually, no need to bump. Thanks for providing the quest file

=== @ Tabletpillow 07/04/2022 00:46

I think I may find the culprit
![image](https://cdn.discordapp.com/attachments/992984989073416242/993316847531335700/unknown.png)
This is in std_constants
Could this be the reason?

=== @EmilyV99 (discord: Emily) 07/04/2022 01:39

No, that has nothing to do with anything
Nor would it likely be anything in std

=== @ P-Tux7 07/04/2022 02:46

It would be in the ZQuest code right? Not the included ZC scripts

=== @EmilyV99 (discord: Emily) 07/04/2022 03:24

^

=== @ Tabletpillow 07/05/2022 03:42

Oh I see, is it just some bug?
Since the actual limit should be 65519, right?

=== @connorjclark (discord: connorclark) 07/05/2022 03:43

I just started looking into this.

=== @connorjclark (discord: connorclark) 07/05/2022 03:50

probably unrelated... but it crashes when the file is selected to load but before it even loads (just after choosing it in the file dialog selector)... but only your qst file... üëÄ

=== @connorjclark (discord: connorclark) 07/05/2022 03:51

jk it's any, just random, hmm

=== @connorjclark (discord: connorclark) 07/05/2022 03:59

as for the string bug:

it doesnt crash when I make more, but when I save and reload all the strings are gone except the ones I made
so.... be careful üôÇ
hope you do backups

=== @connorjclark (discord: connorclark) 07/05/2022 05:06

found it
![image](https://cdn.discordapp.com/attachments/992984989073416242/993744535458938940/unknown.png)
this is why üåà `std::vector` exists

=== @connorjclark (discord: connorclark) 07/05/2022 05:09

hm... although it is expanded to the proper size before the strings are read... so its something else

=== @EmilyV99 (discord: Emily) 07/05/2022 05:10

oh, hmmm
it reallocates the memory when it tries to make the new one
because it only allocates enough for 4096 to start

=== @connorjclark (discord: connorclark) 07/05/2022 05:18

i get this when I load the qst file, make some strings, and re-open the qst file. But not if I do the same but close the program before loading the qst file again
![image](https://cdn.discordapp.com/attachments/992984989073416242/993747771754565732/unknown.png)

=== @connorjclark (discord: connorclark) 07/05/2022 05:19

no fucking idea what fix_string_list is for

=== @connorjclark (discord: connorclark) 07/05/2022 05:28

ok so the strings are being read (i see values being written to MsgStrings in readstrings) but when I go to the Strings window it's all `(none)`

=== @connorjclark (discord: connorclark) 07/05/2022 05:54

it's something to do with msglistcache
i'm giving up though

=== @ Tabletpillow 07/05/2022 06:10

I see, thanks for helping moving forward this problem.
Yeah this quest might be too ambitious for my own good. 
I still have hopes this will work out tho.

=== @connorjclark (discord: connorclark) 07/05/2022 19:28

what is the purpose of msglistcache
does it need to be cleared or something when the MsgStr array is expanded??

=== @EmilyV99 (discord: Emily) 07/05/2022 19:32

<:nekoshrug:869489800271503400>
I think it has something to do with the sorting
Because you can manually re-order strings, without changing their index

=== @connorjclark (discord: connorclark) 07/05/2022 19:38

why, just to organize things better without the screen datas changing?

=== @EmilyV99 (discord: Emily) 07/05/2022 19:38

Yep

=== @connorjclark (discord: connorclark) 07/05/2022 19:38

got it.
any problem with just updating all the screen datas when you do move a string?
always good to kill caches
esp when they make bugs

![image](https://cdn.discordapp.com/attachments/992984989073416242/993964322256588890/unknown.png)

=== @EmilyV99 (discord: Emily) 07/05/2022 19:50

(replying to @connorjclark (discord: connorclark) "any problem with just updatin‚Ä¶"): And all the script files that are external and can't beupdated?

=== @connorjclark (discord: connorclark) 07/05/2022 19:51

oh do scripts often reference strings
hmm
i guess in that case strings should have labels :/
but too late for that

=== @connorjclark (discord: connorclark) 07/05/2022 20:19

not a real fix, but will be good enough I think. pushed the bug to happen at 8192 strings üòõ

=== @connorjclark (discord: connorclark) 07/05/2022 20:21

going afk now but @ Tabletpillow you can get a fixed version to test out in about 20 minutes when this build finishes https://github.com/connorjclark/ZeldaClassic/actions/runs/2618659587
it'll be posted here https://github.com/connorjclark/ZeldaClassic/releases

=== @ Tabletpillow 07/05/2022 20:23

Thank you!

=== @ Tabletpillow 07/05/2022 20:30

I think 8192 would be enough for me but wondering if there will be plans to further expand that.

=== @EmilyV99 (discord: Emily) 07/05/2022 20:30

I mean, it should be able to go to 65535 once the bug is actually fixed

=== @connorjclark (discord: connorclark) 07/05/2022 20:30

It's a bandaid.
Honestly if it happens again probably will just bump it again
The only reason not to go to Max is that it's a lot of memory
Well kind of a lot

=== @ Tabletpillow 07/05/2022 20:34

Oh yeah I can see that.
One question, is it possible to access a file where you could edit all the strings through an external text editor like notepad?

=== @EmilyV99 (discord: Emily) 07/05/2022 20:36

The problem is that strings are not just text, all the formatting info is in there too

=== @connorjclark (discord: connorclark) 07/05/2022 20:39

Not in the easy way you probably want
But if you know python... Lol

=== @ Tabletpillow 07/05/2022 20:50

I know a bit of python, I would be interested.
Is the file accessible?
for the non-dev user?

=== @connorjclark (discord: connorclark) 07/05/2022 20:51

(replying to @ Tabletpillow "for the non-dev user?"): Not at all
https://github.com/connorjclark/zquest-data

=== @ Tabletpillow 07/05/2022 20:52

Ah I see.
Thanks again for the zquest file!

=== @connorjclark (discord: connorclark) 07/05/2022 20:52

See examples folder
Release is done let us know if it crashes

=== @ Tabletpillow 07/05/2022 21:01

Yeah I'll test this out when I get home.

=== @ Tabletpillow 07/06/2022 15:52

@connorjclark (discord: connorclark) One thing, how do you test out the new build? I don't see a zquest file on github. Do I have to make it?

=== @connorjclark (discord: connorclark) 07/06/2022 16:02

https://github.com/connorjclark/ZeldaClassic/releases/tag/nightly-2022-07-05

=== @ Tabletpillow 07/06/2022 16:11

Thanks!

=== @ Tabletpillow 07/06/2022 16:59

The strings worked!
But the midis do feel like they have some slowdowns. Not sure if that's an error caused by that fix.

=== @ Tabletpillow 07/06/2022 17:42

Oh yeah, and also scripts crashes. Maybe this would require a new thread.

=== @connorjclark (discord: connorclark) 07/06/2022 17:52

Yes... this is done.

=== @connorjclark (discord: connorclark) 09/04/2022 03:25

(meta) thread name was changed: ‚úÖüîíZquest crashes after making 4095th string.
## ‚úÖQR - Fast Counter Drain (#1499)
@ Alucard648 opened this issue on 07/03/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/993267491662999702



=== @ Alucard648 07/03/2022 21:30

So you wont hear counter drain sound too long after claiming huge treasure, or purchasing expensive items.

=== @EmilyV99 (discord: Emily) 07/16/2022 18:21


![image](https://cdn.discordapp.com/attachments/993267491662999702/997930955023069235/unknown.png)
Draining from `999` rupees to `0` takes `130` frames instead of `512`

=== @EmilyV99 (discord: Emily) 07/16/2022 18:23

(meta) thread name was changed: ‚úÖQR - Fast Counter Drain
## ‚úÖüîízscript assert hit on function GetEnemy (#1500)
@connorjclark (discord: connorclark) opened this issue on 07/04/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/993306599080857702



=== @connorjclark (discord: connorclark) 07/04/2022 00:05

name is `GetEnemy`
num params is `4`

there is no `GetEnemy` in `functions` so this hits the assert and aborts

an aside, this also causes zquest to abort (it doesn't know what to do when the zscript program just crashes like this)
![image](https://cdn.discordapp.com/attachments/993306599080857702/993306606525751466/unknown.png)

=== @connorjclark (discord: connorclark) 07/04/2022 00:08

cc @EmilyV99 (discord: EmilyV) related to your last change, which deleted `"GetEnemy"`

=== @connorjclark (discord: connorclark) 07/04/2022 00:09

the script i'm compiling is just the default buffer including the standard header

=== @EmilyV99 (discord: Emily) 07/04/2022 01:50

Ah fek, I'm stupid

=== @EmilyV99 (discord: Emily) 07/04/2022 01:52

I only removed one block related to those functions, when I needed to remove both
You should just be able to remove the other part

=== @connorjclark (discord: connorclark) 07/04/2022 20:47

> [Error] include/std_zh/std_functions.zh Line 789 @ Column 1 - Line 792 @ Column 2 - Error S004: Function DegtoRad was already declared with that type signature.
new error

=== @EmilyV99 (discord: Emily) 07/04/2022 20:47

?
That shouldn't happen

=== @connorjclark (discord: connorclark) 07/04/2022 20:50

nvm
I had old headers

=== @EmilyV99 (discord: Emily) 07/08/2022 20:26

(meta) thread name was changed: ‚úÖüîízscript assert hit on function GetEnemy
## EntranceExit broken return squares (#1501)
@ vlamart opened this issue on 07/05/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994019265080463360



=== @ vlamart 07/05/2022 23:17

The Entrance/Exit warp type no longer follows the arrival square, always spawning hero at (0, 0) instead

=== @connorjclark (discord: connorclark) 07/05/2022 23:22

Do you know what version this first started?

=== @ vlamart 07/05/2022 23:23


![image](https://cdn.discordapp.com/attachments/994019265080463360/994020735225966664/20220705_172323.jpg)

=== @connorjclark (discord: connorclark) 07/05/2022 23:30

can't reproduce
try the latest nightly https://github.com/ArmageddonGames/ZeldaClassic/releases/tag/nightly-2022-07-05

=== @ vlamart 07/05/2022 23:47


https://cdn.discordapp.com/attachments/994019265080463360/994026809287004170/CAMlvl0-1.qst
Must be quest specific or a mistake I'm making then, try a test on screen 3:63, and just walk up the stairs

=== @EmilyV99 (discord: Emily) 07/06/2022 00:06

Assuming the QR `Quest->Options->Combo->"Use Warp Return Points Only"` is off, if you're using an arrival square (green) instead of a return square (blue)?

=== @ vlamart 07/06/2022 00:10

It is off, and I am using the blue return point A

=== @EmilyV99 (discord: Emily) 07/06/2022 00:11

...if it is off, you should be using the green square, not the blue return point
as far as I understand

=== @ vlamart 07/06/2022 00:15

But wouldn't that assume it should have consistent behaviour between warp types? Because if I use insta-warp in Tile Warp settings, it warps to the correct blue square

=== @EmilyV99 (discord: Emily) 07/06/2022 00:22

I think it's a hardcoded feature of entrance/exit warps

=== @ vlamart 07/06/2022 00:23

This feels new because it worked before

=== @ vlamart 07/06/2022 00:26

Could it have something to do with warping to the same DMap (different screen of course)?

=== @EmilyV99 (discord: Emily) 07/06/2022 00:32

<:nekoshrug:869489800271503400>
you can check it in 2.50.2

=== @ vlamart 07/06/2022 00:37

I'll check it tomorrow

=== @ vlamart 07/06/2022 14:46

Oh, so the problem is using Entrance/Exit between two tile warps. It works correctly between a tile warp and side warp

=== @EmilyV99 (discord: Emily) 07/06/2022 14:47

...? "Between two tile warps"?
A warp is a warp, what warp you have going the other way shouldn't affect it at all

=== @ vlamart 07/06/2022 14:49

ü§∑‚Äç‚ôÄÔ∏è
It's strangely aware

=== @EmilyV99 (discord: Emily) 07/06/2022 14:51

Frankly, my advice is "don't use entrance/exit ever for any reason"

=== @ vlamart 07/06/2022 14:51

Agreed

=== @EmilyV99 (discord: Emily) 07/06/2022 14:51

That's been what I've always done lol
The question is, is this behavior different from 2.50.2?
I wouldn't expect it to be
## Button Spam causes arrow's counter to keep going down (#1502)
@ Lost Attempt opened this issue on 07/06/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994113538324955257



=== @ Lost Attempt 07/06/2022 05:32

if you spam the item button that has the arrow, the counter used goes down even when the arrow is on "cooldown"

![image](https://cdn.discordapp.com/attachments/994113538324955257/994113601738649630/2022-07-05_22-31-12.mp4)

=== @EmilyV99 (discord: Emily) 07/06/2022 12:18

....is that an engine arrow?
Because, that does not happen when I test it

=== @ Lost Attempt 07/06/2022 16:18

yep
and i'm pretty sure i have the most recently released build

=== @ Lost Attempt 07/06/2022 16:20

it *might* be a bug for the x64 release
lemme check

=== @EmilyV99 (discord: Emily) 07/06/2022 16:24

aye, that'd make sense, I tested on x86

=== @ Lost Attempt 07/06/2022 16:27

no it's the same. idk what's goin on

=== @ Lost Attempt 07/06/2022 16:29

huh
turns out it's specific to the cambria tileset qst

=== @EmilyV99 (discord: Emily) 07/06/2022 16:29

Oh?
Screenshot the item editor for the arrow item?

=== @ Lost Attempt 07/06/2022 16:31


![image](https://cdn.discordapp.com/attachments/994113538324955257/994279381591674920/Screenshot_2022-07-06_093053.png)

=== @EmilyV99 (discord: Emily) 07/06/2022 16:33

Does it have any script attached?

=== @ Lost Attempt 07/06/2022 16:34

nope
also another thing
now it's not doing it

=== @EmilyV99 (discord: Emily) 07/06/2022 16:34

. . . ? ? ? ? ?

=== @ Lost Attempt 07/06/2022 16:35

*idk either* it just...fixed itself

=== @EmilyV99 (discord: Emily) 07/06/2022 16:40

Wonderful, lol

=== @ Lost Attempt 07/06/2022 16:41

ill see if it comes back later
gotta get to work

=== @ Lost Attempt 07/07/2022 04:24

No matter what i try it just doesn't seem to want to replicate. Like it's tryna make me look like a fool.
## ‚úÖScrolling through select options crashes zq (#1503)
@ Lost Attempt opened this issue on 07/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994427869566619699



=== @ Lost Attempt 07/07/2022 02:21

When i scroll down different select options (select item, select object type, etc) by holding down the mouse while selecting things causes zq to crash

=== @ Lost Attempt 07/07/2022 02:24


![image](https://cdn.discordapp.com/attachments/994427869566619699/994428624893640754/2022-07-06_19-23-17.mp4)

=== @ Lost Attempt 07/07/2022 02:27

scrolling with arrow keys or using the scrollbar works fine though

=== @connorjclark (discord: connorclark) 07/07/2022 03:19

What version are you using

=== @ Lost Attempt 07/07/2022 03:22

the most recent nightly build posted in [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594)
happens with both x64 and x86

=== @connorjclark (discord: connorclark) 07/09/2022 04:56

I believe i fixed this. will post a build here later.

=== @ Lost Attempt 07/09/2022 04:57

Nice
Lemme know so i can test
<:LC_ThumbsUp:903180213918240780>

=== @connorjclark (discord: connorclark) 07/09/2022 05:37

https://github.com/connorjclark/ZeldaClassic/releases

=== @ Lost Attempt 07/09/2022 06:08

it seems to still happen

=== @connorjclark (discord: connorclark) 07/09/2022 06:43

oh I see it too. I fixed a similar bug, confused it with this

=== @ Lost Attempt 07/09/2022 06:45

np

=== @connorjclark (discord: connorclark) 07/09/2022 06:49

ok noooooow i fixed it
silly bug in allegro legacy

![image](https://cdn.discordapp.com/attachments/994427869566619699/995220050703286373/unknown.png)
got stuck in that loop 5ever
b/c it wasn't updating current_time

=== @ Lost Attempt 07/09/2022 06:59

ahh i gotcha

=== @connorjclark (discord: connorclark) 07/10/2022 01:01

(meta) thread name was changed: ‚úÖScrolling through select options crashes zq
## ‚úÖüîíScripts not working in builds past 28th of June (#1504)
@ Runa üíúüå∏ opened this issue on 07/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994526638853341194



=== @ Runa üíúüå∏ 07/07/2022 08:53

So in builds past 28th of June, scripts break when recompiled in those versions. It compiles without errors, but in-game the scripts do not work. 
Examples: Newbie Boss crashes the game just straight up.
Newbie Item freezes for a second when creating the item, and things like projectile sprite rotation doesn't work at all.

=== @connorjclark (discord: connorclark) 07/08/2022 21:44

@EmilyV99 (discord: EmilyV) not ruling out a5 being the cause but this is more likely related to recent zasm opts

=== @EmilyV99 (discord: Emily) 07/08/2022 21:57

@ Russ (adding to thread)
Is there any error output to the console if it's open?

=== @ Russ 07/08/2022 21:57

Not that I could see. Let me turn on expanded logging though
No script errors printed at least

=== @EmilyV99 (discord: Emily) 07/08/2022 21:58

can I have a quest file with an easily reproducable crash?
(I haven't had this happen in any of my recent test quests, so, it isn't just EVERYTHING being broken, it must be something specific)

=== @ Russ 07/08/2022 21:59

Nope. Nothing prints
Sure thing. Give me a bit to get something together

=== @EmilyV99 (discord: Emily) 07/08/2022 22:00

thankfully, hard crashes are usually not that hard to track down, because debug mode in MSVC can show exactly where the crash line is

=== @EmilyV99 (discord: Emily) 07/08/2022 22:01

the thing that confuses me here
is there's only one commit that is likely to be the cause in the timeframe listed
....but, nothing IN that commit looks even remotely suspicious
unless you were calling one of a very small set of functions that *were not documented anywhere* so you wouldn't know they existed to call, but, if you were, that should fail *compile*, not *run*

=== @TheBlueTophat (discord: Coolgamer012345) 07/08/2022 22:28

would it be worth posting the lone of code in question

=== @ Russ 07/08/2022 22:33

The lone bit of code is an absolutely massive custom subscreen integrated with a whole bunch of global systems, so probably not the easiest thing to do

=== @TheBlueTophat (discord: Coolgamer012345) 07/08/2022 22:53

I was referring to the line of code Emily was saying that the debugger stops at
üßç‚Äç‚ôÇÔ∏è

=== @EmilyV99 (discord: Emily) 07/08/2022 22:54

I would need a quest file to run to test that

=== @EmilyV99 (discord: Emily) 07/09/2022 01:24

(replying to @ Russ "Sure thing. Give me a bit to‚Ä¶"): [3.5 Hours Later]

=== @EmilyV99 (discord: Emily) 07/09/2022 01:49

~6pm to ~9:30pm is 3.5 hours

=== @ Russ 07/09/2022 01:56

Sorry, sorry
Am working on the official release for the quest this bug is in

=== @ P-Tux7 07/09/2022 02:04

oh sorry
Also just saying... something more important than ZC could have unexpectedly happened

=== @EmilyV99 (discord: Emily) 07/09/2022 02:05

I mean yeah, no rush
it's just a matter of `without a test quest to debug I can't start fixing this`

=== @EmilyV99 (discord: Emily) 07/09/2022 03:28

OK, so
Looking through the quest in question
Not a single thing appears related to any of the opcodes altered in this commit: (https://github.com/ArmageddonGames/ZeldaClassic/commit/2da2521062cbd0f9630ebf6d1125d9e232561ff6)

=== @EmilyV99 (discord: Emily) 07/09/2022 03:30

So, more likely to be the commits around June 24th?

=== @connorjclark (discord: connorclark) 07/09/2022 03:31

What we need is a quest file and an exact screen that runs a script you say causes the game to crash
Until then it just takes too long for us to figure out what you're seeing

=== @EmilyV99 (discord: Emily) 07/09/2022 03:32

I have a test quest that causes the crash
though it isn't fast to do so

=== @connorjclark (discord: connorclark) 07/09/2022 03:32

ooo

=== @EmilyV99 (discord: Emily) 07/09/2022 03:32


![image](https://cdn.discordapp.com/attachments/994526638853341194/995170522818150440/unknown.png)
That's where the debugger broke
which uhh
doesn't exactly help much
Not a single error printout in the console

=== @connorjclark (discord: connorclark) 07/09/2022 03:33

Why no sources?

=== @EmilyV99 (discord: Emily) 07/09/2022 03:34

Great question

=== @connorjclark (discord: connorclark) 07/09/2022 03:34

Is that normal for you? In debug mode and on main thread I'd expect a stack trace etc
Weird

=== @EmilyV99 (discord: Emily) 07/09/2022 03:34

I would expect it to give me an exact line of code
Usually if I get disassembly, it crashed in some `std::` thing
or, well, some *obscure* thing
Usually like, an `std::vector`, I still get normal code

=== @connorjclark (discord: connorclark) 07/09/2022 03:35

What does the stack trace panel say
Bottom right ish

=== @EmilyV99 (discord: Emily) 07/09/2022 03:35

(that was taken a while ago)
(gonna need to re-run it)

=== @EmilyV99 (discord: Emily) 07/09/2022 03:37

UHHH

![image](https://cdn.discordapp.com/attachments/994526638853341194/995171718123487232/unknown.png)
Completely different crash now
this time on loading the quest

![image](https://cdn.discordapp.com/attachments/994526638853341194/995171894145847306/unknown.png)
....OH
FUCK ME

![image](https://cdn.discordapp.com/attachments/994526638853341194/995171970947760159/unknown.png)


=== @EmilyV99 (discord: Emily) 07/09/2022 03:40

Oh, that isn't even pure new code
it's a line that was copy-pasted from another spot
so, how the fuck is it not crashing in the other spot????
Oh
Because I am fucking STUPID


=== @EmilyV99 (discord: Emily) 07/09/2022 03:46

Ahk
THAT is fixed now
and the other error..... appears to be in a related area
@connorjclark (discord: connorclark)
```cpp
void CScriptDrawingCommands::push_commands(CScriptDrawingCommands* other, bool del)
{
    commands.insert(commands.end(), other->commands.begin(), other->commands.end());
    count += other->count;
    if(del) delete other;
}```
It's crashing on the `insert`
`other->commands` is length `7`
`commands` is capacity `0`
......and it starts lagging as it approaches this crash.
So, uh, I'm definitely feeling like there's a memory leak happening here
and it's running out of memory and crashing
....oh
the fucking
destructor
for that class
is empty
oh, but it's data is stored in other structs in it
which DO have destructors

=== @EmilyV99 (discord: Emily) 07/09/2022 03:50

AHA, that one is missing a destructor
and it has a fucking whole bitmap pointer

=== @EmilyV99 (discord: Emily) 07/09/2022 03:52

(meta) thread name was changed: ‚ùóScripts not working in builds past 28th of June

=== @EmilyV99 (discord: Emily) 07/09/2022 03:57

(replying to @EmilyV99 (discord: Emily) "AHA, that one is missing a de‚Ä¶"): ....and fixing that didn't fix the issue

=== @EmilyV99 (discord: Emily) 07/09/2022 03:59

Ahk
that's it for tonight
https://github.com/ArmageddonGames/ZeldaClassic/commit/ce8f29d99e8cd5f3f0daecf8afffb7e312371d28
This is the faulty commit, as far as I can see @connorjclark (discord: connorclark)
hopefully you can take a crack at it to see what's wrong
The entire set of classes in `script_drawing.h` used to only ever be created once, so memory leaks weren't noticable

=== @EmilyV99 (discord: Emily) 07/09/2022 04:02

Pushed the 2 small fixes I found
no clue what else here is broken, but it is still here
![image](https://cdn.discordapp.com/attachments/994526638853341194/995178225569378425/unknown.png)

=== @EmilyV99 (discord: Emily) 07/09/2022 04:11

Hmm, I do have an idea for a simple fix though
let's see if it works

=== @connorjclark (discord: connorclark) 07/09/2022 04:20

these memsets are wrong.
![image](https://cdn.discordapp.com/attachments/994526638853341194/995182761390387310/unknown.png)
its a std container class can you just do clear?

=== @EmilyV99 (discord: Emily) 07/09/2022 04:21

I copied what was there before
which is what it's done for over a decade
<:nekoshrug:869489800271503400>

=== @connorjclark (discord: connorclark) 07/09/2022 04:22

ok, it was wrong before. you cant use memset with std vectors
no wonder the memory is sad
it seems like the intention is to clear it

=== @EmilyV99 (discord: Emily) 07/09/2022 04:22

That is the intention

=== @connorjclark (discord: connorclark) 07/09/2022 04:22

try calling clear there and see if it stops?
cool

=== @EmilyV99 (discord: Emily) 07/09/2022 04:22

though, I would doubt that's the issue
given that that's been like that
for over a decade
and this issue appeared about a week and a half ago

=== @connorjclark (discord: connorclark) 07/09/2022 04:23

undefined behavior is a tricky beast

=== @EmilyV99 (discord: Emily) 07/09/2022 04:23

you see, what I am worried about
is this piece of shit
`void* ptr; //will be changed later`
sitting in `CScriptDrawingCommandVars`
because that's a fucking raw pointer
which could be either to an `std::string` or `std::vector<int32_t>` (or null)
.....which I don't see anything that clears?

=== @TheBlueTophat (discord: Coolgamer012345) 07/09/2022 04:24

If you're not in control of your fear you're not in control of the code
- Coolgamers 7/9/2022
Interesting issue though.

=== @TheBlueTophat (discord: Coolgamer012345) 07/09/2022 04:26

Is it time to change the code, as the comment says?

=== @EmilyV99 (discord: Emily) 07/09/2022 04:34

Well uhh
@connorjclark (discord: connorclark)
changing it to use clear
caused it to crash even sooner

=== @EmilyV99 (discord: Emily) 07/09/2022 04:38

uhg
so
memsetting
does not change the vector's `size`
clearing
does
and by lowering the vector's size
it causes out of bounds errors
fucking everywhere

=== @connorjclark (discord: connorclark) 07/09/2022 04:44

try `theVector.assign( theVector.size(), 0 );`
to keep the size
but clear it all
change 0 to the default value of the type tho
hmmm idk if thatd work for value types...

=== @EmilyV99 (discord: Emily) 07/09/2022 04:45


![image](https://cdn.discordapp.com/attachments/994526638853341194/995188928216830032/unknown.png)
nope
let's see if ```cpp
    auto sz = commands.size();
    commands.resize(0);
    commands.resize(sz);```works

=== @connorjclark (discord: connorclark) 07/09/2022 04:47

maybe clear() then reserve(count)?

=== @EmilyV99 (discord: Emily) 07/09/2022 04:47

`reserve` doesn't change size, only capacity

=== @connorjclark (discord: connorclark) 07/09/2022 04:47

ah

=== @EmilyV99 (discord: Emily) 07/09/2022 04:48

and `vector[indx]` is only valid where `indx < size()`, and is invalid where `size() <= indx < capacity()`
`resize()` to 0 and then back up, however, works
at least, it hasn't insta-crashed, and the draws are visible
now to see if it fixed the actual issue

=== @EmilyV99 (discord: Emily) 07/09/2022 04:50

nope
same crash as previously

=== @connorjclark (discord: connorclark) 07/09/2022 04:57

damn

=== @EmilyV99 (discord: Emily) 07/09/2022 05:06

OH
So that `void* ptr` that I was concerned about?
Shouldn't have been
it's owned by another object, and passed to the individual command things

=== @EmilyV99 (discord: Emily) 07/09/2022 05:11

....k, this is just a mess
and I've now tried enough things that I really need to just not commit any of it and just reset
and I'm too tired to continue tonight
so


=== @EmilyV99 (discord: Emily) 07/10/2022 20:20

I reverted the cause of this, for the record. Didn't mention it here
(meta) thread name was changed: ‚úÖüîíScripts not working in builds past 28th of June
## ‚úÖüîíFFC Palette Cycle Bug (#1505)
@ Tabletpillow opened this issue on 07/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994540835515420702



=== @ Tabletpillow 07/07/2022 09:50

When selecting a combo in the FFC editor if you change the palette of the combo then exit, then the combo table in the main screen will shift to that palette.
I'm not sure where this issue arose from but it's present in older alphas.
Alpha 104 had this error.

=== @ Russ 07/07/2022 11:00

Can confirm. I reported this a while ago as well
https://discord.com/channels/876899628556091432/962433553969340496/962433556901142598

=== @ Tabletpillow 07/07/2022 11:22

Yeah, and it's also currently present in 107.

=== @EmilyV99 (discord: Emily) 07/08/2022 20:25

fixed
(meta) thread name was changed: ‚úÖüîíFFC Palette Cycle Bug
## ‚úÖGrabbing tiles is broken as frick (#1506)
@ Majora opened this issue on 07/07/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994562461246173206



=== @ Majora 07/07/2022 11:16

https://github.com/connorjclark/ZeldaClassic/releases/tag/nightly-2022-07-07

Windows x64 build

Used to be able to grab PNGs, not any more. 

Recolor can't figure it out either (but maybe there's something wrong with the GIF I exported)

overall the grabbing function appears to be crippled.
reference image
![image](https://cdn.discordapp.com/attachments/994562461246173206/994562537200824361/Heroine.png)

=== @ Majora 07/07/2022 11:17


https://cdn.discordapp.com/attachments/994562461246173206/994562835818491924/StarOath_PR_Allegro5_x64.qst

=== @ Majora 07/07/2022 11:22

hero sprites are on tile page 40, was just trying to import the bottom row in the image (slashing sprites)

=== @connorjclark (discord: connorclark) 07/07/2022 17:05

do gifs or jpgs work?

=== @ Majora 07/07/2022 17:06

haven't tried jpgs
i'll grab screenshots one sec

=== @ Majora 07/07/2022 17:14


![image](https://cdn.discordapp.com/attachments/994562461246173206/994652524688707625/2022-07-07_10-11-25.mp4)

=== @ Majora 07/07/2022 17:16

This is definitely broken/anomalous behavior because I have changed nothing about how I import tiles. Used to be able to grab PNGs. Along with BMP and GIF, all 3 formats ZQ would make decent attempts to recolor (or rather the behavior was consistent, vs this off the rails stuff that screams broken, to me)

=== @EmilyV99 (discord: Emily) 07/07/2022 17:18

it's just outright failing to load files?
That's odd

=== @ Majora 07/07/2022 17:19

yup

=== @EmilyV99 (discord: Emily) 07/07/2022 17:19

and the colors there....
it should grab the exact same way it appears in the preview
but it's just.... not

=== @ Majora 07/07/2022 17:19

yuuup, super weird

=== @ Majora 07/07/2022 17:21

I feel like maybe being 64-bit caused something to be misaligned. a similar sort of problem to that frame bug you fixed.

=== @connorjclark (discord: connorclark) 07/07/2022 17:23

No. I know the issue. Will fix it tn.

=== @EmilyV99 (discord: Emily) 07/07/2022 17:23

Also, while you're at it

=== @ Majora 07/07/2022 17:23

<:pogchamp:811682704503996466>

=== @EmilyV99 (discord: Emily) 07/07/2022 17:23

`.png` is not in the dropdown list of extensions
(not a new issue, it just, was never added)

=== @connorjclark (discord: connorclark) 07/08/2022 03:31

png for 64 bit is difficult because we are using precompiled binary for libpng that is quite old. Newest libpng is somewhat easy to build but the allegro png addon we are using doesnt work with it. And I could not get the older libpng to build for 64 bits.
I poked at it a bit but didn't get very far. So for now, no png in 64 bit üò¶

=== @connorjclark (discord: connorclark) 07/08/2022 03:34

I have another approach that would be better: use allegro 5's native handling of png and drop the special a4 library that does png. Will try some other time.

=== @ Majora 07/08/2022 03:52

dang, well that's fine. as long as the recoloring function works properly again, format isn't too too important.

=== @connorjclark (discord: connorclark) 07/08/2022 04:02

Can you make a video showing how recoloring should look for one or two different formats? and provide me the images
so i have something to compare it to

=== @ Majora 07/08/2022 04:04

yuh, I'll post them here

=== @EmilyV99 (discord: Emily) 07/09/2022 03:34

(meta) thread name was changed: ‚ùóGrabbing tiles is broken as frick

=== @connorjclark (discord: connorclark) 07/09/2022 03:52

@ Majora anything new to report

=== @ Majora 07/09/2022 04:06

tl;dr no 

oh fuck oh god, not yet. was gonna try grabbing random tiles off the DB to see if maybe i just fucked exporting mine or something. also need to make my sprite sheet use exactly 16 colors, but then very slightly change them all, to see if ZC actually CAN color match or if its just completely broken.
after I finish this guy's short quest i'll get on that

=== @ Majora 07/09/2022 05:44

I definitely feel like the algorithm/function to match colors changed between allegro 4 and 5. but whatever, file this away. at least regular formats can load in (i.e. the BMP header bytes thing, and PNGs)

=== @ Majora 07/09/2022 05:47

Trying this in alpha 107 (off the website/zeldaclassic.com, build date June 10th )
and then before that in a beta now that I think abotu it, I think allegro 5 was in 107

=== @ Majora 07/09/2022 05:50


![image](https://cdn.discordapp.com/attachments/994562461246173206/995205315706490970/Screenshot_75.png)
Left: Alpha 107/June10th - Right: Latest nightly build
same image
same tileset. same pallete. same cset.

=== @ Majora 07/09/2022 05:55


![image](https://cdn.discordapp.com/attachments/994562461246173206/995206558797549609/Screenshot_77.png)
top pair of trees: Just grabbing. not pressing recolor
second pair of trees: with recolor

=== @ Majora 07/09/2022 06:01

TL;DR: 

Left window is the build right before allegro 5 integration. Something changed between allegro 4 and 5 with how incoming colors are read/interpreted?
@connorjclark (discord: connorclark) , if you're around

=== @connorjclark (discord: connorclark) 07/09/2022 06:02

ya
in [#general](https://discord.com/channels/876899628556091432/876906363756879902)

=== @ Majora 07/09/2022 06:05


![image](https://cdn.discordapp.com/attachments/994562461246173206/995208975064764516/Screenshot_78.png)

https://cdn.discordapp.com/attachments/994562461246173206/995209050843267162/Neptunian_Trees.bmp

=== @ Majora 07/09/2022 06:12

Currently pretty much the only way to import tiles is to manually externally forcibly set them to 16 colors and the exact same color values <:kekw:820115662089355296>

=== @connorjclark (discord: connorclark) 07/09/2022 08:59

next nightly should fix this for good

=== @connorjclark (discord: connorclark) 07/09/2022 09:15

@ Majora approved

=== @ Majora 07/09/2022 09:15

yeah as far as I can tell this shits finally sorted
computers <:blackpilled:943785279976775741>

=== @connorjclark (discord: connorclark) 07/10/2022 01:01

(meta) thread name was changed: ‚úÖGrabbing tiles is broken as frick
## improved tracker file playback (#1507)
@ Mani Kanina opened this issue on 07/08/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/994795833243476068



=== @ Mani Kanina 07/08/2022 02:43

I know this is probably a tall order since no one has touched this stuff in ages, but here goes:

I'd like some improvements when it comes to playback of tracker files, what specifically comes to mind for me is .nsf and .gbs, other formats might be applicable too, but I'm less aware of their shortcomings if so.

For .nsf it's just more broad support that is needed. Most widely used expansions aren't supported (FDS, VRC7). Some VRC7 using files run fine though, but most of them don't.  These chipsets were fairly rare when it came to games that used them, but most composers who still make chiptune tracks for the nes/famicom use them. 

For .gbs, it's less of a support matter and more of bad playback. Some files just don't play properly in ZC, missing instruments or having instruments sound widely off compared to the official game.

=== @connorjclark (discord: connorclark) 07/08/2022 03:00

There's been a lot of recent changes to how GME and DUMB (the libraries that plays these formats) are included in ZC. Specifically, we now build the latest versions of them instead of using old ones.

Wait until the next nightly (the latest one has a timer bug that affects music tempo) and give it a spin, let me know if anything has improved. Both libraries have had changes since they were added to ZC, so perhaps there's been some improvement.

=== @connorjclark (discord: connorclark) 07/08/2022 03:02

For anything beyond simply integration (are there formats these libraries support but ZC hasn't used yet?), you'll have to engage with the library developers. For example, for NSF you should talk to the people behind GME. https://bitbucket.org/mpyne/game-music-emu/wiki/Home

=== @connorjclark (discord: connorclark) 07/08/2022 03:38

Next nightly should hit [#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) in ~20m FYI.

=== @ Mani Kanina 07/08/2022 13:49

oh, neat
that sounds really good, actually

=== @ Mani Kanina 07/08/2022 14:14

downloading latest, .nsf files that uses the VRC7 now indexes properly in ZQ, which is nice. They are missing channels during playback, however.
I don't really know what exists
But this music library seems long since discontinued

=== @connorjclark (discord: connorclark) 07/08/2022 18:03

Right, it's not actively developed but the guy does respond to things occasionally.

Missing channels---does that mean some sounds aren't playing in a track or that there are missing tracks? (I don't know what channel means in this context)

=== @ Mani Kanina 07/08/2022 20:06

oh
a channel in the context to music is like... think of an instrument in an orchestra being missing

=== @ Mani Kanina 07/08/2022 20:09

A channel is generally limited to one sound wave type, like square wave, etc
so VRC7 tracks play with missing instruments, essentially

=== @ Mani Kanina 07/08/2022 20:12

assumedly the not playing ones are the extra channels added by the expansion chip

=== @connorjclark (discord: connorclark) 07/08/2022 20:15

Got it. Will you reach out to the GME people about this? If they fix it I can update ZC.

=== @ Mani Kanina 07/08/2022 20:15

uh, probably not #socialanxiety

=== @ Mani Kanina 07/08/2022 20:16

But there might be better playback libraries that could be used?
idk

=== @connorjclark (discord: connorclark) 07/08/2022 20:17

No. That is definitely not an option.

=== @ Mani Kanina 07/08/2022 20:17

it seems kinda awkward to go ask them to update in the first place, since it's not the original authors
oh
because of the old architecture ZC uses?

=== @connorjclark (discord: connorclark) 07/08/2022 20:18

Because no one is crazy enough to support all these formats in one place
Except whoever made this one

=== @ Mani Kanina 07/08/2022 20:18

this is true I suppose
and you can't incorporate multiple ones? And be selective which one focuses on what format?

=== @connorjclark (discord: connorclark) 07/08/2022 20:19

Anyway, the sooner they get a bug report the sooner someone will fix it. Just give me the nsf file that is not working and eventually I'll file a bug

=== @ Mani Kanina 07/08/2022 20:19


https://cdn.discordapp.com/attachments/994795833243476068/995061646357692486/Gradius_Galaxies_VRC7.nsf
is mostly anything VRC7
but compare playback of this in other players and in ZC
etc

=== @connorjclark (discord: connorclark) 07/08/2022 20:20

It mostly works we aren't gonna toss it out because one format doesn't have support of the enhanced version... We just need to let them know it doesn't work.

=== @ Mani Kanina 07/08/2022 20:20

yeah, no I get it
I just wished this worked, essentially
so I was spit balling solutions

=== @connorjclark (discord: connorclark) 07/08/2022 20:24

Oh, and what software do you load it in to that does work?
https://r32.github.io/wasm-c/ that sound like you expect for the file you gave me?

=== @ Mani Kanina 07/08/2022 20:31

I use a foobar2k plugin, give me a few mins and I'll check this web player

=== @ Mani Kanina 07/08/2022 20:35

I'm only getting the drums in this web player too, actually

=== @ Mani Kanina 07/08/2022 20:36

weird

=== @connorjclark (discord: connorclark) 07/08/2022 20:38

Ok jw. Web player is unrelated just the first thing I found online
What's missing when played in ZC?

=== @ Mani Kanina 07/08/2022 20:38

hard to articulate, but all melody outside of drums
for this specific file
## Insta Warp With Wave Effects Does Not Initiate (#1508)
@ bigjoe opened this issue on 07/08/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/994804938234404888



=== @ bigjoe 07/08/2022 03:19

This was from Mystical Harps. Insta Warp with Wave Effect does not trigger at all.

=== @EmilyV99 (discord: Emily) 07/08/2022 09:44

@connorjclark (discord: connorclark)

=== @connorjclark (discord: connorclark) 07/08/2022 09:44

What version are you using

=== @ bigjoe 07/08/2022 10:08

latest nightly

=== @EmilyV99 (discord: Emily) 07/08/2022 20:17

@ bigjoe @ SkyLizardGirl Does this QR happen to be on?
![image](https://cdn.discordapp.com/attachments/994804938234404888/995061177300299786/unknown.png)

=== @connorjclark (discord: connorclark) 07/09/2022 04:54

@ SkyLizardGirl  @ bigjoe  ^ ?

=== @ Kirbsblue 07/09/2022 06:45

interesting

=== @ bigjoe 07/09/2022 06:54

i had no idea such a rule was needed or existed, thanks
## ‚úÖüîíSyntax Errors in engine files (#1509)
@ Deathrider opened this issue on 07/08/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995095813346820106



=== @ Deathrider 07/08/2022 22:35


![image](https://cdn.discordapp.com/attachments/995095813346820106/995095815347519569/unknown.png)
![image](https://cdn.discordapp.com/attachments/995095813346820106/995095815607570462/unknown.png)

=== @EmilyV99 (discord: Emily) 07/08/2022 23:37

Yeah, that uh
that's been broken since Zoria edited it
in November 2019
it isn't included by default, so, it wouldn't be noticed without someone trying to use it
...clearly no one had.
@ Deathrider you should just be able to edit the file to fix yourself
just change
`void GetSystemTime(char32 buffer[])`
to
`void GetSystemTime(char32 buffer)`
the `[]` at the end is a typo on Zoria's part

=== @EmilyV99 (discord: Emily) 07/08/2022 23:40

(meta) thread name was changed: ‚úÖüîíSyntax Errors in engine files
or like, just take this
https://cdn.discordapp.com/attachments/995095813346820106/995112140656619541/time.zh
but that's the only change
## combo grab cset not working (#1510)
@EmilyV99 (discord: Emily) opened this issue on 07/09/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995118459870531774



=== @EmilyV99 (discord: Emily) 07/09/2022 00:05

> Mani Kanina ‚Äî Today at 7:45 PM
> https://discord.com/channels/876899628556091432/876906918847852594/994812846116442243
> anyone else having issue with latest, this one, and ZQ where alt + shift clicking tiles isn't copying CSet anymore?
> not sure if bug or an issue on my end
> Emily ‚Äî Today at 7:56 PM
> huh
> it's being a bit finnicky
> it works sometimes, but not others
> Mani Kanina ‚Äî Today at 7:56 PM
> weird
> Emily ‚Äî Today at 7:56 PM
> Oh
> hmm
> So, sometimes when I alt-tab into the window
> the alt key gets 'stuck'
> and it thinks it's held even when it isn't actually held
> ...If the alt is 'stuck' and I hold shift, it works
> If I actually hold alt and shift, it does NOT
```cpp
if(key[KEY_ALT]||key[KEY_ALTGR])
{
    int32_t drawmap, drawscr;
    if(CurrentLayer==0)
    {
        drawmap=Map.getCurrMap();
        drawscr=Map.getCurrScr();
    }
    else
    {
        drawmap=Map.CurrScr()->layermap[CurrentLayer-1]-1;
        drawscr=Map.CurrScr()->layerscreen[CurrentLayer-1];
    }
    if(drawmap<0)
        return;
    
    Combo=Map.AbsoluteScr(drawmap, drawscr)->data[c];
    if(key[KEY_LSHIFT]||key[KEY_RSHIFT])
        CSet=Map.AbsoluteScr(drawmap, drawscr)->cset[c];
    if(key[KEY_ZC_LCONTROL] || key[KEY_ZC_RCONTROL])
        First[current_combolist]=vbound(
          (Map.AbsoluteScr(drawmap, drawscr)->data[c]/combolist[0].w*combolist[0].w)-(combolist[0].w*combolist[0].h/2),
          0,
          MAXCOMBOS-(combolist[0].w*combolist[0].h));
}
```
the `if(key[KEY_LSHIFT] || key[KEY_RSHIFT])` seems to be having trouble
@ Lunaria @connorjclark (discord: connorclark)

=== @connorjclark (discord: connorclark) 07/09/2022 05:10

lol a5 docs literally give us the fix (well, part of it)
![image](https://cdn.discordapp.com/attachments/995118459870531774/995195178052751430/unknown.png)

=== @connorjclark (discord: connorclark) 07/09/2022 05:37

fixes just the keyboard state desyncing- https://github.com/connorjclark/ZeldaClassic/releases

=== @connorjclark (discord: connorclark) 07/14/2022 05:08

Hold Alt, THEN shift -> broken
Shift THEN alt -> works

üòï

=== @connorjclark (discord: connorclark) 07/14/2022 05:42

it's an allegro bug. we wait. https://github.com/liballeg/allegro5/issues/1348
## launcher broken textfield size (#1511)
@EmilyV99 (discord: Emily) opened this issue on 07/09/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995118804742983761



=== @EmilyV99 (discord: Emily) 07/09/2022 00:06

https://cdn.discordapp.com/attachments/876908472728453161/995059537402937344/unknown.png
https://cdn.discordapp.com/attachments/876908472728453161/995059621909774386/unknown.png
Top is current, bottom is older. Nothing in the relevant files should have changed, so, blaming al5
@connorjclark (discord: connorclark)

=== @connorjclark (discord: connorclark) 07/09/2022 04:51


![image](https://cdn.discordapp.com/attachments/995118804742983761/995190533699936317/unknown.png)
oh that commit is pretty small
when I reverted it, it fixed.

=== @EmilyV99 (discord: Emily) 07/09/2022 04:53

oh, well, that *would* fix it
but also cause other issue
now if you load a long path
close zcl
and reopen
the textbox will be way too BIG

=== @connorjclark (discord: connorclark) 07/09/2022 04:54

ok, just rulling out al5. probably not gonna look more into this one.

=== @EmilyV99 (discord: Emily) 07/09/2022 04:54

What you could probably do though
is just
add `maxwidth = someamount_px`

=== @connorjclark (discord: connorclark) 07/09/2022 04:54

since i gots like 12 things to do lol
## ‚úÖScaling stuff (#1512)
@EmilyV99 (discord: Emily) opened this issue on 07/09/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/995119186147807292



=== @EmilyV99 (discord: Emily) 07/09/2022 00:08

ZC has `resx`/`resy` configs. What should happen with the new resizing stuff is, it should ignore these, always using `320x240`; but then resize to the configured value using the new resizing stuff immediately
@connorjclark (discord: connorclark)
this would fix menus not scaling properly

=== @connorjclark (discord: connorclark) 07/09/2022 02:09

this seems to be working pretty well
i went with 640x420 tho
320x was teeeeeeny

=== @EmilyV99 (discord: Emily) 07/09/2022 02:09

fair
as long as the menus/dialogs are readable on a high-res monitor, that should do fine

=== @EmilyV99 (discord: Emily) 07/16/2022 18:03

(meta) thread name was changed: ‚úÖScaling stuff
## Windows scaling issues (#1513)
@EmilyV99 (discord: Emily) opened this issue on 07/09/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995119534581235793



=== @EmilyV99 (discord: Emily) 07/09/2022 00:09

https://cdn.discordapp.com/attachments/876908472728453161/995053709291688006/unknown.png
This setting is no longer applying properly to scale the window.
#1512 is higher priority, as that will work around this issue a fair bit.
@connorjclark (discord: connorclark)
@ Russ

=== @ Orithan 07/22/2022 11:23

The scaling stuff in ZQ does not work on my monitor because I get one of the following:
1) A tiny window at 1x
2) A scrunched up window that my monitor does not properly work with on 2x
3) Irregular pixel size at any sizing between which throws me off

=== @EmilyV99 (discord: Emily) 07/22/2022 19:04

@connorjclark (discord: connorclark) this would be really good to devote some time to if you have it

=== @connorjclark (discord: connorclark) 07/22/2022 19:09

Tell me everything about your monitor and resolution you use
What does scrunched up mean / look like
And does full screen work okay or is that broken for you too

=== @EmilyV99 (discord: Emily) 07/22/2022 19:11

(replying to @EmilyV99 (discord: Emily) "https://cdn.discordapp.com/at‚Ä¶"): ^This needs to work, is what it comes down to
from windows `Display Settings`

=== @ Orithan 07/23/2022 07:08

https://discord.com/channels/876899628556091432/985631030759280650/989790426988965948
How it looks can be seen from this link

=== @ Orithan 07/23/2022 07:10

My scaling is 150%, my monitor resolution is 1920x1080
My monitor refresh rate is 60hz

=== @ Orithan 07/23/2022 07:14

Full screen _works_ but not without caveats like it screwing up the window sizes of a lot of other programs that are open because Windows 10 jank

=== @ Russ 07/29/2022 19:26

Ack, sorry for ignoring this. Lemme compare alpha 107 with the newest nightly to show off the issue
ZLauncher 107:

![image](https://cdn.discordapp.com/attachments/995119534581235793/1002658574473908264/unknown.png)
The player, running at the 640x480 setting:

![image](https://cdn.discordapp.com/attachments/995119534581235793/1002658722004348978/unknown.png)
Meanwhile, ZLauncher as of the newest nightly:

![image](https://cdn.discordapp.com/attachments/995119534581235793/1002658829047169164/unknown.png)
The player at the same 640x480 setting:

![image](https://cdn.discordapp.com/attachments/995119534581235793/1002658968113532988/unknown.png)
https://tenor.com/view/small-small-center-zoolander-ben-stiller-ants-gif-5494197
The player can at least be manually resized by dragging the corner now, though it's really obnoxious having to do that every time I start it
The launcher cannot be resized or moved at all, which I think is a separate issue, see here: https://discord.com/channels/876899628556091432/1002657953498804316
(replying to @connorjclark (discord: connorclark) "And does full screen work oka‚Ä¶"): Full screen works fine
(replying to @connorjclark (discord: connorclark) "Tell me everything about your‚Ä¶"): Gonne refer to the earlier picture I took that Emily linked: https://cdn.discordapp.com/attachments/876908472728453161/995053709291688006/unknown.png
The monitor is my laptop's built in monitor. The resolution is 3840x2160. I use that resolution setting in Windows, with the recommended 250% upscaling
Said upscaling seems to be at the heart of the issue here. Pre-A5 builds respected that. Post-A5 builds do not.

=== @connorjclark (discord: connorclark) 07/29/2022 19:47

As a work around for now, can you just set the scaling to what you want it to be in z launcher?

Thanks for all the pics I'll look at this eventually

=== @ Russ 07/29/2022 19:53

No, the scaling does not go high enough
The largest setting in Zlauncher is still smaller than the 640x480 size in A4

=== @EmilyV99 (discord: Emily) 07/29/2022 23:20

(replying to @ Russ "The player can at least be ma‚Ä¶"): you should be able to adjust `resx`/`resy` manually in zc.cfg
and that should specify the window's starting size
...zcl needs to be updated to handle the new res options
. . . also just got this https://github.com/ArmageddonGames/ZQuestClassic/issues/792

=== @EmilyV99 (discord: Emily) 08/01/2022 19:01

*bump*

=== @ Orithan 08/31/2022 23:59

Bump. This is still a very significant issue and drag to scale does not work.

=== @ Orithan 09/01/2022 00:10

Please fix this ASAP. It's entirely screwed up the workflow of myself and multiple others and we cannot work or play quests using these builds until the window scaling is fixed.

=== @EmilyV99 (discord: Emily) 09/01/2022 03:16

err, I just went to test this @ Orithan
and it looks like ZQ is respecting the windows scaling to me
...it looks the same as just resizing it up, though, it seems?

![image](https://cdn.discordapp.com/attachments/995119534581235793/1014735690833084507/unknown.png)

![image](https://cdn.discordapp.com/attachments/995119534581235793/1014735810924400680/unknown.png)
...frankly, even 125% is too tall for my monitor, lol

=== @EmilyV99 (discord: Emily) 09/01/2022 03:20

but it does appear to be respecting the windows scaling

=== @EmilyV99 (discord: Emily) 09/01/2022 16:06

@ Russ can you confirm if this is still an issue or not?

=== @ Russ 09/01/2022 16:41

I‚Äôll check when I‚Äôm home

=== @ Russ 09/02/2022 10:34

Problem still persists in the newest nightly
Including Zlauncher being unreadable tiny, unresizable, and unmoveable

=== @EmilyV99 (discord: Emily) 09/02/2022 10:35

yeah, that definitely needs to be fixed....
The windows scaling percentage works for me, though
sooo
ü§∑‚Äç‚ôÄÔ∏è
## ‚úÖF12 screenshots doesn't work in newest build (#1514)
@ FireSeraphim opened this issue on 07/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995132334376501269



=== @ FireSeraphim 07/09/2022 01:00

As the title states, I went and got the newest build of 2.55 and pressing F12 for screenshots flat up doesn't work

=== @connorjclark (discord: connorclark) 07/09/2022 01:18

Is that in Zelda or ZQuest?
What's the format for screenshots set to in options?

=== @connorjclark (discord: connorclark) 07/09/2022 01:29

does this work directly?
![image](https://cdn.discordapp.com/attachments/995132334376501269/995139713717502024/unknown.png)

=== @connorjclark (discord: connorclark) 07/09/2022 01:32

nvm on all above, i figured it out.

=== @connorjclark (discord: connorclark) 07/09/2022 01:39

Fixed (only happened in zelda.exe)

=== @connorjclark (discord: connorclark) 07/10/2022 01:00

(meta) thread name was changed: ‚úÖF12 screenshots doesn't work in newest build
## ‚ùåüîíZScript compile instantly fails [debug only] (#1515)
@EmilyV99 (discord: Emily) opened this issue on 07/09/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995157313574936587



=== @EmilyV99 (discord: Emily) 07/09/2022 02:39


![image](https://cdn.discordapp.com/attachments/995157313574936587/995157315978276945/unknown.png)
For FUCKS sake I hate everything
@connorjclark (discord: connorclark) @arceusplayer11 (discord: Deedee) adding to thread
So I did a think with the parser so that the github actions could like, y'know, check parsing
....and apparently it caused this to happen
and for the life of me
I have no idea why
everything *looks right*
If the `-unlinked` flag is not supplied, it should behave exactly as it did before

=== @EmilyV99 (discord: Emily) 07/09/2022 02:43

. . . oh, hmm
but
....there appear to be 2 identically named functions, `zconsole_info(const char* format, ...)`
.....wtf
how does that not generate some form of compile error?

=== @connorjclark (discord: connorclark) 07/09/2022 02:45

Why would it? zscript  target doesn't include the other one.

=== @EmilyV99 (discord: Emily) 07/09/2022 02:46

Not true
One copy is in `parser.cpp`, for only the zscript target
one copy is in `zscrdata.h`
and `parser.cpp`
has `#include "zscrdata.h"` in it
....changing the version in `zscrdata.h` to be named differently, and changing the reference to it in `zscrdata.h` and `zquest.cpp` to match, has in fact fixed this issue
so, that WAS the issue
I'm just confused as to why the fuck it didn't compile error in MSVC
because that seems like a major problem
OH WAIT
Nevermind
There's an `#ifdef`
which should prevent it
.....but then why the fuck did renaming it FIX THE BUG?


![image](https://cdn.discordapp.com/attachments/995157313574936587/995159681557352529/unknown.png)
those shouldn't be compiled because of that ifndef
but it still
fucking changed it

=== @EmilyV99 (discord: Emily) 07/09/2022 02:53

NO WAIT
I'M FUCKING
GAAAAAAAAAAAAAAAAAAAAAAAAAAAAH
I CLICKED THE WRONG FUCKING FOLDER
OK, that did NOT fix it
I ran the wrong EXE
But
But
It worked in the one I ran
which was built AFTER the last change to the parser
So, is it broken ONLY IN DEBUG?

=== @connorjclark (discord: connorclark) 07/09/2022 02:56

no issue for me in debug x64
i'll try 32b

=== @EmilyV99 (discord: Emily) 07/09/2022 02:58

Yeah, I just built release and it is not broken
so something is fucked up here
either with debug builds, or with my debug test folder
but IDK what wrong with my folder could cause THAT

=== @connorjclark (discord: connorclark) 07/09/2022 02:59

does using zscript on CLI directly work?
or at least print an error

=== @EmilyV99 (discord: Emily) 07/09/2022 02:59

That works, but that also runs entirely separate blocks of code
or, well, hmm
I would assume that works, but, that would be built in release for the test script, duh
so hmm

=== @connorjclark (discord: connorclark) 07/09/2022 03:00

32b debug works for me

=== @EmilyV99 (discord: Emily) 07/09/2022 03:00

oh that's great
can you send me the build?

=== @connorjclark (discord: connorclark) 07/09/2022 03:00

shake the ghosts out of your compiler
hmm sure

=== @EmilyV99 (discord: Emily) 07/09/2022 03:00

I'm curious if your build will work for me or not
if not, then it's something somehow wrong with the folder

=== @EmilyV99 (discord: Emily) 07/09/2022 03:02

(meta) thread name was changed: ZScript compile instantly fails [debug only]

=== @connorjclark (discord: connorclark) 07/09/2022 03:03

s/o to @ Majora for the nitro
[emily only] lol
https://cdn.discordapp.com/attachments/995157313574936587/995163285781500034/Debug.7z
btw i only compiled the std header

=== @EmilyV99 (discord: Emily) 07/09/2022 03:05

The error occurred compiling an empty buffer, so
Something was wrong in a file somewhere
I copied all of that and replaced matching files

=== @ Majora 07/09/2022 03:05

huhwha
oh!

=== @EmilyV99 (discord: Emily) 07/09/2022 03:05

And it worked
and then
I put MY build back in the folder
....And it ALSO worked
So, something must have been wrong with something there that isn't an exe or dll

![image](https://cdn.discordapp.com/attachments/995157313574936587/995164103024857118/unknown.png)
none of these files were the cause
SOMETHING else was though
....ghosts in my damn debug folder
(Could have been a damned config or something?)
anyway ty connor

=== @EmilyV99 (discord: Emily) 07/09/2022 03:22

(meta) thread name was changed: ‚ùåüîíZScript compile instantly fails [debug only]
## ‚úÖ interacting with the init data menu froze ZQ (#1516)
@ Mani Kanina opened this issue on 07/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995180396826333264



=== @ Mani Kanina 07/09/2022 04:11

I'm not sure what the exact issue is. TBH

![image](https://cdn.discordapp.com/attachments/995180396826333264/995180407119171728/unknown.png)
was just scrolling through init data stuff
and the program is now just completely unresponsive to input

=== @EmilyV99 (discord: Emily) 07/09/2022 04:12

@connorjclark (discord: connorclark)

=== @ Mani Kanina 07/09/2022 04:13

only thing I can think of is that the quest used to have the "classic header" script crap imported and configured, but I got rid of it for my own script file
so there are a lot of items here that lack their scripts but are still set up equipment
which I assume this scroll: half magic is

=== @EmilyV99 (discord: Emily) 07/09/2022 04:15

I wouldn't see why that would crash anything
the only things that menu reads from items
is their itemclass, name, and `Equipment Item` checkbox
and `Level`, I think, for sorting reasons?
but it shouldn't even be aware of anything else

=== @connorjclark (discord: connorclark) 07/09/2022 04:42

Thanks @ Lunaria , I believe i fixed this. will post a build here later.

=== @connorjclark (discord: connorclark) 07/09/2022 05:36

https://github.com/connorjclark/ZeldaClassic/releases

=== @connorjclark (discord: connorclark) 07/10/2022 01:00

(meta) thread name was changed: ‚úÖ interacting with the init data menu froze ZQ
## ‚ùåüîíFlashing example never works anymore. (#1517)
@ SkyLizardGirl opened this issue on 07/09/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995272124707131472



=== @ SkyLizardGirl 07/09/2022 10:16


![image](https://cdn.discordapp.com/attachments/995272124707131472/995272140142161942/unknown.png)
If i click on refresh preview nothing happens..  I cannot see an example of an item flashing anymore.

![image](https://cdn.discordapp.com/attachments/995272124707131472/995272519516950579/unknown.png)
Also,
There is No example of flashing Sprite in Sprite Data..*
.
This is all in the latest Alpha 2.55 download

=== @ SkyLizardGirl 07/09/2022 10:20

.
It's like item flashing examples are all broken lately.

=== @EmilyV99 (discord: Emily) 07/09/2022 13:44

There never was a preview in the sprite data menu
that is still an 'old gui' and hasn't been updated with new features yet

=== @connorjclark (discord: connorclark) 09/04/2022 03:09

(meta) thread name was changed: ‚ùåüîíFlashing example never works anymore.
## ‚úÖüîíF6 Menu Inconsistently Closes ZC (#1518)
@ Russ opened this issue on 07/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995392716970139698



=== @ Russ 07/09/2022 18:15

In the newest nightly, trying to open the F6 menu sometimes closes ZC. It is inconsistent. There is no "ZC has stopped responding" popup or anything. It just closes.
As F6ing is what people to do in unstable builds to save often to avoid crashes, this one feels pretty high priority

=== @ Moosh 07/09/2022 18:16

Also pretty impossible to pin down. Rainbow death crash is dead. Long live rainbow death crash

=== @ Moosh 07/09/2022 18:24

Had Ether F6 like 20 times in a row and no crash. But we've seen it happen twice on her stream now. She opens the F6 menu, hits Yes, ZC immediately closes with no error message
May be tied to play time or some other thing?

=== @EmilyV99 (discord: Emily) 07/09/2022 18:28

@connorjclark (discord: connorclark)

=== @ Ether 07/09/2022 19:49

Three times now!

=== @connorjclark (discord: connorclark) 07/10/2022 01:04

was it 32bit or 64bit @ Russ

=== @ Ether 07/10/2022 01:04

64.

=== @connorjclark (discord: connorclark) 07/12/2022 06:27

If you upgrade to latest nightly, when it crashes next I'll get a crash report. That's gonna be the best way to get this fixed.
Since I haven't been able to reproduce myself.

=== @ Ether 07/12/2022 14:06

Understood. If I only move individual files from the update over, is there anything I should be careful not to miss? I notice that only the new one has crashpad_handler.

=== @connorjclark (discord: connorclark) 07/12/2022 17:44

crashlad handler is the new thing. All dlls should be copied too. I think that's pretty much it

=== @ Ether 07/12/2022 17:51

Got it. I probably won't play again until tomorrow, we'll see what happens then.

=== @EmilyV99 (discord: Emily) 07/12/2022 17:52

yeah, `.exe` and `.dll` are things that constantly update each build
plus whatever new file was added

=== @ Ether 07/12/2022 17:52

The glitch seems...relatively rare. I abused F6 a ton, probably even more because of the glitch, and across the last two days it triggered three more times, for six times in total.

=== @ Ether 07/12/2022 17:54

I'm on a postgame dungeon of the quest I was streaming, so there's not a whole lot left, but I can try to figure out some excuse to keep going if it doesn't turn up again.

=== @connorjclark (discord: connorclark) 09/04/2022 03:08

I feel like we've fixed 2 or 3 places in the GUI code that was causing random crashes, so let's call this fixed. Assuming @ Ether you haven't seen it lately?

=== @ Ether 09/04/2022 03:10

I haven't, but I also haven't been playing much since I finished the Stellar Seas run, so grain of salt!

=== @connorjclark (discord: connorclark) 09/04/2022 03:17

(meta) thread name was changed: ‚úÖüîíF6 Menu Inconsistently Closes ZC
## ‚úÖIncreased CPU usage on ZQ (#1519)
@ Bagel Meister opened this issue on 07/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995397033890418698



=== @ Bagel Meister 07/09/2022 18:32

Starting with nightly 2022-07-08, ZQ runs at around 2 times CPU usage. I presume this has something to do with the ability to resize the window.

=== @connorjclark (discord: connorclark) 07/09/2022 18:38

How certain are you about that date? I kind of figured it would have started since allegro 5
You tried the one just before ?

=== @connorjclark (discord: connorclark) 07/09/2022 18:40

That nightly also has some changes to the timer code, could be that

=== @ Bagel Meister 07/09/2022 18:41

maybe
I tried going back from the most recent build, and the first one to be in x64 was the first build i found that runs normally
Before this, i used that build for a while and noticed no problems, then upgraded today and it started

=== @connorjclark (discord: connorclark) 07/09/2022 18:44

Cool, thanks for the deets

=== @ Bagel Meister 07/09/2022 18:45

np, hope i'm right about the date

=== @ Majora 07/09/2022 20:00

Did you start using 64 bit? I think 64-bit is the one that goes sicko mode on the CPU. 

32-bit allegro 5 build from 6/20 still has normal CPU usage.
https://discord.com/channels/876899628556091432/876906918847852594/988343172868489216 This build, for reference.

=== @ Majora 07/09/2022 20:03

https://discord.com/channels/876899628556091432/876906918847852594/993795308913950750  This build, the first one with 64-bit, has more CPU usage but not as much as the latest nightly
(i'm only testing using ZCL since its the same shit)

=== @ Majora 07/09/2022 20:07

**TL;DR: **

Last build before allegro 5 jump: low CPU usage (<1-2%) 

32-bit allegro 5 second release build: low CPU usage (<1-2%

First 64-bit build: elevated CPU usage (~13-15%)
32-bit build accompanying first 64-bit build: elevated CPUusage (~13-15%)

=== @ Majora 07/09/2022 20:12

Latest nightly 64-bit: Ass% (30-ish)
latest nightly 32-bit: Ass% (ditto)

=== @ Bagel Meister 07/09/2022 22:36

I'll check that out tomorrow, it's getting late here, but thanks

=== @connorjclark (discord: connorclark) 07/09/2022 23:30

test build ready in ~20m https://github.com/connorjclark/ZeldaClassic/releases
should fix, please check. And check the slow MIDI tempo bug hasnt returned

=== @connorjclark (discord: connorclark) 07/10/2022 00:07

@ Bagel Meister @ Majora test build ready

=== @ Majora 07/10/2022 00:07

o7

=== @ Majora 07/10/2022 00:09

yooooo
out of the gate, ZCL and ZC CPU usage slashed roughly in half
ZQuest about -33% (of previous max) usage. From 30 to 17-22
around 13-15% for ZCL and 11-13% in ZC
big noticeable performance improvement, is the takeaway

=== @connorjclark (discord: connorclark) 07/10/2022 00:21

coolio
midi still ok?
sounded fine to me
but just double checking

=== @ Majora 07/10/2022 00:21

oh I'll play a MIDI

=== @ Majora 07/10/2022 00:23

yeah MIDI sounds flawless in ZQ

=== @connorjclark (discord: connorclark) 07/10/2022 00:24

coolio

=== @connorjclark (discord: connorclark) 07/10/2022 00:50

#deleted-channel

=== @connorjclark (discord: connorclark) 07/10/2022 01:17

@ Majora newer release, same link above
how much better is it now??
just zquest changed

=== @ Majora 07/10/2022 01:18

I will check in a few mins and ping you with info

=== @connorjclark (discord: connorclark) 07/10/2022 01:18

ok thx
i'd check but you're already the benchmark/baseline lol

=== @ Majora 07/10/2022 01:18

plus my computer is ancient so differences are much more noticeable o7

=== @ Majora 07/10/2022 01:25

ZQuest fresh launch now only uses about 15-17% of my CPU @connorjclark (discord: connorclark)
edges up another percent if I maximize the window

=== @connorjclark (discord: connorclark) 07/10/2022 01:28

nice
also, no edging plz

=== @ Bagel Meister 07/10/2022 13:03

Sorry ive been out, i'll check now

=== @ Bagel Meister 07/10/2022 13:11

Oh my god, not only is it better, it's way better than before. I'd say it's about 40% less cpu than before the cpu usage doubled.
This is incredible, what did you do to fix it?

=== @connorjclark (discord: connorclark) 07/14/2022 05:05

(meta) thread name was changed: ‚úÖIncreased CPU usage on ZQ
## ‚úÖFour-Way not working as hint dictates (#1520)
@ Deathrider opened this issue on 07/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995484230891090060



=== @ Deathrider 07/10/2022 00:18

The hint for Four-Way in the ladder item editor states anything over 0 will make it four-way, but in fact it has to be above 1. I was not able to move in a four way manner with it set to 1, but rather 2.
![image](https://cdn.discordapp.com/attachments/995484230891090060/995484233697079306/unknown.png)

=== @EmilyV99 (discord: Emily) 07/10/2022 22:40


![image](https://cdn.discordapp.com/attachments/995484230891090060/995821910095036506/unknown.png)
. . . I swear this didn't used to do that
@arceusplayer11 (discord: Deedee) did you change something with this?
(Dinner is ready in like, now, so I don't have any time to dig further right now)

=== @arceusplayer11 (discord: Deedee) 07/10/2022 23:11

I... don't think so?

=== @EmilyV99 (discord: Emily) 07/16/2022 18:41

....I'm being mandela effected here
because that most definitely blames back 7 years to `sort out line endings, hopefully` from Saff, which is initial commit

=== @EmilyV99 (discord: Emily) 07/16/2022 18:43

Fixed the infobox to reflect this
(meta) thread name was changed: ‚úÖFour-Way not working as hint dictates
## ‚úÖZQust Launcher on Mac doesn't save resolution (#1521)
@ carnch opened this issue on 07/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995590290167562280



=== @ carnch 07/10/2022 07:20

On the latest build of ZC for Mac (7/9/22), if I start ZQuest Launcher and change the resolution from the default 640x480 to 1600x1200 and then immediately exit, when I go back in to ZQuest Launcher the resolution will still show 1600x1200. However, if I change the resolution and actually launch ZC Player the next time I start ZQuest Launcher the resolution will have defaulted back to 640x480

=== @EmilyV99 (discord: Emily) 07/16/2022 06:03

Duplicate of #1533
(meta) thread name was changed: ‚úÖZQust Launcher on Mac doesn't save resolution
## ‚ùåüîíPermanently Triggered Generic Combos (#1522)
@ Lost Attempt opened this issue on 07/10/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/995720155160117298



=== @ Lost Attempt 07/10/2022 15:56

Have an flag to where once a generic combo is triggered, it stays triggered even after you leave the screen and come back

=== @EmilyV99 (discord: Emily) 07/10/2022 15:59

Not possible
takes too much space to track that many more screen values

=== @ Lost Attempt 07/10/2022 16:00

ahh
okay

=== @EmilyV99 (discord: Emily) 07/10/2022 16:00

(meta) thread name was changed: ‚ùåüîíPermanently Triggered Generic Combos
## ZQuest snapshot images don't store palette data anymore (#1523)
@ P-Tux7 opened this issue on 07/10/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/995779867763281970



=== @ P-Tux7 07/10/2022 19:53

They used to store the 256-colour palette, but now they don't

=== @ Moosh 07/10/2022 19:59

So they're saving as truecolor?

=== @ P-Tux7 07/10/2022 20:02

Yeah

=== @ P-Tux7 07/10/2022 20:06

oh... probably an allegro 5 thing

=== @EmilyV99 (discord: Emily) 07/10/2022 20:07

@connorjclark (discord: connorclark)

=== @EmilyV99 (discord: Emily) 07/10/2022 20:19

(having the palette data is important, so that re-importing it without clicking 'recolor' will import it with the same indexed values)

=== @ Moosh 07/10/2022 20:22

Indeed. I assume BMP still works? Since ZQuest does have multiple options for exporting images

=== @connorjclark (discord: connorclark) 07/10/2022 20:42

cool cool, I know how to fix this

=== @connorjclark (discord: connorclark) 07/12/2022 03:43

would this just be for BMP snapshots?

=== @ P-Tux7 07/12/2022 10:45

i know .gif and .bmp can be paletted/indexed colour
unsure about .png

=== @connorjclark (discord: connorclark) 07/13/2022 04:11

I fixed bmp - that was simple. Not sure yet if the others will be possible.
## ‚ùåchanging init hearts and init magic blocks from subscreen editor (#1524)
@ Mani Kanina opened this issue on 07/10/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/995821174275706932



=== @ Mani Kanina 07/10/2022 22:37

This is more of a convenience feature.
When configing heart gauge pieces and magic gauge pieces, you only have the visual information based on what's in the quests init data.

Generally for a quest those numbers are far below the final count, so pieces are invisible and makes it hard to see what you're doing when you're editing. This saves a bunch of menuing back and forth in the program.

Either that or a toggle within the subscreen editor to "Display as if 99 hearts/magic pieces" would be convenient, just so you can see all of what you're working with.

=== @EmilyV99 (discord: Emily) 07/16/2022 17:51

This.... looks a lot more difficult than you would think
why the fuck is the subscreen code THIS BAD????

=== @EmilyV99 (discord: Emily) 07/16/2022 17:54

I'm, uh, just gonna have to say no to this request
it would take at least a week if not more of digging through this absolute garbage to begin to have an idea of how to do this sanely
and, it's not THAT much of an inconvenience to go to Init Data and set it to a higher number while you're editing your subscreen

=== @EmilyV99 (discord: Emily) 07/22/2022 09:26

(meta) thread name was changed: ‚ùåchanging init hearts and init magic blocks from subscreen editor
## ‚úÖüîíMore Combo Triggers (#1525)
@ vlamart opened this issue on 07/11/2022

Status: fixed

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/995849825444696176



=== @ vlamart 07/11/2022 00:31

Add step-> (could be very useful for sideview) and push-> (for things like old school pushing a door open) to the triggers tab

=== @ cbailey78 07/11/2022 00:44

Also add touch-> (Like the sensitive step that triggers when Link's entire hitbox touches it.)

=== @EmilyV99 (discord: Emily) 07/11/2022 01:38

`Step->`, `Step (sens)->`, `ShutterOpen->`
sounds smart

=== @ cbailey78 07/11/2022 02:47

Along with adding Step (Sens)->next combo types as well.  (Great for crumbling bridge in Z2)

=== @EmilyV99 (discord: Emily) 07/11/2022 10:16

well no
you
would use `Step (sens)->` as the trigger
and `->Next` as the effect

=== @EmilyV99 (discord: Emily) 07/16/2022 16:45


![image](https://cdn.discordapp.com/attachments/995849825444696176/997906859828715560/2022-07-16_12-43-43.mp4)
The green is `Step-> (Sensitive)` trigger, the tan is `Step->`; both with the `->Next` effect.

=== @ vlamart 07/16/2022 16:46

üëèüëèüëè

=== @EmilyV99 (discord: Emily) 07/16/2022 17:43

And `Shutters->` trigger was a lot easier
because
there's literally a function called `openshutters()`
so I just added a trigger to that function
.....now, testing that it worked, I found a damn CRASH, but that's unrelated ( #1541 )

![image](https://cdn.discordapp.com/attachments/995849825444696176/997921810169467112/unknown.png)
(meta) thread name was changed: ‚úÖüîíMore Combo Triggers
any more ideas like this feel free, though make a new thread

=== @ cbailey78 07/16/2022 20:59

(replying to @EmilyV99 (discord: Emily) ""): HALLELUJIA!!!!! üëè

=== @ vlamart 07/16/2022 21:01

Now for eweapons? üòà

=== @ cbailey78 07/16/2022 21:17

How about directional button triggered warp tiles!  Used for Smb3 doors you push up to enter for sideview gravity screens and other buttons (A, B, X, Y) triggered warps used for Smb3 and Super Mario World level tiles you push B to enter.

=== @ cbailey78 07/18/2022 04:18

I can't wait for the next nightly release for the sensitive step triggers!
## ‚ùåüîíGeneric Counter Regen Itemclass (#1526)
@ Lost Attempt opened this issue on 07/11/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/995871275232809030



=== @ Lost Attempt 07/11/2022 01:56

a life ring/magic ring/bomb bag/quiver/wallet itemclass that you can select a counter(s) that it regenerates. (and probably add an infinite amount option like the other items)

=== @EmilyV99 (discord: Emily) 07/11/2022 10:16

The 5th time this has been suggested
and the 5th time I have to say "This would require adding 30+ itemclasses"
because it would need a separate itemclass for every single counter
because of how itemclasses WORK
(meta) thread name was changed: ‚ùåüîíGeneric Counter Regen Itemclass

=== @ P-Tux7 07/11/2022 13:21

hrm
if you use Item Override to put two items of one class of regen ring in two separate subscreen slots, does it only run one of them at once? i'll check later

=== @EmilyV99 (discord: Emily) 07/11/2022 13:22

Passive items only run the highest level owned
Period
It has nothing to do with the subscreen
Passive items will run even if not displayed on the subscreen
Completely unrelated

=== @ P-Tux7 07/11/2022 14:14

barnacles
(replying to @EmilyV99 (discord: Emily) "Passive items will run even i‚Ä¶"): (though THIS is very convenient)

=== @ P-Tux7 07/11/2022 14:23

a necessity for any stamina system

=== @EmilyV99 (discord: Emily) 07/11/2022 14:23

(replying to @EmilyV99 (discord: Emily) "Passive items only run the hi‚Ä¶"): Now, while this is true for engine passive items
it is QR-based whether that holds true for passive item SCRIPTS

![image](https://cdn.discordapp.com/attachments/995871275232809030/996059236708659361/unknown.png)
and a regen script is... well.... dead simple
```cpp
itemdata script regenCounter
{
    void run(int ctr, int amnt, int time)
    {
        while(true)
        {
            Game->DCounter[ctr] += amnt;
            Waitframes(time);
        }
    }
}```
(It is `+=` on DCounter, right? I always get it mixed up if it should be positive or negative...)

=== @ vlamart 07/11/2022 21:57

Will that explode if it goes over max?

=== @EmilyV99 (discord: Emily) 07/11/2022 22:30

it shouldn't be able to
since it's using DCounter
which is engine-based incrementing
## Denied Request-Scripts (#1527)
@ vlamart opened this issue on 07/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/996109019913662484



=== @ vlamart 07/11/2022 17:41

To help reorganise and repopulate the scripts folder, should a request fail, but can be easily scripted, could maybe be added to a thread or something for anyone to vonlenteer making it to contribute to the scripts folder

=== @ Alucard648 07/11/2022 23:00

For instance, post idea into PureZC script request forum.
## Speed Ring itemclass (#1528)
@ P-Tux7 opened this issue on 07/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/996167216221388830



=== @ P-Tux7 07/11/2022 21:32

A ring that sets or multiplies the player's walk speed. Not much ordinarily, but with the planned equippable passive items, it could be neat if assigned a magic cost.
## ‚úÖExporting Tile Pages Is Not Working (#1529)
@ SkyLizardGirl opened this issue on 07/12/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/996316131004518470



=== @ SkyLizardGirl 07/12/2022 07:24

Exporting Tile Combo Pages to Picture files onto the computer is not working. If i try to export a Tile page it does not save it to the computer. I am currently trying to export a tile set.
This is in Alpha 2.55 Latest

![image](https://cdn.discordapp.com/attachments/996316131004518470/996316312353636432/unknown.png)
It will not save it to any of my folders from ZC.

=== @connorjclark (discord: connorclark) 07/12/2022 08:01

Try the latest nightly, not the latest alpha. Happen there too?

=== @ SkyLizardGirl 07/12/2022 08:15

Oh
I have to test it tomarrow
Am under my covers now
I just tried to update my ZC
But said source
Is there a reason why?

=== @connorjclark (discord: connorclark) 07/12/2022 08:21

no worries

not sure what you mean tho. Here's the download, one of these two zips:
![image](https://cdn.discordapp.com/attachments/996316131004518470/996330390283362334/unknown.png)
https://github.com/ArmageddonGames/ZeldaClassic/releases/tag/nightly-2022-07-12

=== @connorjclark (discord: connorclark) 07/14/2022 05:01

So it actually does work, but you must give a file name when saving. You can't just hit OK
there's no default file name
afaict it's always worked like this
Could change it. Would "tileset.png" be a sensible default name?

=== @connorjclark (discord: connorclark) 07/14/2022 05:04

(meta) thread name was changed: ‚úÖExporting Tile Pages Is Not Working

=== @EmilyV99 (discord: Emily) 07/14/2022 12:19

(replying to @connorjclark (discord: connorclark) "Could change it. Would "tiles‚Ä¶"): Given that `png` doesn't have indexed palette output ( #1523 ) I would default to `bmp`

=== @connorjclark (discord: connorclark) 07/14/2022 17:21

Oh good point

=== @ SkyLizardGirl 07/19/2022 06:06

Oh ok
I do give pics I save names though

=== @connorjclark (discord: connorclark) 07/19/2022 07:06

Just made the png->bmp change and kicked off a new nightly. let me know if it's still busted for you

=== @ SkyLizardGirl 07/21/2022 00:58

Ok i will try it
ty.* ‚ù§Ô∏è
## Newbie Boss Script By Moosh Not Working (#1530)
@ bigjoe opened this issue on 07/12/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/996401088951492660



=== @ bigjoe 07/12/2022 13:02

The initial setup of the enemy seems to work, it takes on its proper shape and size. However, it will not move at all.
## Preview Switch States (#1531)
@ vlamart opened this issue on 07/13/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/996595457071529984



=== @ vlamart 07/13/2022 01:54

In View, add a Level Switch State option, which pops-up drop-downs to select between all levels and states, along with a shortcut in the preview itself to toggle between switch states

=== @EmilyV99 (discord: Emily) 07/16/2022 15:04

This wouldn't be in view
it would have to be part of preview mode
which I have no idea where to begin touching
## Wand Itemclass - Projectile Speed Setting (#1532)
@ P-Tux7 opened this issue on 07/13/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/996618370566848572



=== @ P-Tux7 07/13/2022 03:25

A setting for how fast the Wand's blast moves, similar to how you can set the speed at which a Bow fires
## ‚úÖ resx resy reset on close zc (#1533)
@EmilyV99 (discord: Emily) opened this issue on 07/13/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/996823495323435068



=== @EmilyV99 (discord: Emily) 07/13/2022 17:00

When ZC closes, it writes `640`/`480` to resx/resy regardless of the actual setting
@connorjclark (discord: connorclark)

=== @connorjclark (discord: connorclark) 07/14/2022 04:54

(meta) thread name was changed: ‚úÖ resx resy reset on close zc
## [Pre-2.11] Gleeok HP (#1534)
@ P-Tux7 opened this issue on 07/13/2022

Status: unknown

Labels: ['bug', 'compat']

Source: https://discord.com/channels/876899628556091432/996827406197334246



=== @ P-Tux7 07/13/2022 17:16

Gleeok HP is supposedly higher in pre-2.11 builds. I need to check this out later.
https://github.com/ArmageddonGames/ZeldaClassic/blob/7ab5d08254f22c3bc6d67ae3ccaafe1e664d59d4/changelog_historical.txt#L236

=== @connorjclark (discord: connorclark) 09/04/2022 03:06

Is it later yet? üôÇ
## Strange and Inconsistent Warp Behaviour (#1535)
@ vlamart opened this issue on 07/14/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/996950533552214087



=== @ vlamart 07/14/2022 01:25


![image](https://cdn.discordapp.com/attachments/996950533552214087/996950541429112912/20220713_192446.jpg)

=== @EmilyV99 (discord: Emily) 07/14/2022 01:44

qst file that shows the issue would be helpful

=== @ vlamart 07/14/2022 03:16

Tested on `Map 3`, DMap `12-Level 2 - Moon`, Screen `1E`, and Return Square `A`. The staircase (`Cave (Walk Down) [A]`) warps to the square set on `(136, 16)` on `3:4F`
https://cdn.discordapp.com/attachments/996950533552214087/996978398264049684/CAMlvl2-copy.qst

=== @connorjclark (discord: connorclark) 07/14/2022 08:13

I couldn't reproduce with the latest build...what version are you using?

=== @ vlamart 07/14/2022 14:50

Build 61, 12th July. I'll update today

=== @ vlamart 07/14/2022 15:22

(replying to @connorjclark (discord: connorclark) "I couldn't reproduce with the‚Ä¶"): I just did, did you move return square A on 3:4F to `y==8`? Because that's when it's acting wacky. I think that quest file has the square on `y==16` because that's where it doesn't act (too) weird

=== @connorjclark (discord: connorclark) 07/14/2022 17:22

Nope, I just ran it as is. I'll try again later.

=== @connorjclark (discord: connorclark) 07/15/2022 01:48

ok yea i see it too. 32 and 64 bit. going back a few nightlies to see when it started

=== @connorjclark (discord: connorclark) 07/15/2022 01:51

happens in nightly-2022-06-29 too
I'm gonna go get some boba now but will continue looking later. in the meantime, if you happen to see this before I get back: would be helpful to try in some of the older alphas and see if it happens there at all

=== @connorjclark (discord: connorclark) 07/15/2022 01:54

also i'm assuming it did work at one point... any idea about that? maybe its always been a bug

=== @ vlamart 07/15/2022 03:27

I won't be able to test it tonight, but I always remember never really understanding the behaviour of return squares üòù

=== @connorjclark (discord: connorclark) 07/15/2022 03:51

I built a couple old versions:

`1fc2c396817 apr 19` happens here

I went back to an older build .. `c986d616f96 mar 20` but it was too old to load the same quest, so I  tried to make it happen in a bare-bones classic quest. I couldn't get it to happen in this version or the newest one using just a stupid basic screen and not changing any QRs or dmap shit. So I can't continue bisecting the issue until I know how to repro it with a simple classic quest...

Any ideas what could matter besides the exact position of Ret square A / warp type being instant?

=== @ vlamart 07/15/2022 03:56

#1501

=== @ vlamart 07/15/2022 03:58

I remember discussing something in here about Entrance/Exit types spawning on (0, 0), but didn't test if this behaviour had to do with where the return square is placed.

=== @ vlamart 07/15/2022 04:00

During these warps, does `Game->Scrolling[dir]` or `Link->Action==LA_SCROLLING` have anything to do with it because I do have a simple script that just pushes the player one tile over if they're scrolling (like how NES dungeons do 2 tiles)

=== @connorjclark (discord: connorclark) 07/15/2022 04:00

I'm changing tactics and just gonna set some breakpoints on the screen transition and see whats up
instead of trying to get multiple old versions of ZC to build on my PC / recreate the issue

=== @EmilyV99 (discord: Emily) 07/15/2022 04:03

(replying to @ vlamart "During these warps, does `Gam‚Ä¶"): uhhhh
I would HOPE not

=== @connorjclark (discord: connorclark) 07/15/2022 04:28

Uh can you try without the script

=== @ Majora 07/15/2022 05:23

Oh

=== @connorjclark (discord: connorclark) 07/15/2022 05:32

dont think this is a script thing

![image](https://cdn.discordapp.com/attachments/996950533552214087/997375063626104852/unknown.png)
also this has been here forever
but anyway, imagine y is 0 here. like for your warp. it then goes to -16 for these cave warps
and triggers a transition

=== @EmilyV99 (discord: Emily) 07/15/2022 05:33

Oh ffs

=== @connorjclark (discord: connorclark) 07/15/2022 05:34

This _seems_ like the sort of thing you could just fix w/o a QR?
like surely
no quest relies on this??

=== @EmilyV99 (discord: Emily) 07/15/2022 05:34

Not*that we know of*

=== @connorjclark (discord: connorclark) 07/15/2022 05:34

like i'm thinking just do a `max(0, ...)` here

=== @connorjclark (discord: connorclark) 07/15/2022 05:36

i guess the idea here is to offset the player a tad if they are spawning onto a cave combo?
dont really get that
I mean, I kinda would get it if it moved the player _down_ but not up
since you typically approach cave combos from the bottom

=== @EmilyV99 (discord: Emily) 07/15/2022 05:38

You typically have the return square 16 px below a cave combo
So it typically moves you up onto the cave combo for the walk animation
I think
Is the idea
Maybe
Too late for brain to brain right now

=== @connorjclark (discord: connorclark) 07/15/2022 05:43

oh wow
So, it does seem like just a visual intent then.
Up to you if you think this needs a QR. lmk  then I'll do it.
or maybe just do it and wait for it to actually seem to break something
idk

=== @EmilyV99 (discord: Emily) 07/15/2022 14:28

I think a compat rule would be best
if it broke anything, it would probably be decades old shit we might not hear about for months or years
## ‚úÖStack Data Type for ZScript (#1536)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 07/14/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/997119682433789983



=== @TheBlueTophat (discord: Coolgamer012345) 07/14/2022 12:37

What it says on the tin. Would be useful for implementing algorithms in ZScript (e.g. pathfinding, etc).

=== @EmilyV99 (discord: Emily) 07/14/2022 12:39

#deleted-channel

=== @EmilyV99 (discord: Emily) 07/15/2022 21:03

@TheBlueTophat (discord: Coolgamer012345)
![image](https://cdn.discordapp.com/attachments/997119682433789983/997609372580589568/unknown.png)
Welllll
It looks like I've done a thing successfully
...just gotta document it all

=== @TheBlueTophat (discord: Coolgamer012345) 07/15/2022 21:11

YOO
Dope

=== @EmilyV99 (discord: Emily) 07/15/2022 21:24

At first I tried to implement this with `std::vector` because that's what I'm familiar with
but, that lacks `pop_front` or `push_front` capability
...and a quick google tells me trying to use that with front access is stupid, and `std::deque` is far better sorted for my needs.
`deque` == `double-ended queue`, so, made for insertion and removal at both ends.
```
/////////////////
///   Stack   ///
/////////////////

long Size;
 * Read-only. The size of the stack, given as a LONG.
 * This means that a stack with 5 items will have a size of '5L'.

bool Full;
 * Read-only. Returns true if the stack cannot hold any more elements.

void Clear();
 * Clears the stack of all elements.

void PushBack(untyped val);
void PushFront(untyped val);
 * Pushes the given value to the back or front of the stack.
 * If the stack is at max capacity, does nothing.

untyped PopBack();
untyped PopFront();
 * Removes the back or front element of the stack, and returns it.
 * If the stack is empty, '0' is returned.

untyped PeekBack();
untyped PeekFront();
 * Returns the back or front element of the stack, without removing it.
 * If the stack is empty, '0' is returned.

untyped Get(long ind);
 * Returns the element at the index 'ind', which is a LONG value.
 * This means that '0L' is the first element, '1L' is the second, etc.
 * If an invalid index is given, '0' is returned.

void Set(long ind, untyped val);
 * Overwrites the element at the index 'ind', which is a LONG value, with the value 'val'.
 * This means that '0L' is the first element, '1L' is the second, etc.
 * If an invalid index is given, nothing happens.

void Free();
 * This will deallocate the stack pointer, so that the pointer ID may be re-used.
 * There is a limit to how many stack pointers may be allocated at once,
 *     so be sure to free them when you are no longer using them.

void Own();
 * Grants 'Ownership' of the pointer to the currently running script.
 * When the script terminates (at the same time any Local Arrays in the script
 *     are cleared), the pointer will be automatically freed.```
I used `long` for the sizing, so, accessing using indexes will be a bit weirder than arrays
but, that means that the max number of elements is `2,147,483,647` instead of `214,748`

=== @EmilyV99 (discord: Emily) 07/15/2022 21:41

@connorjclark (discord: connorclark) @arceusplayer11 (discord: Deedee) adding to thread, incase you're interested in what I've done here

=== @connorjclark (discord: connorclark) 07/15/2022 21:45

Small thing, but I wouldn't call this a stack if you can access front and back. Why not call it Deque since that is what it's wrapping?
Could also just call it Vector, since Deque is a dum name
@TheBlueTophat (discord: Coolgamer012345) did you need a Has method too

=== @EmilyV99 (discord: Emily) 07/15/2022 21:47

Well, `Queue` indicates add-end, read-begin
`Stack` indicates add-end, read-end
....but those are the two commonplace names that would be less likely to confuse people.

=== @connorjclark (discord: connorclark) 07/15/2022 21:48

I think Array or Vector themselves are pretty generically used across other languages to support both modea

=== @EmilyV99 (discord: Emily) 07/15/2022 21:48

I've only heard `vector` in either a c++ context or linear-algebra context, myself

=== @connorjclark (discord: connorclark) 07/15/2022 21:48

Not in cpp tho

=== @EmilyV99 (discord: Emily) 07/15/2022 21:49

or, P5Js I think I've heard it too, but that's usually referring to an X,Y position/direction vector
which is entirely different

=== @connorjclark (discord: connorclark) 07/15/2022 21:50

Ex in Js arrays support both

=== @EmilyV99 (discord: Emily) 07/15/2022 21:50

I could call it `Array`, but well

=== @connorjclark (discord: connorclark) 07/15/2022 21:50

via push, unshift, pop, shift

=== @EmilyV99 (discord: Emily) 07/15/2022 21:50

having an object called an `Array` that is not the same as `int foo[5];` seems purely confusion-causing
because you can't do ```cpp
int foo[5];
foo->push(1);```
you have to create the special type for it
and use the functions
which is probably why C++ went with `vector` instead
though `vector` in C++ does not handle front-end access
so it isn't even properly comparable to that
Summary being, names are confusing, there are a lot of 'technically' more accurate names, that would be more likely to confuse people, especially given that a lot of people who start using ZScript have no prior coding experience

=== @connorjclark (discord: connorclark) 07/15/2022 21:52

C# does List instead but is even more generic (can insert anywhere)

=== @EmilyV99 (discord: Emily) 07/15/2022 21:53

While `list` does sound better
it's a more common word in general
so making that a reserved keyword would be more likely to break old scripts
which is another concern we have to deal with
`switch`/`case`/`default` already did a number on old scripts due to that, though, they are important enough to keep the names they have in most languages
I don't feel like many people likely have variables named `stack` though

=== @EmilyV99 (discord: Emily) 07/15/2022 21:57

also, webdocs added
https://www.zeldaclassic.com/zscript-docs/?jump=stackptr

=== @TheBlueTophat (discord: Coolgamer012345) 07/15/2022 22:13

(replying to @connorjclark (discord: connorclark) "@TheBlueTophat (discord: Coolgamer012345) did you‚Ä¶"): For what I was adding not yet, might still be worthwhile though

=== @EmilyV99 (discord: Emily) 07/15/2022 22:14

I'm done with this for today, but, further requests can certainly be made

=== @EmilyV99 (discord: Emily) 07/16/2022 15:04

(meta) thread name was changed: ‚úÖStack Data Type for ZScript
## ‚úÖitem unusable if item script calls waitframe with the quest rule for continous item scripts off (#1537)
@ Mani Kanina opened this issue on 07/15/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/997351862191804416



=== @ Mani Kanina 07/15/2022 04:00

-
if an item script calls waitframe() and the quest rule isn't enabled to allow that, the item becomes unusable till you continue.
likely due to trying to wait for the item script to finish before letting you use the item again

=== @EmilyV99 (discord: Emily) 07/16/2022 19:02

Fixed
(meta) thread name was changed: ‚úÖitem unusable if item script calls waitframe with the quest rule for continous item scripts off
## Generic Warp Combo Type (#1538)
@ vlamart opened this issue on 07/15/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/997590149439422545



=== @ vlamart 07/15/2022 19:47

Maybe as a work around for all the warp wackiness, there just be a Generic Warp type. Flag for if drawn over or under, sensitive or bottom only, "walking down" animation (dir up, cuts sprite off at the top of the combo), "walking up" (dir up, no sprite cutoff), and "walk out" (forces walking from return square). Attribs for forcing return square spawn direction, and the number of frames for the "walk out"

=== @EmilyV99 (discord: Emily) 07/15/2022 19:52

*pain*

=== @ vlamart 07/15/2022 19:52

I know üôÉ

=== @EmilyV99 (discord: Emily) 07/15/2022 19:52

probably *smart*
but *pain*

=== @ vlamart 07/15/2022 19:53

I feel like in rewrite, a lot of things can be reduced down to some catchall generic types like this

=== @EmilyV99 (discord: Emily) 07/15/2022 19:54

That makes a lot of sense for rewrite, yeah

=== @ vlamart 07/15/2022 19:58

Oooo, how about for now, just make a "ignore return square rules and force direction" and "walk out" flags/attribs to the already existing warp combo types?
## ‚úÖüîí[Script] ZC freezes with Wind Waker Stealth (#1539)
@ Majora opened this issue on 07/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/997712643932565504



=== @ Majora 07/16/2022 03:53

Latest nightly 

https://discord.com/channels/876899628556091432/876906918847852594/997435214525648938

Script:

https://www.purezc.net/index.php?page=scripts&id=341

I compiled the script again, which it did perfectly, and then saved the example quest file in the nightly. 

On first run, the first patroller seemingly caught Link fine, I got moved to another screen with the barrel on it. screen 00 to screen 10. 

Then I got caught again on the next screen to the right (screen 01) and ZC froze and the console went apeshit.
https://cdn.discordapp.com/attachments/997712643932565504/997712649825570866/allegro.log

https://cdn.discordapp.com/attachments/997712643932565504/997712718905741402/WindWakerTest.qst
The allegro.log is huge but 99.999% of that is just the same like 8 lines repeated thousands of times

=== @ Majora 07/16/2022 04:02

```
User error: `sightAngle` must be between 0 and 90, inclusive! Angle 0.0026 is invalid, and will be bounded to 0.0026.
NPC script 1 (patrollingJailer): Script tried to deallocate memory that was not allocated at address 90
NPC script 1 (patrollingJailer): The npc pointer used for npc->Step is NULL or uninitialised.NPC script 1 (patrollingJailer): The npc pointer used for npc->Damage is NULL or uninitialised.NPC script 1 (patrollingJailer): The npc pointer used for X is NULL or uninitialised.NPC script 1 (patrollingJailer): The npc pointer used for Y is NULL or uninitialised.NPC script 1 (patrollingJailer): The npc pointer used for npc->Dir is NULL or uninitialised.NPC script 1 (patrollingJailer): Invalid NPC with UID -10000 passed to npc->Dir
NPCs on screen have UIDs NPC script 1 (patrollingJailer): 26 NPC script 1 (patrollingJailer): 
NPC script 1 (patrollingJailer): Invalid NPC with UID 20000 passed to npc->Dir
NPCs on screen have UIDs NPC script 1 (patrollingJailer): 26 NPC script 1 (patrollingJailer): 
NPC script 1 (patrollingJailer): Invalid NPC with UID 20000 passed to X
NPCs on screen have UIDs NPC script 1 (patrollingJailer): 26 NPC script 1 (patrollingJailer): 
NPC script 1 (patrollingJailer): Invalid NPC with UID 20000 passed to Y
NPCs on screen have UIDs NPC script 1 (patrollingJailer): 26 NPC script 1 (patrollingJailer): 
NPC script 1 (patrollingJailer): Invalid NPC with UID 20000 passed to npc->Dir
NPCs on screen have UIDs NPC script 1 (patrollingJailer): 26 NPC script 1 (patrollingJailer): 
NPC script 1 (patrollingJailer): Invalid NPC with UID -10000 passed to npc->Dir
```

=== @EmilyV99 (discord: Emily) 07/16/2022 04:17

It isn't QUITE the same, it's different commands
but it boils down to the same problem
the `this->` pointer is broken

=== @EmilyV99 (discord: Emily) 07/16/2022 04:19

meaning it is not being initialized properly

=== @ Majora 07/16/2022 04:21

I know scripts themselves aren't something to "bug report" on, but my reasoning is to bring attention to changes to ZScript itself, in-engine.

=== @EmilyV99 (discord: Emily) 07/16/2022 04:21

I would assume ALL npc scripts would be broken
How was the enemy spawned?

=== @ Majora 07/16/2022 04:23

Oh uh, this isn't a script I wrote or anything. I just asked randomly for recommendations of scripts to test in the latest nightly. This script is yours üòù not that I'm assuming you'll know everything exactly about a script you wrote 2-3 years ago.

=== @EmilyV99 (discord: Emily) 07/16/2022 04:23

(replying to @EmilyV99 (discord: Emily) "How was the enemy spawned?"): ^
Did you just place the enemy on the screen normally?
Or use another script?
Or what?
(I didn't actually grab the quest file yet)

=== @ Majora 07/16/2022 04:24

Oh uh, it was the test quest that came with the script. Let me check the setup more
It's an in-engine Other type enemy

=== @EmilyV99 (discord: Emily) 07/16/2022 04:25

oh, it was my test quest
that is my script btw

=== @ Majora 07/16/2022 04:26

it is, I should have been clearer on that, my bad
yeah its your wind waker stealth script and I just tested your test quest in a nightly to see what the console/allegro.log spit out

=== @EmilyV99 (discord: Emily) 07/16/2022 04:27

@connorjclark (discord: connorclark) I don't see any obvious changes related to initializing npc scripts..... something is weird here, and IDK what

=== @ Majora 07/16/2022 04:27

I can't actually debug scripts themselves, but I figure this is probably better than just saying its broken like others have been doing recently.

=== @EmilyV99 (discord: Emily) 07/16/2022 04:27

@ Majora can you try to find the last build that this worked in?

=== @ Majora 07/16/2022 04:28

yeah i'll try a few builds
or well enough to conclude something.

=== @ Majora 07/16/2022 04:40

Tried in June 20th build, the script works way better. Patrollers/Darknuts actually move to Link and Link is warped as soon as the Darknut sprite collides with Link. The barrel doesn't work.

https://cdn.discordapp.com/attachments/997712643932565504/997724644113137715/allegro.log
`FFC script 1 (hidableBarrel): Script attempted to change own object's script! This has been ignored.`

=== @ Majora 07/16/2022 04:47

Tried jumping back to alpha 106, and EmilyMisc.zh is missing. I don't know if the one on pureZC will have issues and the one included with the builds is probably too new to work. 

Gonna try the PureZC one.

=== @EmilyV99 (discord: Emily) 07/16/2022 04:49

oh, lol, I forgot I even included that
the one on the db should be basically identical
and also nothing in that file has anything to do with the issue
the issue occurs before it touches anything from that file
so it should work fine

=== @ Majora 07/16/2022 04:50

oh okay, gotcha

=== @ Majora 07/16/2022 04:57

Alpha 106, April 10th build, same behavior as June 20th build. Everything works but the barrel is broken with that same "This has been ignored" message

https://cdn.discordapp.com/attachments/997712643932565504/997728781211013211/allegro.log

=== @EmilyV99 (discord: Emily) 07/16/2022 04:59

Is the barrel actually broken?
that message means nothing
like, that's an error in the script
and will be there in any version
and it worked regardless of that when I released the script

=== @ Majora 07/16/2022 05:01

Oh, well nothing happens to Link when I hit A by the barrel combo. it disappears, but nothing happens to link or appears in inventory.

=== @ Majora 07/16/2022 05:04

Shit, fuck, pain, kill me. the barrel works.
Nevermind about alpha 106. if I stand still while in the vision cone of a patroller, nothing happens. barrel works.

=== @ Majora 07/16/2022 05:31

Somewhere between june 25th and july 5th

=== @ Majora 07/16/2022 05:39

July 1st/2nd, broken. 
June 28th, works

=== @EmilyV99 (discord: Emily) 07/16/2022 05:46

oh wait
I see what's happening here sort of
So the enemy is just going offscreen and killing itself
....why the fuck is it going offscreen
I will tell you that it isn't that ZC is somehow freezing
the script is freezing you until the enemy reaches your position
....it just, is walking AWAY from you instead of TOWARDS you for some godforsaken reason

=== @EmilyV99 (discord: Emily) 07/16/2022 05:52

.....
OH
FOR FUCKS
I BROKE A THING
WTF WAS I THINKING DUMBASS
....mostly can be considered a typo

=== @EmilyV99 (discord: Emily) 07/16/2022 05:53

I have now found out what happens when you have an internal function that has it's name declared, but no code to go inside it
It most certainly *still compiles completely fine* and just acts as though it returns the wrong value
and when you mess with functions that have to do with angles, it might just break scripts that use angular movement....
thank you for narrowing down the versions there @ Majora , or that would have taken me like a week or two to figure out

=== @ Majora 07/16/2022 05:55

yuh! o7
I'm just glad it's a simple fix

=== @EmilyV99 (discord: Emily) 07/16/2022 05:56

yeah uh
the internal `RadtoDeg` and `DegtoRad` just had no code
so calling them was super fucked
Deedee had named them `EngineRadtoDeg` and `EngineDegtoRad`, which kinda goes against all the other naming conventions we've used
and when I fixed it
I missed a block of code ü§¶‚Äç‚ôÄÔ∏è

=== @ Majora 07/16/2022 05:59

d'oh, gotta make sure to let others know when conventions are messed with

=== @EmilyV99 (discord: Emily) 07/16/2022 06:02

(meta) thread name was changed: ‚úÖüîí[Script] ZC freezes with Wind Waker Stealth

=== @arceusplayer11 (discord: Deedee) 07/16/2022 19:00

(replying to @EmilyV99 (discord: Emily) "WTF WAS I THINKING DUMBASS"): DUMBASS üò†
## ‚ùåüîíIn-Engine Access to ScreenD[] (#1540)
@ vlamart opened this issue on 07/16/2022

Status: wont-fix

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/997878681324224634



=== @ vlamart 07/16/2022 14:53

It would be neat if in combo editor, in the triggers tab (or its own new tab) you could flag combos to be permanently changed and saved by the trigger through ScreenD[] stuff. This is just a vague idea, mostly to try to figure out multiple lock blocks requiring different keys on the same screen (would be limited to 8, and would deny with a pop-up if attempting to do more)

=== @EmilyV99 (discord: Emily) 07/16/2022 14:57

would be way too complicated

=== @ vlamart 07/16/2022 15:01

I was just thinking that it would be too complicated in combo stuff. Maybe it would be easier in screen secrets? Instead of like burn or sword trigger tabs, a new ScreenD[] tab, that instead just saves if that combo changes at all (as opposed to how)?

=== @EmilyV99 (discord: Emily) 07/16/2022 15:02

. . . ????
screen secrets are all-or-nothing, either the whole screen triggers or none
stored in a single screen state

=== @ vlamart 07/16/2022 15:03

Womp womp haha

=== @EmilyV99 (discord: Emily) 07/16/2022 15:03

so I don't understand what you're trying to say there
the appropriate way to use screen->D
is to use a script
soooo
(meta) thread name was changed: ‚ùåüîíIn-Engine Access to ScreenD[]
## ‚úÖKilling Manhandla crashes (#1541)
@EmilyV99 (discord: Emily) opened this issue on 07/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/997919682067701823



=== @EmilyV99 (discord: Emily) 07/16/2022 17:36

Killing any heads of a Manhandla crashes
@connorjclark (discord: connorclark)

![image](https://cdn.discordapp.com/attachments/997919682067701823/997919708789624933/unknown.png)
It occurs on that line, saying it's accessing bad memory
but it isn't NULL

=== @EmilyV99 (discord: Emily) 07/16/2022 17:37

oh, correction
Killing 2 or more heads of a manhandla on the same FRAME crashes
killing one at a time does not crash
Using the 'kill all enemies' cheat does cause it

=== @EmilyV99 (discord: Emily) 07/16/2022 17:43

@arceusplayer11 (discord: Deedee) adding you too

=== @EmilyV99 (discord: Emily) 07/22/2022 23:03

Ahk, don't know why this only occurred in a copy of 1st.qst
but
it's now fixed
just needed to add some sanity checks

=== @EmilyV99 (discord: Emily) 07/22/2022 23:06

(meta) thread name was changed: ‚úÖKilling Manhandla crashes
## Set tile warp to previous screen (#1542)
@ cbailey78 opened this issue on 07/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998092391166771270



=== @ cbailey78 07/17/2022 05:02

This would make setting tile warps to previous screen alot easier and saves alot of time from trying to memorize the screen number when setting the return warp especially using (Passageways) in NES dungeon maps.
## Finalize 2.53.x branch (#1543)
@ Alucard648 opened this issue on 07/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998149179014660117



=== @ Alucard648 07/17/2022 08:48

Currently, last version is beta 56 for long time. It needs to be tested, polished and released as stable 2.53.1
## read-only file displays scroll on keyboard input (#1544)
@EmilyV99 (discord: Emily) opened this issue on 07/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/998285114020733019



=== @EmilyV99 (discord: Emily) 07/17/2022 17:48

When reading a read-only file display (such as viewing `zstrings.txt` via the `Help` button in the string editor), you cannot type anything; but pressing keys, despite not typing anything, scrolls you to the cursor position. Only the arrow keys should be valid (as they allow you to move the cursor), as well as other scrolling keys such as PgUp/PgDn; any other keys should NOT cause a scroll.
## Add sprite decoration effects and SFX on Secret combos. (#1545)
@ cbailey78 opened this issue on 07/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998297226721898540



=== @ cbailey78 07/17/2022 18:36

I just came up with an idea and I don't know if it's possible for devs to put in the option to have the sprite and sound effects when the secret combos are triggered.

=== @EmilyV99 (discord: Emily) 07/17/2022 18:38

You could have the secrets make a generic combo appear
that is `automatically triggered` on appearing
and does whatever

=== @ cbailey78 07/17/2022 18:40

Cool, thanks.  It's such a blessing that we have a generic combo that opens up so much possibilities without scripting!

=== @ cbailey78 07/17/2022 22:06

I want a way for combos to be permanently cycled to so it doesn't replay the SFX and sprite decoration on screen re-entry.
## ‚úÖ(Required item) in locked chest doesn't not work (#1546)
@ cbailey78 opened this issue on 07/17/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/998321143175975022



=== @ cbailey78 07/17/2022 20:11

I don't know if it doesn't work or I'm not setting it right, but the (Require Item) in the locked chest combo doesn't work for me.  I made sure the Item number is matched with the item acquired and the button set what I want it.

=== @ P-Tux7 07/17/2022 20:44

So you want a locked chest to require say... a Blue Ring, but it opens whether or not you have a Blue Ring. Right?

=== @ cbailey78 07/17/2022 21:44

That's right.  I wanna make custom items using the (Non Gameplay Items) dedicated for that purpose other than keys/level specific keys.  The required items in the lock block works.

=== @ cbailey78 07/17/2022 21:47

Especially making the Z2 rock road block that you press A or B to break once you acquire the hammer.

=== @EmilyV99 (discord: Emily) 07/18/2022 23:15

(replying to @ cbailey78 "I don't know if it doesn't wo‚Ä¶"): What do you have set, and what's actually happening?

=== @ cbailey78 07/18/2022 23:34

I have the (Use item and Item required set).  I have the "Held Item" number set corresponding to the item i made and the button I want is assigned to it.  It will not work whether I have the item or not.  That is without all the usable sides checked in the trigger tab because I don't have the "Can't use on sides" checked on the flag tab.
If I check all 4 sides on the trigger tab, it will unlock/open whether I have the item or not.

=== @EmilyV99 (discord: Emily) 07/18/2022 23:43

the trigger tab has nothing to do with chests

=== @ cbailey78 07/18/2022 23:47

That what I thought.

=== @EmilyV99 (discord: Emily) 07/18/2022 23:48

works fine for me
Is the item an `Equipment Item`?

=== @ cbailey78 07/18/2022 23:50

Yes

=== @EmilyV99 (discord: Emily) 07/18/2022 23:50

screenshots of the setup please

=== @ cbailey78 07/18/2022 23:51

This is a random spot to test
![image](https://cdn.discordapp.com/attachments/998321143175975022/998738878838087761/unknown.png)
The hammer is set to (Non gameplay Item) as a custom item.

=== @EmilyV99 (discord: Emily) 07/18/2022 23:52

coincidentally so was my test item that worked
oh, uh, one thing
Compat rules

![image](https://cdn.discordapp.com/attachments/998321143175975022/998739224461324298/unknown.png)
Is that on?

=== @ cbailey78 07/18/2022 23:53

Oh, I'll check.

=== @EmilyV99 (discord: Emily) 07/18/2022 23:54

Generally checking compat rules is a good idea *before* filing a bug report, for future reference; it's the issue often enough

=== @ cbailey78 07/18/2022 23:54

Yes, it is on.

=== @EmilyV99 (discord: Emily) 07/18/2022 23:54

that means chests are using the 2.50.2 code
where none of the new options existed
soooo
I'd uncheck that
and try again
Generally, you never want ANY compat rules enabled when developing a new quest
`Quest->Options->Pick Ruleset Template->Bugfix` disables all of them, with some automatic handling for certain compat rules that need extra steps

=== @ cbailey78 07/18/2022 23:56

BINGO! It works!  The compat rules was the culprit.  It had alot of other compat rules checked beside the old chest one, so I unchecked those as well. thanks alot!

=== @EmilyV99 (discord: Emily) 07/18/2022 23:57

(meta) thread name was changed: ‚úÖ(Required item) in locked chest doesn't not work

=== @ cbailey78 07/19/2022 02:33

Is there a way to make locked chest open one chest instead of all of them when you have multiple locked chests on the screen?

=== @EmilyV99 (discord: Emily) 07/19/2022 02:34

no
nor will there be
things that are part of screen are not available for expansion
screen states are how chests are tracked

=== @ cbailey78 07/19/2022 02:40

Bummer, thanks.

=== @ cbailey78 07/19/2022 02:49

It would been useful to use to have multiple locked doors for example Final Fantasy Mystic Quest on the SNES in the focus tower, you have multiple doors to unlock after beating a major dungeon.

=== @ P-Tux7 07/19/2022 04:27

I wonder if there could be a way to circumvent that by designating each chest combo as Normal, Locked, or Boss Locked, *regardless* of its requirements
In other words, think of the flags as Chests 1, 2, and 3, not Normal, Locked, and Boss Locked. Except in compatibility quests.
As we already have all three flags per screen

=== @ P-Tux7 07/19/2022 04:29

And to put three different items in the chest, that could be like the Signpost Combo's checking of strings
0: Special Item (current behaviour)
1-127: X item
-1 - -8: Screen->D[] 0-7
Mind if I make that as a feature suggestion?

=== @EmilyV99 (discord: Emily) 07/19/2022 04:49

I'm not fucking with adding the requirements and shit to the other types

=== @ P-Tux7 07/19/2022 04:52

wait can't you just make the normal chest combo type identify itself as triggering chest, chest_locked, or chest_locked_boss

=== @EmilyV99 (discord: Emily) 07/19/2022 05:18

bleh
I really don't want to fuck with this

=== @ cbailey78 07/19/2022 05:20

Why can't you have the item required added to other types?

=== @EmilyV99 (discord: Emily) 07/19/2022 05:23

chest code is a fucking mess
I just copied lockblock handling for locked chests

=== @ cbailey78 07/19/2022 05:24

I see.

=== @ P-Tux7 07/19/2022 05:31

(replying to @EmilyV99 (discord: Emily) "I really don't want to fuck w‚Ä¶"): who else would? deedee or connor?
## Previous-Frame Data (#1547)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 07/17/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998328620546269335



=== @TheBlueTophat (discord: Coolgamer012345) 07/17/2022 20:41

I think this might be a bit of a big request, but it would be very helpful if there were built in functions to keep track of things like the previous screen the player was on, the previous map, their previous position, etc. I'm not sure how comprehensive this should be, but at the very least the things I listed would help immensely with screen-related scripts.

=== @ P-Tux7 07/17/2022 20:43

i know there has to be two screen IDs/combo display data stored in RAM at least, for scrolling
actually, their solidity data too, for smart scrolling

=== @TheBlueTophat (discord: Coolgamer012345) 07/17/2022 20:46

Do note how clunky it is to keep track of these things manually with a header too. Having a big array you have to index with a bunch of constants that are all equivalent to specific functions or variables is crusty in my humble opinion!

=== @EmilyV99 (discord: Emily) 07/17/2022 20:49

(replying to @ P-Tux7 "i know there has to be two sc‚Ä¶"): ....EVERY SCREEN IS IN RAM
at ALL TIMES
otherwise NOTHING would work

=== @TheBlueTophat (discord: Coolgamer012345) 07/17/2022 20:50

gives crazed office worker energy

=== @EmilyV99 (discord: Emily) 07/17/2022 20:50

(replying to @TheBlueTophat (discord: Coolgamer012345) "I think this might be a bit o‚Ä¶"): you can track this stuff yourself easily enough
and generic scripts allow setting events based on them, too

=== @TheBlueTophat (discord: Coolgamer012345) 07/17/2022 20:51

It's not terribly difficult to but unironically having to be like `if(MISC[GLOBAL_PREVIOUS_DMAP] != Game-GetCurDMap()){//blah}` or whatever is clunky
I don't remember if that's the proper name for the function on the right but that's not really the point
The generic scripts thingy sounds helpful admittedly
but the necessary naming schema for arrays and constants for this kind of stuff isn't very conducive to actually using them imo

=== @EmilyV99 (discord: Emily) 07/17/2022 20:53

```cpp
genericdata script onScreenChange
{
    void run()
    {
        unless(this->DataSize) setup();
        if(this->Data[0] != -1)
        {
            //Do something when the screen changes.
            //this->Data[0] is the previous screen.
        }
        this->Data[0] = Game->GetCurScreen();
        while(true)
            Waitframe();
    }
    void setup()
    {
        this->ReloadState[GENSCR_ST_CHANGE_SCREEN] = true;
        this->DataSize = 1;
        this->Data[0] = -1;
    }
    void init()
    {
        if(scr = checkGenericScript("onScreenChange"))
        {
            Game->LoadGenericData(scr)->Running = true;
        }
    }
}```

=== @TheBlueTophat (discord: Coolgamer012345) 07/17/2022 20:54

Oh interesting
Would you mind explaining how you would use that to do something
e.g. how to "get" the previous screen number, in that case

=== @EmilyV99 (discord: Emily) 07/17/2022 20:54


![image](https://cdn.discordapp.com/attachments/998328620546269335/998332002967232552/unknown.png)

=== @TheBlueTophat (discord: Coolgamer012345) 07/17/2022 20:55

oh
lo
## SPC music not looping correctly (#1548)
@ Bagel Meister opened this issue on 07/17/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/998367633890082836



=== @ Bagel Meister 07/17/2022 23:16

In my quests, i usually use SNES music, as ZC supports the SPC format for music. For a quest i'm working on now, I have this really short song for boss fights. I noticed during testing that the song doesn't loop at all. I dont know if other songs do this, but this seems to be a recent problem. I checked earlier builds, and it seems that the first build to have this problem is the first x64 build.
If it helps, i can post the song used if you want
I have to sleep now, sorry if i can't get back about this for a little

=== @connorjclark (discord: connorclark) 07/17/2022 23:37

Yeah the file would help

Just double checked that at least an nsf song loops (uses same library as spc)
Well, I also only checked ZQ music player

You see it in ZQ too?

=== @ Bagel Meister 07/18/2022 23:02

Hi, sorry it took me so long to respond, ive been on trains all day. This is the song i used. Also, i only listened to it in ZC itself
https://cdn.discordapp.com/attachments/998367633890082836/998726577623924787/OPOBoss.spc

=== @ Bagel Meister 07/19/2022 22:14

the issue still seems to be there in the latest build btw

=== @ Bagel Meister 07/21/2022 19:14

Sorry if i'm pestering you, but what's the situation on this issue? Can it be reproduced with the song i sent? For me it happens at about 45 seconds, where the SPC starts to fade out when played normally.

=== @connorjclark (discord: connorclark) 07/21/2022 19:15

No update haven't looked yet

Might look tonight

=== @ Bagel Meister 07/21/2022 19:15

Thanks üëç

=== @connorjclark (discord: connorclark) 07/21/2022 19:16

Please check in ZQ too
In the play music menu

=== @ Bagel Meister 07/21/2022 19:18

For me it cuts out in ZQ as well

=== @ Bagel Meister 07/27/2022 20:25

Hi, I've been testing more songs using the ZQ music player. It seems like every SPC i play cuts out at the point it's supposed to loop, not just this one song
But as you said previously, no NES song i can find has this problem at all
weird

=== @ Bagel Meister 08/05/2022 19:27

Sorry to reopen the thread, but can somebody take a look at this issue? All the music in my quest is SPC, so this bug means none of the music in my quest loops

=== @connorjclark (discord: connorclark) 08/05/2022 19:53

No need to apologize, also no need to bump. I Only plan to work on z3 scrolling until I have basic demo up

=== @ Bagel Meister 08/05/2022 19:54

Thanks for the update
## Touch Effect - Temp Bunny, Perm Bunny, and Cure Bunny (#1549)
@ P-Tux7 opened this issue on 07/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998403235285061723



=== @ P-Tux7 07/18/2022 01:38

The same as Sword and Item Bubbles, but causing the bunny status

=== @ Alucard648 07/18/2022 01:40

And items that can only be used in Bunny ststus.

=== @ vlamart 07/18/2022 03:58

Touch effect for npc, also (if there isn't already one) as a combo flag

=== @ P-Tux7 07/18/2022 04:04

I think that might need to be put to hurt combos, because too many options for flags
-type of touch effect
-effect strength
-whether Link gets knockback
-counter drain effect while standing on it

=== @ vlamart 07/18/2022 04:07

Oh, I had no intention of the combo being the one that hurts, just transforms

=== @ P-Tux7 07/18/2022 04:18

Right, but I mean that the options need to go to a combo type, so might as well combine it with damage combos

=== @ vlamart 07/18/2022 04:19

Actually yeah, that's a dope idea
## ‚úÖAdd (Require Item) flag to Generic Combos (#1550)
@ cbailey78 opened this issue on 07/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998437513905573940



=== @ cbailey78 07/18/2022 03:54

Like in Lock Blocks, but instead of unlocking a block by link pushing against it, the player pushes a button (A, B, etc.) to unlock it.  Like pushing A to break a boulder road block in Zelda 2 (AOL) after link has obtained the hammer.

=== @ vlamart 07/18/2022 03:56

I think you can already do that with chests, it's not on lock blocks?

=== @ cbailey78 07/18/2022 04:01

Yeah I tried that but it didn't work for me.

=== @ P-Tux7 07/18/2022 04:05

This isn't needed once the glitch is fixed

=== @ cbailey78 07/19/2022 03:08

I got it working now I turned off the compat rules off, however, all the locked chests are opened on the screen when I want to have multiple chests and there is not a way to make it open one chest, so I thought we could have a "Required Item" on the generic combo type.

=== @EmilyV99 (discord: Emily) 07/19/2022 22:54

https://cdn.discordapp.com/attachments/876908472728453161/999086639479525418/unknown.png
that was easier than expected
(meta) thread name was changed: ‚úÖAdd (Require Item) flag to Generic Combos

=== @ cbailey78 07/19/2022 23:46

üëè Way to go!  What a miracle!

=== @ cbailey78 07/19/2022 23:52

"That was easy" -STAPLES
## ‚úÖitem DroppedBy (#1551)
@ Orithan opened this issue on 07/18/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/998475111407554693



=== @ Orithan 07/18/2022 06:23

This would flag the item as being dropped by the given NPC UID, where you can do things involving it like referencing the NPC's ItemSet and doing drops based off that.
For non-NPC drops, they can be -1.

=== @EmilyV99 (discord: Emily) 07/18/2022 07:57

if it's dropped by the enemy, then the enemy no longer exists, so how are you going to reference it's pointer?
Or do you mean `ID` rather than `UID`?

=== @ Orithan 07/18/2022 08:38

Either that and/or a way to just reference the enemy's dropset it had at the time

=== @ Orithan 07/18/2022 08:40

I'm just looking for a clean way to manipulate drops without directly going into the item dropsetdata because modifying that to give concrete increases to drop rate sounds like jank.

=== @ Orithan 07/18/2022 08:48

Alternatively I would like a clean way to force an enemy to drop a specific item on death without needing to make item sets for every single possible drop

=== @ P-Tux7 07/18/2022 15:48

...can you script enemies to "carry" items for one frame a la the Z1 enemies that carry keys?
That's in-engine for Enemy 0 but IDK if it can be assigned to one through scripts, or if you can pick a non-screen item for it to carry

=== @ Orithan 07/19/2022 17:21

IIRC only once such item can be on screen at a time

=== @ Orithan 07/19/2022 17:30

```bool HasItem;                
 * Returns if the enemy is holding the screen item.```

=== @EmilyV99 (discord: Emily) 07/22/2022 23:28

(replying to @ Orithan "Either that and/or a way to j‚Ä¶"): this would be the saner way to handle it, something like...```
int DroppedBy;
 * The dropset ID that dropped this item.
 * -1 if item was not dropped from a dropset.```
(mostly noting this to bump the thread so I remember it later when I'm up to adding that)

=== @ Orithan 07/23/2022 01:01

That would be fine

=== @EmilyV99 (discord: Emily) 08/16/2022 21:51

(replying to @EmilyV99 (discord: Emily) "this would be the saner way t‚Ä¶"): took me like a month to get around to it, but this should be done

=== @EmilyV99 (discord: Emily) 08/16/2022 23:43

(meta) thread name was changed: ‚úÖitem DroppedBy

=== @ P-Tux7 08/17/2022 17:51

What were you thinking of using it for, Orithan?
## ‚úÖBuilt in movement functions clipping enemy into solid objects. (#1552)
@ Orithan opened this issue on 07/19/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/998792373167464458



=== @ Orithan 07/19/2022 03:24

The built in movement functions can clip enemies into solid objects under certain circumstances with the ``Sprite Coordinates are Floats`` quest rule, which makes collision checks a headache.

![image](https://cdn.discordapp.com/attachments/998792373167464458/998792435377373284/zc_screen00008.png)
The two numbers in the top right corner tracks the enemy's position.

=== @ Orithan 07/19/2022 03:27

By having the angle be weird values at the top of the screen with this function I was able to clip it into solid objects:
``this->MoveAtAngle(angle, this->Step/100, SPW_NONE);``
The NPC has a step speed of 300

The following CanMove check always returns false regardless of what angle is input:
``this->CanMoveAtAngle(ang, 1, 0)``

=== @EmilyV99 (discord: Emily) 07/20/2022 20:12

Would this occur with normal ghost?
because, I literally copied ghost's code pretty much

=== @ Orithan 07/21/2022 01:09

I think what's happening is the collision check is counting subpixels. If the collision check clips into a solid object by subpixels it's still counted as collided. The movement functions can clip them into solid objects by subpixel amounts and then some weird shenanigans can clip them a full pixel into the object and cause issues that way

=== @ Orithan 07/21/2022 01:10

Because I'm also seeing a lot of instances where NPCs get stuck running along the edges of walls using walk functions.

=== @ Orithan 07/22/2022 02:23

(replying to @EmilyV99 (discord: Emily) "because, I literally copied g‚Ä¶"): Looking into Ghost's code, I can be certain it was not written to account for floating point sprite positions

=== @EmilyV99 (discord: Emily) 07/22/2022 10:06

This ended up being discussed in [#zc-scripting](https://discord.com/channels/876899628556091432/878114935396257852) , here: https://discord.com/channels/876899628556091432/878114935396257852/999880953688227950
fixed, nightly posting in ~30 mins
(meta) thread name was changed: ‚úÖBuilt in movement functions clipping enemy into solid objects.
## ‚úÖTimer Trigger (#1553)
@ vlamart opened this issue on 07/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999049047618900058



=== @ vlamart 07/19/2022 20:24

I know combo cycling is a thing, but would also be convenient if `Timer->` (with a box to put in number of frames) were a trigger. Especilly with the new combo effects

=== @EmilyV99 (discord: Emily) 07/19/2022 20:25

hmmm, that's a really good idea
similar to Button it isn't just a checkbox, so not as easy to add as checkboxes
but good idea

=== @ vlamart 07/19/2022 20:26

Is it time for a Triggers 2 tab? üòù

=== @TheBlueTophat (discord: Coolgamer012345) 07/19/2022 21:01

Can you elaborate what the timer would like, be timing? I'm just curious.

=== @EmilyV99 (discord: Emily) 07/19/2022 21:02

like, combo triggers itself every N frames

=== @EmilyV99 (discord: Emily) 07/20/2022 00:08


![image](https://cdn.discordapp.com/attachments/999049047618900058/999105375045435422/2022-07-19_20-07-44.mp4)
liiiike so

=== @EmilyV99 (discord: Emily) 07/20/2022 00:12

(meta) thread name was changed: ‚úÖTimer Trigger
## Tag Chest Combo as Normal, Locked, or Boss Locked (#1554)
@ P-Tux7 opened this issue on 07/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999108029431689246



=== @ P-Tux7 07/20/2022 00:18

This would make it possible to have three treasure chests of any requirement on the screen. Multiple chests on one screen is very common in the official Zelda games and this addition would not only make quests feel more authentic to Zelda, but encourage users to play around more with the new more authentic chest options already added, such as costs, button prompts, and Hookshottability. I can also see some fun potential with the three Chest Copycat combos now that it would be easier to trigger all three different kinds on one screen.

New combo attribute: Flag used
Normal
Locked
Boss Locked

New combo attribute: Item inside
0: Special Item
1-128: Specific Item ID -1
-1 - -8: ScreenD 0 to 7 read as Specific Item ID

This also would result in the Screen State Carryover menu having the names changed to Chest 1, Chest 2, and Chest 3, and the Locked Chest and Boss Locked Chest combos' names being changed to indicate their deprecated necessity.

=== @EmilyV99 (discord: Emily) 07/22/2022 23:32

The problem here is, grabbing the item from one chest would make the item not be in the other chests
since that uses the screen's special item state
so once you grab one, the other chests become empty
unless screen states were expanded to handle this better, but, that's a quest size / memory eater to expand, so not likely to happen
## ‚ùåWrong Cset after combo change (#1555)
@ cbailey78 opened this issue on 07/20/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/999137623559905352



=== @ cbailey78 07/20/2022 02:16

The two blocks to explode when I step on the green button.
![image](https://cdn.discordapp.com/attachments/999137623559905352/999137628425293895/unknown.png)
The results I wanna see.
![image](https://cdn.discordapp.com/attachments/999137623559905352/999137752824164422/unknown.png)

=== @EmilyV99 (discord: Emily) 07/20/2022 02:17

how are you exploding them
screen secrets?

=== @ cbailey78 07/20/2022 02:18

I'm using a sprite decoration sfx.  I'm gonna show you the results in the player that it shows cset 0.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:18

err...
how does the combo
change
I don't care about the explosion effect

=== @ cbailey78 07/20/2022 02:18

I'm using secret combo flags

=== @EmilyV99 (discord: Emily) 07/20/2022 02:18

ok
make sure
that you set the secret combo
in the secret combos menu
to the correct cset

=== @ cbailey78 07/20/2022 02:18

I'm gonna show you the results in the player.
hang tight...

=== @EmilyV99 (discord: Emily) 07/20/2022 02:19

show me the secret combo setup in ZQ
because that's 99% what's wrong

=== @ cbailey78 07/20/2022 02:21

I'm using the "transition" combos for the explosion sprite effects than cycles to the broken blocks.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:21

ahk, so it's a cycle
show me the combo cycle setup then

=== @ cbailey78 07/20/2022 02:22

Here is the results.
![image](https://cdn.discordapp.com/attachments/999137623559905352/999139146461351996/unknown.png)

=== @EmilyV99 (discord: Emily) 07/20/2022 02:22

yeah doesn't matter
you said it was wrong cset seeing it doesn't help
the zq setup is all I need to see

=== @ cbailey78 07/20/2022 02:22

This is the secret combo setup
![image](https://cdn.discordapp.com/attachments/999137623559905352/999139229282074744/unknown.png)

=== @EmilyV99 (discord: Emily) 07/20/2022 02:22

k, that looks right, so the cycle is the problem

=== @ cbailey78 07/20/2022 02:24

the two blocks are the "always triggered" for the explosion sprite.  Then it cycles to cset 0 whether I have "cycle ignores cset" on or not.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:24

screenshot of the cycle setup is all I need to tell you exactly what's wrong
oh?
Even with cycle ignores cset?
That's odd
can I please
see the setup

=== @ cbailey78 07/20/2022 02:25

Yeah...

![image](https://cdn.discordapp.com/attachments/999137623559905352/999139884155543704/unknown.png)

=== @EmilyV99 (discord: Emily) 07/20/2022 02:25

sorry if I seem a bit blunt, just trying to do a lot of things very quickly at the moment, so trying to be quick

=== @ cbailey78 07/20/2022 02:25

ok

=== @EmilyV99 (discord: Emily) 07/20/2022 02:26

so, that combo is the one that it turns into after the secret?
and cycle ignores cset DOESN'T work?
because that's exactly what I would suspect is wrong here

=== @ cbailey78 07/20/2022 02:26

I'll test the ignore once more...

=== @EmilyV99 (discord: Emily) 07/20/2022 02:27

I added that checkbox specifically for this situation
if it doesn't work then there's a bigger issue here somewhere

=== @ cbailey78 07/20/2022 02:27

It doesn't work with the ignore cset on as well.
When I leave the screen and go back, it shows the correct cset I want it.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:27

can I have the quest file?
...what???
You're using the `Skip cycle on screen init` flag, I presume?

=== @EmilyV99 (discord: Emily) 07/20/2022 02:30

...OH, I think I see the issue

=== @ cbailey78 07/20/2022 02:30

Ok, I turned off the "Cycle combo on screen init" and it will stay at cset 0 and replay the sprite decoration fx on screen re-entry

=== @EmilyV99 (discord: Emily) 07/20/2022 02:32

bleh
surprised I never caught this before
it's some sort of weird memory shit going on

https://cdn.discordapp.com/attachments/999137623559905352/999141925032579174/zelda.exe
Does that work?
(should have cycle ignores cset on, still)

=== @ cbailey78 07/20/2022 02:33

downloading...

=== @EmilyV99 (discord: Emily) 07/20/2022 02:34

sorry again if I was a bit rude

=== @ cbailey78 07/20/2022 02:34

That's ok

![image](https://cdn.discordapp.com/attachments/999137623559905352/999142454559264851/unknown.png)
All I did was replace the one you uploaded over the old zelda.exe.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:36

err
were you using 32bit or 64bit

=== @ cbailey78 07/20/2022 02:36

I was using the 64 bit

=== @EmilyV99 (discord: Emily) 07/20/2022 02:36

bleh
I don't build 64bit
the only way to get 64bit is to push through github and run it's build script for 30 minutes
or I need to set up an entire second buildchain
....probably simplest if you grab the latest 32 bit build, and add the exe I gave to that

=== @ cbailey78 07/20/2022 02:37

ok

=== @EmilyV99 (discord: Emily) 07/20/2022 02:37

(...I really NEED to get a 64bit chain set up, which shouldn't be that hard, just, time consuming)

=== @ cbailey78 07/20/2022 02:39

I only see the 64 and 86 bit for the windows version in Github.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:39

`x86` is not `86 bit`, it's `32 bit`
...why, I have no clue

=== @ cbailey78 07/20/2022 02:39

Ok.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:40

`x86 architecture` is just the thing that runs `32 bit`
...always confused me

=== @ cbailey78 07/20/2022 02:43

It still goes to cset 0

=== @EmilyV99 (discord: Emily) 07/20/2022 02:44

huh
wtf
what layer are they on, 0?

=== @ cbailey78 07/20/2022 02:45

Yes.
There are no layers used in the quest.

=== @ cbailey78 07/20/2022 02:47

Map 4, 6B
https://cdn.discordapp.com/attachments/999137623559905352/999145441356685392/1st.qst

=== @EmilyV99 (discord: Emily) 07/20/2022 02:50

...err
according to my prints
nothing is combo cycling at all there

=== @EmilyV99 (discord: Emily) 07/20/2022 02:53

. . .
Unchecking `Trigger Singular Secret` fixes it
but
it still doesn't
trace anything
so it's still NOT cycling?
what the fuck

=== @EmilyV99 (discord: Emily) 07/20/2022 02:56

....oh
you're using the `->Next` trigger
so yeah, this has absolutely nothing to do with cycling
because you aren't using cycling
at all
The `Trigger Singular Secret` is NOT something you want checked here
because that's replacing the combo with a secret combo of some sort
the only reason it isn't blanking out completely to combo 0
is because `->Next` overrides the combo ID back to normal

=== @ cbailey78 07/20/2022 02:57

Unchecking singular secret fixed for me. thanks so much for your time, you are so helpful!

=== @EmilyV99 (discord: Emily) 07/20/2022 02:58

Doing JUST that also stops the SFX from playing though
You want to use `Change Combo` on the generic combo
*INSTEAD* of the `->Next` trigger flag

=== @ cbailey78 07/20/2022 02:58

Yeah, but when I check "Change combo" It give back the SFX.

=== @EmilyV99 (discord: Emily) 07/20/2022 02:58

yeah, exactly
`Change Combo` does `->Next` for you
so you don't need `->Next` checked
....`Generic` combos are a damn mess

=== @arceusplayer11 (discord: Deedee) 07/20/2022 16:06

Generic combos are one of those nightmares I'm hesitant to touch
I have no idea how I'd clean them up
@EmilyV99 (discord: EmilyV) if you have any ideas on how to clean them up, feel free

=== @EmilyV99 (discord: Emily) 07/20/2022 17:49

(replying to @arceusplayer11 (discord: Deedee) "@EmilyV99 (discord: EmilyV) if you‚Ä¶"): I mean, deleting them would be a lot cleaner....
but also break quests that used them

=== @ cbailey78 07/20/2022 22:35

I am so glad that generic combos got implemented. I unlocks so much flexibility and potential.  If it weren't for generic combotype, we would get bombarded with feature requests.

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:47

(replying to @EmilyV99 (discord: Emily) "I mean, deleting them would b‚Ä¶"): Generic combos aren't completely deprecated

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:48

bush combos, for example, will always be triggered by sword regardless, so if you want a bush that does the bush effects but isn't cut by the sword, you can't with a bush, but you *can* with a generic combo

=== @EmilyV99 (discord: Emily) 07/20/2022 22:49

(replying to @arceusplayer11 (discord: Deedee) "bush combos, for example, wil‚Ä¶"): nooope

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:49

wait what do you mean by nooope

=== @EmilyV99 (discord: Emily) 07/20/2022 22:49


![image](https://cdn.discordapp.com/attachments/999137623559905352/999448091390398544/unknown.png)
You can make bushes not cut by sword
now

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:50

what the fuck
okay
can you do custom breaking effects like Generic combos could?

=== @EmilyV99 (discord: Emily) 07/20/2022 22:50

yep, bushes have had that for quite a while

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:50

do they *work* though

=== @EmilyV99 (discord: Emily) 07/20/2022 22:51

pretty damn sure they do
it's the same code as generics use

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:51

hmm
okay, what else is unique to generic combos...

=== @EmilyV99 (discord: Emily) 07/20/2022 22:52

spawning enemies
offhand, that's unique
...won't be once I add armos combotype effects though

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:53

Triggers don't have a flag to kill the weapon when it triggers it

=== @EmilyV99 (discord: Emily) 07/20/2022 22:54

That's fair, should add that
good idea

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:56

(replying to @EmilyV99 (discord: Emily) "...won't be once I add armos‚Ä¶"): you also wouldn't be able to mix and match, say, a grass cutting effect with an enemy spawn
(for enemies hiding under bushes)

=== @EmilyV99 (discord: Emily) 07/20/2022 22:57

true
could add that to bushes
fairly easily

=== @arceusplayer11 (discord: Deedee) 07/20/2022 22:59

On one hand, a feature complete triggers tab could just completely deprecate bushes and flowers and tall grass
on the other, it's not as user friendly to do so

=== @EmilyV99 (discord: Emily) 07/20/2022 22:59

Things that aren't checkboxes in triggers take extra memory on combos
we have room for >30 more checkboxes without expansion, though
thus far buttons, item required, and timer added 3 bytes

=== @EmilyV99 (discord: Emily) 07/20/2022 23:01

(replying to @EmilyV99 (discord: Emily) "You can make bushes not cut b‚Ä¶"): this also affects all combo types that 'trigger' on their own
so, a stairs combo with that checked won't warp you when you step on it

=== @ cbailey78 07/21/2022 00:02

@emily You Rock!

=== @EmilyV99 (discord: Emily) 07/22/2022 10:07

(meta) thread name was changed: ‚ùåWrong Cset after combo change
## Custom Continue Screen MIDI (#1556)
@ Moosh opened this issue on 07/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999287479779737690



=== @ Moosh 07/20/2022 12:11

Just got asked a question about this. As far as I know it can't be changed currently.
## ‚úÖcompile temp dirs (#1557)
@EmilyV99 (discord: Emily) opened this issue on 07/20/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/999415134835441674



=== @EmilyV99 (discord: Emily) 07/20/2022 20:38

@connorjclark (discord: connorclark) you did something with temp files and compiling?
because

![image](https://cdn.discordapp.com/attachments/999415134835441674/999415205232652298/unknown.png)
those are some weird file names
Any chance you could get that to say `Compiling the buffer` instead?
Used to always be `Compiling 'tmp'`, which, was more understandable than a giant path to a temp folder

=== @connorjclark (discord: connorclark) 07/20/2022 20:46

It uses the os temp file convention
Also, can't you make this change how you like it? It's very simple
Just ... Don't print the file name

=== @EmilyV99 (discord: Emily) 07/20/2022 20:47


![image](https://cdn.discordapp.com/attachments/999415134835441674/999417388229472276/unknown.png)
well that
needs to read the file name, UNLESS it is the buffer
the top one, yeah, duh, that's simple enough to change
but the error messages, not so simple

=== @connorjclark (discord: connorclark) 07/20/2022 20:51

Can the idea of a buffer just go away? ZQuest could point at a real file instead?
Ain't no one editing in the buffer
Or if they are bless their souls

=== @EmilyV99 (discord: Emily) 07/20/2022 20:52

I use the buffer for pretty much every test quest
so

=== @connorjclark (discord: connorclark) 07/20/2022 20:52

How?
Say more
Like just to include afile?

=== @EmilyV99 (discord: Emily) 07/20/2022 20:52


![image](https://cdn.discordapp.com/attachments/999415134835441674/999418574034698270/unknown.png)
All of that was edited in the buffer

=== @connorjclark (discord: connorclark) 07/20/2022 20:53

Ok, but why?

Wouldn't you rather have a set of real test scripts on disk somewhere not saved in random quest files

=== @EmilyV99 (discord: Emily) 07/20/2022 20:53

Sometimes the test script hardcodedly references things in the quest file
so it would be useless outside of that file
and, depending on what I'm doing, I could go through several of these test files in a day
I don't really need to double the number of files cluttering my ZC folder by saving all of those externally

=== @EmilyV99 (discord: Emily) 07/20/2022 20:55

so, in short, no I would rather not

=== @connorjclark (discord: connorclark) 07/20/2022 20:56

Is have the name buffer in the temp file good enough
Otherwise...this whole compiler probably works directly with file paths so changing that for one type of input is probably difficult? But also something I'm not familiar with atm

=== @EmilyV99 (discord: Emily) 07/20/2022 20:57

It would be much better if it could just replace the file name with `buffer` for the temp file
though including the word buffer would be better than it is now

=== @connorjclark (discord: connorclark) 07/20/2022 20:58

Well, that's something I know I could do in a minute.
The other thing idk

=== @EmilyV99 (discord: Emily) 07/20/2022 20:59

eh, I'll take a look myself then
....

![image](https://cdn.discordapp.com/attachments/999415134835441674/999420321142685867/unknown.png)
It was already hardcoding that check
actually this should probably be easy

=== @connorjclark (discord: connorclark) 07/20/2022 20:59

Well there you go ez peasy
Just set a global or something if it is from the buffer
Because the exact path will differ based on OS

=== @EmilyV99 (discord: Emily) 07/20/2022 21:10


![image](https://cdn.discordapp.com/attachments/999415134835441674/999423169783935016/unknown.png)
yep, that was simple enough
(meta) thread name was changed: ‚úÖcompile temp dirs
## ‚úÖTrigger Next-Prev Textbox (#1558)
@ vlamart opened this issue on 07/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999451144038387722



=== @ vlamart 07/20/2022 23:02

Since it's on its own page, not sure if it'd be a big ask, but adding a textbox next to the `->Next` and `->Prev` effects for a specific combo change offset, like with switches

=== @EmilyV99 (discord: Emily) 07/22/2022 21:18

(meta) thread name was changed: ‚úÖTrigger Next-Prev Textbox
## Level Palette change after acquiring an item (#1559)
@ cbailey78 opened this issue on 07/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999470025708666990



=== @ cbailey78 07/21/2022 00:17

I don't know if it's possible to add, but I came up an idea ti have an item that changes a Dmap palette. Like the "Z2 candle" that you obtain in the first palace to illumite the caves, so you can see.  Have a "candle palette" in the dmap settings.

=== @EmilyV99 (discord: Emily) 07/21/2022 00:18

very possible with scripts
not sure if worth adding an itemclass for

=== @ Alucard648 07/21/2022 01:53

Same goes for Dmap music.
## Directional button triggered warp combo type (#1560)
@ cbailey78 opened this issue on 07/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999529775397871656



=== @ cbailey78 07/21/2022 04:14

We should put in a directional buttons check boxes in the triggered tab for the warp combo types which is useful for making doorways for sideview gravity screens/map that you press UP to warp like in SMB3.

=== @EmilyV99 (discord: Emily) 07/21/2022 04:15

there's a reason it was 8 buttons (8 bits in a byte)
and how would that work with controller (joystick?)
that's weird shit
so IDK how that'd work

=== @ P-Tux7 07/21/2022 04:51

(replying to @EmilyV99 (discord: Emily) "and how would that work with‚Ä¶"): Presumably whenever the "up" key is detected as being pressed? (Walking up, left-up, right-up, etc.)

=== @EmilyV99 (discord: Emily) 07/21/2022 04:56

Frankly I have no idea how that even works now
there is code for specifically joystick input
but that just
isn't used almost anywhere?
controllers confuse the heck out of me
(replying to @EmilyV99 (discord: Emily) "there's a reason it was 8 but‚Ä¶"): regardless, this is a thing
I'm trying not to bloat quest files too much
## ‚úÖWeird Timer-Cycle Bug (#1561)
@ vlamart opened this issue on 07/22/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/999849974198194206



=== @ vlamart 07/22/2022 01:26

If you set `timer->` and cycle timer to 29 (1 or 0 frames), it works as expected. However, if cycle timer is also set to 30, after the combo cycles once, if it is cycled to again, it only lasts a frame or couple and sometimes even just fails to cycle.

=== @ vlamart 07/22/2022 01:29

(Tested on two blocks switching colors every 30 frames, A switches back and forth using the timer and `->Next`/`->Prev`, and B uses `Timer->Next`, but uses combo cycling to go back)

=== @EmilyV99 (discord: Emily) 07/22/2022 01:35

fek

=== @EmilyV99 (discord: Emily) 07/22/2022 19:42

Oh, for fucks
You know what it is @ vlamart ?
Cycling is based on combo animation
So the cycle timer keeps playing even while the combo isn't on screen
And `Reset animation when cycled to`?
That resets the combo animation when it is CYCLED to
Not when it appears by any other means
So there are probably a ton of other ways to cause this
and, it's just because of *how cycling works*
I would call this "Not a bug"

=== @EmilyV99 (discord: Emily) 07/22/2022 19:46

The timer is working exactly as intended, which is nice
Cycling is just doing what cycling has always done, which is weird jank, but it's how it works

=== @EmilyV99 (discord: Emily) 07/22/2022 19:47

...while it may not be a bug, that doesn't mean I can't do something about it anyway. Let me see what I can do.

=== @ vlamart 07/22/2022 19:51

@EmilyV99 (discord: EmilyV) #1558 How does this sound?

=== @EmilyV99 (discord: Emily) 07/22/2022 20:37


![image](https://cdn.discordapp.com/attachments/999849974198194206/1000139621113536662/unknown.png)
Ahk, couple things
1. `Reset Anim`
If checked, then after being triggered, the animation of whatever combo is at the position is reset
(So, if the combo changes, the new combo resets its' animation; which fixes the cycling weirdness)
2. `Combo Change`
I removed `->Next` and `->Prev` entirely
now it's just a textbox
old quests will populate the field based on the old flags appropriately

=== @EmilyV99 (discord: Emily) 07/22/2022 20:41

This COULD break scripts that used the flags via script, but, <:nekoshrug:869489800271503400> they can update

=== @ vlamart 07/22/2022 20:41

üëèüëèüëè
üç™üçïüçî

=== @EmilyV99 (discord: Emily) 07/22/2022 20:42

Need to add script access to ALL of the new shit, though
`combo change` has a range of `-65535` to `65535` for the record
which, `65280` is max combo
so
should be able to do whatever the hell you want with it

=== @ vlamart 07/22/2022 20:44

üòä

=== @EmilyV99 (discord: Emily) 07/22/2022 21:14

```
int TriggerItem;
 * The required item ID for triggering the combo.
 * If 0, no item is required.

int TriggerTimer;
 * The timer for timed combo triggers. If 0, no timed trigger will occur.
 * The combo will be triggered every 'n' frames, timer unique to each combo position.

int TriggerSFX;
 * The SFX to play when the combo is triggered. If 0, no SFX will be played.

int TriggerChange;
 * The amount the combo will change by when triggered.
 * Ex. '1' acts as '->Next', '-1' acts as '->Prev'.
 * If '0', no change occurs.```
There we go, script access

=== @EmilyV99 (discord: Emily) 07/22/2022 21:17

(meta) thread name was changed: ‚úÖWeird Timer-Cycle Bug
## Numpad Pg Up and Pg Down Support (#1562)
@ Moosh opened this issue on 07/22/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/999952857514119208



=== @ Moosh 07/22/2022 08:15

My laptop doesn't have dedicated Pg Up and Pg Dn buttons. Only the numpad secondary functions. This makes navigating tile and combo pages rather inconvenient.

=== @connorjclark (discord: connorclark) 07/22/2022 17:44

Can you post a picture so I know for sure what you are referring to

I think I do just wanna be sure

=== @ Moosh 07/22/2022 23:32


![image](https://cdn.discordapp.com/attachments/999952857514119208/1000183533832261793/image.jpg)

=== @EmilyV99 (discord: Emily) 07/22/2022 23:33

indeed, does nothing on mine either
and the reason would be quite simple
even with numlock off, it still reads just the key

=== @ Moosh 07/22/2022 23:34

Yeah I figured

=== @EmilyV99 (discord: Emily) 07/22/2022 23:34

so all ZC knows is that `KEY_3_PAD` was pressed
and nothing at all checks numlock anywhere
what it needs to understand is that `KEY_3_PAD` with `Numlock == false` is `KEY_PGDN`

=== @ Moosh 07/22/2022 23:36

Had a similar issue with synaptics gestures not registering as a scrollwheel. Imagine that's way more complicated though and probably can't be fixed. Thankfully I don't have to put up with it anymore üòÑ

=== @connorjclark (discord: connorclark) 07/23/2022 01:34

does allegro 4 /alpha 107 detect it?

=== @ Moosh 07/23/2022 08:19

nah. I don't think ZQuest has ever detected that key combination
## ‚úÖZScript - Double asterisk as exponentiation operator (#1563)
@TheBlueTophat (discord: Coolgamer012345) opened this issue on 07/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1000191450971111454



=== @TheBlueTophat (discord: Coolgamer012345) 07/23/2022 00:03

It would be nice if raising something to an exponent had it's own operator. I propose `**` since a couple of programming languages already use that, and it's less clunky than having to call `Pow()` for such a basic math operation.

=== @EmilyV99 (discord: Emily) 07/23/2022 03:59

If I were to add that, it wouldn't be good for rewrite, because `*` is used for pointers
and, like, `a ** b` could then mean `a to the b power` OR `a times (what b points to)`
so, meh
powers also, while you may call them a basic math operation, are NOT generally a basic code operation

=== @TheBlueTophat (discord: Coolgamer012345) 07/23/2022 04:41

I am skeptical as to how rare of an operation it is in languages, but the ambiguity on the end of the parser makes a lot of sense.

=== @ Alucard648 07/23/2022 08:40

In most programming languages ^ is exponential operator, so A^2 is ewual to A*A .

=== @EmilyV99 (discord: Emily) 07/23/2022 08:50

`^` is bitwise xor
so `A^A` is equal to 0

=== @ Orithan 07/23/2022 10:35

I wonder the rationale behind it being bitwise xor

=== @TheBlueTophat (discord: Coolgamer012345) 07/23/2022 12:35

Is `^^` occupied for anything?

=== @ Orithan 07/23/2022 14:25

AFIAK yes
It's logical ``XOR``

=== @ Orithan 07/23/2022 14:31

``true ^^ true`` returns ``false``

=== @TheBlueTophat (discord: Coolgamer012345) 07/23/2022 14:42

Hear me out
How about
`^^^`
I have found 1 programming language which uses ^^^ for exponentiation

=== @EmilyV99 (discord: Emily) 07/29/2022 08:50

added

=== @EmilyV99 (discord: Emily) 07/29/2022 10:21

@TheBlueTophat (discord: Coolgamer012345) nightly incoming in ~30 mins

=== @TheBlueTophat (discord: Coolgamer012345) 07/29/2022 15:53

LETS GOOOO

=== @EmilyV99 (discord: Emily) 08/01/2022 18:35

(meta) thread name was changed: ‚úÖZScript - Double asterisk as exponentiation operator
## Decoration Sprite FX appears a few pixels up from the combo (#1564)
@ cbailey78 opened this issue on 07/24/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1000596258123165807



=== @ cbailey78 07/24/2022 02:52

I don't know If this is a bug or whatever, when I make an explosion effect on a combo, the decoration sprite FX draws a few pixels up from the tile.

=== @EmilyV99 (discord: Emily) 07/24/2022 03:29

It most definitely spawns aligned to the grid
What type of decoration are you using?
One of the clippings types, or the generic "whatever sprite you want" type?

=== @EmilyV99 (discord: Emily) 07/24/2022 03:32

@ cbailey78

=== @EmilyV99 (discord: Emily) 07/24/2022 03:33

...oh, found it
Looks like all decorations have a `-2` yoffset when created?
seems like an old hardcode, that will need a qr

=== @EmilyV99 (discord: Emily) 07/24/2022 08:59


https://cdn.discordapp.com/attachments/1000596258123165807/1000688774386290739/zelda.exe
https://cdn.discordapp.com/attachments/1000596258123165807/1000688774654734407/zquest.exe
See if this fixes (64-bit build)
there's a compat QR to toggle off
## assigning Moblin enemy to screen results in (None) (#1565)
@connorjclark (discord: connorclark) opened this issue on 07/25/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1000929593190006804



=== @connorjclark (discord: connorclark) 07/25/2022 00:56

Can see this in classic_1st.qst
![image](https://cdn.discordapp.com/attachments/1000929593190006804/1000929599812812860/unknown.png)
also impacts in ZC. nothing spawns.
other moblins work

=== @ P-Tux7 07/25/2022 02:32

are you using just Moblin or Moblin (L1)
the former is the "guy/npc" kind like IT'S A SECRET TO EVERYBODY
I thought they had renamed them to have "Guy"? We gotta fix that for the new tileset, huh

=== @connorjclark (discord: connorclark) 07/25/2022 02:43

Yeah Emily explained it to me
Regardless there is a UI issue here
Maybe just rename those dudes to Guy in classic quest

=== @EmilyV99 (discord: Emily) 07/25/2022 03:49

It is handled in the default quest\
should probably handle it for old quests on questload with a version check
## ‚úÖAbout dialog version info (#1566)
@EmilyV99 (discord: Emily) opened this issue on 07/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001122446386139166



=== @EmilyV99 (discord: Emily) 07/25/2022 13:43

Add `Win x86`/`Win x64`/`OSX x64` to the `Etc->About` dialog, and equivalent `ZC->About` dialog

=== @EmilyV99 (discord: Emily) 07/25/2022 13:49

Also, a "Copy version info to clipboard" button would be nice... @connorjclark (discord: connorclark) could you mayhaps get me some code for OS clipboard access? (The use would be a button that copies a specific string of data to the clipboard, not like, letting you copy/paste everywhere)

=== @connorjclark (discord: connorclark) 07/25/2022 17:15

That sounds useful
I was thinking it could also dump a bunch of shit at the end of the string like what quest rules are enabled
To reduce some back and forth
So a "copy bug report template " thing

=== @EmilyV99 (discord: Emily) 07/25/2022 17:16

Just being able to have a "copy version info" and "Copy rule info" so you can just post a string would be great

=== @EmilyV99 (discord: Emily) 07/25/2022 17:17

With a load rule string part too
To put it into a test quest

=== @connorjclark (discord: connorclark) 07/25/2022 17:18

al_set_clipboard_text(all_get_display(), "Copied from Allegro!");
should be the code
Am currently On mobile

=== @EmilyV99 (discord: Emily) 07/25/2022 17:18

Ah, seems simple
Also on mobile lol, not home till late
So no rush
And frankly I can probably handle it tomorrow with just that

=== @connorjclark (discord: connorclark) 07/25/2022 17:19

You ought to be able to use any allegro 5 API without any hoops btw
There's this all (allegro legacy) "get display" function that gets you the a5 display object but that's the only special thing

=== @EmilyV99 (discord: Emily) 07/27/2022 06:41

bwahahahhaha

=== @EmilyV99 (discord: Emily) 07/29/2022 07:54

(meta) thread name was changed: ‚úÖAbout dialog version info
## ‚ùåClimbing sideview ladders to other screens break sideview gravity mode (#1567)
@ cbailey78 opened this issue on 07/25/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001243849848541236



=== @ cbailey78 07/25/2022 21:45

When I make Z2 elevator shafts using "sideview gravity" flag and I go up or down to next screen and get off the shaft, it breaks the sideview gravity mode.

=== @TheBlueTophat (discord: Coolgamer012345) 07/25/2022 21:51

Can you elaborate on how it breaks? I'm guessing you mean that like, when you go to the next screen it isn't in sideview gravity mode anymore?

=== @ cbailey78 07/25/2022 22:11

Yes, I meant it's no longer sideview gravity anymore when i go to the next screen.

=== @ P-Tux7 07/25/2022 22:32

Both screens have the Sideview Gravity flag, right? Or is that a DMap flag

=== @ cbailey78 07/25/2022 22:38

Oh nevermind, I figured it out. I had the wrong dmap.  That was the problem. Thanks.

=== @EmilyV99 (discord: Emily) 08/01/2022 19:00

(meta) thread name was changed: ‚ùåClimbing sideview ladders to other screens break sideview gravity mode
## Auto-Scrolling Warp Spawn Flag (#1568)
@ vlamart opened this issue on 07/25/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001268106385170562



=== @ vlamart 07/25/2022 23:21

New flag for the Auto Scrolling Warp combo types, that turns Link invisible (once he starts being pushed from the combo) and spawns him at the return square (either specified in attribs or side warp settings) as if he scrolled there

=== @connorjclark (discord: connorclark) 07/25/2022 23:46

Pushed from the combo? What do you mean by pushed
You just mean when link touches the combo?

=== @ vlamart 07/25/2022 23:54

Yes, I think that's what I mean. Like when the screen scrolls and drags him with it
## ‚ùå(Use SItem State) does not work (#1569)
@ cbailey78 opened this issue on 07/26/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001302329708007474



=== @ cbailey78 07/26/2022 01:38

I don't know if this has already been reported, but the SItem state does not work.  The chests still opens empty.

=== @EmilyV99 (discord: Emily) 07/26/2022 04:30

. . . ?
What do you mean by doesn't work?
how did you set up the chest?

=== @ cbailey78 07/26/2022 13:18

Map 4 - Screen 00
https://cdn.discordapp.com/attachments/1001302329708007474/1001478562446061688/Chest_test_room.qst

=== @EmilyV99 (discord: Emily) 07/26/2022 23:26

you don't have the armos-item flag on the chest
that's still needed

=== @ cbailey78 07/26/2022 23:33

Ok, thanks.

=== @EmilyV99 (discord: Emily) 08/01/2022 19:00

(meta) thread name was changed: ‚ùå(Use SItem State) does not work
## Allow alternate MIDI playback via choosing alternate midi drivers (#1570)
@ FireSeraphim opened this issue on 07/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001324900725821571



=== @ FireSeraphim 07/26/2022 03:07

I do not like the new midi driver at all. there is a noticeable loss in midi quality and being able to choose an alternate midi driver would be ideal. I have coolsoft virtual midisynth installed on the computer I'm currently using and I'm using Florestan Basic GM GS as my soundfont of choice. Taking away the freedom and ability to choose a sound via an external midi driver is a no-no to me

=== @ Majora 07/26/2022 03:23

Nothing was removed, its either a bug or windows changed your midi synth. It did that to me for a bit.

=== @ FireSeraphim 07/26/2022 03:24

Then it probably was just a bug. I closed ZC, launched coolsoft VMS and then launched ZC and it seemed to correct itself
## ‚ùå'compat rules dialog' shows on new quest (#1571)
@connorjclark (discord: connorclark) opened this issue on 07/26/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001352009242386464



=== @connorjclark (discord: connorclark) 07/26/2022 04:55


![image](https://cdn.discordapp.com/attachments/1001352009242386464/1001352015022137344/unknown.png)

=== @EmilyV99 (discord: Emily) 07/26/2022 05:04

yeah, that's not a bug
The default template quest has bugfixes that are not applied
so, it's asking if you want to apply them
(meta) thread name was changed: ‚ùå'compat rules dialog' shows on new quest

=== @connorjclark (discord: connorclark) 07/26/2022 05:08

This is a pretty silly first experience when booting up ZQuest for the first time ...
Why can't the new template use good rules

=== @EmilyV99 (discord: Emily) 07/26/2022 05:12

I need to update the template
working on it
But even if it is updated
as soon as another compat rule is added, the popup will appear again
I also planned to add a config option to force `File->New` to automatically do that without asking
just, haven't gotten around to it yet
There are reasons not to want that, though, so it does have to be togglable
## generate config file instead of including (#1572)
@arceusplayer11 (discord: Deedee) opened this issue on 07/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001409355524100126



=== @arceusplayer11 (discord: Deedee) 07/26/2022 08:43

Currently, config files are included with each new alpha or nightly, and you have to specifically not include it if you don't want to have to rebind your controls or reset certain settings (such as the level palette fix). Instead of including it, maybe it could be generated when you load up ZQuest or ZC and a config isn't already found.

=== @EmilyV99 (discord: Emily) 07/26/2022 09:25

Frankly, they should be generated if you don't have the file with how things work now
so @arceusplayer11 (discord: Deedee) just remove the .cfg from the `output/package`
and it *should* work

=== @EmilyV99 (discord: Emily) 07/26/2022 09:27


![image](https://cdn.discordapp.com/attachments/1001409355524100126/1001420597429022751/unknown.png)
`zc_get_config` writes the default val to the config if that's what it receives from allegro
so any config read with that will appear in a generated config file

=== @ Anthus 07/27/2022 01:01

I've been meaning to ask, what is the intended way to copy config settings? One of my biggest reservations about getting a new build is the slog of "oh, I gotta set up my controls, and paths again üò©"
I'd rather just copy the config file from an older build, if that was an option, but up until now, I've done is manually each time

=== @EmilyV99 (discord: Emily) 07/27/2022 01:02

you can just copy from the previous build
though generally we've had to give the disclaimer that if you're having issues, try using the default config and re-setting up your configs

=== @ Anthus 07/27/2022 01:03

mm
makes sense, if stuff changes etc

=== @EmilyV99 (discord: Emily) 07/27/2022 01:03

but for a while now, (since the code changes shown above, about a year? ago) it should update the existing config
the only thing you won't get updated is if the default setting changes

=== @ Anthus 07/27/2022 01:04

yeah, I don't mind doing that tbh
I just... never really thought about it much. I mean, I've copied .sav files, but it never really occurred to me to copy the config file

=== @ Anthus 07/27/2022 01:06

(replying to @EmilyV99 (discord: Emily) "but for a while now, (since t‚Ä¶"): fwiw, I've had to re-config every time I've downloaded a new ZC version (for years, and years), even if I put it in the same folder (which I don't do anymore, every new alpha has its own folder now)

=== @EmilyV99 (discord: Emily) 07/27/2022 01:09

Yeah, the problem is the one deedee reported here
the new download contains default `.cfg`s
so you need to specifically not overwrite yours with those

=== @ Anthus 07/27/2022 01:10

ahhh
thanks, I think I get it. I tend to overcomplicate things lol

=== @EmilyV99 (discord: Emily) 07/27/2022 07:08

@arceusplayer11 (discord: Deedee) so, this isn't set up completely
What you would need to do (and notably, I am not doing it)
is replace every `get_config_int`, `get_config_string`, `get_config_float` with `zc_get_config`
(the params don't change, only the function name)
that'll make sure that when it tries to read the config, it writes it back to the file if needed
thus generating the file
Once you've done that, you can remove the configs from `output/config`
## HookshotLadderSwitchhook Combo Flags (#1573)
@ vlamart opened this issue on 07/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001572117038514187



=== @ vlamart 07/26/2022 19:30

Similar to the Hookshot/Switchhook Grab flags, add Hookshot/Ladder/Switchhook Only flags so those items can pass through any combo with those flags

=== @ P-Tux7 07/26/2022 20:49

or a QR that renders switchhooks the same as hookshots on the Hookshot/Ladder flag

=== @EmilyV99 (discord: Emily) 07/26/2022 23:27

(replying to @ vlamart "Similar to the Hookshot/Switc‚Ä¶"): ...err, this already exists as a flag??
(replying to @ P-Tux7 "or a QR that renders switchho‚Ä¶"): switchhooks ARE hookshots
just in disguise
like, they literally use ALL of the hookshot code, except when they hit something
combo types

![image](https://cdn.discordapp.com/attachments/1001572117038514187/1001631985799802890/unknown.png)

=== @ vlamart 07/26/2022 23:28

Yes, I mean add them as check boxes next to the other two about hookshots and switchhooks so all combos can use those

=== @EmilyV99 (discord: Emily) 07/26/2022 23:35

oh...
bleh
ok, that makes sense as a request
but uh
...bleh
not happening any time soon
maybe at some point if I feel like digging more into that shit

=== @ vlamart 08/08/2022 20:05

(replying to @ vlamart "Yes, I mean add them as check‚Ä¶"): Maybe move them to its own separate tab in the combo editor, and add more check boxes for passable directions of weapon
## ‚úÖassigning script slots doesn't display window while assigning slots (#1574)
@arceusplayer11 (discord: Deedee) opened this issue on 07/26/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001586454222360787



=== @arceusplayer11 (discord: Deedee) 07/26/2022 20:26

After you click Okay in the assign slots window, no window is active until slots finish assigning and the completion window pops up. This might be confusing for people cause you can't actually do anything while the slots are still being assigned.

=== @EmilyV99 (discord: Emily) 07/27/2022 00:38

...I think my commit I just did for fixing the flicker in that dialog should fix this? @arceusplayer11 (discord: Deedee)

=== @EmilyV99 (discord: Emily) 07/27/2022 11:27

...fixed it a bit TOO good, lol
oof for the nightly
actually fixed now though
#1577
(meta) thread name was changed: ‚úÖassigning script slots doesn't display window while assigning slots
## Move ComboScreenCombo Flag Enemies to Game Settings (#1575)
@ P-Tux7 opened this issue on 07/26/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001602363414560809



=== @ P-Tux7 07/26/2022 21:30

Currently, the following enemies, which are spawned by combos, screen flags or combo flags:
-Shooter (Fireball)
-Armos
-Ghini 2 (Phantom)
-Rock
-Zora
-Trap (4-way Line of Sight)
-Trap (Vertical Line of Sight)
-Trap (Vertical Continuous)
-Trap (Horizontal Line of Sight)
-Trap (Horizontal Continuous)
are set via checking the relevant flag in the Enemy Editor, and the enemy with the lowest ID that has said flag is spawned when said combo/screen/flag calls for it.

My proposal is to convert these settings to a 0-511 number in Game Settings/GameData that is both settable in ZQuest (in a "default enemies" tab in Game Settings) and readable/writable via ZScript (for difficulty modes). When loading old quests, the enemy flags will be read and then converted to GameData. This is even easier for pre-2.50 quests because the IDs of said enemies in those quests are consistent and were unchangeable.

With this done, this should leave **ten general-use flags** on **every** enemy.

I'd also like to request the enemy IDs of the Projectile-Shooting Fires that flank Guys and Zelda Room Fires to be settable in this menu, too. Currently, they use hardcoded enemy ID numbers.

=== @EmilyV99 (discord: Emily) 07/29/2022 06:25

Firstly, can't be 0-255, max enemies is 511
Secondly, could 2.50.2 ZScript interact with those flags in any way? If so, this simply can't be added until rewrite
Thirdly, that sounds like a lot of work, so even if 1. and 2. are not problems, it won't likely happen any time soon

=== @ P-Tux7 07/29/2022 06:34

Oh fuck, I was thinking of items, thanks

=== @ P-Tux7 07/29/2022 06:38

(replying to @EmilyV99 (discord: Emily) "Thirdly, that sounds like a l‚Ä¶"): Yeah well you never know these days. I figured it'd be a good idea to ask due to it presenting you more ZScript possibilities, Deedee because it involves enemy code, or if Connor happens to get the idea in his head as he is wont to do

=== @ P-Tux7 07/29/2022 06:41

(replying to @EmilyV99 (discord: Emily) "Secondly, could 2.50.2 ZScrip‚Ä¶"): @ HeroOfFireZC was that a thing? I wasn't really thinking it could; I recall reading the .qst NPC data or an NPC's current flags to be rather limited in 2.50 and it seems unlikely anyone would have thought to make these read/writable
Sorry for the ping, I figured you were the person here who mucked with modifying Zoras, statues, traps, and whatnot at runtime.

=== @ P-Tux7 07/29/2022 06:45

(I recall you being happy when Deedee added Zoras being able to count as beatable enemies [and not always respawn, I think...?])

=== @EmilyV99 (discord: Emily) 07/29/2022 06:47

I was happy deedee did it because I never want to touch enemy stuff, lol
## Signpost ScreenInitD Usage Option (#1576)
@ P-Tux7 opened this issue on 07/27/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1001647495270641694



=== @ P-Tux7 07/27/2022 00:29

An option for -20 to -27 in the Signpost combo's string field to make it use use ScreenInitD [0]-[7] as the string ID to display

=== @ Alucard648 07/27/2022 05:17

We don`t have access to Screen D registers from ZQuest editor.

=== @EmilyV99 (discord: Emily) 07/27/2022 05:18

that's why he requested InitD
instead of D
(Adding access to screen->D[] simply isn't happening, too much quest file size bloat)
## ‚úÖCompile window SEEMS to freeze upon successful assignment of scripts. (#1577)
@ Tsunami Tommy Reload the Shotty opened this issue on 07/27/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001809124704669776



=== @ Tsunami Tommy Reload the Shotty 07/27/2022 11:11

From the latest version added on the evening of July 27th.

I just successfully compiled a script,  (Emily's Screen State assignment script she graciously provided for assigning strings to signposts.  Thanks again!)  and then went to assign it to a slot in the "Screen" tab, because I seem to think that's where it should go, (and it let me.) 

... and then when I hit The [ OK ] button, the Zelda 2 fanfare theme played, ... ...

... ... ... ...

and then, it seemed to just freeze.  Nothing happened.  Not even the cursor can move.

But I CAN hit enter to make things proceed.  Assuming I knew to do that.

So I guess there's a window somewhere that appears after hitting [ OK ] that doesn't quite move to the foreground to be seen, is all.
![image](https://cdn.discordapp.com/attachments/1001809124704669776/1001809127397400586/unknown.png)
![image](https://cdn.discordapp.com/attachments/1001809124704669776/1001809127758123048/unknown.png)

=== @EmilyV99 (discord: Emily) 07/27/2022 11:15

ah FEK

=== @EmilyV99 (discord: Emily) 07/27/2022 11:16

I see exactly where I fucked up
It's part of fixing the flickering that was happening when you clicked any button in that dialog
I needed to freeze screen rendering
but, I forgot that the OK button has a popup, so it needs to resume drawing before that popup
...and that's using an OLD gui, so the other thing I did recently *won't* automatically fix it....

=== @EmilyV99 (discord: Emily) 07/27/2022 11:19

Simple enough to fix, couple minutes I'll have a build

=== @EmilyV99 (discord: Emily) 07/27/2022 11:26


https://cdn.discordapp.com/attachments/1001809124704669776/1001812780837503137/buildpack.zip

=== @EmilyV99 (discord: Emily) 07/27/2022 11:27

(meta) thread name was changed: ‚úÖCompile window SEEMS to freeze upon successful assignment of scripts.
## ‚úÖ(Subscreen Editor) - Triforce Piece number box should be repositioned. (#1578)
@ Tsunami Tommy Reload the Shotty opened this issue on 07/27/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001814607511433246



=== @ Tsunami Tommy Reload the Shotty 07/27/2022 11:33

I don't know how long it's been this way, but if you look at the "Piece #" box, it's partially blocking the other check boxes there.
![image](https://cdn.discordapp.com/attachments/1001814607511433246/1001814609705041960/unknown.png)

=== @EmilyV99 (discord: Emily) 07/27/2022 11:34

oh for fucks
this dialog is the worst thing in existence
it legitimately scares me to edit it in any way
and it really just needs to be completely remade....

=== @ Tsunami Tommy Reload the Shotty 07/27/2022 11:34

Sorry...   Not important I guess.

=== @EmilyV99 (discord: Emily) 07/27/2022 11:35

No, that's an "I really need to get my ass on remaking that", legitimately
Not the whole editor, just the properties dialog
I remade the Init Data dialog, which was almost as crazy
those are the 2 dialogs that are just weird in how they work
the big thing here being, it changes based on the object type you're editing
which should REALLY be not that bad to do in the new dialog system, I just, need to get my ass on it
And some of the procs, like the color selector one, need to be remade in the new system
so, it's not a one-day project, but really does need to be on my todo list

=== @EmilyV99 (discord: Emily) 08/01/2022 18:35

(meta) thread name was changed: ‚úÖ(Subscreen Editor) - Triforce Piece number box should be repositioned.
(replying to @ Tsunami Tommy Reload the Shotty "Sorry...   Not important I gu‚Ä¶"): Important enough that I just finished rewriting the entire properties dialog.
## (Combo Alias Creator) Copy Feature - Doesn't copy over Layers until Properties is Clicked. (#1579)
@ Tsunami Tommy Reload the Shotty opened this issue on 07/27/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1001878387050172577



=== @ Tsunami Tommy Reload the Shotty 07/27/2022 15:47

Hop into the Combo Alias editor.  Create a new Alias.  Click the "Org" button.  Keep "Copy" selected, and find an alias with layer 0 and layer 3 checked.

Copy that Alias to a new Alias slot.

Note how even though Layer 3 was active on the source Alias, the Destination Alias doesn't have layer 3 enabled __until__ you click the Properties button.
## Step Effects missing Weapon Speed attribute (#1580)
@ Majora opened this issue on 07/29/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1002460966476329090



=== @ Majora 07/29/2022 06:21

"Weapon Dir" can only make a spawned weapon move, there's no option for standing still, like you might want a bomb explosion to do. So please make it so that 0 makes it stand still and 1-8 are the other directions, and 9+ is random direction. Basically shift all the current numbers up by one.

![image](https://cdn.discordapp.com/attachments/1002460966476329090/1002461009212092486/Screenshot_92.png)

=== @EmilyV99 (discord: Emily) 07/29/2022 06:22

no, that won't work
because the dir numbers are the dir numbers, same exact numbers used everywhere relating to direction
Nothing is actually wrong with the dir
the problem is that there's no place to specify the *Speed*
being able to specify a speed is a major thing missing anyway, and a speed of 0 gives you the effect you are missing
Also, even a weapon that does not move, has a dir
so, speed as an attrishort or attribute, is what needs to be added
(meta) thread name was changed: Step Effects missing Weapon Speed attribute
## ‚úÖüîíZLauncher cannot be moved or resized (#1581)
@ Russ opened this issue on 07/29/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1002657953498804316



=== @ Russ 07/29/2022 19:24

As of the newest nightly, both 32 and 64 bit builds, the launcher window cannot be moved like a regular window and cannot be resized. Additional, due to the ongoing Windows Scaling Issues (https://discord.com/channels/876899628556091432/995119534581235793), the unmoveable window is so tiny as to be barely useable

=== @connorjclark (discord: connorclark) 07/29/2022 19:49

Yeah it's cuz I removed the frame from the window ... So we'd either need to revert that change, or make it so that the title bar that z GUI draws knows how to move the real window
Really don't want to do that second bit so I'll probably just revert it

=== @connorjclark (discord: connorclark) 07/29/2022 19:51

Oh another option is to also remove the title bar that z launcher draws to fix the original issue I had here... Is that two title bars look weird

=== @ FireSeraphim 07/31/2022 13:43

I kinda wish ZLauncher could be minimized to the bar. It currently lack a minimize button and that kinda doesn't help since I have ZLauncher pinned to my taskbar and when I launch it there it doesn't properly show up on as a tab on the taskbar. It works otherwise but that's kinda jank and bad

=== @connorjclark (discord: connorclark) 09/04/2022 02:46

(meta) thread name was changed: ‚úÖüîíZLauncher cannot be moved or resized
## ‚úÖMIDIs are still playing at a slower tempo (#1582)
@ Tabletpillow opened this issue on 07/31/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1003182277515296899



=== @ Tabletpillow 07/31/2022 06:08

Similar issue to this mentioned in the CPU usage bug. It only very slightly noticeable. But I can tell it's playing at a slower tempo than a107.

=== @ Tabletpillow 07/31/2022 06:09

Compare the default piano melodies on Zquest.

=== @ FireSeraphim 07/31/2022 13:36

I can sort of verify this at well, The midi music on my end is like 5% to 10% slower
somewhat subtle but noticeable at the same time

=== @connorjclark (discord: connorclark) 08/16/2022 02:20

fix will be in next release

=== @EmilyV99 (discord: Emily) 08/17/2022 01:52

(meta) thread name was changed: ‚úÖMIDIs are still playing at a slower tempo
## Screen Flag -each burnable combo triggered lights up the dark room additively- (#1583)
@ FireSeraphim opened this issue on 07/31/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1003271239793647626



=== @ FireSeraphim 07/31/2022 12:01

This is kinda a frivolous suggestion but I remember there being rooms in in ALTTP with multiple unlit torches and each torch lit up in those rooms brighten up those room progressively. Ideally this would also take into account comboes that only stay lit for a limited amount of time before turning into an unlit torch combo as well.

=== @EmilyV99 (discord: Emily) 07/31/2022 12:08

Doesn't really work well, due to palette restrictions

=== @ FireSeraphim 07/31/2022 12:47

I kinda thought the allegro 5 update would have partially solved that... Oh well.

=== @EmilyV99 (discord: Emily) 08/01/2022 01:42

We CAN change palette restrictions with A5, on a TECHNICAL level
but, doing so will break all old quests, and break existing scripts
so, it simply can't be done until 'rewrite'

=== @ FireSeraphim 08/01/2022 02:35

aye
## More Other Trigger Ideas (#1584)
@ vlamart opened this issue on 08/01/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1003454389383594004



=== @ vlamart 08/01/2022 00:09

`Push->` triggers after pushing against it (same frames as push block timing) if solid.

`Light Beam->` since it is not an lweapon, I put it with "Other" (OR: add a flag and attribs to the Light Trigger combo type to not activate secrets, but level switch states)

=== @ Alucard648 08/01/2022 08:35

EWeapon->
Self Explanatory. Lure enemy into hitting trigger with his eweapon to activate.

=== @ vlamart 08/01/2022 08:37

Already requested, but as check boxes for each eweapon type

=== @ vlamart 08/11/2022 01:03

`Quake->` (from the hammer) trigger (min level determines normal or super, activates combos within the quake's `Stun Radius`)

=== @EmilyV99 (discord: Emily) 08/13/2022 00:16

invert checkbox for required item, 'consume' checkbox for required item

=== @ vlamart 08/13/2022 23:56

`Lens On->`
`Lens Off->`
Triggers for Lens of Truth being activated or not

=== @EmilyV99 (discord: Emily) 08/14/2022 13:53

~~Push->~~
~~Light Beam->~~
**EWeapon->**
**Quake->**
~~Invert Req. Item~~
~~Consume Req. Item~~
~~Lens On->~~
~~Lens Off->~~

=== @ vlamart 08/14/2022 14:15

Is ~~that~~ no or what is done?

=== @EmilyV99 (discord: Emily) 08/14/2022 14:15

what is done
üôÇ

=== @ vlamart 08/14/2022 14:16

üëèüëèüëè
üç™üßÉ

=== @EmilyV99 (discord: Emily) 08/14/2022 14:27

https://youtu.be/Dl09ZBuWJEQ

=== @ vlamart 08/14/2022 14:30

Getting stuck in the wall is hilarious and I love that

=== @EmilyV99 (discord: Emily) 08/14/2022 14:32

And of course, you could have it only trigger when you turn on the lens / hit it with light, and *not* revert
Do note that solid things cannot be hit by light beams unless there is a `glass` combo in the same position (on any layer)
Here, either the orange walls could *be* glass combos themselves, or you could place invisible glass combos over all the orange walls
EWeapons is going to be a lot of work, which is why I've put it off
Quake I'm unsure if is worth adding

=== @EmilyV99 (discord: Emily) 08/14/2022 14:34

(meta, MessageType.pins_add) 

=== @EmilyV99 (discord: Emily) 08/15/2022 05:45

(replying to @EmilyV99 (discord: Emily) "EWeapons is going to be a lot‚Ä¶"): oh man, STUFF

=== @EmilyV99 (discord: Emily) 08/15/2022 05:53


![image](https://cdn.discordapp.com/attachments/1003454389383594004/1008614488330747964/unknown.png)
@ vlamart

=== @ vlamart 08/15/2022 08:02

Dope üëèüëèüëè

=== @ vlamart 08/22/2022 19:27

After playing around with `Proximity`, I can't seem to make a combo that changes stepping off of it. Would that be a bug or should we add `Invert Step` (inverts respective step trigger)  to the Other triggers list?

=== @EmilyV99 (discord: Emily) 08/22/2022 19:28

errr, step really isn't built to handle that
that would be like, extremely difficult
(replying to @ vlamart "After playing around with `Pr‚Ä¶"): Does a proximity of 16 not get close to what you're looking for?

=== @ vlamart 08/22/2022 19:30

Nope

=== @EmilyV99 (discord: Emily) 08/22/2022 19:30

what exactly is the problem with that, though?
need more details than just `nope`

=== @ vlamart 08/22/2022 19:31

Sorry, whether I set prox to 1 or 16, or invert it, if I start already standing on the combo, there is no change

=== @EmilyV99 (discord: Emily) 08/22/2022 19:32

. . . ????
if it's 16, it should change when you are standing on it
if it's inverted, it should change when you are not
Do you have the combo change set up correctly?

=== @ vlamart 08/22/2022 19:35


![image](https://cdn.discordapp.com/attachments/1003454389383594004/1011357919171858432/20220822_133504.jpg)

=== @ vlamart 08/22/2022 19:37


![image](https://cdn.discordapp.com/attachments/1003454389383594004/1011358380285243473/20220822_133646.jpg)
Previous combo

=== @EmilyV99 (discord: Emily) 08/22/2022 19:43

so, if Link is 16 pixels away from the combo, it should become the previous....
OH
duh
proximity is not a trigger CAUSE
it is a trigger CONDITION
so, uh, set `Automatically Triggered` as well
err `Always Triggered`

=== @ vlamart 08/22/2022 19:46

That works, yay! üëèüßÉüç™

=== @EmilyV99 (discord: Emily) 08/22/2022 19:47


![image](https://cdn.discordapp.com/attachments/1003454389383594004/1011361082960519248/unknown.png)
`will trigger` vs `will only trigger`, different meanings
`will trigger` = `this causes it to trigger`
`will only trigger` = `this is a condition added to triggering by any other means`

=== @ vlamart 08/22/2022 19:50

That's not difficult to understand, but was easy to miss because I didn't even notice whether or not the word _only_ was there

=== @EmilyV99 (discord: Emily) 08/22/2022 19:50

yep, easy to miss

=== @ vlamart 08/24/2022 00:45

To make a few more combo types and flags obsolete or redundant: `Enemies->` (if no enemies, trigger), `Secrets->` (if screen state secrets, trigger), and `Copycat (Trigger Only)` (if combo with the same trigger (combination does not matter) is triggered, so is this (in accordance to the copycat's effect)), `Copycat (Trigger & Effect)` (same as the other, but copies the same effects as the triggered combo)

=== @ vlamart 08/28/2022 17:40

Also for the Effects tab, `Change CSet` number box

=== @EmilyV99 (discord: Emily) 08/28/2022 17:41

Surprised it took that long for that to be requested lol

=== @ vlamart 08/28/2022 17:43

Let's make generic combo type even more redundant and add `Spawn Sprite` and `Spawn Enemy` too (double whammy, enemies busting out of pots. Triple bonus, busting out of pots via proximity)

=== @ vlamart 08/28/2022 17:52

And `Spawn Item`:
0 > Dropset
0 <= specific Item
(Onus will be on quest maker to set the item flag for Special Item, for the item itself to only ever spawn once, I would assume same with enemies)

=== @EmilyV99 (discord: Emily) 08/28/2022 17:54

(replying to @ vlamart "And `Spawn Item`:
0 > Dropset‚Ä¶"): If the special item were not built in, it *wouldn't prevent the item spawn*

=== @ vlamart 08/28/2022 17:56

Oop, my next idea was to make it a check box, then if checked, the number box will un-grey. Then:
0 = Special Item
0 > Dropset
0 < specific Item

=== @ vlamart 08/29/2022 20:59

Also make `Secrets->Next` obsolete/redundant

=== @EmilyV99 (discord: Emily) 08/31/2022 12:20

`Spawn Item`
`Spawn Enemy`
`Enemies->`,`Secrets->`
`Trigger Copycat`
`Change CSet`
`ExState`

=== @ vlamart 08/31/2022 12:59

Also `Spawn Sprite` like smashing a pot

=== @EmilyV99 (discord: Emily) 08/31/2022 13:05

bleh, you can probably just use one of the types that spawns sprites when broken

=== @ vlamart 08/31/2022 13:32

Then instead, maybe someway of adding the `Combo Change` value to `ComboType Effects` (or a new checkbox)? (E.g., slash grass, `+3` instead of just `next`)

=== @EmilyV99 (discord: Emily) 08/31/2022 13:33

you... can already do that
just use the generic combo change
and combo type effects
the generic combo change takes priority if enabled

=== @ vlamart 08/31/2022 13:34

Oh, dope cool, then never mind üòä

=== @EmilyV99 (discord: Emily) 08/31/2022 13:37

basically, `combotype effects` is the first effect to occur
and change combo/change cset, store the combo ID before anything changes, and then use that for their change

=== @ vlamart 08/31/2022 13:55

Doprah

=== @EmilyV99 (discord: Emily) 08/31/2022 13:56

OK, currently building a first test, which includes:
`CSet Change`
`Spawn Item` + (special item flag)
`Spawn Enemy`
`ExState` (linking the combo triggering to a screen ExState[] value)

=== @ vlamart 08/31/2022 13:58

Is it only triggered by `ExState[]`, or can it trigger an `ExState[]` too? (I guess that would be more appropriate for the `Switch` combo type)

=== @ vlamart 08/31/2022 13:59

Never mind, just remembered triggering `ExStates[]` is already a thing, and is in fact _the thing_

=== @EmilyV99 (discord: Emily) 08/31/2022 14:00

(replying to @ vlamart "Is it only triggered by `ExSt‚Ä¶"): It would trigger an ExState
and if that ExState is already triggered, the combo will trigger ONLY it's 'Combo Change' and 'CSet Change' attributes (i.e. won't do combotype effects, spawn item, spawn enemy, etc)
so, it's effectively an 'only trigger once' effect
It has a flag to not trigger the exstate until the spawned item is collected or the spawned enemy is killed, as well
so you can tie the behavior to the item or enemy itself

=== @EmilyV99 (discord: Emily) 08/31/2022 14:04

Also, using this, you can change the exstate behavior of say, a lockblock, to do `+3` instead of `->Next`
as the generic exstate takes priority over the combo-specific exstate

=== @EmilyV99 (discord: Emily) 08/31/2022 14:44

bwahhahahaha
(replying to @EmilyV99 (discord: Emily) "OK, currently building a firs‚Ä¶"): ^All works
That just leaves...
`Enemies->`
`Secrets->`
`Trigger Copycat`

=== @EmilyV99 (discord: Emily) 08/31/2022 15:48

OK, `Copycat` works perfectly

=== @ vlamart 08/31/2022 16:21

Can you do conditional effects via scripting, like
```if(triggered by sword) combo change+1
else if(triggered by arrow) combo change+2```

=== @EmilyV99 (discord: Emily) 08/31/2022 16:32

err, not really

=== @ vlamart 08/31/2022 16:35

Can there be?

=== @EmilyV99 (discord: Emily) 08/31/2022 16:40

if you check the collision with sword/arrow/etc yourself, you could do this
using generic triggers, no

=== @ vlamart 08/31/2022 16:50

Ah, I was thinking for the more complicated triggers like light beam or lens

=== @EmilyV99 (discord: Emily) 08/31/2022 18:01

https://youtu.be/gZv_0BciQ7E

=== @EmilyV99 (discord: Emily) 08/31/2022 18:04

I think that's everything I had listed here to add

https://cdn.discordapp.com/attachments/1003454389383594004/1014596700242980914/cmbtrigtest.qst

=== @ vlamart 09/02/2022 13:46

Another effect for redundancy, `Cooldown Timer`, a number box where the combo isn't able to be triggered until time is up (could also just be a check box or negative value that changes the timer behaviour)

=== @EmilyV99 (discord: Emily) 09/02/2022 13:52

that's way too smart an idea
(sounds good, though nightly is already mid-post so not today)

=== @ vlamart 09/02/2022 13:55

Also, the kill weapon flag would still apply during the cooldown

=== @EmilyV99 (discord: Emily) 09/02/2022 15:52

cooldown works perfectly

=== @ vlamart 09/02/2022 15:53

üëèüëèüëè

=== @EmilyV99 (discord: Emily) 09/02/2022 15:54

I just tested by making something trigger every frame and change it's cset by 1
and compared 0 cooldown to 60 cooldown... very easy to tell it works

=== @ vlamart 09/02/2022 16:00

STROBELITE

=== @ vlamart 09/02/2022 20:50

Does the cooldown delay combodata scripts? Could it be a QR?

=== @EmilyV99 (discord: Emily) 09/02/2022 23:45

no, no
## mapdata-D[] still broken (#1585)
@EmilyV99 (discord: Emily) opened this issue on 08/01/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1003489450053095424



=== @EmilyV99 (discord: Emily) 08/01/2022 02:28

Uses mapref when it needs to use a dmap value, needs to be re-implemented
## Quest Rule and SFX Data - Stun Enemy (#1586)
@ P-Tux7 opened this issue on 08/01/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1003495291535765584



=== @ P-Tux7 08/01/2022 02:52

A Quest Rule that changes the sound that plays when an enemy is stunned from the enemy's npcdata Hurt sound to a general sound that is selected in the SFX Data menu.

=== @TheBlueTophat (discord: Coolgamer012345) 08/01/2022 03:22

What would be the point of that out of curiosity. Just so you don't have to manually set the SFX for each enemy, or?

=== @EmilyV99 (discord: Emily) 08/01/2022 03:26

no, like
to have a stun sound separate from a hit sound

=== @TheBlueTophat (discord: Coolgamer012345) 08/01/2022 04:25

Ohhhh

=== @ P-Tux7 08/01/2022 04:27

yeah like if you set an enemy to roar when hit it might seem a little silly for that to apply to the boomerang stunning it as well

=== @TheBlueTophat (discord: Coolgamer012345) 08/01/2022 04:28

<:frfr:917242908023848980>
I gets it now np
## Delayed Light Trigger Flag (#1587)
@ vlamart opened this issue on 08/02/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1003840372872597514



=== @ vlamart 08/02/2022 01:43

Since light beams don't draw fast enough to trigger the combo until after scrolling, it would be nice to add a flag and attrib for the `Light Trigger Combo Type` for a trigger delay (if unlit, n frames lit until triggered; if lit, n frames unlit until untriggered)

=== @EmilyV99 (discord: Emily) 08/02/2022 01:45

the light trigger code is a nightmare and this idea sounds like pain to implement
## opening the active subscreen reveals new dark rooms during scrolling (#1588)
@ Mani Kanina opened this issue on 08/02/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1004028176470659243



=== @ Mani Kanina 08/02/2022 14:09

dark rooms are revealed when the subscreen is opened
https://cdn.discordapp.com/attachments/876954819305275433/1004027907305394309/unknown.png
https://cdn.discordapp.com/attachments/876954819305275433/1004027907670282240/unknown.png

=== @EmilyV99 (discord: Emily) 08/02/2022 14:10

blargh
so, darkscr bitmaps need additional blits for subscreen stuff
yay.....

=== @arceusplayer11 (discord: Deedee) 08/03/2022 02:27

wait, wasn't this not an issue at one point?
## String editor does not take alt-key input. (#1589)
@ Mani Kanina opened this issue on 08/02/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1004091735665807410



=== @ Mani Kanina 08/02/2022 18:22

Come to think of it, this might be related to the other earlier issue I reported a while back with the palette thing.

Anyway, on EU keyboards, alt + number keys produces symbols.

In the build I'm sitting on, which is admittedly over a month old now, ZQ's string editor does not take this input anymore.
example keyboard

![image](https://cdn.discordapp.com/attachments/1004091735665807410/1004091852510732398/unknown.png)
I realised when I tried to insert a backslash
and I just kept getting pluses.
I software switched to an american layout to get the symbol I needed, but that's less than ideal.

=== @ tim 08/02/2022 18:25

<:blobhmmm:430179754616946720>
why wouldn't it just take what windows is telling it to

=== @EmilyV99 (discord: Emily) 08/02/2022 18:26

oh, uh
similar problem to one I remember being mentioned recently
this would be an allegro issue
We don't get the information of what key combo you've pressed
so if you type an `@` on that layout (`Alt+2`)
all we get is `KEY_2`,`alt`
and would need to parse that, somehow, into `@`....

=== @ Mani Kanina 08/02/2022 18:28

it's weird
because this stuff evidently worked on older allegro
because I had no issue with the string editor in older ZC versions
you'd think it'd be on the OS end, what with Alt Gr being generally similar to a function key on a laptop
but I guess not

=== @EmilyV99 (discord: Emily) 08/02/2022 18:36

(replying to @ Mani Kanina "because this stuff evidently‚Ä¶"): oh??
time to ping @connorjclark (discord: connorclark) mayhaps then

=== @ tim 08/02/2022 18:37

why im confused
its like we took a step backwards somewhere
and mind you it had to be working with zoria since he was on a uk keyboard
i asssume o_-

=== @ Mani Kanina 08/02/2022 18:44

(replying to @EmilyV99 (discord: Emily) "oh??"): yeah, this has always worked for me prior. Backslash is kinda needed for string control codes, which I have always used a lot of.

=== @connorjclark (discord: connorclark) 09/01/2022 05:09

Probably same as https://discord.com/channels/876899628556091432/995118459870531774/997015145790312549
## Combo List Scroll Wheel Scrolling Speed (#1590)
@ Majora opened this issue on 08/03/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1004243769773805568



=== @ Majora 08/03/2022 04:26

In Large Mode, the scroll wheel scrolls one combo at a time. Pain. It should be configurable, or at least bumped up!

=== @ Alucard648 08/03/2022 09:00

Imagine working with 5k combos. Very painful, even with bookmarks.

=== @EmilyV99 (discord: Emily) 08/03/2022 09:12

(to be fair, pgup/pgdn skips a lot)
(but yeah)

=== @ Majora 08/03/2022 09:17

I usually use mouse scroll and some combination of SHIFT and ALT and/or CTRL (only 2 of these scroll extra fast, holding 2 at once scrolls to the top or bottom of the whole combo list <:kekw:820115662089355296> )
## Broken palette importation (#1591)
@ FireSeraphim opened this issue on 08/04/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1004677243831865344



=== @ FireSeraphim 08/04/2022 09:08

Palette Importing from images is broken. The first image is what the palette in the edited screenshot looks like in ASEsprite. The second image is what ZC reads from the image and I know I haven't updated ASEsprite and it worked fine in previous versions of ZC, so the problem has to be on ZC's side.
![image](https://cdn.discordapp.com/attachments/1004677243831865344/1004677247438946405/Screen_Shot_003.PNG)
![image](https://cdn.discordapp.com/attachments/1004677243831865344/1004677247757729824/Screen_Shot_004.PNG)

=== @ FireSeraphim 08/04/2022 09:12

@EmilyV99 (discord: EmilyV) The problem here being that ZC isn't reading the palette correctly when in did in previous versions. I use ASEsprite as a shortcut to editing and making new palettes for ZC and I don't know what has happened on the palette importer side of things but it's simply not reading the palette correctly now.

=== @ FireSeraphim 08/04/2022 09:16

also, I had to use an editor screenshot because non-editor screenshots don't preserve the internal colour index structure when used. In previous 2.50 derived versions of ZC (probably prior to the allergo 5 migration) this wasn't a problem

=== @connorjclark (discord: connorclark) 08/04/2022 09:17

stick to bmp for now

=== @ FireSeraphim 08/04/2022 09:18

I swapped to bmp and I'm still getting the same problems

=== @ FireSeraphim 08/04/2022 09:20

Nope, still getting the same exact issue with bmp
![image](https://cdn.discordapp.com/attachments/1004677243831865344/1004680151319183370/Screen_Shot_005.PNG)

=== @ P-Tux7 08/07/2022 07:04

others have confirmed this

=== @ FireSeraphim 08/15/2022 22:58

Still broken in the latest build

=== @connorjclark (discord: connorclark) 08/16/2022 03:26

https://github.com/liballeg/allegro5/issues/1369
in the meantime, it will "work" if you have all the colors in the image and in the expected order, lol

=== @ P-Tux7 08/16/2022 16:48

doesn't that mean you need to have a row of colours at the top
aka an entire tile's worth of them because zq can only import in 16x16 increments

=== @connorjclark (discord: connorclark) 08/16/2022 17:28

First off, I'm joking. Just describing the bug in another way

But yes
Well idk about the tiles worth thing
I'd think just an entire row of one color at a time would do it

=== @EmilyV99 (discord: Emily) 08/20/2022 05:14

(replying to @connorjclark (discord: connorclark) "Well idk about the tiles wort‚Ä¶"): I mean, you would, as a 1 pixel worth would offset the image by 1 pixel, and the import cannot offset except in increments of 16

=== @connorjclark (discord: connorclark) 09/03/2022 16:04

Allegro folk have almost implemented accessing the palette, should be ready soon
## QoL CopyPaste Shortcuts (#1592)
@ vlamart opened this issue on 08/04/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1004856996115271721



=== @ vlamart 08/04/2022 21:02

Since copying and pasting has been added in the script editor (or whatever we call it),  would it be possible to add copying and pasting names of items and enemies when copypasting their data, like the Sprite Data list? Heckeroni pizza, maybe even mass combo edit?

=== @EmilyV99 (discord: Emily) 08/05/2022 08:05

Making general text combos handle that will.... not be as easy
The script editor already had copy+paste functionality
just, you could only paste things that you had copied from the script editor itself, and you could only paste things you copied from it to other parts of the script editor
so, I just made those calls use the system clipboard instead
other things have no handling for more than one character being entered at a time
or for highlighting multiple letters at once to copy
## ‚úÖLock blocks no longer work on layers 1 and 2 in older quests (#1593)
@ Russ opened this issue on 08/09/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1006450866263445584



=== @ Russ 08/09/2022 06:36

In Yuurand specifically, lock blocks on layer 2 no longer work on the newest nightly. They work in alpha 107. Per jman, the new lockblock logic no longer checks on layers. The old lock block collision rule should be enabled automatically for older quests, preserving the old behaviour, but this does not seem to be happening
Relevant conversation snippit
11:31 PM] jman2050: yeah I'm looking at the github
[11:32 PM] jman2050: looks like Emily overhauled lock blocks (among other things) about three weeks ago, then set up a quest rule if the old behavior is wanted
[11:32 PM] jman2050: notably, in the new logic it doesn't check for layers at all
[11:32 PM] jman2050: as far as I can tell
[11:33 PM] jman2050: the old function checks for valid lock block combos on layers 0,1, and 2 as was standard
[11:33 PM] Russ: Ah...
[11:33 PM] Russ: Okay, then lemme just go ahead and make a bug report for this right now
[11:34 PM] jman2050: for now, just setting that quest rule on should fix any issues with Yuurand 
[11:34 PM] Russ: Which rule?
[11:34 PM] jman2050: it's called Old Lockbock Collision or something like that
[11:34 PM] jman2050: it's a quest rule
[11:34 PM] Russ: Wait, is this a new 2.55 rule?
[11:34 PM] Russ: Yuurand's saved in 2.53, so that rule SHOULD be set by default when it's played in 2.55 
[11:35 PM] Russ: So the issue might be that that rule is not being properly set for older quests
[11:35 PM] jman2050: possibly
[11:35 PM] jman2050: still, having certain combo behaviors on layers 0-2 can be useful, so this should be evaluated anyhow
[11:35 PM] jman2050: as far as the new behavior goes

=== @EmilyV99 (discord: Emily) 08/09/2022 11:19

huh, ok, I'm very confused now

=== @EmilyV99 (discord: Emily) 08/09/2022 11:23

(replying to @ Russ "In Yuurand specifically, lock‚Ä¶"): 
![image](https://cdn.discordapp.com/attachments/1006450866263445584/1006523090462855178/unknown.png)
because it most certainly IS being enabled for old quests on this very line

=== @EmilyV99 (discord: Emily) 08/09/2022 11:25

....and also
with the rule ON, it looks like it should work on `0,1,2`
with the rule OFF, it should work on `0,1,2,3,4,5,6`
so there is no case in which it should not work on layers

=== @EmilyV99 (discord: Emily) 08/09/2022 11:30

OH
I think I see what's wrong
bleh

=== @EmilyV99 (discord: Emily) 08/09/2022 11:31

there's an off-by-one error
so it's trying to trigger the lockblock one layer lower than it's placed on
and it only does that *with the compat rule ON*
so, it definitely is enabling it properly if you're having issues

=== @EmilyV99 (discord: Emily) 08/09/2022 11:33

(replying to @ Russ "In Yuurand specifically, lock‚Ä¶"): For the record, you could have opened the quest file in ZQuest and checked if the rule was enabled, which it in fact would have been

=== @EmilyV99 (discord: Emily) 08/09/2022 11:40

(replying to @EmilyV99 (discord: Emily) "there's an off-by-one error"): wait, nope, that's not what's wrong
that fucking variable is never used
fuck
...oh
oh
it's even stupider
Fixed.

=== @EmilyV99 (discord: Emily) 08/09/2022 11:43

there was a 1-letter typo in a variable name... which happened to be a valid different variable name of the same type.

=== @ jman2050 08/09/2022 14:29

Typos, the programmer‚Äôs mortal enemy

=== @EmilyV99 (discord: Emily) 08/09/2022 14:46

(meta) thread name was changed: ‚úÖLock blocks no longer work on layers 1 and 2 in older quests

=== @ Russ 08/09/2022 16:25

(replying to @EmilyV99 (discord: Emily) "there was a 1-letter typo in‚Ä¶"): Aaaaaaaaaaaaaaaaaaaa this is what my nightmares look like
Thanks for fixing it!
## üîíTriforce missing from chest at the end of level 1 in Isle of Rebirth (#1594)
@ C1 opened this issue on 08/10/2022

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007010786872414238



=== @ C1 08/10/2022 19:41

Triforce missing from chest at the end of level 1 in Isle of Rebirth in 2.55
Isle of Rebirth broken

=== @EmilyV99 (discord: Emily) 08/10/2022 20:06

in what 2.55 build?
just saying `In 2.55` is very non-specific

=== @ C1 08/10/2022 20:33

Let me check

=== @ C1 08/10/2022 20:34

Alpha 107 build 61

![image](https://cdn.discordapp.com/attachments/1007010786872414238/1007024432969175160/unknown.png)

=== @EmilyV99 (discord: Emily) 08/10/2022 20:45

try a more recent build
that's not the most recent

=== @ C1 08/10/2022 21:00

OK sure

=== @ C1 08/10/2022 21:06

I'll make sure to save before this stuff happens

=== @ C1 08/10/2022 22:18

With the latest release, ps4 controller doesn't work anymore

=== @EmilyV99 (discord: Emily) 08/10/2022 22:18

separate issue, make a separate report, @ connor in that one

=== @EmilyV99 (discord: Emily) 08/10/2022 23:37

(replying to @ C1 "OK sure"): did a more recent build fix this issue?
if A108 doesn't fix it, I'd try the latest nightly

=== @ C1 08/13/2022 13:35

Gonna try the nightly

=== @ C1 08/13/2022 13:47

@EmilyV99 (discord: EmilyV) I'm able to get ZC player to launch one time but if I try to launch it again it doesn't

=== @ C1 08/13/2022 13:56

Nevermind, it just doesn't open new windows (that's good)

=== @ C1 08/13/2022 14:19

Issue is fixed

=== @ C1 08/13/2022 14:20

unfortunately there is another issue
There is a workaround though

=== @connorjclark (discord: connorclark) 09/04/2022 02:36

(meta) thread name was changed: üîíTriforce missing from chest at the end of level 1 in Isle of Rebirth
## PS4 Controller not functional in ZC 2 55 (#1595)
@ C1 opened this issue on 08/10/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007050735856406609



=== @ C1 08/10/2022 22:20

PS4 Controller not functional in ZC 2.55 Alpha 108 build 61
@connorjclark (discord: connorclark)

=== @ Deathrider 08/11/2022 16:23

Same with PS5
## ‚úÖDoors refuse to open on edge of screen 2 (#1596)
@ C1 opened this issue on 08/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007057853074395259



=== @ C1 08/10/2022 22:49

Doors refuse to open on edge of screen (2.55 Alpha 108 Build 61)

![image](https://cdn.discordapp.com/attachments/1007057853074395259/1007058051142008853/unknown.png)

=== @EmilyV99 (discord: Emily) 08/10/2022 23:25

what is that door
because that certainly does not look like an NES dungeon door

=== @ C1 08/10/2022 23:33

It's a gb style lock door

=== @EmilyV99 (discord: Emily) 08/10/2022 23:34

so, it's using a lockblock combo type, is what I am asking?
you can't just tell me what it is from a design perspective, you need to say what you are actually USING to do that in order for it to be useful information for a bug report
My guess is, it's a lockblock on a layer
which I just fixed a bug with like, 2 days ago
if it isn't a lockblock combo on a layer, then this is a separate issue; but I need to know that to be able to do anything about it

=== @ C1 08/10/2022 23:36

Honestly i don't know the specifics of zc. I'll try to contact the quest author
This quest is bug ridden

=== @EmilyV99 (discord: Emily) 08/10/2022 23:36

don't bother, just see if the next nightly fixes the issue
should be available saturday morning

=== @ C1 08/10/2022 23:36

Sweet

=== @ C1 08/13/2022 14:05

This issue is fixed

=== @EmilyV99 (discord: Emily) 08/13/2022 15:16

(meta) thread name was changed: ‚úÖDoors refuse to open on edge of screen 2
## ‚úÖCursor displays when out of window (#1597)
@EmilyV99 (discord: Emily) opened this issue on 08/10/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007073702158028961



=== @EmilyV99 (discord: Emily) 08/10/2022 23:51

When moving the mouse outside the window, the cursor continues displaying at the edge of the window @connorjclark (discord: connorclark) A5 issue

=== @arceusplayer11 (discord: Deedee) 08/12/2022 03:07

It also moves slightly less smoothly than the regular windows mouse; I really don't like how A5 is handling the mouse compared to A4

=== @arceusplayer11 (discord: Deedee) 08/12/2022 03:13

(sorry if I've been really unhelpful with this; I wouldn't know where to start v.v)

=== @connorjclark (discord: connorclark) 08/12/2022 03:58

Allegro legacy doesn't do hardware mouse (yet)
I've talked about this elsewhere. Somewhere

=== @EmilyV99 (discord: Emily) 08/19/2022 08:39

oh deeeeedeeeeee
I has a present for you

![image](https://cdn.discordapp.com/attachments/1007073702158028961/1010105785122029578/unknown.png)
notice notably that the mouse cursor is not visible on the left edge of the screen here
....this is NOT using an actual hardware cursor, which would be better
but, I made an ALLEGRO_EVENT_QUEUE listening for the A5 events 'mouse leave display' and 'mouse enter display'
....and then use those events to call the *A4* function `show_mouse(NULL)`/`show_mouse(screen)` to show/hide it.
```cpp
static ALLEGRO_EVENT_QUEUE* evq = nullptr;
void init_mouse_events()
{
    if(!evq)
    {
        evq = al_create_event_queue();
        al_register_event_source(evq, al_get_mouse_event_source());
    }
}
void update_mouse_events()
{
    if(evq)
    {
        ALLEGRO_EVENT event;
        while(al_get_next_event(evq, &event))
        {
            switch(event.type)
            {
                case ALLEGRO_EVENT_MOUSE_ENTER_DISPLAY:
                {
                    show_mouse(screen);
                    break;
                }
                case ALLEGRO_EVENT_MOUSE_LEAVE_DISPLAY:
                {
                    show_mouse(NULL);
                    break;
                }
            }
        }
    }
}
void destroy_mouse_events()
{
    if(evq)
    {
        al_destroy_event_queue(evq);
        evq = nullptr;
    }
}```
looks about like it used to look before the A5 update
not sure what changed that made this NOT be happening, or more accurately, what the fuck was doing this for us before, but, this should patch it

=== @EmilyV99 (discord: Emily) 08/19/2022 08:44

@connorjclark (discord: connorclark) any opinions on this?
hardware cursor seems obviously preferable, but, this was bothersome enough to be worth investing in a solution to last us until that's an option

=== @connorjclark (discord: connorclark) 08/19/2022 08:47

You should be able to add handling for the events in a5_mouse.c. I assume you made a new thread for the code you shared above?
Oh, no

=== @EmilyV99 (discord: Emily) 08/19/2022 08:47

noope, I tacked it in `update_hw_screen()` since that's called everywhere

=== @connorjclark (discord: connorclark) 08/19/2022 08:47

Yeah this thing coukd just go there in the middle thread I think
It's something allegro legacy should be doing anyway

=== @EmilyV99 (discord: Emily) 08/19/2022 08:48

it should, yeah
we didn't need this code in A4, so, clearly something is missing to do this for you
thankfully band-aids don't need to be pretty, and hopefully we can use a hardware cursor sooner rather than later

=== @EmilyV99 (discord: Emily) 08/19/2022 08:50

gonna push a nightly, did a few fixes today, and a couple are graphical ones that just IRK people, so nice to push a fix for quickly.

=== @arceusplayer11 (discord: Deedee) 08/19/2022 14:09

Thank you

=== @EmilyV99 (discord: Emily) 08/20/2022 05:12

(meta) thread name was changed: ‚úÖCursor displays when out of window
## ‚úÖScreen messages above passive subscreen (#1598)
@ Mitsukara opened this issue on 08/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1007075963705774170



=== @ Mitsukara 08/11/2022 00:00

It would be neat if screen messages could be displayed at negative Y coordinates and appear on top of the passive subscreen, so you could have the text window replace the passive subscreen. (Not sure how this would interact with layer 6/7 stuff, as the "passive subscreen above sprites" rule creates layer 7.)
Also if I posted this before and forgot, I apologize

=== @EmilyV99 (discord: Emily) 08/11/2022 00:00

Don't think I've heard this idea before
though, with layer 7 existing
the string would appear UNDER the subscreen

=== @ Mitsukara 08/11/2022 00:01

ah
not sure how feasible it would be to change the layer order on messages with like, the message editor or something

=== @EmilyV99 (discord: Emily) 08/13/2022 00:16

(replying to @ Mitsukara "not sure how feasible it woul‚Ä¶"): ....That.... makes way too much sense.
It won't be the simplest add, but it's certainly doable, and sounds worthwhile.

=== @ Mitsukara 08/13/2022 00:19

Hooray!

=== @EmilyV99 (discord: Emily) 08/13/2022 01:04

Should have a test ready shortly

=== @EmilyV99 (discord: Emily) 08/13/2022 01:16

https://youtu.be/TvWobtYQlvE

![image](https://cdn.discordapp.com/attachments/1007075963705774170/1007819941946339408/unknown.png)
defaults to `6` for old quests, and cleared strings

=== @EmilyV99 (discord: Emily) 08/13/2022 01:19

Should be an automatic nightly at midnight, just pushed this so it'll be included

=== @EmilyV99 (discord: Emily) 08/13/2022 02:27

(meta) thread name was changed: ‚úÖScreen messages above passive subscreen
## ‚úÖNegative Values for pick-up counter (#1599)
@ vlamart opened this issue on 08/11/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1007385703308607638



=== @ vlamart 08/11/2022 20:31

Adding negative values to counter pick-ups (for things like Rupoors). Maybe also adding negative values to the combo editor's Skip.X and Y, as well as A.Frames (to move backwards in a tileset, e.g. -2 on tile 5, would animate 5, 4, 3)

=== @EmilyV99 (discord: Emily) 08/11/2022 20:35

nooooope
none of that animation stuff
not fucking with that

=== @ P-Tux7 08/11/2022 21:28

huh? i thought you COULD do that with counter objects
seen it for rupees and hearts already
and the latter quest the guy isn't a scripter... so believe me when i say it's in-engine
also i don't see much value for animation stuff when there are so many tiles to use
i know that's how old games worked (z1 like like animation) but we have way more room

=== @ P-Tux7 08/11/2022 21:32

mike's fun house has the anti-hearts if anyone wants to study that quest

=== @EmilyV99 (discord: Emily) 08/11/2022 21:32


![image](https://cdn.discordapp.com/attachments/1007385703308607638/1007401202478223370/unknown.png)
If I set this to a negative and hit OK, it becomes 0
internally, it is stored as a `word`, which is an `unsigned 16-bit integer`
i.e. range of `0 to 65535`
can't hold a negative

=== @ 4matsy 08/12/2022 01:05

I've also played an old Lunaria/Mani quest that had rupoors in the slashable grass in one area. Can't remember the name of it though.

In other words, the feature WAS there before, and if it isn't now, that's a bug/omission.

=== @ Alucard648 08/12/2022 20:31

Lnk stuck in Castlevania has both Rupoors ans poisonous mushrooms fully functional.

=== @EmilyV99 (discord: Emily) 08/12/2022 21:04

If someone can link a quest file for something that does it...

=== @ Alucard648 08/13/2022 01:58

https://www.purezc.net/index.php?page=quests&id=497
134812869

=== @EmilyV99 (discord: Emily) 08/14/2022 12:33

.
...
*oh*

![image](https://cdn.discordapp.com/attachments/1007385703308607638/1008352762540605480/unknown.png)

=== @EmilyV99 (discord: Emily) 08/14/2022 12:37

This is a fucking case of weird binary packing bullshit
and, new gui update not accounting for that
should be fixed
(meta) thread name was changed: üíäNegative Values for pick-up counter

=== @EmilyV99 (discord: Emily) 08/17/2022 23:49

(meta) thread name was changed: ‚úÖNegative Values for pick-up counter

=== @ P-Tux7 08/18/2022 06:06

thank you!

=== @ P-Tux7 08/18/2022 06:08

or, fuck you for re-enabling this sort of thing on the part of bad quests i guess, but you did what was requested and also needed for backward compatibility... in all it's a wash, really!
## ZQuest window doesn't have icon (#1600)
@arceusplayer11 (discord: Deedee) opened this issue on 08/12/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007486516492242944



=== @arceusplayer11 (discord: Deedee) 08/12/2022 03:11

Minor issue, but in the topleft of the window, there's supposed to be an icon, and in Alpha 107 it's the ZQuest icon, but in 108 it's the generic window icon
topleft is 108, bottom right is 107
![image](https://cdn.discordapp.com/attachments/1007486516492242944/1007486558749864086/unknown.png)

=== @EmilyV99 (discord: Emily) 08/12/2022 03:41

ah fek, probably an issue with the icon update
better the generic than the copyright-infringing
but bleh

=== @EmilyV99 (discord: Emily) 08/15/2022 03:44

I've just spent 2 hours digging into this to no avail
@connorjclark (discord: connorclark) assistance would be much appreciated here
## ‚úÖüîíItems don't move on conveyors in corner (#1601)
@arceusplayer11 (discord: Deedee) opened this issue on 08/12/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007547671667552276



=== @arceusplayer11 (discord: Deedee) 08/12/2022 07:14

an item on a conveyor on the bottom right of the screen isn't pushed by the conveyor.
I have no idea if it's the bottom row in general or not; the key is a fall from ceiling key
![image](https://cdn.discordapp.com/attachments/1007547671667552276/1007547908847050853/zc_screen00037.png)

=== @arceusplayer11 (discord: Deedee) 08/12/2022 07:16

(checked in alpha 107)

=== @ P-Tux7 08/12/2022 17:21

i think the issue is that there simply is no conveyor combo below that one to push it further
if this DID work in 2.53, it needs to be moved to [#compat-bug-reports](https://discord.com/channels/876899628556091432/932919361415577661)

=== @ Moosh 08/12/2022 19:50

This did work in 2.53, yes. You could do some wacky nonsense with items being moved by conveyors while offscreen
Also AQ2 is a great testing ground for obscure 2.53 compatibility stuff because it does a whole lot of jank

=== @ P-Tux7 08/12/2022 21:11

(replying to @ Moosh "This did work in 2.53, yes. Y‚Ä¶"): Offscreen conveyor combos *worked*?
You'd think it wouldn't run any combo stuff on neighbouring screens besides animation and detections for swimming/smart scrolling solids to save RAM

=== @arceusplayer11 (discord: Deedee) 08/14/2022 03:49

So I fixed the item not moving in the corner
but apparently AQ2 did some *wacky* shit with moving items almost offscreen to move them around blocks

=== @ P-Tux7 08/14/2022 05:07

How is that wacky?
An item on-screen should be moveable, right? It's certainly what you would hope happens in ZC when it comes to scripting moving items.
Though if you mean moved by off-screen conveyors then yeah that's wacky as I described above

=== @arceusplayer11 (discord: Deedee) 08/14/2022 13:47

(replying to @ P-Tux7 "Though if you mean moved by o‚Ä¶"): the wacky thing is that you can move the key offscreen and back onscreen
![image](https://cdn.discordapp.com/attachments/1007547671667552276/1008371410449735781/zc_screen00060.png)
![image](https://cdn.discordapp.com/attachments/1007547671667552276/1008371410768498769/zc_screen00061.png)
around these blocks
(not actual equipment you're meant to have; just cheating)

=== @ P-Tux7 08/14/2022 16:00

(replying to @ P-Tux7 "Offscreen conveyor combos *wo‚Ä¶"): So is this seriously what's happening?
~~Oh, there's a funny idea, make an invincible enemy the ringleader and sit Link next to a KAE item, and the key is only reachable if you kill the enemy in one specific place~~

=== @arceusplayer11 (discord: Deedee) 08/16/2022 01:38

(replying to @ P-Tux7 "So is this seriously what's h‚Ä¶"): okay so basically when items check for conveyors, they check combopos, which clamps x and y to screen bounds

=== @ P-Tux7 08/16/2022 01:39

mhm

=== @arceusplayer11 (discord: Deedee) 08/16/2022 01:39

this is intentional so that conveyors pushing items off the screen continue to push the item entirely off the screen despite the item only checking it's center
but I think what's happening here is that the effectflags check doesn't clamp to the screen, it just returns false if offscreen

=== @ P-Tux7 08/16/2022 01:41

mm
did this happen before the new screen stuff connor did or was that what broke it

=== @arceusplayer11 (discord: Deedee) 08/16/2022 01:59

It was my comboeffects stuff that broke it

=== @connorjclark (discord: connorclark) 09/04/2022 03:01

@arceusplayer11 (discord: Deedee) did your 3a55574 commit fix this?

=== @arceusplayer11 (discord: Deedee) 09/04/2022 03:03

Yeah, I fixed both of these

=== @connorjclark (discord: connorclark) 09/04/2022 03:06

(meta) thread name was changed: ‚úÖüîíItems don't move on conveyors in corner
excellent
## ‚úÖDebug traces on itoacat (#1602)
@ Moosh opened this issue on 08/13/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1007962242286891108



=== @ Moosh 08/13/2022 10:42

Fun thing about functions that deal with strings, the developer debug traces are exponentially more obnoxious. Goddammit Zoria

![image](https://cdn.discordapp.com/attachments/1007962242286891108/1007962256509767740/unknown.png)

=== @EmilyV99 (discord: Emily) 08/13/2022 15:17

fixed
(meta) thread name was changed: ‚úÖDebug traces on itoacat
## ‚úÖIncorrect item use costs in old quests. (#1603)
@ Lejes opened this issue on 08/14/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1008278573435588638



=== @ Lejes 08/14/2022 07:39

Playing Randomizer Omega and I noticed remote bombs cost 1/16 of a heart instead of bomb ammo. Verified with HeroOfFire that it's supposed to cost bomb ammo. They tested further and it seems like a lot of non-default items broke like this. The problem remains in the latest nightly, but seems to at least go back to an alpha 107 build from May and possibly earlier.

=== @EmilyV99 (discord: Emily) 08/14/2022 12:21

should be fixed for next nightly
(meta) thread name was changed: üíäIncorrect item use costs in old quests.

=== @EmilyV99 (discord: Emily) 08/17/2022 23:49

(meta) thread name was changed: ‚úÖIncorrect item use costs in old quests.
## ‚úÖFFC Run On Screen Init Scripts delayed by Opening Wipe after Quest Load (#1604)
@ HeroOfFireZC opened this issue on 08/14/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1008406575372836995



=== @ HeroOfFireZC 08/14/2022 16:07

If you have an FFC on a screen set to run on Screen Init, the script is delayed during the opening wipe after loading the quest from the file menu. This means updates to the screen, such as combos or Screen->Item do not occur until the wipe is finished.
This means the combo update will not appear during the wipe, and Screen->Item occurs too late if the Item is already spawned.
The FFC script runs fine after an F6 Continue. Only the opening wipe from loading the quest has this delay.
As this has worked this way since 2.52, this will need a compatibility QR.

=== @EmilyV99 (discord: Emily) 08/15/2022 02:38


![image](https://cdn.discordapp.com/attachments/1008406575372836995/1008565375664922704/unknown.png)
Seems like someone ran into an issue and never got around to fixing it.
Easy fix, for the record.
(meta) thread name was changed: üíäFFC Run On Screen Init Scripts delayed by Opening Wipe after Quest Load

=== @EmilyV99 (discord: Emily) 08/17/2022 23:49

(meta) thread name was changed: ‚úÖFFC Run On Screen Init Scripts delayed by Opening Wipe after Quest Load
## scrolling data for layers (#1605)
@ Mani Kanina opened this issue on 08/16/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1008938893485293619



=== @ Mani Kanina 08/16/2022 03:22

Just a random brain fart idea I had the other day, I figured I'd post it:

When setting a screens layer, include an option to configure X/Y scrolling speed for it. so, with, say. -0.5x, it would move one pixel to the right every other frame. Layers would loop in on itself.

You can already do these kind of draws with scripts, but for moving backgrounds or foregrounds this could be handy.
say a floating sky area, you could have a layer dedicated to a moving clouds BG.
or fog as an overhead layer
Basically it would be a utility feature for non-scripters. But I have no clue how hard this would be to add, so.

=== @connorjclark (discord: connorclark) 08/16/2022 03:27

I'd ask no one to work on this until well after z3 scrolling lands and its kinks worked out.
b/c needing to touch scrolling code again makes me depressed üôÇ
## ‚úÖLight Beam drawing weirdness (#1606)
@ vlamart opened this issue on 08/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1008947361130754098



=== @ vlamart 08/16/2022 03:56

When testing a light puzzle and resetting ZC, the previous light beams are still drawn a few frames after the test is restarted, even on a different screen. The beams also seem to delay being drawn about the same amount of frames when the screen scrolls. Meaning if a trigger relies on light beams, it gets retriggered when entering that screen before it finishes loading

=== @ P-Tux7 08/16/2022 16:49

I think a video might be needed

=== @ vlamart 08/16/2022 16:50

What do you use for screen recording?

=== @ P-Tux7 08/16/2022 17:27

OBS

=== @EmilyV99 (discord: Emily) 08/16/2022 21:03

(replying to @ vlamart "When testing a light puzzle a‚Ä¶"): yeah, I noticed this myself, drawing at least
I wouldn't have expected it to be anything more than visual, though?

=== @EmilyV99 (discord: Emily) 08/16/2022 21:09

> The beams also seem to delay being drawn about the same amount of frames when the screen scrolls.
...I don't see it delaying AT ALL when the screen scrolls?
I only noticed it on continue/start quest

=== @EmilyV99 (discord: Emily) 08/16/2022 21:11

and yeah, it doesn't trigger anything, it's just a visual bug

=== @EmilyV99 (discord: Emily) 08/16/2022 21:12

easy fix, I just wasn't clearing the light beam bitmap in the right spot.

=== @EmilyV99 (discord: Emily) 08/16/2022 21:14

(meta) thread name was changed: ‚úÖLight Beam drawing weirdness
## ‚úÖZQ Bug Right-Clicking in TileWarp Dmap closes ZQ without saving (#1607)
@ xenomicx opened this issue on 08/16/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1009205546672459817



=== @ xenomicx 08/16/2022 21:02

2.55 Alpha 108 Build 61

When the User goes to either the Tile Warp or Side Warp menu (F10/F11) and selects DMap, a drop-down menu comes down. If the User Right-Clicks within that menu, it will close ZQ out without saving.

=== @EmilyV99 (discord: Emily) 08/16/2022 21:03

...replicated easily.
fuuuun

=== @ xenomicx 08/16/2022 21:17

You replicated easily? I did too. I'm so mad at myself. I finished building 3 screens and went to save, but changed my TileWarp before I saved. It crashed without saving and now I had to build the rooms again LOL.

=== @EmilyV99 (discord: Emily) 08/17/2022 01:50

bleh, ok
there was some funky gui shit going on
but I fixed it

=== @EmilyV99 (discord: Emily) 08/17/2022 01:52

(meta) thread name was changed: ‚úÖZQ Bug Right-Clicking in TileWarp Dmap closes ZQ without saving
## ‚ùåRegistering custom events for generic scripts. (#1608)
@ Alucard648 opened this issue on 08/16/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1009248374391849023



=== @ Alucard648 08/16/2022 23:52

Again, more scriptable events and stuff. Usually quest specific events to assign generic scripts on triggering them.

=== @EmilyV99 (discord: Emily) 08/21/2022 06:44

err, so how would you exactly trigger these?
because like, presumably, you'd call a function to send the event....
but at that point, why don't you just.... call a function that does the code you want?
There's no reason to link that to the events system, you just can already do that
(meta) thread name was changed: ‚ùåRegistering custom events for generic scripts.
## ‚úÖzc staying open in background after closing (#1609)
@ tim opened this issue on 08/18/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1009629053415854120



=== @ tim 08/18/2022 01:05

on the tin
closing them doesnt fully close

![image](https://cdn.discordapp.com/attachments/1009629053415854120/1009629092141867028/unknown.png)
a109

=== @ tim 08/18/2022 01:07

windows 11

=== @connorjclark (discord: connorclark) 08/18/2022 02:07

did you try asking nicely
lol
Does it matter how you close it?

=== @ tim 08/18/2022 02:08

just used the x on both
zq did the same too

=== @ tim 08/18/2022 02:09

x invokes file quit anyway

=== @EmilyV99 (discord: Emily) 08/19/2022 04:40

yeah, I just started noticing this recently
thought (hoped) it was just windows being fucky with me, but with other reports of it, seems like an actual issue... great

=== @connorjclark (discord: connorclark) 08/20/2022 02:19

this only started for me just now after I merged master to my scrolling branch. last time I merged was a few days ago IIRC
so this is something recent

=== @ tim 08/20/2022 02:24

not present in the 8/15 nightly

=== @EmilyV99 (discord: Emily) 08/20/2022 02:35

(replying to @connorjclark (discord: connorclark) "so this is something recent"): Your slow midi fix, potentially?

=== @EmilyV99 (discord: Emily) 08/20/2022 02:36

It's the only thing since the 8/15 nightly that touches allegro stuff, except my most recent changes, but I noticed the issue before those

=== @connorjclark (discord: connorclark) 08/20/2022 03:33

yup.
fixed
destroying threads on exit is problematic with how allegro cleans up. i think it's trying to join on itself or something. i forget. anyway, just not doing the cleanup is good enough as a fix.
"cleaning up" at program exit is a silly thing to do anyway
just...let it die

=== @EmilyV99 (discord: Emily) 08/31/2022 18:17

(meta) thread name was changed: ‚úÖzc staying open in background after closing
## Can we get the max number of enemy slots up to 999 at least? (#1610)
@ FireSeraphim opened this issue on 08/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1010168253198377011



=== @ FireSeraphim 08/19/2022 12:48

as of right now in ZC (pre-existing enemies included) there's a max total of 511 enemes that can be customized and edited and I would appreciate having that number bumped up to 999 at the very least.

=== @ FireSeraphim 08/19/2022 14:07

Paging @<role: Developer>s

=== @arceusplayer11 (discord: Deedee) 08/19/2022 14:08

Don't ping us every time you make a bug report or feature request please

=== @ FireSeraphim 08/19/2022 14:19

Aye, sorry

=== @EmilyV99 (discord: Emily) 08/19/2022 20:59

and please do not ping `@ developers`, that includes more people than just deedee and I
but like, seriously
if you make a feature request
I will see the unread notification
the next time I check discord
so unless you're reporting a bug that breaks LITERALLY EVERYTHING and THE WORLD IS ON FIRE, pinging everyone is kinda a bit overkill
## Relative positioning for the -message more- icon instead of absolute positioning (#1611)
@ FireSeraphim opened this issue on 08/19/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1010185694062325921



=== @ FireSeraphim 08/19/2022 13:57

It's probably a minor thing (maybe not considering the message more icon was a 2.10 feature and that was before there was the ability to have message boxes bigger than 32 pixels tall) but basically the "message more" icon/ press A button to continue prompt for message boxes current use absolute positioning which is not ideal because sometimes I run into situation where I have a big 64x64 message box and the message more prompt ends up inside the box instead of beneath it. What I would like to propose is a new QR called "Message More prompts use relative positioning instead of absolute positioning" which fixes this lingering problem
I can give you a screenshot or two which demonstrates why having a relative positioning option for the message more prompt would be ideal.

=== @ FireSeraphim 08/19/2022 14:04


![image](https://cdn.discordapp.com/attachments/1010185694062325921/1010187515656929330/zc_screen00007.png)

=== @ FireSeraphim 08/19/2022 14:08

Actually I dunno if this qualifies more as a bug.

=== @EmilyV99 (discord: Emily) 08/19/2022 21:02


![image](https://cdn.discordapp.com/attachments/1010185694062325921/1010292669148307546/unknown.png)
...is that not what `Y is Offset` here does?
positions it relative to the box's position?

=== @ FireSeraphim 08/19/2022 22:28

I didn't notice that
My apologies

=== @ FireSeraphim 08/22/2022 04:30

Actually... I checked that yesterday and it's still sorta putting the message more icon inside of the textbox for big ones
## ‚úÖZquest sometimes crashes when compiling scripts (#1612)
@ Tabletpillow opened this issue on 08/20/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010366294111043704



=== @ Tabletpillow 08/20/2022 01:54

idk when it does it. It seems pretty random to me at times but it happened twice already out of the five times I've compiled. Using alpha 109

=== @ tim 08/20/2022 01:55

no error in the console, just straight up closed zc?

=== @ Tabletpillow 08/20/2022 01:56

Well when it successfully compiles there will be a notice before it crashes.
I can tell if it crashes if the 'compiled successfully' notice appears and the map editor turns black, it will crash the moment I press ok

=== @EmilyV99 (discord: Emily) 08/20/2022 02:48

That... Sounds very weird

=== @connorjclark (discord: connorclark) 08/20/2022 04:52

lets look at the crash reports!

=== @connorjclark (discord: connorclark) 08/20/2022 04:54


![image](https://cdn.discordapp.com/attachments/1010366294111043704/1010411516891238472/unknown.png)
(sorry Emily, unless I pay money only I can look at these)

=== @EmilyV99 (discord: Emily) 08/20/2022 04:57

what the heck?
that's a very odd crash point

=== @connorjclark (discord: connorclark) 08/20/2022 04:57

well it's memory corruption
so something before this
but after compiling
I've actually seen this a couple times
It happened kinda rarely. I just ignored and soldiered on.

=== @EmilyV99 (discord: Emily) 08/20/2022 04:58

I'm assuming the `d_keyboard_proc` there is the `y` shortcut to open the compile dialog
...which is absolutely of no help
`refresh` is drawing the entire main UI, usually
though takes a flagset for what parts to redraw

=== @connorjclark (discord: connorclark) 08/20/2022 05:01

FWIW it was "first seen" for `nightly-2022-07-27-2`

=== @EmilyV99 (discord: Emily) 08/20/2022 05:03

probably https://github.com/ArmageddonGames/ZQuestClassic/commit/06f00290dc976de653629c950b0f907205e44caa or https://github.com/ArmageddonGames/ZQuestClassic/commit/6ab18b65817cb8df07a0847585f4754525f25594
then
which deals with my `acquire_screen` bullshit

=== @connorjclark (discord: connorclark) 08/20/2022 05:04

Wait, may want to ignore that. I think that may have been the first-ish nightly with crash reporting.
Hard to tell.
But, that does seem related...
given that is in the stack
and it being rare = related to mutexes/threading

=== @EmilyV99 (discord: Emily) 08/20/2022 05:05

the prior nightly was the same day, and the alpha that added crash reporting was a couple days prior
so, could be coincidence, buuuut
and those commits are directly messing with the compile dialog, too, so
it's a bit *too* coincidental
I have no idea what would be wrong, though
at least commit narrowing was easy....

=== @EmilyV99 (discord: Emily) 08/20/2022 05:08


![image](https://cdn.discordapp.com/attachments/1010366294111043704/1010415033773211708/unknown.png)
noting here that I updated that textbox to a new gui system popup

=== @EmilyV99 (discord: Emily) 08/20/2022 05:10

that right there probably is the issue lines
the other 3 changes that are not on those lines don't seem likely, as one was whitespace and the other 2 only would occur if you clicked the `Script Info` or `Clear Slots` popup buttons
so it almost HAS to be that....

=== @connorjclark (discord: connorclark) 08/20/2022 05:24

What should I expect to break without the `sp_*` functions?

=== @EmilyV99 (discord: Emily) 08/20/2022 05:25

they are just calling `acquire_screen`/`release_screen`
so, preventing draw flickering, IIRC?

=== @connorjclark (discord: connorclark) 08/20/2022 05:26

Not seeing any flickering without them.

=== @EmilyV99 (discord: Emily) 08/20/2022 05:27

also be sure that the `Script Info` and `Clear` buttons work
and that the popup telling you how long assign slots took, actually, is like, visible

=== @connorjclark (discord: connorclark) 08/20/2022 05:28

yup

=== @EmilyV99 (discord: Emily) 08/20/2022 05:28

ah, right
the flickering was on the `<<` button
that assigns a slot
because, it closes the dialog, and re-opens it
but, it should never close, visually; it should not draw while closed there
because that flickers the dialog out and back in, which looks weird AF

=== @connorjclark (discord: connorclark) 08/20/2022 05:28

OK, I do see that.
on <<

=== @EmilyV99 (discord: Emily) 08/20/2022 05:29

that's what it was fixing
if you can fix that in any other way, feel free

=== @connorjclark (discord: connorclark) 08/20/2022 05:29

Yes, I'll look into that.
B/c the crash is happening as we modify the screen var while not owning the lock
which is bad cuz the display thread will invalidate that memory often
so all the lock releasing/unreleasing has to be the issue
but i understand why you did it

=== @EmilyV99 (discord: Emily) 08/20/2022 05:30

What I did appeared to be exactly the way to handle this
so I am confused why it is having any issues
is this not like, the exact point of acquire/release screen?

=== @connorjclark (discord: connorclark) 08/20/2022 05:48

hmm yeah it does seem like the code wouldn't mess up the locking behavior...may I've gotten unlucky but I was able to repro the crash with the sp_ calls, but not without, so it really could be related...


Anyway, we can avoid the flickering by just avoiding drawing to the screen bitmap directly as some of these dialog methods do. Should be equivalent to draw to non-screen bitmap, then blit that onto the screen in one go at the end. No lock juggling, and blits are atomic (b/c when the dest bitmap is the screen it acquires the lock for us)
So I'll do that, and hopefully that works and we can remove the extra lock complexity. maybe that fixes it. at the least it'll reduce some complexity.
(ex: in `popup_zqdialog`)

=== @EmilyV99 (discord: Emily) 08/20/2022 05:49

the problem is actually the blit at the end of `popup_zqdialog`
which restores the background behind the dialog
realistically, if the dialog is being re-opened, that draw needs to never reach the actual screen, because it should not be seen

=== @connorjclark (discord: connorclark) 08/20/2022 05:50

ahhh
ok

=== @EmilyV99 (discord: Emily) 08/20/2022 05:51

....but, it needs to be done, because when `popup_zqdialog` is called again, it uses that to create the backup to restore, which while we don't want it when the dialog is re-opening, we *DO* need when the dialog is actually closing
the main problem here being how old dialogs work; they close entirely when you click a button, then do something based on the button, then re-open
instead of having code in the dialog to handle the button
This was never an issue before, as the screen did not EVER update, except when `update_hw_screen()` was called
so, since that was never called in any of those button-handling codes, it never displayed that flicker
but switching to a draw thread, it's just completely not designed to handle it
this issue would occur in basically *every single old dialog*
though assign slots was *particularly* annoying and you click the buttons a lot there

=== @connorjclark (discord: connorclark) 08/20/2022 05:52

soooo we can maintain a recursive "in old gui" counter and decide not to do that second blit when we are not the root call?
same thing just without mutexes?

=== @EmilyV99 (discord: Emily) 08/20/2022 05:53

what do you mean `root call`?
there's no recursion

=== @connorjclark (discord: connorclark) 08/20/2022 05:53

ugh

=== @EmilyV99 (discord: Emily) 08/20/2022 05:53

the dialog handler function
calls popup_zqdialog
then after the dialog closes, it handles some code
then re-opens the dialog fresh
...the best thing I could think of, is to split up what `popup_zqdialog` is doing
so, have a function call that blits the entire screen to some temp bitmap, and another that restores that temp bitmap to the screen
and then call those NOT in the dialog popup function, but, outside in the main handler function
that way, it won't ever do that 'restore' unless the dialog is ACTUALLY closing

=== @EmilyV99 (discord: Emily) 08/20/2022 05:58

something like this

![image](https://cdn.discordapp.com/attachments/1010366294111043704/1010427638617223208/unknown.png)

=== @connorjclark (discord: connorclark) 08/20/2022 06:00

Yeah just started on that idea
sounds great

=== @connorjclark (discord: connorclark) 08/20/2022 06:06

yah that worked great

![image](https://cdn.discordapp.com/attachments/1010366294111043704/1010429770376425513/unknown.png)
i did that

=== @EmilyV99 (discord: Emily) 08/20/2022 06:08

err, but the start call there... does the actual `do_zqdialog`
how is that working on the other side?

=== @connorjclark (discord: connorclark) 08/20/2022 06:09

Ah, I'm just calling the start thing each iteration lol
i'll break it up more

=== @EmilyV99 (discord: Emily) 08/20/2022 06:09

you shouldn't need 3 separate things
you should just need to add a start and end
and replace the popup call with `do_zqdialog` itself
the only reason that MSG_START and MSG_DRAW were there, is so the dialog would draw before the screen release call
which was an absolute hack

=== @connorjclark (discord: connorclark) 08/20/2022 06:10

Oh, don't need those? Thats why I was gonna do a third fn
but if we can drop
cool

=== @EmilyV99 (discord: Emily) 08/20/2022 06:11

yeah, those were added with the release calls

![image](https://cdn.discordapp.com/attachments/1010366294111043704/1010430919632486420/unknown.png)
this is what I was going to do
just cache the whole damn screen so it doesn't need the dialog

=== @EmilyV99 (discord: Emily) 08/20/2022 06:13

which, also seems to work perfectly

=== @EmilyV99 (discord: Emily) 08/20/2022 06:22

err, you removed `sp_` calls in `zinfodlg.cpp`
but I see no fix for what that was acquiring for

![image](https://cdn.discordapp.com/attachments/1010366294111043704/1010433817691041862/unknown.png)
these 3 had nothing to do with the dialog you fixed
should revert that

=== @connorjclark (discord: connorclark) 08/20/2022 06:23

Quest rules?

=== @EmilyV99 (discord: Emily) 08/20/2022 06:23

...these also can't be fixed in the same way, because these are new dialogs, so don't use any form of popup function
though they also weren't crashing
I get the feeling it was the `object_message(MSG_DRAW)` that was causing the crash
which, these didn't use
so, in other words, 1 of 3 places that used the sp_ functions was bugged
you shouldn't have removed them from all 3
just the 1

=== @connorjclark (discord: connorclark) 08/20/2022 06:26

What guis are these though?
I want to verify it's needed

=== @EmilyV99 (discord: Emily) 08/20/2022 06:26

`Quest->Options` and `Quest->ZInfo`

=== @connorjclark (discord: connorclark) 08/20/2022 06:27

i clicked all the buttons in those
seems good
ah
found one
ok
kk reverting that bit

=== @EmilyV99 (discord: Emily) 08/20/2022 06:28

the `load` button in `zinfo` dialog
and the `Ruleset`/`Rule Template` buttons in the QR dialog
and load qr string as well
all of those require re-generating the entire dialog, so they would have flickering without an acquire
....frankly can probably write a better method of handling that into the new gui system, but, that'll be a chunk of work

=== @EmilyV99 (discord: Emily) 08/20/2022 06:55

...what's the difference between `ASSERT` and `DCHECK`?

=== @connorjclark (discord: connorclark) 08/20/2022 07:09

dcheck is from https://github.com/clibs/check
i don't much know how allegro's assert works with all it's options
didnt see it before wanting something like dcheck in my z3 branch

=== @EmilyV99 (discord: Emily) 08/20/2022 07:10

oh for fucks sake
(replying to @EmilyV99 (discord: Emily) "....frankly can probably writ‚Ä¶"): ^so, trying to do this now
and my first attempt... just.... hard crashed.
And not even at the spot I expected it to

=== @connorjclark (discord: connorclark) 08/20/2022 07:11

i think assert would stop executiton one-stack-too-low in al_assert which would be annoying

=== @EmilyV99 (discord: Emily) 08/20/2022 07:11

was just wondering, since I merge conflicted when I pulled your reversion
and it had assert in one version but dcheck in the other
wasn't sure which to keep

=== @connorjclark (discord: connorclark) 08/20/2022 07:12

hehe it only exists in z3 branch atm
i messed up during a cherry pick

=== @EmilyV99 (discord: Emily) 08/20/2022 07:13

ahk

=== @EmilyV99 (discord: Emily) 08/20/2022 07:15

...oh lol
funny how that happens
the very assert in question
is what crashed me
...and it appears that, duh, it had every right to. Fek.
This needs to store a vector of temporary bitmaps, instead of just a single one
because it *can* recurse
in some new dialogs

=== @connorjclark (discord: connorclark) 08/20/2022 07:16

yaaaaaaay
also, +1 for asserts
doing their job
We could have a handle or something that is passed in
or do you want to rely on the call order implicity

=== @EmilyV99 (discord: Emily) 08/20/2022 07:17

call order should be safe

=== @connorjclark (discord: connorclark) 08/20/2022 07:17

famous last words
but sg

=== @EmilyV99 (discord: Emily) 08/20/2022 07:17

because it's a visual thing
when you open a dialog from within a dialog

=== @connorjclark (discord: connorclark) 08/20/2022 07:17

yeah it's pretty much a stack eh
visually

=== @EmilyV99 (discord: Emily) 08/20/2022 07:17

you're always going to close the most recently opened one
first
so
yeah
you effectively *need* to, actually

=== @connorjclark (discord: connorclark) 08/20/2022 07:18

until.....multi-dialog windows you can drag around ü§Ø

=== @EmilyV99 (discord: Emily) 08/20/2022 07:18

because the end call restoring the background behind the one dialog, is what is required for the next
Well those wouldn't be dialogs
they would need to be something else entirely
....like toolboxes, that I started already in a branch
uhg
you know what I hate?
`vector.pop_back()` returns void
instead of returning the element

=== @connorjclark (discord: connorclark) 08/20/2022 07:19

so yeah a BITMAP*[3] or something sounds good enough?

=== @EmilyV99 (discord: Emily) 08/20/2022 07:19

I was just going to make it a vector so it can handle whatever size

=== @connorjclark (discord: connorclark) 08/20/2022 07:19

sure. this isn't hot code so w.e.

=== @connorjclark (discord: connorclark) 08/20/2022 07:20

which reminds me, I wonder if `std::vector` in mapscr (which was an aspirational thing) has any noticeable overhead
i'll try replacing with a static array and see if I noticed a better uncapped fps

=== @EmilyV99 (discord: Emily) 08/20/2022 07:21

yeah, it has no reason to be a vector
even if it doesn't have much overhead, reverting it to an array is probably sensible
HAHAHAHHAHA
SUCCESS
Now any dialog can just set
`rerun_dlg = true;`
before exiting
and it will automatically re-open, BEFORE the end call
the only thing that won't be regenerated is anything in the constructor of the dialog
so, the 2 dialogs that needed this, I just moved a couple things from the constructor to the view() function
so that they will be re-called
and viola, no more sp_bullshit needed for anything
....gonna leave those functions there in case they are needed in the future, though
```cpp
static std::vector<BITMAP*> zqdialog_tmp_bmps;
void popup_zqdialog_start()
{
    BITMAP* tmp_bmp = create_bitmap_ex(8, zq_screen_w, zq_screen_h);
    
    if(tmp_bmp)
    {
        scare_mouse();
        blit(screen, tmp_bmp, 0, 0, 0, 0, zq_screen_w, zq_screen_h);
        unscare_mouse();
        zqdialog_tmp_bmps.push_back(tmp_bmp);
    }
    else
    {
        *allegro_errno = ENOMEM;
    }
}

void popup_zqdialog_end()
{
    if (zqdialog_tmp_bmps.size())
    {
        BITMAP* tmp_bmp = zqdialog_tmp_bmps.back();
        scare_mouse();
        blit(tmp_bmp, screen, 0, 0, 0, 0, zq_screen_w, zq_screen_h);
        unscare_mouse();
        destroy_bitmap(tmp_bmp);
        zqdialog_tmp_bmps.pop_back();
    }
    position_mouse_z(0);
}```
so, these now do the whole screen, don't take any params, and vector-store multiple bitmaps

=== @connorjclark (discord: connorclark) 08/20/2022 07:24

> ....gonna leave those functions there in case they are needed in the future, though
> 
why tho
it'll be in source control
forever and all time

=== @EmilyV99 (discord: Emily) 08/20/2022 07:24

eh, why dig them out again?

=== @connorjclark (discord: connorclark) 08/20/2022 07:24

because keeping dead code around is awful for reading code

=== @EmilyV99 (discord: Emily) 08/20/2022 07:24

we can clean them up at some point, if they are no longer needed

=== @connorjclark (discord: connorclark) 08/20/2022 07:24

that's like the hardest thing about learning how ZC works
all the dead code

=== @EmilyV99 (discord: Emily) 08/20/2022 07:25

how much dead code is there lying around that isn't used for anything?
actually curious

=== @connorjclark (discord: connorclark) 08/20/2022 07:25

Dead code, repeated code, etc. just TOO MUCH code really
I can't think of many examples of dead code atm (falling asleep...)

=== @EmilyV99 (discord: Emily) 08/20/2022 07:25

there's a lot of fucking repeated code

=== @connorjclark (discord: connorclark) 08/20/2022 07:25

but you sure know examples of the others

=== @EmilyV99 (discord: Emily) 08/20/2022 07:25

which I've tried to work on when I can

=== @connorjclark (discord: connorclark) 08/20/2022 07:25

so really "too much code" lol
oh-like, the entire romview thing lol
dead app lol

=== @EmilyV99 (discord: Emily) 08/20/2022 07:26

aye, yeah
it was actually used at some point
but, people just... stopped caring to maintain it
and just packaged an old version
and then, I removed it from the package, to absolutely no complaint

=== @connorjclark (discord: connorclark) 08/20/2022 07:27

which stuck around in some low level methods re: screen scaling
that took a bit to realize it wasn't even needed/used anymore (and scaling code could be simplified)
just one example

=== @EmilyV99 (discord: Emily) 08/20/2022 07:28

yeah, fair
I'm gonna just give it `//!TODO trim`
should indicate it isn't really needed, fairly well
anyway, this issue should be solidly dead
(meta) thread name was changed: ‚úÖZquest sometimes crashes when compiling scripts
time for a nightly with all these fixes

=== @connorjclark (discord: connorclark) 08/20/2022 07:30

üëç

=== @ Tabletpillow 08/20/2022 13:34

Good to see this solved!

=== @EmilyV99 (discord: Emily) 08/20/2022 13:36

Thanks goes to Connor's crash reports, otherwise this would have been impossible to debug
## ‚ùåNo hold up animation on items spawned through scripts through screen data (#1613)
@ Tabletpillow opened this issue on 08/20/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010368118176096378



=== @ Tabletpillow 08/20/2022 02:02

If an item was spawned from the CreateItemAt(); script and the ruleset 'Hold Up Items' is checked through the screen data, Link still doesn't hold up the item.

=== @ Tabletpillow 08/20/2022 02:03

The item is picked up but there is no animation
Even with the ruleset checked

=== @EmilyV99 (discord: Emily) 08/20/2022 02:21

That'd be correct
you need to set the spawned item to hold on pickup
the screen flag is only for items placed on the screen normally via zquest
```cpp
itemsprite spr = CreateItemAt(id, x, y);
spr->Pickup |= IP_HOLDUP;```
(meta) thread name was changed: ‚ùåNo hold up animation on items spawned through scripts through screen data

=== @ P-Tux7 08/20/2022 02:24

Can't this also be forcefully enabled in the Item Editor now

=== @EmilyV99 (discord: Emily) 08/20/2022 02:24

yep, that too, you can set it for each item ID there

=== @ Tabletpillow 08/20/2022 02:25

I see, but it wasn't always like this right?
Since the GB chest script for example I noticed that some quests that used it in the past could be affected by that.
But the script itself could be edited to allow pickups at least.

=== @EmilyV99 (discord: Emily) 08/20/2022 02:26

err, I wouldn't think it would ever have been different
nothing's been changed with this that I'm aware

=== @ P-Tux7 08/20/2022 03:43

all items SHOULD retain their default pickup properties when played in 2.55
## ‚úÖBroken Auto Side Warps (#1614)
@ Tabletpillow opened this issue on 08/20/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010408433125687387



=== @ Tabletpillow 08/20/2022 04:42

If Link is warped via the Autowarp combo, he will continuously autowarp even if the next screen he warps to does not have the combo present.

=== @EmilyV99 (discord: Emily) 08/20/2022 04:46

...whaat?
aw fek
I see, my bad
when I made them work on more layers I fucked up the logic

=== @EmilyV99 (discord: Emily) 08/20/2022 04:50


https://cdn.discordapp.com/attachments/1010408433125687387/1010410364640444507/zquest.exe
https://cdn.discordapp.com/attachments/1010408433125687387/1010410365072445540/zelda.exe
does this fix?

=== @EmilyV99 (discord: Emily) 08/20/2022 04:51

@ Tabletpillow

=== @ Tabletpillow 08/20/2022 04:53

Yeah looks like that fixed it.
Although I've only replaced the ZC application. My computer couldn't let me replace zquest until I restart my computer.
But yeah I think that should fix it!

=== @EmilyV99 (discord: Emily) 08/20/2022 05:00

(meta) thread name was changed: ‚úÖBroken Auto Side Warps
## ‚ùåUnlock lock block sfx not working? (#1615)
@ Tabletpillow opened this issue on 08/20/2022

Status: wont-fix

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010423959755444314



=== @ Tabletpillow 08/20/2022 05:44

It seems like the shutter door sfx that plays when you unlock blocks aren't playing. Instead you just get silence.

=== @EmilyV99 (discord: Emily) 08/20/2022 05:45

Is this a new lockblock that you just set up, or one from a tileset?
If you just set it up, you need to set the sound yourself in the attributes, now
lockblock combos in existing quests should have it autofilled to the door sfx
but, creating new ones you need to set it

=== @ Tabletpillow 08/20/2022 06:02

Ah I see. I did set those up. So I just need to change the sfx. Got it.
Looks like this isn't a bug after all.

=== @EmilyV99 (discord: Emily) 08/20/2022 06:02

(meta) thread name was changed: ‚ùåUnlock lock block sfx not working?
## ‚úÖDisplay the current resolution of the program contents? (#1616)
@ Majora opened this issue on 08/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1010427559818825798



=== @ Majora 08/20/2022 05:58

In the title bar of the application (all 3), would it be possible to add the pixel size of the window. Not the window + bar/border, just what ZC/ZQ is displaying. Since they can be dynamically resized and all. To facilitate recording, was what I was thinking as basis for this.

=== @EmilyV99 (discord: Emily) 08/21/2022 06:46

@connorjclark (discord: connorclark) this'd be you

=== @connorjclark (discord: connorclark) 08/21/2022 06:51

no that's silly

=== @EmilyV99 (discord: Emily) 08/21/2022 06:53

probably silly in the title bar, though displaying it somewhere might be nice

=== @connorjclark (discord: connorclark) 08/21/2022 06:53

something by Video Mode

=== @EmilyV99 (discord: Emily) 08/21/2022 06:53

or, having a dialog that you can open to type in a specific w/h to resize the window to

=== @connorjclark (discord: connorclark) 08/21/2022 06:53

is fine
also i am not gonna touch gui to do this so PEACE

=== @EmilyV99 (discord: Emily) 08/21/2022 06:54

where's the resizing code, what values are relevant?
i.e. how do read/write window width/height

=== @connorjclark (discord: connorclark) 08/21/2022 06:55

he just wants the window size so
one sec

=== @EmilyV99 (discord: Emily) 08/21/2022 06:55

if you can explain that, I can probably handle that

=== @ Majora 08/21/2022 06:55

yeah like how you can resize the window to any size now, by clicking on the edges. I wanna know what the current size ZC/Q is displaying at.

=== @connorjclark (discord: connorclark) 08/21/2022 06:55

`al_get_display_width(_a5_display)`
is the window display size

=== @ Majora 08/21/2022 06:56

I know the application will always have an internal resolution ot 800x600 (i.e. ZQuest large mode) but being able to see how big the display currently is, would be nice

=== @EmilyV99 (discord: Emily) 08/21/2022 06:56

and is there an easy way to resize the window to an arbitrary w/h?

=== @connorjclark (discord: connorclark) 08/21/2022 06:56

https://github.com/connorjclark/ZeldaClassic/blob/3e20ca69332b818e8799746d7d1e3dfdf8e3afa5/src/zc/zelda.cpp#L5313-L5313
Yeah, see that same block of code linked above
al_resize_display

=== @EmilyV99 (discord: Emily) 08/21/2022 06:56


![image](https://cdn.discordapp.com/attachments/1010427559818825798/1010804660447219762/unknown.png)

=== @connorjclark (discord: connorclark) 08/21/2022 06:57

ugh

=== @ Majora 08/21/2022 06:57

I went with title bar because it seemed the least hassle, despite how inelegant it is

=== @EmilyV99 (discord: Emily) 08/21/2022 06:57

there is literally `Etc->Video Mode`
....which currently just reports

=== @connorjclark (discord: connorclark) 08/21/2022 06:58


![image](https://cdn.discordapp.com/attachments/1010427559818825798/1010804995408535562/unknown.png)

=== @EmilyV99 (discord: Emily) 08/21/2022 06:58

```
Unknown...   ?
800x600 8-bit```

=== @connorjclark (discord: connorclark) 08/21/2022 06:58

Yeah that's bogus
a4 has a concept of res/video mode
which is now a lie

=== @ Majora 08/21/2022 06:58

yeah but that'll always say 800x600 won't it, even if the window is physically like 1280x720 pixels

=== @EmilyV99 (discord: Emily) 08/21/2022 06:58

exactly

=== @connorjclark (discord: connorclark) 08/21/2022 06:58

(so zelda really just has that 800x600 canvas)

=== @EmilyV99 (discord: Emily) 08/21/2022 06:58

so that needs to be *fixed*, is the problem here
because it shouldn't be always reporting that
with that code block, I should be able to handle it

=== @ Majora 08/21/2022 06:59

sweeeeeet
connor go home

=== @EmilyV99 (discord: Emily) 08/21/2022 06:59

a new gui dialog to report the number, and allow changing it, should be dead-simple
as long as I have the ability to read/write the size

=== @EmilyV99 (discord: Emily) 08/21/2022 07:24

K, works nicely
can't show it off because still no internet, but, it works nicely

=== @EmilyV99 (discord: Emily) 08/21/2022 07:34

(meta) thread name was changed: ‚úÖDisplay the current resolution of the program contents?

=== @EmilyV99 (discord: Emily) 08/21/2022 07:54

I also included `1x`,`1.5x`,`2x`,`2.5x` buttons, which will fill the fields with that scale (of the base 800x600)

=== @EmilyV99 (discord: Emily) 08/21/2022 08:06

oh uhhhh
I have a weird ass bug to report for you connor
...but I need to show a video, which, I can't post right now.... <:nkoSigh:585926650273988632>
## ‚úÖtimed switches (#1617)
@EmilyV99 (discord: Emily) opened this issue on 08/20/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1010511909910487131



=== @EmilyV99 (discord: Emily) 08/20/2022 11:33

brain is ideas

=== @EmilyV99 (discord: Emily) 08/20/2022 11:37

checkbox on crystal switches / switch blocks: `uses global state`, uses one of 32 global states instead of one of 32 level-dependant states

checkbox on crystal switches (reqs global state) `set revert timer`, gives attribute option for `revert timer`, a number of frames before the switch reverts itself. Only works on global states.

generic trigger option: byte `Switch State` (pick a state 0 to 31), checkboxes `Global State`, `Trigger when on`, `Trigger when off`. `Global state` works the same as it does on switches, changing what state is being read. The triggers do as they say, triggering based on that state.
This would allow everything in this video, unscripted, fairly easily. https://www.youtube.com/watch?v=pgUn9etdwaQ&ab_channel=SkyLizardGirl

=== @EmilyV99 (discord: Emily) 08/20/2022 12:56

also, `combotype effects` on switch blocks- should trigger it's combo change/cset change when 'triggered'

=== @EmilyV99 (discord: Emily) 08/21/2022 05:28

OK, so, didn't do the generic trigger option for state shit
but gave 256 global states
and set up all the rest
no internet on my desktop though, so I can't push the code changes, or post a build, or post an example video.....

=== @EmilyV99 (discord: Emily) 08/21/2022 06:47

(meta) thread name was changed: ‚úÖtimed switches

=== @EmilyV99 (discord: Emily) 08/21/2022 18:06

https://youtu.be/VY0UdJITgxY
## ‚úÖA109 - Cheat Dialog not saving changes. (#1618)
@ Tsunami Tommy Reload the Shotty opened this issue on 08/20/2022

Status: fixed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010662136634146847



=== @ Tsunami Tommy Reload the Shotty 08/20/2022 21:30

I go into a quest, change the cheat codes to 1, 2, 3, 4, press the [OK] button to save the changes, and go back into the Cheat dialog and all of the codes are back to what they were beforehand.  Latest Nightly from August 19th or 20th.

=== @EmilyV99 (discord: Emily) 08/21/2022 01:48

Is it the 19th or the 20th? there was one on both of those days
testing in the latest (which, nothing has changed since the 20th build), I cannot replicate this issue
@ Changeling

=== @ Tsunami Tommy Reload the Shotty 08/21/2022 01:49

The latest one.  I'll try it in a new quest.  Glad it can't be replicated, at least.

=== @EmilyV99 (discord: Emily) 08/21/2022 01:50

OH
wait
I just replicated it
bleh

=== @ Tsunami Tommy Reload the Shotty 08/21/2022 01:50

Neat.  Alrighty then.  Thank you. o.o

=== @EmilyV99 (discord: Emily) 08/21/2022 01:50

So, the issue is purely a dialog one
if you hit OK in the cheat dialog
and then open it again
it does this
but if you hit OK in the cheat dialog
and then close the Quest->Options dialog (with EITHER OK or Cancel), then re-open it, it does NOT do this
wait
no
what the fuck???
ok, this has just changed behavior 3 times
....oh
Were you by chance trying to *CLEAR* the cheat code?
it seems like it only happens when you try to set it to empty

=== @ Tsunami Tommy Reload the Shotty 08/21/2022 01:52

I removed the ones that were set and replaced them with 1, 2, 3, 4, and hit OK.
Then when I went back in, they were still the old codes.

=== @EmilyV99 (discord: Emily) 08/21/2022 02:00

I'm legitimately confused, because I *think* I see the issue
....but if it's what I think it is, this has been a bug for almost a year
and *no one* reported it

=== @EmilyV99 (discord: Emily) 08/21/2022 02:01

given, it might only occur when changing a code to be shorter than it used to be

=== @EmilyV99 (discord: Emily) 08/21/2022 02:05

I really don't get why Saffith likes using `std::string_view`, it causes nothing but problems

=== @EmilyV99 (discord: Emily) 08/21/2022 02:07

should be fixed for next build

=== @ Tsunami Tommy Reload the Shotty 08/21/2022 02:12

It's weird, because I do this often, and this is the first time and the first build in which I'm ever seeing it.  <:LinkShrug:943782713788342272>
I'm sorry there's a weird time of it suddenly.

=== @EmilyV99 (discord: Emily) 08/21/2022 02:32

for the record, this bug has existed for 2 days short of a full year

=== @EmilyV99 (discord: Emily) 08/21/2022 02:38

(meta) thread name was changed: ‚úÖA109 - Cheat Dialog not saving changes.
## ‚úÖbitmap collision checks (#1619)
@EmilyV99 (discord: Emily) opened this issue on 08/21/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1010736590865309696



=== @EmilyV99 (discord: Emily) 08/21/2022 02:26

A function that allows checking if a given color is in an area (masked check) of a bitmap

=== @EmilyV99 (discord: Emily) 08/21/2022 02:29

so, like, ```
int bitmap->CountColor(bitmap mask, int x, int y, int checkColor, int maskColor);
 * Checks the area of the bitmap specified by the mask for the specified color.
 * If 'maskColor' is '-1', any non-0 portion of the mask bitmap will be checked. Otherwise, only areas of the mask bitmap that match the maskColor will be checked.
 * The area checked is from `x,y` to `x+mask->Width,y+mask->Height`. If this goes out of bounds, the out of bounds area is ignored.
 * As this is not a drawing function, draws that occur this frame will *NOT* be read- only whatever was drawn to the bitmap at the end of the previous frame will.```

=== @ jman2050 08/21/2022 16:13

Hmm, so we could do per-pixel collision in theory?

=== @ P-Tux7 08/23/2022 00:24

i recall zoria thinking about that but maybe it was a scripted library

=== @EmilyV99 (discord: Emily) 08/23/2022 00:31

yeah
`GetPixel` lets zscript read individual pixels
but, you need the script to handle the "collision check"
this function, once I get around to adding it, would handle a lot of it internally

=== @ P-Tux7 08/23/2022 07:18

phew

=== @EmilyV99 (discord: Emily) 08/29/2022 11:15


![image](https://cdn.discordapp.com/attachments/1010736590865309696/1013768841270149180/unknown.png)
not colliding

![image](https://cdn.discordapp.com/attachments/1010736590865309696/1013768929061130260/unknown.png)
colliding

=== @EmilyV99 (discord: Emily) 08/29/2022 11:16

checking any color pixel of Link's tile against specifically that red color on a combo on layer 0

=== @EmilyV99 (discord: Emily) 08/29/2022 11:29


https://cdn.discordapp.com/attachments/1010736590865309696/1013772397452730468/bmptsts.qst
(script in the buffer)

=== @EmilyV99 (discord: Emily) 08/29/2022 11:31

(meta) thread name was changed: ‚úÖbitmap collision checks

https://cdn.discordapp.com/attachments/1010736590865309696/1013772932859830352/zelda.exe
https://cdn.discordapp.com/attachments/1010736590865309696/1013772933199573012/zquest.exe
https://cdn.discordapp.com/attachments/1010736590865309696/1013772933463801866/zscript.exe

=== @EmilyV99 (discord: Emily) 08/29/2022 11:34

...works just as well with a different ground color, too; it only cares about the exact one red.
![image](https://cdn.discordapp.com/attachments/1010736590865309696/1013773519135449088/unknown.png)

=== @EmilyV99 (discord: Emily) 08/31/2022 01:08

@ Moosh
## Warp Doll Script Circular Animation Bug (#1620)
@ Tabletpillow opened this issue on 08/21/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010854235476340786



=== @ Tabletpillow 08/21/2022 10:13

The Warp Doll Item Script here: https://www.purezc.net/index.php?page=scripts&id=102 softlocks the game if the item has a circular animation.

=== @ Tabletpillow 08/21/2022 10:15

Wait. I think this problem is only present in my quest.
That's really odd, since I don't remember making any changes to the script.

=== @ Tabletpillow 08/21/2022 10:20

Well this is the line in my quest script for the circle animation. Wondering if there's anything wrong with the code.
https://cdn.discordapp.com/attachments/1010854235476340786/1010855857430462504/new_1.txt
Again link to my quest is here.
https://github.com/Tabletpillowlamp/ZC-Rosemaster
## weird mouse scaling issue (#1621)
@EmilyV99 (discord: Emily) opened this issue on 08/21/2022

Status: unknown

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1010974484133585068



=== @EmilyV99 (discord: Emily) 08/21/2022 18:11


![image](https://cdn.discordapp.com/attachments/1010974484133585068/1010974497303707678/connor_mouse_resize_bug.mp4)
it barely caught it visibly in the video, sadly, as it's such a small flicker
it's most visible right near the end
while moving the mouse, it occasionally flickers out, and appears slightly off to the side; this occurs whenever there are black bars due to resizing not to scale, such as when maximizing.
@connorjclark (discord: connorclark)
something is not quite drawing the mouse at the right position, but only occasionally, and only for approximately a frame before flickering back to the correct place.

=== @connorjclark (discord: connorclark) 08/21/2022 18:59

Does it happen without that recent mouse hide change
The mouse is meant to be drawn in the larger Fullscreen viewport and stretched into the smaller fake canvas thing we have rn
Hence it doesn't line up
It works ok when you can't see the real mouse lol
This may become simpler/go away with hardware mouse so should try that first before getting to deep on this bug

=== @EmilyV99 (discord: Emily) 08/21/2022 19:09

yeah, hardware mouse is probably the solution

=== @ P-Tux7 08/23/2022 00:22

please god please
## üîìZC Launcher isn't loading alternate saves correctly (#1622)
@ FireSeraphim opened this issue on 08/22/2022

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1011377440855162911



=== @ FireSeraphim 08/22/2022 20:52

So I basically have two instances of zc.sav, one named zc_play.sav (this file is for when I want to play other quests and it's in a "saves" folders I made) and zc.sav (I use the later to test Myriad Worlds in the actual ZC Player from start to finish) and when I tell ZC Launcher to load zc_play.sav for save files it basically ignores it and defaults back to loading zc.sav for save files. This problem didn't exist a month or so ago.

=== @EmilyV99 (discord: Emily) 08/22/2022 21:38

`and it's in a "saves" folders I made`
did you direct it to the folder properly?
oh, wait, it's not typed in, it's a browser
huh

=== @EmilyV99 (discord: Emily) 08/22/2022 21:42

....the launcher is setting the config properly
ZC just appears to be resetting the config

=== @EmilyV99 (discord: Emily) 08/22/2022 21:47

I.... this is a tangled mess of a poorly implemented feature... I don't have the energy to dig into this right now
(you can take one guess who's feature this was....)

=== @connorjclark (discord: connorclark) 09/04/2022 02:34

(meta) thread name was changed: üîìZC Launcher isn't loading alternate saves correctly
## GSwitch-setting SCCs (#1623)
@ P-Tux7 opened this issue on 08/23/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1011534956272558081



=== @ P-Tux7 08/23/2022 07:18

This would be super useful to have combos change in other rooms after viewing strings such as in cutscenes, NPC dialogue, or wordless invisible strings. This is practically a game-wide event flag system and non-script access to it would make for some revolutionary quests, as seen by TabletPillow's use of Screen State Carryover and dummy item checks in quests like Link: Rank 9, The Glory Squad, and The Rosemaster. Those are some of the most dynamically changing through the game quests I've seen, really like a real Zelda game does, and making this new GSwitch technology easier to use would result in some more great ones.
## Overhead Flag (#1624)
@ vlamart opened this issue on 08/24/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1012004038289653781



=== @ vlamart 08/24/2022 14:22

In the same group of checkboxes as transparent, add `Overhead` (follows same rules as flag (or type, I don't remember), only on layers 0-2)
## ‚úÖCombo Type - EWeapon Shooter (#1625)
@ P-Tux7 opened this issue on 08/31/2022

Status: open

Labels: ['feature']

Source: https://discord.com/channels/876899628556091432/1014616298359115776



=== @ P-Tux7 08/31/2022 19:22

Similar to a statue. Good for 2.10 bosses with combo-cycling, moving FFCs, or booby trapped Next combos or secret combos. This can be seen as an in-engine and extended version of the Timed Shooter FFC script. The benefits are that this is less random than statues, there is no statue enemy to hurt Link for a non-solid shooter, and it can move as an FFC unlike statue enemies. It really helps with some danmaku boss ideas and room hazard ideas I had for my current project idea.

Attributes
-EWeapon
-Angle:
--0-360: A constant degree
-- -1: Aimed at Link in 4-way
-- -2: Aimed at Link in 8-way
-- -3: Aimed perfectly at Link
-Shot Type (like walking enemies)
-Shot Speed
-Shot Sprite
-Shot Rate Constant Rate/Lower Random Range
-Shot Rate Upper Random Range
-Minimum Player Distance (in pixels)

Flags:
-Random (the shooting timer is constant. The upper random range attribute is used in this configuration. If not set to random, the Lower Random Range attribute is used as a constant timer.)
-Spawn Weapon Immediately Upon Existing
-Requires Minimum Player Distance (like the Z1 statues, it will not fire if the player is close enough. Uses the attribute above)
-Is Boss-Level Projectile

=== @ Shane 08/31/2022 21:30

Oh this would be awesome.

=== @ Tsunami Tommy Reload the Shotty 09/01/2022 09:51

It's all anyone's ever wanted regarding projectiles.
... and non-scripting phobias.

=== @EmilyV99 (discord: Emily) 09/02/2022 10:28

ok god dammit p-tux you requested a lot here
pretty fancy request, not easy to fill
.....and yet, I have *most* of it done
(I didn't add shot types or a boss fireball checkbox)
(but shooting single weapons seems to work perfectly)

=== @EmilyV99 (discord: Emily) 09/02/2022 13:37

ahk, it's done
it can shoot multiple weapons, with whatever arc between them you like
can shoot boss fireballs with a checkbox
can use the unblockable flags
can attach a weapon script (by ID number) to its' spawned weapons

=== @ Tsunami Tommy Reload the Shotty 09/02/2022 13:44

... you're a madwoman.  Can't wait to test that out.  Thank you so much!  This really puts non-scripted custom bosses ahead by ten steps.

=== @ P-Tux7 09/02/2022 15:07

^^^
thank you!!!

=== @EmilyV99 (discord: Emily) 09/02/2022 15:08

[#builds-255](https://discord.com/channels/876899628556091432/876906918847852594) all set to play with

=== @EmilyV99 (discord: Emily) 09/02/2022 15:11

(replying to @ P-Tux7 "thank you!!!"): you're absolutely welcome. Thank you for the detailed request, made it a lot easier to organize.
(meta) thread name was changed: ‚úÖCombo Type - EWeapon Shooter
## üîìcertain enhanced music not recognised in latest nightly (#1626)
@ tacochopper opened this issue on 09/02/2022

Status: open

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1015234265140707338



=== @ tacochopper 09/02/2022 12:18

as per the [#zc-help](https://discord.com/channels/876899628556091432/876954819305275433) message:
i've just jumped up to the newest nightly from b107, and i was wondering why some of my enhanced music wasn't playing? 
first screenshot is the newest nightly, and the second is from 107.

i have another gbs file in the quest as well but it works fine. ü§∑üèª‚Äç‚ôÇÔ∏è

![image](https://cdn.discordapp.com/attachments/1015234265140707338/1015234307830321202/zquest_1MguxfKx1j.png)
![image](https://cdn.discordapp.com/attachments/1015234265140707338/1015234308073603142/zquest_sCwEh03jKM.png)

=== @EmilyV99 (discord: Emily) 09/02/2022 12:24

@connorjclark (discord: connorclark)

=== @ tacochopper 09/02/2022 12:41

happy to share the GBS files for reference if need be too

=== @connorjclark (discord: connorclark) 09/02/2022 15:26

yes that's needed

=== @connorjclark (discord: connorclark) 09/02/2022 16:33

Also there's an open big report for the same thing.
Bug

=== @ tacochopper 09/03/2022 01:17

oh huh, more you know
I‚Äôll upload what I‚Äôve got after work - currently have an older version that works on 107 on my google drive

=== @connorjclark (discord: connorclark) 09/03/2022 03:35

Cool, the more examples the better

=== @connorjclark (discord: connorclark) 09/03/2022 03:40

I'd expect Nightly 2022-07-05 to be the first version it breaks

=== @ tacochopper 09/03/2022 08:03

Yeah the nightly I have been using was‚Ä¶ 28-6-22 I think

=== @connorjclark (discord: connorclark) 09/04/2022 02:33

I was thinking of https://discord.com/channels/876899628556091432/998367633890082836 which is about looping, so may be different (but similar) bug
(meta) thread name was changed: üîìcertain enhanced music not recognised in latest nightly
## üîíScreenshots  Wrong Palette on snap? (#1627)
@ NightmareJames opened this issue on 09/03/2022

Status: closed

Labels: ['bug']

Source: https://discord.com/channels/876899628556091432/1015634206547779605



=== @ NightmareJames 09/03/2022 14:47

Posting pics

![image](https://cdn.discordapp.com/attachments/1015634206547779605/1015634266773782588/zc_screen00001.png)
![image](https://cdn.discordapp.com/attachments/1015634206547779605/1015634267176452186/zc_screen00002.png)
Took from the menu on Test Mode, since my walk-through file is still down from the upgrade
(meta) thread name was changed: Screenshots  Wrong Palette on snap?
August 31st Nightly for everybody's information

=== @ tim 09/03/2022 15:07

there's a 9/2 nightly please check

=== @connorjclark (discord: connorclark) 09/03/2022 15:43

this is the same as #1591

=== @connorjclark (discord: connorclark) 09/04/2022 02:30

(meta) thread name was changed: üîíScreenshots  Wrong Palette on snap?
